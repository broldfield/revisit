var xUe=Object.defineProperty;var SUe=(e,t,n)=>t in e?xUe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var TUe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var _u=(e,t,n)=>(SUe(e,typeof t!="symbol"?t+"":t,n),n);var ogn=TUe((g0n,aoe)=>{function CUe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var oo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function AUe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var $1e={exports:{}},RL={},M1e={exports:{}},Fn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yk=Symbol.for("react.element"),IUe=Symbol.for("react.portal"),kUe=Symbol.for("react.fragment"),RUe=Symbol.for("react.strict_mode"),NUe=Symbol.for("react.profiler"),DUe=Symbol.for("react.provider"),PUe=Symbol.for("react.context"),OUe=Symbol.for("react.forward_ref"),$Ue=Symbol.for("react.suspense"),MUe=Symbol.for("react.memo"),LUe=Symbol.for("react.lazy"),Coe=Symbol.iterator;function FUe(e){return e===null||typeof e!="object"?null:(e=Coe&&e[Coe]||e["@@iterator"],typeof e=="function"?e:null)}var L1e={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F1e=Object.assign,B1e={};function Zx(e,t,n){this.props=e,this.context=t,this.refs=B1e,this.updater=n||L1e}Zx.prototype.isReactComponent={};Zx.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Zx.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function j1e(){}j1e.prototype=Zx.prototype;function XW(e,t,n){this.props=e,this.context=t,this.refs=B1e,this.updater=n||L1e}var QW=XW.prototype=new j1e;QW.constructor=XW;F1e(QW,Zx.prototype);QW.isPureReactComponent=!0;var Aoe=Array.isArray,U1e=Object.prototype.hasOwnProperty,JW={current:null},z1e={key:!0,ref:!0,__self:!0,__source:!0};function V1e(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)U1e.call(t,r)&&!z1e.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:yk,type:e,key:s,ref:o,props:i,_owner:JW.current}}function BUe(e,t){return{$$typeof:yk,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ZW(e){return typeof e=="object"&&e!==null&&e.$$typeof===yk}function jUe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ioe=/\/+/g;function tj(e,t){return typeof e=="object"&&e!==null&&e.key!=null?jUe(""+e.key):t.toString(36)}function bP(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case yk:case IUe:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+tj(o,0):r,Aoe(i)?(n="",e!=null&&(n=e.replace(Ioe,"$&/")+"/"),bP(i,t,n,"",function(l){return l})):i!=null&&(ZW(i)&&(i=BUe(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Ioe,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Aoe(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+tj(s,a);o+=bP(s,t,n,u,i)}else if(u=FUe(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+tj(s,a++),o+=bP(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function AN(e,t,n){if(e==null)return e;var r=[],i=0;return bP(e,r,"","",function(s){return t.call(n,s,i++)}),r}function UUe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var fu={current:null},_P={transition:null},zUe={ReactCurrentDispatcher:fu,ReactCurrentBatchConfig:_P,ReactCurrentOwner:JW};function H1e(){throw Error("act(...) is not supported in production builds of React.")}Fn.Children={map:AN,forEach:function(e,t,n){AN(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return AN(e,function(){t++}),t},toArray:function(e){return AN(e,function(t){return t})||[]},only:function(e){if(!ZW(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Fn.Component=Zx;Fn.Fragment=kUe;Fn.Profiler=NUe;Fn.PureComponent=XW;Fn.StrictMode=RUe;Fn.Suspense=$Ue;Fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zUe;Fn.act=H1e;Fn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=F1e({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=JW.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)U1e.call(t,u)&&!z1e.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:yk,type:e.type,key:i,ref:s,props:r,_owner:o}};Fn.createContext=function(e){return e={$$typeof:PUe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:DUe,_context:e},e.Consumer=e};Fn.createElement=V1e;Fn.createFactory=function(e){var t=V1e.bind(null,e);return t.type=e,t};Fn.createRef=function(){return{current:null}};Fn.forwardRef=function(e){return{$$typeof:OUe,render:e}};Fn.isValidElement=ZW;Fn.lazy=function(e){return{$$typeof:LUe,_payload:{_status:-1,_result:e},_init:UUe}};Fn.memo=function(e,t){return{$$typeof:MUe,type:e,compare:t===void 0?null:t}};Fn.startTransition=function(e){var t=_P.transition;_P.transition={};try{e()}finally{_P.transition=t}};Fn.unstable_act=H1e;Fn.useCallback=function(e,t){return fu.current.useCallback(e,t)};Fn.useContext=function(e){return fu.current.useContext(e)};Fn.useDebugValue=function(){};Fn.useDeferredValue=function(e){return fu.current.useDeferredValue(e)};Fn.useEffect=function(e,t){return fu.current.useEffect(e,t)};Fn.useId=function(){return fu.current.useId()};Fn.useImperativeHandle=function(e,t,n){return fu.current.useImperativeHandle(e,t,n)};Fn.useInsertionEffect=function(e,t){return fu.current.useInsertionEffect(e,t)};Fn.useLayoutEffect=function(e,t){return fu.current.useLayoutEffect(e,t)};Fn.useMemo=function(e,t){return fu.current.useMemo(e,t)};Fn.useReducer=function(e,t,n){return fu.current.useReducer(e,t,n)};Fn.useRef=function(e){return fu.current.useRef(e)};Fn.useState=function(e){return fu.current.useState(e)};Fn.useSyncExternalStore=function(e,t,n){return fu.current.useSyncExternalStore(e,t,n)};Fn.useTransition=function(){return fu.current.useTransition()};Fn.version="18.3.1";M1e.exports=Fn;var I=M1e.exports;const qt=dl(I),BO=CUe({__proto__:null,default:qt},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VUe=I,HUe=Symbol.for("react.element"),qUe=Symbol.for("react.fragment"),WUe=Object.prototype.hasOwnProperty,GUe=VUe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,YUe={key:!0,ref:!0,__self:!0,__source:!0};function q1e(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)WUe.call(t,r)&&!YUe.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:HUe,type:e,key:s,ref:o,props:i,_owner:GUe.current}}RL.Fragment=qUe;RL.jsx=q1e;RL.jsxs=q1e;$1e.exports=RL;var _=$1e.exports,o7={},W1e={exports:{}},sc={},G1e={exports:{}},Y1e={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,q){var P=z.length;z.push(q);e:for(;0<P;){var U=P-1>>>1,W=z[U];if(0<i(W,q))z[U]=q,z[P]=W,P=U;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var q=z[0],P=z.pop();if(P!==q){z[0]=P;e:for(var U=0,W=z.length,B=W>>>1;U<B;){var H=2*(U+1)-1,G=z[H],te=H+1,le=z[te];if(0>i(G,P))te<W&&0>i(le,G)?(z[U]=le,z[te]=P,U=te):(z[U]=G,z[H]=P,U=H);else if(te<W&&0>i(le,P))z[U]=le,z[te]=P,U=te;else break e}}return q}function i(z,q){var P=z.sortIndex-q.sortIndex;return P!==0?P:z.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var q=n(l);q!==null;){if(q.callback===null)r(l);else if(q.startTime<=z)r(l),q.sortIndex=q.expirationTime,t(u,q);else break;q=n(l)}}function w(z){if(m=!1,b(z),!p)if(n(u)!==null)p=!0,L(E);else{var q=n(l);q!==null&&j(w,q.startTime-z)}}function E(z,q){p=!1,m&&(m=!1,y(C),C=-1),h=!0;var P=d;try{for(b(q),f=n(u);f!==null&&(!(f.expirationTime>q)||z&&!R());){var U=f.callback;if(typeof U=="function"){f.callback=null,d=f.priorityLevel;var W=U(f.expirationTime<=q);q=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(u)&&r(u),b(q)}else r(u);f=n(u)}if(f!==null)var B=!0;else{var H=n(l);H!==null&&j(w,H.startTime-q),B=!1}return B}finally{f=null,d=P,h=!1}}var x=!1,T=null,C=-1,A=5,k=-1;function R(){return!(e.unstable_now()-k<A)}function O(){if(T!==null){var z=e.unstable_now();k=z;var q=!0;try{q=T(!0,z)}finally{q?D():(x=!1,T=null)}}else x=!1}var D;if(typeof v=="function")D=function(){v(O)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,F=$.port2;$.port1.onmessage=O,D=function(){F.postMessage(null)}}else D=function(){g(O,0)};function L(z){T=z,x||(x=!0,D())}function j(z,q){C=g(function(){z(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,L(E))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(z){switch(d){case 1:case 2:case 3:var q=3;break;default:q=d}var P=d;d=q;try{return z()}finally{d=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var P=d;d=z;try{return q()}finally{d=P}},e.unstable_scheduleCallback=function(z,q,P){var U=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?U+P:U):P=U,z){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=P+W,z={id:c++,callback:q,priorityLevel:z,startTime:P,expirationTime:W,sortIndex:-1},P>U?(z.sortIndex=P,t(l,z),n(u)===null&&z===n(l)&&(m?(y(C),C=-1):m=!0,j(w,P-U))):(z.sortIndex=W,t(u,z),p||h||(p=!0,L(E))),z},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(z){var q=d;return function(){var P=d;d=q;try{return z.apply(this,arguments)}finally{d=P}}}})(Y1e);G1e.exports=Y1e;var KUe=G1e.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XUe=I,Hl=KUe;function tt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var K1e=new Set,w2={};function Vb(e,t){NE(e,t),NE(e+"Capture",t)}function NE(e,t){for(w2[e]=t,e=0;e<t.length;e++)K1e.add(t[e])}var Am=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),a7=Object.prototype.hasOwnProperty,QUe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,koe={},Roe={};function JUe(e){return a7.call(Roe,e)?!0:a7.call(koe,e)?!1:QUe.test(e)?Roe[e]=!0:(koe[e]=!0,!1)}function ZUe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function e7e(e,t,n,r){if(t===null||typeof t>"u"||ZUe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function du(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Wo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Wo[e]=new du(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Wo[t]=new du(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Wo[e]=new du(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Wo[e]=new du(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Wo[e]=new du(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Wo[e]=new du(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Wo[e]=new du(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Wo[e]=new du(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Wo[e]=new du(e,5,!1,e.toLowerCase(),null,!1,!1)});var eG=/[\-:]([a-z])/g;function tG(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(eG,tG);Wo[t]=new du(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(eG,tG);Wo[t]=new du(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(eG,tG);Wo[t]=new du(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Wo[e]=new du(e,1,!1,e.toLowerCase(),null,!1,!1)});Wo.xlinkHref=new du("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Wo[e]=new du(e,1,!1,e.toLowerCase(),null,!0,!0)});function nG(e,t,n,r){var i=Wo.hasOwnProperty(t)?Wo[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(e7e(t,n,i,r)&&(n=null),r||i===null?JUe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var rg=XUe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,IN=Symbol.for("react.element"),vw=Symbol.for("react.portal"),bw=Symbol.for("react.fragment"),rG=Symbol.for("react.strict_mode"),u7=Symbol.for("react.profiler"),X1e=Symbol.for("react.provider"),Q1e=Symbol.for("react.context"),iG=Symbol.for("react.forward_ref"),l7=Symbol.for("react.suspense"),c7=Symbol.for("react.suspense_list"),sG=Symbol.for("react.memo"),Hg=Symbol.for("react.lazy"),J1e=Symbol.for("react.offscreen"),Noe=Symbol.iterator;function ST(e){return e===null||typeof e!="object"?null:(e=Noe&&e[Noe]||e["@@iterator"],typeof e=="function"?e:null)}var Fi=Object.assign,nj;function IC(e){if(nj===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);nj=t&&t[1]||""}return`
`+nj+e}var rj=!1;function ij(e,t){if(!e||rj)return"";rj=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{rj=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?IC(e):""}function t7e(e){switch(e.tag){case 5:return IC(e.type);case 16:return IC("Lazy");case 13:return IC("Suspense");case 19:return IC("SuspenseList");case 0:case 2:case 15:return e=ij(e.type,!1),e;case 11:return e=ij(e.type.render,!1),e;case 1:return e=ij(e.type,!0),e;default:return""}}function f7(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case bw:return"Fragment";case vw:return"Portal";case u7:return"Profiler";case rG:return"StrictMode";case l7:return"Suspense";case c7:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Q1e:return(e.displayName||"Context")+".Consumer";case X1e:return(e._context.displayName||"Context")+".Provider";case iG:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case sG:return t=e.displayName||null,t!==null?t:f7(e.type)||"Memo";case Hg:t=e._payload,e=e._init;try{return f7(e(t))}catch{}}return null}function n7e(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return f7(t);case 8:return t===rG?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Q0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Z1e(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function r7e(e){var t=Z1e(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function kN(e){e._valueTracker||(e._valueTracker=r7e(e))}function ebe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Z1e(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function jO(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function d7(e,t){var n=t.checked;return Fi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Doe(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Q0(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function tbe(e,t){t=t.checked,t!=null&&nG(e,"checked",t,!1)}function h7(e,t){tbe(e,t);var n=Q0(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?p7(e,t.type,n):t.hasOwnProperty("defaultValue")&&p7(e,t.type,Q0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Poe(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function p7(e,t,n){(t!=="number"||jO(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var kC=Array.isArray;function Hw(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q0(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function m7(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(tt(91));return Fi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ooe(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(tt(92));if(kC(n)){if(1<n.length)throw Error(tt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Q0(n)}}function nbe(e,t){var n=Q0(t.value),r=Q0(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function $oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function rbe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function g7(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?rbe(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var RN,ibe=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(RN=RN||document.createElement("div"),RN.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=RN.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function E2(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var bA={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},i7e=["Webkit","ms","Moz","O"];Object.keys(bA).forEach(function(e){i7e.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),bA[t]=bA[e]})});function sbe(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||bA.hasOwnProperty(e)&&bA[e]?(""+t).trim():t+"px"}function obe(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=sbe(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var s7e=Fi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function y7(e,t){if(t){if(s7e[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(tt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(tt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(tt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(tt(62))}}function v7(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var b7=null;function oG(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _7=null,qw=null,Ww=null;function Moe(e){if(e=_k(e)){if(typeof _7!="function")throw Error(tt(280));var t=e.stateNode;t&&(t=$L(t),_7(e.stateNode,e.type,t))}}function abe(e){qw?Ww?Ww.push(e):Ww=[e]:qw=e}function ube(){if(qw){var e=qw,t=Ww;if(Ww=qw=null,Moe(e),t)for(e=0;e<t.length;e++)Moe(t[e])}}function lbe(e,t){return e(t)}function cbe(){}var sj=!1;function fbe(e,t,n){if(sj)return e(t,n);sj=!0;try{return lbe(e,t,n)}finally{sj=!1,(qw!==null||Ww!==null)&&(cbe(),ube())}}function x2(e,t){var n=e.stateNode;if(n===null)return null;var r=$L(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(tt(231,t,typeof n));return n}var w7=!1;if(Am)try{var TT={};Object.defineProperty(TT,"passive",{get:function(){w7=!0}}),window.addEventListener("test",TT,TT),window.removeEventListener("test",TT,TT)}catch{w7=!1}function o7e(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var _A=!1,UO=null,zO=!1,E7=null,a7e={onError:function(e){_A=!0,UO=e}};function u7e(e,t,n,r,i,s,o,a,u){_A=!1,UO=null,o7e.apply(a7e,arguments)}function l7e(e,t,n,r,i,s,o,a,u){if(u7e.apply(this,arguments),_A){if(_A){var l=UO;_A=!1,UO=null}else throw Error(tt(198));zO||(zO=!0,E7=l)}}function Hb(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function dbe(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Loe(e){if(Hb(e)!==e)throw Error(tt(188))}function c7e(e){var t=e.alternate;if(!t){if(t=Hb(e),t===null)throw Error(tt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Loe(i),e;if(s===r)return Loe(i),t;s=s.sibling}throw Error(tt(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(tt(189))}}if(n.alternate!==r)throw Error(tt(190))}if(n.tag!==3)throw Error(tt(188));return n.stateNode.current===n?e:t}function hbe(e){return e=c7e(e),e!==null?pbe(e):null}function pbe(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=pbe(e);if(t!==null)return t;e=e.sibling}return null}var mbe=Hl.unstable_scheduleCallback,Foe=Hl.unstable_cancelCallback,f7e=Hl.unstable_shouldYield,d7e=Hl.unstable_requestPaint,us=Hl.unstable_now,h7e=Hl.unstable_getCurrentPriorityLevel,aG=Hl.unstable_ImmediatePriority,gbe=Hl.unstable_UserBlockingPriority,VO=Hl.unstable_NormalPriority,p7e=Hl.unstable_LowPriority,ybe=Hl.unstable_IdlePriority,NL=null,vh=null;function m7e(e){if(vh&&typeof vh.onCommitFiberRoot=="function")try{vh.onCommitFiberRoot(NL,e,void 0,(e.current.flags&128)===128)}catch{}}var Kf=Math.clz32?Math.clz32:v7e,g7e=Math.log,y7e=Math.LN2;function v7e(e){return e>>>=0,e===0?32:31-(g7e(e)/y7e|0)|0}var NN=64,DN=4194304;function RC(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function HO(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=RC(a):(s&=o,s!==0&&(r=RC(s)))}else o=n&~i,o!==0?r=RC(o):s!==0&&(r=RC(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Kf(t),i=1<<n,r|=e[n],t&=~i;return r}function b7e(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _7e(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Kf(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=b7e(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function x7(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function vbe(){var e=NN;return NN<<=1,!(NN&4194240)&&(NN=64),e}function oj(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vk(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Kf(t),e[t]=n}function w7e(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Kf(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function uG(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Kf(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Mr=0;function bbe(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var _be,lG,wbe,Ebe,xbe,S7=!1,PN=[],S0=null,T0=null,C0=null,S2=new Map,T2=new Map,Zg=[],E7e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Boe(e,t){switch(e){case"focusin":case"focusout":S0=null;break;case"dragenter":case"dragleave":T0=null;break;case"mouseover":case"mouseout":C0=null;break;case"pointerover":case"pointerout":S2.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":T2.delete(t.pointerId)}}function CT(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=_k(t),t!==null&&lG(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function x7e(e,t,n,r,i){switch(t){case"focusin":return S0=CT(S0,e,t,n,r,i),!0;case"dragenter":return T0=CT(T0,e,t,n,r,i),!0;case"mouseover":return C0=CT(C0,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return S2.set(s,CT(S2.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,T2.set(s,CT(T2.get(s)||null,e,t,n,r,i)),!0}return!1}function Sbe(e){var t=d1(e.target);if(t!==null){var n=Hb(t);if(n!==null){if(t=n.tag,t===13){if(t=dbe(n),t!==null){e.blockedOn=t,xbe(e.priority,function(){wbe(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wP(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=T7(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);b7=r,n.target.dispatchEvent(r),b7=null}else return t=_k(n),t!==null&&lG(t),e.blockedOn=n,!1;t.shift()}return!0}function joe(e,t,n){wP(e)&&n.delete(t)}function S7e(){S7=!1,S0!==null&&wP(S0)&&(S0=null),T0!==null&&wP(T0)&&(T0=null),C0!==null&&wP(C0)&&(C0=null),S2.forEach(joe),T2.forEach(joe)}function AT(e,t){e.blockedOn===t&&(e.blockedOn=null,S7||(S7=!0,Hl.unstable_scheduleCallback(Hl.unstable_NormalPriority,S7e)))}function C2(e){function t(i){return AT(i,e)}if(0<PN.length){AT(PN[0],e);for(var n=1;n<PN.length;n++){var r=PN[n];r.blockedOn===e&&(r.blockedOn=null)}}for(S0!==null&&AT(S0,e),T0!==null&&AT(T0,e),C0!==null&&AT(C0,e),S2.forEach(t),T2.forEach(t),n=0;n<Zg.length;n++)r=Zg[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Zg.length&&(n=Zg[0],n.blockedOn===null);)Sbe(n),n.blockedOn===null&&Zg.shift()}var Gw=rg.ReactCurrentBatchConfig,qO=!0;function T7e(e,t,n,r){var i=Mr,s=Gw.transition;Gw.transition=null;try{Mr=1,cG(e,t,n,r)}finally{Mr=i,Gw.transition=s}}function C7e(e,t,n,r){var i=Mr,s=Gw.transition;Gw.transition=null;try{Mr=4,cG(e,t,n,r)}finally{Mr=i,Gw.transition=s}}function cG(e,t,n,r){if(qO){var i=T7(e,t,n,r);if(i===null)gj(e,t,r,WO,n),Boe(e,r);else if(x7e(i,e,t,n,r))r.stopPropagation();else if(Boe(e,r),t&4&&-1<E7e.indexOf(e)){for(;i!==null;){var s=_k(i);if(s!==null&&_be(s),s=T7(e,t,n,r),s===null&&gj(e,t,r,WO,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else gj(e,t,r,null,n)}}var WO=null;function T7(e,t,n,r){if(WO=null,e=oG(r),e=d1(e),e!==null)if(t=Hb(e),t===null)e=null;else if(n=t.tag,n===13){if(e=dbe(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return WO=e,null}function Tbe(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(h7e()){case aG:return 1;case gbe:return 4;case VO:case p7e:return 16;case ybe:return 536870912;default:return 16}default:return 16}}var l0=null,fG=null,EP=null;function Cbe(){if(EP)return EP;var e,t=fG,n=t.length,r,i="value"in l0?l0.value:l0.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return EP=i.slice(e,1<r?1-r:void 0)}function xP(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ON(){return!0}function Uoe(){return!1}function oc(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ON:Uoe,this.isPropagationStopped=Uoe,this}return Fi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ON)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ON)},persist:function(){},isPersistent:ON}),t}var eS={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dG=oc(eS),bk=Fi({},eS,{view:0,detail:0}),A7e=oc(bk),aj,uj,IT,DL=Fi({},bk,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hG,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==IT&&(IT&&e.type==="mousemove"?(aj=e.screenX-IT.screenX,uj=e.screenY-IT.screenY):uj=aj=0,IT=e),aj)},movementY:function(e){return"movementY"in e?e.movementY:uj}}),zoe=oc(DL),I7e=Fi({},DL,{dataTransfer:0}),k7e=oc(I7e),R7e=Fi({},bk,{relatedTarget:0}),lj=oc(R7e),N7e=Fi({},eS,{animationName:0,elapsedTime:0,pseudoElement:0}),D7e=oc(N7e),P7e=Fi({},eS,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),O7e=oc(P7e),$7e=Fi({},eS,{data:0}),Voe=oc($7e),M7e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},L7e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},F7e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function B7e(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=F7e[e])?!!t[e]:!1}function hG(){return B7e}var j7e=Fi({},bk,{key:function(e){if(e.key){var t=M7e[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=xP(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?L7e[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hG,charCode:function(e){return e.type==="keypress"?xP(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?xP(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),U7e=oc(j7e),z7e=Fi({},DL,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hoe=oc(z7e),V7e=Fi({},bk,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hG}),H7e=oc(V7e),q7e=Fi({},eS,{propertyName:0,elapsedTime:0,pseudoElement:0}),W7e=oc(q7e),G7e=Fi({},DL,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Y7e=oc(G7e),K7e=[9,13,27,32],pG=Am&&"CompositionEvent"in window,wA=null;Am&&"documentMode"in document&&(wA=document.documentMode);var X7e=Am&&"TextEvent"in window&&!wA,Abe=Am&&(!pG||wA&&8<wA&&11>=wA),qoe=" ",Woe=!1;function Ibe(e,t){switch(e){case"keyup":return K7e.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kbe(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _w=!1;function Q7e(e,t){switch(e){case"compositionend":return kbe(t);case"keypress":return t.which!==32?null:(Woe=!0,qoe);case"textInput":return e=t.data,e===qoe&&Woe?null:e;default:return null}}function J7e(e,t){if(_w)return e==="compositionend"||!pG&&Ibe(e,t)?(e=Cbe(),EP=fG=l0=null,_w=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Abe&&t.locale!=="ko"?null:t.data;default:return null}}var Z7e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Goe(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Z7e[e.type]:t==="textarea"}function Rbe(e,t,n,r){abe(r),t=GO(t,"onChange"),0<t.length&&(n=new dG("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var EA=null,A2=null;function eze(e){Ube(e,0)}function PL(e){var t=xw(e);if(ebe(t))return e}function tze(e,t){if(e==="change")return t}var Nbe=!1;if(Am){var cj;if(Am){var fj="oninput"in document;if(!fj){var Yoe=document.createElement("div");Yoe.setAttribute("oninput","return;"),fj=typeof Yoe.oninput=="function"}cj=fj}else cj=!1;Nbe=cj&&(!document.documentMode||9<document.documentMode)}function Koe(){EA&&(EA.detachEvent("onpropertychange",Dbe),A2=EA=null)}function Dbe(e){if(e.propertyName==="value"&&PL(A2)){var t=[];Rbe(t,A2,e,oG(e)),fbe(eze,t)}}function nze(e,t,n){e==="focusin"?(Koe(),EA=t,A2=n,EA.attachEvent("onpropertychange",Dbe)):e==="focusout"&&Koe()}function rze(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return PL(A2)}function ize(e,t){if(e==="click")return PL(t)}function sze(e,t){if(e==="input"||e==="change")return PL(t)}function oze(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var id=typeof Object.is=="function"?Object.is:oze;function I2(e,t){if(id(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!a7.call(t,i)||!id(e[i],t[i]))return!1}return!0}function Xoe(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qoe(e,t){var n=Xoe(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xoe(n)}}function Pbe(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Pbe(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Obe(){for(var e=window,t=jO();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=jO(e.document)}return t}function mG(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function aze(e){var t=Obe(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Pbe(n.ownerDocument.documentElement,n)){if(r!==null&&mG(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Qoe(n,s);var o=Qoe(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var uze=Am&&"documentMode"in document&&11>=document.documentMode,ww=null,C7=null,xA=null,A7=!1;function Joe(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;A7||ww==null||ww!==jO(r)||(r=ww,"selectionStart"in r&&mG(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xA&&I2(xA,r)||(xA=r,r=GO(C7,"onSelect"),0<r.length&&(t=new dG("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ww)))}function $N(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ew={animationend:$N("Animation","AnimationEnd"),animationiteration:$N("Animation","AnimationIteration"),animationstart:$N("Animation","AnimationStart"),transitionend:$N("Transition","TransitionEnd")},dj={},$be={};Am&&($be=document.createElement("div").style,"AnimationEvent"in window||(delete Ew.animationend.animation,delete Ew.animationiteration.animation,delete Ew.animationstart.animation),"TransitionEvent"in window||delete Ew.transitionend.transition);function OL(e){if(dj[e])return dj[e];if(!Ew[e])return e;var t=Ew[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in $be)return dj[e]=t[n];return e}var Mbe=OL("animationend"),Lbe=OL("animationiteration"),Fbe=OL("animationstart"),Bbe=OL("transitionend"),jbe=new Map,Zoe="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function By(e,t){jbe.set(e,t),Vb(t,[e])}for(var hj=0;hj<Zoe.length;hj++){var pj=Zoe[hj],lze=pj.toLowerCase(),cze=pj[0].toUpperCase()+pj.slice(1);By(lze,"on"+cze)}By(Mbe,"onAnimationEnd");By(Lbe,"onAnimationIteration");By(Fbe,"onAnimationStart");By("dblclick","onDoubleClick");By("focusin","onFocus");By("focusout","onBlur");By(Bbe,"onTransitionEnd");NE("onMouseEnter",["mouseout","mouseover"]);NE("onMouseLeave",["mouseout","mouseover"]);NE("onPointerEnter",["pointerout","pointerover"]);NE("onPointerLeave",["pointerout","pointerover"]);Vb("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vb("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vb("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vb("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vb("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vb("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var NC="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fze=new Set("cancel close invalid load scroll toggle".split(" ").concat(NC));function eae(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,l7e(r,t,void 0,e),e.currentTarget=null}function Ube(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;eae(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;eae(i,a,l),s=u}}}if(zO)throw e=E7,zO=!1,E7=null,e}function fi(e,t){var n=t[D7];n===void 0&&(n=t[D7]=new Set);var r=e+"__bubble";n.has(r)||(zbe(t,e,2,!1),n.add(r))}function mj(e,t,n){var r=0;t&&(r|=4),zbe(n,e,r,t)}var MN="_reactListening"+Math.random().toString(36).slice(2);function k2(e){if(!e[MN]){e[MN]=!0,K1e.forEach(function(n){n!=="selectionchange"&&(fze.has(n)||mj(n,!1,e),mj(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[MN]||(t[MN]=!0,mj("selectionchange",!1,t))}}function zbe(e,t,n,r){switch(Tbe(t)){case 1:var i=T7e;break;case 4:i=C7e;break;default:i=cG}n=i.bind(null,t,n,e),i=void 0,!w7||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function gj(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=d1(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}fbe(function(){var l=s,c=oG(n),f=[];e:{var d=jbe.get(e);if(d!==void 0){var h=dG,p=e;switch(e){case"keypress":if(xP(n)===0)break e;case"keydown":case"keyup":h=U7e;break;case"focusin":p="focus",h=lj;break;case"focusout":p="blur",h=lj;break;case"beforeblur":case"afterblur":h=lj;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=zoe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=k7e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=H7e;break;case Mbe:case Lbe:case Fbe:h=D7e;break;case Bbe:h=W7e;break;case"scroll":h=A7e;break;case"wheel":h=Y7e;break;case"copy":case"cut":case"paste":h=O7e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Hoe}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,b;v!==null;){b=v;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,y!==null&&(w=x2(v,y),w!=null&&m.push(R2(v,w,b)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==b7&&(p=n.relatedTarget||n.fromElement)&&(d1(p)||p[Im]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?d1(p):null,p!==null&&(g=Hb(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=zoe,w="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=Hoe,w="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:xw(h),b=p==null?d:xw(p),d=new m(w,v+"leave",h,n,c),d.target=g,d.relatedTarget=b,w=null,d1(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=b,m.relatedTarget=g,w=m),g=w,h&&p)t:{for(m=h,y=p,v=0,b=m;b;b=D_(b))v++;for(b=0,w=y;w;w=D_(w))b++;for(;0<v-b;)m=D_(m),v--;for(;0<b-v;)y=D_(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=D_(m),y=D_(y)}m=null}else m=null;h!==null&&tae(f,d,h,m,!1),p!==null&&g!==null&&tae(f,g,p,m,!0)}}e:{if(d=l?xw(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var E=tze;else if(Goe(d))if(Nbe)E=sze;else{E=rze;var x=nze}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=ize);if(E&&(E=E(e,l))){Rbe(f,E,n,c);break e}x&&x(e,d,l),e==="focusout"&&(x=d._wrapperState)&&x.controlled&&d.type==="number"&&p7(d,"number",d.value)}switch(x=l?xw(l):window,e){case"focusin":(Goe(x)||x.contentEditable==="true")&&(ww=x,C7=l,xA=null);break;case"focusout":xA=C7=ww=null;break;case"mousedown":A7=!0;break;case"contextmenu":case"mouseup":case"dragend":A7=!1,Joe(f,n,c);break;case"selectionchange":if(uze)break;case"keydown":case"keyup":Joe(f,n,c)}var T;if(pG)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else _w?Ibe(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Abe&&n.locale!=="ko"&&(_w||C!=="onCompositionStart"?C==="onCompositionEnd"&&_w&&(T=Cbe()):(l0=c,fG="value"in l0?l0.value:l0.textContent,_w=!0)),x=GO(l,C),0<x.length&&(C=new Voe(C,e,null,n,c),f.push({event:C,listeners:x}),T?C.data=T:(T=kbe(n),T!==null&&(C.data=T)))),(T=X7e?Q7e(e,n):J7e(e,n))&&(l=GO(l,"onBeforeInput"),0<l.length&&(c=new Voe("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=T))}Ube(f,t)})}function R2(e,t,n){return{instance:e,listener:t,currentTarget:n}}function GO(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=x2(e,n),s!=null&&r.unshift(R2(e,s,i)),s=x2(e,t),s!=null&&r.push(R2(e,s,i))),e=e.return}return r}function D_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function tae(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=x2(n,s),u!=null&&o.unshift(R2(n,u,a))):i||(u=x2(n,s),u!=null&&o.push(R2(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var dze=/\r\n?/g,hze=/\u0000|\uFFFD/g;function nae(e){return(typeof e=="string"?e:""+e).replace(dze,`
`).replace(hze,"")}function LN(e,t,n){if(t=nae(t),nae(e)!==t&&n)throw Error(tt(425))}function YO(){}var I7=null,k7=null;function R7(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var N7=typeof setTimeout=="function"?setTimeout:void 0,pze=typeof clearTimeout=="function"?clearTimeout:void 0,rae=typeof Promise=="function"?Promise:void 0,mze=typeof queueMicrotask=="function"?queueMicrotask:typeof rae<"u"?function(e){return rae.resolve(null).then(e).catch(gze)}:N7;function gze(e){setTimeout(function(){throw e})}function yj(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),C2(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);C2(t)}function A0(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function iae(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var tS=Math.random().toString(36).slice(2),Xd="__reactFiber$"+tS,N2="__reactProps$"+tS,Im="__reactContainer$"+tS,D7="__reactEvents$"+tS,yze="__reactListeners$"+tS,vze="__reactHandles$"+tS;function d1(e){var t=e[Xd];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Im]||n[Xd]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=iae(e);e!==null;){if(n=e[Xd])return n;e=iae(e)}return t}e=n,n=e.parentNode}return null}function _k(e){return e=e[Xd]||e[Im],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function xw(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(tt(33))}function $L(e){return e[N2]||null}var P7=[],Sw=-1;function jy(e){return{current:e}}function gi(e){0>Sw||(e.current=P7[Sw],P7[Sw]=null,Sw--)}function oi(e,t){Sw++,P7[Sw]=e.current,e.current=t}var J0={},Aa=jy(J0),qu=jy(!1),K1=J0;function DE(e,t){var n=e.type.contextTypes;if(!n)return J0;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Wu(e){return e=e.childContextTypes,e!=null}function KO(){gi(qu),gi(Aa)}function sae(e,t,n){if(Aa.current!==J0)throw Error(tt(168));oi(Aa,t),oi(qu,n)}function Vbe(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(tt(108,n7e(e)||"Unknown",i));return Fi({},n,r)}function XO(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||J0,K1=Aa.current,oi(Aa,e),oi(qu,qu.current),!0}function oae(e,t,n){var r=e.stateNode;if(!r)throw Error(tt(169));n?(e=Vbe(e,t,K1),r.__reactInternalMemoizedMergedChildContext=e,gi(qu),gi(Aa),oi(Aa,e)):gi(qu),oi(qu,n)}var Vp=null,ML=!1,vj=!1;function Hbe(e){Vp===null?Vp=[e]:Vp.push(e)}function bze(e){ML=!0,Hbe(e)}function Uy(){if(!vj&&Vp!==null){vj=!0;var e=0,t=Mr;try{var n=Vp;for(Mr=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Vp=null,ML=!1}catch(i){throw Vp!==null&&(Vp=Vp.slice(e+1)),mbe(aG,Uy),i}finally{Mr=t,vj=!1}}return null}var Tw=[],Cw=0,QO=null,JO=0,xc=[],Sc=0,X1=null,tm=1,nm="";function Lv(e,t){Tw[Cw++]=JO,Tw[Cw++]=QO,QO=e,JO=t}function qbe(e,t,n){xc[Sc++]=tm,xc[Sc++]=nm,xc[Sc++]=X1,X1=e;var r=tm;e=nm;var i=32-Kf(r)-1;r&=~(1<<i),n+=1;var s=32-Kf(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,tm=1<<32-Kf(t)+i|n<<i|r,nm=s+e}else tm=1<<s|n<<i|r,nm=e}function gG(e){e.return!==null&&(Lv(e,1),qbe(e,1,0))}function yG(e){for(;e===QO;)QO=Tw[--Cw],Tw[Cw]=null,JO=Tw[--Cw],Tw[Cw]=null;for(;e===X1;)X1=xc[--Sc],xc[Sc]=null,nm=xc[--Sc],xc[Sc]=null,tm=xc[--Sc],xc[Sc]=null}var Fl=null,Rl=null,Ci=!1,Df=null;function Wbe(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function aae(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Fl=e,Rl=A0(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Fl=e,Rl=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=X1!==null?{id:tm,overflow:nm}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Dc(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Fl=e,Rl=null,!0):!1;default:return!1}}function O7(e){return(e.mode&1)!==0&&(e.flags&128)===0}function $7(e){if(Ci){var t=Rl;if(t){var n=t;if(!aae(e,t)){if(O7(e))throw Error(tt(418));t=A0(n.nextSibling);var r=Fl;t&&aae(e,t)?Wbe(r,n):(e.flags=e.flags&-4097|2,Ci=!1,Fl=e)}}else{if(O7(e))throw Error(tt(418));e.flags=e.flags&-4097|2,Ci=!1,Fl=e}}}function uae(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Fl=e}function FN(e){if(e!==Fl)return!1;if(!Ci)return uae(e),Ci=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!R7(e.type,e.memoizedProps)),t&&(t=Rl)){if(O7(e))throw Gbe(),Error(tt(418));for(;t;)Wbe(e,t),t=A0(t.nextSibling)}if(uae(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(tt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Rl=A0(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Rl=null}}else Rl=Fl?A0(e.stateNode.nextSibling):null;return!0}function Gbe(){for(var e=Rl;e;)e=A0(e.nextSibling)}function PE(){Rl=Fl=null,Ci=!1}function vG(e){Df===null?Df=[e]:Df.push(e)}var _ze=rg.ReactCurrentBatchConfig;function kT(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(tt(309));var r=n.stateNode}if(!r)throw Error(tt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(tt(284));if(!n._owner)throw Error(tt(290,e))}return e}function BN(e,t){throw e=Object.prototype.toString.call(t),Error(tt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function lae(e){var t=e._init;return t(e._payload)}function Ybe(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=N0(y,v),y.index=0,y.sibling=null,y}function s(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,w){return v===null||v.tag!==6?(v=Tj(b,y.mode,w),v.return=y,v):(v=i(v,b),v.return=y,v)}function u(y,v,b,w){var E=b.type;return E===bw?c(y,v,b.props.children,w,b.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Hg&&lae(E)===v.type)?(w=i(v,b.props),w.ref=kT(y,v,b),w.return=y,w):(w=RP(b.type,b.key,b.props,null,y.mode,w),w.ref=kT(y,v,b),w.return=y,w)}function l(y,v,b,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=Cj(b,y.mode,w),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function c(y,v,b,w,E){return v===null||v.tag!==7?(v=P1(b,y.mode,w,E),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Tj(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case IN:return b=RP(v.type,v.key,v.props,null,y.mode,b),b.ref=kT(y,null,v),b.return=y,b;case vw:return v=Cj(v,y.mode,b),v.return=y,v;case Hg:var w=v._init;return f(y,w(v._payload),b)}if(kC(v)||ST(v))return v=P1(v,y.mode,b,null),v.return=y,v;BN(y,v)}return null}function d(y,v,b,w){var E=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return E!==null?null:a(y,v,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case IN:return b.key===E?u(y,v,b,w):null;case vw:return b.key===E?l(y,v,b,w):null;case Hg:return E=b._init,d(y,v,E(b._payload),w)}if(kC(b)||ST(b))return E!==null?null:c(y,v,b,w,null);BN(y,b)}return null}function h(y,v,b,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(b)||null,a(v,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case IN:return y=y.get(w.key===null?b:w.key)||null,u(v,y,w,E);case vw:return y=y.get(w.key===null?b:w.key)||null,l(v,y,w,E);case Hg:var x=w._init;return h(y,v,b,x(w._payload),E)}if(kC(w)||ST(w))return y=y.get(b)||null,c(v,y,w,E,null);BN(v,w)}return null}function p(y,v,b,w){for(var E=null,x=null,T=v,C=v=0,A=null;T!==null&&C<b.length;C++){T.index>C?(A=T,T=null):A=T.sibling;var k=d(y,T,b[C],w);if(k===null){T===null&&(T=A);break}e&&T&&k.alternate===null&&t(y,T),v=s(k,v,C),x===null?E=k:x.sibling=k,x=k,T=A}if(C===b.length)return n(y,T),Ci&&Lv(y,C),E;if(T===null){for(;C<b.length;C++)T=f(y,b[C],w),T!==null&&(v=s(T,v,C),x===null?E=T:x.sibling=T,x=T);return Ci&&Lv(y,C),E}for(T=r(y,T);C<b.length;C++)A=h(T,y,C,b[C],w),A!==null&&(e&&A.alternate!==null&&T.delete(A.key===null?C:A.key),v=s(A,v,C),x===null?E=A:x.sibling=A,x=A);return e&&T.forEach(function(R){return t(y,R)}),Ci&&Lv(y,C),E}function m(y,v,b,w){var E=ST(b);if(typeof E!="function")throw Error(tt(150));if(b=E.call(b),b==null)throw Error(tt(151));for(var x=E=null,T=v,C=v=0,A=null,k=b.next();T!==null&&!k.done;C++,k=b.next()){T.index>C?(A=T,T=null):A=T.sibling;var R=d(y,T,k.value,w);if(R===null){T===null&&(T=A);break}e&&T&&R.alternate===null&&t(y,T),v=s(R,v,C),x===null?E=R:x.sibling=R,x=R,T=A}if(k.done)return n(y,T),Ci&&Lv(y,C),E;if(T===null){for(;!k.done;C++,k=b.next())k=f(y,k.value,w),k!==null&&(v=s(k,v,C),x===null?E=k:x.sibling=k,x=k);return Ci&&Lv(y,C),E}for(T=r(y,T);!k.done;C++,k=b.next())k=h(T,y,C,k.value,w),k!==null&&(e&&k.alternate!==null&&T.delete(k.key===null?C:k.key),v=s(k,v,C),x===null?E=k:x.sibling=k,x=k);return e&&T.forEach(function(O){return t(y,O)}),Ci&&Lv(y,C),E}function g(y,v,b,w){if(typeof b=="object"&&b!==null&&b.type===bw&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case IN:e:{for(var E=b.key,x=v;x!==null;){if(x.key===E){if(E=b.type,E===bw){if(x.tag===7){n(y,x.sibling),v=i(x,b.props.children),v.return=y,y=v;break e}}else if(x.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Hg&&lae(E)===x.type){n(y,x.sibling),v=i(x,b.props),v.ref=kT(y,x,b),v.return=y,y=v;break e}n(y,x);break}else t(y,x);x=x.sibling}b.type===bw?(v=P1(b.props.children,y.mode,w,b.key),v.return=y,y=v):(w=RP(b.type,b.key,b.props,null,y.mode,w),w.ref=kT(y,v,b),w.return=y,y=w)}return o(y);case vw:e:{for(x=b.key;v!==null;){if(v.key===x)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=Cj(b,y.mode,w),v.return=y,y=v}return o(y);case Hg:return x=b._init,g(y,v,x(b._payload),w)}if(kC(b))return p(y,v,b,w);if(ST(b))return m(y,v,b,w);BN(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=Tj(b,y.mode,w),v.return=y,y=v),o(y)):n(y,v)}return g}var OE=Ybe(!0),Kbe=Ybe(!1),ZO=jy(null),e$=null,Aw=null,bG=null;function _G(){bG=Aw=e$=null}function wG(e){var t=ZO.current;gi(ZO),e._currentValue=t}function M7(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Yw(e,t){e$=e,bG=Aw=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Bu=!0),e.firstContext=null)}function Vc(e){var t=e._currentValue;if(bG!==e)if(e={context:e,memoizedValue:t,next:null},Aw===null){if(e$===null)throw Error(tt(308));Aw=e,e$.dependencies={lanes:0,firstContext:e}}else Aw=Aw.next=e;return t}var h1=null;function EG(e){h1===null?h1=[e]:h1.push(e)}function Xbe(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,EG(t)):(n.next=i.next,i.next=n),t.interleaved=n,km(e,r)}function km(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var qg=!1;function xG(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qbe(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function hm(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function I0(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,fr&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,km(e,n)}return i=r.interleaved,i===null?(t.next=t,EG(r)):(t.next=i.next,i.next=t),r.interleaved=t,km(e,n)}function SP(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,uG(e,n)}}function cae(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function t$(e,t,n,r){var i=e.updateQueue;qg=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Fi({},f,d);break e;case 2:qg=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);J1|=o,e.lanes=o,e.memoizedState=f}}function fae(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(tt(191,i));i.call(r)}}}var wk={},bh=jy(wk),D2=jy(wk),P2=jy(wk);function p1(e){if(e===wk)throw Error(tt(174));return e}function SG(e,t){switch(oi(P2,t),oi(D2,e),oi(bh,wk),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:g7(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=g7(t,e)}gi(bh),oi(bh,t)}function $E(){gi(bh),gi(D2),gi(P2)}function Jbe(e){p1(P2.current);var t=p1(bh.current),n=g7(t,e.type);t!==n&&(oi(D2,e),oi(bh,n))}function TG(e){D2.current===e&&(gi(bh),gi(D2))}var Oi=jy(0);function n$(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var bj=[];function CG(){for(var e=0;e<bj.length;e++)bj[e]._workInProgressVersionPrimary=null;bj.length=0}var TP=rg.ReactCurrentDispatcher,_j=rg.ReactCurrentBatchConfig,Q1=0,Mi=null,Ns=null,to=null,r$=!1,SA=!1,O2=0,wze=0;function ra(){throw Error(tt(321))}function AG(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!id(e[n],t[n]))return!1;return!0}function IG(e,t,n,r,i,s){if(Q1=s,Mi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,TP.current=e===null||e.memoizedState===null?Tze:Cze,e=n(r,i),SA){s=0;do{if(SA=!1,O2=0,25<=s)throw Error(tt(301));s+=1,to=Ns=null,t.updateQueue=null,TP.current=Aze,e=n(r,i)}while(SA)}if(TP.current=i$,t=Ns!==null&&Ns.next!==null,Q1=0,to=Ns=Mi=null,r$=!1,t)throw Error(tt(300));return e}function kG(){var e=O2!==0;return O2=0,e}function jd(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return to===null?Mi.memoizedState=to=e:to=to.next=e,to}function Hc(){if(Ns===null){var e=Mi.alternate;e=e!==null?e.memoizedState:null}else e=Ns.next;var t=to===null?Mi.memoizedState:to.next;if(t!==null)to=t,Ns=e;else{if(e===null)throw Error(tt(310));Ns=e,e={memoizedState:Ns.memoizedState,baseState:Ns.baseState,baseQueue:Ns.baseQueue,queue:Ns.queue,next:null},to===null?Mi.memoizedState=to=e:to=to.next=e}return to}function $2(e,t){return typeof t=="function"?t(e):t}function wj(e){var t=Hc(),n=t.queue;if(n===null)throw Error(tt(311));n.lastRenderedReducer=e;var r=Ns,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((Q1&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Mi.lanes|=c,J1|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,id(r,t.memoizedState)||(Bu=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Mi.lanes|=s,J1|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ej(e){var t=Hc(),n=t.queue;if(n===null)throw Error(tt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);id(s,t.memoizedState)||(Bu=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Zbe(){}function e_e(e,t){var n=Mi,r=Hc(),i=t(),s=!id(r.memoizedState,i);if(s&&(r.memoizedState=i,Bu=!0),r=r.queue,RG(r_e.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||to!==null&&to.memoizedState.tag&1){if(n.flags|=2048,M2(9,n_e.bind(null,n,r,i,t),void 0,null),po===null)throw Error(tt(349));Q1&30||t_e(n,t,i)}return i}function t_e(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Mi.updateQueue,t===null?(t={lastEffect:null,stores:null},Mi.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function n_e(e,t,n,r){t.value=n,t.getSnapshot=r,i_e(t)&&s_e(e)}function r_e(e,t,n){return n(function(){i_e(t)&&s_e(e)})}function i_e(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!id(e,n)}catch{return!0}}function s_e(e){var t=km(e,1);t!==null&&Xf(t,e,1,-1)}function dae(e){var t=jd();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$2,lastRenderedState:e},t.queue=e,e=e.dispatch=Sze.bind(null,Mi,e),[t.memoizedState,e]}function M2(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Mi.updateQueue,t===null?(t={lastEffect:null,stores:null},Mi.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function o_e(){return Hc().memoizedState}function CP(e,t,n,r){var i=jd();Mi.flags|=e,i.memoizedState=M2(1|t,n,void 0,r===void 0?null:r)}function LL(e,t,n,r){var i=Hc();r=r===void 0?null:r;var s=void 0;if(Ns!==null){var o=Ns.memoizedState;if(s=o.destroy,r!==null&&AG(r,o.deps)){i.memoizedState=M2(t,n,s,r);return}}Mi.flags|=e,i.memoizedState=M2(1|t,n,s,r)}function hae(e,t){return CP(8390656,8,e,t)}function RG(e,t){return LL(2048,8,e,t)}function a_e(e,t){return LL(4,2,e,t)}function u_e(e,t){return LL(4,4,e,t)}function l_e(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function c_e(e,t,n){return n=n!=null?n.concat([e]):null,LL(4,4,l_e.bind(null,t,e),n)}function NG(){}function f_e(e,t){var n=Hc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&AG(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function d_e(e,t){var n=Hc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&AG(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function h_e(e,t,n){return Q1&21?(id(n,t)||(n=vbe(),Mi.lanes|=n,J1|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Bu=!0),e.memoizedState=n)}function Eze(e,t){var n=Mr;Mr=n!==0&&4>n?n:4,e(!0);var r=_j.transition;_j.transition={};try{e(!1),t()}finally{Mr=n,_j.transition=r}}function p_e(){return Hc().memoizedState}function xze(e,t,n){var r=R0(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},m_e(e))g_e(t,n);else if(n=Xbe(e,t,n,r),n!==null){var i=eu();Xf(n,e,r,i),y_e(n,t,r)}}function Sze(e,t,n){var r=R0(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(m_e(e))g_e(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,id(a,o)){var u=t.interleaved;u===null?(i.next=i,EG(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=Xbe(e,t,i,r),n!==null&&(i=eu(),Xf(n,e,r,i),y_e(n,t,r))}}function m_e(e){var t=e.alternate;return e===Mi||t!==null&&t===Mi}function g_e(e,t){SA=r$=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function y_e(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,uG(e,n)}}var i$={readContext:Vc,useCallback:ra,useContext:ra,useEffect:ra,useImperativeHandle:ra,useInsertionEffect:ra,useLayoutEffect:ra,useMemo:ra,useReducer:ra,useRef:ra,useState:ra,useDebugValue:ra,useDeferredValue:ra,useTransition:ra,useMutableSource:ra,useSyncExternalStore:ra,useId:ra,unstable_isNewReconciler:!1},Tze={readContext:Vc,useCallback:function(e,t){return jd().memoizedState=[e,t===void 0?null:t],e},useContext:Vc,useEffect:hae,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,CP(4194308,4,l_e.bind(null,t,e),n)},useLayoutEffect:function(e,t){return CP(4194308,4,e,t)},useInsertionEffect:function(e,t){return CP(4,2,e,t)},useMemo:function(e,t){var n=jd();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=jd();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=xze.bind(null,Mi,e),[r.memoizedState,e]},useRef:function(e){var t=jd();return e={current:e},t.memoizedState=e},useState:dae,useDebugValue:NG,useDeferredValue:function(e){return jd().memoizedState=e},useTransition:function(){var e=dae(!1),t=e[0];return e=Eze.bind(null,e[1]),jd().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Mi,i=jd();if(Ci){if(n===void 0)throw Error(tt(407));n=n()}else{if(n=t(),po===null)throw Error(tt(349));Q1&30||t_e(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,hae(r_e.bind(null,r,s,e),[e]),r.flags|=2048,M2(9,n_e.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=jd(),t=po.identifierPrefix;if(Ci){var n=nm,r=tm;n=(r&~(1<<32-Kf(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=O2++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=wze++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Cze={readContext:Vc,useCallback:f_e,useContext:Vc,useEffect:RG,useImperativeHandle:c_e,useInsertionEffect:a_e,useLayoutEffect:u_e,useMemo:d_e,useReducer:wj,useRef:o_e,useState:function(){return wj($2)},useDebugValue:NG,useDeferredValue:function(e){var t=Hc();return h_e(t,Ns.memoizedState,e)},useTransition:function(){var e=wj($2)[0],t=Hc().memoizedState;return[e,t]},useMutableSource:Zbe,useSyncExternalStore:e_e,useId:p_e,unstable_isNewReconciler:!1},Aze={readContext:Vc,useCallback:f_e,useContext:Vc,useEffect:RG,useImperativeHandle:c_e,useInsertionEffect:a_e,useLayoutEffect:u_e,useMemo:d_e,useReducer:Ej,useRef:o_e,useState:function(){return Ej($2)},useDebugValue:NG,useDeferredValue:function(e){var t=Hc();return Ns===null?t.memoizedState=e:h_e(t,Ns.memoizedState,e)},useTransition:function(){var e=Ej($2)[0],t=Hc().memoizedState;return[e,t]},useMutableSource:Zbe,useSyncExternalStore:e_e,useId:p_e,unstable_isNewReconciler:!1};function Cf(e,t){if(e&&e.defaultProps){t=Fi({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function L7(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Fi({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var FL={isMounted:function(e){return(e=e._reactInternals)?Hb(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=eu(),i=R0(e),s=hm(r,i);s.payload=t,n!=null&&(s.callback=n),t=I0(e,s,i),t!==null&&(Xf(t,e,i,r),SP(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=eu(),i=R0(e),s=hm(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=I0(e,s,i),t!==null&&(Xf(t,e,i,r),SP(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=eu(),r=R0(e),i=hm(n,r);i.tag=2,t!=null&&(i.callback=t),t=I0(e,i,r),t!==null&&(Xf(t,e,r,n),SP(t,e,r))}};function pae(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!I2(n,r)||!I2(i,s):!0}function v_e(e,t,n){var r=!1,i=J0,s=t.contextType;return typeof s=="object"&&s!==null?s=Vc(s):(i=Wu(t)?K1:Aa.current,r=t.contextTypes,s=(r=r!=null)?DE(e,i):J0),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=FL,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function mae(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&FL.enqueueReplaceState(t,t.state,null)}function F7(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},xG(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Vc(s):(s=Wu(t)?K1:Aa.current,i.context=DE(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(L7(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&FL.enqueueReplaceState(i,i.state,null),t$(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function ME(e,t){try{var n="",r=t;do n+=t7e(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function xj(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function B7(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Ize=typeof WeakMap=="function"?WeakMap:Map;function b_e(e,t,n){n=hm(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){o$||(o$=!0,K7=r),B7(e,t)},n}function __e(e,t,n){n=hm(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){B7(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){B7(e,t),typeof r!="function"&&(k0===null?k0=new Set([this]):k0.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function gae(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Ize;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=zze.bind(null,e,t,n),t.then(e,e))}function yae(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function vae(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=hm(-1,1),t.tag=2,I0(n,t,1))),n.lanes|=1),e)}var kze=rg.ReactCurrentOwner,Bu=!1;function Ha(e,t,n,r){t.child=e===null?Kbe(t,null,n,r):OE(t,e.child,n,r)}function bae(e,t,n,r,i){n=n.render;var s=t.ref;return Yw(t,i),r=IG(e,t,n,r,s,i),n=kG(),e!==null&&!Bu?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Rm(e,t,i)):(Ci&&n&&gG(t),t.flags|=1,Ha(e,t,r,i),t.child)}function _ae(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!BG(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,w_e(e,t,s,r,i)):(e=RP(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:I2,n(o,r)&&e.ref===t.ref)return Rm(e,t,i)}return t.flags|=1,e=N0(s,r),e.ref=t.ref,e.return=t,t.child=e}function w_e(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(I2(s,r)&&e.ref===t.ref)if(Bu=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Bu=!0);else return t.lanes=e.lanes,Rm(e,t,i)}return j7(e,t,n,r,i)}function E_e(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},oi(kw,xl),xl|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,oi(kw,xl),xl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,oi(kw,xl),xl|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,oi(kw,xl),xl|=r;return Ha(e,t,i,n),t.child}function x_e(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function j7(e,t,n,r,i){var s=Wu(n)?K1:Aa.current;return s=DE(t,s),Yw(t,i),n=IG(e,t,n,r,s,i),r=kG(),e!==null&&!Bu?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Rm(e,t,i)):(Ci&&r&&gG(t),t.flags|=1,Ha(e,t,n,i),t.child)}function wae(e,t,n,r,i){if(Wu(n)){var s=!0;XO(t)}else s=!1;if(Yw(t,i),t.stateNode===null)AP(e,t),v_e(t,n,r),F7(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Vc(l):(l=Wu(n)?K1:Aa.current,l=DE(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&mae(t,o,r,l),qg=!1;var d=t.memoizedState;o.state=d,t$(t,r,o,i),u=t.memoizedState,a!==r||d!==u||qu.current||qg?(typeof c=="function"&&(L7(t,n,c,r),u=t.memoizedState),(a=qg||pae(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Qbe(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:Cf(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Vc(u):(u=Wu(n)?K1:Aa.current,u=DE(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&mae(t,o,r,u),qg=!1,d=t.memoizedState,o.state=d,t$(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||qu.current||qg?(typeof h=="function"&&(L7(t,n,h,r),p=t.memoizedState),(l=qg||pae(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return U7(e,t,n,r,s,i)}function U7(e,t,n,r,i,s){x_e(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&oae(t,n,!1),Rm(e,t,s);r=t.stateNode,kze.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=OE(t,e.child,null,s),t.child=OE(t,null,a,s)):Ha(e,t,a,s),t.memoizedState=r.state,i&&oae(t,n,!0),t.child}function S_e(e){var t=e.stateNode;t.pendingContext?sae(e,t.pendingContext,t.pendingContext!==t.context):t.context&&sae(e,t.context,!1),SG(e,t.containerInfo)}function Eae(e,t,n,r,i){return PE(),vG(i),t.flags|=256,Ha(e,t,n,r),t.child}var z7={dehydrated:null,treeContext:null,retryLane:0};function V7(e){return{baseLanes:e,cachePool:null,transitions:null}}function T_e(e,t,n){var r=t.pendingProps,i=Oi.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),oi(Oi,i&1),e===null)return $7(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=UL(o,r,0,null),e=P1(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=V7(n),t.memoizedState=z7,e):DG(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Rze(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=N0(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=N0(a,s):(s=P1(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?V7(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=z7,r}return s=e.child,e=s.sibling,r=N0(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function DG(e,t){return t=UL({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function jN(e,t,n,r){return r!==null&&vG(r),OE(t,e.child,null,n),e=DG(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Rze(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=xj(Error(tt(422))),jN(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=UL({mode:"visible",children:r.children},i,0,null),s=P1(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&OE(t,e.child,null,o),t.child.memoizedState=V7(o),t.memoizedState=z7,s);if(!(t.mode&1))return jN(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(tt(419)),r=xj(s,r,void 0),jN(e,t,o,r)}if(a=(o&e.childLanes)!==0,Bu||a){if(r=po,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,km(e,i),Xf(r,e,i,-1))}return FG(),r=xj(Error(tt(421))),jN(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Vze.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Rl=A0(i.nextSibling),Fl=t,Ci=!0,Df=null,e!==null&&(xc[Sc++]=tm,xc[Sc++]=nm,xc[Sc++]=X1,tm=e.id,nm=e.overflow,X1=t),t=DG(t,r.children),t.flags|=4096,t)}function xae(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),M7(e.return,t,n)}function Sj(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function C_e(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Ha(e,t,r.children,n),r=Oi.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&xae(e,n,t);else if(e.tag===19)xae(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(oi(Oi,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&n$(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Sj(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&n$(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Sj(t,!0,n,null,s);break;case"together":Sj(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function AP(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Rm(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),J1|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(tt(153));if(t.child!==null){for(e=t.child,n=N0(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=N0(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Nze(e,t,n){switch(t.tag){case 3:S_e(t),PE();break;case 5:Jbe(t);break;case 1:Wu(t.type)&&XO(t);break;case 4:SG(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;oi(ZO,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(oi(Oi,Oi.current&1),t.flags|=128,null):n&t.child.childLanes?T_e(e,t,n):(oi(Oi,Oi.current&1),e=Rm(e,t,n),e!==null?e.sibling:null);oi(Oi,Oi.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return C_e(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),oi(Oi,Oi.current),r)break;return null;case 22:case 23:return t.lanes=0,E_e(e,t,n)}return Rm(e,t,n)}var A_e,H7,I_e,k_e;A_e=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};H7=function(){};I_e=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,p1(bh.current);var s=null;switch(n){case"input":i=d7(e,i),r=d7(e,r),s=[];break;case"select":i=Fi({},i,{value:void 0}),r=Fi({},r,{value:void 0}),s=[];break;case"textarea":i=m7(e,i),r=m7(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=YO)}y7(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(w2.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(w2.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&fi("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};k_e=function(e,t,n,r){n!==r&&(t.flags|=4)};function RT(e,t){if(!Ci)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ia(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Dze(e,t,n){var r=t.pendingProps;switch(yG(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ia(t),null;case 1:return Wu(t.type)&&KO(),ia(t),null;case 3:return r=t.stateNode,$E(),gi(qu),gi(Aa),CG(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(FN(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Df!==null&&(J7(Df),Df=null))),H7(e,t),ia(t),null;case 5:TG(t);var i=p1(P2.current);if(n=t.type,e!==null&&t.stateNode!=null)I_e(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(tt(166));return ia(t),null}if(e=p1(bh.current),FN(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Xd]=t,r[N2]=s,e=(t.mode&1)!==0,n){case"dialog":fi("cancel",r),fi("close",r);break;case"iframe":case"object":case"embed":fi("load",r);break;case"video":case"audio":for(i=0;i<NC.length;i++)fi(NC[i],r);break;case"source":fi("error",r);break;case"img":case"image":case"link":fi("error",r),fi("load",r);break;case"details":fi("toggle",r);break;case"input":Doe(r,s),fi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},fi("invalid",r);break;case"textarea":Ooe(r,s),fi("invalid",r)}y7(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&LN(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&LN(r.textContent,a,e),i=["children",""+a]):w2.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&fi("scroll",r)}switch(n){case"input":kN(r),Poe(r,s,!0);break;case"textarea":kN(r),$oe(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=YO)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=rbe(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Xd]=t,e[N2]=r,A_e(e,t,!1,!1),t.stateNode=e;e:{switch(o=v7(n,r),n){case"dialog":fi("cancel",e),fi("close",e),i=r;break;case"iframe":case"object":case"embed":fi("load",e),i=r;break;case"video":case"audio":for(i=0;i<NC.length;i++)fi(NC[i],e);i=r;break;case"source":fi("error",e),i=r;break;case"img":case"image":case"link":fi("error",e),fi("load",e),i=r;break;case"details":fi("toggle",e),i=r;break;case"input":Doe(e,r),i=d7(e,r),fi("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Fi({},r,{value:void 0}),fi("invalid",e);break;case"textarea":Ooe(e,r),i=m7(e,r),fi("invalid",e);break;default:i=r}y7(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?obe(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&ibe(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&E2(e,u):typeof u=="number"&&E2(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(w2.hasOwnProperty(s)?u!=null&&s==="onScroll"&&fi("scroll",e):u!=null&&nG(e,s,u,o))}switch(n){case"input":kN(e),Poe(e,r,!1);break;case"textarea":kN(e),$oe(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Q0(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Hw(e,!!r.multiple,s,!1):r.defaultValue!=null&&Hw(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=YO)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ia(t),null;case 6:if(e&&t.stateNode!=null)k_e(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(tt(166));if(n=p1(P2.current),p1(bh.current),FN(t)){if(r=t.stateNode,n=t.memoizedProps,r[Xd]=t,(s=r.nodeValue!==n)&&(e=Fl,e!==null))switch(e.tag){case 3:LN(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&LN(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xd]=t,t.stateNode=r}return ia(t),null;case 13:if(gi(Oi),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ci&&Rl!==null&&t.mode&1&&!(t.flags&128))Gbe(),PE(),t.flags|=98560,s=!1;else if(s=FN(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(tt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(tt(317));s[Xd]=t}else PE(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ia(t),s=!1}else Df!==null&&(J7(Df),Df=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Oi.current&1?Ls===0&&(Ls=3):FG())),t.updateQueue!==null&&(t.flags|=4),ia(t),null);case 4:return $E(),H7(e,t),e===null&&k2(t.stateNode.containerInfo),ia(t),null;case 10:return wG(t.type._context),ia(t),null;case 17:return Wu(t.type)&&KO(),ia(t),null;case 19:if(gi(Oi),s=t.memoizedState,s===null)return ia(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)RT(s,!1);else{if(Ls!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=n$(e),o!==null){for(t.flags|=128,RT(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return oi(Oi,Oi.current&1|2),t.child}e=e.sibling}s.tail!==null&&us()>LE&&(t.flags|=128,r=!0,RT(s,!1),t.lanes=4194304)}else{if(!r)if(e=n$(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),RT(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ci)return ia(t),null}else 2*us()-s.renderingStartTime>LE&&n!==1073741824&&(t.flags|=128,r=!0,RT(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=us(),t.sibling=null,n=Oi.current,oi(Oi,r?n&1|2:n&1),t):(ia(t),null);case 22:case 23:return LG(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?xl&1073741824&&(ia(t),t.subtreeFlags&6&&(t.flags|=8192)):ia(t),null;case 24:return null;case 25:return null}throw Error(tt(156,t.tag))}function Pze(e,t){switch(yG(t),t.tag){case 1:return Wu(t.type)&&KO(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return $E(),gi(qu),gi(Aa),CG(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return TG(t),null;case 13:if(gi(Oi),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(tt(340));PE()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return gi(Oi),null;case 4:return $E(),null;case 10:return wG(t.type._context),null;case 22:case 23:return LG(),null;case 24:return null;default:return null}}var UN=!1,ma=!1,Oze=typeof WeakSet=="function"?WeakSet:Set,St=null;function Iw(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Yi(e,t,r)}else n.current=null}function q7(e,t,n){try{n()}catch(r){Yi(e,t,r)}}var Sae=!1;function $ze(e,t){if(I7=qO,e=Obe(),mG(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(k7={focusedElem:e,selectionRange:n},qO=!1,St=t;St!==null;)if(t=St,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,St=e;else for(;St!==null;){t=St;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Cf(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(tt(163))}}catch(w){Yi(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,St=e;break}St=t.return}return p=Sae,Sae=!1,p}function TA(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&q7(t,n,s)}i=i.next}while(i!==r)}}function BL(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function W7(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function R_e(e){var t=e.alternate;t!==null&&(e.alternate=null,R_e(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xd],delete t[N2],delete t[D7],delete t[yze],delete t[vze])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function N_e(e){return e.tag===5||e.tag===3||e.tag===4}function Tae(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||N_e(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function G7(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=YO));else if(r!==4&&(e=e.child,e!==null))for(G7(e,t,n),e=e.sibling;e!==null;)G7(e,t,n),e=e.sibling}function Y7(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Y7(e,t,n),e=e.sibling;e!==null;)Y7(e,t,n),e=e.sibling}var No=null,If=!1;function Ng(e,t,n){for(n=n.child;n!==null;)D_e(e,t,n),n=n.sibling}function D_e(e,t,n){if(vh&&typeof vh.onCommitFiberUnmount=="function")try{vh.onCommitFiberUnmount(NL,n)}catch{}switch(n.tag){case 5:ma||Iw(n,t);case 6:var r=No,i=If;No=null,Ng(e,t,n),No=r,If=i,No!==null&&(If?(e=No,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):No.removeChild(n.stateNode));break;case 18:No!==null&&(If?(e=No,n=n.stateNode,e.nodeType===8?yj(e.parentNode,n):e.nodeType===1&&yj(e,n),C2(e)):yj(No,n.stateNode));break;case 4:r=No,i=If,No=n.stateNode.containerInfo,If=!0,Ng(e,t,n),No=r,If=i;break;case 0:case 11:case 14:case 15:if(!ma&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&q7(n,t,o),i=i.next}while(i!==r)}Ng(e,t,n);break;case 1:if(!ma&&(Iw(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Yi(n,t,a)}Ng(e,t,n);break;case 21:Ng(e,t,n);break;case 22:n.mode&1?(ma=(r=ma)||n.memoizedState!==null,Ng(e,t,n),ma=r):Ng(e,t,n);break;default:Ng(e,t,n)}}function Cae(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Oze),t.forEach(function(r){var i=Hze.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function gf(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:No=a.stateNode,If=!1;break e;case 3:No=a.stateNode.containerInfo,If=!0;break e;case 4:No=a.stateNode.containerInfo,If=!0;break e}a=a.return}if(No===null)throw Error(tt(160));D_e(s,o,i),No=null,If=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Yi(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)P_e(t,e),t=t.sibling}function P_e(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gf(t,e),Dd(e),r&4){try{TA(3,e,e.return),BL(3,e)}catch(m){Yi(e,e.return,m)}try{TA(5,e,e.return)}catch(m){Yi(e,e.return,m)}}break;case 1:gf(t,e),Dd(e),r&512&&n!==null&&Iw(n,n.return);break;case 5:if(gf(t,e),Dd(e),r&512&&n!==null&&Iw(n,n.return),e.flags&32){var i=e.stateNode;try{E2(i,"")}catch(m){Yi(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&tbe(i,s),v7(a,o);var l=v7(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?obe(i,f):c==="dangerouslySetInnerHTML"?ibe(i,f):c==="children"?E2(i,f):nG(i,c,f,l)}switch(a){case"input":h7(i,s);break;case"textarea":nbe(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Hw(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?Hw(i,!!s.multiple,s.defaultValue,!0):Hw(i,!!s.multiple,s.multiple?[]:"",!1))}i[N2]=s}catch(m){Yi(e,e.return,m)}}break;case 6:if(gf(t,e),Dd(e),r&4){if(e.stateNode===null)throw Error(tt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Yi(e,e.return,m)}}break;case 3:if(gf(t,e),Dd(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{C2(t.containerInfo)}catch(m){Yi(e,e.return,m)}break;case 4:gf(t,e),Dd(e);break;case 13:gf(t,e),Dd(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||($G=us())),r&4&&Cae(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(ma=(l=ma)||c,gf(t,e),ma=l):gf(t,e),Dd(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(St=e,c=e.child;c!==null;){for(f=St=c;St!==null;){switch(d=St,h=d.child,d.tag){case 0:case 11:case 14:case 15:TA(4,d,d.return);break;case 1:Iw(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Yi(r,n,m)}}break;case 5:Iw(d,d.return);break;case 22:if(d.memoizedState!==null){Iae(f);continue}}h!==null?(h.return=d,St=h):Iae(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=sbe("display",o))}catch(m){Yi(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Yi(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:gf(t,e),Dd(e),r&4&&Cae(e);break;case 21:break;default:gf(t,e),Dd(e)}}function Dd(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(N_e(n)){var r=n;break e}n=n.return}throw Error(tt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(E2(i,""),r.flags&=-33);var s=Tae(e);Y7(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Tae(e);G7(e,a,o);break;default:throw Error(tt(161))}}catch(u){Yi(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Mze(e,t,n){St=e,O_e(e)}function O_e(e,t,n){for(var r=(e.mode&1)!==0;St!==null;){var i=St,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||UN;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||ma;a=UN;var l=ma;if(UN=o,(ma=u)&&!l)for(St=i;St!==null;)o=St,u=o.child,o.tag===22&&o.memoizedState!==null?kae(i):u!==null?(u.return=o,St=u):kae(i);for(;s!==null;)St=s,O_e(s),s=s.sibling;St=i,UN=a,ma=l}Aae(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,St=s):Aae(e)}}function Aae(e){for(;St!==null;){var t=St;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ma||BL(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ma)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Cf(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&fae(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}fae(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&C2(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(tt(163))}ma||t.flags&512&&W7(t)}catch(d){Yi(t,t.return,d)}}if(t===e){St=null;break}if(n=t.sibling,n!==null){n.return=t.return,St=n;break}St=t.return}}function Iae(e){for(;St!==null;){var t=St;if(t===e){St=null;break}var n=t.sibling;if(n!==null){n.return=t.return,St=n;break}St=t.return}}function kae(e){for(;St!==null;){var t=St;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{BL(4,t)}catch(u){Yi(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Yi(t,i,u)}}var s=t.return;try{W7(t)}catch(u){Yi(t,s,u)}break;case 5:var o=t.return;try{W7(t)}catch(u){Yi(t,o,u)}}}catch(u){Yi(t,t.return,u)}if(t===e){St=null;break}var a=t.sibling;if(a!==null){a.return=t.return,St=a;break}St=t.return}}var Lze=Math.ceil,s$=rg.ReactCurrentDispatcher,PG=rg.ReactCurrentOwner,Fc=rg.ReactCurrentBatchConfig,fr=0,po=null,Es=null,Uo=0,xl=0,kw=jy(0),Ls=0,L2=null,J1=0,jL=0,OG=0,CA=null,Nu=null,$G=0,LE=1/0,Fp=null,o$=!1,K7=null,k0=null,zN=!1,c0=null,a$=0,AA=0,X7=null,IP=-1,kP=0;function eu(){return fr&6?us():IP!==-1?IP:IP=us()}function R0(e){return e.mode&1?fr&2&&Uo!==0?Uo&-Uo:_ze.transition!==null?(kP===0&&(kP=vbe()),kP):(e=Mr,e!==0||(e=window.event,e=e===void 0?16:Tbe(e.type)),e):1}function Xf(e,t,n,r){if(50<AA)throw AA=0,X7=null,Error(tt(185));vk(e,n,r),(!(fr&2)||e!==po)&&(e===po&&(!(fr&2)&&(jL|=n),Ls===4&&e0(e,Uo)),Gu(e,r),n===1&&fr===0&&!(t.mode&1)&&(LE=us()+500,ML&&Uy()))}function Gu(e,t){var n=e.callbackNode;_7e(e,t);var r=HO(e,e===po?Uo:0);if(r===0)n!==null&&Foe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Foe(n),t===1)e.tag===0?bze(Rae.bind(null,e)):Hbe(Rae.bind(null,e)),mze(function(){!(fr&6)&&Uy()}),n=null;else{switch(bbe(r)){case 1:n=aG;break;case 4:n=gbe;break;case 16:n=VO;break;case 536870912:n=ybe;break;default:n=VO}n=z_e(n,$_e.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function $_e(e,t){if(IP=-1,kP=0,fr&6)throw Error(tt(327));var n=e.callbackNode;if(Kw()&&e.callbackNode!==n)return null;var r=HO(e,e===po?Uo:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=u$(e,r);else{t=r;var i=fr;fr|=2;var s=L_e();(po!==e||Uo!==t)&&(Fp=null,LE=us()+500,D1(e,t));do try{jze();break}catch(a){M_e(e,a)}while(!0);_G(),s$.current=s,fr=i,Es!==null?t=0:(po=null,Uo=0,t=Ls)}if(t!==0){if(t===2&&(i=x7(e),i!==0&&(r=i,t=Q7(e,i))),t===1)throw n=L2,D1(e,0),e0(e,r),Gu(e,us()),n;if(t===6)e0(e,r);else{if(i=e.current.alternate,!(r&30)&&!Fze(i)&&(t=u$(e,r),t===2&&(s=x7(e),s!==0&&(r=s,t=Q7(e,s))),t===1))throw n=L2,D1(e,0),e0(e,r),Gu(e,us()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(tt(345));case 2:Fv(e,Nu,Fp);break;case 3:if(e0(e,r),(r&130023424)===r&&(t=$G+500-us(),10<t)){if(HO(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){eu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=N7(Fv.bind(null,e,Nu,Fp),t);break}Fv(e,Nu,Fp);break;case 4:if(e0(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Kf(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=us()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Lze(r/1960))-r,10<r){e.timeoutHandle=N7(Fv.bind(null,e,Nu,Fp),r);break}Fv(e,Nu,Fp);break;case 5:Fv(e,Nu,Fp);break;default:throw Error(tt(329))}}}return Gu(e,us()),e.callbackNode===n?$_e.bind(null,e):null}function Q7(e,t){var n=CA;return e.current.memoizedState.isDehydrated&&(D1(e,t).flags|=256),e=u$(e,t),e!==2&&(t=Nu,Nu=n,t!==null&&J7(t)),e}function J7(e){Nu===null?Nu=e:Nu.push.apply(Nu,e)}function Fze(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!id(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function e0(e,t){for(t&=~OG,t&=~jL,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kf(t),r=1<<n;e[n]=-1,t&=~r}}function Rae(e){if(fr&6)throw Error(tt(327));Kw();var t=HO(e,0);if(!(t&1))return Gu(e,us()),null;var n=u$(e,t);if(e.tag!==0&&n===2){var r=x7(e);r!==0&&(t=r,n=Q7(e,r))}if(n===1)throw n=L2,D1(e,0),e0(e,t),Gu(e,us()),n;if(n===6)throw Error(tt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fv(e,Nu,Fp),Gu(e,us()),null}function MG(e,t){var n=fr;fr|=1;try{return e(t)}finally{fr=n,fr===0&&(LE=us()+500,ML&&Uy())}}function Z1(e){c0!==null&&c0.tag===0&&!(fr&6)&&Kw();var t=fr;fr|=1;var n=Fc.transition,r=Mr;try{if(Fc.transition=null,Mr=1,e)return e()}finally{Mr=r,Fc.transition=n,fr=t,!(fr&6)&&Uy()}}function LG(){xl=kw.current,gi(kw)}function D1(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,pze(n)),Es!==null)for(n=Es.return;n!==null;){var r=n;switch(yG(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&KO();break;case 3:$E(),gi(qu),gi(Aa),CG();break;case 5:TG(r);break;case 4:$E();break;case 13:gi(Oi);break;case 19:gi(Oi);break;case 10:wG(r.type._context);break;case 22:case 23:LG()}n=n.return}if(po=e,Es=e=N0(e.current,null),Uo=xl=t,Ls=0,L2=null,OG=jL=J1=0,Nu=CA=null,h1!==null){for(t=0;t<h1.length;t++)if(n=h1[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}h1=null}return e}function M_e(e,t){do{var n=Es;try{if(_G(),TP.current=i$,r$){for(var r=Mi.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}r$=!1}if(Q1=0,to=Ns=Mi=null,SA=!1,O2=0,PG.current=null,n===null||n.return===null){Ls=1,L2=t,Es=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=Uo,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=yae(o);if(h!==null){h.flags&=-257,vae(h,o,a,s,t),h.mode&1&&gae(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){gae(s,l,t),FG();break e}u=Error(tt(426))}}else if(Ci&&a.mode&1){var g=yae(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),vae(g,o,a,s,t),vG(ME(u,a));break e}}s=u=ME(u,a),Ls!==4&&(Ls=2),CA===null?CA=[s]:CA.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=b_e(s,u,t);cae(s,y);break e;case 1:a=u;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(k0===null||!k0.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=__e(s,a,t);cae(s,w);break e}}s=s.return}while(s!==null)}B_e(n)}catch(E){t=E,Es===n&&n!==null&&(Es=n=n.return);continue}break}while(!0)}function L_e(){var e=s$.current;return s$.current=i$,e===null?i$:e}function FG(){(Ls===0||Ls===3||Ls===2)&&(Ls=4),po===null||!(J1&268435455)&&!(jL&268435455)||e0(po,Uo)}function u$(e,t){var n=fr;fr|=2;var r=L_e();(po!==e||Uo!==t)&&(Fp=null,D1(e,t));do try{Bze();break}catch(i){M_e(e,i)}while(!0);if(_G(),fr=n,s$.current=r,Es!==null)throw Error(tt(261));return po=null,Uo=0,Ls}function Bze(){for(;Es!==null;)F_e(Es)}function jze(){for(;Es!==null&&!f7e();)F_e(Es)}function F_e(e){var t=U_e(e.alternate,e,xl);e.memoizedProps=e.pendingProps,t===null?B_e(e):Es=t,PG.current=null}function B_e(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Pze(n,t),n!==null){n.flags&=32767,Es=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ls=6,Es=null;return}}else if(n=Dze(n,t,xl),n!==null){Es=n;return}if(t=t.sibling,t!==null){Es=t;return}Es=t=e}while(t!==null);Ls===0&&(Ls=5)}function Fv(e,t,n){var r=Mr,i=Fc.transition;try{Fc.transition=null,Mr=1,Uze(e,t,n,r)}finally{Fc.transition=i,Mr=r}return null}function Uze(e,t,n,r){do Kw();while(c0!==null);if(fr&6)throw Error(tt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(tt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(w7e(e,s),e===po&&(Es=po=null,Uo=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zN||(zN=!0,z_e(VO,function(){return Kw(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Fc.transition,Fc.transition=null;var o=Mr;Mr=1;var a=fr;fr|=4,PG.current=null,$ze(e,n),P_e(n,e),aze(k7),qO=!!I7,k7=I7=null,e.current=n,Mze(n),d7e(),fr=a,Mr=o,Fc.transition=s}else e.current=n;if(zN&&(zN=!1,c0=e,a$=i),s=e.pendingLanes,s===0&&(k0=null),m7e(n.stateNode),Gu(e,us()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(o$)throw o$=!1,e=K7,K7=null,e;return a$&1&&e.tag!==0&&Kw(),s=e.pendingLanes,s&1?e===X7?AA++:(AA=0,X7=e):AA=0,Uy(),null}function Kw(){if(c0!==null){var e=bbe(a$),t=Fc.transition,n=Mr;try{if(Fc.transition=null,Mr=16>e?16:e,c0===null)var r=!1;else{if(e=c0,c0=null,a$=0,fr&6)throw Error(tt(331));var i=fr;for(fr|=4,St=e.current;St!==null;){var s=St,o=s.child;if(St.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(St=l;St!==null;){var c=St;switch(c.tag){case 0:case 11:case 15:TA(8,c,s)}var f=c.child;if(f!==null)f.return=c,St=f;else for(;St!==null;){c=St;var d=c.sibling,h=c.return;if(R_e(c),c===l){St=null;break}if(d!==null){d.return=h,St=d;break}St=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}St=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,St=o;else e:for(;St!==null;){if(s=St,s.flags&2048)switch(s.tag){case 0:case 11:case 15:TA(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,St=y;break e}St=s.return}}var v=e.current;for(St=v;St!==null;){o=St;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,St=b;else e:for(o=v;St!==null;){if(a=St,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:BL(9,a)}}catch(E){Yi(a,a.return,E)}if(a===o){St=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,St=w;break e}St=a.return}}if(fr=i,Uy(),vh&&typeof vh.onPostCommitFiberRoot=="function")try{vh.onPostCommitFiberRoot(NL,e)}catch{}r=!0}return r}finally{Mr=n,Fc.transition=t}}return!1}function Nae(e,t,n){t=ME(n,t),t=b_e(e,t,1),e=I0(e,t,1),t=eu(),e!==null&&(vk(e,1,t),Gu(e,t))}function Yi(e,t,n){if(e.tag===3)Nae(e,e,n);else for(;t!==null;){if(t.tag===3){Nae(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(k0===null||!k0.has(r))){e=ME(n,e),e=__e(t,e,1),t=I0(t,e,1),e=eu(),t!==null&&(vk(t,1,e),Gu(t,e));break}}t=t.return}}function zze(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=eu(),e.pingedLanes|=e.suspendedLanes&n,po===e&&(Uo&n)===n&&(Ls===4||Ls===3&&(Uo&130023424)===Uo&&500>us()-$G?D1(e,0):OG|=n),Gu(e,t)}function j_e(e,t){t===0&&(e.mode&1?(t=DN,DN<<=1,!(DN&130023424)&&(DN=4194304)):t=1);var n=eu();e=km(e,t),e!==null&&(vk(e,t,n),Gu(e,n))}function Vze(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),j_e(e,n)}function Hze(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(tt(314))}r!==null&&r.delete(t),j_e(e,n)}var U_e;U_e=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||qu.current)Bu=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Bu=!1,Nze(e,t,n);Bu=!!(e.flags&131072)}else Bu=!1,Ci&&t.flags&1048576&&qbe(t,JO,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;AP(e,t),e=t.pendingProps;var i=DE(t,Aa.current);Yw(t,n),i=IG(null,t,r,e,i,n);var s=kG();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Wu(r)?(s=!0,XO(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,xG(t),i.updater=FL,t.stateNode=i,i._reactInternals=t,F7(t,r,e,n),t=U7(null,t,r,!0,s,n)):(t.tag=0,Ci&&s&&gG(t),Ha(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(AP(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Wze(r),e=Cf(r,e),i){case 0:t=j7(null,t,r,e,n);break e;case 1:t=wae(null,t,r,e,n);break e;case 11:t=bae(null,t,r,e,n);break e;case 14:t=_ae(null,t,r,Cf(r.type,e),n);break e}throw Error(tt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Cf(r,i),j7(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Cf(r,i),wae(e,t,r,i,n);case 3:e:{if(S_e(t),e===null)throw Error(tt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Qbe(e,t),t$(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=ME(Error(tt(423)),t),t=Eae(e,t,r,n,i);break e}else if(r!==i){i=ME(Error(tt(424)),t),t=Eae(e,t,r,n,i);break e}else for(Rl=A0(t.stateNode.containerInfo.firstChild),Fl=t,Ci=!0,Df=null,n=Kbe(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(PE(),r===i){t=Rm(e,t,n);break e}Ha(e,t,r,n)}t=t.child}return t;case 5:return Jbe(t),e===null&&$7(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,R7(r,i)?o=null:s!==null&&R7(r,s)&&(t.flags|=32),x_e(e,t),Ha(e,t,o,n),t.child;case 6:return e===null&&$7(t),null;case 13:return T_e(e,t,n);case 4:return SG(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=OE(t,null,r,n):Ha(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Cf(r,i),bae(e,t,r,i,n);case 7:return Ha(e,t,t.pendingProps,n),t.child;case 8:return Ha(e,t,t.pendingProps.children,n),t.child;case 12:return Ha(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,oi(ZO,r._currentValue),r._currentValue=o,s!==null)if(id(s.value,o)){if(s.children===i.children&&!qu.current){t=Rm(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=hm(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),M7(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(tt(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),M7(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ha(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Yw(t,n),i=Vc(i),r=r(i),t.flags|=1,Ha(e,t,r,n),t.child;case 14:return r=t.type,i=Cf(r,t.pendingProps),i=Cf(r.type,i),_ae(e,t,r,i,n);case 15:return w_e(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Cf(r,i),AP(e,t),t.tag=1,Wu(r)?(e=!0,XO(t)):e=!1,Yw(t,n),v_e(t,r,i),F7(t,r,i,n),U7(null,t,r,!0,e,n);case 19:return C_e(e,t,n);case 22:return E_e(e,t,n)}throw Error(tt(156,t.tag))};function z_e(e,t){return mbe(e,t)}function qze(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new qze(e,t,n,r)}function BG(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Wze(e){if(typeof e=="function")return BG(e)?1:0;if(e!=null){if(e=e.$$typeof,e===iG)return 11;if(e===sG)return 14}return 2}function N0(e,t){var n=e.alternate;return n===null?(n=Dc(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function RP(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")BG(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case bw:return P1(n.children,i,s,t);case rG:o=8,i|=8;break;case u7:return e=Dc(12,n,t,i|2),e.elementType=u7,e.lanes=s,e;case l7:return e=Dc(13,n,t,i),e.elementType=l7,e.lanes=s,e;case c7:return e=Dc(19,n,t,i),e.elementType=c7,e.lanes=s,e;case J1e:return UL(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case X1e:o=10;break e;case Q1e:o=9;break e;case iG:o=11;break e;case sG:o=14;break e;case Hg:o=16,r=null;break e}throw Error(tt(130,e==null?e:typeof e,""))}return t=Dc(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function P1(e,t,n,r){return e=Dc(7,e,r,t),e.lanes=n,e}function UL(e,t,n,r){return e=Dc(22,e,r,t),e.elementType=J1e,e.lanes=n,e.stateNode={isHidden:!1},e}function Tj(e,t,n){return e=Dc(6,e,null,t),e.lanes=n,e}function Cj(e,t,n){return t=Dc(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Gze(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=oj(0),this.expirationTimes=oj(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oj(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jG(e,t,n,r,i,s,o,a,u){return e=new Gze(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Dc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xG(s),e}function Yze(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vw,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function V_e(e){if(!e)return J0;e=e._reactInternals;e:{if(Hb(e)!==e||e.tag!==1)throw Error(tt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Wu(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(tt(171))}if(e.tag===1){var n=e.type;if(Wu(n))return Vbe(e,n,t)}return t}function H_e(e,t,n,r,i,s,o,a,u){return e=jG(n,r,!0,e,i,s,o,a,u),e.context=V_e(null),n=e.current,r=eu(),i=R0(n),s=hm(r,i),s.callback=t??null,I0(n,s,i),e.current.lanes=i,vk(e,i,r),Gu(e,r),e}function zL(e,t,n,r){var i=t.current,s=eu(),o=R0(i);return n=V_e(n),t.context===null?t.context=n:t.pendingContext=n,t=hm(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=I0(i,t,o),e!==null&&(Xf(e,i,o,s),SP(e,i,o)),o}function l$(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Dae(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function UG(e,t){Dae(e,t),(e=e.alternate)&&Dae(e,t)}function Kze(){return null}var q_e=typeof reportError=="function"?reportError:function(e){console.error(e)};function zG(e){this._internalRoot=e}VL.prototype.render=zG.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(tt(409));zL(e,t,null,null)};VL.prototype.unmount=zG.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Z1(function(){zL(null,e,null,null)}),t[Im]=null}};function VL(e){this._internalRoot=e}VL.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ebe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Zg.length&&t!==0&&t<Zg[n].priority;n++);Zg.splice(n,0,e),n===0&&Sbe(e)}};function VG(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function HL(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Pae(){}function Xze(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=l$(o);s.call(l)}}var o=H_e(t,r,e,0,null,!1,!1,"",Pae);return e._reactRootContainer=o,e[Im]=o.current,k2(e.nodeType===8?e.parentNode:e),Z1(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=l$(u);a.call(l)}}var u=jG(e,0,!1,null,null,!1,!1,"",Pae);return e._reactRootContainer=u,e[Im]=u.current,k2(e.nodeType===8?e.parentNode:e),Z1(function(){zL(t,u,n,r)}),u}function qL(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=l$(o);a.call(u)}}zL(t,o,e,i)}else o=Xze(n,t,e,i,r);return l$(o)}_be=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=RC(t.pendingLanes);n!==0&&(uG(t,n|1),Gu(t,us()),!(fr&6)&&(LE=us()+500,Uy()))}break;case 13:Z1(function(){var r=km(e,1);if(r!==null){var i=eu();Xf(r,e,1,i)}}),UG(e,1)}};lG=function(e){if(e.tag===13){var t=km(e,134217728);if(t!==null){var n=eu();Xf(t,e,134217728,n)}UG(e,134217728)}};wbe=function(e){if(e.tag===13){var t=R0(e),n=km(e,t);if(n!==null){var r=eu();Xf(n,e,t,r)}UG(e,t)}};Ebe=function(){return Mr};xbe=function(e,t){var n=Mr;try{return Mr=e,t()}finally{Mr=n}};_7=function(e,t,n){switch(t){case"input":if(h7(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=$L(r);if(!i)throw Error(tt(90));ebe(r),h7(r,i)}}}break;case"textarea":nbe(e,n);break;case"select":t=n.value,t!=null&&Hw(e,!!n.multiple,t,!1)}};lbe=MG;cbe=Z1;var Qze={usingClientEntryPoint:!1,Events:[_k,xw,$L,abe,ube,MG]},NT={findFiberByHostInstance:d1,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Jze={bundleType:NT.bundleType,version:NT.version,rendererPackageName:NT.rendererPackageName,rendererConfig:NT.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rg.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=hbe(e),e===null?null:e.stateNode},findFiberByHostInstance:NT.findFiberByHostInstance||Kze,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var VN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!VN.isDisabled&&VN.supportsFiber)try{NL=VN.inject(Jze),vh=VN}catch{}}sc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qze;sc.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!VG(t))throw Error(tt(200));return Yze(e,t,null,n)};sc.createRoot=function(e,t){if(!VG(e))throw Error(tt(299));var n=!1,r="",i=q_e;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=jG(e,1,!1,null,null,n,!1,r,i),e[Im]=t.current,k2(e.nodeType===8?e.parentNode:e),new zG(t)};sc.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(tt(188)):(e=Object.keys(e).join(","),Error(tt(268,e)));return e=hbe(t),e=e===null?null:e.stateNode,e};sc.flushSync=function(e){return Z1(e)};sc.hydrate=function(e,t,n){if(!HL(t))throw Error(tt(200));return qL(null,e,t,!0,n)};sc.hydrateRoot=function(e,t,n){if(!VG(e))throw Error(tt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=q_e;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=H_e(t,null,e,1,n??null,i,!1,s,o),e[Im]=t.current,k2(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new VL(t)};sc.render=function(e,t,n){if(!HL(t))throw Error(tt(200));return qL(null,e,t,!1,n)};sc.unmountComponentAtNode=function(e){if(!HL(e))throw Error(tt(40));return e._reactRootContainer?(Z1(function(){qL(null,null,e,!1,function(){e._reactRootContainer=null,e[Im]=null})}),!0):!1};sc.unstable_batchedUpdates=MG;sc.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!HL(n))throw Error(tt(200));if(e==null||e._reactInternals===void 0)throw Error(tt(38));return qL(e,t,n,!1,r)};sc.version="18.3.1-next-f1338f8080-20240426";function W_e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(W_e)}catch(e){console.error(e)}}W_e(),W1e.exports=sc;var zy=W1e.exports;const G_e=dl(zy);var Oae=zy;o7.createRoot=Oae.createRoot,o7.hydrateRoot=Oae.hydrateRoot;var Qd=function(){return Qd=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Qd.apply(this,arguments)};function Ek(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Yp(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function $ae(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zze(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Xn(e){return this instanceof Xn?(this.v=e,this):new Xn(e)}function m1(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Xn?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function Aj(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Xn(e[i](o)),done:!1}:s?s(o):o}:s}}function IA(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof $ae=="function"?$ae(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var NP="right-scroll-bar-position",DP="width-before-scroll-bar",eVe="with-scroll-bars-hidden",tVe="--removed-body-scroll-bar-size";function Ij(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function nVe(e,t){var n=I.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var rVe=typeof window<"u"?I.useLayoutEffect:I.useEffect,Mae=new WeakMap;function iVe(e,t){var n=nVe(null,function(r){return e.forEach(function(i){return Ij(i,r)})});return rVe(function(){var r=Mae.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||Ij(a,null)}),s.forEach(function(a){i.has(a)||Ij(a,o)})}Mae.set(n,e)},[e]),n}function sVe(e){return e}function oVe(e,t){t===void 0&&(t=sVe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function aVe(e){e===void 0&&(e={});var t=oVe(null);return t.options=Qd({async:!0,ssr:!1},e),t}var Y_e=function(e){var t=e.sideCar,n=Ek(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return I.createElement(r,Qd({},n))};Y_e.isSideCarExport=!0;function uVe(e,t){return e.useMedium(t),Y_e}var K_e=aVe(),kj=function(){},WL=I.forwardRef(function(e,t){var n=I.useRef(null),r=I.useState({onScrollCapture:kj,onWheelCapture:kj,onTouchMoveCapture:kj}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,b=Ek(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=d,E=iVe([n,t]),x=Qd(Qd({},b),i);return I.createElement(I.Fragment,null,c&&I.createElement(w,{sideCar:K_e,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?I.cloneElement(I.Children.only(a),Qd(Qd({},x),{ref:E})):I.createElement(y,Qd({},x,{className:u,ref:E}),a))});WL.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};WL.classNames={fullWidth:DP,zeroRight:NP};var lVe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function cVe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=lVe();return t&&e.setAttribute("nonce",t),e}function fVe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function dVe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var hVe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=cVe())&&(fVe(t,n),dVe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},pVe=function(){var e=hVe();return function(t,n){I.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},X_e=function(){var e=pVe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},mVe={left:0,top:0,right:0,gap:0},Rj=function(e){return parseInt(e||"",10)||0},gVe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[Rj(n),Rj(r),Rj(i)]},yVe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return mVe;var t=gVe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},vVe=X_e(),Xw="data-scroll-locked",bVe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(eVe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Xw,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(NP,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(DP,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(NP," .").concat(NP,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(DP," .").concat(DP,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Xw,`] {
    `).concat(tVe,": ").concat(a,`px;
  }
`)},Lae=function(){var e=parseInt(document.body.getAttribute(Xw)||"0",10);return isFinite(e)?e:0},_Ve=function(){I.useEffect(function(){return document.body.setAttribute(Xw,(Lae()+1).toString()),function(){var e=Lae()-1;e<=0?document.body.removeAttribute(Xw):document.body.setAttribute(Xw,e.toString())}},[])},wVe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;_Ve();var s=I.useMemo(function(){return yVe(i)},[i]);return I.createElement(vVe,{styles:bVe(s,!t,i,n?"":"!important")})},Z7=!1;if(typeof window<"u")try{var HN=Object.defineProperty({},"passive",{get:function(){return Z7=!0,!0}});window.addEventListener("test",HN,HN),window.removeEventListener("test",HN,HN)}catch{Z7=!1}var P_=Z7?{passive:!1}:!1,EVe=function(e){return e.tagName==="TEXTAREA"},Q_e=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!EVe(e)&&n[t]==="visible")},xVe=function(e){return Q_e(e,"overflowY")},SVe=function(e){return Q_e(e,"overflowX")},Fae=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=J_e(e,r);if(i){var s=Z_e(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},TVe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},CVe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},J_e=function(e,t){return e==="v"?xVe(t):SVe(t)},Z_e=function(e,t){return e==="v"?TVe(t):CVe(t)},AVe=function(e,t){return e==="h"&&t==="rtl"?-1:1},IVe=function(e,t,n,r,i){var s=AVe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=Z_e(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&J_e(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&(Math.abs(f)<1||!i)||!c&&(Math.abs(d)<1||!i))&&(l=!0),l},qN=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Bae=function(e){return[e.deltaX,e.deltaY]},jae=function(e){return e&&"current"in e?e.current:e},kVe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},RVe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},NVe=0,O_=[];function DVe(e){var t=I.useRef([]),n=I.useRef([0,0]),r=I.useRef(),i=I.useState(NVe++)[0],s=I.useState(X_e)[0],o=I.useRef(e);I.useEffect(function(){o.current=e},[e]),I.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=Zze([e.lockRef.current],(e.shards||[]).map(jae),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=I.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=qN(m),v=n.current,b="deltaX"in m?m.deltaX:v[0]-y[0],w="deltaY"in m?m.deltaY:v[1]-y[1],E,x=m.target,T=Math.abs(b)>Math.abs(w)?"h":"v";if("touches"in m&&T==="h"&&x.type==="range")return!1;var C=Fae(T,x);if(!C)return!0;if(C?E=T:(E=T==="v"?"h":"v",C=Fae(T,x)),!C)return!1;if(!r.current&&"changedTouches"in m&&(b||w)&&(r.current=E),!E)return!0;var A=r.current||E;return IVe(A,g,m,A==="h"?b:w,!0)},[]),u=I.useCallback(function(m){var g=m;if(!(!O_.length||O_[O_.length-1]!==s)){var y="deltaY"in g?Bae(g):qN(g),v=t.current.filter(function(E){return E.name===g.type&&(E.target===g.target||g.target===E.shadowParent)&&kVe(E.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(jae).filter(Boolean).filter(function(E){return E.contains(g.target)}),w=b.length>0?a(g,b[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),l=I.useCallback(function(m,g,y,v){var b={name:m,delta:g,target:y,should:v,shadowParent:PVe(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(w){return w!==b})},1)},[]),c=I.useCallback(function(m){n.current=qN(m),r.current=void 0},[]),f=I.useCallback(function(m){l(m.type,Bae(m),m.target,a(m,e.lockRef.current))},[]),d=I.useCallback(function(m){l(m.type,qN(m),m.target,a(m,e.lockRef.current))},[]);I.useEffect(function(){return O_.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,P_),document.addEventListener("touchmove",u,P_),document.addEventListener("touchstart",c,P_),function(){O_=O_.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,P_),document.removeEventListener("touchmove",u,P_),document.removeEventListener("touchstart",c,P_)}},[]);var h=e.removeScrollBar,p=e.inert;return I.createElement(I.Fragment,null,p?I.createElement(s,{styles:RVe(i)}):null,h?I.createElement(wVe,{gapMode:e.gapMode}):null)}function PVe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const OVe=uVe(K_e,DVe);var GL=I.forwardRef(function(e,t){return I.createElement(WL,Qd({},e,{ref:t,sideCar:OVe}))});GL.classNames=WL.classNames;function Li(e){return Object.keys(e)}function Nj(e){return e&&typeof e=="object"&&!Array.isArray(e)}function HG(e,t){const n={...e},r=t;return Nj(e)&&Nj(t)&&Object.keys(t).forEach(i=>{Nj(r[i])&&i in e?n[i]=HG(n[i],r[i]):n[i]=r[i]}),n}function $Ve(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function MVe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function ez(e){const t=MVe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function Dj(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function ewe(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?Dj(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?Dj(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?Dj(s):s}}return r}return n}const Ce=ewe("rem",{shouldScale:!0}),c$=ewe("em");function nS(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function twe(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function Vy(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==I.Fragment:!1}function _o(e){const t=I.createContext(null);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>{const i=I.useContext(t);if(i===null)throw new Error(e);return i}]}function rS(e=null){const t=I.createContext(e);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>I.useContext(t)]}function f$(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function d$(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function LVe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function FVe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function BVe(e,t,n){return d$(e,n)===d$(t,n)}function qG({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=d$(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>BVe(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=FVe(l,u,r),f=LVe(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const jVe={app:100,modal:200,popover:300,overlay:400,max:9999};function tf(e){return jVe[e]}const UVe=()=>{};function zVe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||UVe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function rn(e,t="size",n=!0){if(e!==void 0)return twe(e)?n?Ce(e):e:`var(--${t}-${e})`}function ql(e){return rn(e,"mantine-spacing")}function ei(e){return e===void 0?"var(--mantine-radius-default)":rn(e,"mantine-radius")}function mo(e){return rn(e,"mantine-font-size")}function nwe(e){return rn(e,"mantine-line-height",!1)}function WG(e){if(e)return rn(e,"mantine-shadow",!1)}function rm(e,t){return n=>{e==null||e(n),t==null||t(n)}}function GG(e,t){return e in t.breakpoints?ez(t.breakpoints[e]):ez(e)}function h$(e,t){const n=e.map(r=>({value:r,px:GG(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function DC(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function VVe(e,t,n){var r;return n?Array.from(((r=d$(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function HVe(){const[e,t]=I.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function ch(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function kA(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function Jv(e){const t=I.useRef(e);return I.useEffect(()=>{t.current=e}),I.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function YL(e,t){const n=Jv(e),r=I.useRef(0);return I.useEffect(()=>()=>window.clearTimeout(r.current),[]),I.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const Uae=["mousedown","touchstart"];function qVe(e,t,n){const r=I.useRef();return I.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||Uae).forEach(s=>document.addEventListener(s,i)),()=>{(t||Uae).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function WVe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function GVe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function YVe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=I.useState(n?t:GVe(e)),s=I.useRef();return I.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),WVe(s.current,o=>i(o.matches))},[e]),r}const qb=typeof document<"u"?I.useLayoutEffect:I.useEffect;function Nm(e,t){const n=I.useRef(!1);I.useEffect(()=>()=>{n.current=!1},[]),I.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function rwe({opened:e,shouldReturnFocus:t=!0}){const n=I.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return Nm(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function KVe(e,t="body > :not(script)"){const n=kA(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const XVe=/input|select|textarea|button|object/,iwe="a, input, select, textarea, button, object, [tabindex]";function QVe(e){return e.style.display==="none"}function JVe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(QVe(n))return!1;n=n.parentNode}return!0}function swe(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function tz(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(swe(e));return(XVe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&JVe(e)}function owe(e){const t=swe(e);return(Number.isNaN(t)||t>=0)&&tz(e)}function ZVe(e){return Array.from(e.querySelectorAll(iwe)).filter(owe)}function eHe(e,t){const n=ZVe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function tHe(e=!0){const t=I.useRef(),n=I.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(iwe));o=a.find(owe)||a.find(tz)||null,!o&&tz(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=I.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=KVe(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return I.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&eHe(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const nHe=qt.useId||(()=>{});function rHe(){const e=nHe();return e?`mantine-${e.replace(/:/g,"")}`:""}function Da(e){const t=rHe(),[n,r]=I.useState(t);return qb(()=>{r(kA())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function iHe(e=[]){const[t,n]=I.useState(e);return[t,{setState:n,append:(...g)=>n(y=>[...y,...g]),prepend:(...g)=>n(y=>[...g,...y]),insert:(g,...y)=>n(v=>[...v.slice(0,g),...y,...v.slice(g)]),pop:()=>n(g=>{const y=[...g];return y.pop(),y}),shift:()=>n(g=>{const y=[...g];return y.shift(),y}),apply:g=>n(y=>y.map((v,b)=>g(v,b))),applyWhere:(g,y)=>n(v=>v.map((b,w)=>g(b,w)?y(b,w):b)),remove:(...g)=>n(y=>y.filter((v,b)=>!g.includes(b))),reorder:({from:g,to:y})=>n(v=>{const b=[...v],w=v[g];return b.splice(g,1),b.splice(y,0,w),b}),swap:({from:g,to:y})=>n(v=>{const b=[...v],w=b[g],E=b[y];return b.splice(y,1,w),b.splice(g,1,E),b}),setItem:(g,y)=>n(v=>{const b=[...v];return b[g]=y,b}),setItemProp:(g,y,v)=>n(b=>{const w=[...b];return w[g]={...w[g],[y]:v},w}),filter:g=>{n(y=>y.filter(g))}}]}function awe(e,t,n){I.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function YG(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function uwe(...e){return t=>{e.forEach(n=>YG(n,t))}}function ms(...e){return I.useCallback(uwe(...e),e)}function lwe(e,t,n="ltr"){const r=I.useRef(null),i=I.useRef(!1),s=I.useRef(!1),o=I.useRef(0),[a,u]=I.useState(!1);return I.useEffect(()=>{i.current=!0},[]),I.useEffect(()=>{var v,b;const l=({x:w,y:E})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const x=r.current.getBoundingClientRect();if(x.width&&x.height){const T=ch((w-x.left)/x.width,0,1);e({x:n==="ltr"?T:1-T,y:ch((E-x.top)/x.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=w=>{d(),w.preventDefault(),m(w)},m=w=>l({x:w.clientX,y:w.clientY}),g=w=>{w.cancelable&&w.preventDefault(),d(),y(w)},y=w=>{w.cancelable&&w.preventDefault(),l({x:w.changedTouches[0].clientX,y:w.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(b=r.current)==null||b.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function Cs({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=I.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function KG(e,t){return YVe("(prefers-reduced-motion: reduce)",e,t)}const sHe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function Qw(e){const t=I.useRef(0),n=I.useRef(null),[r,i]=I.useState(sHe),s=I.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return I.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function oHe(e){const[t,{width:n,height:r}]=Qw(e);return{ref:t,width:n,height:r}}function aHe(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return{...n,key:i}}function uHe(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function lHe(e){return t=>uHe(aHe(e),t)}function cHe(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i,s={preventDefault:!0}])=>{lHe(r)(n)&&(s.preventDefault&&t.preventDefault(),i(n))})}}function Jw(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=I.useState(e),o=I.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=I.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=I.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function fHe(e,t,n={autoInvoke:!1}){const r=I.useRef(null),i=I.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=I.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return I.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function dHe(e,t,n){const r=I.useRef(),i=I.useRef(null);return I.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function hHe(){const[e,t]=I.useState(!1);return I.useEffect(()=>t(!0),[]),e}function pHe(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function mHe(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});qb(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>pHe(`${e}:${String(r)}`,i[0])}return[t,n]}var gHe={};function cwe(){return typeof process<"u"&&gHe?"production":"development"}function fwe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=fwe(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Bi(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=fwe(e))&&(r&&(r+=" "),r+=t);return r}const yHe={};function vHe(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=Bi(t[r],i):t[r]=i})}),t}function KL({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||yHe);return vHe(s)}function p$({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const dwe=I.createContext(null);function Hy(){const e=I.useContext(dwe);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function bHe(){return Hy().cssVariablesResolver}function _He(){return Hy().classNamesPrefix}function XG(){return Hy().getStyleNonce}function wHe(){return Hy().withStaticClasses}function EHe(){return Hy().headless}function xHe(){var e;return(e=Hy().stylesTransform)==null?void 0:e.sx}function SHe(){var e;return(e=Hy().stylesTransform)==null?void 0:e.styles}function THe(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function CHe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function AHe(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function IHe(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function QG(e){return THe(e)?CHe(e):e.startsWith("rgb")?AHe(e):e.startsWith("hsl")?IHe(e):{r:0,g:0,b:0,a:1}}function WN(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=QG(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function F2(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function Pj(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function kHe(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function RHe(e){if(e.startsWith("oklch("))return(kHe(e)||0)/100;const{r:t,g:n,b:r}=QG(e),i=t/255,s=n/255,o=r/255,a=Pj(i),u=Pj(s),l=Pj(o);return .2126*a+.7152*u+.0722*l}function DT(e,t=.179){return e.startsWith("var(")?!1:RHe(e)>t}function ep({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:DT(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:DT(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:DT(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][F2(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:DT(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:DT(e,t.luminanceThreshold),shade:s,variable:void 0}}function Zr(e,t){const n=ep({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function nz(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=Zr(n.from,t),i=Zr(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function Ud(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=QG(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const $_=Ud,NHe=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=ep({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Ce(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Ce(1)} solid transparent`}:{background:e,hover:WN(e,.1),color:a,border:`${Ce(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ce(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:Ud(a,.1),hover:Ud(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ce(1)} solid transparent`}}return{background:Ud(e,.1),hover:Ud(e,.12),color:e,border:`${Ce(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Ce(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:Ud(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ce(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:Ud(e,.05),color:e,border:`${Ce(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ce(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:Ud(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ce(1)} solid transparent`}}return{background:"transparent",hover:Ud(e,.12),color:e,border:`${Ce(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Ce(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ce(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Ce(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:WN(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Ce(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:WN(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ce(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:WN(t.white,.01),color:e,border:`${Ce(1)} solid transparent`}:n==="gradient"?{background:nz(r,t),hover:nz(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Ce(1)} solid var(--mantine-color-default-border)`}:{}},DHe={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},zae="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",JG={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:DHe,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:NHe,autoContrast:!1,luminanceThreshold:.3,fontFamily:zae,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:zae,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Ce(34),lineHeight:"1.3"},h2:{fontSize:Ce(26),lineHeight:"1.35"},h3:{fontSize:Ce(22),lineHeight:"1.4"},h4:{fontSize:Ce(18),lineHeight:"1.45"},h5:{fontSize:Ce(16),lineHeight:"1.5"},h6:{fontSize:Ce(14),lineHeight:"1.5"}}},fontSizes:{xs:Ce(12),sm:Ce(14),md:Ce(16),lg:Ce(18),xl:Ce(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Ce(2),sm:Ce(4),md:Ce(8),lg:Ce(16),xl:Ce(32)},spacing:{xs:Ce(10),sm:Ce(12),md:Ce(16),lg:Ce(20),xl:Ce(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Ce(1)} ${Ce(3)} rgba(0, 0, 0, 0.05), 0 ${Ce(1)} ${Ce(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Ce(1)} ${Ce(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ce(10)} ${Ce(15)} ${Ce(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ce(7)} ${Ce(7)} ${Ce(-5)}`,md:`0 ${Ce(1)} ${Ce(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ce(20)} ${Ce(25)} ${Ce(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ce(10)} ${Ce(10)} ${Ce(-5)}`,lg:`0 ${Ce(1)} ${Ce(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ce(28)} ${Ce(23)} ${Ce(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ce(12)} ${Ce(12)} ${Ce(-7)}`,xl:`0 ${Ce(1)} ${Ce(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ce(36)} ${Ce(28)} ${Ce(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ce(17)} ${Ce(17)} ${Ce(-7)}`},other:{},components:{}};function Vae(e){return e==="auto"||e==="dark"||e==="light"}function PHe({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return Vae(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&Vae(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const OHe="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",Hae="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function Oj(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function qae(e){if(!(e.primaryColor in e.colors))throw new Error(OHe);if(typeof e.primaryShade=="object"&&(!Oj(e.primaryShade.dark)||!Oj(e.primaryShade.light)))throw new Error(Hae);if(typeof e.primaryShade=="number"&&!Oj(e.primaryShade))throw new Error(Hae)}function $He(e,t){var r;if(!t)return qae(e),e;const n=HG(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),qae(n),n}const ZG=I.createContext(null),MHe=()=>I.useContext(ZG)||JG;function qs(){const e=I.useContext(ZG);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function hwe({theme:e,children:t,inherit:n=!0}){const r=MHe(),i=I.useMemo(()=>$He(n?r:JG,e),[e,r,n]);return _.jsx(ZG.Provider,{value:i,children:t})}hwe.displayName="@mantine/core/MantineThemeProvider";function LHe(){const e=qs(),t=XG(),n=Li(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=ez(e.breakpoints[i]),a=s?`${o-.1}px`:c$(o-.1),u=s?`${o}px`:c$(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return _.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function $j(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function Mj(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function FHe(e,t){const n=$j(e.variables),r=n?Mj(t,n):"",i=$j(e.dark),s=i?Mj(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=$j(e.light),a=o?Mj(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function qy({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&ep({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function Wae(e,t){return qy({color:e.colors[e.primaryColor][F2(e,t)],theme:e,autoContrast:null})}function GN({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=F2(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:$_(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:$_(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:$_(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=F2(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:$_(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:$_(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:$_(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function BHe(e){return Array.isArray(e)?e:Array(10).fill(e)}function jHe(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function M_(e,t,n){Li(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const pwe=e=>{const t=F2(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Ce(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":Wae(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":Wae(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};M_(r.variables,e.breakpoints,"breakpoint"),M_(r.variables,e.spacing,"spacing"),M_(r.variables,e.fontSizes,"font-size"),M_(r.variables,e.lineHeights,"line-height"),M_(r.variables,e.shadows,"shadow"),M_(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Li(e.colors).forEach(s=>{const o=e.colors[s];if(jHe(o)){Object.assign(r.light,GN({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,GN({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,GN({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,GN({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Li(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function UHe({theme:e,generator:t}){const n=pwe(e),r=t==null?void 0:t(e);return r?HG(n,r):n}const Lj=pwe(JG);function zHe(e){const t={variables:{},light:{},dark:{}};return Li(e.variables).forEach(n=>{Lj.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Li(e.light).forEach(n=>{Lj.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Li(e.dark).forEach(n=>{Lj.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function VHe(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function mwe({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=qs(),r=XG(),i=bHe(),s=UHe({theme:n,generator:i}),o=e===":root"&&t,a=o?zHe(s):s,u=FHe(a,e);return u?_.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":VHe(e)}`}}):null}mwe.displayName="@mantine/CssVariables";function HHe(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function L_(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function qHe({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=I.useRef(),[s,o]=I.useState(()=>e.get(t)),a=r||s,u=I.useCallback(c=>{r||(L_(c,n),o(c),e.set(c))},[e.set,a,r]),l=I.useCallback(()=>{o(t),L_(t,n),e.clear()},[e.clear,t]);return I.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),qb(()=>{L_(e.get(t),n)},[]),I.useEffect(()=>{var f;if(r)return L_(r,n),()=>{};r===void 0&&L_(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&L_(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function WHe({respectReducedMotion:e,getRootElement:t}){qb(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}HHe();function gwe({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=PHe(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=qHe({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return WHe({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),_.jsx(dwe.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:_.jsxs(hwe,{theme:e,children:[o&&_.jsx(mwe,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&_.jsx(LHe,{}),t]})})}gwe.displayName="@mantine/core/MantineProvider";function ig({classNames:e,styles:t,props:n,stylesCtx:r}){const i=qs();return{resolvedClassNames:KL({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:p$({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const GHe={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function YHe({theme:e,options:t,unstyled:n}){return Bi((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||GHe[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function KHe({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return KL({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function Gae({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return KL({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function XHe({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function QHe({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function JHe({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function ZHe({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=KL({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function eqe({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function tqe({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return Bi(YHe({theme:e,options:t,unstyled:a||h}),ZHe({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),eqe({options:t,classes:o,selector:r,unstyled:a}),Gae({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),Gae({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),KHe({selector:r,stylesCtx:f,options:t,props:c,theme:e}),XHe({rootSelector:l,selector:r,className:u}),QHe({selector:r,classes:o,unstyled:a||h}),d&&!h&&JHe({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function nqe({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return p$({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function rz({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...rz({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function rqe(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...nS(n[r])}}),t),{})}function iqe({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=rqe([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function sqe({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&nqe({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&p$({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&p$({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...iqe({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?rz({style:u,theme:e}):null,...rz({style:r==null?void 0:r.style,theme:e})}}function oqe({props:e,stylesCtx:t,themeName:n}){var o;const r=qs(),i=(o=SHe())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function vt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=qs(),h=_He(),p=wHe(),m=EHe(),g=(Array.isArray(e)?e:[e]).filter(b=>b),{withStylesTransform:y,getTransformedStyles:v}=oqe({props:n,stylesCtx:r,themeName:g});return(b,w)=>({className:tqe({theme:d,options:w,themeName:g,selector:b,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([w==null?void 0:w.styles,l])}),style:sqe({theme:d,themeName:g,selector:b,options:w,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function iS(e,t){return typeof e=="boolean"?e:t.autoContrast}function xe(e,t,n){var o;const r=qs(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...nS(n)}}function Fj(e){return Li(e).reduce((t,n)=>e[n]!==void 0?`${t}${$Ve(n)}:${e[n]};`:t,"").trim()}function aqe({selector:e,styles:t,media:n,container:r}){const i=t?Fj(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${Fj(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${Fj(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function xk(e){const t=XG();return _.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:aqe(e)}})}function Wb(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:E,opacity:x,ff:T,fz:C,fw:A,lts:k,ta:R,lh:O,fs:D,tt:$,td:F,w:L,miw:j,maw:z,h:q,mih:P,mah:U,bgsz:W,bgp:B,bgr:H,bga:G,pos:te,top:le,left:fe,bottom:de,right:ge,inset:Ie,display:pe,flex:He,hiddenFrom:Ue,visibleFrom:yt,lightHidden:it,darkHidden:be,sx:ke,...ze}=e;return{styleProps:nS({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:E,opacity:x,ff:T,fz:C,fw:A,lts:k,ta:R,lh:O,fs:D,tt:$,td:F,w:L,miw:j,maw:z,h:q,mih:P,mah:U,bgsz:W,bgp:B,bgr:H,bga:G,pos:te,top:le,left:fe,bottom:de,right:ge,inset:Ie,display:pe,flex:He,hiddenFrom:Ue,visibleFrom:yt,lightHidden:it,darkHidden:be,sx:ke}),rest:ze}}const uqe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function eY(e,t){const n=ep({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function lqe(e,t){const n=ep({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:eY(e,t)}function cqe(e,t){if(typeof e=="number")return Ce(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Ce(n)}`;return r&&(s+=` ${r}`),BHe.length>0&&(s+=` ${eY(i.join(" "),t)}`),s.trim()}return e}const Yae={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function fqe(e){return typeof e=="string"&&e in Yae?Yae[e]:e}const dqe=["h1","h2","h3","h4","h5","h6"];function hqe(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&dqe.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Ce(e):e}function pqe(e){return e}const mqe=["h1","h2","h3","h4","h5","h6"];function gqe(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&mqe.includes(e)?`var(--mantine-${e}-line-height)`:e}function yqe(e){return typeof e=="number"?Ce(e):e}function vqe(e,t){if(typeof e=="number")return Ce(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Ce(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const Bj={color:eY,textColor:lqe,fontSize:hqe,spacing:vqe,identity:pqe,size:yqe,lineHeight:gqe,fontFamily:fqe,border:cqe};function Kae(e){return e.replace("(min-width: ","").replace("em)","")}function bqe({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(Kae(i))-Number(Kae(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function _qe(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function wqe(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function Eqe(e){return typeof e=="object"&&e!==null?Li(e).filter(t=>t!=="base"):[]}function xqe(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function ywe({styleProps:e,data:t,theme:n}){return bqe(Li(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=wqe(e[i]);if(!_qe(e[i]))return o.forEach(l=>{r.inlineStyles[l]=Bj[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=Eqe(e[i]);return o.forEach(l=>{a&&(r.styles[l]=Bj[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:Bj[s.type](xqe(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function XL(){return`__m__-${I.useId().replace(/:/g,"")}`}function tY(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...tY(r,t)}),{}):typeof e=="function"?e(t):e??{}}function vwe(e){return e.startsWith("data-")?e:`data-${e}`}function Sqe(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[vwe(n)]=e[n]),t},{})}function bwe(e){return e?typeof e=="string"?{[vwe(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...bwe(n)}),{}):Sqe(e):null}function iz(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...iz(r,t)}),{}):typeof e=="function"?e(t):e??{}}function Tqe({theme:e,style:t,vars:n,styleProps:r}){const i=iz(t,e),s=iz(n,e);return{...i,...s,...r}}const _we=I.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var C;const m=qs(),g=e||"div",{styleProps:y,rest:v}=Wb(h),b=xHe(),w=(C=b==null?void 0:b())==null?void 0:C(y.sx),E=XL(),x=ywe({styleProps:y,theme:m,data:uqe}),T={ref:p,style:Tqe({theme:m,style:t,vars:n,styleProps:x.inlineStyles}),className:Bi(r,w,{[E]:x.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":twe(o)?void 0:o||void 0,size:d,...bwe(s),...v};return _.jsxs(_.Fragment,{children:[x.hasResponsiveStyles&&_.jsx(xk,{selector:`.${E}`,styles:x.styles,media:x.media}),typeof f=="function"?f(T):_.jsx(g,{...T})]})});_we.displayName="@mantine/core/Box";const _e=_we;function wwe(e){return e}function Le(e){const t=I.forwardRef(e);return t.extend=wwe,t}function Ws(e){const t=I.forwardRef(e);return t.extend=wwe,t}const Cqe=I.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function tp(){return I.useContext(Cqe)}function Aqe(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function jj(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const PT=typeof window<"u"&&window.requestAnimationFrame;function Iqe({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=I.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=I.useState(r?{}:o),l=p=>{zy.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||Aqe(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}Nm(()=>{typeof PT=="function"&&PT(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),PT(()=>{const p=jj(i);c({...f(p),height:p})})}:()=>{const p=jj(i);c({...f(p),willChange:"height",height:p}),PT(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=jj(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:uwe(i,y),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const kqe={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},nY=Le((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=xe("Collapse",kqe,e),c=qs(),f=KG(),h=(c.respectReducedMotion?f:!1)?0:i,p=Iqe({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?_.jsx(_e,{...l,children:n}):null:_.jsx(_e,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...tY(o,c)},ref:t,...l}),children:n})});nY.displayName="@mantine/core/Collapse";const[Rqe,nf]=_o("ScrollArea.Root component was not found in tree");function FE(e,t){const n=Jv(t);qb(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const Nqe=I.forwardRef((e,t)=>{const{style:n,...r}=e,i=nf(),[s,o]=I.useState(0),[a,u]=I.useState(0),l=!!(s&&a);return FE(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),FE(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?_.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),Dqe=I.forwardRef((e,t)=>{const n=nf(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?_.jsx(Nqe,{...e,ref:t}):null}),Pqe={scrollHideDelay:1e3,type:"hover"},Ewe=I.forwardRef((e,t)=>{const n=xe("ScrollAreaRoot",Pqe,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=I.useState(null),[l,c]=I.useState(null),[f,d]=I.useState(null),[h,p]=I.useState(null),[m,g]=I.useState(null),[y,v]=I.useState(0),[b,w]=I.useState(0),[E,x]=I.useState(!1),[T,C]=I.useState(!1),A=ms(t,k=>u(k));return _.jsx(Rqe,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:x,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:T,onScrollbarYEnabledChange:C,onCornerWidthChange:v,onCornerHeightChange:w},children:_.jsx(_e,{...o,ref:A,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${b}px`}})})});Ewe.displayName="@mantine/core/ScrollAreaRoot";function xwe(e,t){const n=e/t;return Number.isNaN(n)?0:n}function QL(e){const t=xwe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Swe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Oqe(e,[t,n]){return Math.min(n,Math.max(t,e))}function Xae(e,t,n="ltr"){const r=QL(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=Oqe(e,u);return Swe([0,o],[0,a])(l)}function $qe(e,t,n,r="ltr"){const i=QL(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return Swe([u,l],f)(e)}function Twe(e,t){return e>0&&e<t}function m$(e){return e?parseInt(e,10):0}function O1(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[Mqe,Cwe]=_o("ScrollAreaScrollbar was not found in tree"),Awe=I.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=nf(),[h,p]=I.useState(null),m=ms(t,C=>p(C)),g=I.useRef(null),y=I.useRef(""),{viewport:v}=d,b=n.content-n.viewport,w=Jv(l),E=Jv(a),x=YL(c,10),T=C=>{if(g.current){const A=C.clientX-g.current.left,k=C.clientY-g.current.top;u({x:A,y:k})}};return I.useEffect(()=>{const C=A=>{const k=A.target;(h==null?void 0:h.contains(k))&&w(A,b)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[v,h,b,w]),I.useEffect(E,[n,E]),FE(h,x),FE(d.content,x),_.jsx(Mqe,{value:{scrollbar:h,hasThumb:r,onThumbChange:Jv(i),onThumbPointerUp:Jv(s),onThumbPositionChange:E,onThumbPointerDown:Jv(o)},children:_.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:O1(e.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",T(C))}),onPointerMove:O1(e.onPointerMove,T),onPointerUp:O1(e.onPointerUp,C=>{const A=C.target;A.hasPointerCapture(C.pointerId)&&A.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=y.current,g.current=null})})})}),Lqe=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=nf(),[a,u]=I.useState(),l=I.useRef(null),c=ms(t,l,o.onScrollbarXChange);return I.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),_.jsx(Awe,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${QL(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),Twe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:m$(a.paddingLeft),paddingEnd:m$(a.paddingRight)}})}})}),Fqe=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=nf(),[a,u]=I.useState(),l=I.useRef(null),c=ms(t,l,o.onScrollbarYChange);return I.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),_.jsx(Awe,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${QL(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),Twe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:m$(a.paddingTop),paddingEnd:m$(a.paddingBottom)}})}})}),rY=I.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=tp(),s=nf(),o=I.useRef(null),a=I.useRef(0),[u,l]=I.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=xwe(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>$qe(h,a.current,u,p);return n==="horizontal"?_.jsx(Lqe,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=Xae(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?_.jsx(Fqe,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=Xae(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),Iwe=I.forwardRef((e,t)=>{const n=nf(),{forceMount:r,...i}=e,[s,o]=I.useState(!1),a=e.orientation==="horizontal",u=YL(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return FE(n.viewport,u),FE(n.content,u),r||s?_.jsx(rY,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),Bqe=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=nf(),[s,o]=I.useState(!1);return I.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?_.jsx(Iwe,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),jqe=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=nf(),s=e.orientation==="horizontal",[o,a]=I.useState("hidden"),u=YL(()=>a("idle"),100);return I.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),I.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?_.jsx(rY,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:O1(e.onPointerEnter,()=>a("interacting")),onPointerLeave:O1(e.onPointerLeave,()=>a("idle"))}):null}),Qae=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=nf(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return I.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?_.jsx(Bqe,{...r,ref:t,forceMount:n}):i.type==="scroll"?_.jsx(jqe,{...r,ref:t,forceMount:n}):i.type==="auto"?_.jsx(Iwe,{...r,ref:t,forceMount:n}):i.type==="always"?_.jsx(rY,{...r,ref:t}):null});function Uqe(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const zqe=I.forwardRef((e,t)=>{const{style:n,...r}=e,i=nf(),s=Cwe(),{onThumbPositionChange:o}=s,a=ms(t,c=>s.onThumbChange(c)),u=I.useRef(),l=YL(()=>{u.current&&(u.current(),u.current=void 0)},100);return I.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=Uqe(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),_.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:O1(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:O1(e.onPointerUp,s.onThumbPointerUp)})}),Jae=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Cwe();return n||i.hasThumb?_.jsx(zqe,{ref:t,...r}):null}),kwe=I.forwardRef(({children:e,style:t,...n},r)=>{const i=nf(),s=ms(r,i.onViewportChange);return _.jsx(_e,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:_.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});kwe.displayName="@mantine/core/ScrollAreaViewport";var iY={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const Rwe={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},Vqe=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Ce(t)}}),Gb=Le((e,t)=>{const n=xe("ScrollArea",Rwe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...v}=n,[b,w]=I.useState(!1),E=vt({name:"ScrollArea",props:n,classes:iY,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Vqe});return _.jsxs(Ewe,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,...E("root"),...v,children:[_.jsx(kwe,{...d,...E("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:x=>{var T;(T=d==null?void 0:d.onScroll)==null||T.call(d,x),p==null||p({x:x.currentTarget.scrollLeft,y:x.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&_.jsx(Qae,{...E("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(Jae,{...E("thumb")})}),(y==="xy"||y==="y")&&_.jsx(Qae,{...E("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(Jae,{...E("thumb")})}),_.jsx(Dqe,{...E("corner"),"data-hovered":b||void 0,"data-hidden":c==="never"||void 0})]})});Gb.displayName="@mantine/core/ScrollArea";const sY=Le((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=xe("ScrollAreaAutosize",Rwe,e);return _.jsx(_e,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:_.jsx(_e,{style:{display:"flex",flexDirection:"column",flex:1},children:_.jsx(Gb,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});Gb.classes=iY;sY.displayName="@mantine/core/ScrollAreaAutosize";sY.classes=iY;Gb.Autosize=sY;var Nwe={root:"m_87cf2631"};const Hqe={__staticSelector:"UnstyledButton"},Ss=Ws((e,t)=>{const n=xe("UnstyledButton",Hqe,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=vt({name:s,props:n,classes:Nwe,className:r,style:l,classNames:a,styles:u,unstyled:o});return _.jsx(_e,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});Ss.classes=Nwe;Ss.displayName="@mantine/core/UnstyledButton";var Dwe={root:"m_515a97f8"};const qqe={},oY=Le((e,t)=>{const n=xe("VisuallyHidden",qqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=vt({name:"VisuallyHidden",classes:Dwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return _.jsx(_e,{component:"span",ref:t,...c("root"),...l})});oY.classes=Dwe;oY.displayName="@mantine/core/VisuallyHidden";var Pwe={root:"m_1b7284a3"};const Wqe={},Gqe=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:ei(t),"--paper-shadow":WG(n)}}),JL=Ws((e,t)=>{const n=xe("Paper",Wqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=vt({name:"Paper",props:n,classes:Pwe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Gqe});return _.jsx(_e,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});JL.classes=Pwe;JL.displayName="@mantine/core/Paper";function sS(e){return Owe(e)?(e.nodeName||"").toLowerCase():"#document"}function Yu(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function sg(e){var t;return(t=(Owe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Owe(e){return e instanceof Node||e instanceof Yu(e).Node}function Ai(e){return e instanceof Element||e instanceof Yu(e).Element}function Wl(e){return e instanceof HTMLElement||e instanceof Yu(e).HTMLElement}function sz(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Yu(e).ShadowRoot}function Sk(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=qc(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function Yqe(e){return["table","td","th"].includes(sS(e))}function aY(e){const t=uY(),n=qc(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Kqe(e){let t=Dm(e);for(;Wl(t)&&!Z0(t);){if(aY(t))return t;t=Dm(t)}return null}function uY(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Z0(e){return["html","body","#document"].includes(sS(e))}function qc(e){return Yu(e).getComputedStyle(e)}function ZL(e){return Ai(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Dm(e){if(sS(e)==="html")return e;const t=e.assignedSlot||e.parentNode||sz(e)&&e.host||sg(e);return sz(t)?t.host:t}function $we(e){const t=Dm(e);return Z0(t)?e.ownerDocument?e.ownerDocument.body:e.body:Wl(t)&&Sk(t)?t:$we(t)}function pm(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=$we(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Yu(i);return s?t.concat(o,o.visualViewport||[],Sk(i)?i:[],o.frameElement&&n?pm(o.frameElement):[]):t.concat(i,pm(i,[],n))}function Zae(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function B2(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&sz(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function Mwe(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function Lwe(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function Xqe(e){return Zqe()?!1:!eue()&&e.width===0&&e.height===0||eue()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function Qqe(){return/apple/i.test(navigator.vendor)}function eue(){const e=/android/i;return e.test(Mwe())||e.test(Lwe())}function Jqe(){return Mwe().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Zqe(){return Lwe().includes("jsdom/")}function oz(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function eWe(e){return"nativeEvent"in e}function tWe(e){return e.matches("html,body")}function g1(e){return(e==null?void 0:e.ownerDocument)||document}function Uj(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function sw(e){return"composedPath"in e?e.composedPath()[0]:e.target}const nWe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function rWe(e){return Wl(e)&&e.matches(nWe)}const Nl=Math.min,ga=Math.max,g$=Math.round,YN=Math.floor,ey=e=>({x:e,y:e}),iWe={left:"right",right:"left",bottom:"top",top:"bottom"},sWe={start:"end",end:"start"};function az(e,t,n){return ga(e,Nl(t,n))}function Pm(e,t){return typeof e=="function"?e(t):e}function sd(e){return e.split("-")[0]}function oS(e){return e.split("-")[1]}function lY(e){return e==="x"?"y":"x"}function cY(e){return e==="y"?"height":"width"}function Yb(e){return["top","bottom"].includes(sd(e))?"y":"x"}function fY(e){return lY(Yb(e))}function oWe(e,t,n){n===void 0&&(n=!1);const r=oS(e),i=fY(e),s=cY(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=y$(o)),[o,y$(o)]}function aWe(e){const t=y$(e);return[uz(e),t,uz(t)]}function uz(e){return e.replace(/start|end/g,t=>sWe[t])}function uWe(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function lWe(e,t,n,r){const i=oS(e);let s=uWe(sd(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(uz)))),s}function y$(e){return e.replace(/left|right|bottom|top/g,t=>iWe[t])}function cWe(e){return{top:0,right:0,bottom:0,left:0,...e}}function dY(e){return typeof e!="number"?cWe(e):{top:e,right:e,bottom:e,left:e}}function BE(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function tue(e,t,n){let{reference:r,floating:i}=e;const s=Yb(t),o=fY(t),a=cY(o),u=sd(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(oS(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const fWe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=tue(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:b,data:w,reset:E}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=b??f,h={...h,[g]:{...h[g],...w}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(l=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:f}=tue(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function hY(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=Pm(t,e),p=dY(h),g=a[d?f==="floating"?"reference":"floating":f],y=BE(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},E=BE(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:u}):v);return{top:(y.top-E.top+p.top)/w.y,bottom:(E.bottom-y.bottom+p.bottom)/w.y,left:(y.left-E.left+p.left)/w.x,right:(E.right-y.right+p.right)/w.x}}const dWe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=Pm(e,t)||{};if(l==null)return{};const f=dY(c),d={x:n,y:r},h=fY(i),p=cY(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-d[h]-s.floating[p],E=d[h]-s.reference[h],x=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let T=x?x[b]:0;(!T||!await(o.isElement==null?void 0:o.isElement(x)))&&(T=a.floating[b]||s.floating[p]);const C=w/2-E/2,A=T/2-m[p]/2-1,k=Nl(f[y],A),R=Nl(f[v],A),O=k,D=T-m[p]-R,$=T/2-m[p]/2+C,F=az(O,$,D),L=!u.arrow&&oS(i)!=null&&$!==F&&s.reference[p]/2-($<O?k:R)-m[p]/2<0,j=L?$<O?$-O:$-D:0;return{[h]:d[h]+j,data:{[h]:F,centerOffset:$-F-j,...L&&{alignmentOffset:j}},reset:L}}}),hWe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Pm(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=sd(i),v=sd(a)===a,b=await(u.isRTL==null?void 0:u.isRTL(l.floating)),w=d||(v||!m?[y$(a)]:aWe(a));!d&&p!=="none"&&w.push(...lWe(a,m,p,b));const E=[a,...w],x=await hY(t,g),T=[];let C=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&T.push(x[y]),f){const O=oWe(i,o,b);T.push(x[O[0]],x[O[1]])}if(C=[...C,{placement:i,overflows:T}],!T.every(O=>O<=0)){var A,k;const O=(((A=s.flip)==null?void 0:A.index)||0)+1,D=E[O];if(D)return{data:{index:O,overflows:C},reset:{placement:D}};let $=(k=C.filter(F=>F.overflows[0]<=0).sort((F,L)=>F.overflows[1]-L.overflows[1])[0])==null?void 0:k.placement;if(!$)switch(h){case"bestFit":{var R;const F=(R=C.map(L=>[L.placement,L.overflows.filter(j=>j>0).reduce((j,z)=>j+z,0)]).sort((L,j)=>L[1]-j[1])[0])==null?void 0:R[0];F&&($=F);break}case"initialPlacement":$=a;break}if(i!==$)return{reset:{placement:$}}}return{}}}};function Fwe(e){const t=Nl(...e.map(s=>s.left)),n=Nl(...e.map(s=>s.top)),r=ga(...e.map(s=>s.right)),i=ga(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function pWe(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>BE(Fwe(i)))}const mWe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=Pm(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=pWe(c),d=BE(Fwe(c)),h=dY(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(Yb(n)==="y"){const k=f[0],R=f[f.length-1],O=sd(n)==="top",D=k.top,$=R.bottom,F=O?k.left:R.left,L=O?k.right:R.right,j=L-F,z=$-D;return{top:D,bottom:$,left:F,right:L,width:j,height:z,x:F,y:D}}const g=sd(n)==="left",y=ga(...f.map(k=>k.right)),v=Nl(...f.map(k=>k.left)),b=f.filter(k=>g?k.left===v:k.right===y),w=b[0].top,E=b[b.length-1].bottom,x=v,T=y,C=T-x,A=E-w;return{top:w,bottom:E,left:x,right:T,width:C,height:A,x,y:w}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function gWe(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=sd(n),a=oS(n),u=Yb(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=Pm(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const yWe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await gWe(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},vWe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=Pm(e,t),l={x:n,y:r},c=await hY(t,u),f=Yb(sd(i)),d=lY(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],b=h-c[y];h=az(v,h,b)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],b=p-c[y];p=az(v,p,b)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},bWe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=Pm(e,t),c={x:n,y:r},f=Yb(i),d=lY(f);let h=c[d],p=c[f];const m=Pm(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const b=d==="y"?"height":"width",w=s.reference[d]-s.floating[b]+g.mainAxis,E=s.reference[d]+s.reference[b]-g.mainAxis;h<w?h=w:h>E&&(h=E)}if(l){var y,v;const b=d==="y"?"width":"height",w=["top","left"].includes(sd(i)),E=s.reference[f]-s.floating[b]+(w&&((y=o.offset)==null?void 0:y[f])||0)+(w?0:g.crossAxis),x=s.reference[f]+s.reference[b]+(w?0:((v=o.offset)==null?void 0:v[f])||0)-(w?g.crossAxis:0);p<E?p=E:p>x&&(p=x)}return{[d]:h,[f]:p}}}},_We=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=Pm(e,t),u=await hY(t,a),l=sd(n),c=oS(n),f=Yb(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=Nl(h-u[p],g),b=Nl(d-u[m],y),w=!t.middlewareData.shift;let E=v,x=b;if(f?x=c||w?Nl(b,y):y:E=c||w?Nl(v,g):g,w&&!c){const C=ga(u.left,0),A=ga(u.right,0),k=ga(u.top,0),R=ga(u.bottom,0);f?x=d-2*(C!==0||A!==0?C+A:ga(u.left,u.right)):E=h-2*(k!==0||R!==0?k+R:ga(u.top,u.bottom))}await o({...t,availableWidth:x,availableHeight:E});const T=await i.getDimensions(s.floating);return d!==T.width||h!==T.height?{reset:{rects:!0}}:{}}}};function Bwe(e){const t=qc(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Wl(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=g$(n)!==s||g$(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function pY(e){return Ai(e)?e:e.contextElement}function Zw(e){const t=pY(e);if(!Wl(t))return ey(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=Bwe(t);let o=(s?g$(n.width):n.width)/r,a=(s?g$(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const wWe=ey(0);function jwe(e){const t=Yu(e);return!uY()||!t.visualViewport?wWe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function EWe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Yu(e)?!1:t}function eb(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=pY(e);let o=ey(1);t&&(r?Ai(r)&&(o=Zw(r)):o=Zw(e));const a=EWe(s,n,r)?jwe(s):ey(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=Yu(s),h=r&&Ai(r)?Yu(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=Zw(m),y=m.getBoundingClientRect(),v=qc(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=b,l+=w,p=Yu(m),m=p.frameElement}}return BE({width:c,height:f,x:u,y:l})}const xWe=[":popover-open",":modal"];function mY(e){return xWe.some(t=>{try{return e.matches(t)}catch{return!1}})}function SWe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=sg(r),a=t?mY(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=ey(1);const c=ey(0),f=Wl(r);if((f||!f&&!s)&&((sS(r)!=="body"||Sk(o))&&(u=ZL(r)),Wl(r))){const d=eb(r);l=Zw(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function TWe(e){return Array.from(e.getClientRects())}function Uwe(e){return eb(sg(e)).left+ZL(e).scrollLeft}function CWe(e){const t=sg(e),n=ZL(e),r=e.ownerDocument.body,i=ga(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=ga(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Uwe(e);const a=-n.scrollTop;return qc(r).direction==="rtl"&&(o+=ga(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function AWe(e,t){const n=Yu(e),r=sg(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=uY();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function IWe(e,t){const n=eb(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Wl(e)?Zw(e):ey(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function nue(e,t,n){let r;if(t==="viewport")r=AWe(e,n);else if(t==="document")r=CWe(sg(e));else if(Ai(t))r=IWe(t,n);else{const i=jwe(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return BE(r)}function zwe(e,t){const n=Dm(e);return n===t||!Ai(n)||Z0(n)?!1:qc(n).position==="fixed"||zwe(n,t)}function kWe(e,t){const n=t.get(e);if(n)return n;let r=pm(e,[],!1).filter(a=>Ai(a)&&sS(a)!=="body"),i=null;const s=qc(e).position==="fixed";let o=s?Dm(e):e;for(;Ai(o)&&!Z0(o);){const a=qc(o),u=aY(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Sk(o)&&!u&&zwe(e,o))?r=r.filter(c=>c!==o):i=a,o=Dm(o)}return t.set(e,r),r}function RWe(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?mY(t)?[]:kWe(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=nue(t,c,i);return l.top=ga(f.top,l.top),l.right=Nl(f.right,l.right),l.bottom=Nl(f.bottom,l.bottom),l.left=ga(f.left,l.left),l},nue(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function NWe(e){const{width:t,height:n}=Bwe(e);return{width:t,height:n}}function DWe(e,t,n){const r=Wl(t),i=sg(t),s=n==="fixed",o=eb(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=ey(0);if(r||!r&&!s)if((sS(t)!=="body"||Sk(i))&&(a=ZL(t)),r){const f=eb(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=Uwe(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function zj(e){return qc(e).position==="static"}function rue(e,t){return!Wl(e)||qc(e).position==="fixed"?null:t?t(e):e.offsetParent}function Vwe(e,t){const n=Yu(e);if(mY(e))return n;if(!Wl(e)){let i=Dm(e);for(;i&&!Z0(i);){if(Ai(i)&&!zj(i))return i;i=Dm(i)}return n}let r=rue(e,t);for(;r&&Yqe(r)&&zj(r);)r=rue(r,t);return r&&Z0(r)&&zj(r)&&!aY(r)?n:r||Kqe(e)||n}const PWe=async function(e){const t=this.getOffsetParent||Vwe,n=this.getDimensions,r=await n(e.floating);return{reference:DWe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function OWe(e){return qc(e).direction==="rtl"}const $We={convertOffsetParentRelativeRectToViewportRelativeRect:SWe,getDocumentElement:sg,getClippingRect:RWe,getOffsetParent:Vwe,getElementRects:PWe,getClientRects:TWe,getDimensions:NWe,getScale:Zw,isElement:Ai,isRTL:OWe};function MWe(e,t){let n=null,r;const i=sg(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=YN(c),p=YN(i.clientWidth-(l+f)),m=YN(i.clientHeight-(c+d)),g=YN(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:ga(0,Nl(1,u))||1};let b=!0;function w(E){const x=E[0].intersectionRatio;if(x!==u){if(!b)return o();x?o(!1,x):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(w,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,v)}n.observe(e)}return o(!0),s}function LWe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=pY(e),c=i||s?[...l?pm(l):[],...pm(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?MWe(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?eb(e):null;u&&g();function g(){const y=eb(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const FWe=yWe,BWe=vWe,jWe=hWe,UWe=_We,iue=dWe,zWe=mWe,VWe=bWe,HWe=(e,t,n)=>{const r=new Map,i={platform:$We,...n},s={...i.platform,_c:r};return fWe(e,t,{...i,platform:s})};var PP=typeof document<"u"?I.useLayoutEffect:I.useEffect;function v$(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!v$(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!v$(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Hwe(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function sue(e,t){const n=Hwe(e);return Math.round(t*n)/n}function oue(e){const t=I.useRef(e);return PP(()=>{t.current=e}),t}function qWe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=I.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=I.useState(r);v$(d,r)||h(r);const[p,m]=I.useState(null),[g,y]=I.useState(null),v=I.useCallback(j=>{j!==x.current&&(x.current=j,m(j))},[]),b=I.useCallback(j=>{j!==T.current&&(T.current=j,y(j))},[]),w=s||p,E=o||g,x=I.useRef(null),T=I.useRef(null),C=I.useRef(c),A=u!=null,k=oue(u),R=oue(i),O=I.useCallback(()=>{if(!x.current||!T.current)return;const j={placement:t,strategy:n,middleware:d};R.current&&(j.platform=R.current),HWe(x.current,T.current,j).then(z=>{const q={...z,isPositioned:!0};D.current&&!v$(C.current,q)&&(C.current=q,zy.flushSync(()=>{f(q)}))})},[d,t,n,R]);PP(()=>{l===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(j=>({...j,isPositioned:!1})))},[l]);const D=I.useRef(!1);PP(()=>(D.current=!0,()=>{D.current=!1}),[]),PP(()=>{if(w&&(x.current=w),E&&(T.current=E),w&&E){if(k.current)return k.current(w,E,O);O()}},[w,E,O,k,A]);const $=I.useMemo(()=>({reference:x,floating:T,setReference:v,setFloating:b}),[v,b]),F=I.useMemo(()=>({reference:w,floating:E}),[w,E]),L=I.useMemo(()=>{const j={position:n,left:0,top:0};if(!F.floating)return j;const z=sue(F.floating,c.x),q=sue(F.floating,c.y);return a?{...j,transform:"translate("+z+"px, "+q+"px)",...Hwe(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:z,top:q}},[n,a,F.floating,c.x,c.y]);return I.useMemo(()=>({...c,update:O,refs:$,elements:F,floatingStyles:L}),[c,O,$,F,L])}const WWe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?iue({element:r.current,padding:i}).fn(n):{}:r?iue({element:r,padding:i}).fn(n):{}}}},qwe=(e,t)=>({...FWe(e),options:[e,t]}),gY=(e,t)=>({...BWe(e),options:[e,t]}),aue=(e,t)=>({...VWe(e),options:[e,t]}),lz=(e,t)=>({...jWe(e),options:[e,t]}),GWe=(e,t)=>({...UWe(e),options:[e,t]}),cz=(e,t)=>({...zWe(e),options:[e,t]}),Wwe=(e,t)=>({...WWe(e),options:[e,t]}),Gwe={...BO},YWe=Gwe.useInsertionEffect,KWe=YWe||(e=>e());function t0(e){const t=I.useRef(()=>{});return KWe(()=>{t.current=e}),I.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var _h=typeof document<"u"?I.useLayoutEffect:I.useEffect;let uue=!1,XWe=0;const lue=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+XWe++;function QWe(){const[e,t]=I.useState(()=>uue?lue():void 0);return _h(()=>{e==null&&t(lue())},[]),I.useEffect(()=>{uue=!0},[]),e}const JWe=Gwe.useId,Ywe=JWe||QWe;function ZWe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const eGe=I.createContext(null),tGe=I.createContext(null),yY=()=>{var e;return((e=I.useContext(eGe))==null?void 0:e.id)||null},vY=()=>I.useContext(tGe);function bY(e){return"data-floating-ui-"+e}function cue(e){const t=I.useRef(e);return _h(()=>{t.current=e}),t}const fue=bY("safe-polygon");function OP(e,t,n){return n&&!oz(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function nGe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=vY(),m=yY(),g=cue(c),y=cue(l),v=I.useRef(),b=I.useRef(-1),w=I.useRef(),E=I.useRef(-1),x=I.useRef(!0),T=I.useRef(!1),C=I.useRef(()=>{}),A=I.useCallback(()=>{var D;const $=(D=i.current.openEvent)==null?void 0:D.type;return($==null?void 0:$.includes("mouse"))&&$!=="mousedown"},[i]);I.useEffect(()=>{if(!u)return;function D($){let{open:F}=$;F||(clearTimeout(b.current),clearTimeout(E.current),x.current=!0)}return s.on("openchange",D),()=>{s.off("openchange",D)}},[u,s]),I.useEffect(()=>{if(!u||!g.current||!n)return;function D(F){A()&&r(!1,F,"hover")}const $=g1(a).documentElement;return $.addEventListener("mouseleave",D),()=>{$.removeEventListener("mouseleave",D)}},[a,n,r,u,g,A]);const k=I.useCallback(function(D,$,F){$===void 0&&($=!0),F===void 0&&(F="hover");const L=OP(y.current,"close",v.current);L&&!w.current?(clearTimeout(b.current),b.current=window.setTimeout(()=>r(!1,D,F),L)):$&&(clearTimeout(b.current),r(!1,D,F))},[y,r]),R=t0(()=>{C.current(),w.current=void 0}),O=t0(()=>{if(T.current){const D=g1(a).body;D.style.pointerEvents="",D.removeAttribute(fue),T.current=!1}});return I.useEffect(()=>{if(!u)return;function D(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function $(j){if(clearTimeout(b.current),x.current=!1,f&&!oz(v.current)||d>0&&!OP(y.current,"open"))return;const z=OP(y.current,"open",v.current);z?b.current=window.setTimeout(()=>{r(!0,j,"hover")},z):r(!0,j,"hover")}function F(j){if(D())return;C.current();const z=g1(a);if(clearTimeout(E.current),g.current&&i.current.floatingContext){n||clearTimeout(b.current),w.current=g.current({...i.current.floatingContext,tree:p,x:j.clientX,y:j.clientY,onClose(){O(),R(),k(j,!0,"safe-polygon")}});const P=w.current;z.addEventListener("mousemove",P),C.current=()=>{z.removeEventListener("mousemove",P)};return}(v.current==="touch"?!B2(a,j.relatedTarget):!0)&&k(j)}function L(j){D()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:j.clientX,y:j.clientY,onClose(){O(),R(),k(j)}})(j))}if(Ai(o)){const j=o;return n&&j.addEventListener("mouseleave",L),a==null||a.addEventListener("mouseleave",L),h&&j.addEventListener("mousemove",$,{once:!0}),j.addEventListener("mouseenter",$),j.addEventListener("mouseleave",F),()=>{n&&j.removeEventListener("mouseleave",L),a==null||a.removeEventListener("mouseleave",L),h&&j.removeEventListener("mousemove",$),j.removeEventListener("mouseenter",$),j.removeEventListener("mouseleave",F)}}},[o,a,u,e,f,d,h,k,R,O,r,n,p,y,g,i]),_h(()=>{var D;if(u&&n&&(D=g.current)!=null&&D.__options.blockPointerEvents&&A()){const F=g1(a).body;if(F.setAttribute(fue,""),F.style.pointerEvents="none",T.current=!0,Ai(o)&&a){var $;const L=o,j=p==null||($=p.nodesRef.current.find(z=>z.id===m))==null||($=$.context)==null?void 0:$.elements.floating;return j&&(j.style.pointerEvents=""),L.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{L.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,m,a,o,p,g,A]),_h(()=>{n||(v.current=void 0,R(),O())},[n,R,O]),I.useEffect(()=>()=>{R(),clearTimeout(b.current),clearTimeout(E.current),O()},[u,o,R,O]),I.useMemo(()=>{if(!u)return{};function D($){v.current=$.pointerType}return{reference:{onPointerDown:D,onPointerEnter:D,onMouseMove($){function F(){x.current||r(!0,$.nativeEvent,"hover")}f&&!oz(v.current)||n||d===0||(clearTimeout(E.current),v.current==="touch"?F():E.current=window.setTimeout(F,d))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave($){k($.nativeEvent,!1)}}}},[u,f,n,d,r,k])}const fz=()=>{},Kwe=I.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:fz,setState:fz,isInstantPhase:!1}),Xwe=()=>I.useContext(Kwe);function rGe(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=I.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=I.useRef(null),a=I.useCallback(u=>{s({currentId:u})},[]);return _h(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),I.createElement(Kwe.Provider,{value:I.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function iGe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=Xwe(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return _h(()=>{u&&(f({delay:{open:1,close:OP(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),_h(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),_h(()=>{l===fz||!n||l(o)},[n,l,o]),a}function Vj(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const sGe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},oGe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},due=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function aGe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:s,floating:o},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=t,y=vY(),v=t0(typeof c=="function"?c:()=>!1),b=typeof c=="function"?v:c,w=I.useRef(!1),E=I.useRef(!1),{escapeKey:x,outsidePress:T}=due(m),{escapeKey:C,outsidePress:A}=due(g),k=t0($=>{var F;if(!n||!u||!l||$.key!=="Escape")return;const L=(F=a.current.floatingContext)==null?void 0:F.nodeId,j=y?Vj(y.nodesRef.current,L):[];if(!x&&($.stopPropagation(),j.length>0)){let z=!0;if(j.forEach(q=>{var P;if((P=q.context)!=null&&P.open&&!q.context.dataRef.current.__escapeKeyBubbles){z=!1;return}}),!z)return}r(!1,eWe($)?$.nativeEvent:$,"escape-key")}),R=t0($=>{var F;const L=()=>{var j;k($),(j=sw($))==null||j.removeEventListener("keydown",L)};(F=sw($))==null||F.addEventListener("keydown",L)}),O=t0($=>{var F;const L=w.current;w.current=!1;const j=E.current;if(E.current=!1,f==="click"&&j||L||typeof b=="function"&&!b($))return;const z=sw($),q="["+bY("inert")+"]",P=g1(o).querySelectorAll(q);let U=Ai(z)?z:null;for(;U&&!Z0(U);){const G=Dm(U);if(Z0(G)||!Ai(G))break;U=G}if(P.length&&Ai(z)&&!tWe(z)&&!B2(z,o)&&Array.from(P).every(G=>!B2(U,G)))return;if(Wl(z)&&o){const G=z.clientWidth>0&&z.scrollWidth>z.clientWidth,te=z.clientHeight>0&&z.scrollHeight>z.clientHeight;let le=te&&$.offsetX>z.clientWidth;if(te&&qc(z).direction==="rtl"&&(le=$.offsetX<=z.offsetWidth-z.clientWidth),le||G&&$.offsetY>z.clientHeight)return}const W=(F=a.current.floatingContext)==null?void 0:F.nodeId,B=y&&Vj(y.nodesRef.current,W).some(G=>{var te;return Uj($,(te=G.context)==null?void 0:te.elements.floating)});if(Uj($,o)||Uj($,s)||B)return;const H=y?Vj(y.nodesRef.current,W):[];if(H.length>0){let G=!0;if(H.forEach(te=>{var le;if((le=te.context)!=null&&le.open&&!te.context.dataRef.current.__outsidePressBubbles){G=!1;return}}),!G)return}r(!1,$,"outside-press")}),D=t0($=>{var F;const L=()=>{var j;O($),(j=sw($))==null||j.removeEventListener(f,L)};(F=sw($))==null||F.addEventListener(f,L)});return I.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=x,a.current.__outsidePressBubbles=T;function $(j){r(!1,j,"ancestor-scroll")}const F=g1(o);l&&F.addEventListener("keydown",C?R:k,C),b&&F.addEventListener(f,A?D:O,A);let L=[];return p&&(Ai(s)&&(L=pm(s)),Ai(o)&&(L=L.concat(pm(o))),!Ai(i)&&i&&i.contextElement&&(L=L.concat(pm(i.contextElement)))),L=L.filter(j=>{var z;return j!==((z=F.defaultView)==null?void 0:z.visualViewport)}),L.forEach(j=>{j.addEventListener("scroll",$,{passive:!0})}),()=>{l&&F.removeEventListener("keydown",C?R:k,C),b&&F.removeEventListener(f,A?D:O,A),L.forEach(j=>{j.removeEventListener("scroll",$)})}},[a,o,s,i,l,b,f,n,r,p,u,x,T,k,C,R,O,A,D]),I.useEffect(()=>{w.current=!1},[b,f]),I.useMemo(()=>u?{reference:{onKeyDown:k,[sGe[h]]:$=>{d&&r(!1,$.nativeEvent,"reference-press")}},floating:{onKeyDown:k,onMouseDown(){E.current=!0},onMouseUp(){E.current=!0},[oGe[f]]:()=>{w.current=!0}}}:{},[u,d,f,h,r,k])}function uGe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=Ywe(),s=I.useRef({}),[o]=I.useState(()=>ZWe()),a=yY()!=null,[u,l]=I.useState(r.reference),c=t0((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=I.useMemo(()=>({setPositionReference:l}),[]),d=I.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return I.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function _Y(e){e===void 0&&(e={});const{nodeId:t}=e,n=uGe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=I.useState(null),[a,u]=I.useState(null),c=(i==null?void 0:i.reference)||s,f=I.useRef(null),d=vY();_h(()=>{c&&(f.current=c)},[c]);const h=qWe({...e,elements:{...i,...a&&{reference:a}}}),p=I.useCallback(b=>{const w=Ai(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;u(w),h.refs.setReference(w)},[h.refs]),m=I.useCallback(b=>{(Ai(b)||b===null)&&(f.current=b,o(b)),(Ai(h.refs.reference.current)||h.refs.reference.current===null||b!==null&&!Ai(b))&&h.refs.setReference(b)},[h.refs]),g=I.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=I.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=I.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return _h(()=>{r.dataRef.current.floatingContext=v;const b=d==null?void 0:d.nodesRef.current.find(w=>w.id===t);b&&(b.context=v)}),I.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function lGe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=I.useRef(!1),c=I.useRef(),f=I.useRef(!0);return I.useEffect(()=>{if(!a)return;const d=Yu(o);function h(){!n&&Wl(o)&&o===Zae(g1(o))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[o,n,a]),I.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),I.useEffect(()=>()=>{clearTimeout(c.current)},[]),I.useMemo(()=>a?{reference:{onPointerDown(d){Xqe(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=sw(d.nativeEvent);if(u&&Ai(h))try{if(Qqe()&&Jqe())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!rWe(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=Ai(h)&&h.hasAttribute(bY("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var m;const g=Zae(o?o.ownerDocument:document);!h&&g===o||B2((m=s.current.floatingContext)==null?void 0:m.refs.floating.current,g)||B2(o,g)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,s,o,r])}const hue="active",pue="selected";function Hj(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[hue]:o,[pue]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[hue,pue].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function cGe(e){e===void 0&&(e=[]);const t=e,n=I.useCallback(s=>Hj(s,e,"reference"),t),r=I.useCallback(s=>Hj(s,e,"floating"),t),i=I.useCallback(s=>Hj(s,e,"item"),e.map(s=>s==null?void 0:s.item));return I.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const fGe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function dGe(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=fGe.get(o))!=null?n:o,u=Ywe(),c=yY()!=null;return I.useMemo(()=>{if(!s)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?{reference:{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const m={role:"option",...h&&{id:i+"-option"}};switch(o){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[s,o,a,r,i,u,c])}function Qwe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function mue(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function gue(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const hGe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function pGe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:Ce(t),height:Ce(t),transform:"rotate(45deg)",position:"absolute",[hGe[u]]:Ce(r)},f=Ce(-t/2);return u==="left"?{...c,...mue(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...mue(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...gue(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...gue(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const wY=I.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=tp();return s?_.jsx("div",{...l,ref:c,style:{...u,...pGe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});wY.displayName="@mantine/core/FloatingArrow";const[mGe,Jwe]=_o("Popover component was not found in the tree");function e6({children:e,active:t=!0,refProp:n="ref"}){const r=tHe(t),i=ms(r,e==null?void 0:e.ref);return Vy(e)?I.cloneElement(e,{[n]:i}):e}function Zwe(e){return _.jsx(oY,{tabIndex:-1,"data-autofocus":!0,...e})}e6.displayName="@mantine/core/FocusTrap";Zwe.displayName="@mantine/core/FocusTrapInitialFocus";e6.InitialFocus=Zwe;function gGe(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const yGe={},eEe=I.forwardRef((e,t)=>{const{children:n,target:r,...i}=xe("Portal",yGe,e),[s,o]=I.useState(!1),a=I.useRef(null);return qb(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:gGe(i),YG(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:zy.createPortal(_.jsx(_.Fragment,{children:n}),a.current)});eEe.displayName="@mantine/core/Portal";function Tk({withinPortal:e=!0,children:t,...n}){return e?_.jsx(eEe,{...n,children:t}):_.jsx(_.Fragment,{children:t})}Tk.displayName="@mantine/core/OptionalPortal";const OT=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${Ce(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),KN={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Ce(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Ce(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Ce(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Ce(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Ce(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Ce(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Ce(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Ce(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...OT("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...OT("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...OT("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...OT("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...OT("top"),common:{transformOrigin:"top right"}}},yue={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function vGe({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in KN?{transitionProperty:KN[e].transitionProperty,...i,...KN[e].common,...KN[e][yue[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[yue[t]]}}function bGe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=qs(),l=KG(),c=u.respectReducedMotion?l:!1,[f,d]=I.useState(c?0:e),[h,p]=I.useState(r?"entered":"exited"),m=I.useRef(-1),g=I.useRef(-1),y=v=>{const b=v?i:s,w=v?o:a;window.clearTimeout(m.current);const E=c?0:v?e:t;d(E),E===0?(typeof b=="function"&&b(),typeof w=="function"&&w(),p(v?"entered":"exited")):g.current=requestAnimationFrame(()=>{G_e.flushSync(()=>{p(v?"pre-entering":"pre-exiting")}),g.current=requestAnimationFrame(()=>{typeof b=="function"&&b(),p(v?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof w=="function"&&w(),p(v?"entered":"exited")},E)})})};return Nm(()=>{y(r)},[r]),I.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(g.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function og({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=bGe({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?_.jsx(_.Fragment,{children:s({})}):e?s({display:"none"}):null:d==="exited"?e?s({display:"none"}):null:_.jsx(_.Fragment,{children:s(vGe({transition:t,duration:f,state:d,timingFunction:h}))})}og.displayName="@mantine/core/Transition";var tEe={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const _Ge={},EY=Le((e,t)=>{var g,y,v,b;const n=xe("PopoverDropdown",_Ge,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=Jwe(),h=rwe({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=ms(t,d.floating);return d.disabled?null:_.jsx(Tk,{...d.portalProps,withinPortal:d.withinPortal,children:_.jsx(og,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((v=d.transitionProps)==null?void 0:v.exitDuration)=="number"?d.transitionProps.exitDuration:(b=d.transitionProps)==null?void 0:b.duration,children:w=>_.jsx(e6,{active:d.trapFocus,children:_.jsxs(_e,{...p,...f,variant:u,ref:m,onKeyDownCapture:zVe(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...w,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:Ce(d.width)},i]}),children:[o,_.jsx(wY,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});EY.classes=tEe;EY.displayName="@mantine/core/PopoverDropdown";const wGe={refProp:"ref",popupType:"dialog"},nEe=Le((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=xe("PopoverTarget",wGe,e);if(!Vy(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=Jwe(),u=ms(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return I.cloneElement(n,{...o,...l,...a.targetProps,className:Bi(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});nEe.displayName="@mantine/core/PopoverTarget";function rEe({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=I.useState(0);I.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return LWe(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),Nm(()=>{t.update()},r),Nm(()=>{s(o=>o+1)},[e])}function EGe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function xGe(e,t){const n=EGe(e.middlewares),r=[qwe(e.offset)];return n.shift&&r.push(gY(typeof n.shift=="boolean"?{limiter:aue(),padding:5}:{limiter:aue(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?lz():lz(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?cz():cz(n.inline)),r.push(Wwe({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(GWe({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function SGe(e){const[t,n]=Cs({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=_Y({strategy:e.strategy,placement:e.position,middleware:xGe(e,()=>s)});return rEe({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),Nm(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),Nm(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const TGe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:tf("popover"),__staticSelector:"Popover",width:"max-content"},CGe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:ei(t),"--popover-shadow":WG(n)}});function si(e){var be,ke,ze,ct,Ot,Ge;const t=xe("Popover",TGe,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:b,withinPortal:w,portalProps:E,closeOnEscape:x,clickOutsideEvents:T,trapFocus:C,onClose:A,onOpen:k,onChange:R,zIndex:O,radius:D,shadow:$,id:F,defaultOpened:L,__staticSelector:j,withRoles:z,disabled:q,returnFocus:P,variant:U,keepMounted:W,vars:B,floatingStrategy:H,...G}=t,te=vt({name:j,props:t,classes:tEe,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:B,varsResolver:CGe}),le=I.useRef(null),[fe,de]=I.useState(null),[ge,Ie]=I.useState(null),{dir:pe}=tp(),He=Da(F),Ue=SGe({middlewares:c,width:l,position:Qwe(pe,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:le,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:L,onChange:R,onOpen:k,onClose:A,strategy:H});qVe(()=>b&&Ue.onClose(),T,[fe,ge]);const yt=I.useCallback(ye=>{de(ye),Ue.floating.refs.setReference(ye)},[Ue.floating.refs.setReference]),it=I.useCallback(ye=>{Ie(ye),Ue.floating.refs.setFloating(ye)},[Ue.floating.refs.setFloating]);return _.jsx(mGe,{value:{returnFocus:P,disabled:q,controlled:Ue.controlled,reference:yt,floating:it,x:Ue.floating.x,y:Ue.floating.y,arrowX:(ze=(ke=(be=Ue.floating)==null?void 0:be.middlewareData)==null?void 0:ke.arrow)==null?void 0:ze.x,arrowY:(Ge=(Ot=(ct=Ue.floating)==null?void 0:ct.middlewareData)==null?void 0:Ot.arrow)==null?void 0:Ge.y,opened:Ue.opened,arrowRef:le,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:Ue.floating.placement,trapFocus:C,withinPortal:w,portalProps:E,zIndex:O,radius:D,shadow:$,closeOnEscape:x,onClose:Ue.onClose,onToggle:Ue.onToggle,getTargetId:()=>`${He}-target`,getDropdownId:()=>`${He}-dropdown`,withRoles:z,targetProps:G,__staticSelector:j,classNames:y,styles:v,unstyled:g,variant:U,keepMounted:W,getStyles:te},children:n})}si.Target=nEe;si.Dropdown=EY;si.displayName="@mantine/core/Popover";si.extend=e=>e;var Uf={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const AGe=I.forwardRef(({className:e,...t},n)=>_.jsxs(_e,{component:"span",className:Bi(Uf.barsLoader,e),...t,ref:n,children:[_.jsx("span",{className:Uf.bar}),_.jsx("span",{className:Uf.bar}),_.jsx("span",{className:Uf.bar})]})),IGe=I.forwardRef(({className:e,...t},n)=>_.jsxs(_e,{component:"span",className:Bi(Uf.dotsLoader,e),...t,ref:n,children:[_.jsx("span",{className:Uf.dot}),_.jsx("span",{className:Uf.dot}),_.jsx("span",{className:Uf.dot})]})),kGe=I.forwardRef(({className:e,...t},n)=>_.jsx(_e,{component:"span",className:Bi(Uf.ovalLoader,e),...t,ref:n})),iEe={bars:AGe,oval:kGe,dots:IGe},RGe={loaders:iEe,type:"oval"},NGe=(e,{size:t,color:n})=>({root:{"--loader-size":rn(t,"loader-size"),"--loader-color":n?Zr(n,e):void 0}}),ag=Le((e,t)=>{const n=xe("Loader",RGe,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=vt({name:"Loader",props:n,classes:Uf,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:NGe});return p?_.jsx(_e,{...g("root"),ref:t,...m,children:p}):_.jsx(_e,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});ag.defaultLoaders=iEe;ag.classes=Uf;ag.displayName="@mantine/core/Loader";var t6={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const vue={orientation:"horizontal"},DGe=(e,{borderWidth:t})=>({group:{"--ai-border-width":Ce(t)}}),xY=Le((e,t)=>{const n=xe("ActionIconGroup",vue,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=xe("ActionIconGroup",vue,e),p=vt({name:"ActionIconGroup",props:n,classes:t6,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:DGe,rootSelector:"group"});return _.jsx(_e,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});xY.classes=t6;xY.displayName="@mantine/core/ActionIconGroup";const PGe={},OGe=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":rn(t,"ai-size"),"--ai-radius":n===void 0?void 0:ei(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},ty=Ws((e,t)=>{const n=xe("ActionIcon",PGe,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":b,autoContrast:w,mod:E,...x}=n,T=vt({name:["ActionIcon",p],props:n,className:r,style:u,classes:t6,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:OGe});return _.jsxs(Ss,{...T("root",{active:!v&&!l&&!b}),...x,unstyled:i,variant:s,size:f,disabled:v||l,ref:t,mod:[{loading:l,disabled:v||b},E],children:[_.jsx(og,{mounted:!!l,transition:"slide-down",duration:150,children:C=>_.jsx(_e,{component:"span",...T("loader",{style:C}),"aria-hidden":!0,children:_.jsx(ag,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),_.jsx(_e,{component:"span",mod:{loading:l},...T("icon"),children:y})]})});ty.classes=t6;ty.displayName="@mantine/core/ActionIcon";ty.Group=xY;const sEe=I.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>_.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:_.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));sEe.displayName="@mantine/core/CloseIcon";var oEe={root:"m_86a44da5","root--subtle":"m_220c80f2"};const $Ge={variant:"subtle"},MGe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":rn(t,"cb-size"),"--cb-radius":n===void 0?void 0:ei(n),"--cb-icon-size":Ce(r)}}),Wy=Ws((e,t)=>{const n=xe("CloseButton",$Ge,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=vt({name:"CloseButton",props:n,className:a,style:l,classes:oEe,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:MGe});return _.jsxs(Ss,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...v("root",{variant:p,active:!h&&!d}),children:[m||_.jsx(sEe,{}),i]})});Wy.classes=oEe;Wy.displayName="@mantine/core/CloseButton";function LGe(e){return I.Children.toArray(e).filter(Boolean)}var aEe={root:"m_4081bf90"};const FGe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},BGe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":ql(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),Vs=Le((e,t)=>{const n=xe("Group",FGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,...b}=n,w=LGe(u),E=w.length,x=ql(l??"md"),C={childWidth:`calc(${100/E}% - (${x} - ${x} / ${E}))`},A=vt({name:"Group",props:n,stylesCtx:C,className:i,style:s,classes:aEe,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:BGe});return _.jsx(_e,{...A("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,...b,children:w})});Vs.classes=aEe;Vs.displayName="@mantine/core/Group";var uEe={root:"m_9814e45f"};const jGe={zIndex:tf("modal")},UGe=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&Ud(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Ce(i)})`:void 0,"--overlay-radius":s===void 0?void 0:ei(s),"--overlay-z-index":o==null?void 0:o.toString()}}),j2=Ws((e,t)=>{const n=xe("Overlay",jGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,...b}=n,w=vt({name:"Overlay",props:n,classes:uEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:UGe});return _.jsx(_e,{ref:t,...w("root"),mod:[{center:c,fixed:l},v],...b,children:f})});j2.classes=uEe;j2.displayName="@mantine/core/Overlay";const[zGe,ug]=_o("ModalBase component was not found in tree");function VGe({opened:e,transitionDuration:t}){const[n,r]=I.useState(e),i=I.useRef(),o=KG()?0:t;return I.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function HGe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=Da(e),[u,l]=I.useState(!1),[c,f]=I.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=VGe({opened:n,transitionDuration:d});return awe("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),rwe({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const lEe=I.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,...b},w)=>{const{_id:E,titleMounted:x,bodyMounted:T,shouldLockScroll:C,setTitleMounted:A,setBodyMounted:k}=HGe({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a});return _.jsx(Tk,{...c,withinPortal:l,children:_.jsx(zGe,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${E}-title`,getBodyId:()=>`${E}-body`,titleMounted:x,bodyMounted:T,setTitleMounted:A,setBodyMounted:k,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:_.jsx(GL,{enabled:C&&f,...v,children:_.jsx(_e,{ref:w,...b,__vars:{...g,"--mb-z-index":(h||tf("modal")).toString(),"--mb-shadow":WG(p),"--mb-padding":ql(m)},children:d})})})})});function qGe(){const e=ug();return I.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var jE={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const SY=I.forwardRef(({className:e,...t},n)=>{const r=qGe(),i=ug();return _.jsx(_e,{ref:n,...t,id:r,className:Bi({[jE.body]:!i.unstyled},e)})});SY.displayName="@mantine/core/ModalBaseBody";const TY=I.forwardRef(({className:e,onClick:t,...n},r)=>{const i=ug();return _.jsx(Wy,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:Bi({[jE.close]:!i.unstyled},e),unstyled:i.unstyled})});TY.displayName="@mantine/core/ModalBaseCloseButton";const cEe=I.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=ug();return _.jsx(og,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>_.jsx("div",{...n,className:Bi({[jE.inner]:!a.unstyled},n.className),children:_.jsx(e6,{active:a.opened&&a.trapFocus,children:_.jsx(JL,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:Bi({[jE.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),CY=I.forwardRef(({className:e,...t},n)=>{const r=ug();return _.jsx(_e,{component:"header",ref:n,className:Bi({[jE.header]:!r.unstyled},e),...t})});CY.displayName="@mantine/core/ModalBaseHeader";const WGe={duration:200,timingFunction:"ease",transition:"fade"};function GGe(e){const t=ug();return{...WGe,...t.transitionProps,...e}}const AY=I.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=ug(),o=GGe(t);return _.jsx(og,{mounted:s.opened,...o,transition:"fade",children:a=>_.jsx(j2,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});AY.displayName="@mantine/core/ModalBaseOverlay";function YGe(){const e=ug();return I.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const IY=I.forwardRef(({className:e,...t},n)=>{const r=YGe(),i=ug();return _.jsx(_e,{component:"h2",ref:n,className:Bi({[jE.title]:!i.unstyled},e),...t,id:r})});IY.displayName="@mantine/core/ModalBaseTitle";function fEe({children:e}){return _.jsx(_.Fragment,{children:e})}const[KGe,aS]=rS({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var rf={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const bue={},XGe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${mo(t)} - ${Ce(2)})`}}),n6=Le((e,t)=>{const n=xe("InputDescription",bue,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=xe("InputDescription",bue,n),p=aS(),m=vt({name:["InputWrapper",c],props:n,classes:rf,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:XGe}),g=f&&(p==null?void 0:p.getStyles)||m;return _.jsx(_e,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});n6.classes=rf;n6.displayName="@mantine/core/InputDescription";const QGe={},JGe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${mo(t)} - ${Ce(2)})`}}),r6=Le((e,t)=>{const n=xe("InputError",QGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=vt({name:["InputWrapper",c],props:n,classes:rf,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:JGe}),m=aS(),g=f&&(m==null?void 0:m.getStyles)||p;return _.jsx(_e,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});r6.classes=rf;r6.displayName="@mantine/core/InputError";const _ue={labelElement:"label"},ZGe=(e,{size:t})=>({label:{"--input-label-size":mo(t),"--input-asterisk-color":void 0}}),i6=Le((e,t)=>{const n=xe("InputLabel",_ue,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=xe("InputLabel",_ue,n),b=vt({name:["InputWrapper",m],props:n,classes:rf,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:ZGe}),w=aS(),E=(w==null?void 0:w.getStyles)||b;return _.jsxs(_e,{...E("label",w!=null&&w.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:x=>{h==null||h(x),!x.defaultPrevented&&x.detail>1&&x.preventDefault()},...v,children:[p,f&&_.jsx("span",{...E("required"),"aria-hidden":!0,children:" *"})]})});i6.classes=rf;i6.displayName="@mantine/core/InputLabel";const wue={},kY=Le((e,t)=>{const n=xe("InputPlaceholder",wue,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=xe("InputPlaceholder",wue,n),p=vt({name:["InputPlaceholder",l],props:n,classes:rf,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return _.jsx(_e,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});kY.classes=rf;kY.displayName="@mantine/core/InputPlaceholder";function eYe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const tYe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},nYe=(e,{size:t})=>({label:{"--input-label-size":mo(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${mo(t)} - ${Ce(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${mo(t)} - ${Ce(2)})`}}),RY=Le((e,t)=>{const n=xe("InputWrapper",tYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:b,labelElement:w,children:E,withAsterisk:x,id:T,required:C,__stylesApiProps:A,mod:k,...R}=n,O=vt({name:["InputWrapper",f],props:A||n,classes:rf,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:nYe}),D={size:l,variant:c,__staticSelector:f},$=Da(T),F=typeof x=="boolean"?x:C,L=(b==null?void 0:b.id)||`${$}-error`,j=(v==null?void 0:v.id)||`${$}-description`,z=$,q=!!m&&typeof m!="boolean",P=!!g,U=`${q?L:""} ${P?j:""}`,W=U.trim().length>0?U.trim():void 0,B=(y==null?void 0:y.id)||`${$}-label`,H=p&&_.jsx(i6,{labelElement:w,id:B,htmlFor:z,required:F,...D,...y,children:p},"label"),G=P&&_.jsx(n6,{...v,...D,size:(v==null?void 0:v.size)||D.size,id:(v==null?void 0:v.id)||j,children:g},"description"),te=_.jsx(I.Fragment,{children:d(E)},"input"),le=q&&I.createElement(r6,{...b,...D,size:(b==null?void 0:b.size)||D.size,key:"error",id:(b==null?void 0:b.id)||L},m),fe=h.map(de=>{switch(de){case"label":return H;case"input":return te;case"description":return G;case"error":return le;default:return null}});return _.jsx(KGe,{value:{getStyles:O,describedBy:W,inputId:z,labelId:B,...eYe(h,{hasDescription:P,hasError:q})},children:_.jsx(_e,{ref:t,variant:c,size:l,mod:[{error:!!m},k],...O("root"),...R,children:fe})})});RY.classes=rf;RY.displayName="@mantine/core/InputWrapper";const rYe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},iYe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":rn(t.size,"input-height"),"--input-fz":mo(t.size),"--input-radius":t.radius===void 0?void 0:ei(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Ce(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Ce(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?rn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),vi=Ws((e,t)=>{const n=xe("Input",rYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:b,rightSectionWidth:w,rightSectionPointerEvents:E,leftSectionPointerEvents:x,variant:T,vars:C,pointer:A,multiline:k,radius:R,id:O,withAria:D,withErrorStyles:$,mod:F,inputSize:L,...j}=n,{styleProps:z,rest:q}=Wb(j),P=aS(),U={offsetBottom:P==null?void 0:P.offsetBottom,offsetTop:P==null?void 0:P.offsetTop},W=vt({name:["Input",l],props:c||n,classes:rf,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:U,rootSelector:"wrapper",vars:C,varsResolver:iYe}),B=D?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":P==null?void 0:P.describedBy,id:(P==null?void 0:P.inputId)||O}:{};return _.jsxs(_e,{...W("wrapper"),...z,...d,mod:[{error:!!h&&$,pointer:A,disabled:p,multiline:k,"data-with-right-section":!!v,"data-with-left-section":!!m},F],variant:T,size:f,children:[m&&_.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),_.jsx(_e,{component:"input",...q,...B,ref:t,required:u,mod:{disabled:p,error:!!h&&$},variant:T,__size:L,...W("input")}),v&&_.jsx("div",{...b,"data-position":"right",...W("section",{className:b==null?void 0:b.className,style:b==null?void 0:b.style}),children:v})]})});vi.classes=rf;vi.Wrapper=RY;vi.Label=i6;vi.Error=r6;vi.Description=n6;vi.Placeholder=kY;vi.displayName="@mantine/core/Input";function dEe(e,t,n){const r=xe(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:b,style:w,inputContainer:E,inputWrapperOrder:x,withAsterisk:T,variant:C,vars:A,mod:k,...R}=r,{styleProps:O,rest:D}=Wb(R),$={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:b,style:w,inputContainer:E,inputWrapperOrder:x,withAsterisk:T,variant:C,id:v,mod:k,...y};return{...D,classNames:u,styles:l,unstyled:f,wrapperProps:{...$,...O},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:b,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:C,id:v}}}const sYe={__staticSelector:"InputBase",withAria:!0},sf=Ws((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=dEe("InputBase",sYe,e);return _.jsx(vi.Wrapper,{...r,children:_.jsx(vi,{...n,...i,ref:t})})});sf.classes={...vi.classes,...vi.Wrapper.classes};sf.displayName="@mantine/core/InputBase";const oYe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var hEe={root:"m_8bffd616"};const aYe={},Gt=Ws((e,t)=>{const n=xe("Flex",aYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=vt({name:"Flex",classes:hEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),v=qs(),b=XL(),w=ywe({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:v,data:oYe});return _.jsxs(_.Fragment,{children:[w.hasResponsiveStyles&&_.jsx(xk,{selector:`.${b}`,styles:w.styles,media:w.media}),_.jsx(_e,{ref:t,...y("root",{className:b,style:nS(w.inlineStyles)}),...g})]})});Gt.classes=hEe;Gt.displayName="@mantine/core/Flex";function uYe(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function lYe({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=I.useRef(),[s,o]=I.useState(!1),[a,u]=I.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=I.useRef(),d=I.useRef();return I.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),I.useEffect(()=>{if(t){const h=p=>{uYe(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),fHe(()=>{cwe()!=="test"&&o(!0)},20,{autoInvoke:!0}),dHe(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var pEe={root:"m_96b553a6"};const cYe={},fYe=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),NY=Le((e,t)=>{const n=xe("FloatingIndicator",cYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=vt({name:"FloatingIndicator",classes:pEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:fYe}),g=I.useRef(null),{initialized:y,hidden:v}=lYe({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),b=ms(t,g);return!l||!c?null:_.jsx(_e,{ref:b,mod:[{initialized:y,hidden:v},d],...m("root"),...p})});NY.displayName="@mantine/core/FloatingIndicator";NY.classes=pEe;const[dYe,DY]=_o("Accordion component was not found in the tree");function UE({style:e,size:t=16,...n}){return _.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Ce(t),height:Ce(t),display:"block"},...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}UE.displayName="@mantine/core/AccordionChevron";const[hYe,mEe]=_o("Accordion.Item component was not found in the tree");var Ck={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const pYe={},PY=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=xe("AccordionControl",pYe,e),{value:m}=mEe(),g=DY(),y=g.isItemActive(m),v=typeof g.order=="number",b=`h${g.order}`,w=_.jsxs(Ss,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:y,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:E=>{l==null||l(E),g.onChange(m)},type:"button",disabled:d,"aria-expanded":y,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:qG({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[_.jsx(_e,{component:"span",mod:{rotate:!g.disableChevronRotation&&y,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),_.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:f}),u&&_.jsx(_e,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:u})]});return v?_.jsx(b,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:w}):w});PY.displayName="@mantine/core/AccordionControl";PY.classes=Ck;const mYe={},OY=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=xe("AccordionItem",mYe,e),c=DY();return _.jsx(hYe,{value:{value:a},children:_.jsx(_e,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});OY.displayName="@mantine/core/AccordionItem";OY.classes=Ck;const gYe={},$Y=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=xe("AccordionPanel",gYe,e),{value:l}=mEe(),c=DY();return _.jsx(nY,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:_.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});$Y.displayName="@mantine/core/AccordionPanel";$Y.classes=Ck;const yYe={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:_.jsx(UE,{})},vYe=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:Ce(n),"--accordion-radius":r===void 0?void 0:ei(r)}});function Au(e){const t=xe("Accordion",yYe,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:y,chevronSize:v,order:b,chevron:w,variant:E,radius:x,...T}=t,C=Da(h),[A,k]=Cs({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),R=$=>Array.isArray(A)?A.includes($):$===A,O=$=>{const F=Array.isArray(A)?A.includes($)?A.filter(L=>L!==$):[...A,$]:$===A?null:$;k(F)},D=vt({name:"Accordion",classes:Ck,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:vYe});return _.jsx(dYe,{value:{isItemActive:R,onChange:O,getControlId:f$(`${C}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:f$(`${C}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:y,order:b,chevron:w,loop:p,getStyles:D,variant:E,unstyled:o},children:_.jsx(_e,{...D("root"),id:C,...T,variant:E,"data-accordion":!0,children:u})})}const bYe=e=>e;Au.extend=bYe;Au.classes=Ck;Au.displayName="@mantine/core/Accordion";Au.Item=OY;Au.Panel=$Y;Au.Control=PY;Au.Chevron=UE;var gEe={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const _Ye={},wYe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:ei(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},Ak=Le((e,t)=>{const n=xe("Alert",_Ye,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:b,...w}=n,E=vt({name:"Alert",classes:gEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:wYe}),x=Da(h),T=f&&`${x}-title`||void 0,C=`${x}-body`;return _.jsx(_e,{id:x,...E("root",{variant:v}),variant:v,ref:t,...w,role:"alert","aria-describedby":C,"aria-labelledby":T,children:_.jsxs("div",{...E("wrapper"),children:[p&&_.jsx("div",{...E("icon"),children:p}),_.jsxs("div",{...E("body"),children:[f&&_.jsx("div",{...E("title"),"data-with-close-button":m||void 0,children:_.jsx("span",{id:T,...E("label"),children:f})}),d&&_.jsx("div",{id:C,...E("message"),"data-variant":v,children:d})]}),m&&_.jsx(Wy,{...E("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});Ak.classes=gEe;Ak.displayName="@mantine/core/Alert";var yEe={root:"m_b6d8b162"};function EYe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const xYe={inherit:!1},SYe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":mo(i),"--text-lh":nwe(i),"--text-gradient":t==="gradient"?nz(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?Zr(s,e):void 0}}),Je=Ws((e,t)=>{const n=xe("Text",xYe,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,...b}=n,w=vt({name:["Text",l],props:n,classes:yEe,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:SYe});return _.jsx(_e,{...w("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":EYe(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,...b})});Je.classes=yEe;Je.displayName="@mantine/core/Text";var vEe={root:"m_849cf0da"};const TYe={underline:"hover"},uS=Ws((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=xe("Anchor",TYe,e);return _.jsx(Je,{component:"a",ref:t,className:Bi({[vEe.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});uS.classes=vEe;uS.displayName="@mantine/core/Anchor";const[CYe,lS]=_o("AppShell was not found in tree");var Gy={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const AYe={},MY=Le((e,t)=>{const n=xe("AppShellAside",AYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=lS();return h.disabled?null:_.jsx(_e,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});MY.classes=Gy;MY.displayName="@mantine/core/AppShellAside";const IYe={},LY=Le((e,t)=>{var p;const n=xe("AppShellFooter",IYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=lS();return h.disabled?null:_.jsx(_e,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:Bi({[GL.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});LY.classes=Gy;LY.displayName="@mantine/core/AppShellFooter";const kYe={},FY=Le((e,t)=>{var p;const n=xe("AppShellHeader",kYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=lS();return h.disabled?null:_.jsx(_e,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:Bi({[GL.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});FY.classes=Gy;FY.displayName="@mantine/core/AppShellHeader";const RYe={},BY=Le((e,t)=>{const n=xe("AppShellMain",RYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=lS();return _.jsx(_e,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});BY.classes=Gy;BY.displayName="@mantine/core/AppShellMain";function Ik(e){return typeof e=="object"?e.base:e}function kk(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function Rk(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function NYe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),kk(s)){const f=Ce(Ik(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(Rk(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Ce(s.base),e["--app-shell-aside-offset"]=Ce(s.base)),Li(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=Ce(s[f]),t[f]["--app-shell-aside-offset"]=Ce(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=GG(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function DYe({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(kk(r)){const o=Ce(Ik(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}Rk(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Ce(r.base),s&&(e["--app-shell-footer-offset"]=Ce(r.base))),Li(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Ce(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Ce(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function PYe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(kk(r)){const o=Ce(Ik(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}Rk(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Ce(r.base),s&&(e["--app-shell-header-offset"]=Ce(r.base))),Li(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Ce(r[o]),s&&(t[o]["--app-shell-header-offset"]=Ce(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function OYe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),kk(s)){const f=Ce(Ik(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(Rk(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Ce(s.base),e["--app-shell-navbar-offset"]=Ce(s.base)),Li(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=Ce(s[f]),t[f]["--app-shell-navbar-offset"]=Ce(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=GG(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function qj(e){return Number(e)===0?"0px":ql(e)}function $Ye({padding:e,baseStyles:t,minMediaStyles:n}){kk(e)&&(t["--app-shell-padding"]=qj(Ik(e))),Rk(e)&&(e.base&&(t["--app-shell-padding"]=qj(e.base)),Li(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=qj(e[r]))}))}function MYe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};OYe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),NYe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),PYe({baseStyles:u,minMediaStyles:o,header:t}),DYe({baseStyles:u,minMediaStyles:o,footer:n}),$Ye({baseStyles:u,minMediaStyles:o,padding:i});const l=h$(Li(o),s).map(d=>({query:`(min-width: ${c$(d.px)})`,styles:o[d.value]})),c=h$(Li(a),s).map(d=>({query:`(max-width: ${c$(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function LYe({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=qs(),o=Hy(),{media:a,baseStyles:u}=MYe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return _.jsx(xk,{media:a,styles:u,selector:o.cssVariablesSelector})}const FYe={},jY=Le((e,t)=>{const n=xe("AppShellNavbar",FYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=lS();return h.disabled?null:_.jsx(_e,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});jY.classes=Gy;jY.displayName="@mantine/core/AppShellNavbar";const BYe={},UY=Ws((e,t)=>{const n=xe("AppShellSection",BYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=lS();return _.jsx(_e,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});UY.classes=Gy;UY.displayName="@mantine/core/AppShellSection";function jYe({transitionDuration:e,disabled:t}){const[n,r]=I.useState(!0),i=I.useRef(),s=I.useRef();return awe("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),qb(()=>{I.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const UYe={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:tf("app")},zYe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),yi=Le((e,t)=>{const n=xe("AppShell",UYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:b,offsetScrollbars:w,mod:E,...x}=n,T=vt({name:"AppShell",classes:Gy,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:zYe}),C=jYe({disabled:y,transitionDuration:d});return _.jsxs(CYe,{value:{getStyles:T,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:w},children:[_.jsx(LYe,{navbar:l,header:p,aside:v,footer:b,padding:f}),_.jsx(_e,{ref:t,...T("root"),mod:[{resizing:C,layout:g,disabled:y},E],...x})]})});yi.classes=Gy;yi.displayName="@mantine/core/AppShell";yi.Navbar=jY;yi.Header=FY;yi.Main=BY;yi.Aside=MY;yi.Footer=LY;yi.Section=UY;function bEe(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>bEe(t))}:e}function _Ee(e){return e?e.map(t=>bEe(t)):[]}function zY(e){return e.reduce((t,n)=>"group"in n?{...t,...zY(n.items)}:(t[n.value]=n,t),{})}var tl={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const VYe={error:null},HYe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":rn(t,"combobox-chevron-size")}}),VY=Le((e,t)=>{const n=xe("ComboboxChevron",VYe,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=vt({name:"ComboboxChevron",classes:tl,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:HYe,rootSelector:"chevron"});return _.jsx(_e,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:_.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});VY.classes=tl;VY.displayName="@mantine/core/ComboboxChevron";const[qYe,of]=_o("Combobox component was not found in tree"),wEe=I.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>_.jsx(Wy,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));wEe.displayName="@mantine/core/ComboboxClearButton";const WYe={},HY=Le((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=xe("ComboboxDropdown",WYe,e),u=of();return _.jsx(si.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});HY.classes=tl;HY.displayName="@mantine/core/ComboboxDropdown";const GYe={refProp:"ref"},EEe=Le((e,t)=>{const{children:n,refProp:r}=xe("ComboboxDropdownTarget",GYe,e);if(of(),!Vy(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return _.jsx(si.Target,{ref:t,refProp:r,children:n})});EEe.displayName="@mantine/core/ComboboxDropdownTarget";const YYe={},qY=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxEmpty",YYe,e),u=of();return _.jsx(_e,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});qY.classes=tl;qY.displayName="@mantine/core/ComboboxEmpty";function WY({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=of(),[a,u]=I.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const KYe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},xEe=Le((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=xe("ComboboxEventsTarget",KYe,e);if(!Vy(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=of(),f=WY({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return I.cloneElement(n,{...f,...l,[r]:ms(t,c.store.targetRef,n==null?void 0:n.ref)})});xEe.displayName="@mantine/core/ComboboxEventsTarget";const XYe={},GY=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxFooter",XYe,e),u=of();return _.jsx(_e,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a})});GY.classes=tl;GY.displayName="@mantine/core/ComboboxFooter";const QYe={},YY=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=xe("ComboboxGroup",QYe,e),c=of();return _.jsxs(_e,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&_.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});YY.classes=tl;YY.displayName="@mantine/core/ComboboxGroup";const JYe={},KY=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxHeader",JYe,e),u=of();return _.jsx(_e,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a})});KY.classes=tl;KY.displayName="@mantine/core/ComboboxHeader";function SEe({value:e,valuesDivider:t=",",...n}){return _.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}SEe.displayName="@mantine/core/ComboboxHiddenInput";const ZYe={},XY=Le((e,t)=>{const n=xe("ComboboxOption",ZYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=of(),v=I.useId(),b=l||v;return _.jsx(_e,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:b,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:w=>{var E;h?w.preventDefault():((E=y.onOptionSubmit)==null||E.call(y,n.value,n),u==null||u(w))},onMouseDown:w=>{w.preventDefault(),f==null||f(w)},onMouseOver:w=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(w)}})});XY.classes=tl;XY.displayName="@mantine/core/ComboboxOption";const eKe={},QY=Le((e,t)=>{const n=xe("ComboboxOptions",eKe,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=of(),d=Da(a);return I.useEffect(()=>{f.store.setListId(d)},[d]),_.jsx(_e,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});QY.classes=tl;QY.displayName="@mantine/core/ComboboxOptions";const tKe={withAriaAttributes:!0,withKeyboardNavigation:!0},JY=Le((e,t)=>{const n=xe("ComboboxSearch",tKe,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=of(),h=d.getStyles("search"),p=WY({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return _.jsx(vi,{ref:ms(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});JY.classes=tl;JY.displayName="@mantine/core/ComboboxSearch";const nKe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},TEe=Le((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=xe("ComboboxTarget",nKe,e);if(!Vy(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=of(),f=WY({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=I.cloneElement(n,{...f,...l});return _.jsx(si.Target,{ref:ms(t,c.store.targetRef),children:d})});TEe.displayName="@mantine/core/ComboboxTarget";function rKe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function iKe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function sKe(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function ZY({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=Cs({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=I.useRef(null),c=I.useRef(-1),f=I.useRef(null),d=I.useRef(null),h=I.useRef(-1),p=I.useRef(-1),m=I.useRef(-1),g=I.useCallback((L="unknown")=>{a||(u(!0),i==null||i(L))},[u,i,a]),y=I.useCallback((L="unknown")=>{a&&(u(!1),r==null||r(L))},[u,r,a]),v=I.useCallback((L="unknown")=>{a?y(L):g(L)},[y,g,a]),b=I.useCallback(()=>{const L=document.querySelector(`#${l.current} [data-combobox-selected]`);L==null||L.removeAttribute("data-combobox-selected"),L==null||L.removeAttribute("aria-selected")},[]),w=I.useCallback(L=>{const j=document.getElementById(l.current),z=j==null?void 0:j.querySelectorAll("[data-combobox-option]");if(!z)return null;const q=L>=z.length?0:L<0?z.length-1:L;return c.current=q,z!=null&&z[q]&&!z[q].hasAttribute("data-combobox-disabled")?(b(),z[q].setAttribute("data-combobox-selected","true"),z[q].setAttribute("aria-selected","true"),z[q].scrollIntoView({block:"nearest",behavior:o}),z[q].id):null},[o,b]),E=I.useCallback(()=>{const L=document.querySelector(`#${l.current} [data-combobox-active]`);if(L){const j=document.querySelectorAll(`#${l.current} [data-combobox-option]`),z=Array.from(j).findIndex(q=>q===L);return w(z)}return w(0)},[w]),x=I.useCallback(()=>w(iKe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),T=I.useCallback(()=>w(rKe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),C=I.useCallback(()=>w(sKe(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[w]),A=I.useCallback((L="selected",j)=>{m.current=window.setTimeout(()=>{var P;const z=document.querySelectorAll(`#${l.current} [data-combobox-option]`),q=Array.from(z).findIndex(U=>U.hasAttribute(`data-combobox-${L}`));c.current=q,j!=null&&j.scrollIntoView&&((P=z[q])==null||P.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),k=I.useCallback(()=>{c.current=-1,b()},[b]),R=I.useCallback(()=>{const L=document.querySelectorAll(`#${l.current} [data-combobox-option]`),j=L==null?void 0:L[c.current];j==null||j.click()},[]),O=I.useCallback(L=>{l.current=L},[]),D=I.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),$=I.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),F=I.useCallback(()=>c.current,[]);return I.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:F,selectOption:w,selectFirstOption:C,selectActiveOption:E,selectNextOption:x,selectPreviousOption:T,resetSelectedOption:k,updateSelectedOptionIndex:A,listId:l.current,setListId:O,clickSelectedOption:R,searchRef:f,focusSearchInput:D,targetRef:d,focusTarget:$}}const oKe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},aKe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":mo(t),"--combobox-option-padding":rn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Ce(n),"--combobox-option-fz":mo(t),"--combobox-option-padding":rn(t,"combobox-option-padding")}});function Qn(e){const t=xe("Combobox",oKe,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=ZY(),y=o||g,v=vt({name:h||"Combobox",classes:tl,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:aKe}),b=()=>{l==null||l(),y.closeDropdown()};return _.jsx(qYe,{value:{getStyles:v,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:_.jsx(si,{opened:y.dropdownOpened,...m,onClose:b,withRoles:!1,unstyled:i,children:s})})}const uKe=e=>e;Qn.extend=uKe;Qn.classes=tl;Qn.displayName="@mantine/core/Combobox";Qn.Target=TEe;Qn.Dropdown=HY;Qn.Options=QY;Qn.Option=XY;Qn.Search=JY;Qn.Empty=qY;Qn.Chevron=VY;Qn.Footer=GY;Qn.Header=KY;Qn.EventsTarget=xEe;Qn.DropdownTarget=EEe;Qn.Group=YY;Qn.ClearButton=wEe;Qn.HiddenInput=SEe;var CEe={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const AEe=CEe,s6=I.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:b,...w},E)=>{const x=vt({name:e,props:t,className:n,style:y,classes:CEe,classNames:r,styles:i,unstyled:s});return _.jsx(_e,{...x("root"),ref:E,__vars:{"--label-fz":mo(d),"--label-lh":rn(d,"label-lh")},mod:[{"label-position":h},b],variant:g,size:d,...w,children:_.jsxs(_e,{component:p,htmlFor:p==="label"?l:void 0,...x("body"),children:[o,_.jsxs("div",{...x("labelWrapper"),"data-disabled":c||void 0,children:[a&&_.jsx(_e,{component:m,htmlFor:m==="label"?l:void 0,...x("label"),"data-disabled":c||void 0,children:a}),u&&_.jsx(vi.Description,{size:d,__inheritStyles:!1,...x("description"),children:u}),f&&typeof f!="boolean"&&_.jsx(vi.Error,{size:d,__inheritStyles:!1,...x("error"),children:f})]})]})})});s6.displayName="@mantine/core/InlineInput";const IEe=I.createContext(null),lKe=IEe.Provider,kEe=()=>I.useContext(IEe),[cKe,fKe]=rS();var REe={card:"m_26775b0a"};const dKe={withBorder:!0},hKe=(e,{radius:t})=>({card:{"--card-radius":ei(t)}}),eK=Le((e,t)=>{const n=xe("CheckboxCard",dKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=vt({name:"CheckboxCard",classes:REe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:hKe,rootSelector:"card"}),g=kEe(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return _.jsx(cKe,{value:{checked:y},children:_.jsx(Ss,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(d||"")}})})});eK.displayName="@mantine/core/CheckboxCard";eK.classes=REe;function tK({children:e,role:t}){const n=aS();return n?_.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):_.jsx(_.Fragment,{children:e})}const pKe={},nK=Le((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=xe("CheckboxGroup",pKe,e),[c,f]=Cs({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(lKe,{value:{value:c,onChange:d,size:s},children:_.jsx(vi.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:_.jsx(tK,{role:"group",children:a})})})});nK.classes=vi.Wrapper.classes;nK.displayName="@mantine/core/CheckboxGroup";function NEe({size:e,style:t,...n}){const r=e!==void 0?{width:Ce(e),height:Ce(e),...t}:t;return _.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:_.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function DEe({indeterminate:e,...t}){return e?_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:_.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):_.jsx(NEe,{...t})}var PEe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const mKe={icon:DEe},gKe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=ep({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":rn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:ei(t),"--checkbox-color":s==="outline"?u:Zr(n,e),"--checkbox-icon-color":i?Zr(i,e):iS(o,e)?qy({color:n,theme:e,autoContrast:o}):void 0}}},rK=Le((e,t)=>{const n=xe("CheckboxIndicator",mKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,...b}=n,w=l,E=vt({name:"CheckboxIndicator",classes:PEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:gKe,rootSelector:"indicator"}),x=fKe(),T=typeof m=="boolean"||typeof c=="boolean"?m||c:(x==null?void 0:x.checked)||!1;return _.jsx(_e,{ref:t,...E("indicator",{variant:y}),variant:y,mod:[{checked:T,disabled:v},g],...b,children:_.jsx(w,{indeterminate:c,...E("icon")})})});rK.displayName="@mantine/core/CheckboxIndicator";rK.classes=PEe;var OEe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const yKe={labelPosition:"right",icon:DEe},vKe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=ep({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":rn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:ei(t),"--checkbox-color":s==="outline"?u:Zr(n,e),"--checkbox-icon-color":i?Zr(i,e):iS(o,e)?qy({color:n,theme:e,autoContrast:o}):void 0}}},Om=Le((e,t)=>{const n=xe("Checkbox",yKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:b,disabled:w,variant:E,indeterminate:x,icon:T,rootRef:C,iconColor:A,onChange:k,autoContrast:R,mod:O,...D}=n,$=kEe(),F=d||($==null?void 0:$.size),L=T,j=vt({name:"Checkbox",props:n,classes:OEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:vKe}),{styleProps:z,rest:q}=Wb(D),P=Da(f),U=$?{checked:$.value.includes(q.value),onChange:W=>{$.onChange(W),k==null||k(W)}}:{};return _.jsx(s6,{...j("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:P,size:F,labelPosition:y,label:c,description:v,error:b,disabled:w,classNames:r,styles:o,unstyled:a,"data-checked":U.checked||g||void 0,variant:E,ref:C,mod:O,...z,...p,children:_.jsxs(_e,{...j("inner"),mod:{"data-label-position":y},children:[_.jsx(_e,{component:"input",id:P,ref:t,checked:g,disabled:w,mod:{error:!!b,indeterminate:x},...j("input",{focusable:!0,variant:E}),onChange:k,...q,...U,type:"checkbox"}),_.jsx(L,{indeterminate:x,...j("icon")})]})})});Om.classes={...OEe,...AEe};Om.displayName="@mantine/core/Checkbox";Om.Group=nK;Om.Indicator=rK;Om.Card=eK;function zE(e){return"group"in e}function $Ee({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;zE(o)&&i.push({group:o.group,items:$Ee({options:o.items,search:t,limit:n-i.length})}),zE(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function bKe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function MEe(e,t=new Set){if(Array.isArray(e))for(const n of e)if(zE(n))MEe(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function _Ke(e,t){return Array.isArray(e)?e.includes(t):e===t}function LEe({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!zE(e)){const a=_Ke(n,e.value),u=t&&a&&_.jsx(NEe,{className:tl.optionsDropdownCheckIcon}),l=_.jsxs(_.Fragment,{children:[r==="left"&&u,_.jsx("span",{children:e.label}),r==="right"&&u]});return _.jsx(Qn.Option,{value:e.value,disabled:e.disabled,className:Bi({[tl.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>_.jsx(LEe,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return _.jsx(Qn.Group,{label:e.group,children:o})}function FEe({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){MEe(e);const b=typeof i=="string"?(r||$Ee)({options:e,search:u?i:"",limit:s??1/0}):e,w=bKe(b),E=b.map(x=>_.jsx(LEe,{data:x,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},zE(x)?x.group:x.value));return _.jsx(Qn.Dropdown,{hidden:t||n&&w,children:_.jsxs(Qn.Options,{labelledBy:p,"aria-label":y,children:[a?_.jsx(Gb.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:E}):E,w&&d&&_.jsx(Qn.Empty,{children:d})]})})}var BEe={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const wKe={},EKe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":rn(s,"badge-height"),"--badge-padding-x":rn(s,"badge-padding-x"),"--badge-fz":rn(s,"badge-fz"),"--badge-radius":t===void 0?void 0:ei(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?Zr(n,e):void 0}}},mm=Ws((e,t)=>{const n=xe("Badge",wKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:b,...w}=n,E=vt({name:"Badge",props:n,classes:BEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:EKe});return _.jsxs(_e,{variant:m,mod:[{block:g,circle:v},b],...E("root",{variant:m}),ref:t,...w,children:[d&&_.jsx("span",{...E("section"),"data-position":"left",children:d}),_.jsx("span",{...E("label"),children:p}),h&&_.jsx("span",{...E("section"),"data-position":"right",children:h})]})});mm.classes=BEe;mm.displayName="@mantine/core/Badge";var jEe={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const xKe={},SKe=(e,{color:t,size:n,transitionDuration:r,transitionTimingFunction:i})=>({root:{"--burger-color":t?Zr(t,e):void 0,"--burger-size":rn(n,"burger-size"),"--burger-transition-duration":r===void 0?void 0:`${r}ms`,"--burger-transition-timing-function":i}}),iK=Le((e,t)=>{const n=xe("Burger",xKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,children:c,transitionDuration:f,transitionTimingFunction:d,...h}=n,p=vt({name:"Burger",classes:jEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:SKe});return _.jsxs(Ss,{...p("root"),ref:t,...h,children:[_.jsx(_e,{mod:["reduce-motion",{opened:l}],...p("burger")}),c]})});iK.classes=jEe;iK.displayName="@mantine/core/Burger";var o6={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const Eue={orientation:"horizontal"},TKe=(e,{borderWidth:t})=>({group:{"--button-border-width":Ce(t)}}),sK=Le((e,t)=>{const n=xe("ButtonGroup",Eue,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=xe("ButtonGroup",Eue,e),p=vt({name:"ButtonGroup",props:n,classes:o6,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:TKe,rootSelector:"group"});return _.jsx(_e,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});sK.classes=o6;sK.displayName="@mantine/core/ButtonGroup";const CKe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Ce(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},AKe={},IKe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":rn(s,"button-height"),"--button-padding-x":rn(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?mo(s.replace("compact-","")):mo(s),"--button-radius":t===void 0?void 0:ei(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},Nn=Ws((e,t)=>{const n=xe("Button",AKe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:b,"data-disabled":w,autoContrast:E,mod:x,...T}=n,C=vt({name:"Button",props:n,classes:o6,className:s,style:r,classNames:y,styles:v,unstyled:b,vars:i,varsResolver:IKe}),A=!!l,k=!!c;return _.jsxs(Ss,{ref:t,...C("root",{active:!a&&!p&&!w}),unstyled:b,variant:d,disabled:a||p,mod:[{disabled:a||w,loading:p,block:f,"with-left-section":A,"with-right-section":k},x],...T,children:[_.jsx(og,{mounted:!!p,transition:CKe,duration:150,children:R=>_.jsx(_e,{component:"span",...C("loader",{style:R}),"aria-hidden":!0,children:_.jsx(ag,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),_.jsxs("span",{...C("inner"),children:[l&&_.jsx(_e,{component:"span",...C("section"),mod:{position:"left"},children:l}),_.jsx(_e,{component:"span",mod:{loading:p},...C("label"),children:u}),c&&_.jsx(_e,{component:"span",...C("section"),mod:{position:"right"},children:c})]})]})});Nn.classes=o6;Nn.displayName="@mantine/core/Button";Nn.Group=sK;const[kKe,RKe]=_o("Card component was not found in tree");var oK={root:"m_e615b15f",section:"m_599a2148"};const NKe={},a6=Ws((e,t)=>{const n=xe("CardSection",NKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=RKe();return _.jsx(_e,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});a6.classes=oK;a6.displayName="@mantine/core/CardSection";const DKe={},PKe=(e,{padding:t})=>({root:{"--card-padding":ql(t)}}),Kb=Ws((e,t)=>{const n=xe("Card",DKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=vt({name:"Card",props:n,classes:oK,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:PKe}),h=I.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===a6?I.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return _.jsx(kKe,{value:{getStyles:d},children:_.jsx(JL,{ref:t,unstyled:a,...d("root"),...f,children:p})})});Kb.classes=oK;Kb.displayName="@mantine/core/Card";Kb.Section=a6;var UEe={root:"m_4451eb3a"};const OKe={},$h=Ws((e,t)=>{const n=xe("Center",OKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=vt({name:"Center",props:n,classes:UEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return _.jsx(_e,{ref:t,mod:[{inline:l},c],...d("root"),...f})});$h.classes=UEe;$h.displayName="@mantine/core/Center";var zEe={root:"m_7485cace"};const $Ke={},MKe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:rn(t,"container-size")}}),Wc=Le((e,t)=>{const n=xe("Container",$Ke,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=vt({name:"Container",classes:zEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:MKe});return _.jsx(_e,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});Wc.classes=zEe;Wc.displayName="@mantine/core/Container";var VEe={root:"m_3eebeb36",label:"m_9e365f20"};const LKe={orientation:"horizontal"},FKe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Zr(t,e):void 0,"--divider-border-style":n,"--divider-size":rn(r,"divider-size")}}),aK=Le((e,t)=>{const n=xe("Divider",LKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=vt({name:"Divider",classes:VEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:FKe});return _.jsx(_e,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&_.jsx(_e,{component:"span",mod:{position:d},...m("label"),children:f})})});aK.classes=VEe;aK.displayName="@mantine/core/Divider";const[BKe,cS]=_o("Drawer component was not found in tree");var lg={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const jKe={},u6=Le((e,t)=>{const n=xe("DrawerBody",jKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=cS();return _.jsx(SY,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});u6.classes=lg;u6.displayName="@mantine/core/DrawerBody";const UKe={},l6=Le((e,t)=>{const n=xe("DrawerCloseButton",UKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=cS();return _.jsx(TY,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});l6.classes=lg;l6.displayName="@mantine/core/DrawerCloseButton";const zKe={},c6=Le((e,t)=>{const n=xe("DrawerContent",zKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,radius:l,...c}=n,f=cS(),d=f.scrollAreaComponent||fEe;return _.jsx(cEe,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...c,radius:l||f.radius||0,children:_.jsx(d,{style:{height:"100vh"},children:u})})});c6.classes=lg;c6.displayName="@mantine/core/DrawerContent";const VKe={},f6=Le((e,t)=>{const n=xe("DrawerHeader",VKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=cS();return _.jsx(CY,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});f6.classes=lg;f6.displayName="@mantine/core/DrawerHeader";const HKe={},d6=Le((e,t)=>{const n=xe("DrawerOverlay",HKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=cS();return _.jsx(AY,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});d6.classes=lg;d6.displayName="@mantine/core/DrawerOverlay";function qKe(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function WKe(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const GKe={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},YKe={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},KKe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:tf("modal"),position:"left"},XKe=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":rn(n,"drawer-size"),"--drawer-flex":WKe(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":qKe(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":Ce(r)}}),h6=Le((e,t)=>{const n=xe("DrawerRoot",KKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,scrollAreaComponent:l,position:c,transitionProps:f,radius:d,...h}=n,{dir:p}=tp(),m=vt({name:"Drawer",classes:lg,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:XKe}),g=(p==="rtl"?YKe:GKe)[c];return _.jsx(BKe,{value:{scrollAreaComponent:l,getStyles:m,radius:d},children:_.jsx(lEe,{ref:t,...m("root"),transitionProps:{transition:g,...f},unstyled:a,...h})})});h6.classes=lg;h6.displayName="@mantine/core/DrawerRoot";const QKe={},p6=Le((e,t)=>{const n=xe("DrawerTitle",QKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=cS();return _.jsx(IY,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});p6.classes=lg;p6.displayName="@mantine/core/DrawerTitle";const JKe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:tf("modal"),withOverlay:!0,withCloseButton:!0},np=Le((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,...u}=xe("Drawer",JKe,e),l=!!n||s;return _.jsxs(h6,{ref:t,...u,children:[r&&_.jsx(d6,{...i}),_.jsxs(c6,{children:[l&&_.jsxs(f6,{children:[n&&_.jsx(p6,{children:n}),s&&_.jsx(l6,{...o})]}),_.jsx(u6,{children:a})]})]})});np.classes=lg;np.displayName="@mantine/core/Drawer";np.Root=h6;np.Overlay=d6;np.Content=c6;np.Body=u6;np.Header=f6;np.Title=p6;np.CloseButton=l6;function ZKe({open:e,close:t,openDelay:n,closeDelay:r}){const i=I.useRef(-1),s=I.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return I.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[eXe,HEe]=_o("Grid component was not found in tree"),dz=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,xue=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":dz(e,t),Sue=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},Tue=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function tXe({span:e,order:t,offset:n,selector:r}){var d;const i=qs(),s=HEe(),a=DC(e)===void 0?12:DC(e),u=nS({"--col-order":(d=DC(t))==null?void 0:d.toString(),"--col-flex-grow":Sue(a,s.grow),"--col-flex-basis":dz(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":xue(a,s.columns,s.grow),"--col-offset":Tue(DC(n),s.columns)}),l=Li(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=Sue(e[p],s.grow),h[p]["--col-flex-basis"]=dz(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=xue(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=Tue(n[p],s.columns)),h},{}),f=h$(Li(l),i).filter(h=>Li(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return _.jsx(xk,{styles:u,media:f,selector:r})}var uK={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const nXe={span:12},lK=Le((e,t)=>{const n=xe("GridCol",nXe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=HEe(),h=XL();return _.jsxs(_.Fragment,{children:[_.jsx(tXe,{selector:`.${h}`,span:u,order:l,offset:c}),_.jsx(_e,{ref:t,...d.getStyles("col",{className:Bi(i,h),style:s,classNames:r,styles:o}),...f})]})});lK.classes=uK;lK.displayName="@mantine/core/GridCol";function rXe({gutter:e,selector:t}){const n=qs(),r=nS({"--grid-gutter":ql(DC(e))}),i=Li(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=ql(e[u])),a),{}),o=h$(Li(i),n).filter(a=>Li(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return _.jsx(xk,{styles:r,media:o,selector:t})}const iXe={gutter:"md",grow:!1,columns:12},sXe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),ao=Le((e,t)=>{const n=xe("Grid",iXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=vt({name:"Grid",classes:uK,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:sXe}),y=XL();return _.jsxs(eXe,{value:{getStyles:g,grow:l,columns:f},children:[_.jsx(rXe,{selector:`.${y}`,...n}),_.jsx(_e,{ref:t,...g("root",{className:y}),...m,children:_.jsx("div",{...g("inner"),children:p})})]})});ao.classes=uK;ao.displayName="@mantine/core/Grid";ao.Col=lK;var qEe={root:"m_9e117634"};const oXe={},aXe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:ei(t),"--image-object-fit":n}}),cg=Ws((e,t)=>{const n=xe("Image",oXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=I.useState(!c);I.useEffect(()=>y(!c),[c]);const v=vt({name:"Image",classes:qEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:aXe});return g&&h?_.jsx(_e,{component:"img",ref:t,src:h,...v("root"),onError:l,mod:["fallback",p],...m}):_.jsx(_e,{component:"img",ref:t,...v("root"),src:c,onError:b=>{l==null||l(b),y(!0)},mod:p,...m})});cg.classes=qEe;cg.displayName="@mantine/core/Image";function gm(){return gm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gm.apply(null,arguments)}function cK(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var uXe=I.useLayoutEffect,lXe=function(t){var n=I.useRef(t);return uXe(function(){n.current=t}),n},Cue=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},cXe=function(t,n){var r=I.useRef();return I.useCallback(function(i){t.current=i,r.current&&Cue(r.current,null),r.current=n,n&&Cue(n,i)},[n])},Aue={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},fXe=function(t){Object.keys(Aue).forEach(function(n){t.style.setProperty(n,Aue[n],"important")})},Iue=fXe,Fa=null,kue=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function dXe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Fa||(Fa=document.createElement("textarea"),Fa.setAttribute("tabindex","-1"),Fa.setAttribute("aria-hidden","true"),Iue(Fa)),Fa.parentNode===null&&document.body.appendChild(Fa);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Fa.style[h]=o[h]}),Iue(Fa),Fa.value=t;var u=kue(Fa,e);Fa.value=t,u=kue(Fa,e),Fa.value="x";var l=Fa.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var Rue=function(){},hXe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},pXe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],mXe=!!document.documentElement.currentStyle,gXe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=hXe(pXe,n),i=r.boxSizing;if(i==="")return null;mXe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},yXe=gXe;function WEe(e,t,n){var r=lXe(n);I.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var vXe=function(t){WEe(window,"resize",t)},bXe=function(t){WEe(document.fonts,"loadingdone",t)},_Xe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],wXe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?Rue:o,u=t.onHeightChange,l=u===void 0?Rue:u,c=cK(t,_Xe),f=c.value!==void 0,d=I.useRef(null),h=cXe(d,n),p=I.useRef(0),m=I.useRef(),g=function(){var b=d.current,w=r&&m.current?m.current:yXe(b);if(w){m.current=w;var E=dXe(w,b.value||b.placeholder||"x",s,i),x=E[0],T=E[1];p.current!==x&&(p.current=x,b.style.setProperty("height",x+"px","important"),l(x,{rowHeight:T}))}},y=function(b){f||g(),a(b)};return I.useLayoutEffect(g),vXe(g),bXe(g),I.createElement("textarea",gm({},c,{onChange:y,ref:h}))},EXe=I.forwardRef(wXe);const xXe={},fK=Le((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=xe("Textarea",xXe,e),u=n&&cwe()!=="test",l=u?{maxRows:r,minRows:i}:{};return _.jsx(sf,{component:u?EXe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});fK.classes=sf.classes;fK.displayName="@mantine/core/Textarea";const[SXe,TXe]=_o("List component was not found in tree");var dK={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const CXe={},hK=Le((e,t)=>{const n=xe("ListItem",CXe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=TXe(),h=u||d.icon,p={classNames:r,styles:o};return _.jsx(_e,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:_.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&_.jsx("span",{...d.getStyles("itemIcon",p),children:h}),_.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});hK.classes=dK;hK.displayName="@mantine/core/ListItem";const AXe={type:"unordered"},IXe=(e,{size:t,spacing:n})=>({root:{"--list-fz":mo(t),"--list-lh":nwe(t),"--list-spacing":ql(n)}}),Qf=Le((e,t)=>{const n=xe("List",AXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=vt({name:"List",classes:dK,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:IXe});return _.jsx(SXe,{value:{center:p,icon:d,getStyles:v},children:_.jsx(_e,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});Qf.classes=dK;Qf.displayName="@mantine/core/List";Qf.Item=hK;var GEe={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const Nue={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:tf("overlay")},kXe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),Gl=Le((e,t)=>{const n=xe("LoadingOverlay",Nue,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=qs(),g=vt({name:"LoadingOverlay",classes:GEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:kXe}),y={...Nue.overlayProps,...f};return _.jsx(og,{transition:"fade",...l,mounted:!!d,children:v=>_.jsxs(_e,{...g("root",{style:v}),ref:t,...p,children:[_.jsx(ag,{...g("loader"),unstyled:a,...c}),_.jsx(j2,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),_.jsx(j2,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});Gl.classes=GEe;Gl.displayName="@mantine/core/LoadingOverlay";const[RXe,Nk]=_o("Menu component was not found in the tree");var fS={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const NXe={},pK=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("MenuDivider",NXe,e),u=Nk();return _.jsx(_e,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});pK.classes=fS;pK.displayName="@mantine/core/MenuDivider";const DXe={},mK=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=xe("MenuDropdown",DXe,e),f=I.useRef(null),d=Nk(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=rm(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=rm(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return _.jsxs(si.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:ms(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[_.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});mK.classes=fS;mK.displayName="@mantine/core/MenuDropdown";const PXe={},gK=Ws((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=xe("MenuItem",PXe,e),p=Nk(),m=qs(),{dir:g}=tp(),y=I.useRef(),v=p.getItemIndex(y.current),b=h,w=rm(b.onMouseLeave,()=>p.setHovered(-1)),E=rm(b.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),x=rm(b.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),T=rm(b.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),C=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,A=a?ep({color:a,theme:m}):null;return _.jsxs(Ss,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:T,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:ms(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===v?!0:void 0,onMouseEnter:E,onMouseLeave:w,onClick:x,onKeyDown:qG({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:b.onKeydown}),__vars:{"--menu-item-color":A!=null&&A.isThemeColor&&(A==null?void 0:A.shade)===void 0?`var(--mantine-color-${A.color}-6)`:C==null?void 0:C.color,"--menu-item-hover":C==null?void 0:C.hover},children:[l&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&_.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});gK.classes=fS;gK.displayName="@mantine/core/MenuItem";const OXe={},yK=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("MenuLabel",OXe,e),u=Nk();return _.jsx(_e,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});yK.classes=fS;yK.displayName="@mantine/core/MenuLabel";const $Xe={refProp:"ref"},YEe=I.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=xe("MenuTarget",$Xe,e);if(!Vy(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=Nk(),o=rm(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=rm(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=rm(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return _.jsx(si.Target,{refProp:r,popupType:"menu",ref:t,...i,children:I.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});YEe.displayName="@mantine/core/MenuTarget";const MXe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Du(e){const t=xe("Menu",MXe,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:b,menuItemTabIndex:w,keepMounted:E,...x}=t,T=vt({name:"Menu",classes:fS,props:t,classNames:m,styles:g,unstyled:y}),[C,{setHovered:A,resetHovered:k}]=HVe(),[R,O]=Cs({value:s,defaultValue:o,finalValue:!1,onChange:u}),[D,$]=I.useState(!1),F=()=>{O(!1),$(!1),R&&(i==null||i())},L=()=>{O(!0),!R&&(r==null||r())},j=()=>{R?F():L()},{openDropdown:z,closeDropdown:q}=ZKe({open:L,close:F,closeDelay:p,openDelay:h}),P=B=>VVe("[data-menu-item]","[data-menu-dropdown]",B),{resolvedClassNames:U,resolvedStyles:W}=ig({classNames:m,styles:g,props:t});return Nm(()=>{k()},[R]),_.jsx(RXe,{value:{getStyles:T,opened:R,toggleDropdown:j,getItemIndex:P,hovered:C,setHovered:A,openedViaClick:D,setOpenedViaClick:$,closeOnItemClick:l,closeDropdown:d==="click"?F:q,openDropdown:d==="click"?L:z,closeDropdownImmediately:F,loop:c,trigger:d,unstyled:y,menuItemTabIndex:w},children:_.jsx(si,{...x,opened:R,onChange:j,defaultOpened:o,trapFocus:E?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:U,styles:W,unstyled:y,variant:v,keepMounted:E,children:n})})}Du.extend=e=>e;Du.classes=fS;Du.displayName="@mantine/core/Menu";Du.Item=gK;Du.Label=yK;Du.Dropdown=mK;Du.Target=YEe;Du.Divider=pK;const[LXe,dS]=_o("Modal component was not found in tree");var fg={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const FXe={},m6=Le((e,t)=>{const n=xe("ModalBody",FXe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=dS();return _.jsx(SY,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});m6.classes=fg;m6.displayName="@mantine/core/ModalBody";const BXe={},g6=Le((e,t)=>{const n=xe("ModalCloseButton",BXe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=dS();return _.jsx(TY,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});g6.classes=fg;g6.displayName="@mantine/core/ModalCloseButton";const jXe={},y6=Le((e,t)=>{const n=xe("ModalContent",jXe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=dS(),f=c.scrollAreaComponent||fEe;return _.jsx(cEe,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:_.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${Ce(c.yOffset)} * 2))`},children:u})})});y6.classes=fg;y6.displayName="@mantine/core/ModalContent";const UXe={},v6=Le((e,t)=>{const n=xe("ModalHeader",UXe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=dS();return _.jsx(CY,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});v6.classes=fg;v6.displayName="@mantine/core/ModalHeader";const zXe={},b6=Le((e,t)=>{const n=xe("ModalOverlay",zXe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=dS();return _.jsx(AY,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});b6.classes=fg;b6.displayName="@mantine/core/ModalOverlay";const VXe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:tf("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},HXe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:ei(t),"--modal-size":rn(n,"modal-size"),"--modal-y-offset":Ce(r),"--modal-x-offset":Ce(i)}}),_6=Le((e,t)=>{const n=xe("ModalRoot",VXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=vt({name:m,classes:fg,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:HXe});return _.jsx(LXe,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:_.jsx(lEe,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});_6.classes=fg;_6.displayName="@mantine/core/ModalRoot";const qXe={},w6=Le((e,t)=>{const n=xe("ModalTitle",qXe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=dS();return _.jsx(IY,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});w6.classes=fg;w6.displayName="@mantine/core/ModalTitle";const WXe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:tf("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Ts=Le((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=xe("Modal",WXe,e),c=!!n||s;return _.jsxs(_6,{ref:t,radius:u,...l,children:[r&&_.jsx(b6,{...i}),_.jsxs(y6,{radius:u,children:[c&&_.jsxs(v6,{children:[n&&_.jsx(w6,{children:n}),s&&_.jsx(g6,{...o})]}),_.jsx(m6,{children:a})]})]})});Ts.classes=fg;Ts.displayName="@mantine/core/Modal";Ts.Root=_6;Ts.Overlay=b6;Ts.Content=y6;Ts.Body=m6;Ts.Header=v6;Ts.Title=w6;Ts.CloseButton=g6;const[GXe,vK]=rS(),[YXe,KXe]=rS();var E6={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const XXe={},QXe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?rn(t):rn(n,"pg-gap")}}),bK=Le((e,t)=>{const n=xe("PillGroup",XXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=vK(),h=(d==null?void 0:d.size)||l||void 0,p=vt({name:"PillGroup",classes:E6,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:QXe,stylesCtx:{size:h},rootSelector:"group"});return _.jsx(YXe,{value:{size:h,disabled:c},children:_.jsx(_e,{ref:t,size:h,...p("group"),...f})})});bK.classes=E6;bK.displayName="@mantine/core/PillGroup";const JXe={variant:"default"},ZXe=(e,{radius:t},{size:n})=>({root:{"--pill-fz":rn(n,"pill-fz"),"--pill-height":rn(n,"pill-height"),"--pill-radius":t===void 0?void 0:ei(t)}}),U2=Le((e,t)=>{const n=xe("Pill",JXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,b=KXe(),w=vK(),E=m||(b==null?void 0:b.size)||void 0,x=(w==null?void 0:w.variant)==="filled"?"contrast":l||"default",T=vt({name:"Pill",classes:E6,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:ZXe,stylesCtx:{size:E}});return _.jsxs(_e,{component:"span",ref:t,variant:x,size:E,...T("root",{variant:x}),mod:[{"with-remove":f&&!g,disabled:g||(b==null?void 0:b.disabled)},y],...v,children:[_.jsx("span",{...T("label"),children:c}),f&&_.jsx(Wy,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...T("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:C=>{var A;C.preventDefault(),C.stopPropagation(),(A=h==null?void 0:h.onMouseDown)==null||A.call(h,C)},onClick:C=>{var A;C.stopPropagation(),d==null||d(),(A=h==null?void 0:h.onClick)==null||A.call(h,C)}})]})});U2.classes=E6;U2.displayName="@mantine/core/Pill";U2.Group=bK;var KEe={field:"m_45c4369d"};const eQe={type:"visible"},_K=Le((e,t)=>{const n=xe("PillsInputField",eQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=vK(),g=aS(),y=vt({name:"PillsInputField",classes:KEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return _.jsx(_e,{component:"input",ref:ms(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:v,mod:[{disabled:v,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:b=>!d&&b.stopPropagation()})});_K.classes=KEe;_K.displayName="@mantine/core/PillsInputField";const tQe={},b$=Le((e,t)=>{const n=xe("PillsInput",tQe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=I.useRef();return _.jsx(GXe,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:_.jsx(sf,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});b$.displayName="@mantine/core/PillsInput";b$.Field=_K;function nQe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(zE(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const rQe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},wK=Le((e,t)=>{const n=xe("MultiSelect",rQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:b,selectFirstOptionOnChange:w,onOptionSubmit:E,comboboxProps:x,filter:T,limit:C,withScrollArea:A,maxDropdownHeight:k,searchValue:R,defaultSearchValue:O,onSearchChange:D,readOnly:$,disabled:F,onFocus:L,onBlur:j,onPaste:z,radius:q,rightSection:P,rightSectionWidth:U,rightSectionPointerEvents:W,rightSectionProps:B,leftSection:H,leftSectionWidth:G,leftSectionPointerEvents:te,leftSectionProps:le,inputContainer:fe,inputWrapperOrder:de,withAsterisk:ge,labelProps:Ie,descriptionProps:pe,errorProps:He,wrapperProps:Ue,description:yt,label:it,error:be,maxValues:ke,searchable:ze,nothingFoundMessage:ct,withCheckIcon:Ot,checkIconPosition:Ge,hidePickedOptions:ye,withErrorStyles:ht,name:bt,form:me,id:Ae,clearable:qe,clearButtonProps:ut,hiddenInputProps:wt,placeholder:Bn,hiddenInputValuesDivider:Ir,required:jn,mod:hr,renderOption:yn,onRemove:An,onClear:sr,scrollAreaProps:or,...Qo}=n,Ui=Da(Ae),In=_Ee(m),zi=zY(In),kr=ZY({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{b==null||b(),kr.resetSelectedOption()}}),{styleProps:ys,rest:{type:Sp,autoComplete:gl,...kd}}=Wb(Qo),[Tr,Ni]=Cs({value:c,defaultValue:f,finalValue:[],onChange:d}),[ti,yu]=Cs({value:R,defaultValue:O,finalValue:"",onChange:D}),$a=vt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:Ma,resolvedStyles:oe}=ig({props:n,styles:o,classNames:r}),ee=ot=>{h==null||h(ot),ot.key===" "&&!ze&&(ot.preventDefault(),kr.toggleDropdown()),ot.key==="Backspace"&&ti.length===0&&Tr.length>0&&(An==null||An(Tr[Tr.length-1]),Ni(Tr.slice(0,Tr.length-1)))},ae=Tr.map((ot,Tt)=>{var Wt,Mn;return _.jsx(U2,{withRemoveButton:!$&&!((Wt=zi[ot])!=null&&Wt.disabled),onRemove:()=>{Ni(Tr.filter(Un=>ot!==Un)),An==null||An(ot)},unstyled:a,disabled:F,...$a("pill"),children:((Mn=zi[ot])==null?void 0:Mn.label)||ot},`${ot}-${Tt}`)});I.useEffect(()=>{w&&kr.selectFirstOption()},[w,Tr]);const Te=qe&&Tr.length>0&&!F&&!$&&_.jsx(Qn.ClearButton,{size:l,...ut,onClear:()=>{sr==null||sr(),Ni([]),yu("")}}),Se=nQe({data:In,value:Tr});return _.jsxs(_.Fragment,{children:[_.jsxs(Qn,{store:kr,classNames:Ma,styles:oe,unstyled:a,size:l,readOnly:$,__staticSelector:"MultiSelect",onOptionSubmit:ot=>{E==null||E(ot),yu(""),kr.updateSelectedOptionIndex("selected"),Tr.includes(zi[ot].value)?(Ni(Tr.filter(Tt=>Tt!==zi[ot].value)),An==null||An(zi[ot].value)):Tr.length<ke&&Ni([...Tr,zi[ot].value])},...x,children:[_.jsx(Qn.DropdownTarget,{children:_.jsx(b$,{...ys,__staticSelector:"MultiSelect",classNames:Ma,styles:oe,unstyled:a,size:l,className:i,style:s,variant:p,disabled:F,radius:q,rightSection:P||Te||_.jsx(Qn.Chevron,{size:l,error:be,unstyled:a}),rightSectionPointerEvents:W||(Te?"all":"none"),rightSectionWidth:U,rightSectionProps:B,leftSection:H,leftSectionWidth:G,leftSectionPointerEvents:te,leftSectionProps:le,inputContainer:fe,inputWrapperOrder:de,withAsterisk:ge,labelProps:Ie,descriptionProps:pe,errorProps:He,wrapperProps:Ue,description:yt,label:it,error:be,multiline:!0,withErrorStyles:ht,__stylesApiProps:{...n,rightSectionPointerEvents:W||(Te?"all":"none"),multiline:!0},pointer:!ze,onClick:()=>ze?kr.openDropdown():kr.toggleDropdown(),"data-expanded":kr.dropdownOpened||void 0,id:Ui,required:jn,mod:hr,children:_.jsxs(U2.Group,{disabled:F,unstyled:a,...$a("pillsList"),children:[ae,_.jsx(Qn.EventsTarget,{autoComplete:gl,children:_.jsx(b$.Field,{...kd,ref:t,id:Ui,placeholder:Bn,type:!ze&&!Bn?"hidden":"visible",...$a("inputField"),unstyled:a,onFocus:ot=>{L==null||L(ot),ze&&kr.openDropdown()},onBlur:ot=>{j==null||j(ot),kr.closeDropdown(),yu("")},onKeyDown:ee,value:ti,onChange:ot=>{yu(ot.currentTarget.value),ze&&kr.openDropdown(),w&&kr.selectFirstOption()},disabled:F,readOnly:$||!ze,pointer:!ze})})]})})}),_.jsx(FEe,{data:ye?Se:In,hidden:$||F,filter:T,search:ti,limit:C,hiddenWhenEmpty:!ze||!ct||ye&&Se.length===0&&ti.trim().length===0,withScrollArea:A,maxDropdownHeight:k,filterOptions:ze,value:Tr,checkIconPosition:Ge,withCheckIcon:Ot,nothingFoundMessage:ct,unstyled:a,labelId:it?`${Ui}-label`:void 0,"aria-label":it?void 0:Qo["aria-label"],renderOption:yn,scrollAreaProps:or})]}),_.jsx(Qn.HiddenInput,{name:bt,valuesDivider:Ir,value:Tr,form:me,disabled:F,...wt})]})});wK.classes={...sf.classes,...Qn.classes};wK.displayName="@mantine/core/MultiSelect";var XEe={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const iQe={},sQe=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":ql(r)}}},x6=Ws((e,t)=>{const n=xe("NavLink",iQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:v,description:b,disableRightSectionRotation:w,noWrap:E,childrenOffset:x,onKeyDown:T,autoContrast:C,mod:A,...k}=n,R=vt({name:"NavLink",props:n,classes:XEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:sQe}),[O,D]=Cs({value:l,defaultValue:c,finalValue:!1,onChange:f}),$=!!d,F=L=>{h==null||h(L),$&&(L.preventDefault(),D(!O))};return _.jsxs(_.Fragment,{children:[_.jsxs(Ss,{...R("root"),component:"a",ref:t,onClick:F,onKeyDown:L=>{T==null||T(L),L.nativeEvent.code==="Space"&&$&&(L.preventDefault(),D(!O))},unstyled:a,mod:[{disabled:m,active:p,expanded:O},A],...k,children:[g&&_.jsx(_e,{component:"span",...R("section"),mod:{position:"left"},children:g}),_.jsxs(_e,{...R("body"),mod:{"no-wrap":E},children:[_.jsx(_e,{component:"span",...R("label"),children:v}),_.jsx(_e,{component:"span",mod:{active:p},...R("description"),children:b})]}),($||y)&&_.jsx(_e,{...R("section"),component:"span",mod:{rotate:O&&!w,position:"right"},children:$?y||_.jsx(UE,{...R("chevron")}):y})]}),_.jsx(nY,{in:O,...R("collapse"),children:_.jsx("div",{...R("children"),children:d})})]})});x6.classes=XEe;x6.displayName="@mantine/core/NavLink";function QEe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var z2;(function(e){e.event="event",e.props="prop"})(z2||(z2={}));function n0(){}function oQe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function V2(e){return!!(e||"").match(/\d/)}function eE(e){return e==null}function aQe(e){return typeof e=="number"&&isNaN(e)}function JEe(e){return eE(e)||aQe(e)||typeof e=="number"&&!isFinite(e)}function ZEe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function uQe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function lQe(e,t,n){var r=uQe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function cQe(e){var t=I.useRef(e);t.current=e;var n=I.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function EK(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function fQe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function exe(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function Due(e,t){return Array(t+1).join(e)}function txe(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+Due("0",Math.abs(o))+i:o>=a?i=i+Due("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function Pue(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=EK(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=exe(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function Zv(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var nxe=oQe(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),dQe=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function hQe(e,t,n){return Math.min(Math.max(e,t),n)}function Wj(e){return Math.max(e.selectionStart,e.selectionEnd)}function pQe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function mQe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function gQe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function yQe(e,t,n,r,i,s,o){o===void 0&&(o=gQe);var a=i.findIndex(function(w){return w}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var v=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var b=y===-1||d[y]===-1?0:d[y]+1;return b>v?v:r-b<v-r?b:v}function Oue(e,t,n,r){var i=e.length;if(t=hQe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function vQe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(V2(e[n])||V2(e[n-1]));return t}function rxe(e,t,n,r,i,s){s===void 0&&(s=n0);var o=cQe(function(p,m){var g,y;return JEe(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?txe(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=I.useState(function(){return o(eE(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;eE(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return I.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function bQe(e){return e.replace(/[^0-9]/g,"")}function _Qe(e){return e}function wQe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=_Qe);var a=e.removeFormatting;a===void 0&&(a=bQe);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=n0);var h=e.onKeyDown;h===void 0&&(h=n0);var p=e.onMouseUp;p===void 0&&(p=n0);var m=e.onFocus;m===void 0&&(m=n0);var g=e.onBlur;g===void 0&&(g=n0);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=vQe);var b=e.isValidInputCharacter;b===void 0&&(b=V2);var w=e.isCharacterSame,E=QEe(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),x=rxe(y,u,!!l,o,a,c),T=x[0],C=T.formattedValue,A=T.numAsString,k=x[1],R=I.useRef(),O=I.useRef({formattedValue:C,numAsString:A}),D=function(be,ke){O.current={formattedValue:be.formattedValue,numAsString:be.value},k(be,ke)},$=I.useState(!1),F=$[0],L=$[1],j=I.useRef(null),z=I.useRef({setCaretTimeout:null,focusTimeout:null});I.useEffect(function(){return L(!0),function(){clearTimeout(z.current.setCaretTimeout),clearTimeout(z.current.focusTimeout)}},[]);var q=o,P=function(be,ke){var ze=parseFloat(ke);return{formattedValue:be,value:ke,floatValue:isNaN(ze)?void 0:ze}},U=function(be,ke,ze){be.selectionStart===0&&be.selectionEnd===be.value.length||(Zv(be,ke),z.current.setCaretTimeout=setTimeout(function(){be.value===ze&&be.selectionStart!==ke&&Zv(be,ke)},0))},W=function(be,ke,ze){return Oue(be,ke,v(be),ze)},B=function(be,ke,ze){var ct=v(ke),Ot=yQe(ke,C,be,ze,ct,b,w);return Ot=Oue(ke,Ot,ct),Ot},H=function(be){var ke=be.formattedValue;ke===void 0&&(ke="");var ze=be.input,ct=be.source,Ot=be.event,Ge=be.numAsString,ye;if(ze){var ht=be.inputValue||ze.value,bt=Wj(ze);ze.value=ke,ye=B(ht,ke,bt),ye!==void 0&&U(ze,ye,ke)}ke!==C&&D(P(ke,Ge),{event:Ot,source:ct})};I.useEffect(function(){var be=O.current,ke=be.formattedValue,ze=be.numAsString;(C!==ke||A!==ze)&&D(P(C,A),{event:void 0,source:z2.props})},[C,A]);var G=j.current?Wj(j.current):void 0,te=typeof window<"u"?I.useLayoutEffect:I.useEffect;te(function(){var be=j.current;if(C!==O.current.formattedValue&&be){var ke=B(O.current.formattedValue,C,G);be.value=C,U(be,ke,C)}},[C]);var le=function(be,ke,ze){var ct=ke.target,Ot=R.current?dQe(R.current,ct.selectionEnd):nxe(C,be),Ge=Object.assign(Object.assign({},Ot),{lastValue:C}),ye=a(be,Ge),ht=q(ye);if(ye=a(ht,void 0),f&&!f(P(ht,ye))){var bt=ke.target,me=Wj(bt),Ae=B(be,C,me);return bt.value=C,U(bt,Ae,C),!1}return H({formattedValue:ht,numAsString:ye,inputValue:be,event:ke,source:ze,input:ke.target}),!0},fe=function(be,ke){ke===void 0&&(ke=0);var ze=be.selectionStart,ct=be.selectionEnd;R.current={selectionStart:ze,selectionEnd:ct+ke}},de=function(be){var ke=be.target,ze=ke.value,ct=le(ze,be,z2.event);ct&&d(be),R.current=void 0},ge=function(be){var ke=be.target,ze=be.key,ct=ke.selectionStart,Ot=ke.selectionEnd,Ge=ke.value;Ge===void 0&&(Ge="");var ye;ze==="ArrowLeft"||ze==="Backspace"?ye=Math.max(ct-1,0):ze==="ArrowRight"?ye=Math.min(ct+1,Ge.length):ze==="Delete"&&(ye=ct);var ht=0;ze==="Delete"&&ct===Ot&&(ht=1);var bt=ze==="ArrowLeft"||ze==="ArrowRight";if(ye===void 0||ct!==Ot&&!bt){h(be),fe(ke,ht);return}var me=ye;if(bt){var Ae=ze==="ArrowLeft"?"left":"right";me=W(Ge,ye,Ae),me!==ye&&be.preventDefault()}else ze==="Delete"&&!b(Ge[ye])?me=W(Ge,ye,"right"):ze==="Backspace"&&!b(Ge[ye])&&(me=W(Ge,ye,"left"));me!==ye&&U(ke,me,Ge),h(be),fe(ke,ht)},Ie=function(be){var ke=be.target,ze=function(){var ct=ke.selectionStart,Ot=ke.selectionEnd,Ge=ke.value;if(Ge===void 0&&(Ge=""),ct===Ot){var ye=W(Ge,ct);ye!==ct&&U(ke,ye,Ge)}};ze(),requestAnimationFrame(function(){ze()}),p(be),fe(ke)},pe=function(be){be.persist&&be.persist();var ke=be.target,ze=be.currentTarget;j.current=ke,z.current.focusTimeout=setTimeout(function(){var ct=ke.selectionStart,Ot=ke.selectionEnd,Ge=ke.value;Ge===void 0&&(Ge="");var ye=W(Ge,ct);ye!==ct&&!(ct===0&&Ot===Ge.length)&&U(ke,ye,Ge),m(Object.assign(Object.assign({},be),{currentTarget:ze}))},0)},He=function(be){j.current=null,clearTimeout(z.current.focusTimeout),clearTimeout(z.current.setCaretTimeout),g(be)},Ue=F&&pQe()?"numeric":void 0,yt=Object.assign({inputMode:Ue},E,{type:t,value:C,onChange:de,onKeyDown:ge,onMouseUp:Ie,onFocus:pe,onBlur:He});if(n==="text")return i?qt.createElement(qt.Fragment,null,i(C,E)||null):qt.createElement("span",Object.assign({},E,{ref:s}),C);if(r){var it=r;return qt.createElement(it,Object.assign({},yt,{ref:s}))}return qt.createElement("input",Object.assign({},yt,{ref:s}))}function $ue(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=S6(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=EK(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=exe(p,n,!!r)),l&&(h=lQe(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function S6(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function EQe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function xQe(e,t){return new RegExp("(^-)|[0-9]|"+ZEe(e),"g")}function SQe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function TQe(e,t,n){var r;t===void 0&&(t=mQe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=S6(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(V2(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(j,z,q){var P=!1,U=!1;s.startsWith("-")?P=!1:j.startsWith("--")?(P=!1,U=!0):o.startsWith("-")&&j.length===o.length?P=!1:j[0]==="-"&&(P=!0);var W=P?1:0;return U&&(W=2),W&&(j=j.substring(W),z-=W,q-=W),{value:j,start:z,end:q,hasNegation:P}},v=y(e,c,f),b=v.hasNegation;r=v,e=r.value,c=r.start,f=r.end;var w=y(t.lastValue,u.start,u.end),E=w.start,x=w.end,T=w.value,C=e.substring(c,f);e.length&&T.length&&(E>T.length-o.length||x<s.length)&&!(C&&o.startsWith(C))&&(e=T);var A=0;e.startsWith(s)?A+=s.length:c<s.length&&(A=c),e=e.substring(A),f-=A;var k=e.length,R=e.length-o.length;e.endsWith(o)?k=R:(f>R||f>e.length-o.length)&&(k=f),e=e.substring(0,k),e=EQe(b?"-"+e:e,i),e=(e.match(xQe(p))||[]).join("");var O=e.indexOf(p);e=e.replace(new RegExp(ZEe(p),"g"),function(j,z){return z===O?".":""});var D=EK(e,i),$=D.beforeDecimal,F=D.afterDecimal,L=D.addNegation;return l.end-l.start<u.end-u.start&&$===""&&m&&!parseFloat(F)&&(e=L?"-":""),e}function CQe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function AQe(e){var t=S6(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function IQe(e){e=AQe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=n0);var s=e.onBlur;s===void 0&&(s=n0);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=QEe(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=S6(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(L){return $ue(L,e)},b=function(L,j){return TQe(L,j,e)},w=eE(f)?c:f,E=d??SQe(w,l,t);eE(f)?eE(c)||(E=E||typeof c=="number"):E=E||typeof f=="number";var x=function(L){return JEe(L)?L:(typeof L=="number"&&(L=txe(L)),E&&typeof a=="number"?Pue(L,a,!!u):L)},T=rxe(x(f),x(c),!!E,v,b,h),C=T[0],A=C.numAsString,k=C.formattedValue,R=T[1],O=function(L){var j=L.target,z=L.key,q=j.selectionStart,P=j.selectionEnd,U=j.value;if(U===void 0&&(U=""),(z==="Backspace"||z==="Delete")&&P<l.length){L.preventDefault();return}if(q!==P){i(L);return}z==="Backspace"&&U[0]==="-"&&q===l.length+1&&n&&Zv(j,1),a&&u&&(z==="Backspace"&&U[q-1]===g?(Zv(j,q-1),L.preventDefault()):z==="Delete"&&U[q]===g&&L.preventDefault()),y!=null&&y.includes(z)&&U[q]===g&&Zv(j,q+1);var W=o===!0?",":o;z==="Backspace"&&U[q-1]===W&&Zv(j,q-1),z==="Delete"&&U[q]===W&&Zv(j,q+1),i(L)},D=function(L){var j=A;if(j.match(/\d/g)||(j=""),r||(j=fQe(j)),u&&a&&(j=Pue(j,a,u)),j!==A){var z=$ue(j,e);R({formattedValue:z,value:j,floatValue:parseFloat(j)},{event:L,source:z2.event})}s(L)},$=function(L){return L===g?!0:V2(L)},F=function(L){var j=L.currentValue,z=L.lastValue,q=L.formattedValue,P=L.currentValueIndex,U=L.formattedValueIndex,W=j[P],B=q[U],H=nxe(z,j),G=H.to;return P>=G.start&&P<G.end&&y&&y.includes(W)&&B===g?!0:W===B};return Object.assign(Object.assign({},p),{value:k,valueIsNumericString:!1,isValidInputCharacter:$,isCharacterSame:F,onValueChange:R,format:v,removeFormatting:b,getCaretBoundary:function(L){return CQe(L,e)},onKeyDown:O,onBlur:D})}function kQe(e){var t=IQe(e);return qt.createElement(wQe,Object.assign({},t))}function Mue({direction:e,style:t,...n}){return _.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var hz={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const RQe=/^(0\.0*|-0(\.0*)?)$/,NQe=/^-?0\d+(\.\d+)?\.?$/;function DQe(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function Lue(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const PQe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},OQe=(e,{size:t})=>({controls:{"--ni-chevron-size":rn(t,"ni-chevron-size")}}),xK=Le((e,t)=>{const n=xe("NumberInput",PQe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:b,allowDecimal:w,decimalScale:E,onKeyDown:x,onKeyDownCapture:T,handlersRef:C,startValue:A,disabled:k,rightSectionPointerEvents:R,allowNegative:O,readOnly:D,size:$,rightSectionWidth:F,stepHoldInterval:L,stepHoldDelay:j,allowLeadingZeros:z,withKeyboardEvents:q,trimLeadingZeroesOnBlur:P,...U}=n,W=vt({name:"NumberInput",classes:hz,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:OQe}),{resolvedClassNames:B,resolvedStyles:H}=ig({classNames:i,styles:s,props:n}),[G,te]=Cs({value:c,defaultValue:f,onChange:u}),le=j!==void 0&&L!==void 0,fe=I.useRef(null),de=I.useRef(null),ge=I.useRef(0),Ie=(ye,ht)=>{ht.source==="event"&&te(DQe(ye.floatValue)&&!RQe.test(ye.value)&&!(z&&NQe.test(ye.value))?ye.floatValue:ye.value),l==null||l(ye,ht)},pe=ye=>{const ht=String(ye).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return ht?Math.max(0,(ht[1]?ht[1].length:0)-(ht[2]?+ht[2]:0)):0},He=ye=>{fe.current&&typeof ye<"u"&&fe.current.setSelectionRange(ye,ye)},Ue=I.useRef();Ue.current=()=>{let ye;const ht=pe(G),bt=pe(p),me=Math.max(ht,bt),Ae=10**me;if(typeof G!="number"||Number.isNaN(G))ye=ch(A,h,d);else if(d!==void 0){const ut=(Math.round(G*Ae)+Math.round(p*Ae))/Ae;ye=ut<=d?ut:d}else ye=(Math.round(G*Ae)+Math.round(p*Ae))/Ae;const qe=ye.toFixed(me);te(parseFloat(qe)),l==null||l({floatValue:parseFloat(qe),formattedValue:qe,value:qe},{source:"increment"}),setTimeout(()=>{var ut;return He((ut=fe.current)==null?void 0:ut.value.length)},0)};const yt=I.useRef();yt.current=()=>{let ye;const ht=h!==void 0?h:O?Number.MIN_SAFE_INTEGER:0,bt=pe(G),me=pe(p),Ae=Math.max(bt,me),qe=10**Ae;if(typeof G!="number"||Number.isNaN(G))ye=ch(A,ht,d);else{const wt=(Math.round(G*qe)-Math.round(p*qe))/qe;ye=ht!==void 0&&wt<ht?ht:wt}const ut=ye.toFixed(Ae);te(parseFloat(ut)),l==null||l({floatValue:parseFloat(ut),formattedValue:ut,value:ut},{source:"decrement"}),setTimeout(()=>{var wt;return He((wt=fe.current)==null?void 0:wt.value.length)},0)};const it=ye=>{x==null||x(ye),!(D||!q)&&(ye.key==="ArrowUp"&&(ye.preventDefault(),Ue.current()),ye.key==="ArrowDown"&&(ye.preventDefault(),yt.current()))},be=ye=>{if(T==null||T(ye),ye.key==="Backspace"){const ht=fe.current;ht.selectionStart===0&&ht.selectionStart===ht.selectionEnd&&(ye.preventDefault(),window.setTimeout(()=>He(0),0))}};YG(C,{increment:Ue.current,decrement:yt.current});const ke=ye=>{ye?Ue.current():yt.current(),ge.current+=1},ze=ye=>{if(ke(ye),le){const ht=typeof L=="number"?L:L(ge.current);de.current=window.setTimeout(()=>ze(ye),ht)}},ct=(ye,ht)=>{var bt;ye.preventDefault(),(bt=fe.current)==null||bt.focus(),ke(ht),le&&(de.current=window.setTimeout(()=>ze(ht),j))},Ot=()=>{de.current&&window.clearTimeout(de.current),de.current=null,ge.current=0},Ge=_.jsxs("div",{...W("controls"),children:[_.jsx(Ss,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof G=="number"&&d!==void 0&&G>=d,mod:{direction:"up"},onMouseDown:ye=>ye.preventDefault(),onPointerDown:ye=>{ct(ye,!0)},onPointerUp:Ot,onPointerLeave:Ot,children:_.jsx(Mue,{direction:"up"})}),_.jsx(Ss,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof G=="number"&&h!==void 0&&G<=h,mod:{direction:"down"},onMouseDown:ye=>ye.preventDefault(),onPointerDown:ye=>{ct(ye,!1)},onPointerUp:Ot,onPointerLeave:Ot,children:_.jsx(Mue,{direction:"down"})})]});return _.jsx(sf,{component:kQe,allowNegative:O,className:Bi(hz.root,r),size:$,...U,readOnly:D,disabled:k,value:G,getInputRef:ms(t,fe),onValueChange:Ie,rightSection:m||D?g:g||Ge,classNames:B,styles:H,unstyled:o,__staticSelector:"NumberInput",decimalScale:w?E:0,onKeyDown:it,onKeyDownCapture:be,rightSectionPointerEvents:R??(k?"none":void 0),rightSectionWidth:F??`var(--ni-right-section-width-${$||"sm"})`,allowLeadingZeros:z,onBlur:ye=>{if(b==null||b(ye),v==="blur"&&typeof G=="number"&&ch(G,h,d)!==G&&te(ch(G,h,d)),P&&typeof G=="string"){const ht=G.replace(/^0+/,""),bt=parseFloat(ht);te(Number.isNaN(bt)?ht:bt)}},isAllowed:ye=>v==="strict"?y?y(ye)&&Lue(ye.floatValue,h,d):Lue(ye.floatValue,h,d):y?y(ye):!0})});xK.classes={...sf.classes,...hz};xK.displayName="@mantine/core/NumberInput";const[$Qe,ixe]=_o("Progress.Root component was not found in tree");var Dk={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const MQe={},SK=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ProgressLabel",MQe,e),u=ixe();return _.jsx(_e,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});SK.classes=Dk;SK.displayName="@mantine/core/ProgressLabel";const LQe={},FQe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":rn(t,"progress-size"),"--progress-radius":n===void 0?void 0:ei(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),T6=Le((e,t)=>{const n=xe("ProgressRoot",LQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=vt({name:"Progress",classes:Dk,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:FQe});return _.jsx($Qe,{value:{getStyles:d,autoContrast:l},children:_.jsx(_e,{ref:t,...d("root"),...f})})});T6.classes=Dk;T6.displayName="@mantine/core/ProgressRoot";const BQe={withAria:!0},C6=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=xe("ProgressSection",BQe,e),p=ixe(),m=qs(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return _.jsx(_e,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":Zr(l,m),"--progress-label-color":iS(p.autoContrast,m)?qy({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});C6.classes=Dk;C6.displayName="@mantine/core/ProgressSection";const jQe={},hS=Le((e,t)=>{const n=xe("Progress",jQe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=ig({classNames:i,styles:s,props:n});return _.jsx(T6,{ref:t,classNames:d,styles:h,vars:o,...f,children:_.jsx(C6,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});hS.classes=Dk;hS.displayName="@mantine/core/Progress";hS.Section=C6;hS.Root=T6;hS.Label=SK;const[UQe,sxe]=rS(),[zQe,VQe]=rS();var oxe={card:"m_9dc8ae12"};const HQe={withBorder:!0},qQe=(e,{radius:t})=>({card:{"--card-radius":ei(t)}}),TK=Le((e,t)=>{const n=xe("RadioCard",HQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=vt({name:"RadioCard",classes:oxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:qQe,rootSelector:"card"}),{dir:v}=tp(),b=sxe(),w=typeof l=="boolean"?l:(b==null?void 0:b.value)===d||!1,E=p||(b==null?void 0:b.name),x=T=>{if(m==null||m(T),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(T.nativeEvent.code)){T.preventDefault();const C=Array.from(document.querySelectorAll(`[role="radio"][name="${E||"__mantine"}"]`)),A=C.findIndex(O=>O===T.target),k=A+1>=C.length?0:A+1,R=A-1<0?C.length-1:A-1;T.nativeEvent.code==="ArrowDown"&&(C[k].focus(),C[k].click()),T.nativeEvent.code==="ArrowUp"&&(C[R].focus(),C[R].click()),T.nativeEvent.code==="ArrowLeft"&&(C[v==="ltr"?R:k].focus(),C[v==="ltr"?R:k].click()),T.nativeEvent.code==="ArrowRight"&&(C[v==="ltr"?k:R].focus(),C[v==="ltr"?k:R].click())}};return _.jsx(zQe,{value:{checked:w},children:_.jsx(Ss,{ref:t,mod:[{"with-border":f,checked:w},c],...y("card"),...g,role:"radio","aria-checked":w,name:E,onClick:T=>{h==null||h(T),b==null||b.onChange(d||"")},onKeyDown:x})})});TK.displayName="@mantine/core/RadioCard";TK.classes=oxe;const WQe={},CK=Le((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=xe("RadioGroup",WQe,e),f=Da(u),[d,h]=Cs({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return _.jsx(UQe,{value:{value:d,onChange:p,size:s,name:f},children:_.jsx(vi.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:_.jsx(tK,{role:"radiogroup",children:a})})})});CK.classes=vi.Wrapper.classes;CK.displayName="@mantine/core/RadioGroup";function axe({size:e,style:t,...n}){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Ce(e),height:Ce(e),...t},"aria-hidden":!0,...n,children:_.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var uxe={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const GQe={icon:axe},YQe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=ep({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":rn(r,"radio-size"),"--radio-radius":t===void 0?void 0:ei(t),"--radio-color":s==="outline"?u:Zr(n,e),"--radio-icon-size":rn(r,"radio-icon-size"),"--radio-icon-color":i?Zr(i,e):iS(o,e)?qy({color:n,theme:e,autoContrast:o}):void 0}}},AK=Le((e,t)=>{const n=xe("RadioIndicator",GQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,b=l,w=vt({name:"RadioIndicator",classes:uxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:YQe,rootSelector:"indicator"}),E=VQe(),x=typeof p=="boolean"?p:(E==null?void 0:E.checked)||!1;return _.jsx(_e,{ref:t,...w("indicator",{variant:g}),variant:g,mod:[{checked:x,disabled:y},m],...v,children:_.jsx(b,{...w("icon")})})});AK.displayName="@mantine/core/RadioIndicator";AK.classes=uxe;var lxe={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const KQe={labelPosition:"right"},XQe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=ep({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":rn(t,"radio-size"),"--radio-radius":n===void 0?void 0:ei(n),"--radio-color":s==="outline"?u:Zr(r,e),"--radio-icon-color":i?Zr(i,e):iS(o,e)?qy({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":rn(t,"radio-icon-size")}}},tb=Le((e,t)=>{const n=xe("Radio",KQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:b,icon:w=axe,rootRef:E,iconColor:x,onChange:T,mod:C,...A}=n,k=vt({name:"Radio",classes:lxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:XQe}),R=sxe(),O=(R==null?void 0:R.size)??c,D=n.size?c:O,{styleProps:$,rest:F}=Wb(A),L=Da(l),j=R?{checked:R.value===F.value,name:F.name??R.name,onChange:z=>{R.onChange(z),T==null||T(z)}}:{};return _.jsx(s6,{...k("root"),__staticSelector:"Radio",__stylesApiProps:n,id:L,size:D,labelPosition:d,label:f,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":j.checked||void 0,variant:y,ref:E,mod:C,...$,...b,children:_.jsxs(_e,{...k("inner"),mod:{"label-position":d},children:[_.jsx(_e,{...k("radio",{focusable:!0,variant:y}),onChange:T,...F,...j,component:"input",mod:{error:!!p},ref:t,id:L,disabled:v,type:"radio"}),_.jsx(w,{...k("icon"),"aria-hidden":!0})]})})});tb.classes=lxe;tb.displayName="@mantine/core/Radio";tb.Group=CK;tb.Card=TK;tb.Indicator=AK;const QQe={duration:100,transition:"fade"};function JQe(e,t){return{...QQe,...t,...e}}function ZQe({offset:e,position:t}){const[n,r]=I.useState(!1),i=I.useRef(),{x:s,y:o,elements:a,refs:u,update:l,placement:c}=_Y({placement:t,middleware:[gY({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=I.useCallback(({clientX:p,clientY:m})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:m,left:p+f,top:m+d,right:p,bottom:m}}})},[a.reference]);return I.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const m=pm(u.floating.current);return m.forEach(g=>{g.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),m.forEach(g=>{g.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var A6={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const eJe={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:tf("popover")},tJe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:ei(t),"--tooltip-bg":n?Zr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),IK=Le((e,t)=>{const n=xe("TooltipFloating",eJe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,variant:b,vars:w,portalProps:E,...x}=n,T=qs(),C=vt({name:"TooltipFloating",props:n,classes:A6,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:w,varsResolver:tJe}),{handleMouseMove:A,x:k,y:R,opened:O,boundaryRef:D,floating:$,setOpened:F}=ZQe({offset:p,position:m});if(!Vy(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const L=ms(D,r.ref,t),j=q=>{var P,U;(U=(P=r.props).onMouseEnter)==null||U.call(P,q),A(q),F(!0)},z=q=>{var P,U;(U=(P=r.props).onMouseLeave)==null||U.call(P,q),F(!1)};return _.jsxs(_.Fragment,{children:[_.jsx(Tk,{...E,withinPortal:s,children:_.jsx(_e,{...x,...C("tooltip",{style:{...tY(o,T),zIndex:y,display:!v&&O?"block":"none",top:(R&&Math.round(R))??"",left:(k&&Math.round(k))??""}}),variant:b,ref:$,mod:{multiline:g},children:h})}),I.cloneElement(r,{...r.props,[i]:L,onMouseEnter:j,onMouseLeave:z})]})});IK.classes=A6;IK.displayName="@mantine/core/TooltipFloating";const cxe=I.createContext(!1),nJe=cxe.Provider,rJe=()=>I.useContext(cxe),iJe={openDelay:0,closeDelay:0};function fxe(e){const{openDelay:t,closeDelay:n,children:r}=xe("TooltipGroup",iJe,e);return _.jsx(nJe,{value:!0,children:_.jsx(rGe,{delay:{open:t,close:n},children:r})})}fxe.displayName="@mantine/core/TooltipGroup";function sJe(e){var x,T,C;const[t,n]=I.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=rJe(),o=Da(),{delay:a,currentId:u,setCurrentId:l}=Xwe(),c=I.useCallback(A=>{n(A),A&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=_Y({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[qwe(e.offset),gY({padding:8}),lz(),Wwe({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[cz()]:[]]}),{getReferenceProps:b,getFloatingProps:w}=cGe([nGe(h,{enabled:(x=e.events)==null?void 0:x.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((T=e.events)!=null&&T.touch)}),lGe(h,{enabled:(C=e.events)==null?void 0:C.focus,visibleOnly:!0}),dGe(h,{role:"tooltip"}),aGe(h,{enabled:typeof e.opened>"u"}),iGe(h,{id:o})]);rEe({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),Nm(()=>{var A;(A=e.onPositionChange)==null||A.call(e,g)},[g]);const E=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:w,getReferenceProps:b,isGroupPhase:E,opened:i,placement:g}}const Fue={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:tf("popover"),positionDependencies:[]},oJe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:ei(t),"--tooltip-bg":n?Zr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),ls=Le((e,t)=>{const n=xe("Tooltip",Fue,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:m,unstyled:g,style:y,className:v,withArrow:b,arrowSize:w,arrowOffset:E,arrowRadius:x,arrowPosition:T,offset:C,transitionProps:A,multiline:k,events:R,zIndex:O,disabled:D,positionDependencies:$,onClick:F,onMouseEnter:L,onMouseLeave:j,inline:z,variant:q,keepMounted:P,vars:U,portalProps:W,mod:B,floatingStrategy:H,...G}=xe("Tooltip",Fue,n),{dir:te}=tp(),le=I.useRef(null),fe=sJe({position:Qwe(te,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:R,arrowRef:le,arrowOffset:E,offset:typeof C=="number"?C+(b?w/2:0):C,positionDependencies:[...$,r],inline:z,strategy:H}),de=vt({name:"Tooltip",props:n,classes:A6,className:v,style:y,classNames:p,styles:m,unstyled:g,rootSelector:"tooltip",vars:U,varsResolver:oJe});if(!Vy(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const ge=ms(fe.reference,r.ref,t),Ie=JQe(A,{duration:100,transition:"fade"});return _.jsxs(_.Fragment,{children:[_.jsx(Tk,{...W,withinPortal:f,children:_.jsx(og,{...Ie,keepMounted:P,mounted:!D&&!!fe.opened,duration:fe.isGroupPhase?10:Ie.duration,children:pe=>_.jsxs(_e,{...G,variant:q,mod:[{multiline:k},B],...fe.getFloatingProps({ref:fe.floating,className:de("tooltip").className,style:{...de("tooltip").style,...pe,zIndex:O,top:fe.y??0,left:fe.x??0}}),children:[o,_.jsx(wY,{ref:le,arrowX:fe.arrowX,arrowY:fe.arrowY,visible:b,position:fe.placement,arrowSize:w,arrowOffset:E,arrowRadius:x,arrowPosition:T,...de("arrow")})]})})}),I.cloneElement(r,fe.getReferenceProps({onClick:F,onMouseEnter:L,onMouseLeave:j,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:ge,className:Bi(v,r.props.className),...r.props}))]})});ls.classes=A6;ls.displayName="@mantine/core/Tooltip";ls.Floating=IK;ls.Group=fxe;var dxe={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const aJe={withItemsBorders:!0},uJe=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:ei(t),"--sc-color":n?Zr(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":rn(i,"sc-padding"),"--sc-font-size":mo(i)}}),kK=Le((e,t)=>{var te,le;const n=xe("SegmentedControl",aJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:v,radius:b,color:w,transitionDuration:E,transitionTimingFunction:x,variant:T,autoContrast:C,withItemsBorders:A,mod:k,...R}=n,O=vt({name:"SegmentedControl",props:n,classes:dxe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:uJe}),D=qs(),$=l.map(fe=>typeof fe=="string"?{label:fe,value:fe}:fe),F=hHe(),[L,j]=I.useState(null),[z,q]=I.useState({}),P=(fe,de)=>{z[de]=fe,q(z)},[U,W]=Cs({value:c,defaultValue:f,finalValue:Array.isArray(l)?((te=$.find(fe=>!fe.disabled))==null?void 0:te.value)??((le=l[0])==null?void 0:le.value)??null:null,onChange:d}),B=Da(p),H=$.map(fe=>I.createElement(_e,{...O("control"),mod:{active:U===fe.value,orientation:v},key:fe.value},I.createElement("input",{...O("input"),disabled:m||fe.disabled,type:"radio",name:B,value:fe.value,id:`${B}-${fe.value}`,checked:U===fe.value,onChange:()=>!g&&W(fe.value),"data-focus-ring":D.focusRing,key:`${fe.value}-input`}),I.createElement(_e,{component:"label",...O("label"),mod:{active:U===fe.value&&!(m||fe.disabled),disabled:m||fe.disabled,"read-only":g},htmlFor:`${B}-${fe.value}`,ref:de=>P(de,fe.value),__vars:{"--sc-label-color":w!==void 0?qy({color:w,theme:D,autoContrast:C}):void 0},key:`${fe.value}-label`},_.jsx("span",{...O("innerLabel"),children:fe.label})))),G=ms(t,fe=>j(fe));return l.length===0?null:_.jsxs(_e,{...O("root"),variant:T,size:h,ref:G,mod:[{"full-width":y,orientation:v,initialized:F,"with-items-borders":A},k],...R,role:"radiogroup",children:[typeof U=="string"&&_.jsx(NY,{target:z[U],parent:L,component:"span",transitionDuration:"var(--sc-transition-duration)",...O("indicator")}),H]})});kK.classes=dxe;kK.displayName="@mantine/core/SegmentedControl";const lJe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},Pk=Le((e,t)=>{const n=xe("Select",lJe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:b,comboboxProps:w,readOnly:E,disabled:x,filter:T,limit:C,withScrollArea:A,maxDropdownHeight:k,size:R,searchable:O,rightSection:D,checkIconPosition:$,withCheckIcon:F,nothingFoundMessage:L,name:j,form:z,searchValue:q,defaultSearchValue:P,onSearchChange:U,allowDeselect:W,error:B,rightSectionPointerEvents:H,id:G,clearable:te,clearButtonProps:le,hiddenInputProps:fe,renderOption:de,onClear:ge,autoComplete:Ie,scrollAreaProps:pe,...He}=n,Ue=I.useMemo(()=>_Ee(m),[m]),yt=I.useMemo(()=>zY(Ue),[Ue]),it=Da(G),[be,ke,ze]=Cs({value:g,defaultValue:y,finalValue:null,onChange:p}),ct=typeof be=="string"?yt[be]:void 0,[Ot,Ge]=Cs({value:q,defaultValue:P,finalValue:ct?ct.label:"",onChange:U}),ye=ZY({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),ye.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),ye.resetSelectedOption()}}),{resolvedClassNames:ht,resolvedStyles:bt}=ig({props:n,styles:i,classNames:r});I.useEffect(()=>{v&&ye.selectFirstOption()},[v,be]),I.useEffect(()=>{g===null&&Ge(""),typeof g=="string"&&ct&&Ge(ct.label)},[g,ct]);const me=te&&!!be&&!x&&!E&&_.jsx(Qn.ClearButton,{size:R,...le,onClear:()=>{ke(null,null),Ge(""),ge==null||ge()}});return _.jsxs(_.Fragment,{children:[_.jsxs(Qn,{store:ye,__staticSelector:"Select",classNames:ht,styles:bt,unstyled:s,readOnly:E,onOptionSubmit:Ae=>{b==null||b(Ae);const qe=W&&yt[Ae].value===be?null:yt[Ae],ut=qe?qe.value:null;ke(ut,qe),!ze&&Ge(typeof ut=="string"&&(qe==null?void 0:qe.label)||""),ye.closeDropdown()},size:R,...w,children:[_.jsx(Qn.Target,{targetType:O?"input":"button",autoComplete:Ie,children:_.jsx(sf,{id:it,ref:t,rightSection:D||me||_.jsx(Qn.Chevron,{size:R,error:B,unstyled:s}),rightSectionPointerEvents:H||(me?"all":"none"),...He,size:R,__staticSelector:"Select",disabled:x,readOnly:E||!O,value:Ot,onChange:Ae=>{Ge(Ae.currentTarget.value),ye.openDropdown(),v&&ye.selectFirstOption()},onFocus:Ae=>{O&&ye.openDropdown(),f==null||f(Ae)},onBlur:Ae=>{var qe;O&&ye.closeDropdown(),Ge(be!=null&&((qe=yt[be])==null?void 0:qe.label)||""),d==null||d(Ae)},onClick:Ae=>{O?ye.openDropdown():ye.toggleDropdown(),h==null||h(Ae)},classNames:ht,styles:bt,unstyled:s,pointer:!O,error:B})}),_.jsx(FEe,{data:Ue,hidden:E||x,filter:T,search:Ot,limit:C,hiddenWhenEmpty:!O||!L,withScrollArea:A,maxDropdownHeight:k,filterOptions:O&&(ct==null?void 0:ct.label)!==Ot,value:be,checkIconPosition:$,withCheckIcon:F,nothingFoundMessage:L,unstyled:s,labelId:He.label?`${it}-label`:void 0,"aria-label":He.label?void 0:He["aria-label"],renderOption:de,scrollAreaProps:pe})]}),_.jsx(Qn.HiddenInput,{value:be,name:j,form:z,disabled:x,...fe})]})});Pk.classes={...sf.classes,...Qn.classes};Pk.displayName="@mantine/core/Select";const[hxe,I6]=_o("SliderProvider was not found in tree"),RK=I.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=I6();return _.jsx(_e,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});RK.displayName="@mantine/core/SliderRoot";const _$=I.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=I6(),[b,w]=I.useState(!1),E=l||s||b||h&&p;return _.jsxs(_e,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{w(!0),typeof f=="function"&&f()},onBlur:()=>{w(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:x=>x.stopPropagation(),children:[m,_.jsx(og,{mounted:i!=null&&!!E,transition:"fade",duration:0,...u,children:x=>_.jsx("div",{...v("label",{style:x}),children:i})})]})});_$.displayName="@mantine/core/SliderThumb";function w$({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function cJe({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function pxe({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=I6();if(!e)return null;const u=e.map((l,c)=>I.createElement(_e,{...a("markWrapper"),__vars:{"--mark-offset":`${w$({value:l.value,min:t,max:n})}%`},key:c},_.jsx(_e,{...a("mark"),mod:{filled:cJe({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&_.jsx("div",{...a("markLabel"),children:l.label})));return _.jsx("div",{children:u})}pxe.displayName="@mantine/core/SliderMarks";function NK({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=I6();return _.jsx(_.Fragment,{children:_.jsx(_e,{...u("trackContainer"),mod:{disabled:r},...o,children:_.jsxs(_e,{...u("track"),mod:{inverted:s,disabled:r},children:[_.jsx(_e,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,_.jsx(pxe,{...a,offset:i,disabled:r,inverted:s})]})})})}NK.displayName="@mantine/core/SliderTrack";function pz({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function wc(e,t){return parseFloat(e.toFixed(t))}function mxe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var k6={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const fJe={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},dJe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":rn(t,"slider-size"),"--slider-color":n?Zr(n,e):void 0,"--slider-radius":i===void 0?void 0:ei(i),"--slider-thumb-size":r!==void 0?Ce(r):"calc(var(--slider-size) * 2)"}}),R6=Le((e,t)=>{const n=xe("Slider",fJe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,thumbChildren:E,disabled:x,unstyled:T,scale:C,inverted:A,className:k,style:R,vars:O,hiddenInputProps:D,...$}=n,F=vt({name:"Slider",props:n,classes:k6,classNames:r,className:k,styles:i,style:R,vars:O,varsResolver:dJe,unstyled:T}),{dir:L}=tp(),[j,z]=I.useState(!1),[q,P]=Cs({value:typeof s=="number"?ch(s,l,c):s,defaultValue:typeof h=="number"?ch(h,l,c):h,finalValue:ch(0,l,c),onChange:o}),U=I.useRef(q),W=I.useRef(),B=I.useRef(),H=w$({value:q,min:l,max:c}),G=C(q),te=typeof g=="function"?g(G):g,le=d??mxe(f),fe=I.useCallback(({x:pe})=>{if(!x){const He=pz({value:pe,min:l,max:c,step:f,precision:le});P(He),U.current=He}},[x,l,c,f,le,P]),{ref:de,active:ge}=lwe(fe,{onScrubEnd:()=>a==null?void 0:a(U.current)},L),Ie=pe=>{var He,Ue,yt,it,be,ke;if(!x)switch(pe.key){case"ArrowUp":{pe.preventDefault(),(He=B.current)==null||He.focus();const ze=wc(Math.min(Math.max(q+f,l),c),le);P(ze),a==null||a(ze);break}case"ArrowRight":{pe.preventDefault(),(Ue=B.current)==null||Ue.focus();const ze=wc(Math.min(Math.max(L==="rtl"?q-f:q+f,l),c),le);P(ze),a==null||a(ze);break}case"ArrowDown":{pe.preventDefault(),(yt=B.current)==null||yt.focus();const ze=wc(Math.min(Math.max(q-f,l),c),le);P(ze),a==null||a(ze);break}case"ArrowLeft":{pe.preventDefault(),(it=B.current)==null||it.focus();const ze=wc(Math.min(Math.max(L==="rtl"?q+f:q-f,l),c),le);P(ze),a==null||a(ze);break}case"Home":{pe.preventDefault(),(be=B.current)==null||be.focus(),P(l),a==null||a(l);break}case"End":{pe.preventDefault(),(ke=B.current)==null||ke.focus(),P(c),a==null||a(c);break}}};return _.jsx(hxe,{value:{getStyles:F},children:_.jsxs(RK,{...$,ref:ms(t,W),onKeyDownCapture:Ie,onMouseDownCapture:()=>{var pe;return(pe=W.current)==null?void 0:pe.focus()},size:u,disabled:x,children:[_.jsx(NK,{inverted:A,offset:0,filled:H,marks:m,min:l,max:c,value:G,disabled:x,containerProps:{ref:de,onMouseEnter:w?()=>z(!0):void 0,onMouseLeave:w?()=>z(!1):void 0},children:_.jsx(_$,{max:c,min:l,value:G,position:H,dragging:ge,label:te,ref:B,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,isHovered:j,disabled:x,children:E})}),_.jsx("input",{type:"hidden",name:p,value:G,...D})]})})});R6.classes=k6;R6.displayName="@mantine/core/Slider";function hJe(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const pJe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":rn(t,"slider-size"),"--slider-color":n?Zr(n,e):void 0,"--slider-radius":i===void 0?void 0:ei(i),"--slider-thumb-size":r!==void 0?Ce(r):"calc(var(--slider-size) * 2)"}}),mJe={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},E$=Le((e,t)=>{const n=xe("RangeSlider",mJe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransitionProps:b,labelAlwaysOn:w,thumbFromLabel:E,thumbToLabel:x,showLabelOnHover:T,thumbChildren:C,disabled:A,unstyled:k,scale:R,inverted:O,className:D,style:$,vars:F,hiddenInputProps:L,...j}=n,z=vt({name:"Slider",props:n,classes:k6,classNames:r,className:D,styles:i,style:$,vars:F,varsResolver:pJe,unstyled:k}),{dir:q}=tp(),[P,U]=I.useState(-1),[W,B]=I.useState(!1),[H,G]=Cs({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),te=I.useRef(H),le=I.useRef([]),fe=I.useRef(void 0),de=[w$({value:H[0],min:l,max:c}),w$({value:H[1],min:l,max:c})],ge=p??mxe(h),Ie=Ge=>{G(Ge),te.current=Ge};I.useEffect(()=>{Array.isArray(s)&&(te.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const pe=(Ge,ye,ht)=>{const bt=[...te.current];bt[ye]=Ge,ye===0&&(Ge>bt[1]-(f-1e-9)&&(bt[1]=Math.min(Ge+f,c)),Ge>(c-(f-1e-9)||l)&&(bt[ye]=te.current[ye]),bt[1]-Ge>d&&(bt[1]=Ge+d)),ye===1&&(Ge<bt[0]+f&&(bt[0]=Math.max(Ge-f,l)),Ge<bt[0]+f&&(bt[ye]=te.current[ye]),Ge-bt[0]>d&&(bt[0]=Ge-d)),bt[0]=wc(bt[0],ge),bt[1]=wc(bt[1],ge),Ie(bt),ht&&(a==null||a(te.current))},He=Ge=>{if(!A){const ye=pz({value:Ge,min:l,max:c,step:h,precision:ge});pe(ye,fe.current,!1)}},{ref:Ue,active:yt}=lwe(({x:Ge})=>He(Ge),{onScrubEnd:()=>a==null?void 0:a(te.current)},q);function it(Ge){fe.current=Ge}const be=Ge=>{Ue.current.focus();const ye=Ue.current.getBoundingClientRect(),ht=hJe(Ge.nativeEvent),bt=pz({value:ht-ye.left,max:c,min:l,step:h,containerWidth:ye.width}),me=Math.abs(H[0]-bt)>Math.abs(H[1]-bt)?1:0,Ae=q==="ltr"?me:me===1?0:1;fe.current=Ae},ke=()=>P!==1&&P!==0?(U(0),0):P,ze=Ge=>{if(!A)switch(Ge.key){case"ArrowUp":{Ge.preventDefault();const ye=ke();le.current[ye].focus(),pe(wc(Math.min(Math.max(te.current[ye]+h,l),c),ge),ye,!0);break}case"ArrowRight":{Ge.preventDefault();const ye=ke();le.current[ye].focus(),pe(wc(Math.min(Math.max(q==="rtl"?te.current[ye]-h:te.current[ye]+h,l),c),ge),ye,!0);break}case"ArrowDown":{Ge.preventDefault();const ye=ke();le.current[ye].focus(),pe(wc(Math.min(Math.max(te.current[ye]-h,l),c),ge),ye,!0);break}case"ArrowLeft":{Ge.preventDefault();const ye=ke();le.current[ye].focus(),pe(wc(Math.min(Math.max(q==="rtl"?te.current[ye]+h:te.current[ye]-h,l),c),ge),ye,!0);break}}},ct={max:c,min:l,size:u,labelTransitionProps:b,labelAlwaysOn:w,onBlur:()=>U(-1)},Ot=Array.isArray(C);return _.jsx(hxe,{value:{getStyles:z},children:_.jsxs(RK,{...j,size:u,ref:t,disabled:A,children:[_.jsxs(NK,{offset:de[0],marksOffset:H[0],filled:de[1]-de[0],marks:y,inverted:O,min:l,max:c,value:H[1],disabled:A,containerProps:{ref:Ue,onMouseEnter:T?()=>B(!0):void 0,onMouseLeave:T?()=>B(!1):void 0,onTouchStartCapture:be,onTouchEndCapture:()=>{fe.current=-1},onMouseDownCapture:be,onMouseUpCapture:()=>{fe.current=-1},onKeyDownCapture:ze},children:[_.jsx(_$,{...ct,value:R(H[0]),position:de[0],dragging:yt,label:typeof v=="function"?v(wc(R(H[0]),ge)):v,ref:Ge=>{le.current[0]=Ge},thumbLabel:E,onMouseDown:()=>it(0),onFocus:()=>U(0),showLabelOnHover:T,isHovered:W,disabled:A,children:Ot?C[0]:C}),_.jsx(_$,{...ct,thumbLabel:x,value:R(H[1]),position:de[1],dragging:yt,label:typeof v=="function"?v(wc(R(H[1]),ge)):v,ref:Ge=>{le.current[1]=Ge},onMouseDown:()=>it(1),onFocus:()=>U(1),showLabelOnHover:T,isHovered:W,disabled:A,children:Ot?C[1]:C})]}),_.jsx("input",{type:"hidden",name:`${g}_from`,value:H[0],...L}),_.jsx("input",{type:"hidden",name:`${g}_to`,value:H[1],...L})]})})});E$.classes=k6;E$.displayName="@mantine/core/RangeSlider";const gJe={},Bc=Le((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=xe("Space",gJe,e);return _.jsx(_e,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});Bc.displayName="@mantine/core/Space";var gxe={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const yJe={maxHeight:100,initialState:!1},vJe=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),DK=Le((e,t)=>{const n=xe("Spoiler",yJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,...y}=n,v=vt({name:"Spoiler",classes:gxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:vJe}),b=Da(g),w=`${b}-region`,[E,x]=I.useState(l),{ref:T,height:C}=oHe(),A=E?f:d,k=A!==null&&c<C;return _.jsxs(_e,{...v("root"),id:b,ref:t,"data-has-spoiler":k||void 0,...y,children:[k&&_.jsx(uS,{component:"button",type:"button",ref:p,onClick:()=>x(R=>!R),"aria-expanded":E,"aria-controls":w,...v("control"),children:A}),_.jsx("div",{...v("content",{style:{maxHeight:E?C?Ce(C):void 0:Ce(c)}}),"data-reduce-motion":!0,role:"region",id:w,children:_.jsx("div",{ref:T,children:h})})]})});DK.classes=gxe;DK.displayName="@mantine/core/Spoiler";var yxe={root:"m_6d731127"};const bJe={gap:"md",align:"stretch",justify:"flex-start"},_Je=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":ql(t),"--stack-align":n,"--stack-justify":r}}),fh=Le((e,t)=>{const n=xe("Stack",bJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=vt({name:"Stack",props:n,classes:yxe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_Je});return _.jsx(_e,{ref:t,...p("root"),variant:d,...h})});fh.classes=yxe;fh.displayName="@mantine/core/Stack";const vxe=I.createContext(null),wJe=vxe.Provider,EJe=()=>I.useContext(vxe),xJe={},PK=Le((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=xe("SwitchGroup",xJe,e),[c,f]=Cs({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(wJe,{value:{value:c,onChange:d,size:s},children:_.jsx(vi.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:_.jsx(tK,{role:"group",children:a})})})});PK.classes=vi.Wrapper.classes;PK.displayName="@mantine/core/SwitchGroup";var bxe={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const SJe={labelPosition:"right"},TJe=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:ei(t),"--switch-height":rn(r,"switch-height"),"--switch-width":rn(r,"switch-width"),"--switch-thumb-size":rn(r,"switch-thumb-size"),"--switch-label-font-size":rn(r,"switch-label-font-size"),"--switch-track-label-padding":rn(r,"switch-track-label-padding"),"--switch-color":n?Zr(n,e):void 0}}),tE=Le((e,t)=>{const n=xe("Switch",SJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,children:y,thumbIcon:v,checked:b,defaultChecked:w,onChange:E,labelPosition:x,description:T,error:C,disabled:A,variant:k,rootRef:R,mod:O,...D}=n,$=EJe(),F=p||($==null?void 0:$.size),L=vt({name:"Switch",props:n,classes:bxe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:TJe}),{styleProps:j,rest:z}=Wb(D),q=Da(h),P=$?{checked:$.value.includes(z.value),onChange:$.onChange}:{},[U,W]=Cs({value:P.checked??b,defaultValue:w,finalValue:!1});return _.jsxs(s6,{...L("root"),__staticSelector:"Switch",__stylesApiProps:n,id:q,size:F,labelPosition:x,label:c,description:T,error:C,disabled:A,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":P.checked||void 0,variant:k,ref:R,mod:O,...j,...g,children:[_.jsx("input",{...z,disabled:A,checked:U,onChange:B=>{var H;$?(H=P.onChange)==null||H.call(P,B):E==null||E(B),W(B.currentTarget.checked)},id:q,ref:t,type:"checkbox",role:"switch",...L("input")}),_.jsxs(_e,{"aria-hidden":"true",mod:{error:C,"label-position":x},...L("track"),children:[_.jsx(_e,{component:"span",mod:"reduce-motion",...L("thumb"),children:v}),_.jsx("span",{...L("trackLabel"),children:U?d:f})]})]})});tE.classes={...bxe,...AEe};tE.displayName="@mantine/core/Switch";tE.Group=PK;const[CJe,AJe]=_o("Table component was not found in the tree");var Ok={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function IJe(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function Xb(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=Le((i,s)=>{const o=xe(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=AJe();return _.jsx(_e,{component:e,ref:s,...IJe(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=Ok,r}const mz=Xb("th",{columnBorder:!0}),_xe=Xb("td",{columnBorder:!0}),$P=Xb("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),wxe=Xb("thead",{stickyHeader:!0}),Exe=Xb("tbody"),xxe=Xb("tfoot"),Sxe=Xb("caption",{captionSide:!0});function OK({data:e}){return _.jsxs(_.Fragment,{children:[e.caption&&_.jsx(Sxe,{children:e.caption}),e.head&&_.jsx(wxe,{children:_.jsx($P,{children:e.head.map((t,n)=>_.jsx(mz,{children:t},n))})}),e.body&&_.jsx(Exe,{children:e.body.map((t,n)=>_.jsx($P,{children:t.map((r,i)=>_.jsx(_xe,{children:r},i))},n))}),e.foot&&_.jsx(xxe,{children:_.jsx($P,{children:e.foot.map((t,n)=>_.jsx(mz,{children:t},n))})})]})}OK.displayName="@mantine/core/TableDataRenderer";const kJe={type:"scrollarea"},RJe=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":Ce(t),"--table-overflow":n==="native"?"auto":void 0}}),$K=Le((e,t)=>{const n=xe("TableScrollContainer",kJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=vt({name:"TableScrollContainer",classes:Ok,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:RJe,rootSelector:"scrollContainer"});return _.jsx(_e,{component:f==="scrollarea"?Gb:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:_.jsx("div",{...h("scrollContainerInner"),children:l})})});$K.classes=Ok;$K.displayName="@mantine/core/TableScrollContainer";const NJe={withRowBorders:!0,verticalSpacing:7},DJe=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":ql(r),"--table-vertical-spacing":ql(i),"--table-border-color":s?Zr(s,e):void 0,"--table-striped-color":u&&o?Zr(o,e):void 0,"--table-highlight-on-hover-color":l&&a?Zr(a,e):void 0,"--table-sticky-header-offset":f?Ce(c):void 0}}),kn=Le((e,t)=>{const n=xe("Table",NJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:b,layout:w,variant:E,data:x,children:T,stickyHeader:C,stickyHeaderOffset:A,mod:k,...R}=n,O=vt({name:"Table",props:n,className:i,style:s,classes:Ok,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:DJe});return _.jsx(CJe,{value:{getStyles:O,stickyHeader:C,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:_.jsx(_e,{component:"table",variant:E,ref:t,mod:[{"data-with-table-border":v},k],...O("table"),...R,children:T||!!x&&_.jsx(OK,{data:x})})})});kn.classes=Ok;kn.displayName="@mantine/core/Table";kn.Td=_xe;kn.Th=mz;kn.Tr=$P;kn.Thead=wxe;kn.Tbody=Exe;kn.Tfoot=xxe;kn.Caption=Sxe;kn.ScrollContainer=$K;kn.DataRenderer=OK;const[PJe,MK]=_o("Tabs component was not found in the tree");var $k={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const OJe={},LK=Le((e,t)=>{const n=xe("TabsList",OJe,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=MK();return _.jsx(_e,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});LK.classes=$k;LK.displayName="@mantine/core/TabsList";const $Je={},FK=Le((e,t)=>{const n=xe("TabsPanel",$Je,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=MK(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return _.jsx(_e,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});FK.classes=$k;FK.displayName="@mantine/core/TabsPanel";const MJe={},BK=Le((e,t)=>{const n=xe("TabsTab",MJe,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=qs(),{dir:b}=tp(),w=MK(),E=a===w.value,x=C=>{w.onChange(w.allowTabDeactivation&&a===w.value?null:a),u==null||u(C)},T={classNames:h,styles:p,props:n};return _.jsxs(Ss,{...y,...w.getStyles("tab",{className:r,style:d,variant:w.variant,...T}),disabled:c,unstyled:w.unstyled,variant:w.variant,mod:[{active:E,disabled:c,orientation:w.orientation,inverted:w.inverted,placement:w.orientation==="vertical"&&w.placement},g],ref:t,role:"tab",id:w.getTabId(a),"aria-selected":E,tabIndex:E||w.value===null?0:-1,"aria-controls":w.getPanelId(a),onClick:x,__vars:{"--tabs-color":f?Zr(f,v):void 0},onKeyDown:qG({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:w.activateTabWithKeyboard,loop:w.loop,orientation:w.orientation||"horizontal",dir:b,onKeyDown:l}),children:[o&&_.jsx("span",{...w.getStyles("tabSection",T),"data-position":"left",children:o}),i&&_.jsx("span",{...w.getStyles("tabLabel",T),children:i}),s&&_.jsx("span",{...w.getStyles("tabSection",T),"data-position":"right",children:s})]})});BK.classes=$k;BK.displayName="@mantine/core/TabsTab";const Bue="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",LJe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},FJe=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":ei(t),"--tabs-color":Zr(n,e),"--tabs-text-color":iS(r,e)?qy({color:n,theme:e,autoContrast:r}):void 0}}),os=Le((e,t)=>{const n=xe("Tabs",LJe,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:b,unstyled:w,className:E,style:x,vars:T,autoContrast:C,mod:A,...k}=n,R=Da(l),[O,D]=Cs({value:i,defaultValue:r,finalValue:null,onChange:s}),$=vt({name:"Tabs",props:n,classes:$k,className:E,style:x,classNames:v,styles:b,unstyled:w,vars:T,varsResolver:FJe});return _.jsx(PJe,{value:{placement:g,value:O,orientation:o,id:R,loop:u,activateTabWithKeyboard:c,getTabId:f$(`${R}-tab`,Bue),getPanelId:f$(`${R}-panel`,Bue),onChange:D,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:w,getStyles:$},children:_.jsx(_e,{ref:t,id:R,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},A],...$("root"),...k,children:a})})});os.classes=$k;os.displayName="@mantine/core/Tabs";os.Tab=BK;os.Panel=FK;os.List=LK;const BJe={},$1=Le((e,t)=>{const n=xe("TextInput",BJe,e);return _.jsx(sf,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});$1.classes=sf.classes;$1.displayName="@mantine/core/TextInput";const jJe=["h1","h2","h3","h4","h5","h6"];function UJe(e,t){const n=t!==void 0?t:`h${e}`;return jJe.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:Ce(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var Txe={root:"m_8a5d1357"};const zJe={order:1},VJe=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=UJe(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},$i=Le((e,t)=>{const n=xe("Title",zJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=vt({name:"Title",props:n,classes:Txe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:VJe});return[1,2,3,4,5,6].includes(u)?_.jsx(_e,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});$i.classes=Txe;$i.displayName="@mantine/core/Title";const Cxe=I.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),Is=()=>I.useContext(Cxe);function HJe({children:e}){const[t,n]=qt.useState(void 0),r=qt.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return _.jsx(Cxe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function H2(){return H2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H2.apply(this,arguments)}var f0;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(f0||(f0={}));const jue="popstate";function qJe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return gz("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Ixe(i)}return GJe(t,n,null,e)}function fs(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Axe(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function WJe(){return Math.random().toString(36).substr(2,8)}function Uue(e,t){return{usr:e.state,key:e.key,idx:t}}function gz(e,t,n,r){return n===void 0&&(n=null),H2({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?pS(t):t,{state:n,key:t&&t.key||r||WJe()})}function Ixe(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function pS(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function GJe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=f0.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(H2({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=f0.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=f0.Push;let v=gz(m.location,g,y);l=c()+1;let b=Uue(v,l),w=m.createHref(v);try{o.pushState(b,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(w)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=f0.Replace;let v=gz(m.location,g,y);l=c();let b=Uue(v,l),w=m.createHref(v);o.replaceState(b,"",w),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:Ixe(g);return v=v.replace(/ $/,"%20"),fs(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(jue,f),u=g,()=>{i.removeEventListener(jue,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var zue;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(zue||(zue={}));function YJe(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?pS(t):t,i=Nxe(r.pathname||"/",n);if(i==null)return null;let s=kxe(e);KJe(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=aZe(i);o=iZe(s[a],u)}return o}function kxe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(fs(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=D0([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(fs(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),kxe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:nZe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of Rxe(s.path))i(s,o,u)}),t}function Rxe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Rxe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function KJe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:rZe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const XJe=/^:[\w-]+$/,QJe=3,JJe=2,ZJe=1,eZe=10,tZe=-2,Vue=e=>e==="*";function nZe(e,t){let n=e.split("/"),r=n.length;return n.some(Vue)&&(r+=tZe),t&&(r+=JJe),n.filter(i=>!Vue(i)).reduce((i,s)=>i+(XJe.test(s)?QJe:s===""?ZJe:eZe),r)}function rZe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function iZe(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=sZe({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:D0([i,c.pathname]),pathnameBase:fZe(D0([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=D0([i,c.pathnameBase]))}return s}function sZe(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=oZe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function oZe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Axe(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function aZe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Axe(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Nxe(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function uZe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?pS(e):e;return{pathname:n?n.startsWith("/")?n:lZe(n,t):t,search:dZe(r),hash:hZe(i)}}function lZe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Gj(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function cZe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function jK(e,t){let n=cZe(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function UK(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=pS(e):(i=H2({},e),fs(!i.pathname||!i.pathname.includes("?"),Gj("?","pathname","search",i)),fs(!i.pathname||!i.pathname.includes("#"),Gj("#","pathname","hash",i)),fs(!i.search||!i.search.includes("#"),Gj("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=uZe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const D0=e=>e.join("/").replace(/\/\/+/g,"/"),fZe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),dZe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,hZe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function pZe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Dxe=["post","put","patch","delete"];new Set(Dxe);const mZe=["get",...Dxe];new Set(mZe);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function q2(){return q2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q2.apply(this,arguments)}const zK=I.createContext(null),gZe=I.createContext(null),Qb=I.createContext(null),N6=I.createContext(null),rp=I.createContext({outlet:null,matches:[],isDataRoute:!1}),Pxe=I.createContext(null);function Oxe(e,t){let{relative:n}={};mS()||fs(!1);let{basename:r,navigator:i}=I.useContext(Qb),{hash:s,pathname:o,search:a}=_Ze(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:D0([r,o])),i.createHref({pathname:u,search:a,hash:s})}function mS(){return I.useContext(N6)!=null}function Jb(){return mS()||fs(!1),I.useContext(N6).location}function $xe(e){I.useContext(Qb).static||I.useLayoutEffect(e)}function dg(){let{isDataRoute:e}=I.useContext(rp);return e?NZe():yZe()}function yZe(){mS()||fs(!1);let e=I.useContext(zK),{basename:t,future:n,navigator:r}=I.useContext(Qb),{matches:i}=I.useContext(rp),{pathname:s}=Jb(),o=JSON.stringify(jK(i,n.v7_relativeSplatPath)),a=I.useRef(!1);return $xe(()=>{a.current=!0}),I.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=UK(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:D0([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const vZe=I.createContext(null);function bZe(e){let t=I.useContext(rp).outlet;return t&&I.createElement(vZe.Provider,{value:e},t)}function nb(){let{matches:e}=I.useContext(rp),t=e[e.length-1];return t?t.params:{}}function _Ze(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=I.useContext(Qb),{matches:i}=I.useContext(rp),{pathname:s}=Jb(),o=JSON.stringify(jK(i,r.v7_relativeSplatPath));return I.useMemo(()=>UK(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function Mxe(e,t){return wZe(e,t)}function wZe(e,t,n,r){mS()||fs(!1);let{navigator:i}=I.useContext(Qb),{matches:s}=I.useContext(rp),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=Jb(),c;if(t){var f;let g=typeof t=="string"?pS(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||fs(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=YJe(e,{pathname:h}),m=CZe(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:D0([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:D0([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?I.createElement(N6.Provider,{value:{location:q2({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:f0.Pop}},m):m}function EZe(){let e=RZe(),t=pZe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},t),n?I.createElement("pre",{style:i},n):null,null)}const xZe=I.createElement(EZe,null);class SZe extends I.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?I.createElement(rp.Provider,{value:this.props.routeContext},I.createElement(Pxe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function TZe(e){let{routeContext:t,match:n,children:r}=e,i=I.useContext(zK);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(rp.Provider,{value:t},r)}function CZe(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||fs(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||xZe,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),v=()=>{let b;return h?b=m:p?b=g:f.route.Component?b=I.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,I.createElement(TZe,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?I.createElement(SZe,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var Lxe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Lxe||{}),x$=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(x$||{});function AZe(e){let t=I.useContext(zK);return t||fs(!1),t}function IZe(e){let t=I.useContext(gZe);return t||fs(!1),t}function kZe(e){let t=I.useContext(rp);return t||fs(!1),t}function Fxe(e){let t=kZe(),n=t.matches[t.matches.length-1];return n.route.id||fs(!1),n.route.id}function RZe(){var e;let t=I.useContext(Pxe),n=IZe(x$.UseRouteError),r=Fxe(x$.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function NZe(){let{router:e}=AZe(Lxe.UseNavigateStable),t=Fxe(x$.UseNavigateStable),n=I.useRef(!1);return $xe(()=>{n.current=!0}),I.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,q2({fromRouteId:t},s)))},[e,t])}function VK(e){let{to:t,replace:n,state:r,relative:i}=e;mS()||fs(!1);let{future:s,static:o}=I.useContext(Qb),{matches:a}=I.useContext(rp),{pathname:u}=Jb(),l=dg(),c=UK(t,jK(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return I.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function DZe(e){return bZe(e.context)}function Mp(e){fs(!1)}function PZe(e){let{basename:t="/",children:n=null,location:r,navigationType:i=f0.Pop,navigator:s,static:o=!1,future:a}=e;mS()&&fs(!1);let u=t.replace(/^\/*/,"/"),l=I.useMemo(()=>({basename:u,navigator:s,static:o,future:q2({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=pS(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=I.useMemo(()=>{let g=Nxe(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:I.createElement(Qb.Provider,{value:l},I.createElement(N6.Provider,{children:n,value:m}))}function OZe(e){let{children:t,location:n}=e;return Mxe(yz(t),n)}new Promise(()=>{});function yz(e,t){t===void 0&&(t=[]);let n=[];return I.Children.forEach(e,(r,i)=>{if(!I.isValidElement(r))return;let s=[...t,i];if(r.type===I.Fragment){n.push.apply(n,yz(r.props.children,s));return}r.type!==Mp&&fs(!1),!r.props.index||!r.props.children||fs(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=yz(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vz(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function $Ze(e,t){let n=vz(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const MZe="6";try{window.__reactRouterVersion=MZe}catch{}const LZe="startTransition",Hue=BO[LZe];function FZe(e){let{basename:t,children:n,future:r,window:i}=e,s=I.useRef();s.current==null&&(s.current=qJe({window:i,v5Compat:!0}));let o=s.current,[a,u]=I.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=I.useCallback(f=>{l&&Hue?Hue(()=>u(f)):u(f)},[u,l]);return I.useLayoutEffect(()=>o.listen(c),[o,c]),I.createElement(PZe,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var que;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(que||(que={}));var Wue;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Wue||(Wue={}));function HK(e){let t=I.useRef(vz(e)),n=I.useRef(!1),r=Jb(),i=I.useMemo(()=>$Ze(r.search,n.current?null:t.current),[r.search]),s=dg(),o=I.useCallback((a,u)=>{const l=vz(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const qK=I.createContext(null);qK.displayName="@mantine/modals/ModalsContext";function BZe(){const e=I.useContext(qK);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function jZe({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=BZe(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return _.jsxs(_.Fragment,{children:[l&&_.jsx(_e,{mb:"md",children:l}),_.jsxs(Vs,{justify:"flex-end",...o,children:[_.jsx(Nn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),_.jsx(Nn,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[UZe,D6]=mHe("mantine-modals");D6("openModal");D6("closeModal");D6("closeAllModals");const bz=D6("openConfirmModal");function Gue(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function zZe(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;Gue(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{Gue(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function VZe(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function HZe({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=I.useReducer(zZe,{modals:[],current:null}),o=I.useRef(i);o.current=i;const a=I.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=I.useCallback(({modalId:g,...y})=>{const v=g||kA();return s({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[s]),l=I.useCallback(({modalId:g,...y})=>{const v=g||kA();return s({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[s]),c=I.useCallback((g,{modalId:y,...v})=>{const b=y||kA();return s({type:"OPEN",modal:{id:b,type:"context",props:v,ctx:g}}),b},[s]),f=I.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);UZe({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,b=r[g.ctx];return{modalProps:v,content:_.jsx(b,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=VZe(g.props);return{modalProps:y,content:_.jsx(jZe,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:_.jsx(_.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return _.jsxs(qK.Provider,{value:d,children:[_.jsx(Ts,{zIndex:tf("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qZe={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=(e,t,n,r)=>{const i=I.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:u,children:l,...c},f)=>I.createElement("svg",{ref:f,...qZe[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...c},[...r.map(([d,h])=>I.createElement(d,h)),...Array.isArray(l)?l:[l]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var WZe=Hr("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Yue=Hr("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var GZe=Hr("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var YZe=Hr("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var KZe=Hr("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var XZe=Hr("outline","chart-bar","IconChartBar",[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var QZe=Hr("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var JZe=Hr("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Bxe=Hr("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kue=Hr("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZZe=Hr("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var eet=Hr("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tet=Hr("outline","file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jxe=Hr("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var net=Hr("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ret=Hr("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var iet=Hr("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Uxe=Hr("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var set=Hr("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var oet=Hr("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var aet=Hr("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zxe=Hr("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vxe=Hr("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uet=Hr("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hxe=Hr("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var WK=Hr("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var GK=Hr("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cet=Hr("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);function qxe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const ip="/revisit/";function Xue(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function Wxe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const fet=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,det=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,het={};function Que(e,t){return(het.jsx?det:fet).test(e)}const pet=/[ \t\n\f\r]/g;function met(e){return typeof e=="object"?e.type==="text"?Jue(e.value):!1:Jue(e)}function Jue(e){return e.replace(pet,"")===""}let Mk=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};Mk.prototype.property={};Mk.prototype.normal={};Mk.prototype.space=null;function Gxe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new Mk(n,r,t)}function W2(e){return e.toLowerCase()}let af=class{constructor(t,n){this.property=t,this.attribute=n}};af.prototype.space=null;af.prototype.boolean=!1;af.prototype.booleanish=!1;af.prototype.overloadedBoolean=!1;af.prototype.number=!1;af.prototype.commaSeparated=!1;af.prototype.spaceSeparated=!1;af.prototype.commaOrSpaceSeparated=!1;af.prototype.mustUseProperty=!1;af.prototype.defined=!1;let get=0;const vn=Zb(),bs=Zb(),Yxe=Zb(),nt=Zb(),ii=Zb(),nE=Zb(),_l=Zb();function Zb(){return 2**++get}const _z=Object.freeze(Object.defineProperty({__proto__:null,boolean:vn,booleanish:bs,commaOrSpaceSeparated:_l,commaSeparated:nE,number:nt,overloadedBoolean:Yxe,spaceSeparated:ii},Symbol.toStringTag,{value:"Module"})),Yj=Object.keys(_z);class YK extends af{constructor(t,n,r,i){let s=-1;if(super(t,n),Zue(this,"space",i),typeof r=="number")for(;++s<Yj.length;){const o=Yj[s];Zue(this,Yj[s],(r&_z[o])===_z[o])}}}YK.prototype.defined=!0;function Zue(e,t,n){n&&(e[t]=n)}const yet={}.hasOwnProperty;function gS(e){const t={},n={};let r;for(r in e.properties)if(yet.call(e.properties,r)){const i=e.properties[r],s=new YK(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[W2(r)]=r,n[W2(s.attribute)]=r}return new Mk(t,n,e.space)}const Kxe=gS({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Xxe=gS({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Qxe(e,t){return t in e?e[t]:t}function Jxe(e,t){return Qxe(e,t.toLowerCase())}const Zxe=gS({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Jxe,properties:{xmlns:null,xmlnsXLink:null}}),eSe=gS({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:bs,ariaAutoComplete:null,ariaBusy:bs,ariaChecked:bs,ariaColCount:nt,ariaColIndex:nt,ariaColSpan:nt,ariaControls:ii,ariaCurrent:null,ariaDescribedBy:ii,ariaDetails:null,ariaDisabled:bs,ariaDropEffect:ii,ariaErrorMessage:null,ariaExpanded:bs,ariaFlowTo:ii,ariaGrabbed:bs,ariaHasPopup:null,ariaHidden:bs,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ii,ariaLevel:nt,ariaLive:null,ariaModal:bs,ariaMultiLine:bs,ariaMultiSelectable:bs,ariaOrientation:null,ariaOwns:ii,ariaPlaceholder:null,ariaPosInSet:nt,ariaPressed:bs,ariaReadOnly:bs,ariaRelevant:null,ariaRequired:bs,ariaRoleDescription:ii,ariaRowCount:nt,ariaRowIndex:nt,ariaRowSpan:nt,ariaSelected:bs,ariaSetSize:nt,ariaSort:null,ariaValueMax:nt,ariaValueMin:nt,ariaValueNow:nt,ariaValueText:null,role:null}}),vet=gS({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Jxe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:nE,acceptCharset:ii,accessKey:ii,action:null,allow:null,allowFullScreen:vn,allowPaymentRequest:vn,allowUserMedia:vn,alt:null,as:null,async:vn,autoCapitalize:null,autoComplete:ii,autoFocus:vn,autoPlay:vn,blocking:ii,capture:null,charSet:null,checked:vn,cite:null,className:ii,cols:nt,colSpan:null,content:null,contentEditable:bs,controls:vn,controlsList:ii,coords:nt|nE,crossOrigin:null,data:null,dateTime:null,decoding:null,default:vn,defer:vn,dir:null,dirName:null,disabled:vn,download:Yxe,draggable:bs,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:vn,formTarget:null,headers:ii,height:nt,hidden:vn,high:nt,href:null,hrefLang:null,htmlFor:ii,httpEquiv:ii,id:null,imageSizes:null,imageSrcSet:null,inert:vn,inputMode:null,integrity:null,is:null,isMap:vn,itemId:null,itemProp:ii,itemRef:ii,itemScope:vn,itemType:ii,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:vn,low:nt,manifest:null,max:null,maxLength:nt,media:null,method:null,min:null,minLength:nt,multiple:vn,muted:vn,name:null,nonce:null,noModule:vn,noValidate:vn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:vn,optimum:nt,pattern:null,ping:ii,placeholder:null,playsInline:vn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:vn,referrerPolicy:null,rel:ii,required:vn,reversed:vn,rows:nt,rowSpan:nt,sandbox:ii,scope:null,scoped:vn,seamless:vn,selected:vn,shadowRootClonable:vn,shadowRootDelegatesFocus:vn,shadowRootMode:null,shape:null,size:nt,sizes:null,slot:null,span:nt,spellCheck:bs,src:null,srcDoc:null,srcLang:null,srcSet:null,start:nt,step:null,style:null,tabIndex:nt,target:null,title:null,translate:null,type:null,typeMustMatch:vn,useMap:null,value:bs,width:nt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ii,axis:null,background:null,bgColor:null,border:nt,borderColor:null,bottomMargin:nt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:vn,declare:vn,event:null,face:null,frame:null,frameBorder:null,hSpace:nt,leftMargin:nt,link:null,longDesc:null,lowSrc:null,marginHeight:nt,marginWidth:nt,noResize:vn,noHref:vn,noShade:vn,noWrap:vn,object:null,profile:null,prompt:null,rev:null,rightMargin:nt,rules:null,scheme:null,scrolling:bs,standby:null,summary:null,text:null,topMargin:nt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:nt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:vn,disableRemotePlayback:vn,prefix:null,property:null,results:nt,security:null,unselectable:null}}),bet=gS({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Qxe,properties:{about:_l,accentHeight:nt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:nt,amplitude:nt,arabicForm:null,ascent:nt,attributeName:null,attributeType:null,azimuth:nt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:nt,by:null,calcMode:null,capHeight:nt,className:ii,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:nt,diffuseConstant:nt,direction:null,display:null,dur:null,divisor:nt,dominantBaseline:null,download:vn,dx:null,dy:null,edgeMode:null,editable:null,elevation:nt,enableBackground:null,end:null,event:null,exponent:nt,externalResourcesRequired:null,fill:null,fillOpacity:nt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:nE,g2:nE,glyphName:nE,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:nt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:nt,horizOriginX:nt,horizOriginY:nt,id:null,ideographic:nt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:nt,k:nt,k1:nt,k2:nt,k3:nt,k4:nt,kernelMatrix:_l,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:nt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:nt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:nt,overlineThickness:nt,paintOrder:null,panose1:null,path:null,pathLength:nt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ii,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:nt,pointsAtY:nt,pointsAtZ:nt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:_l,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:_l,rev:_l,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:_l,requiredFeatures:_l,requiredFonts:_l,requiredFormats:_l,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:nt,specularExponent:nt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:nt,strikethroughThickness:nt,string:null,stroke:null,strokeDashArray:_l,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:nt,strokeOpacity:nt,strokeWidth:null,style:null,surfaceScale:nt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:_l,tabIndex:nt,tableValues:null,target:null,targetX:nt,targetY:nt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:_l,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:nt,underlineThickness:nt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:nt,values:null,vAlphabetic:nt,vMathematical:nt,vectorEffect:null,vHanging:nt,vIdeographic:nt,version:null,vertAdvY:nt,vertOriginX:nt,vertOriginY:nt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:nt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),_et=/^data[-\w.:]+$/i,ele=/-[a-z]/g,wet=/[A-Z]/g;function P6(e,t){const n=W2(t);let r=t,i=af;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&_et.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(ele,xet);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!ele.test(s)){let o=s.replace(wet,Eet);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=YK}return new i(r,t)}function Eet(e){return"-"+e.toLowerCase()}function xet(e){return e.charAt(1).toUpperCase()}const Tet={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Lk=Gxe([Xxe,Kxe,Zxe,eSe,vet],"html"),Yy=Gxe([Xxe,Kxe,Zxe,eSe,bet],"svg");function tle(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function tSe(e){return e.join(" ").trim()}var nSe={},nle=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Cet=/\n/g,Aet=/^\s*/,Iet=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,ket=/^:\s*/,Ret=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Net=/^[;\s]*/,Det=/^\s+|\s+$/g,Pet=`
`,rle="/",ile="*",e1="",Oet="comment",$et="declaration",Met=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(Cet);m&&(n+=m.length);var g=p.lastIndexOf(Pet);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(Aet)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(rle!=e.charAt(0)||ile!=e.charAt(1))){for(var m=2;e1!=e.charAt(m)&&(ile!=e.charAt(m)||rle!=e.charAt(m+1));)++m;if(m+=2,e1===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:Oet,comment:g})}}function d(){var p=s(),m=u(Iet);if(m){if(f(),!u(ket))return a("property missing ':'");var g=u(Ret),y=p({type:$et,property:sle(m[0].replace(nle,e1)),value:g?sle(g[0].replace(nle,e1)):e1});return u(Net),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function sle(e){return e?e.replace(Det,e1):e1}var Let=oo&&oo.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nSe,"__esModule",{value:!0});var Fet=Let(Met);function Bet(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,Fet.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var ole=nSe.default=Bet;const jet=ole.default||ole,O6=rSe("end"),sp=rSe("start");function rSe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Uet(e){const t=sp(e),n=O6(e);if(t&&n)return{start:t,end:n}}function RA(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?ale(e.position):"start"in e||"end"in e?ale(e):"line"in e||"column"in e?wz(e):""}function wz(e){return ule(e&&e.line)+":"+ule(e&&e.column)}function ale(e){return wz(e&&e.start)+"-"+wz(e&&e.end)}function ule(e){return e&&typeof e=="number"?e:1}class Pa extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=RA(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Pa.prototype.file="";Pa.prototype.name="";Pa.prototype.reason="";Pa.prototype.message="";Pa.prototype.stack="";Pa.prototype.column=void 0;Pa.prototype.line=void 0;Pa.prototype.ancestors=void 0;Pa.prototype.cause=void 0;Pa.prototype.fatal=void 0;Pa.prototype.place=void 0;Pa.prototype.ruleId=void 0;Pa.prototype.source=void 0;const KK={}.hasOwnProperty,zet=new Map,Vet=/[A-Z]/g,Het=/-([a-z])/g,qet=new Set(["table","tbody","thead","tfoot","tr"]),Wet=new Set(["td","th"]),iSe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Get(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=ttt(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=ett(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Yy:Lk,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=sSe(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function sSe(e,t,n){if(t.type==="element")return Yet(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return Ket(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return Qet(e,t,n);if(t.type==="mdxjsEsm")return Xet(e,t);if(t.type==="root")return Jet(e,t,n);if(t.type==="text")return Zet(e,t)}function Yet(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Yy,e.schema=i),e.ancestors.push(t);const s=aSe(e,t.tagName,!1),o=ntt(e,t);let a=QK(e,t);return qet.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!met(u):!0})),oSe(e,o,s,t),XK(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function Ket(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}G2(e,t.position)}function Xet(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);G2(e,t.position)}function Qet(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=Yy,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:aSe(e,t.name,!0),o=rtt(e,t),a=QK(e,t);return oSe(e,o,s,t),XK(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function Jet(e,t,n){const r={};return XK(r,QK(e,t)),e.create(t,e.Fragment,r,n)}function Zet(e,t){return t.value}function oSe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function XK(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function ett(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function ttt(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=sp(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function ntt(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&KK.call(t.properties,i)){const s=itt(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&Wet.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function rtt(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else G2(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else G2(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function QK(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:zet;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=sSe(e,s,o);a!==void 0&&n.push(a)}return n}function itt(e,t,n){const r=P6(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?Wxe(n):tSe(n)),r.property==="style"){let i=typeof n=="object"?n:stt(e,String(n));return e.stylePropertyNameCase==="css"&&(i=ott(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?Tet[r.property]||r.property:r.attribute,n]}}function stt(e,t){const n={};try{jet(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new Pa("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=iSe+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(Het,utt)),n[o]=s}}function aSe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=Que(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=Que(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return KK.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);G2(e)}function G2(e,t){const n=new Pa("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=iSe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function ott(e){const t={};let n;for(n in e)KK.call(e,n)&&(t[att(n)]=e[n]);return t}function att(e){let t=e.replace(Vet,ltt);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function utt(e,t){return t.toUpperCase()}function ltt(e){return"-"+e.toLowerCase()}const Kj={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},ctt={};function ftt(e,t){const n=ctt,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return uSe(e,r,i)}function uSe(e,t,n){if(dtt(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return lle(e.children,t,n)}return Array.isArray(e)?lle(e,t,n):""}function lle(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=uSe(e[i],t,n);return r.join("")}function dtt(e){return!!(e&&typeof e=="object")}const cle=document.createElement("i");function JK(e){const t="&"+e+";";cle.innerHTML=t;const n=cle.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function $m(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function Tc(e,t){return e.length>0?($m(e,e.length,0,t),e):t}const fle={}.hasOwnProperty;function htt(e){const t={};let n=-1;for(;++n<e.length;)ptt(t,e[n]);return t}function ptt(e,t){let n;for(n in t){const i=(fle.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){fle.call(i,o)||(i[o]=[]);const a=s[o];mtt(i[o],Array.isArray(a)?a:a?[a]:[])}}}function mtt(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);$m(e,0,0,r)}function lSe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function rE(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Jd=Ky(/[A-Za-z]/),Dl=Ky(/[\dA-Za-z]/),gtt=Ky(/[#-'*+\--9=?A-Z^-~]/);function Ez(e){return e!==null&&(e<32||e===127)}const xz=Ky(/\d/),ytt=Ky(/[\dA-Fa-f]/),vtt=Ky(/[!-/:-@[-`{-~]/);function nn(e){return e!==null&&e<-2}function Ku(e){return e!==null&&(e<0||e===32)}function Er(e){return e===-2||e===-1||e===32}const btt=Ky(new RegExp("\\p{P}|\\p{S}","u")),_tt=Ky(/\s/);function Ky(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function yS(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&Dl(e.charCodeAt(n+1))&&Dl(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function ai(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return Er(u)?(e.enter(n),a(u)):t(u)}function a(u){return Er(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const wtt={tokenize:Ett};function Ett(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),ai(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return nn(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const xtt={tokenize:Stt},dle={tokenize:Ttt};function Stt(e){const t=this,n=[];let r=0,i,s,o;return a;function a(b){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,u,l)(b)}return l(b)}function u(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const w=t.events.length;let E=w,x;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){x=t.events[E][1].end;break}y(r);let T=w;for(;T<t.events.length;)t.events[T][1].end=Object.assign({},x),T++;return $m(t.events,E+1,0,t.events.slice(w)),t.events.length=T,l(b)}return a(b)}function l(b){if(r===n.length){if(!i)return d(b);if(i.currentConstruct&&i.currentConstruct.concrete)return p(b);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(dle,c,f)(b)}function c(b){return i&&v(),y(r),d(b)}function f(b){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(b)}function d(b){return t.containerState={},e.attempt(dle,h,p)(b)}function h(b){return r++,n.push([t.currentConstruct,t.containerState]),d(b)}function p(b){if(b===null){i&&v(),y(0),e.consume(b);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(b)}function m(b){if(b===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(b);return}return nn(b)?(e.consume(b),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(b),m)}function g(b,w){const E=t.sliceStream(b);if(w&&E.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(E),t.parser.lazy[b.start.line]){let x=i.events.length;for(;x--;)if(i.events[x][1].start.offset<o&&(!i.events[x][1].end||i.events[x][1].end.offset>o))return;const T=t.events.length;let C=T,A,k;for(;C--;)if(t.events[C][0]==="exit"&&t.events[C][1].type==="chunkFlow"){if(A){k=t.events[C][1].end;break}A=!0}for(y(r),x=T;x<t.events.length;)t.events[x][1].end=Object.assign({},k),x++;$m(t.events,C+1,0,t.events.slice(T)),t.events.length=x}}function y(b){let w=n.length;for(;w-- >b;){const E=n[w];t.containerState=E[1],E[0].exit.call(t,e)}n.length=b}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function Ttt(e,t,n){return ai(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function hle(e){if(e===null||Ku(e)||_tt(e))return 1;if(btt(e))return 2}function ZK(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const Sz={name:"attention",tokenize:Att,resolveAll:Ctt};function Ctt(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);ple(f,-u),ple(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=Tc(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=Tc(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=Tc(l,ZK(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=Tc(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=Tc(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,$m(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Att(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=hle(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=hle(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function ple(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Itt={name:"autolink",tokenize:ktt};function ktt(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return Jd(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||Dl(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||Dl(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||Ez(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):gtt(h)?(e.consume(h),l):n(h)}function c(h){return Dl(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||Dl(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const $6={tokenize:Rtt,partial:!0};function Rtt(e,t,n){return r;function r(s){return Er(s)?ai(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||nn(s)?t(s):n(s)}}const cSe={name:"blockQuote",tokenize:Ntt,continuation:{tokenize:Dtt},exit:Ptt};function Ntt(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Er(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function Dtt(e,t,n){const r=this;return i;function i(o){return Er(o)?ai(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(cSe,t,n)(o)}}function Ptt(e){e.exit("blockQuote")}const fSe={name:"characterEscape",tokenize:Ott};function Ott(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return vtt(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const dSe={name:"characterReference",tokenize:$tt};function $tt(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=Dl,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=ytt,c):(e.enter("characterReferenceValue"),s=7,o=xz,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===Dl&&!JK(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const mle={tokenize:Ltt,partial:!0},gle={name:"codeFenced",tokenize:Mtt,concrete:!0};function Mtt(e,t,n){const r=this,i={tokenize:E,partial:!0};let s=0,o=0,a;return u;function u(x){return l(x)}function l(x){const T=r.events[r.events.length-1];return s=T&&T[1].type==="linePrefix"?T[2].sliceSerialize(T[1],!0).length:0,a=x,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(x)}function c(x){return x===a?(o++,e.consume(x),c):o<3?n(x):(e.exit("codeFencedFenceSequence"),Er(x)?ai(e,f,"whitespace")(x):f(x))}function f(x){return x===null||nn(x)?(e.exit("codeFencedFence"),r.interrupt?t(x):e.check(mle,m,w)(x)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(x))}function d(x){return x===null||nn(x)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(x)):Er(x)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ai(e,h,"whitespace")(x)):x===96&&x===a?n(x):(e.consume(x),d)}function h(x){return x===null||nn(x)?f(x):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(x))}function p(x){return x===null||nn(x)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(x)):x===96&&x===a?n(x):(e.consume(x),p)}function m(x){return e.attempt(i,w,g)(x)}function g(x){return e.enter("lineEnding"),e.consume(x),e.exit("lineEnding"),y}function y(x){return s>0&&Er(x)?ai(e,v,"linePrefix",s+1)(x):v(x)}function v(x){return x===null||nn(x)?e.check(mle,m,w)(x):(e.enter("codeFlowValue"),b(x))}function b(x){return x===null||nn(x)?(e.exit("codeFlowValue"),v(x)):(e.consume(x),b)}function w(x){return e.exit("codeFenced"),t(x)}function E(x,T,C){let A=0;return k;function k(F){return x.enter("lineEnding"),x.consume(F),x.exit("lineEnding"),R}function R(F){return x.enter("codeFencedFence"),Er(F)?ai(x,O,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):O(F)}function O(F){return F===a?(x.enter("codeFencedFenceSequence"),D(F)):C(F)}function D(F){return F===a?(A++,x.consume(F),D):A>=o?(x.exit("codeFencedFenceSequence"),Er(F)?ai(x,$,"whitespace")(F):$(F)):C(F)}function $(F){return F===null||nn(F)?(x.exit("codeFencedFence"),T(F)):C(F)}}}function Ltt(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const Xj={name:"codeIndented",tokenize:Btt},Ftt={tokenize:jtt,partial:!0};function Btt(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),ai(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):nn(l)?e.attempt(Ftt,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||nn(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function jtt(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):nn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):ai(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):nn(o)?i(o):n(o)}}const Utt={name:"codeText",tokenize:Htt,resolve:ztt,previous:Vtt};function ztt(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function Vtt(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Htt(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):nn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||nn(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class qtt{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&$T(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),$T(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),$T(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);$T(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);$T(this.left,n.reverse())}}}function $T(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function hSe(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new qtt(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Wtt(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return $m(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function Wtt(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.push([v,v+y.length-1]),e.splice(v,2,y)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const Gtt={tokenize:Xtt,resolve:Ktt},Ytt={tokenize:Qtt,partial:!0};function Ktt(e){return hSe(e),e}function Xtt(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):nn(a)?e.check(Ytt,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Qtt(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),ai(e,s,"linePrefix")}function s(o){if(o===null||nn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function pSe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||Ez(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||nn(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||Ku(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||Ez(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function mSe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):nn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||nn(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!Er(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function gSe(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):nn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),ai(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||nn(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function NA(e,t){let n;return r;function r(i){return nn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Er(i)?ai(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const Jtt={name:"definition",tokenize:ent},Ztt={tokenize:tnt,partial:!0};function ent(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return mSe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=rE(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return Ku(h)?NA(e,l)(h):l(h)}function l(h){return pSe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(Ztt,f,f)(h)}function f(h){return Er(h)?ai(e,d,"whitespace")(h):d(h)}function d(h){return h===null||nn(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function tnt(e,t,n){return r;function r(a){return Ku(a)?NA(e,i)(a):n(a)}function i(a){return gSe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Er(a)?ai(e,o,"whitespace")(a):o(a)}function o(a){return a===null||nn(a)?t(a):n(a)}}const nnt={name:"hardBreakEscape",tokenize:rnt};function rnt(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return nn(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const int={name:"headingAtx",tokenize:ont,resolve:snt};function snt(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},$m(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function ont(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||Ku(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||nn(c)?(e.exit("atxHeading"),t(c)):Er(c)?ai(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Ku(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const ant=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],yle=["pre","script","style","textarea"],unt={name:"htmlFlow",tokenize:dnt,resolveTo:fnt,concrete:!0},lnt={tokenize:pnt,partial:!0},cnt={tokenize:hnt,partial:!0};function fnt(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function dnt(e,t,n){const r=this;let i,s,o,a,u;return l;function l(B){return c(B)}function c(B){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(B),f}function f(B){return B===33?(e.consume(B),d):B===47?(e.consume(B),s=!0,m):B===63?(e.consume(B),i=3,r.interrupt?t:P):Jd(B)?(e.consume(B),o=String.fromCharCode(B),g):n(B)}function d(B){return B===45?(e.consume(B),i=2,h):B===91?(e.consume(B),i=5,a=0,p):Jd(B)?(e.consume(B),i=4,r.interrupt?t:P):n(B)}function h(B){return B===45?(e.consume(B),r.interrupt?t:P):n(B)}function p(B){const H="CDATA[";return B===H.charCodeAt(a++)?(e.consume(B),a===H.length?r.interrupt?t:O:p):n(B)}function m(B){return Jd(B)?(e.consume(B),o=String.fromCharCode(B),g):n(B)}function g(B){if(B===null||B===47||B===62||Ku(B)){const H=B===47,G=o.toLowerCase();return!H&&!s&&yle.includes(G)?(i=1,r.interrupt?t(B):O(B)):ant.includes(o.toLowerCase())?(i=6,H?(e.consume(B),y):r.interrupt?t(B):O(B)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(B):s?v(B):b(B))}return B===45||Dl(B)?(e.consume(B),o+=String.fromCharCode(B),g):n(B)}function y(B){return B===62?(e.consume(B),r.interrupt?t:O):n(B)}function v(B){return Er(B)?(e.consume(B),v):k(B)}function b(B){return B===47?(e.consume(B),k):B===58||B===95||Jd(B)?(e.consume(B),w):Er(B)?(e.consume(B),b):k(B)}function w(B){return B===45||B===46||B===58||B===95||Dl(B)?(e.consume(B),w):E(B)}function E(B){return B===61?(e.consume(B),x):Er(B)?(e.consume(B),E):b(B)}function x(B){return B===null||B===60||B===61||B===62||B===96?n(B):B===34||B===39?(e.consume(B),u=B,T):Er(B)?(e.consume(B),x):C(B)}function T(B){return B===u?(e.consume(B),u=null,A):B===null||nn(B)?n(B):(e.consume(B),T)}function C(B){return B===null||B===34||B===39||B===47||B===60||B===61||B===62||B===96||Ku(B)?E(B):(e.consume(B),C)}function A(B){return B===47||B===62||Er(B)?b(B):n(B)}function k(B){return B===62?(e.consume(B),R):n(B)}function R(B){return B===null||nn(B)?O(B):Er(B)?(e.consume(B),R):n(B)}function O(B){return B===45&&i===2?(e.consume(B),L):B===60&&i===1?(e.consume(B),j):B===62&&i===4?(e.consume(B),U):B===63&&i===3?(e.consume(B),P):B===93&&i===5?(e.consume(B),q):nn(B)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(lnt,W,D)(B)):B===null||nn(B)?(e.exit("htmlFlowData"),D(B)):(e.consume(B),O)}function D(B){return e.check(cnt,$,W)(B)}function $(B){return e.enter("lineEnding"),e.consume(B),e.exit("lineEnding"),F}function F(B){return B===null||nn(B)?D(B):(e.enter("htmlFlowData"),O(B))}function L(B){return B===45?(e.consume(B),P):O(B)}function j(B){return B===47?(e.consume(B),o="",z):O(B)}function z(B){if(B===62){const H=o.toLowerCase();return yle.includes(H)?(e.consume(B),U):O(B)}return Jd(B)&&o.length<8?(e.consume(B),o+=String.fromCharCode(B),z):O(B)}function q(B){return B===93?(e.consume(B),P):O(B)}function P(B){return B===62?(e.consume(B),U):B===45&&i===2?(e.consume(B),P):O(B)}function U(B){return B===null||nn(B)?(e.exit("htmlFlowData"),W(B)):(e.consume(B),U)}function W(B){return e.exit("htmlFlow"),t(B)}}function hnt(e,t,n){const r=this;return i;function i(o){return nn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function pnt(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt($6,t,n)}}const mnt={name:"htmlText",tokenize:gnt};function gnt(e,t,n){const r=this;let i,s,o;return a;function a(P){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(P),u}function u(P){return P===33?(e.consume(P),l):P===47?(e.consume(P),E):P===63?(e.consume(P),b):Jd(P)?(e.consume(P),C):n(P)}function l(P){return P===45?(e.consume(P),c):P===91?(e.consume(P),s=0,p):Jd(P)?(e.consume(P),v):n(P)}function c(P){return P===45?(e.consume(P),h):n(P)}function f(P){return P===null?n(P):P===45?(e.consume(P),d):nn(P)?(o=f,j(P)):(e.consume(P),f)}function d(P){return P===45?(e.consume(P),h):f(P)}function h(P){return P===62?L(P):P===45?d(P):f(P)}function p(P){const U="CDATA[";return P===U.charCodeAt(s++)?(e.consume(P),s===U.length?m:p):n(P)}function m(P){return P===null?n(P):P===93?(e.consume(P),g):nn(P)?(o=m,j(P)):(e.consume(P),m)}function g(P){return P===93?(e.consume(P),y):m(P)}function y(P){return P===62?L(P):P===93?(e.consume(P),y):m(P)}function v(P){return P===null||P===62?L(P):nn(P)?(o=v,j(P)):(e.consume(P),v)}function b(P){return P===null?n(P):P===63?(e.consume(P),w):nn(P)?(o=b,j(P)):(e.consume(P),b)}function w(P){return P===62?L(P):b(P)}function E(P){return Jd(P)?(e.consume(P),x):n(P)}function x(P){return P===45||Dl(P)?(e.consume(P),x):T(P)}function T(P){return nn(P)?(o=T,j(P)):Er(P)?(e.consume(P),T):L(P)}function C(P){return P===45||Dl(P)?(e.consume(P),C):P===47||P===62||Ku(P)?A(P):n(P)}function A(P){return P===47?(e.consume(P),L):P===58||P===95||Jd(P)?(e.consume(P),k):nn(P)?(o=A,j(P)):Er(P)?(e.consume(P),A):L(P)}function k(P){return P===45||P===46||P===58||P===95||Dl(P)?(e.consume(P),k):R(P)}function R(P){return P===61?(e.consume(P),O):nn(P)?(o=R,j(P)):Er(P)?(e.consume(P),R):A(P)}function O(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(e.consume(P),i=P,D):nn(P)?(o=O,j(P)):Er(P)?(e.consume(P),O):(e.consume(P),$)}function D(P){return P===i?(e.consume(P),i=void 0,F):P===null?n(P):nn(P)?(o=D,j(P)):(e.consume(P),D)}function $(P){return P===null||P===34||P===39||P===60||P===61||P===96?n(P):P===47||P===62||Ku(P)?A(P):(e.consume(P),$)}function F(P){return P===47||P===62||Ku(P)?A(P):n(P)}function L(P){return P===62?(e.consume(P),e.exit("htmlTextData"),e.exit("htmlText"),t):n(P)}function j(P){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),z}function z(P){return Er(P)?ai(e,q,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):q(P)}function q(P){return e.enter("htmlTextData"),o(P)}}const eX={name:"labelEnd",tokenize:Ent,resolveTo:wnt,resolveAll:_nt},ynt={tokenize:xnt},vnt={tokenize:Snt},bnt={tokenize:Tnt};function _nt(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function wnt(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=Tc(a,e.slice(s+1,s+r+3)),a=Tc(a,[["enter",c,t]]),a=Tc(a,ZK(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=Tc(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=Tc(a,e.slice(o+1)),a=Tc(a,[["exit",u,t]]),$m(e,s,e.length,a),e}function Ent(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(rE(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(ynt,c,o?c:f)(d):d===91?e.attempt(vnt,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(bnt,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function xnt(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return Ku(f)?NA(e,s)(f):s(f)}function s(f){return f===41?c(f):pSe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Ku(f)?NA(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?gSe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return Ku(f)?NA(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function Snt(e,t,n){const r=this;return i;function i(a){return mSe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(rE(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function Tnt(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const Cnt={name:"labelStartImage",tokenize:Ant,resolveAll:eX.resolveAll};function Ant(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const Int={name:"labelStartLink",tokenize:knt,resolveAll:eX.resolveAll};function knt(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Qj={name:"lineEnding",tokenize:Rnt};function Rnt(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ai(e,t,"linePrefix")}}const MP={name:"thematicBreak",tokenize:Nnt};function Nnt(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||nn(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),Er(l)?ai(e,a,"whitespace")(l):a(l))}}const xu={name:"list",tokenize:Ont,continuation:{tokenize:$nt},exit:Lnt},Dnt={tokenize:Fnt,partial:!0},Pnt={tokenize:Mnt,partial:!0};function Ont(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:xz(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(MP,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return xz(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check($6,r.interrupt?n:c,e.attempt(Dnt,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return Er(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function $nt(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check($6,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ai(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Er(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Pnt,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,ai(e,e.attempt(xu,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function Mnt(e,t,n){const r=this;return ai(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function Lnt(e){e.exit(this.containerState.type)}function Fnt(e,t,n){const r=this;return ai(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Er(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const vle={name:"setextUnderline",tokenize:jnt,resolveTo:Bnt};function Bnt(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function jnt(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),Er(l)?ai(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||nn(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const Unt={tokenize:znt};function znt(e){const t=this,n=e.attempt($6,r,e.attempt(this.parser.constructs.flowInitial,i,ai(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Gtt,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Vnt={resolveAll:vSe()},Hnt=ySe("string"),qnt=ySe("text");function ySe(e){return{tokenize:t,resolveAll:vSe(e==="text"?Wnt:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function vSe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function Wnt(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function Gnt(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:b,exit:w,attempt:T(E),check:T(x),interrupt:T(x,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(R){return o=Tc(o,R),g(),o[o.length-1]!==null?[]:(C(t,0),l.events=ZK(s,l.events,l),l.events)}function d(R,O){return Knt(h(R),O)}function h(R){return Ynt(o,R)}function p(){const{line:R,column:O,offset:D,_index:$,_bufferIndex:F}=r;return{line:R,column:O,offset:D,_index:$,_bufferIndex:F}}function m(R){i[R.line]=R.column,k()}function g(){let R;for(;r._index<o.length;){const O=o[r._index];if(typeof O=="string")for(R=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===R&&r._bufferIndex<O.length;)y(O.charCodeAt(r._bufferIndex));else y(O)}}function y(R){c=c(R)}function v(R){nn(R)?(r.line++,r.column=1,r.offset+=R===-3?2:1,k()):R!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=R}function b(R,O){const D=O||{};return D.type=R,D.start=p(),l.events.push(["enter",D,l]),a.push(D),D}function w(R){const O=a.pop();return O.end=p(),l.events.push(["exit",O,l]),O}function E(R,O){C(R,O.from)}function x(R,O){O.restore()}function T(R,O){return D;function D($,F,L){let j,z,q,P;return Array.isArray($)?W($):"tokenize"in $?W([$]):U($);function U(te){return le;function le(fe){const de=fe!==null&&te[fe],ge=fe!==null&&te.null,Ie=[...Array.isArray(de)?de:de?[de]:[],...Array.isArray(ge)?ge:ge?[ge]:[]];return W(Ie)(fe)}}function W(te){return j=te,z=0,te.length===0?L:B(te[z])}function B(te){return le;function le(fe){return P=A(),q=te,te.partial||(l.currentConstruct=te),te.name&&l.parser.constructs.disable.null.includes(te.name)?G():te.tokenize.call(O?Object.assign(Object.create(l),O):l,u,H,G)(fe)}}function H(te){return R(q,P),F}function G(te){return P.restore(),++z<j.length?B(j[z]):L}}}function C(R,O){R.resolveAll&&!s.includes(R)&&s.push(R),R.resolve&&$m(l.events,O,l.events.length-O,R.resolve(l.events.slice(O),l)),R.resolveTo&&(l.events=R.resolveTo(l.events,l))}function A(){const R=p(),O=l.previous,D=l.currentConstruct,$=l.events.length,F=Array.from(a);return{restore:L,from:$};function L(){r=R,l.previous=O,l.currentConstruct=D,l.events.length=$,a=F,k()}}function k(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Ynt(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function Knt(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const Xnt={42:xu,43:xu,45:xu,48:xu,49:xu,50:xu,51:xu,52:xu,53:xu,54:xu,55:xu,56:xu,57:xu,62:cSe},Qnt={91:Jtt},Jnt={[-2]:Xj,[-1]:Xj,32:Xj},Znt={35:int,42:MP,45:[vle,MP],60:unt,61:vle,95:MP,96:gle,126:gle},ert={38:dSe,92:fSe},trt={[-5]:Qj,[-4]:Qj,[-3]:Qj,33:Cnt,38:dSe,42:Sz,60:[Itt,mnt],91:Int,92:[nnt,fSe],93:eX,95:Sz,96:Utt},nrt={null:[Sz,Vnt]},rrt={null:[42,95]},irt={null:[]},srt=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:rrt,contentInitial:Qnt,disable:irt,document:Xnt,flow:Znt,flowInitial:Jnt,insideSpan:nrt,string:ert,text:trt},Symbol.toStringTag,{value:"Module"}));function ort(e){const n=htt([srt,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(wtt),document:i(xtt),flow:i(Unt),string:i(Hnt),text:i(qnt)};return r;function i(s){return o;function o(a){return Gnt(r,s,a)}}}function art(e){for(;!hSe(e););return e}const ble=/[\0\t\n\r]/g;function urt(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(ble.lastIndex=f,l=ble.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const lrt=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function crt(e){return e.replace(lrt,frt)}function frt(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return lSe(n.slice(s?2:1),s?16:10)}return JK(n)||e}const bSe={}.hasOwnProperty;function drt(e,t,n){return typeof t!="string"&&(n=t,t=void 0),hrt(n)(art(ort(n).document().write(urt()(e,t,!0))))}function hrt(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ze),autolinkProtocol:A,autolinkEmail:A,atxHeading:s(yt),blockQuote:s(ge),characterEscape:A,characterReference:A,codeFenced:s(Ie),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ie,o),codeText:s(pe,o),codeTextData:A,data:A,codeFlowValue:A,definition:s(He),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Ue),hardBreakEscape:s(it),hardBreakTrailing:s(it),htmlFlow:s(be,o),htmlFlowData:A,htmlText:s(be,o),htmlTextData:A,image:s(ke),label:o,link:s(ze),listItem:s(Ot),listItemValue:d,listOrdered:s(ct,f),listUnordered:s(ct),paragraph:s(Ge),reference:B,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(yt),strong:s(ye),thematicBreak:s(bt)},exit:{atxHeading:u(),atxHeadingSequence:E,autolink:u(),autolinkEmail:de,autolinkProtocol:fe,blockQuote:u(),characterEscapeValue:k,characterReferenceMarkerHexadecimal:G,characterReferenceMarkerNumeric:G,characterReferenceValue:te,characterReference:le,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:k,codeIndented:u(y),codeText:u(F),codeTextData:k,data:k,definition:u(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:b,emphasis:u(),hardBreakEscape:u(O),hardBreakTrailing:u(O),htmlFlow:u(D),htmlFlowData:k,htmlText:u($),htmlTextData:k,image:u(j),label:q,labelText:z,lineEnding:R,link:u(L),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:H,resourceDestinationString:P,resourceTitleString:U,resource:W,setextHeading:u(C),setextHeadingLineSequence:T,setextHeadingText:x,strong:u(),thematicBreak:u()}};_Se(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(me){let Ae={type:"root",children:[]};const qe={stack:[Ae],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},ut=[];let wt=-1;for(;++wt<me.length;)if(me[wt][1].type==="listOrdered"||me[wt][1].type==="listUnordered")if(me[wt][0]==="enter")ut.push(wt);else{const Bn=ut.pop();wt=i(me,Bn,wt)}for(wt=-1;++wt<me.length;){const Bn=t[me[wt][0]];bSe.call(Bn,me[wt][1].type)&&Bn[me[wt][1].type].call(Object.assign({sliceSerialize:me[wt][2].sliceSerialize},qe),me[wt][1])}if(qe.tokenStack.length>0){const Bn=qe.tokenStack[qe.tokenStack.length-1];(Bn[1]||_le).call(qe,void 0,Bn[0])}for(Ae.position={start:Dg(me.length>0?me[0][1].start:{line:1,column:1,offset:0}),end:Dg(me.length>0?me[me.length-2][1].end:{line:1,column:1,offset:0})},wt=-1;++wt<t.transforms.length;)Ae=t.transforms[wt](Ae)||Ae;return Ae}function i(me,Ae,qe){let ut=Ae-1,wt=-1,Bn=!1,Ir,jn,hr,yn;for(;++ut<=qe;){const An=me[ut];switch(An[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{An[0]==="enter"?wt++:wt--,yn=void 0;break}case"lineEndingBlank":{An[0]==="enter"&&(Ir&&!yn&&!wt&&!hr&&(hr=ut),yn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:yn=void 0}if(!wt&&An[0]==="enter"&&An[1].type==="listItemPrefix"||wt===-1&&An[0]==="exit"&&(An[1].type==="listUnordered"||An[1].type==="listOrdered")){if(Ir){let sr=ut;for(jn=void 0;sr--;){const or=me[sr];if(or[1].type==="lineEnding"||or[1].type==="lineEndingBlank"){if(or[0]==="exit")continue;jn&&(me[jn][1].type="lineEndingBlank",Bn=!0),or[1].type="lineEnding",jn=sr}else if(!(or[1].type==="linePrefix"||or[1].type==="blockQuotePrefix"||or[1].type==="blockQuotePrefixWhitespace"||or[1].type==="blockQuoteMarker"||or[1].type==="listItemIndent"))break}hr&&(!jn||hr<jn)&&(Ir._spread=!0),Ir.end=Object.assign({},jn?me[jn][1].start:An[1].end),me.splice(jn||ut,0,["exit",Ir,An[2]]),ut++,qe++}if(An[1].type==="listItemPrefix"){const sr={type:"listItem",_spread:!1,start:Object.assign({},An[1].start),end:void 0};Ir=sr,me.splice(ut,0,["enter",sr,An[2]]),ut++,qe++,hr=void 0,yn=!0}}}return me[Ae][1]._spread=Bn,qe}function s(me,Ae){return qe;function qe(ut){a.call(this,me(ut),ut),Ae&&Ae.call(this,ut)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(me,Ae,qe){this.stack[this.stack.length-1].children.push(me),this.stack.push(me),this.tokenStack.push([Ae,qe]),me.position={start:Dg(Ae.start),end:void 0}}function u(me){return Ae;function Ae(qe){me&&me.call(this,qe),l.call(this,qe)}}function l(me,Ae){const qe=this.stack.pop(),ut=this.tokenStack.pop();if(ut)ut[0].type!==me.type&&(Ae?Ae.call(this,me,ut[0]):(ut[1]||_le).call(this,me,ut[0]));else throw new Error("Cannot close `"+me.type+"` ("+RA({start:me.start,end:me.end})+"): its not open");qe.position.end=Dg(me.end)}function c(){return ftt(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(me){if(this.data.expectingFirstListItemValue){const Ae=this.stack[this.stack.length-2];Ae.start=Number.parseInt(this.sliceSerialize(me),10),this.data.expectingFirstListItemValue=void 0}}function h(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.lang=me}function p(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.meta=me}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=me.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=me.replace(/(\r?\n|\r)$/g,"")}function v(me){const Ae=this.resume(),qe=this.stack[this.stack.length-1];qe.label=Ae,qe.identifier=rE(this.sliceSerialize(me)).toLowerCase()}function b(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.title=me}function w(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.url=me}function E(me){const Ae=this.stack[this.stack.length-1];if(!Ae.depth){const qe=this.sliceSerialize(me).length;Ae.depth=qe}}function x(){this.data.setextHeadingSlurpLineEnding=!0}function T(me){const Ae=this.stack[this.stack.length-1];Ae.depth=this.sliceSerialize(me).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function A(me){const qe=this.stack[this.stack.length-1].children;let ut=qe[qe.length-1];(!ut||ut.type!=="text")&&(ut=ht(),ut.position={start:Dg(me.start),end:void 0},qe.push(ut)),this.stack.push(ut)}function k(me){const Ae=this.stack.pop();Ae.value+=this.sliceSerialize(me),Ae.position.end=Dg(me.end)}function R(me){const Ae=this.stack[this.stack.length-1];if(this.data.atHardBreak){const qe=Ae.children[Ae.children.length-1];qe.position.end=Dg(me.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Ae.type)&&(A.call(this,me),k.call(this,me))}function O(){this.data.atHardBreak=!0}function D(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=me}function $(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=me}function F(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=me}function L(){const me=this.stack[this.stack.length-1];if(this.data.inReference){const Ae=this.data.referenceType||"shortcut";me.type+="Reference",me.referenceType=Ae,delete me.url,delete me.title}else delete me.identifier,delete me.label;this.data.referenceType=void 0}function j(){const me=this.stack[this.stack.length-1];if(this.data.inReference){const Ae=this.data.referenceType||"shortcut";me.type+="Reference",me.referenceType=Ae,delete me.url,delete me.title}else delete me.identifier,delete me.label;this.data.referenceType=void 0}function z(me){const Ae=this.sliceSerialize(me),qe=this.stack[this.stack.length-2];qe.label=crt(Ae),qe.identifier=rE(Ae).toLowerCase()}function q(){const me=this.stack[this.stack.length-1],Ae=this.resume(),qe=this.stack[this.stack.length-1];if(this.data.inReference=!0,qe.type==="link"){const ut=me.children;qe.children=ut}else qe.alt=Ae}function P(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.url=me}function U(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.title=me}function W(){this.data.inReference=void 0}function B(){this.data.referenceType="collapsed"}function H(me){const Ae=this.resume(),qe=this.stack[this.stack.length-1];qe.label=Ae,qe.identifier=rE(this.sliceSerialize(me)).toLowerCase(),this.data.referenceType="full"}function G(me){this.data.characterReferenceType=me.type}function te(me){const Ae=this.sliceSerialize(me),qe=this.data.characterReferenceType;let ut;qe?(ut=lSe(Ae,qe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ut=JK(Ae);const wt=this.stack[this.stack.length-1];wt.value+=ut}function le(me){const Ae=this.stack.pop();Ae.position.end=Dg(me.end)}function fe(me){k.call(this,me);const Ae=this.stack[this.stack.length-1];Ae.url=this.sliceSerialize(me)}function de(me){k.call(this,me);const Ae=this.stack[this.stack.length-1];Ae.url="mailto:"+this.sliceSerialize(me)}function ge(){return{type:"blockquote",children:[]}}function Ie(){return{type:"code",lang:null,meta:null,value:""}}function pe(){return{type:"inlineCode",value:""}}function He(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ue(){return{type:"emphasis",children:[]}}function yt(){return{type:"heading",depth:0,children:[]}}function it(){return{type:"break"}}function be(){return{type:"html",value:""}}function ke(){return{type:"image",title:null,url:"",alt:null}}function ze(){return{type:"link",title:null,url:"",children:[]}}function ct(me){return{type:"list",ordered:me.type==="listOrdered",start:null,spread:me._spread,children:[]}}function Ot(me){return{type:"listItem",spread:me._spread,checked:null,children:[]}}function Ge(){return{type:"paragraph",children:[]}}function ye(){return{type:"strong",children:[]}}function ht(){return{type:"text",value:""}}function bt(){return{type:"thematicBreak"}}}function Dg(e){return{line:e.line,column:e.column,offset:e.offset}}function _Se(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?_Se(e,r):prt(e,r)}}function prt(e,t){let n;for(n in t)if(bSe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function _le(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+RA({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+RA({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+RA({start:t.start,end:t.end})+") is still open")}function mrt(e){const t=this;t.parser=n;function n(r){return drt(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function grt(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function yrt(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function vrt(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function brt(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function _rt(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function wrt(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=yS(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function Ert(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function xrt(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function wSe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function Srt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return wSe(e,t);const i={src:yS(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function Trt(e,t){const n={src:yS(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function Crt(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function Art(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return wSe(e,t);const i={href:yS(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function Irt(e,t){const n={href:yS(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function krt(e,t,n){const r=e.all(t),i=n?Rrt(n):ESe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function Rrt(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=ESe(n[r])}return t}function ESe(e){const t=e.spread;return t??e.children.length>1}function Nrt(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function Drt(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Prt(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function Ort(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function $rt(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=sp(t.children[1]),u=O6(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function Mrt(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function Lrt(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const wle=9,Ele=32;function Frt(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(xle(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(xle(t.slice(i),i>0,!1)),s.join("")}function xle(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===wle||s===Ele;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===wle||s===Ele;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function Brt(e,t){const n={type:"text",value:Frt(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function jrt(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const Urt={blockquote:grt,break:yrt,code:vrt,delete:brt,emphasis:_rt,footnoteReference:wrt,heading:Ert,html:xrt,imageReference:Srt,image:Trt,inlineCode:Crt,linkReference:Art,link:Irt,listItem:krt,list:Nrt,paragraph:Drt,root:Prt,strong:Ort,table:$rt,tableCell:Lrt,tableRow:Mrt,text:Brt,thematicBreak:jrt,toml:XN,yaml:XN,definition:XN,footnoteDefinition:XN};function XN(){}const xSe=-1,M6=0,S$=1,T$=2,tX=3,nX=4,rX=5,iX=6,SSe=7,TSe=8,Sle=typeof self=="object"?self:globalThis,zrt=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case M6:case xSe:return n(o,i);case S$:{const a=n([],i);for(const u of o)a.push(r(u));return a}case T$:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case tX:return n(new Date(o),i);case nX:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case rX:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case iX:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case SSe:{const{name:a,message:u}=o;return n(new Sle[a](u),i)}case TSe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new Sle[s](o),i)};return r},Tle=e=>zrt(new Map,e)(0),F_="",{toString:Vrt}={},{keys:Hrt}=Object,MT=e=>{const t=typeof e;if(t!=="object"||!e)return[M6,t];const n=Vrt.call(e).slice(8,-1);switch(n){case"Array":return[S$,F_];case"Object":return[T$,F_];case"Date":return[tX,F_];case"RegExp":return[nX,F_];case"Map":return[rX,F_];case"Set":return[iX,F_]}return n.includes("Array")?[S$,n]:n.includes("Error")?[SSe,n]:[T$,n]},QN=([e,t])=>e===M6&&(t==="function"||t==="symbol"),qrt=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=MT(o);switch(a){case M6:{let c=o;switch(u){case"bigint":a=TSe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([xSe],o)}return i([a,c],o)}case S$:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case T$:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of Hrt(o))(e||!QN(MT(o[d])))&&c.push([s(d),s(o[d])]);return f}case tX:return i([a,o.toISOString()],o);case nX:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case rX:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(QN(MT(d))||QN(MT(h))))&&c.push([s(d),s(h)]);return f}case iX:{const c=[],f=i([a,c],o);for(const d of o)(e||!QN(MT(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},Cle=(e,{json:t,lossy:n}={})=>{const r=[];return qrt(!(t||n),!!t,new Map,r)(e),r},VE=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Tle(Cle(e,t)):structuredClone(e):(e,t)=>Tle(Cle(e,t));function Wrt(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Grt(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Yrt(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Wrt,r=e.options.footnoteBackLabel||Grt,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=yS(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(u,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...VE(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const CSe=function(e){if(e==null)return Jrt;if(typeof e=="function")return L6(e);if(typeof e=="object")return Array.isArray(e)?Krt(e):Xrt(e);if(typeof e=="string")return Qrt(e);throw new Error("Expected function, string, or object as test")};function Krt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=CSe(e[n]);return L6(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function Xrt(e){const t=e;return L6(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function Qrt(e){return L6(t);function t(n){return n&&n.type===e}}function L6(e){return t;function t(n,r,i){return!!(Zrt(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Jrt(){return!0}function Zrt(e){return e!==null&&typeof e=="object"&&"type"in e}const ASe=[],eit=!0,Ale=!1,tit="skip";function nit(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=CSe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=ASe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=rit(n(u,c)),h[0]===Ale))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==tit)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===Ale)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function rit(e){return Array.isArray(e)?e:typeof e=="number"?[eit,e]:e==null?ASe:[e]}function sX(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),nit(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const Tz={}.hasOwnProperty,iit={};function sit(e,t){const n=t||iit,r=new Map,i=new Map,s=new Map,o={...Urt,...n.handlers},a={all:l,applyData:ait,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:oit,wrap:lit};return sX(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(Tz.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,y=VE(g);return y.children=a.all(c),y}return VE(c)}return(a.options.unknownHandler||uit)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=Ile(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=Ile(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function oit(e,t){e.position&&(t.position=Uet(e))}function ait(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,VE(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function uit(e,t){const n=t.data||{},r="value"in t&&!(Tz.call(n,"hProperties")||Tz.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function lit(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Ile(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function kle(e,t){const n=sit(e,t),r=n.one(e,void 0),i=Yrt(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function cit(e,t){return e&&"run"in e?async function(n,r){const i=kle(n,{file:r,...t});await e.run(i,r)}:function(n,r){return kle(n,{file:r,...t||e})}}function Rle(e){if(e)throw e}var LP=Object.prototype.hasOwnProperty,ISe=Object.prototype.toString,Nle=Object.defineProperty,Dle=Object.getOwnPropertyDescriptor,Ple=function(t){return typeof Array.isArray=="function"?Array.isArray(t):ISe.call(t)==="[object Array]"},Ole=function(t){if(!t||ISe.call(t)!=="[object Object]")return!1;var n=LP.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&LP.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||LP.call(t,i)},$le=function(t,n){Nle&&n.name==="__proto__"?Nle(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Mle=function(t,n){if(n==="__proto__")if(LP.call(t,n)){if(Dle)return Dle(t,n).value}else return;return t[n]},fit=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=Mle(a,n),i=Mle(t,n),a!==i&&(c&&i&&(Ole(i)||(s=Ple(i)))?(s?(s=!1,o=r&&Ple(r)?r:[]):o=r&&Ole(r)?r:{},$le(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&$le(a,{name:n,newValue:i}));return a};const Jj=dl(fit);function Cz(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function dit(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?hit(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function hit(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const zd={basename:pit,dirname:mit,extname:git,join:yit,sep:"/"};function pit(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Fk(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function mit(e){if(Fk(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function git(e){Fk(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function yit(...e){let t=-1,n;for(;++t<e.length;)Fk(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":vit(n)}function vit(e){Fk(e);const t=e.codePointAt(0)===47;let n=bit(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function bit(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function Fk(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const _it={cwd:wit};function wit(){return"/"}function Az(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Eit(e){if(typeof e=="string")e=new URL(e);else if(!Az(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return xit(e)}function xit(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const Zj=["history","path","basename","stem","extname","dirname"];class kSe{constructor(t){let n;t?Az(t)?n={path:t}:typeof t=="string"||Sit(t)?n={value:t}:n=t:n={},this.cwd=_it.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Zj.length;){const s=Zj[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Zj.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?zd.basename(this.path):void 0}set basename(t){t8(t,"basename"),e8(t,"basename"),this.path=zd.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?zd.dirname(this.path):void 0}set dirname(t){Lle(this.basename,"dirname"),this.path=zd.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?zd.extname(this.path):void 0}set extname(t){if(e8(t,"extname"),Lle(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=zd.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Az(t)&&(t=Eit(t)),t8(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?zd.basename(this.path,this.extname):void 0}set stem(t){t8(t,"stem"),e8(t,"stem"),this.path=zd.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Pa(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function e8(e,t){if(e&&e.includes(zd.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+zd.sep+"`")}function t8(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Lle(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Sit(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Tit=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},Cit={}.hasOwnProperty;class oX extends Tit{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=dit()}copy(){const t=new oX;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Jj(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(i8("data",this.frozen),this.namespace[t]=n,this):Cit.call(this.namespace,t)&&this.namespace[t]||void 0:t?(i8("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=JN(t),r=this.parser||this.Parser;return n8("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),n8("process",this.parser||this.Parser),r8("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=JN(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);kit(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),n8("processSync",this.parser||this.Parser),r8("processSync",this.compiler||this.Compiler),this.process(t,i),Ble("processSync","process",n),r;function i(s,o){n=!0,Rle(s),r=o}}run(t,n,r){Fle(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=JN(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),Ble("runSync","run",r),i;function s(o,a){Rle(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=JN(n),i=this.compiler||this.Compiler;return r8("stringify",i),Fle(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(i8("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=Jj(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];Cz(m)&&Cz(h)&&(h=Jj(!0,m,h)),r[d]=[l,h,...p]}}}}const Ait=new oX().freeze();function n8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function r8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function i8(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Fle(e){if(!Cz(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Ble(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function JN(e){return Iit(e)?e:new kSe(e)}function Iit(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function kit(e){return typeof e=="string"||Rit(e)}function Rit(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Nit="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",jle=[],Ule={allowDangerousHtml:!0},Dit=/^(https?|ircs?|mailto|xmpp)$/i,Pit=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Oit(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||jle,u=e.remarkPlugins||jle,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Ule}:Ule,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||$it,h=Ait().use(mrt).use(u).use(cit,l).use(a),p=new kSe;typeof r=="string"&&(p.value=r);for(const v of Pit)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+Nit+v.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),sX(g,y),Get(g,{Fragment:_.Fragment,components:s,ignoreInvalidStyle:!0,jsx:_.jsx,jsxs:_.jsxs,passKeys:!0,passNode:!0});function y(v,b,w){if(v.type==="raw"&&w&&typeof b=="number")return c?w.children.splice(b,1):w.children[b]={type:"text",value:v.value},b;if(v.type==="element"){let E;for(E in Kj)if(Object.hasOwn(Kj,E)&&Object.hasOwn(v.properties,E)){const x=v.properties[E],T=Kj[E];(T===null||T.includes(v.tagName))&&(v.properties[E]=d(String(x||""),E,v))}}if(v.type==="element"){let E=t?!t.includes(v.tagName):o?o.includes(v.tagName):!1;if(!E&&n&&typeof b=="number"&&(E=!n(v,b,w)),E&&w&&typeof b=="number")return f&&v.children?w.children.splice(b,1,...v.children):w.children.splice(b,1),b}}}function $it(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||Dit.test(e.slice(0,t))?e:""}const zle=/[#.]/g;function Mit(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){zle.lastIndex=i;const a=zle.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const Lit=new Set(["button","menu","reset","submit"]),Iz={}.hasOwnProperty;function RSe(e,t,n){const r=n&&Uit(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=Mit(s,t),l.tagName=l.tagName.toLowerCase(),r&&Iz.call(r,l.tagName)&&(l.tagName=r[l.tagName]),Fit(o,l.tagName)){let c;for(c in o)Iz.call(o,c)&&Bit(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)kz(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function Fit(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?Lit.has(e.type.toLowerCase()):!("value"in e)}function Bit(e,t,n,r){const i=P6(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=tle(r):i.commaSeparated?o=Xue(r):i.commaOrSpaceSeparated?o=tle(Xue(r).join(" ")):o=Vle(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?jit(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=Vle(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function kz(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)kz(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?kz(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function Vle(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||W2(n)===W2(t)))return!0}return n}function jit(e){const t=[];let n;for(n in e)Iz.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function Uit(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const zit=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Vit=RSe(Lk,"div"),Hit=RSe(Yy,"g",zit),s8=/\r?\n|\r/g;function qit(e){const t=String(e),n=[];for(s8.lastIndex=0;s8.test(t);)n.push(s8.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const y1={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},NSe={}.hasOwnProperty,Wit=Object.prototype;function Git(e,t){const n=t||{};return aX({file:n.file||void 0,location:!1,schema:n.space==="svg"?Yy:Lk,verbose:n.verbose||!1},e)}function aX(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},FP(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:DSe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=qit(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},FP(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},FP(e,r,n),n}default:return n=Yit(e,t),n}}function DSe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=aX(e,t[n]);r.push(i)}return r}function Yit(e,t){const n=e.schema;e.schema=t.namespaceURI===y1.svg?Yy:Lk;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;NSe.call(Wit,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?Hit:Vit)(t.tagName,i,DSe(e,t.childNodes));if(FP(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&Rw(u.startTag),c=u&&u.endTag&&Rw(u.endTag),f=aX(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function FP(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=Kit(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function Kit(e,t,n){const r=Rw(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)NSe.call(n.attrs,o)&&(s[P6(e.schema,o).property]=Rw(n.attrs[o]));n.startTag;const a=Rw(n.startTag),u=n.endTag?Rw(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function Rw(e){const t=Hle({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=Hle({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function Hle(e){return e.line&&e.column?e:void 0}const qle={}.hasOwnProperty;function PSe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&qle.call(i,e)){const u=String(i[e]);o=qle.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Xit={},Qit={}.hasOwnProperty,OSe=PSe("type",{handlers:{root:Zit,element:ist,text:nst,comment:rst,doctype:tst}});function Jit(e,t){const r=(t||Xit).space;return OSe(e,r==="svg"?Yy:Lk)}function Zit(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=uX(e.children,n,t),vS(e,n),n}function est(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=uX(e.children,n,t),vS(e,n),n}function tst(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return vS(e,t),t}function nst(e){const t={nodeName:"#text",value:e.value,parentNode:null};return vS(e,t),t}function rst(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return vS(e,t),t}function ist(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Yy);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&Qit.call(e.properties,s)){const u=sst(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:y1[o],childNodes:[],parentNode:null};return a.childNodes=uX(e.children,a,r),vS(e,a),e.tagName==="template"&&e.content&&(a.content=est(e.content,r)),a}function sst(e,t,n){const r=P6(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?Wxe(n):tSe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=y1[r.space]}return i}function uX(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=OSe(e[r],n);s.parentNode=t,i.push(s)}return i}function vS(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const ost=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],ast=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),wi="";var X;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(X=X||(X={}));const wu={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function $Se(e){return e>=55296&&e<=57343}function ust(e){return e>=56320&&e<=57343}function lst(e,t){return(e-55296)*1024+9216+t}function MSe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function LSe(e){return e>=64976&&e<=65007||ast.has(e)}var Ne;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ne=Ne||(Ne={}));const cst=65536;class fst{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=cst,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(ust(n))return this.pos++,this._addGap(),lst(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,X.EOF;return this._err(Ne.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;const r=this.html.charCodeAt(n);return r===X.CARRIAGE_RETURN?X.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;let t=this.html.charCodeAt(this.pos);return t===X.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,X.LINE_FEED):t===X.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,$Se(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===X.LINE_FEED||t===X.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){MSe(t)?this._err(Ne.controlCharacterInInputStream):LSe(t)&&this._err(Ne.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Rn;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(Rn=Rn||(Rn={}));function FSe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const Fg=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),dst=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var o8;const hst=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),pst=(o8=String.fromCodePoint)!==null&&o8!==void 0?o8:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function mst(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=hst.get(e))!==null&&t!==void 0?t:e}var io;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(io||(io={}));const gst=32;var dh;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(dh||(dh={}));function Rz(e){return e>=io.ZERO&&e<=io.NINE}function yst(e){return e>=io.UPPER_A&&e<=io.UPPER_F||e>=io.LOWER_A&&e<=io.LOWER_F}function vst(e){return e>=io.UPPER_A&&e<=io.UPPER_Z||e>=io.LOWER_A&&e<=io.LOWER_Z||Rz(e)}function bst(e){return e===io.EQUALS||vst(e)}var Qs;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Qs||(Qs={}));var t1;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(t1||(t1={}));class _st{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Qs.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=t1.Strict}startEntity(t){this.decodeMode=t,this.state=Qs.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Qs.EntityStart:return t.charCodeAt(n)===io.NUM?(this.state=Qs.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Qs.NamedEntity,this.stateNamedEntity(t,n));case Qs.NumericStart:return this.stateNumericStart(t,n);case Qs.NumericDecimal:return this.stateNumericDecimal(t,n);case Qs.NumericHex:return this.stateNumericHex(t,n);case Qs.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|gst)===io.LOWER_X?(this.state=Qs.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Qs.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(Rz(i)||yst(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(Rz(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===io.SEMI)this.consumed+=1;else if(this.decodeMode===t1.Strict)return 0;return this.emitCodePoint(mst(this.result),this.consumed),this.errors&&(t!==io.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&dh.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=jSe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===t1.Attribute&&(s===0||bst(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&dh.VALUE_LENGTH)>>14,s!==0){if(o===io.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==t1.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&dh.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~dh.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Qs.NamedEntity:return this.result!==0&&(this.decodeMode!==t1.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Qs.NumericDecimal:return this.emitNumericEntity(0,2);case Qs.NumericHex:return this.emitNumericEntity(0,3);case Qs.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Qs.EntityStart:return 0}}}function BSe(e){let t="";const n=new _st(e,r=>t+=pst(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function jSe(e,t,n,r){const i=(t&dh.BRANCH_LENGTH)>>7,s=t&dh.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}BSe(Fg);BSe(dst);var Fe;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Fe=Fe||(Fe={}));var P0;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(P0=P0||(P0={}));var Tl;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Tl=Tl||(Tl={}));var Ee;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Ee=Ee||(Ee={}));var N;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(N=N||(N={}));const wst=new Map([[Ee.A,N.A],[Ee.ADDRESS,N.ADDRESS],[Ee.ANNOTATION_XML,N.ANNOTATION_XML],[Ee.APPLET,N.APPLET],[Ee.AREA,N.AREA],[Ee.ARTICLE,N.ARTICLE],[Ee.ASIDE,N.ASIDE],[Ee.B,N.B],[Ee.BASE,N.BASE],[Ee.BASEFONT,N.BASEFONT],[Ee.BGSOUND,N.BGSOUND],[Ee.BIG,N.BIG],[Ee.BLOCKQUOTE,N.BLOCKQUOTE],[Ee.BODY,N.BODY],[Ee.BR,N.BR],[Ee.BUTTON,N.BUTTON],[Ee.CAPTION,N.CAPTION],[Ee.CENTER,N.CENTER],[Ee.CODE,N.CODE],[Ee.COL,N.COL],[Ee.COLGROUP,N.COLGROUP],[Ee.DD,N.DD],[Ee.DESC,N.DESC],[Ee.DETAILS,N.DETAILS],[Ee.DIALOG,N.DIALOG],[Ee.DIR,N.DIR],[Ee.DIV,N.DIV],[Ee.DL,N.DL],[Ee.DT,N.DT],[Ee.EM,N.EM],[Ee.EMBED,N.EMBED],[Ee.FIELDSET,N.FIELDSET],[Ee.FIGCAPTION,N.FIGCAPTION],[Ee.FIGURE,N.FIGURE],[Ee.FONT,N.FONT],[Ee.FOOTER,N.FOOTER],[Ee.FOREIGN_OBJECT,N.FOREIGN_OBJECT],[Ee.FORM,N.FORM],[Ee.FRAME,N.FRAME],[Ee.FRAMESET,N.FRAMESET],[Ee.H1,N.H1],[Ee.H2,N.H2],[Ee.H3,N.H3],[Ee.H4,N.H4],[Ee.H5,N.H5],[Ee.H6,N.H6],[Ee.HEAD,N.HEAD],[Ee.HEADER,N.HEADER],[Ee.HGROUP,N.HGROUP],[Ee.HR,N.HR],[Ee.HTML,N.HTML],[Ee.I,N.I],[Ee.IMG,N.IMG],[Ee.IMAGE,N.IMAGE],[Ee.INPUT,N.INPUT],[Ee.IFRAME,N.IFRAME],[Ee.KEYGEN,N.KEYGEN],[Ee.LABEL,N.LABEL],[Ee.LI,N.LI],[Ee.LINK,N.LINK],[Ee.LISTING,N.LISTING],[Ee.MAIN,N.MAIN],[Ee.MALIGNMARK,N.MALIGNMARK],[Ee.MARQUEE,N.MARQUEE],[Ee.MATH,N.MATH],[Ee.MENU,N.MENU],[Ee.META,N.META],[Ee.MGLYPH,N.MGLYPH],[Ee.MI,N.MI],[Ee.MO,N.MO],[Ee.MN,N.MN],[Ee.MS,N.MS],[Ee.MTEXT,N.MTEXT],[Ee.NAV,N.NAV],[Ee.NOBR,N.NOBR],[Ee.NOFRAMES,N.NOFRAMES],[Ee.NOEMBED,N.NOEMBED],[Ee.NOSCRIPT,N.NOSCRIPT],[Ee.OBJECT,N.OBJECT],[Ee.OL,N.OL],[Ee.OPTGROUP,N.OPTGROUP],[Ee.OPTION,N.OPTION],[Ee.P,N.P],[Ee.PARAM,N.PARAM],[Ee.PLAINTEXT,N.PLAINTEXT],[Ee.PRE,N.PRE],[Ee.RB,N.RB],[Ee.RP,N.RP],[Ee.RT,N.RT],[Ee.RTC,N.RTC],[Ee.RUBY,N.RUBY],[Ee.S,N.S],[Ee.SCRIPT,N.SCRIPT],[Ee.SECTION,N.SECTION],[Ee.SELECT,N.SELECT],[Ee.SOURCE,N.SOURCE],[Ee.SMALL,N.SMALL],[Ee.SPAN,N.SPAN],[Ee.STRIKE,N.STRIKE],[Ee.STRONG,N.STRONG],[Ee.STYLE,N.STYLE],[Ee.SUB,N.SUB],[Ee.SUMMARY,N.SUMMARY],[Ee.SUP,N.SUP],[Ee.TABLE,N.TABLE],[Ee.TBODY,N.TBODY],[Ee.TEMPLATE,N.TEMPLATE],[Ee.TEXTAREA,N.TEXTAREA],[Ee.TFOOT,N.TFOOT],[Ee.TD,N.TD],[Ee.TH,N.TH],[Ee.THEAD,N.THEAD],[Ee.TITLE,N.TITLE],[Ee.TR,N.TR],[Ee.TRACK,N.TRACK],[Ee.TT,N.TT],[Ee.U,N.U],[Ee.UL,N.UL],[Ee.SVG,N.SVG],[Ee.VAR,N.VAR],[Ee.WBR,N.WBR],[Ee.XMP,N.XMP]]);function bS(e){var t;return(t=wst.get(e))!==null&&t!==void 0?t:N.UNKNOWN}const Qe=N,Est={[Fe.HTML]:new Set([Qe.ADDRESS,Qe.APPLET,Qe.AREA,Qe.ARTICLE,Qe.ASIDE,Qe.BASE,Qe.BASEFONT,Qe.BGSOUND,Qe.BLOCKQUOTE,Qe.BODY,Qe.BR,Qe.BUTTON,Qe.CAPTION,Qe.CENTER,Qe.COL,Qe.COLGROUP,Qe.DD,Qe.DETAILS,Qe.DIR,Qe.DIV,Qe.DL,Qe.DT,Qe.EMBED,Qe.FIELDSET,Qe.FIGCAPTION,Qe.FIGURE,Qe.FOOTER,Qe.FORM,Qe.FRAME,Qe.FRAMESET,Qe.H1,Qe.H2,Qe.H3,Qe.H4,Qe.H5,Qe.H6,Qe.HEAD,Qe.HEADER,Qe.HGROUP,Qe.HR,Qe.HTML,Qe.IFRAME,Qe.IMG,Qe.INPUT,Qe.LI,Qe.LINK,Qe.LISTING,Qe.MAIN,Qe.MARQUEE,Qe.MENU,Qe.META,Qe.NAV,Qe.NOEMBED,Qe.NOFRAMES,Qe.NOSCRIPT,Qe.OBJECT,Qe.OL,Qe.P,Qe.PARAM,Qe.PLAINTEXT,Qe.PRE,Qe.SCRIPT,Qe.SECTION,Qe.SELECT,Qe.SOURCE,Qe.STYLE,Qe.SUMMARY,Qe.TABLE,Qe.TBODY,Qe.TD,Qe.TEMPLATE,Qe.TEXTAREA,Qe.TFOOT,Qe.TH,Qe.THEAD,Qe.TITLE,Qe.TR,Qe.TRACK,Qe.UL,Qe.WBR,Qe.XMP]),[Fe.MATHML]:new Set([Qe.MI,Qe.MO,Qe.MN,Qe.MS,Qe.MTEXT,Qe.ANNOTATION_XML]),[Fe.SVG]:new Set([Qe.TITLE,Qe.FOREIGN_OBJECT,Qe.DESC]),[Fe.XLINK]:new Set,[Fe.XML]:new Set,[Fe.XMLNS]:new Set};function USe(e){return e===Qe.H1||e===Qe.H2||e===Qe.H3||e===Qe.H4||e===Qe.H5||e===Qe.H6}Ee.STYLE,Ee.SCRIPT,Ee.XMP,Ee.IFRAME,Ee.NOEMBED,Ee.NOFRAMES,Ee.PLAINTEXT;const xst=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var J;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(J||(J={}));const cs={DATA:J.DATA,RCDATA:J.RCDATA,RAWTEXT:J.RAWTEXT,SCRIPT_DATA:J.SCRIPT_DATA,PLAINTEXT:J.PLAINTEXT,CDATA_SECTION:J.CDATA_SECTION};function DA(e){return e>=X.DIGIT_0&&e<=X.DIGIT_9}function PC(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_Z}function Sst(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_Z}function Bg(e){return Sst(e)||PC(e)}function Nz(e){return Bg(e)||DA(e)}function zSe(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_F}function VSe(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_F}function Tst(e){return DA(e)||zSe(e)||VSe(e)}function ZN(e){return e+32}function HSe(e){return e===X.SPACE||e===X.LINE_FEED||e===X.TABULATION||e===X.FORM_FEED}function Cst(e){return e===X.EQUALS_SIGN||Nz(e)}function Wle(e){return HSe(e)||e===X.SOLIDUS||e===X.GREATER_THAN_SIGN}class Ast{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=J.DATA,this.returnState=J.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new fst(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Rn.START_TAG,tagName:"",tagID:N.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Rn.END_TAG,tagName:"",tagID:N.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:Rn.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:Rn.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(FSe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ne.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=bS(t.tagName),t.type===Rn.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Ne.endTagWithAttributes),t.selfClosing&&this._err(Ne.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case Rn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Rn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Rn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:Rn.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=HSe(t)?Rn.WHITESPACE_CHARACTER:t===X.NULL?Rn.NULL_CHARACTER:Rn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(Rn.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=Fg[0];s>=0&&(s=jSe(Fg,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=Fg[s];const a=o&dh.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==X.SEMICOLON&&this._isCharacterReferenceInAttribute()&&Cst(this.preprocessor.peek(1))?(n=[X.AMPERSAND],s+=u):(n=u===0?[Fg[s]&~dh.VALUE_LENGTH]:u===1?[Fg[++s]]:[Fg[++s],Fg[++s]],r=0,i=t!==X.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Ne.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===J.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case J.DATA:{this._stateData(t);break}case J.RCDATA:{this._stateRcdata(t);break}case J.RAWTEXT:{this._stateRawtext(t);break}case J.SCRIPT_DATA:{this._stateScriptData(t);break}case J.PLAINTEXT:{this._statePlaintext(t);break}case J.TAG_OPEN:{this._stateTagOpen(t);break}case J.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case J.TAG_NAME:{this._stateTagName(t);break}case J.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case J.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case J.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case J.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case J.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case J.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case J.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case J.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case J.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case J.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case J.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case J.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case J.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case J.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case J.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case J.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case J.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case J.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case J.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case J.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case J.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case J.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case J.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case J.BOGUS_COMMENT:{this._stateBogusComment(t);break}case J.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case J.COMMENT_START:{this._stateCommentStart(t);break}case J.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case J.COMMENT:{this._stateComment(t);break}case J.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case J.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case J.COMMENT_END:{this._stateCommentEnd(t);break}case J.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case J.DOCTYPE:{this._stateDoctype(t);break}case J.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case J.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case J.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case J.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case J.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case J.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case J.CDATA_SECTION:{this._stateCdataSection(t);break}case J.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case J.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case J.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case J.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case J.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case J.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case J.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case J.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.TAG_OPEN;break}case X.AMPERSAND:{this.returnState=J.DATA,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitCodePoint(t);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case X.AMPERSAND:{this.returnState=J.RCDATA,this.state=J.CHARACTER_REFERENCE;break}case X.LESS_THAN_SIGN:{this.state=J.RCDATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(wi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.RAWTEXT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(wi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(wi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(wi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Bg(t))this._createStartTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.EXCLAMATION_MARK:{this.state=J.MARKUP_DECLARATION_OPEN;break}case X.SOLIDUS:{this.state=J.END_TAG_OPEN;break}case X.QUESTION_MARK:{this._err(Ne.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t);break}case X.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=J.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Bg(t))this._createEndTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.GREATER_THAN_SIGN:{this._err(Ne.missingEndTagName),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.tagName+=wi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(PC(t)?ZN(t):t)}}_stateRcdataLessThanSign(t){t===X.SOLIDUS?this.state=J.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Bg(t)?(this.state=J.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=J.BEFORE_ATTRIBUTE_NAME,!1;case X.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=J.SELF_CLOSING_START_TAG,!1;case X.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=J.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===X.SOLIDUS?this.state=J.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Bg(t)?(this.state=J.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case X.SOLIDUS:{this.state=J.SCRIPT_DATA_END_TAG_OPEN;break}case X.EXCLAMATION_MARK:{this.state=J.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=J.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Bg(t)?(this.state=J.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(wi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(wi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(wi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===X.SOLIDUS?this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Bg(t)?(this._emitChars("<"),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Bg(t)?(this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(wu.SCRIPT,!1)&&Wle(this.preprocessor.peek(wu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<wu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(wi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(wi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(wi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===X.SOLIDUS?(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(wu.SCRIPT,!1)&&Wle(this.preprocessor.peek(wu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<wu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._err(Ne.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=J.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this._leaveAttrName(),this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._leaveAttrName(),this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:{this._err(Ne.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.name+=wi;break}default:this.currentAttr.name+=String.fromCodePoint(PC(t)?ZN(t):t)}}_stateAfterAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.EQUALS_SIGN:{this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{this.state=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this.state=J.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingAttributeValue),this.state=J.DATA,this.emitCurrentTagToken();break}default:this.state=J.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=wi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case X.APOSTROPHE:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=wi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_UNQUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=wi;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:case X.EQUALS_SIGN:case X.GRAVE_ACCENT:{this._err(Ne.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this._leaveAttrValue(),this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBetweenAttributes),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case X.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.unexpectedSolidusInTag),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.data+=wi;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(wu.DASH_DASH,!0)?(this._createCommentToken(wu.DASH_DASH.length+1),this.state=J.COMMENT_START):this._consumeSequenceIfMatch(wu.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(wu.DOCTYPE.length+1),this.state=J.DOCTYPE):this._consumeSequenceIfMatch(wu.CDATA_START,!0)?this.inForeignNode?this.state=J.CDATA_SECTION:(this._err(Ne.cdataInHtmlContent),this._createCommentToken(wu.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=J.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ne.incorrectlyOpenedComment),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_START_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=J.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END_DASH;break}case X.LESS_THAN_SIGN:{n.data+="<",this.state=J.COMMENT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.data+=wi;break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case X.EXCLAMATION_MARK:{n.data+="!",this.state=J.COMMENT_LESS_THAN_SIGN_BANG;break}case X.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=J.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=J.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==X.GREATER_THAN_SIGN&&t!==X.EOF&&this._err(Ne.nestedComment),this.state=J.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EXCLAMATION_MARK:{this.state=J.COMMENT_END_BANG;break}case X.HYPHEN_MINUS:{n.data+="-";break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{n.data+="--!",this.state=J.COMMENT_END_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ne.incorrectlyClosedComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=J.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case X.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBeforeDoctypeName),this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(PC(t))this._createDoctypeToken(String.fromCharCode(ZN(t))),this.state=J.DOCTYPE_NAME;else switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._createDoctypeToken(wi),this.state=J.DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=J.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.AFTER_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.name+=wi;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(PC(t)?ZN(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(wu.PUBLIC,!1)?this.state=J.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(wu.SYSTEM,!1)?this.state=J.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ne.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.publicId+=wi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.publicId+=wi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.systemId+=wi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.systemId+=wi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter);break}case X.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case X.RIGHT_SQUARE_BRACKET:{this.state=J.CDATA_SECTION_BRACKET;break}case X.EOF:{this._err(Ne.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===X.RIGHT_SQUARE_BRACKET?this.state=J.CDATA_SECTION_END:(this._emitChars("]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA;break}case X.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===X.NUMBER_SIGN?this.state=J.NUMERIC_CHARACTER_REFERENCE:Nz(t)?(this.state=J.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this.state=J.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){Nz(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===X.SEMICOLON&&this._err(Ne.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===X.LATIN_SMALL_X||t===X.LATIN_CAPITAL_X?this.state=J.HEXADEMICAL_CHARACTER_REFERENCE_START:DA(t)?(this.state=J.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Ne.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){Tst(t)?(this.state=J.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Ne.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){zSe(t)?this.charRefCode=this.charRefCode*16+t-55:VSe(t)?this.charRefCode=this.charRefCode*16+t-87:DA(t)?this.charRefCode=this.charRefCode*16+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){DA(t)?this.charRefCode=this.charRefCode*10+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===X.NULL)this._err(Ne.nullCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Ne.characterReferenceOutsideUnicodeRange),this.charRefCode=X.REPLACEMENT_CHARACTER;else if($Se(this.charRefCode))this._err(Ne.surrogateCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(LSe(this.charRefCode))this._err(Ne.noncharacterCharacterReference);else if(MSe(this.charRefCode)||this.charRefCode===X.CARRIAGE_RETURN){this._err(Ne.controlCharacterReference);const n=xst.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const qSe=new Set([N.DD,N.DT,N.LI,N.OPTGROUP,N.OPTION,N.P,N.RB,N.RP,N.RT,N.RTC]),Gle=new Set([...qSe,N.CAPTION,N.COLGROUP,N.TBODY,N.TD,N.TFOOT,N.TH,N.THEAD,N.TR]),eD=new Map([[N.APPLET,Fe.HTML],[N.CAPTION,Fe.HTML],[N.HTML,Fe.HTML],[N.MARQUEE,Fe.HTML],[N.OBJECT,Fe.HTML],[N.TABLE,Fe.HTML],[N.TD,Fe.HTML],[N.TEMPLATE,Fe.HTML],[N.TH,Fe.HTML],[N.ANNOTATION_XML,Fe.MATHML],[N.MI,Fe.MATHML],[N.MN,Fe.MATHML],[N.MO,Fe.MATHML],[N.MS,Fe.MATHML],[N.MTEXT,Fe.MATHML],[N.DESC,Fe.SVG],[N.FOREIGN_OBJECT,Fe.SVG],[N.TITLE,Fe.SVG]]),Ist=[N.H1,N.H2,N.H3,N.H4,N.H5,N.H6],kst=[N.TR,N.TEMPLATE,N.HTML],Rst=[N.TBODY,N.TFOOT,N.THEAD,N.TEMPLATE,N.HTML],Nst=[N.TABLE,N.TEMPLATE,N.HTML],Dst=[N.TD,N.TH];class Pst{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=N.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===N.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Fe.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Fe.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(Ist,Fe.HTML)}popUntilTableCellPopped(){this.popUntilPopped(Dst,Fe.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(Nst,Fe.HTML)}clearBackToTableBodyContext(){this.clearBackTo(Rst,Fe.HTML)}clearBackToTableRowContext(){this.clearBackTo(kst,Fe.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===N.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===N.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if(eD.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(USe(n)&&r===Fe.HTML)return!0;if(eD.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if((r===N.UL||r===N.OL)&&i===Fe.HTML||eD.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if(r===N.BUTTON&&i===Fe.HTML||eD.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Fe.HTML){if(r===t)return!0;if(r===N.TABLE||r===N.TEMPLATE||r===N.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Fe.HTML){if(n===N.TBODY||n===N.THEAD||n===N.TFOOT)return!0;if(n===N.TABLE||n===N.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Fe.HTML){if(r===t)return!0;if(r!==N.OPTION&&r!==N.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;qSe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Gle.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&Gle.has(this.currentTagId);)this.pop()}}const a8=3;var Pf;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Pf=Pf||(Pf={}));const Yle={type:Pf.Marker};class Ost{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===Pf.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<a8)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<a8)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=a8&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(Yle)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Pf.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Pf.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(Yle);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===Pf.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===Pf.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Pf.Element&&n.element===t)}}function Kle(e){return{nodeName:"#text",value:e,parentNode:null}}const ow={createDocument(){return{nodeName:"#document",mode:Tl.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};ow.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(ow.isTextNode(n)){n.value+=t;return}}ow.appendChild(e,Kle(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&ow.isTextNode(r)?r.value+=t:ow.insertBefore(e,Kle(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},WSe="html",$st="about:legacy-compat",Mst="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",GSe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Lst=[...GSe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],Fst=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),YSe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Bst=[...YSe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Xle(e,t){return t.some(n=>e.startsWith(n))}function jst(e){return e.name===WSe&&e.publicId===null&&(e.systemId===null||e.systemId===$st)}function Ust(e){if(e.name!==WSe)return Tl.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===Mst)return Tl.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),Fst.has(n))return Tl.QUIRKS;let r=t===null?Lst:GSe;if(Xle(n,r))return Tl.QUIRKS;if(r=t===null?YSe:Bst,Xle(n,r))return Tl.LIMITED_QUIRKS}return Tl.NO_QUIRKS}const Qle={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},zst="definitionurl",Vst="definitionURL",Hst=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),qst=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Fe.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Fe.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Fe.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Fe.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Fe.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Fe.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Fe.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Fe.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Fe.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Fe.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Fe.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Fe.XMLNS}]]),Wst=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),Gst=new Set([N.B,N.BIG,N.BLOCKQUOTE,N.BODY,N.BR,N.CENTER,N.CODE,N.DD,N.DIV,N.DL,N.DT,N.EM,N.EMBED,N.H1,N.H2,N.H3,N.H4,N.H5,N.H6,N.HEAD,N.HR,N.I,N.IMG,N.LI,N.LISTING,N.MENU,N.META,N.NOBR,N.OL,N.P,N.PRE,N.RUBY,N.S,N.SMALL,N.SPAN,N.STRONG,N.STRIKE,N.SUB,N.SUP,N.TABLE,N.TT,N.U,N.UL,N.VAR]);function Yst(e){const t=e.tagID;return t===N.FONT&&e.attrs.some(({name:r})=>r===P0.COLOR||r===P0.SIZE||r===P0.FACE)||Gst.has(t)}function KSe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===zst){e.attrs[t].name=Vst;break}}function XSe(e){for(let t=0;t<e.attrs.length;t++){const n=Hst.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function lX(e){for(let t=0;t<e.attrs.length;t++){const n=qst.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function Kst(e){const t=Wst.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=bS(e.tagName))}function Xst(e,t){return t===Fe.MATHML&&(e===N.MI||e===N.MO||e===N.MN||e===N.MS||e===N.MTEXT)}function Qst(e,t,n){if(t===Fe.MATHML&&e===N.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===P0.ENCODING){const i=n[r].value.toLowerCase();return i===Qle.TEXT_HTML||i===Qle.APPLICATION_XML}}return t===Fe.SVG&&(e===N.FOREIGN_OBJECT||e===N.DESC||e===N.TITLE)}function Jst(e,t,n,r){return(!r||r===Fe.HTML)&&Qst(e,t,n)||(!r||r===Fe.MATHML)&&Xst(e,t)}const Zst="hidden",eot=8,tot=3;var ie;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ie||(ie={}));const not={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},QSe=new Set([N.TABLE,N.TBODY,N.TFOOT,N.THEAD,N.TR]),Jle={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:ow,onParseError:null};let Zle=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ie.INITIAL,this.originalInsertionMode=ie.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Jle,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new Ast(this.options,this),this.activeFormattingElements=new Ost(this.treeAdapter),this.fragmentContextID=r?bS(this.treeAdapter.getTagName(r)):N.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new Pst(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Jle,...n};t??(t=r.treeAdapter.createElement(Ee.TEMPLATE,Fe.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Fe.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===N.TEMPLATE&&s.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:not,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Fe.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Fe.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ie.TEXT}switchToPlaintextParsing(){this.insertionMode=ie.TEXT,this.originalInsertionMode=ie.IN_BODY,this.tokenizer.state=cs.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Ee.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Fe.HTML))switch(this.fragmentContextID){case N.TITLE:case N.TEXTAREA:{this.tokenizer.state=cs.RCDATA;break}case N.STYLE:case N.XMP:case N.IFRAME:case N.NOEMBED:case N.NOFRAMES:case N.NOSCRIPT:{this.tokenizer.state=cs.RAWTEXT;break}case N.SCRIPT:{this.tokenizer.state=cs.SCRIPT_DATA;break}case N.PLAINTEXT:{this.tokenizer.state=cs.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Fe.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Fe.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Ee.HTML,Fe.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,N.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===Rn.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===N.SVG&&this.treeAdapter.getTagName(n)===Ee.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Fe.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===N.MGLYPH||t.tagID===N.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Fe.HTML)}_processToken(t){switch(t.type){case Rn.CHARACTER:{this.onCharacter(t);break}case Rn.NULL_CHARACTER:{this.onNullCharacter(t);break}case Rn.COMMENT:{this.onComment(t);break}case Rn.DOCTYPE:{this.onDoctype(t);break}case Rn.START_TAG:{this._processStartTag(t);break}case Rn.END_TAG:{this.onEndTag(t);break}case Rn.EOF:{this.onEof(t);break}case Rn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return Jst(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===Pf.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ie.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(N.P),this.openElements.popUntilTagNamePopped(N.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case N.TR:{this.insertionMode=ie.IN_ROW;return}case N.TBODY:case N.THEAD:case N.TFOOT:{this.insertionMode=ie.IN_TABLE_BODY;return}case N.CAPTION:{this.insertionMode=ie.IN_CAPTION;return}case N.COLGROUP:{this.insertionMode=ie.IN_COLUMN_GROUP;return}case N.TABLE:{this.insertionMode=ie.IN_TABLE;return}case N.BODY:{this.insertionMode=ie.IN_BODY;return}case N.FRAMESET:{this.insertionMode=ie.IN_FRAMESET;return}case N.SELECT:{this._resetInsertionModeForSelect(t);return}case N.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case N.HTML:{this.insertionMode=this.headElement?ie.AFTER_HEAD:ie.BEFORE_HEAD;return}case N.TD:case N.TH:{if(t>0){this.insertionMode=ie.IN_CELL;return}break}case N.HEAD:{if(t>0){this.insertionMode=ie.IN_HEAD;return}break}}this.insertionMode=ie.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===N.TEMPLATE)break;if(r===N.TABLE){this.insertionMode=ie.IN_SELECT_IN_TABLE;return}}this.insertionMode=ie.IN_SELECT}_isElementCausesFosterParenting(t){return QSe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case N.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Fe.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case N.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return Est[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Dat(this,t);return}switch(this.insertionMode){case ie.INITIAL:{LT(this,t);break}case ie.BEFORE_HTML:{PA(this,t);break}case ie.BEFORE_HEAD:{OA(this,t);break}case ie.IN_HEAD:{$A(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{MA(this,t);break}case ie.AFTER_HEAD:{LA(this,t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:{ZSe(this,t);break}case ie.TEXT:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{u8(this,t);break}case ie.IN_TABLE_TEXT:{sTe(this,t);break}case ie.IN_COLUMN_GROUP:{C$(this,t);break}case ie.AFTER_BODY:{A$(this,t);break}case ie.AFTER_AFTER_BODY:{BP(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Nat(this,t);return}switch(this.insertionMode){case ie.INITIAL:{LT(this,t);break}case ie.BEFORE_HTML:{PA(this,t);break}case ie.BEFORE_HEAD:{OA(this,t);break}case ie.IN_HEAD:{$A(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{MA(this,t);break}case ie.AFTER_HEAD:{LA(this,t);break}case ie.TEXT:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{u8(this,t);break}case ie.IN_COLUMN_GROUP:{C$(this,t);break}case ie.AFTER_BODY:{A$(this,t);break}case ie.AFTER_AFTER_BODY:{BP(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){Dz(this,t);return}switch(this.insertionMode){case ie.INITIAL:case ie.BEFORE_HTML:case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_TEMPLATE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{Dz(this,t);break}case ie.IN_TABLE_TEXT:{FT(this,t);break}case ie.AFTER_BODY:{lot(this,t);break}case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{cot(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ie.INITIAL:{fot(this,t);break}case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:{this._err(t,Ne.misplacedDoctype);break}case ie.IN_TABLE_TEXT:{FT(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Ne.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?Pat(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{LT(this,t);break}case ie.BEFORE_HTML:{dot(this,t);break}case ie.BEFORE_HEAD:{pot(this,t);break}case ie.IN_HEAD:{gd(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{yot(this,t);break}case ie.AFTER_HEAD:{bot(this,t);break}case ie.IN_BODY:{Oa(this,t);break}case ie.IN_TABLE:{HE(this,t);break}case ie.IN_TABLE_TEXT:{FT(this,t);break}case ie.IN_CAPTION:{mat(this,t);break}case ie.IN_COLUMN_GROUP:{dX(this,t);break}case ie.IN_TABLE_BODY:{j6(this,t);break}case ie.IN_ROW:{U6(this,t);break}case ie.IN_CELL:{vat(this,t);break}case ie.IN_SELECT:{uTe(this,t);break}case ie.IN_SELECT_IN_TABLE:{_at(this,t);break}case ie.IN_TEMPLATE:{Eat(this,t);break}case ie.AFTER_BODY:{Sat(this,t);break}case ie.IN_FRAMESET:{Tat(this,t);break}case ie.AFTER_FRAMESET:{Aat(this,t);break}case ie.AFTER_AFTER_BODY:{kat(this,t);break}case ie.AFTER_AFTER_FRAMESET:{Rat(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?Oat(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{LT(this,t);break}case ie.BEFORE_HTML:{hot(this,t);break}case ie.BEFORE_HEAD:{mot(this,t);break}case ie.IN_HEAD:{got(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{vot(this,t);break}case ie.AFTER_HEAD:{_ot(this,t);break}case ie.IN_BODY:{B6(this,t);break}case ie.TEXT:{sat(this,t);break}case ie.IN_TABLE:{Y2(this,t);break}case ie.IN_TABLE_TEXT:{FT(this,t);break}case ie.IN_CAPTION:{gat(this,t);break}case ie.IN_COLUMN_GROUP:{yat(this,t);break}case ie.IN_TABLE_BODY:{Pz(this,t);break}case ie.IN_ROW:{aTe(this,t);break}case ie.IN_CELL:{bat(this,t);break}case ie.IN_SELECT:{lTe(this,t);break}case ie.IN_SELECT_IN_TABLE:{wat(this,t);break}case ie.IN_TEMPLATE:{xat(this,t);break}case ie.AFTER_BODY:{fTe(this,t);break}case ie.IN_FRAMESET:{Cat(this,t);break}case ie.AFTER_FRAMESET:{Iat(this,t);break}case ie.AFTER_AFTER_BODY:{BP(this,t);break}}}onEof(t){switch(this.insertionMode){case ie.INITIAL:{LT(this,t);break}case ie.BEFORE_HTML:{PA(this,t);break}case ie.BEFORE_HEAD:{OA(this,t);break}case ie.IN_HEAD:{$A(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{MA(this,t);break}case ie.AFTER_HEAD:{LA(this,t);break}case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{rTe(this,t);break}case ie.TEXT:{oat(this,t);break}case ie.IN_TABLE_TEXT:{FT(this,t);break}case ie.IN_TEMPLATE:{cTe(this,t);break}case ie.AFTER_BODY:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{fX(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===X.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.TEXT:case ie.IN_COLUMN_GROUP:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{this._insertCharacters(t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:case ie.AFTER_BODY:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{JSe(this,t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{u8(this,t);break}case ie.IN_TABLE_TEXT:{iTe(this,t);break}}}};function rot(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):nTe(e,t),n}function iot(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function sot(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=tot;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=oot(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function oot(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function aot(e,t,n){const r=e.treeAdapter.getTagName(t),i=bS(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===N.TEMPLATE&&s===Fe.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function uot(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function cX(e,t){for(let n=0;n<eot;n++){const r=rot(e,t);if(!r)break;const i=iot(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=sot(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&aot(e,o,s),uot(e,i,r)}}function Dz(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function lot(e,t){e._appendCommentNode(t,e.openElements.items[0])}function cot(e,t){e._appendCommentNode(t,e.document)}function fX(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function fot(e,t){e._setDocumentType(t);const n=t.forceQuirks?Tl.QUIRKS:Ust(t);jst(t)||e._err(t,Ne.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ie.BEFORE_HTML}function LT(e,t){e._err(t,Ne.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Tl.QUIRKS),e.insertionMode=ie.BEFORE_HTML,e._processToken(t)}function dot(e,t){t.tagID===N.HTML?(e._insertElement(t,Fe.HTML),e.insertionMode=ie.BEFORE_HEAD):PA(e,t)}function hot(e,t){const n=t.tagID;(n===N.HTML||n===N.HEAD||n===N.BODY||n===N.BR)&&PA(e,t)}function PA(e,t){e._insertFakeRootElement(),e.insertionMode=ie.BEFORE_HEAD,e._processToken(t)}function pot(e,t){switch(t.tagID){case N.HTML:{Oa(e,t);break}case N.HEAD:{e._insertElement(t,Fe.HTML),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD;break}default:OA(e,t)}}function mot(e,t){const n=t.tagID;n===N.HEAD||n===N.BODY||n===N.HTML||n===N.BR?OA(e,t):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function OA(e,t){e._insertFakeElement(Ee.HEAD,N.HEAD),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD,e._processToken(t)}function gd(e,t){switch(t.tagID){case N.HTML:{Oa(e,t);break}case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case N.TITLE:{e._switchToTextParsing(t,cs.RCDATA);break}case N.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,cs.RAWTEXT):(e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_HEAD_NO_SCRIPT);break}case N.NOFRAMES:case N.STYLE:{e._switchToTextParsing(t,cs.RAWTEXT);break}case N.SCRIPT:{e._switchToTextParsing(t,cs.SCRIPT_DATA);break}case N.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ie.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE);break}case N.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:$A(e,t)}}function got(e,t){switch(t.tagID){case N.HEAD:{e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD;break}case N.BODY:case N.BR:case N.HTML:{$A(e,t);break}case N.TEMPLATE:{e_(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function e_(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==N.TEMPLATE&&e._err(t,Ne.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(N.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function $A(e,t){e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD,e._processToken(t)}function yot(e,t){switch(t.tagID){case N.HTML:{Oa(e,t);break}case N.BASEFONT:case N.BGSOUND:case N.HEAD:case N.LINK:case N.META:case N.NOFRAMES:case N.STYLE:{gd(e,t);break}case N.NOSCRIPT:{e._err(t,Ne.nestedNoscriptInHead);break}default:MA(e,t)}}function vot(e,t){switch(t.tagID){case N.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ie.IN_HEAD;break}case N.BR:{MA(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function MA(e,t){const n=t.type===Rn.EOF?Ne.openElementsLeftAfterEof:Ne.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ie.IN_HEAD,e._processToken(t)}function bot(e,t){switch(t.tagID){case N.HTML:{Oa(e,t);break}case N.BODY:{e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_BODY;break}case N.FRAMESET:{e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_FRAMESET;break}case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:case N.NOFRAMES:case N.SCRIPT:case N.STYLE:case N.TEMPLATE:case N.TITLE:{e._err(t,Ne.abandonedHeadElementChild),e.openElements.push(e.headElement,N.HEAD),gd(e,t),e.openElements.remove(e.headElement);break}case N.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:LA(e,t)}}function _ot(e,t){switch(t.tagID){case N.BODY:case N.HTML:case N.BR:{LA(e,t);break}case N.TEMPLATE:{e_(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function LA(e,t){e._insertFakeElement(Ee.BODY,N.BODY),e.insertionMode=ie.IN_BODY,F6(e,t)}function F6(e,t){switch(t.type){case Rn.CHARACTER:{ZSe(e,t);break}case Rn.WHITESPACE_CHARACTER:{JSe(e,t);break}case Rn.COMMENT:{Dz(e,t);break}case Rn.START_TAG:{Oa(e,t);break}case Rn.END_TAG:{B6(e,t);break}case Rn.EOF:{rTe(e,t);break}}}function JSe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function ZSe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function wot(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function Eot(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function xot(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_FRAMESET)}function Sot(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Fe.HTML)}function Tot(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),USe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Fe.HTML)}function Cot(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function Aot(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),n||(e.formElement=e.openElements.current))}function Iot(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===N.LI&&i===N.LI||(n===N.DD||n===N.DT)&&(i===N.DD||i===N.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==N.ADDRESS&&i!==N.DIV&&i!==N.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Fe.HTML)}function kot(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.tokenizer.state=cs.PLAINTEXT}function Rot(e,t){e.openElements.hasInScope(N.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.framesetOk=!1}function Not(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Ee.A);n&&(cX(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Dot(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Pot(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(N.NOBR)&&(cX(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Oot(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function $ot(e,t){e.treeAdapter.getDocumentMode(e.document)!==Tl.QUIRKS&&e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_TABLE}function eTe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Fe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function tTe(e){const t=FSe(e,P0.TYPE);return t!=null&&t.toLowerCase()===Zst}function Mot(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Fe.HTML),tTe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function Lot(e,t){e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0}function Fot(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._appendElement(t,Fe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Bot(e,t){t.tagName=Ee.IMG,t.tagID=N.IMG,eTe(e,t)}function jot(e,t){e._insertElement(t,Fe.HTML),e.skipNextNewLine=!0,e.tokenizer.state=cs.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ie.TEXT}function Uot(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,cs.RAWTEXT)}function zot(e,t){e.framesetOk=!1,e._switchToTextParsing(t,cs.RAWTEXT)}function ece(e,t){e._switchToTextParsing(t,cs.RAWTEXT)}function Vot(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ie.IN_TABLE||e.insertionMode===ie.IN_CAPTION||e.insertionMode===ie.IN_TABLE_BODY||e.insertionMode===ie.IN_ROW||e.insertionMode===ie.IN_CELL?ie.IN_SELECT_IN_TABLE:ie.IN_SELECT}function Hot(e,t){e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML)}function qot(e,t){e.openElements.hasInScope(N.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Fe.HTML)}function Wot(e,t){e.openElements.hasInScope(N.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(N.RTC),e._insertElement(t,Fe.HTML)}function Got(e,t){e._reconstructActiveFormattingElements(),KSe(t),lX(t),t.selfClosing?e._appendElement(t,Fe.MATHML):e._insertElement(t,Fe.MATHML),t.ackSelfClosing=!0}function Yot(e,t){e._reconstructActiveFormattingElements(),XSe(t),lX(t),t.selfClosing?e._appendElement(t,Fe.SVG):e._insertElement(t,Fe.SVG),t.ackSelfClosing=!0}function tce(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML)}function Oa(e,t){switch(t.tagID){case N.I:case N.S:case N.B:case N.U:case N.EM:case N.TT:case N.BIG:case N.CODE:case N.FONT:case N.SMALL:case N.STRIKE:case N.STRONG:{Dot(e,t);break}case N.A:{Not(e,t);break}case N.H1:case N.H2:case N.H3:case N.H4:case N.H5:case N.H6:{Tot(e,t);break}case N.P:case N.DL:case N.OL:case N.UL:case N.DIV:case N.DIR:case N.NAV:case N.MAIN:case N.MENU:case N.ASIDE:case N.CENTER:case N.FIGURE:case N.FOOTER:case N.HEADER:case N.HGROUP:case N.DIALOG:case N.DETAILS:case N.ADDRESS:case N.ARTICLE:case N.SECTION:case N.SUMMARY:case N.FIELDSET:case N.BLOCKQUOTE:case N.FIGCAPTION:{Sot(e,t);break}case N.LI:case N.DD:case N.DT:{Iot(e,t);break}case N.BR:case N.IMG:case N.WBR:case N.AREA:case N.EMBED:case N.KEYGEN:{eTe(e,t);break}case N.HR:{Fot(e,t);break}case N.RB:case N.RTC:{qot(e,t);break}case N.RT:case N.RP:{Wot(e,t);break}case N.PRE:case N.LISTING:{Cot(e,t);break}case N.XMP:{Uot(e,t);break}case N.SVG:{Yot(e,t);break}case N.HTML:{wot(e,t);break}case N.BASE:case N.LINK:case N.META:case N.STYLE:case N.TITLE:case N.SCRIPT:case N.BGSOUND:case N.BASEFONT:case N.TEMPLATE:{gd(e,t);break}case N.BODY:{Eot(e,t);break}case N.FORM:{Aot(e,t);break}case N.NOBR:{Pot(e,t);break}case N.MATH:{Got(e,t);break}case N.TABLE:{$ot(e,t);break}case N.INPUT:{Mot(e,t);break}case N.PARAM:case N.TRACK:case N.SOURCE:{Lot(e,t);break}case N.IMAGE:{Bot(e,t);break}case N.BUTTON:{Rot(e,t);break}case N.APPLET:case N.OBJECT:case N.MARQUEE:{Oot(e,t);break}case N.IFRAME:{zot(e,t);break}case N.SELECT:{Vot(e,t);break}case N.OPTION:case N.OPTGROUP:{Hot(e,t);break}case N.NOEMBED:{ece(e,t);break}case N.FRAMESET:{xot(e,t);break}case N.TEXTAREA:{jot(e,t);break}case N.NOSCRIPT:{e.options.scriptingEnabled?ece(e,t):tce(e,t);break}case N.PLAINTEXT:{kot(e,t);break}case N.COL:case N.TH:case N.TD:case N.TR:case N.HEAD:case N.FRAME:case N.TBODY:case N.TFOOT:case N.THEAD:case N.CAPTION:case N.COLGROUP:break;default:tce(e,t)}}function Kot(e,t){if(e.openElements.hasInScope(N.BODY)&&(e.insertionMode=ie.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function Xot(e,t){e.openElements.hasInScope(N.BODY)&&(e.insertionMode=ie.AFTER_BODY,fTe(e,t))}function Qot(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function Jot(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(N.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(N.FORM):n&&e.openElements.remove(n))}function Zot(e){e.openElements.hasInButtonScope(N.P)||e._insertFakeElement(Ee.P,N.P),e._closePElement()}function eat(e){e.openElements.hasInListItemScope(N.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(N.LI),e.openElements.popUntilTagNamePopped(N.LI))}function tat(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function nat(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function rat(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function iat(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Ee.BR,N.BR),e.openElements.pop(),e.framesetOk=!1}function nTe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==N.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function B6(e,t){switch(t.tagID){case N.A:case N.B:case N.I:case N.S:case N.U:case N.EM:case N.TT:case N.BIG:case N.CODE:case N.FONT:case N.NOBR:case N.SMALL:case N.STRIKE:case N.STRONG:{cX(e,t);break}case N.P:{Zot(e);break}case N.DL:case N.UL:case N.OL:case N.DIR:case N.DIV:case N.NAV:case N.PRE:case N.MAIN:case N.MENU:case N.ASIDE:case N.BUTTON:case N.CENTER:case N.FIGURE:case N.FOOTER:case N.HEADER:case N.HGROUP:case N.DIALOG:case N.ADDRESS:case N.ARTICLE:case N.DETAILS:case N.SECTION:case N.SUMMARY:case N.LISTING:case N.FIELDSET:case N.BLOCKQUOTE:case N.FIGCAPTION:{Qot(e,t);break}case N.LI:{eat(e);break}case N.DD:case N.DT:{tat(e,t);break}case N.H1:case N.H2:case N.H3:case N.H4:case N.H5:case N.H6:{nat(e);break}case N.BR:{iat(e);break}case N.BODY:{Kot(e,t);break}case N.HTML:{Xot(e,t);break}case N.FORM:{Jot(e);break}case N.APPLET:case N.OBJECT:case N.MARQUEE:{rat(e,t);break}case N.TEMPLATE:{e_(e,t);break}default:nTe(e,t)}}function rTe(e,t){e.tmplInsertionModeStack.length>0?cTe(e,t):fX(e,t)}function sat(e,t){var n;t.tagID===N.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function oat(e,t){e._err(t,Ne.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function u8(e,t){if(QSe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ie.IN_TABLE_TEXT,t.type){case Rn.CHARACTER:{sTe(e,t);break}case Rn.WHITESPACE_CHARACTER:{iTe(e,t);break}}else Bk(e,t)}function aat(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_CAPTION}function uat(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_COLUMN_GROUP}function lat(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ee.COLGROUP,N.COLGROUP),e.insertionMode=ie.IN_COLUMN_GROUP,dX(e,t)}function cat(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_TABLE_BODY}function fat(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ee.TBODY,N.TBODY),e.insertionMode=ie.IN_TABLE_BODY,j6(e,t)}function dat(e,t){e.openElements.hasInTableScope(N.TABLE)&&(e.openElements.popUntilTagNamePopped(N.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function hat(e,t){tTe(t)?e._appendElement(t,Fe.HTML):Bk(e,t),t.ackSelfClosing=!0}function pat(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Fe.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function HE(e,t){switch(t.tagID){case N.TD:case N.TH:case N.TR:{fat(e,t);break}case N.STYLE:case N.SCRIPT:case N.TEMPLATE:{gd(e,t);break}case N.COL:{lat(e,t);break}case N.FORM:{pat(e,t);break}case N.TABLE:{dat(e,t);break}case N.TBODY:case N.TFOOT:case N.THEAD:{cat(e,t);break}case N.INPUT:{hat(e,t);break}case N.CAPTION:{aat(e,t);break}case N.COLGROUP:{uat(e,t);break}default:Bk(e,t)}}function Y2(e,t){switch(t.tagID){case N.TABLE:{e.openElements.hasInTableScope(N.TABLE)&&(e.openElements.popUntilTagNamePopped(N.TABLE),e._resetInsertionMode());break}case N.TEMPLATE:{e_(e,t);break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TBODY:case N.TD:case N.TFOOT:case N.TH:case N.THEAD:case N.TR:break;default:Bk(e,t)}}function Bk(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,F6(e,t),e.fosterParentingEnabled=n}function iTe(e,t){e.pendingCharacterTokens.push(t)}function sTe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function FT(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)Bk(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const oTe=new Set([N.CAPTION,N.COL,N.COLGROUP,N.TBODY,N.TD,N.TFOOT,N.TH,N.THEAD,N.TR]);function mat(e,t){const n=t.tagID;oTe.has(n)?e.openElements.hasInTableScope(N.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,HE(e,t)):Oa(e,t)}function gat(e,t){const n=t.tagID;switch(n){case N.CAPTION:case N.TABLE:{e.openElements.hasInTableScope(N.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,n===N.TABLE&&Y2(e,t));break}case N.BODY:case N.COL:case N.COLGROUP:case N.HTML:case N.TBODY:case N.TD:case N.TFOOT:case N.TH:case N.THEAD:case N.TR:break;default:B6(e,t)}}function dX(e,t){switch(t.tagID){case N.HTML:{Oa(e,t);break}case N.COL:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case N.TEMPLATE:{gd(e,t);break}default:C$(e,t)}}function yat(e,t){switch(t.tagID){case N.COLGROUP:{e.openElements.currentTagId===N.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case N.TEMPLATE:{e_(e,t);break}case N.COL:break;default:C$(e,t)}}function C$(e,t){e.openElements.currentTagId===N.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE,e._processToken(t))}function j6(e,t){switch(t.tagID){case N.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_ROW;break}case N.TH:case N.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Ee.TR,N.TR),e.insertionMode=ie.IN_ROW,U6(e,t);break}case N.CAPTION:case N.COL:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,HE(e,t));break}default:HE(e,t)}}function Pz(e,t){const n=t.tagID;switch(t.tagID){case N.TBODY:case N.TFOOT:case N.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case N.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,Y2(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TD:case N.TH:case N.TR:break;default:Y2(e,t)}}function U6(e,t){switch(t.tagID){case N.TH:case N.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_CELL,e.activeFormattingElements.insertMarker();break}case N.CAPTION:case N.COL:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:case N.TR:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,j6(e,t));break}default:HE(e,t)}}function aTe(e,t){switch(t.tagID){case N.TR:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY);break}case N.TABLE:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,Pz(e,t));break}case N.TBODY:case N.TFOOT:case N.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(N.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,Pz(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TD:case N.TH:break;default:Y2(e,t)}}function vat(e,t){const n=t.tagID;oTe.has(n)?(e.openElements.hasInTableScope(N.TD)||e.openElements.hasInTableScope(N.TH))&&(e._closeTableCell(),U6(e,t)):Oa(e,t)}function bat(e,t){const n=t.tagID;switch(n){case N.TD:case N.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_ROW);break}case N.TABLE:case N.TBODY:case N.TFOOT:case N.THEAD:case N.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),aTe(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:break;default:B6(e,t)}}function uTe(e,t){switch(t.tagID){case N.HTML:{Oa(e,t);break}case N.OPTION:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e._insertElement(t,Fe.HTML);break}case N.OPTGROUP:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e.openElements.currentTagId===N.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Fe.HTML);break}case N.INPUT:case N.KEYGEN:case N.TEXTAREA:case N.SELECT:{e.openElements.hasInSelectScope(N.SELECT)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),t.tagID!==N.SELECT&&e._processStartTag(t));break}case N.SCRIPT:case N.TEMPLATE:{gd(e,t);break}}}function lTe(e,t){switch(t.tagID){case N.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===N.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===N.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===N.OPTGROUP&&e.openElements.pop();break}case N.OPTION:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop();break}case N.SELECT:{e.openElements.hasInSelectScope(N.SELECT)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode());break}case N.TEMPLATE:{e_(e,t);break}}}function _at(e,t){const n=t.tagID;n===N.CAPTION||n===N.TABLE||n===N.TBODY||n===N.TFOOT||n===N.THEAD||n===N.TR||n===N.TD||n===N.TH?(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),e._processStartTag(t)):uTe(e,t)}function wat(e,t){const n=t.tagID;n===N.CAPTION||n===N.TABLE||n===N.TBODY||n===N.TFOOT||n===N.THEAD||n===N.TR||n===N.TD||n===N.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),e.onEndTag(t)):lTe(e,t)}function Eat(e,t){switch(t.tagID){case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:case N.NOFRAMES:case N.SCRIPT:case N.STYLE:case N.TEMPLATE:case N.TITLE:{gd(e,t);break}case N.CAPTION:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:{e.tmplInsertionModeStack[0]=ie.IN_TABLE,e.insertionMode=ie.IN_TABLE,HE(e,t);break}case N.COL:{e.tmplInsertionModeStack[0]=ie.IN_COLUMN_GROUP,e.insertionMode=ie.IN_COLUMN_GROUP,dX(e,t);break}case N.TR:{e.tmplInsertionModeStack[0]=ie.IN_TABLE_BODY,e.insertionMode=ie.IN_TABLE_BODY,j6(e,t);break}case N.TD:case N.TH:{e.tmplInsertionModeStack[0]=ie.IN_ROW,e.insertionMode=ie.IN_ROW,U6(e,t);break}default:e.tmplInsertionModeStack[0]=ie.IN_BODY,e.insertionMode=ie.IN_BODY,Oa(e,t)}}function xat(e,t){t.tagID===N.TEMPLATE&&e_(e,t)}function cTe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(N.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):fX(e,t)}function Sat(e,t){t.tagID===N.HTML?Oa(e,t):A$(e,t)}function fTe(e,t){var n;if(t.tagID===N.HTML){if(e.fragmentContext||(e.insertionMode=ie.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===N.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else A$(e,t)}function A$(e,t){e.insertionMode=ie.IN_BODY,F6(e,t)}function Tat(e,t){switch(t.tagID){case N.HTML:{Oa(e,t);break}case N.FRAMESET:{e._insertElement(t,Fe.HTML);break}case N.FRAME:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case N.NOFRAMES:{gd(e,t);break}}}function Cat(e,t){t.tagID===N.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==N.FRAMESET&&(e.insertionMode=ie.AFTER_FRAMESET))}function Aat(e,t){switch(t.tagID){case N.HTML:{Oa(e,t);break}case N.NOFRAMES:{gd(e,t);break}}}function Iat(e,t){t.tagID===N.HTML&&(e.insertionMode=ie.AFTER_AFTER_FRAMESET)}function kat(e,t){t.tagID===N.HTML?Oa(e,t):BP(e,t)}function BP(e,t){e.insertionMode=ie.IN_BODY,F6(e,t)}function Rat(e,t){switch(t.tagID){case N.HTML:{Oa(e,t);break}case N.NOFRAMES:{gd(e,t);break}}}function Nat(e,t){t.chars=wi,e._insertCharacters(t)}function Dat(e,t){e._insertCharacters(t),e.framesetOk=!1}function dTe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Fe.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function Pat(e,t){if(Yst(t))dTe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Fe.MATHML?KSe(t):r===Fe.SVG&&(Kst(t),XSe(t)),lX(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function Oat(e,t){if(t.tagID===N.P||t.tagID===N.BR){dTe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Fe.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Ee.AREA,Ee.BASE,Ee.BASEFONT,Ee.BGSOUND,Ee.BR,Ee.COL,Ee.EMBED,Ee.FRAME,Ee.HR,Ee.IMG,Ee.INPUT,Ee.KEYGEN,Ee.LINK,Ee.META,Ee.PARAM,Ee.SOURCE,Ee.TRACK,Ee.WBR;const $at=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),nce={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function hTe(e,t){const n=qat(e),r=PSe("type",{handlers:{root:Mat,element:Lat,text:Fat,comment:mTe,doctype:Bat,raw:Uat},unknown:zat}),i={parser:n?new Zle(nce):Zle.getFragmentParser(void 0,nce),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),_S(i,sp());const s=n?i.parser.document:i.parser.getFragment(),o=Git(s,{file:i.options.file});return i.stitches&&sX(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function pTe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function Mat(e,t){pTe(e.children,t)}function Lat(e,t){Vat(e,t),pTe(e.children,t),Hat(e,t)}function Fat(e,t){const n={type:Rn.CHARACTER,chars:e.value,location:jk(e)};_S(t,sp(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Bat(e,t){const n={type:Rn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:jk(e)};_S(t,sp(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function jat(e,t){t.stitches=!0;const n=Wat(e);if("children"in e&&"children"in n){const r=hTe({type:"root",children:e.children},t.options);n.children=r.children}mTe({type:"comment",value:{stitch:n}},t)}function mTe(e,t){const n=e.value,r={type:Rn.COMMENT,data:n,location:jk(e)};_S(t,sp(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function Uat(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,gTe(t,sp(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function zat(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))jat(n,t);else{let r="";throw $at.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function _S(e,t){gTe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=cs.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function gTe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function Vat(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===cs.PLAINTEXT)return;_S(t,sp(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:y1.html;i===y1.html&&n==="svg"&&(i=y1.svg);const s=Jit({...e,children:[]},{space:i===y1.svg?"svg":"html"}),o={type:Rn.START_TAG,tagName:n,tagID:bS(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:jk(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function Hat(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&ost.includes(n)||t.parser.tokenizer.state===cs.PLAINTEXT)return;_S(t,O6(e));const r={type:Rn.END_TAG,tagName:n,tagID:bS(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:jk(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===cs.RCDATA||t.parser.tokenizer.state===cs.RAWTEXT||t.parser.tokenizer.state===cs.SCRIPT_DATA)&&(t.parser.tokenizer.state=cs.DATA)}function qat(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function jk(e){const t=sp(e)||{line:void 0,column:void 0,offset:void 0},n=O6(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function Wat(e){return"children"in e?VE({...e,children:[]}):VE(e)}function Gat(e){return function(t,n){return hTe(t,{...e,file:n})}}function iu({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return _.jsx(cg,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return _.jsx(Je,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return _.jsx($i,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return _.jsx($i,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return _.jsx($i,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return _.jsx($i,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return _.jsx($i,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return _.jsx($i,{...s,order:6,...s,pb:12})},a({node:i,...s}){return _.jsx(uS,{...s,ref:void 0})},ul({node:i,...s}){return _.jsx(Qf,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return _.jsx(Qf,{type:"ordered",withPadding:!0,...o,pb:8})}};return _.jsx(Oit,{components:n,rehypePlugins:[Gat],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function Oz({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return _.jsx(iu,{text:n})}const Yat="https://github.com/revisit-studies/study/tree/main/public/";function Kat({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=dg();return _.jsx(yi.Main,{children:_.jsxs(Wc,{size:"xs",px:"xs",children:[_.jsx(cg,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${ip}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),_.jsx(Je,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=qxe(i);return _.jsx(Ss,{onClick:()=>{r(`/${o}`)},my:"sm",style:{width:"100%"},children:_.jsxs(Kb,{shadow:"sm",radius:"md",withBorder:!0,children:[s.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(Je,{fw:"bold",children:i}),_.jsxs(Gt,{align:"center",direction:"row",children:[_.jsx(Yue,{color:"red"}),_.jsx(Je,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),_.jsx(Oz,{issues:s.errors,type:"error"})]}):_.jsxs(_.Fragment,{children:[_.jsx(Je,{fw:"bold",children:s.studyMetadata.title}),_.jsxs(Je,{c:"dimmed",children:[_.jsx(Je,{span:!0,fw:500,children:"Authors: "}),s.studyMetadata.authors]}),_.jsx(Je,{c:"dimmed",children:s.studyMetadata.description}),_.jsx(Je,{c:"dimmed",ta:"right",style:{paddingRight:5},children:_.jsxs(uS,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${Yat}${o}`,children:["View source:"," ",o]})})]}),s.warnings.length>0&&_.jsxs(_.Fragment,{children:[_.jsxs(Gt,{align:"center",direction:"row",children:[_.jsx(Yue,{color:"orange"}),_.jsx(Je,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),_.jsx(Oz,{issues:s.warnings,type:"warning"})]})]})},i)})]})})}var yTe={exports:{}},vTe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uk=I;function Xat(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qat=typeof Object.is=="function"?Object.is:Xat,Jat=Uk.useSyncExternalStore,Zat=Uk.useRef,eut=Uk.useEffect,tut=Uk.useMemo,nut=Uk.useDebugValue;vTe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=Zat(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=tut(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,Qat(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=Jat(e,s[0],s[1]);return eut(function(){o.hasValue=!0,o.value=a},[a]),nut(a),a};yTe.exports=vTe;var rut=yTe.exports,Pl="default"in BO?qt:BO,rce=Symbol.for("react-redux-context"),ice=typeof globalThis<"u"?globalThis:{};function iut(){if(!Pl.createContext)return{};const e=ice[rce]??(ice[rce]=new Map);let t=e.get(Pl.createContext);return t||(t=Pl.createContext(null),e.set(Pl.createContext,t)),t}var ny=iut(),sut=()=>{throw new Error("uSES not initialized!")};function hX(e=ny){return function(){return Pl.useContext(e)}}var bTe=hX(),_Te=sut,out=e=>{_Te=e},aut=(e,t)=>e===t;function uut(e=ny){const t=e===ny?bTe:hX(e),n=(r,i={})=>{const{equalityFn:s=aut,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();Pl.useRef(!0);const d=Pl.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=_Te(u.addNestedSub,a.getState,l||a.getState,d,s);return Pl.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var lut=uut();function cut(e){e()}function fut(){let e=null,t=null;return{clear(){e=null,t=null},notify(){cut(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var sce={notify(){},get:()=>[]};function dut(e,t){let n,r=sce,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=fut())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=sce)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var hut=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",put=typeof navigator<"u"&&navigator.product==="ReactNative",mut=hut||put?Pl.useLayoutEffect:Pl.useEffect;function gut({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=Pl.useMemo(()=>{const l=dut(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=Pl.useMemo(()=>e.getState(),[e]);mut(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||ny;return Pl.createElement(u.Provider,{value:o},n)}var yut=gut;function wTe(e=ny){const t=e===ny?bTe:hX(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var vut=wTe();function but(e=ny){const t=e===ny?vut:wTe(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var ETe=but();out(rut.useSyncExternalStoreWithSelector);function Ro(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var _ut=typeof Symbol=="function"&&Symbol.observable||"@@observable",oce=_ut,l8=()=>Math.random().toString(36).substring(7).split("").join("."),wut={INIT:`@@redux/INIT${l8()}`,REPLACE:`@@redux/REPLACE${l8()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${l8()}`},I$=wut;function pX(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function xTe(e,t,n){if(typeof e!="function")throw new Error(Ro(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ro(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ro(1));return n(xTe)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(u)throw new Error(Ro(3));return i}function f(g){if(typeof g!="function")throw new Error(Ro(4));if(u)throw new Error(Ro(5));let y=!0;l();const v=a++;return o.set(v,g),function(){if(y){if(u)throw new Error(Ro(6));y=!1,l(),o.delete(v),s=null}}}function d(g){if(!pX(g))throw new Error(Ro(7));if(typeof g.type>"u")throw new Error(Ro(8));if(typeof g.type!="string")throw new Error(Ro(17));if(u)throw new Error(Ro(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(Ro(10));r=g,d({type:I$.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Ro(11));function v(){const w=y;w.next&&w.next(c())}return v(),{unsubscribe:g(v)}},[oce](){return this}}}return d({type:I$.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[oce]:p}}function Eut(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:I$.INIT})>"u")throw new Error(Ro(12));if(typeof n(void 0,{type:I$.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ro(13))})}function xut(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{Eut(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(Ro(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function k$(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Sut(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Ro(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=k$(...a)(i.dispatch),{...i,dispatch:s}}}function Tut(e){return pX(e)&&"type"in e&&typeof e.type=="string"}var STe=Symbol.for("immer-nothing"),ace=Symbol.for("immer-draftable"),Yl=Symbol.for("immer-state");function $f(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var qE=Object.getPrototypeOf;function ry(e){return!!e&&!!e[Yl]}function Mm(e){var t;return e?TTe(e)||Array.isArray(e)||!!e[ace]||!!((t=e.constructor)!=null&&t[ace])||V6(e)||H6(e):!1}var Cut=Object.prototype.constructor.toString();function TTe(e){if(!e||typeof e!="object")return!1;const t=qE(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Cut}function R$(e,t){z6(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function z6(e){const t=e[Yl];return t?t.type_:Array.isArray(e)?1:V6(e)?2:H6(e)?3:0}function $z(e,t){return z6(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function CTe(e,t,n){const r=z6(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Aut(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function V6(e){return e instanceof Map}function H6(e){return e instanceof Set}function Bv(e){return e.copy_||e.base_}function Mz(e,t){if(V6(e))return new Map(e);if(H6(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=TTe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Yl];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(qE(e),r)}else{const r=qE(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function mX(e,t=!1){return q6(e)||ry(e)||!Mm(e)||(z6(e)>1&&(e.set=e.add=e.clear=e.delete=Iut),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>mX(r,!0))),e}function Iut(){$f(2)}function q6(e){return Object.isFrozen(e)}var kut={};function rb(e){const t=kut[e];return t||$f(0,e),t}var K2;function ATe(){return K2}function Rut(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function uce(e,t){t&&(rb("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Lz(e){Fz(e),e.drafts_.forEach(Nut),e.drafts_=null}function Fz(e){e===K2&&(K2=e.parent_)}function lce(e){return K2=Rut(K2,e)}function Nut(e){const t=e[Yl];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function cce(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Yl].modified_&&(Lz(t),$f(4)),Mm(e)&&(e=N$(t,e),t.parent_||D$(t,e)),t.patches_&&rb("Patches").generateReplacementPatches_(n[Yl].base_,e,t.patches_,t.inversePatches_)):e=N$(t,n,[]),Lz(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==STe?e:void 0}function N$(e,t,n){if(q6(t))return t;const r=t[Yl];if(!r)return R$(t,(i,s)=>fce(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return D$(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),R$(s,(a,u)=>fce(e,r,i,a,u,n,o)),D$(e,i,!1),n&&e.patches_&&rb("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function fce(e,t,n,r,i,s,o){if(ry(i)){const a=s&&t&&t.type_!==3&&!$z(t.assigned_,r)?s.concat(r):void 0,u=N$(e,i,a);if(CTe(n,r,u),ry(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(Mm(i)&&!q6(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;N$(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&D$(e,i)}}function D$(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&mX(t,n)}function Dut(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:ATe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=gX;n&&(i=[r],s=X2);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var gX={get(e,t){if(t===Yl)return e;const n=Bv(e);if(!$z(n,t))return Put(e,n,t);const r=n[t];return e.finalized_||!Mm(r)?r:r===c8(e.base_,t)?(f8(e),e.copy_[t]=jz(r,e)):r},has(e,t){return t in Bv(e)},ownKeys(e){return Reflect.ownKeys(Bv(e))},set(e,t,n){const r=ITe(Bv(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=c8(Bv(e),t),s=i==null?void 0:i[Yl];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Aut(n,i)&&(n!==void 0||$z(e.base_,t)))return!0;f8(e),Bz(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return c8(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,f8(e),Bz(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Bv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){$f(11)},getPrototypeOf(e){return qE(e.base_)},setPrototypeOf(){$f(12)}},X2={};R$(gX,(e,t)=>{X2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});X2.deleteProperty=function(e,t){return X2.set.call(this,e,t,void 0)};X2.set=function(e,t,n){return gX.set.call(this,e[0],t,n,e[0])};function c8(e,t){const n=e[Yl];return(n?Bv(n):e)[t]}function Put(e,t,n){var i;const r=ITe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function ITe(e,t){if(!(t in e))return;let n=qE(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=qE(n)}}function Bz(e){e.modified_||(e.modified_=!0,e.parent_&&Bz(e.parent_))}function f8(e){e.copy_||(e.copy_=Mz(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Out=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&$f(6),r!==void 0&&typeof r!="function"&&$f(7);let i;if(Mm(t)){const s=lce(this),o=jz(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?Lz(s):Fz(s)}return uce(s,r),cce(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===STe&&(i=void 0),this.autoFreeze_&&mX(i,!0),r){const s=[],o=[];rb("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else $f(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Mm(e)||$f(8),ry(e)&&(e=kTe(e));const t=lce(this),n=jz(e,void 0);return n[Yl].isManual_=!0,Fz(t),n}finishDraft(e,t){const n=e&&e[Yl];(!n||!n.isManual_)&&$f(9);const{scope_:r}=n;return uce(r,t),cce(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=rb("Patches").applyPatches_;return ry(e)?r(e,t):this.produce(e,i=>r(i,t))}};function jz(e,t){const n=V6(e)?rb("MapSet").proxyMap_(e,t):H6(e)?rb("MapSet").proxySet_(e,t):Dut(e,t);return(t?t.scope_:ATe()).drafts_.push(n),n}function kTe(e){return ry(e)||$f(10,e),RTe(e)}function RTe(e){if(!Mm(e)||q6(e))return e;const t=e[Yl];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Mz(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Mz(e,!0);return R$(n,(r,i)=>{CTe(n,r,RTe(i))}),t&&(t.finalized_=!1),n}var Kl=new Out,NTe=Kl.produce;Kl.produceWithPatches.bind(Kl);Kl.setAutoFreeze.bind(Kl);Kl.setUseStrictShallowCopy.bind(Kl);Kl.applyPatches.bind(Kl);Kl.createDraft.bind(Kl);Kl.finishDraft.bind(Kl);function $ut(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Mut(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Lut(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var dce=e=>Array.isArray(e)?e:[e];function Fut(e){const t=Array.isArray(e[0])?e[0]:e;return Lut(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function But(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var jut=class{constructor(e){this.value=e}deref(){return this.value}},Uut=typeof WeakRef<"u"?WeakRef:jut,zut=0,hce=1;function tD(){return{s:zut,v:void 0,o:null,p:null}}function yX(e,t={}){let n=tD();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=tD(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=tD(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===hce)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new Uut(c):c}return l.s=hce,l.v=c,c}return o.clearCache=()=>{n=tD(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function DTe(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),$ut(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=yX,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=dce(d),y=dce(p),v=Fut(i),b=f(function(){return s++,l.apply(null,arguments)},...g),w=h(function(){o++;const x=But(v,arguments);return a=b.apply(null,x),a},...y);return Object.assign(w,{resultFunc:l,memoizedResultFunc:b,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var Vut=DTe(yX),Hut=Object.assign((e,t=Vut)=>{Mut(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>Hut});function PTe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var qut=PTe(),Wut=PTe,Gut=(...e)=>{const t=DTe(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(ry(o)?kTe(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};Gut(yX);var Yut=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?k$:k$.apply(null,arguments)};function WE(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Xu(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>Tut(r)&&r.type===e,n}var OTe=class OC extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,OC.prototype)}static get[Symbol.species](){return OC}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new OC(...t[0].concat(this)):new OC(...t.concat(this))}};function pce(e){return Mm(e)?NTe(e,()=>{}):e}function mce(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(Xu(10));const r=n.insert(t,e);return e.set(t,r),r}function Kut(e){return typeof e=="boolean"}var Xut=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new OTe;return n&&(Kut(n)?o.push(qut):o.push(Wut(n.extraArgument))),o},Qut="RTK_autoBatch",$Te=e=>t=>{setTimeout(t,e)},Jut=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:$Te(10),Zut=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?Jut:e.type==="callback"?e.queueNotification:$Te(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[Qut]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},elt=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new OTe(e);return r&&i.push(Zut(typeof r=="object"?r:void 0)),i},tlt=!0;function nlt(e){const t=Xut(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(pX(n))a=xut(n);else throw new Error(Xu(1));let u;typeof r=="function"?u=r(t):u=t();let l=k$;i&&(l=Yut({trace:!tlt,...typeof i=="object"&&i}));const c=Sut(...u),f=elt(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return xTe(a,s,h)}function MTe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Xu(28));if(a in t)throw new Error(Xu(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function rlt(e){return typeof e=="function"}function ilt(e,t){let[n,r,i]=MTe(t),s;if(rlt(e))s=()=>pce(e());else{const a=pce(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(ry(c)){const h=f(c,u);return h===void 0?c:h}else{if(Mm(c))return NTe(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error(Xu(9))}return d}}return c},a)}return o.getInitialState=s,o}var slt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",olt=(e=21)=>{let t="",n=e;for(;n--;)t+=slt[Math.random()*64|0];return t},alt=Symbol.for("rtk-slice-createasyncthunk");function ult(e,t){return`${e}/${t}`}function llt({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[alt];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Xu(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(dlt()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(b,w){const E=typeof b=="string"?b:b.type;if(!E)throw new Error(Xu(12));if(E in l.sliceCaseReducersByType)throw new Error(Xu(13));return l.sliceCaseReducersByType[E]=w,c},addMatcher(b,w){return l.sliceMatchers.push({matcher:b,reducer:w}),c},exposeAction(b,w){return l.actionCreators[b]=w,c},exposeCaseReducer(b,w){return l.sliceCaseReducersByName[b]=w,c}};u.forEach(b=>{const w=a[b],E={reducerName:b,type:ult(s,b),createNotation:typeof i.reducers=="function"};plt(w)?glt(E,w,c,t):hlt(E,w,c)});function f(){const[b={},w=[],E=void 0]=typeof i.extraReducers=="function"?MTe(i.extraReducers):[i.extraReducers],x={...b,...l.sliceCaseReducersByType};return ilt(i.initialState,T=>{for(let C in x)T.addCase(C,x[C]);for(let C of l.sliceMatchers)T.addMatcher(C.matcher,C.reducer);for(let C of w)T.addMatcher(C.matcher,C.reducer);E&&T.addDefaultCase(E)})}const d=b=>b,h=new Map;let p;function m(b,w){return p||(p=f()),p(b,w)}function g(){return p||(p=f()),p.getInitialState()}function y(b,w=!1){function E(T){let C=T[b];return typeof C>"u"&&w&&(C=g()),C}function x(T=d){const C=mce(h,w,{insert:()=>new WeakMap});return mce(C,T,{insert:()=>{const A={};for(const[k,R]of Object.entries(i.selectors??{}))A[k]=clt(R,T,g,w);return A}})}return{reducerPath:b,getSelectors:x,get selectors(){return x(E)},selectSlice:E}}const v={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(b,{reducerPath:w,...E}={}){const x=w??o;return b.inject({reducerPath:x,reducer:m},E),{...v,...y(x,!0)}}};return v}}function clt(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var flt=llt();function dlt(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function hlt({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!mlt(r))throw new Error(Xu(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?WE(e,o):WE(e))}function plt(e){return e._reducerDefinitionType==="asyncThunk"}function mlt(e){return e._reducerDefinitionType==="reducerWithPrepare"}function glt({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Xu(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||nD,pending:a||nD,rejected:u||nD,settled:l||nD})}function nD(){}var ylt=(e,t)=>{if(typeof e!="function")throw new Error(Xu(32))},vX="listenerMiddleware",vlt=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=WE(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Xu(21));return ylt(s),{predicate:i,type:t,effect:s}},blt=Object.assign(e=>{const{type:t,predicate:n,effect:r}=vlt(e);return{id:olt(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Xu(22))}}},{withTypes:()=>blt}),_lt=Object.assign(WE(`${vX}/add`),{withTypes:()=>_lt});WE(`${vX}/removeAll`);var wlt=Object.assign(WE(`${vX}/remove`),{withTypes:()=>wlt});function Xu(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function Lm(e){return e.components.flatMap(t=>typeof t=="string"?t:Lm(t))}function LTe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:LTe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function FTe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+Lm(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+Lm(e).length-1}];r+=1}else{const o=FTe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function BTe(e,t){const n=FTe(e,t,0);return typeof n=="number"?null:n}function jTe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=jTe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function Elt(e,t){const n=jTe(e,t,0);return n.found?n.distance:-1}function UTe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...UTe(i,`${t}-${s}`))}),n}async function xlt(e,t,n,r,i){const s=Lm(n),o=Object.fromEntries(s.filter(d=>d!=="end").map((d,h)=>[`${d}_${h}`,{answer:{}}])),a=Object.assign({},...s.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),u=Object.assign({},...s.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),l={studyId:e,answers:Object.keys(i).length>0?i:o,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?u:a,iframeAnswers:{},iframeProvenance:null,metadata:r},c=flt({name:"storeSlice",initialState:l,reducers:{setConfig(d,h){d.config=h.payload},toggleStudyBrowser:d=>{d.showStudyBrowser=!d.showStudyBrowser},toggleShowHelpText:d=>{d.showHelpText=!d.showHelpText},setAlertModal:(d,h)=>{d.alertModal=h.payload},setIframeAnswers:(d,h)=>{d.iframeAnswers=h.payload},setIframeProvenance:(d,h)=>{d.iframeProvenance=h.payload},updateResponseBlockValidation:(d,{payload:h})=>{d.trialValidation[h.identifier]||(d.trialValidation[h.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),d.trialValidation[h.identifier][h.location]={valid:h.status,values:h.values},h.provenanceGraph&&(d.trialValidation[h.identifier].provenanceGraph=h.provenanceGraph)},saveTrialAnswer(d,{payload:h}){const{identifier:p,answer:m,startTime:g,endTime:y,provenanceGraph:v,windowEvents:b}=h;d.answers[p]={answer:m,startTime:g,endTime:y,provenanceGraph:v,windowEvents:b}}}});return{store:nlt({reducer:c.reducer,preloadedState:l}),actions:c.actions}}const zTe=I.createContext(null);function op(){return I.useContext(zTe).actions}const ap=ETe,uf=lut;function Slt(e){return uf(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function bX(){return uf(e=>Lm(e.sequence))}function t_(){const{studyId:e}=nb();return`${e}`}function hg(){const{index:e}=nb(),t=parseInt(e||"0",10);return Number.isNaN(t)?e:t}function Xy(){const e=hg(),t=bX();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var P$={exports:{}};P$.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",b="[object Proxy]",w="[object RegExp]",E="[object Set]",x="[object String]",T="[object Undefined]",C="[object WeakMap]",A="[object ArrayBuffer]",k="[object DataView]",R="[object Float32Array]",O="[object Float64Array]",D="[object Int8Array]",$="[object Int16Array]",F="[object Int32Array]",L="[object Uint8Array]",j="[object Uint8ClampedArray]",z="[object Uint16Array]",q="[object Uint32Array]",P=/[\\^$.*+?()[\]{}|]/g,U=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,B={};B[R]=B[O]=B[D]=B[$]=B[F]=B[L]=B[j]=B[z]=B[q]=!0,B[a]=B[u]=B[A]=B[c]=B[k]=B[f]=B[d]=B[h]=B[m]=B[g]=B[v]=B[w]=B[E]=B[x]=B[C]=!1;var H=typeof oo=="object"&&oo&&oo.Object===Object&&oo,G=typeof self=="object"&&self&&self.Object===Object&&self,te=H||G||Function("return this")(),le=t&&!t.nodeType&&t,fe=le&&!0&&e&&!e.nodeType&&e,de=fe&&fe.exports===le,ge=de&&H.process,Ie=function(){try{var ne=fe&&fe.require&&fe.require("util").types;return ne||ge&&ge.binding&&ge.binding("util")}catch{}}(),pe=Ie&&Ie.isTypedArray;function He(ne,ue,Re){switch(Re.length){case 0:return ne.call(ue);case 1:return ne.call(ue,Re[0]);case 2:return ne.call(ue,Re[0],Re[1]);case 3:return ne.call(ue,Re[0],Re[1],Re[2])}return ne.apply(ue,Re)}function Ue(ne,ue){for(var Re=-1,It=Array(ne);++Re<ne;)It[Re]=ue(Re);return It}function yt(ne){return function(ue){return ne(ue)}}function it(ne,ue){return ne==null?void 0:ne[ue]}function be(ne,ue){return function(Re){return ne(ue(Re))}}var ke=Array.prototype,ze=Function.prototype,ct=Object.prototype,Ot=te["__core-js_shared__"],Ge=ze.toString,ye=ct.hasOwnProperty,ht=function(){var ne=/[^.]+$/.exec(Ot&&Ot.keys&&Ot.keys.IE_PROTO||"");return ne?"Symbol(src)_1."+ne:""}(),bt=ct.toString,me=Ge.call(Object),Ae=RegExp("^"+Ge.call(ye).replace(P,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qe=de?te.Buffer:void 0,ut=te.Symbol,wt=te.Uint8Array;qe&&qe.allocUnsafe;var Bn=be(Object.getPrototypeOf,Object),Ir=Object.create,jn=ct.propertyIsEnumerable,hr=ke.splice,yn=ut?ut.toStringTag:void 0,An=function(){try{var ne=We(Object,"defineProperty");return ne({},"",{}),ne}catch{}}(),sr=qe?qe.isBuffer:void 0,or=Math.max,Qo=Date.now,Ui=We(te,"Map"),In=We(Object,"create"),zi=function(){function ne(){}return function(ue){if(!Ip(ue))return{};if(Ir)return Ir(ue);ne.prototype=ue;var Re=new ne;return ne.prototype=void 0,Re}}();function kr(ne){var ue=-1,Re=ne==null?0:ne.length;for(this.clear();++ue<Re;){var It=ne[ue];this.set(It[0],It[1])}}function ys(){this.__data__=In?In(null):{},this.size=0}function Sp(ne){var ue=this.has(ne)&&delete this.__data__[ne];return this.size-=ue?1:0,ue}function gl(ne){var ue=this.__data__;if(In){var Re=ue[ne];return Re===r?void 0:Re}return ye.call(ue,ne)?ue[ne]:void 0}function kd(ne){var ue=this.__data__;return In?ue[ne]!==void 0:ye.call(ue,ne)}function Tr(ne,ue){var Re=this.__data__;return this.size+=this.has(ne)?0:1,Re[ne]=In&&ue===void 0?r:ue,this}kr.prototype.clear=ys,kr.prototype.delete=Sp,kr.prototype.get=gl,kr.prototype.has=kd,kr.prototype.set=Tr;function Ni(ne){var ue=-1,Re=ne==null?0:ne.length;for(this.clear();++ue<Re;){var It=ne[ue];this.set(It[0],It[1])}}function ti(){this.__data__=[],this.size=0}function yu(ne){var ue=this.__data__,Re=tr(ue,ne);if(Re<0)return!1;var It=ue.length-1;return Re==It?ue.pop():hr.call(ue,Re,1),--this.size,!0}function $a(ne){var ue=this.__data__,Re=tr(ue,ne);return Re<0?void 0:ue[Re][1]}function Ma(ne){return tr(this.__data__,ne)>-1}function oe(ne,ue){var Re=this.__data__,It=tr(Re,ne);return It<0?(++this.size,Re.push([ne,ue])):Re[It][1]=ue,this}Ni.prototype.clear=ti,Ni.prototype.delete=yu,Ni.prototype.get=$a,Ni.prototype.has=Ma,Ni.prototype.set=oe;function ee(ne){var ue=-1,Re=ne==null?0:ne.length;for(this.clear();++ue<Re;){var It=ne[ue];this.set(It[0],It[1])}}function ae(){this.size=0,this.__data__={hash:new kr,map:new(Ui||Ni),string:new kr}}function Te(ne){var ue=Ve(this,ne).delete(ne);return this.size-=ue?1:0,ue}function Se(ne){return Ve(this,ne).get(ne)}function ot(ne){return Ve(this,ne).has(ne)}function Tt(ne,ue){var Re=Ve(this,ne),It=Re.size;return Re.set(ne,ue),this.size+=Re.size==It?0:1,this}ee.prototype.clear=ae,ee.prototype.delete=Te,ee.prototype.get=Se,ee.prototype.has=ot,ee.prototype.set=Tt;function Wt(ne){var ue=this.__data__=new Ni(ne);this.size=ue.size}function Mn(){this.__data__=new Ni,this.size=0}function Un(ne){var ue=this.__data__,Re=ue.delete(ne);return this.size=ue.size,Re}function mn(ne){return this.__data__.get(ne)}function ar(ne){return this.__data__.has(ne)}function Rr(ne,ue){var Re=this.__data__;if(Re instanceof Ni){var It=Re.__data__;if(!Ui||It.length<n-1)return It.push([ne,ue]),this.size=++Re.size,this;Re=this.__data__=new ee(It)}return Re.set(ne,ue),this.size=Re.size,this}Wt.prototype.clear=Mn,Wt.prototype.delete=Un,Wt.prototype.get=mn,Wt.prototype.has=ar,Wt.prototype.set=Rr;function Ht(ne,ue){var Re=Cp(ne),It=!Re&&vu(ne),Ln=!Re&&!It&&Ap(ne),Cr=!Re&&!It&&!Ln&&bN(ne),Yr=Re||It||Ln||Cr,Vn=Yr?Ue(ne.length,String):[],Kr=Vn.length;for(var rs in ne)Yr&&(rs=="length"||Ln&&(rs=="offset"||rs=="parent")||Cr&&(rs=="buffer"||rs=="byteLength"||rs=="byteOffset")||xt(rs,Kr))||Vn.push(rs);return Vn}function ur(ne,ue,Re){(Re!==void 0&&!fc(ne[ue],Re)||Re===void 0&&!(ue in ne))&&Di(ne,ue,Re)}function Gr(ne,ue,Re){var It=ne[ue];(!(ye.call(ne,ue)&&fc(It,Re))||Re===void 0&&!(ue in ne))&&Di(ne,ue,Re)}function tr(ne,ue){for(var Re=ne.length;Re--;)if(fc(ne[Re][0],ue))return Re;return-1}function Di(ne,ue,Re){ue=="__proto__"&&An?An(ne,ue,{configurable:!0,enumerable:!0,value:Re,writable:!0}):ne[ue]=Re}var Ks=Oe();function ni(ne){return ne==null?ne===void 0?T:y:yn&&yn in Object(ne)?Ye(ne):Zo(ne)}function So(ne){return bu(ne)&&ni(ne)==a}function Vi(ne){if(!Ip(ne)||zn(ne))return!1;var ue=ET(ne)?Ae:U;return ue.test(gN(ne))}function Hi(ne){return bu(ne)&&vN(ne.length)&&!!B[ni(ne)]}function Jo(ne){if(!Ip(ne))return Dr(ne);var ue=Nr(ne),Re=[];for(var It in ne)It=="constructor"&&(ue||!ye.call(ne,It))||Re.push(It);return Re}function La(ne,ue,Re,It,Ln){ne!==ue&&Ks(ue,function(Cr,Yr){if(Ln||(Ln=new Wt),Ip(Cr))Xs(ne,ue,Yr,Re,La,It,Ln);else{var Vn=It?It(Tp(ne,Yr),Cr,Yr+"",ne,ue,Ln):void 0;Vn===void 0&&(Vn=Cr),ur(ne,Yr,Vn)}},_v)}function Xs(ne,ue,Re,It,Ln,Cr,Yr){var Vn=Tp(ne,Re),Kr=Tp(ue,Re),rs=Yr.get(Kr);if(rs){ur(ne,Re,rs);return}var ea=Cr?Cr(Vn,Kr,Re+"",ne,ue,Yr):void 0,Ev=ea===void 0;if(Ev){var kp=Cp(Kr),I_=!kp&&Ap(Kr),k_=!kp&&!I_&&bN(Kr);ea=Kr,kp||I_||k_?Cp(Vn)?ea=Vn:yN(Vn)?ea=he(Vn):I_?(Ev=!1,ea=Y(Kr)):k_?(Ev=!1,ea=Z(Kr)):ea=[]:QB(Kr)||vu(Kr)?(ea=Vn,vu(Vn)?ea=bv(Vn):(!Ip(Vn)||ET(Vn))&&(ea=st(Kr))):Ev=!1}Ev&&(Yr.set(Kr,ea),Ln(ea,Kr,It,Cr,Yr),Yr.delete(Kr)),ur(ne,Re,ea)}function cc(ne,ue){return wT(Nd(ne,ue,Rg),ne+"")}var Rd=An?function(ne,ue){return An(ne,"toString",{configurable:!0,enumerable:!1,value:wv(ue),writable:!0})}:Rg;function Y(ne,ue){return ne.slice()}function se(ne){var ue=new ne.constructor(ne.byteLength);return new wt(ue).set(new wt(ne)),ue}function Z(ne,ue){var Re=se(ne.buffer);return new ne.constructor(Re,ne.byteOffset,ne.length)}function he(ne,ue){var Re=-1,It=ne.length;for(ue||(ue=Array(It));++Re<It;)ue[Re]=ne[Re];return ue}function ve(ne,ue,Re,It){var Ln=!Re;Re||(Re={});for(var Cr=-1,Yr=ue.length;++Cr<Yr;){var Vn=ue[Cr],Kr=void 0;Kr===void 0&&(Kr=ne[Vn]),Ln?Di(Re,Vn,Kr):Gr(Re,Vn,Kr)}return Re}function ce(ne){return cc(function(ue,Re){var It=-1,Ln=Re.length,Cr=Ln>1?Re[Ln-1]:void 0,Yr=Ln>2?Re[2]:void 0;for(Cr=ne.length>3&&typeof Cr=="function"?(Ln--,Cr):void 0,Yr&&gn(Re[0],Re[1],Yr)&&(Cr=Ln<3?void 0:Cr,Ln=1),ue=Object(ue);++It<Ln;){var Vn=Re[It];Vn&&ne(ue,Vn,It,Cr)}return ue})}function Oe(ne){return function(ue,Re,It){for(var Ln=-1,Cr=Object(ue),Yr=It(ue),Vn=Yr.length;Vn--;){var Kr=Yr[++Ln];if(Re(Cr[Kr],Kr,Cr)===!1)break}return ue}}function Ve(ne,ue){var Re=ne.__data__;return Dt(ue)?Re[typeof ue=="string"?"string":"hash"]:Re.map}function We(ne,ue){var Re=it(ne,ue);return Vi(Re)?Re:void 0}function Ye(ne){var ue=ye.call(ne,yn),Re=ne[yn];try{ne[yn]=void 0;var It=!0}catch{}var Ln=bt.call(ne);return It&&(ue?ne[yn]=Re:delete ne[yn]),Ln}function st(ne){return typeof ne.constructor=="function"&&!Nr(ne)?zi(Bn(ne)):{}}function xt(ne,ue){var Re=typeof ne;return ue=ue??o,!!ue&&(Re=="number"||Re!="symbol"&&W.test(ne))&&ne>-1&&ne%1==0&&ne<ue}function gn(ne,ue,Re){if(!Ip(Re))return!1;var It=typeof ue;return(It=="number"?A_(Re)&&xt(ue,Re.length):It=="string"&&ue in Re)?fc(Re[ue],ne):!1}function Dt(ne){var ue=typeof ne;return ue=="string"||ue=="number"||ue=="symbol"||ue=="boolean"?ne!=="__proto__":ne===null}function zn(ne){return!!ht&&ht in ne}function Nr(ne){var ue=ne&&ne.constructor,Re=typeof ue=="function"&&ue.prototype||ct;return ne===Re}function Dr(ne){var ue=[];if(ne!=null)for(var Re in Object(ne))ue.push(Re);return ue}function Zo(ne){return bt.call(ne)}function Nd(ne,ue,Re){return ue=or(ue===void 0?ne.length-1:ue,0),function(){for(var It=arguments,Ln=-1,Cr=or(It.length-ue,0),Yr=Array(Cr);++Ln<Cr;)Yr[Ln]=It[ue+Ln];Ln=-1;for(var Vn=Array(ue+1);++Ln<ue;)Vn[Ln]=It[Ln];return Vn[ue]=Re(Yr),He(ne,this,Vn)}}function Tp(ne,ue){if(!(ue==="constructor"&&typeof ne[ue]=="function")&&ue!="__proto__")return ne[ue]}var wT=vv(Rd);function vv(ne){var ue=0,Re=0;return function(){var It=Qo(),Ln=s-(It-Re);if(Re=It,Ln>0){if(++ue>=i)return arguments[0]}else ue=0;return ne.apply(void 0,arguments)}}function gN(ne){if(ne!=null){try{return Ge.call(ne)}catch{}try{return ne+""}catch{}}return""}function fc(ne,ue){return ne===ue||ne!==ne&&ue!==ue}var vu=So(function(){return arguments}())?So:function(ne){return bu(ne)&&ye.call(ne,"callee")&&!jn.call(ne,"callee")},Cp=Array.isArray;function A_(ne){return ne!=null&&vN(ne.length)&&!ET(ne)}function yN(ne){return bu(ne)&&A_(ne)}var Ap=sr||wN;function ET(ne){if(!Ip(ne))return!1;var ue=ni(ne);return ue==h||ue==p||ue==l||ue==b}function vN(ne){return typeof ne=="number"&&ne>-1&&ne%1==0&&ne<=o}function Ip(ne){var ue=typeof ne;return ne!=null&&(ue=="object"||ue=="function")}function bu(ne){return ne!=null&&typeof ne=="object"}function QB(ne){if(!bu(ne)||ni(ne)!=v)return!1;var ue=Bn(ne);if(ue===null)return!0;var Re=ye.call(ue,"constructor")&&ue.constructor;return typeof Re=="function"&&Re instanceof Re&&Ge.call(Re)==me}var bN=pe?yt(pe):Hi;function bv(ne){return ve(ne,_v(ne))}function _v(ne){return A_(ne)?Ht(ne):Jo(ne)}var _N=ce(function(ne,ue,Re){La(ne,ue,Re)});function wv(ne){return function(){return ne}}function Rg(ne){return ne}function wN(){return!1}e.exports=_N})(P$,P$.exports);var Tlt=P$.exports;const _X=dl(Tlt);function M1(e){return structuredClone(e)}function wX(){const{answers:e}=uf(i=>i),t=hg(),r=`${Xy()}_${t}`;return e[r]}const VTe=I.createContext(null);function Clt(){const e=I.useContext(VTe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function Fm(){return uf(e=>e.config)}function gce(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function HTe(){const e=hg(),t=bX(),r=`${Xy()}_${e}`,{trialValidation:i,sequence:s,answers:o}=uf(x=>x),a=ap(),{saveTrialAnswer:u,setIframeAnswers:l}=op(),{storageEngine:c}=Is(),f=t_(),[d,h]=I.useState(!0);I.useEffect(()=>{(async()=>{if(c){const T=await c.getModes(f);h(T.dataCollectionEnabled)}})()},[c,f]);const p=Slt(r),m=typeof e!="number"||!p,g=wX(),y=dg(),v=Fm(),b=I.useMemo(()=>Date.now(),[]),w=Clt(),E=I.useCallback(()=>{if(typeof e!="number")return;const x=M1(i[r]),T=Object.values(x).reduce((F,L)=>Object.hasOwn(L,"values")?{...F,...L.values}:F,{}),{provenanceGraph:C}=x,A=Date.now(),k=w&&"current"in w&&w.current?w.current.splice(0,w.current.length):[];d&&!g.endTime&&(a(u({identifier:r,answer:T,startTime:b,endTime:A,provenanceGraph:C,windowEvents:k})),c&&c.saveAnswers({...o,[r]:{answer:T,startTime:b,endTime:A,provenanceGraph:C,windowEvents:k}}),a(l({})));let R=e+1;const O=BTe(s,e),D=O!==null&&O.some(F=>Object.hasOwn(F.currentBlock,"skip")&&F.currentBlock.skip!==void 0),$={...o,[r]:{answer:T,startTime:b,endTime:A,provenanceGraph:C,windowEvents:k}};D&&[...O.flatMap(L=>L.currentBlock.skip?L.currentBlock.skip.map(j=>({...j,firstIndex:L.firstIndex,lastIndex:L.lastIndex})):[])].some(L=>{let j=!1;const z=Object.fromEntries(Object.entries($).filter(([P])=>{const U=parseInt(P.slice(P.lastIndexOf("_")+1),10);return U>=L.firstIndex&&U<=e})),q=L.check!=="block"?Object.entries(z).filter(([P])=>P.slice(0,P.lastIndexOf("_"))===L.name):Object.entries(z);if(q.length===0)return!1;if(q.some(([P,U])=>!U))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(L,null,2)}`);if(L.check==="response"||L.check==="responses"){const[P,U]=q[0];L.check==="response"?j=L.value!==U.answer[L.responseId]:j=!gce(U.answer,P,v.components[P.slice(0,P.lastIndexOf("_"))],v)}else if(L.check==="block"||L.check==="repeatedComponent"){if(q.length<L.value)return!1;const P=q.map(([B,H])=>gce(H.answer,B,v.components[B.slice(0,B.lastIndexOf("_"))],v)),U=P.filter(B=>B).length,W=P.length-U;j=L.condition==="numCorrect"&&U===L.value||L.condition==="numIncorrect"&&W===L.value}if(j){const P=t.indexOf(L.to),U=P===-1?Elt(s,L.to):-1;return R=P===-1?U:P,!0}return!1}),y(`/${f}/${R}${window.location.search}`)},[i,r,w,g,e,s,o,b,y,f,a,u,c,l,v,t]);return{isNextDisabled:m,goToNextStep:E}}function Alt({label:e="Next",disabled:t=!1,setCheckClicked:n=()=>{},onClick:r}){const{isNextDisabled:i,goToNextStep:s}=HTe(),o=I.useCallback(()=>{n(!1),r&&r(),s()},[s,r,n]);return _.jsx(Nn,{type:"submit",disabled:t||i,onClick:o,children:e})}function Ilt(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const klt=typeof window<"u"?I.useLayoutEffect:I.useEffect;function Co(e,t){klt(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function Rlt(e,t){e&&Ilt(e),Co(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),Co(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),Co(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),Co(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),Co(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),Co(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),Co(`mantine-form:${e}:clear-errors`,t.clearErrors),Co(`mantine-form:${e}:reset`,t.reset),Co(`mantine-form:${e}:validate`,t.validate),Co(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),Co(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),Co(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),Co(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),Co(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),Co(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),Co(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),Co(`mantine-form:${e}:reset-touched`,t.resetTouched)}function Nlt(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function Uz(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function Dlt(e){const[t,n]=I.useState(Uz(e)),r=I.useRef(t),i=I.useCallback(u=>{n(l=>{const c=Uz(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=I.useCallback(()=>i({}),[]),o=I.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=I.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function qTe(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function yce(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function vce(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=qTe(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=yce(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=yce(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function Plt(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function bce(e,t,n){typeof n.value=="object"&&(n.value=Nw(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function Nw(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(Nw(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(Nw(a),Nw(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(Nw(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)bce(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||bce(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function WTe(e){return typeof e!="string"?[]:e.split(".")}function ju(e,t){const n=WTe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function W6(e,t,n){const r=WTe(e);if(r.length===0)return n;const i=Nw(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function Olt(e,{from:t,to:n},r){const i=ju(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),W6(e,s,r)}function $lt(e,t,n,r){const i=ju(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),W6(e,s,r)}function Mlt(e,t,n){const r=ju(e,n);return Array.isArray(r)?W6(e,r.filter((i,s)=>s!==t),n):n}function Llt({$values:e,$errors:t,$status:n}){const r=I.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Plt(o,a,u)),e.setValues({values:Olt(o,a,e.refValues.current),updateState:!0})},[]),i=I.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>vce(o,a,u,-1)),e.setValues({values:Mlt(o,a,e.refValues.current),updateState:!0})},[]),s=I.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>vce(o,u,l,1)),e.setValues({values:$lt(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}var EX=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const jP=dl(EX);function rD(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function Flt({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=I.useState(t),[o,a]=I.useState(e),u=I.useRef(t),l=I.useRef(e),c=I.useCallback(E=>{const x=typeof E=="function"?E(u.current):E;u.current=x,n==="controlled"&&s(x)},[]),f=I.useCallback(E=>{const x=typeof E=="function"?E(l.current):E;l.current=x,n==="controlled"&&a(x)},[]),d=I.useCallback(()=>c({}),[]),h=E=>{const x=E?{...E,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(x),f({})},p=I.useCallback((E,x)=>{c(T=>rD(T,E)===x?T:{...T,[E]:x})},[]),m=I.useCallback((E,x)=>{f(T=>rD(T,E)===x?T:{...T,[E]:x})},[]),g=I.useCallback(E=>rD(u.current,E),[]),y=I.useCallback(E=>f(x=>{if(typeof E!="string")return x;const T=qTe(E,x);return delete T[E],jP(T,x)?x:T}),[]),v=I.useCallback(E=>{if(E){const T=ju(E,l.current);if(typeof T=="boolean")return T;const C=ju(E,r.refValues.current),A=ju(E,r.valuesSnapshot.current);return!jP(C,A)}return Object.keys(l.current).length>0?rD(l.current):!jP(r.refValues.current,r.valuesSnapshot.current)},[]),b=I.useCallback(()=>l.current,[]),w=I.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:v,getDirty:b,getTouched:w}}function Blt({initialValues:e,onValuesChange:t,mode:n}){const r=I.useRef(!1),[i,s]=I.useState(e||{}),o=I.useRef(i),a=I.useRef(i),u=I.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const v=o.current,b=p instanceof Function?p(o.current):p,w=y?{...v,...b}:b;o.current=w,g&&s(w),t==null||t(w,v),m==null||m.filter(Boolean).forEach(E=>E({updatedValues:w,previousValues:v}))},[t]),l=I.useCallback(p=>{var y;const m=ju(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const v=o.current,b=W6(p.path,g,o.current);u({values:b,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(w=>w({path:p.path,updatedValues:b,previousValues:v}))}},[]),c=I.useCallback(p=>{a.current=p},[]),f=I.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[]),d=I.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=I.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function jlt({$status:e}){const t=I.useRef({}),n=I.useCallback((i,s)=>{I.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=I.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:ju(i,o.previousValues),value:ju(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function _ce(e,t){return e?`${e}-${t.toString()}`:t.toString()}function wce(e){const t=Uz(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function zz(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=ju(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>zz(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||zz(o,t,a,i)),i},r)}function Vz(e,t){return wce(typeof e=="function"?e(t):zz(e,t))}function iD(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=Vz(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const Ult="__MANTINE_FORM_INDEX__";function Ece(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${Ult}`)):!1:!1}function GTe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=Dlt(r),p=Blt({initialValues:n,onValuesChange:l,mode:t}),m=Flt({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=Llt({$values:p,$errors:h,$status:m}),y=jlt({$status:m}),[v,b]=I.useState(0),[w,E]=I.useState({}),x=I.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&b(P=>P+1)},[]),T=I.useCallback(P=>{p.initialize(P,()=>t==="uncontrolled"&&b(U=>U+1))},[]),C=I.useCallback((P,U,W)=>{const B=Ece(P,a);m.clearFieldDirty(P),m.setFieldTouched(P,!0),!B&&o&&h.clearFieldError(P),p.setFieldValue({path:P,value:U,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers(P),B?H=>{const G=iD(P,d,H.updatedValues);G.hasError?h.setFieldError(P,G.error):h.clearFieldError(P)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>E(H=>({...H,[P]:(H[P]||0)+1})):null]})},[l,d]),A=I.useCallback(P=>{const U=p.refValues.current;p.setValues({values:P,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&b(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const B=ju(W,p.refValues.current),H=ju(W,U);B!==H&&y.getFieldSubscribers(W).forEach(G=>G({previousValues:U,updatedValues:p.refValues.current}))})},[l,o]),k=I.useCallback(()=>{const P=Vz(d,p.refValues.current);return h.setErrors(P.errors),P},[d]),R=I.useCallback(P=>{const U=iD(P,d,p.refValues.current);return U.hasError?h.setFieldError(P,U.error):h.clearFieldError(P),U},[d]),O=(P,{type:U="input",withError:W=!0,withFocus:B=!0,...H}={})=>{const te={onChange:Nlt(le=>C(P,le,{forceUpdate:!1})),"data-path":_ce(e,P)};return W&&(te.error=h.errorsState[P]),U==="checkbox"?te[t==="controlled"?"checked":"defaultChecked"]=ju(P,p.refValues.current):te[t==="controlled"?"value":"defaultValue"]=ju(P,p.refValues.current),B&&(te.onFocus=()=>m.setFieldTouched(P,!0),te.onBlur=()=>{if(Ece(P,u)){const le=iD(P,d,p.refValues.current);le.hasError?h.setFieldError(P,le.error):h.clearFieldError(P)}}),Object.assign(te,f==null?void 0:f({inputProps:te,field:P,options:{type:U,withError:W,withFocus:B,...H},form:q}))},D=(P,U)=>W=>{W==null||W.preventDefault();const B=k();B.hasErrors?U==null||U(B.errors,p.refValues.current,W):P==null||P(c(p.refValues.current),W)},$=P=>c(P||p.refValues.current),F=I.useCallback(P=>{P.preventDefault(),x()},[]),L=I.useCallback(P=>P?!iD(P,d,p.refValues.current).hasError:!Vz(d,p.refValues.current).hasErrors,[d]),j=P=>`${v}-${P}-${w[P]||0}`,z=I.useCallback(P=>document.querySelector(`[data-path="${_ce(e,P)}"]`),[]),q={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:T,setValues:A,setFieldValue:C,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:x,validate:k,validateField:R,getInputProps:O,onSubmit:D,onReset:F,isValid:L,getTransformedValues:$,key:j,getInputNode:z};return Rlt(e,q),q}function zlt(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function Vlt(e){return zlt(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}const Hlt=new URLSearchParams(window.location.search),qlt=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?Hlt.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},Wlt=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function Glt(e,t,n){const[r,i]=I.useState(null),s=GTe({initialValues:qlt(e,n),validate:Wlt(e)});return I.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function n_(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function Ylt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e;return _.jsx(Om.Group,{label:_.jsxs(Gt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(_e,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(iu,{text:s,required:o})})]}),description:u,...n,error:n_(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(Vs,{mt:"xs",children:a.map(l=>_.jsx(Om,{disabled:t,value:l.value,label:l.label},l.value))})})}function Klt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e;return _.jsx(Pk,{disabled:t,label:_.jsxs(Gt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(_e,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(iu,{text:o,required:a})})]}),description:l,placeholder:s,data:u,radius:"md",size:"md",...n,error:n_(e,n,u)})}function Xlt({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return _.jsx(vi.Wrapper,{label:_.jsxs(Gt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&_.jsx(_e,{style:{minWidth:"fit-content"},children:`${n}. `}),_.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(iu,{text:i,required:s})})]}),description:o,size:"md",children:_.jsx(Qf,{children:Array.isArray(t.value)?t.value.map(a=>_.jsx(Qf.Item,{children:a},a)):_.jsx(Qf.Item,{children:t.value})})})}function YTe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,leftLabel:u,rightLabel:l,secondaryText:c}=e;return _.jsx(tb.Group,{name:`radioInput${e.id}`,label:_.jsxs(Gt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(_e,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(iu,{text:s,required:o})})]}),description:c,...n,error:n_(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsxs(Vs,{mt:"xs",children:[u?_.jsx(Je,{style:{textAlign:"center"},children:u}):null,a.map(f=>_.jsx(tb,{disabled:t,value:f.value,label:f.label},f.label)),_.jsx(Je,{children:l})]})},e.id)}function Qlt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o};return _.jsx(YTe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i})}function Jlt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return _.jsx(xK,{disabled:t,placeholder:l,label:_.jsxs(Gt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(_e,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(iu,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:n_(e,n)})}function Zlt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=n_(e,n);return _.jsx(vi.Wrapper,{label:_.jsxs(Gt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(_e,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(iu,{text:s,required:o})})]}),description:u,error:l,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(R6,{disabled:t,marks:a,...n,h:40})})}function ect({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx($1,{disabled:t,placeholder:s,label:_.jsxs(Gt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(_e,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(iu,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:n_(e,n)})}function tct({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(fK,{disabled:t,placeholder:s,label:_.jsxs(Gt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(_e,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(iu,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:n_(e,n)})}function nct({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=HK(),u=Fm().uiConfig.enumerateQuestions??!1,l=I.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return _.jsxs(_e,{mb:"md",children:[e.type==="numerical"&&_.jsx(Jlt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&_.jsx(ect,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&_.jsx(tct,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&_.jsx(Qlt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&_.jsx(Klt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&_.jsx(Zlt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&_.jsx(YTe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&_.jsx(Ylt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&_.jsx(Xlt,{response:e,answer:i,index:r,enumerateQuestions:u})]})}function O$({config:e,location:t,status:n,style:r}){var w;const i=hg(),s=Xy(),o=n==null?void 0:n.answer,a=e,u=I.useMemo(()=>{var E;return((E=a==null?void 0:a.response)==null?void 0:E.filter(x=>x.location?x.location===t:t==="belowStimulus"))||[]},[a==null?void 0:a.response,t]),l=ap(),{updateResponseBlockValidation:c}=op(),f=Glt(u,i,o||{}),[d,h]=I.useState(void 0),[p,m]=I.useState(!1),{iframeAnswers:g,iframeProvenance:y}=uf(E=>E),v=(a==null?void 0:a.provideFeedback)&&(((w=a==null?void 0:a.correctAnswer)==null?void 0:w.length)||0)>0,b=t===((a==null?void 0:a.nextButtonLocation)||"belowStimulus");return I.useEffect(()=>{const E=u.find(x=>x.type==="iframe");if(g&&E){const x=E.id;f.setValues({...f.values,[x]:g[x]})}},[g]),I.useEffect(()=>{y&&h(y)},[y]),I.useEffect(()=>{l(c({location:t,identifier:`${s}_${i}`,status:f.isValid(),values:M1(f.values),provenanceGraph:d}))},[f.values,s,i,t,l,c,d]),_.jsxs("div",{style:r,children:[u.map((E,x)=>{var T,C;return _.jsx(qt.Fragment,{children:E.hidden?"":_.jsxs(_.Fragment,{children:[_.jsx(nct,{storedAnswer:o?o[E.id]:void 0,answer:{...f.getInputProps(E.id,{type:E.type==="checkbox"?"checkbox":"input"})},response:E,index:x+1}),v&&p&&_.jsx(Je,{children:`The correct answer is: ${(C=(T=a.correctAnswer)==null?void 0:T.find(A=>A.id===E.id))==null?void 0:C.answer}`})]})},`${E.id}-${i}`)}),_.jsxs(Vs,{justify:"right",gap:"xs",children:[v&&b&&_.jsx(Nn,{onClick:()=>m(!0),disabled:!f.isValid(),children:"Check Answer"}),b&&_.jsx(Alt,{disabled:v&&!p,setCheckClicked:m,label:a.nextButtonText||"Next"})]})]})}const BT="@REVISIT_COMMS",rct={minHeight:"500px",width:"100%",border:0};function ict({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=op(),r=ap(),i=ETe(),s=I.useRef(null),o=I.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=Xy(),u=dg(),l=I.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${BT}/${c}`,iframeId:o,message:f},"*")},[s,o]);return I.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${BT}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${BT}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${BT}/ANSWERS`:r(t(d.message));break;case`${BT}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),_.jsx("iframe",{ref:s,src:`${ip}${e.path}?trialid=${a}&id=${o}`,style:rct})}async function xX(e){const n=await(await fetch(`${ip}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}function ib({email:e,path:t}){const n=Jb();return _.jsxs(Wc,{fluid:!0,my:50,maw:800,mx:"auto",children:[_.jsx($i,{order:2,children:_.jsx(Je,{span:!0,c:"orange",children:"404"})}),_.jsxs(Je,{children:[_.jsx(Je,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),_.jsx(Bc,{h:"lg"}),_.jsxs(Qf,{children:[_.jsx(Qf.Item,{children:_.jsx(Je,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),_.jsx(Qf.Item,{children:_.jsxs(Je,{children:["If you're a participant, please contact the study administrator"," ",e&&_.jsxs(_.Fragment,{children:["at"," ",_.jsxs(uS,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const sct={maxWidth:"100%"};function oct({currentConfig:e}){const t={...sct,...e.style},[n,r]=I.useState(!0),[i,s]=I.useState(!1);return I.useEffect(()=>{async function o(){const a=await xX(e.path);s(!!a),r(!1)}o()},[e]),n||i?_.jsx(cg,{mx:"auto",src:`${ip}${e.path}`,style:t}):_.jsx(ib,{path:e.path})}function Q2(e){"@babel/helpers - typeof";return Q2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q2(e)}function act(e,t){if(Q2(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Q2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uct(e){var t=act(e,"string");return Q2(t)=="symbol"?t:t+""}function lct(e,t,n){return(t=uct(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Sce(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xce(Object(n),!0).forEach(function(r){lct(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xce(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Do(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Tce=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),d8=function(){return Math.random().toString(36).substring(7).split("").join(".")},$$={INIT:"@@redux/INIT"+d8(),REPLACE:"@@redux/REPLACE"+d8(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+d8()}};function cct(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function SX(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Do(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Do(1));return n(SX)(e,t)}if(typeof e!="function")throw new Error(Do(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(Do(3));return s}function f(m){if(typeof m!="function")throw new Error(Do(4));if(u)throw new Error(Do(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(Do(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!cct(m))throw new Error(Do(7));if(typeof m.type>"u")throw new Error(Do(8));if(u)throw new Error(Do(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(Do(10));i=m,d({type:$$.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(Do(11));function b(){v.next&&v.next(c())}b();var w=g(b);return{unsubscribe:w}}},m[Tce]=function(){return this},m}return d({type:$$.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[Tce]=p,r}function fct(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:$$.INIT});if(typeof r>"u")throw new Error(Do(12));if(typeof n(void 0,{type:$$.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Do(13))})}function dct(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{fct(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(Do(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function Cce(e,t){return function(){return t(e.apply(this,arguments))}}function Ace(e,t){if(typeof e=="function")return Cce(e,t);if(typeof e!="object"||e===null)throw new Error(Do(16));var n={};for(var r in e){var i=e[r];typeof i=="function"&&(n[r]=Cce(i,t))}return n}function J2(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function KTe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Do(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=J2.apply(void 0,a)(i.dispatch),Sce(Sce({},i),{},{dispatch:s})}}}var XTe={exports:{}},QTe={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GE=I;function hct(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pct=typeof Object.is=="function"?Object.is:hct,mct=GE.useState,gct=GE.useEffect,yct=GE.useLayoutEffect,vct=GE.useDebugValue;function bct(e,t){var n=t(),r=mct({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return yct(function(){i.value=n,i.getSnapshot=t,h8(i)&&s({inst:i})},[e,n,t]),gct(function(){return h8(i)&&s({inst:i}),e(function(){h8(i)&&s({inst:i})})},[e]),vct(n),n}function h8(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!pct(e,n)}catch{return!0}}function _ct(e,t){return t()}var wct=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?_ct:bct;QTe.useSyncExternalStore=GE.useSyncExternalStore!==void 0?GE.useSyncExternalStore:wct;XTe.exports=QTe;var JTe=XTe.exports,Ect={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G6=I,xct=JTe;function Sct(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Tct=typeof Object.is=="function"?Object.is:Sct,Cct=xct.useSyncExternalStore,Act=G6.useRef,Ict=G6.useEffect,kct=G6.useMemo,Rct=G6.useDebugValue;Ect.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=Act(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=kct(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,Tct(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=Cct(e,s[0],s[1]);return Ict(function(){o.hasValue=!0,o.value=a},[a]),Rct(a),a};function Nct(e){e()}let ZTe=Nct;const Dct=e=>ZTe=e,Pct=()=>ZTe,Ice=Symbol.for("react-redux-context"),kce=typeof globalThis<"u"?globalThis:{};function Oct(){var e;if(!I.createContext)return{};const t=(e=kce[Ice])!=null?e:kce[Ice]=new Map;let n=t.get(I.createContext);return n||(n=I.createContext(null),t.set(I.createContext,n)),n}const eCe=Oct(),$ct=()=>{throw new Error("uSES not initialized!")};var tCe={exports:{}},Lr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wo=typeof Symbol=="function"&&Symbol.for,TX=wo?Symbol.for("react.element"):60103,CX=wo?Symbol.for("react.portal"):60106,Y6=wo?Symbol.for("react.fragment"):60107,K6=wo?Symbol.for("react.strict_mode"):60108,X6=wo?Symbol.for("react.profiler"):60114,Q6=wo?Symbol.for("react.provider"):60109,J6=wo?Symbol.for("react.context"):60110,AX=wo?Symbol.for("react.async_mode"):60111,Z6=wo?Symbol.for("react.concurrent_mode"):60111,eF=wo?Symbol.for("react.forward_ref"):60112,tF=wo?Symbol.for("react.suspense"):60113,Mct=wo?Symbol.for("react.suspense_list"):60120,nF=wo?Symbol.for("react.memo"):60115,rF=wo?Symbol.for("react.lazy"):60116,Lct=wo?Symbol.for("react.block"):60121,Fct=wo?Symbol.for("react.fundamental"):60117,Bct=wo?Symbol.for("react.responder"):60118,jct=wo?Symbol.for("react.scope"):60119;function ac(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case TX:switch(e=e.type,e){case AX:case Z6:case Y6:case X6:case K6:case tF:return e;default:switch(e=e&&e.$$typeof,e){case J6:case eF:case rF:case nF:case Q6:return e;default:return t}}case CX:return t}}}function nCe(e){return ac(e)===Z6}Lr.AsyncMode=AX;Lr.ConcurrentMode=Z6;Lr.ContextConsumer=J6;Lr.ContextProvider=Q6;Lr.Element=TX;Lr.ForwardRef=eF;Lr.Fragment=Y6;Lr.Lazy=rF;Lr.Memo=nF;Lr.Portal=CX;Lr.Profiler=X6;Lr.StrictMode=K6;Lr.Suspense=tF;Lr.isAsyncMode=function(e){return nCe(e)||ac(e)===AX};Lr.isConcurrentMode=nCe;Lr.isContextConsumer=function(e){return ac(e)===J6};Lr.isContextProvider=function(e){return ac(e)===Q6};Lr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===TX};Lr.isForwardRef=function(e){return ac(e)===eF};Lr.isFragment=function(e){return ac(e)===Y6};Lr.isLazy=function(e){return ac(e)===rF};Lr.isMemo=function(e){return ac(e)===nF};Lr.isPortal=function(e){return ac(e)===CX};Lr.isProfiler=function(e){return ac(e)===X6};Lr.isStrictMode=function(e){return ac(e)===K6};Lr.isSuspense=function(e){return ac(e)===tF};Lr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Y6||e===Z6||e===X6||e===K6||e===tF||e===Mct||typeof e=="object"&&e!==null&&(e.$$typeof===rF||e.$$typeof===nF||e.$$typeof===Q6||e.$$typeof===J6||e.$$typeof===eF||e.$$typeof===Fct||e.$$typeof===Bct||e.$$typeof===jct||e.$$typeof===Lct)};Lr.typeOf=ac;tCe.exports=Lr;var Uct=tCe.exports,IX=Uct,zct={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Vct={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Hct={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},rCe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},kX={};kX[IX.ForwardRef]=Hct;kX[IX.Memo]=rCe;function Rce(e){return IX.isMemo(e)?rCe:kX[e.$$typeof]||zct}var qct=Object.defineProperty,Wct=Object.getOwnPropertyNames,Nce=Object.getOwnPropertySymbols,Gct=Object.getOwnPropertyDescriptor,Yct=Object.getPrototypeOf,Dce=Object.prototype;function iCe(e,t,n){if(typeof t!="string"){if(Dce){var r=Yct(t);r&&r!==Dce&&iCe(e,r,n)}var i=Wct(t);Nce&&(i=i.concat(Nce(t)));for(var s=Rce(e),o=Rce(t),a=0;a<i.length;++a){var u=i[a];if(!Vct[u]&&!(n&&n[u])&&!(o&&o[u])&&!(s&&s[u])){var l=Gct(t,u);try{qct(e,u,l)}catch{}}}}return e}var Kct=iCe;const Pce=dl(Kct);var sCe={exports:{}},Fr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RX=Symbol.for("react.element"),NX=Symbol.for("react.portal"),iF=Symbol.for("react.fragment"),sF=Symbol.for("react.strict_mode"),oF=Symbol.for("react.profiler"),aF=Symbol.for("react.provider"),uF=Symbol.for("react.context"),Xct=Symbol.for("react.server_context"),lF=Symbol.for("react.forward_ref"),cF=Symbol.for("react.suspense"),fF=Symbol.for("react.suspense_list"),dF=Symbol.for("react.memo"),hF=Symbol.for("react.lazy"),Qct=Symbol.for("react.offscreen"),oCe;oCe=Symbol.for("react.module.reference");function lf(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case RX:switch(e=e.type,e){case iF:case oF:case sF:case cF:case fF:return e;default:switch(e=e&&e.$$typeof,e){case Xct:case uF:case lF:case hF:case dF:case aF:return e;default:return t}}case NX:return t}}}Fr.ContextConsumer=uF;Fr.ContextProvider=aF;Fr.Element=RX;Fr.ForwardRef=lF;Fr.Fragment=iF;Fr.Lazy=hF;Fr.Memo=dF;Fr.Portal=NX;Fr.Profiler=oF;Fr.StrictMode=sF;Fr.Suspense=cF;Fr.SuspenseList=fF;Fr.isAsyncMode=function(){return!1};Fr.isConcurrentMode=function(){return!1};Fr.isContextConsumer=function(e){return lf(e)===uF};Fr.isContextProvider=function(e){return lf(e)===aF};Fr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===RX};Fr.isForwardRef=function(e){return lf(e)===lF};Fr.isFragment=function(e){return lf(e)===iF};Fr.isLazy=function(e){return lf(e)===hF};Fr.isMemo=function(e){return lf(e)===dF};Fr.isPortal=function(e){return lf(e)===NX};Fr.isProfiler=function(e){return lf(e)===oF};Fr.isStrictMode=function(e){return lf(e)===sF};Fr.isSuspense=function(e){return lf(e)===cF};Fr.isSuspenseList=function(e){return lf(e)===fF};Fr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===iF||e===oF||e===sF||e===cF||e===fF||e===Qct||typeof e=="object"&&e!==null&&(e.$$typeof===hF||e.$$typeof===dF||e.$$typeof===aF||e.$$typeof===uF||e.$$typeof===lF||e.$$typeof===oCe||e.getModuleId!==void 0)};Fr.typeOf=lf;sCe.exports=Fr;var Jct=sCe.exports;const Zct=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function eft(e,t,n,r,{areStatesEqual:i,areOwnPropsEqual:s,areStatePropsEqual:o}){let a=!1,u,l,c,f,d;function h(v,b){return u=v,l=b,c=e(u,l),f=t(r,l),d=n(c,f,l),a=!0,d}function p(){return c=e(u,l),t.dependsOnOwnProps&&(f=t(r,l)),d=n(c,f,l),d}function m(){return e.dependsOnOwnProps&&(c=e(u,l)),t.dependsOnOwnProps&&(f=t(r,l)),d=n(c,f,l),d}function g(){const v=e(u,l),b=!o(v,c);return c=v,b&&(d=n(c,f,l)),d}function y(v,b){const w=!s(b,l),E=!i(v,u,b,l);return u=v,l=b,w&&E?p():w?m():E?g():d}return function(b,w){return a?y(b,w):h(b,w)}}function tft(e,t){let{initMapStateToProps:n,initMapDispatchToProps:r,initMergeProps:i}=t,s=cK(t,Zct);const o=n(e,s),a=r(e,s),u=i(e,s);return eft(o,a,u,e,s)}function nft(e,t){const n={};for(const r in e){const i=e[r];typeof i=="function"&&(n[r]=(...s)=>t(i(...s)))}return n}function Hz(e){return function(n){const r=e(n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function Oce(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function aCe(e,t){return function(r,{displayName:i}){const s=function(a,u){return s.dependsOnOwnProps?s.mapToProps(a,u):s.mapToProps(a,void 0)};return s.dependsOnOwnProps=!0,s.mapToProps=function(a,u){s.mapToProps=e,s.dependsOnOwnProps=Oce(e);let l=s(a,u);return typeof l=="function"&&(s.mapToProps=l,s.dependsOnOwnProps=Oce(l),l=s(a,u)),l},s}}function DX(e,t){return(n,r)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${r.wrappedComponentName}.`)}}function rft(e){return e&&typeof e=="object"?Hz(t=>nft(e,t)):e?typeof e=="function"?aCe(e):DX(e,"mapDispatchToProps"):Hz(t=>({dispatch:t}))}function ift(e){return e?typeof e=="function"?aCe(e):DX(e,"mapStateToProps"):Hz(()=>({}))}function sft(e,t,n){return gm({},n,e,t)}function oft(e){return function(n,{displayName:r,areMergedPropsEqual:i}){let s=!1,o;return function(u,l,c){const f=e(u,l,c);return s?i(f,o)||(o=f):(s=!0,o=f),o}}}function aft(e){return e?typeof e=="function"?oft(e):DX(e,"mergeProps"):()=>sft}function uft(){const e=Pct();let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=t;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,s=n={callback:r,next:null,prev:n};return s.prev?s.prev.next=s:t=s,function(){!i||t===null||(i=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}const $ce={notify(){},get:()=>[]};function uCe(e,t){let n,r=$ce,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=t?t.addNestedSub(u):e.subscribe(u),r=uft())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=$ce)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}const lft=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",M$=lft?I.useLayoutEffect:I.useEffect;function Mce(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function p8(e,t){if(Mce(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!Mce(e[n[i]],t[n[i]]))return!1;return!0}const cft=["reactReduxForwardedRef"];let lCe=$ct;const fft=e=>{lCe=e},dft=[null,null];function hft(e,t,n){M$(()=>e(...t),n)}function pft(e,t,n,r,i,s){e.current=r,n.current=!1,i.current&&(i.current=null,s())}function mft(e,t,n,r,i,s,o,a,u,l,c){if(!e)return()=>{};let f=!1,d=null;const h=()=>{if(f||!a.current)return;const m=t.getState();let g,y;try{g=r(m,i.current)}catch(v){y=v,d=v}y||(d=null),g===s.current?o.current||l():(s.current=g,u.current=g,o.current=!0,c())};return n.onStateChange=h,n.trySubscribe(),h(),()=>{if(f=!0,n.tryUnsubscribe(),n.onStateChange=null,d)throw d}}function gft(e,t){return e===t}function cCe(e,t,n,{pure:r,areStatesEqual:i=gft,areOwnPropsEqual:s=p8,areStatePropsEqual:o=p8,areMergedPropsEqual:a=p8,forwardRef:u=!1,context:l=eCe}={}){const c=l,f=ift(e),d=rft(t),h=aft(n),p=!!e;return g=>{const y=g.displayName||g.name||"Component",v=`Connect(${y})`,b={shouldHandleStateChanges:p,displayName:v,wrappedComponentName:y,WrappedComponent:g,initMapStateToProps:f,initMapDispatchToProps:d,initMergeProps:h,areStatesEqual:i,areStatePropsEqual:o,areOwnPropsEqual:s,areMergedPropsEqual:a};function w(T){const[C,A,k]=I.useMemo(()=>{const{reactReduxForwardedRef:pe}=T,He=cK(T,cft);return[T.context,pe,He]},[T]),R=I.useMemo(()=>C&&C.Consumer&&Jct.isContextConsumer(I.createElement(C.Consumer,null))?C:c,[C,c]),O=I.useContext(R),D=!!T.store&&!!T.store.getState&&!!T.store.dispatch,$=!!O&&!!O.store,F=D?T.store:O.store,L=$?O.getServerState:F.getState,j=I.useMemo(()=>tft(F.dispatch,b),[F]),[z,q]=I.useMemo(()=>{if(!p)return dft;const pe=uCe(F,D?void 0:O.subscription),He=pe.notifyNestedSubs.bind(pe);return[pe,He]},[F,D,O]),P=I.useMemo(()=>D?O:gm({},O,{subscription:z}),[D,O,z]),U=I.useRef(),W=I.useRef(k),B=I.useRef(),H=I.useRef(!1);I.useRef(!1);const G=I.useRef(!1),te=I.useRef();M$(()=>(G.current=!0,()=>{G.current=!1}),[]);const le=I.useMemo(()=>()=>B.current&&k===W.current?B.current:j(F.getState(),k),[F,k]),fe=I.useMemo(()=>He=>z?mft(p,F,z,j,W,U,H,G,B,q,He):()=>{},[z]);hft(pft,[W,U,H,k,B,q]);let de;try{de=lCe(fe,le,L?()=>j(L(),k):le)}catch(pe){throw te.current&&(pe.message+=`
The error may be correlated with this previous error:
${te.current.stack}

`),pe}M$(()=>{te.current=void 0,B.current=void 0,U.current=de});const ge=I.useMemo(()=>I.createElement(g,gm({},de,{ref:A})),[A,g,de]);return I.useMemo(()=>p?I.createElement(R.Provider,{value:P},ge):ge,[R,ge,P])}const x=I.memo(w);if(x.WrappedComponent=g,x.displayName=w.displayName=v,u){const C=I.forwardRef(function(k,R){return I.createElement(x,gm({},k,{reactReduxForwardedRef:R}))});return C.displayName=v,C.WrappedComponent=g,Pce(C,g)}return Pce(x,g)}}function yft({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",noopCheck:s="once"}){const o=I.useMemo(()=>{const l=uCe(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,noopCheck:s}},[e,r,i,s]),a=I.useMemo(()=>e.getState(),[e]);M$(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||eCe;return I.createElement(u.Provider,{value:o},n)}fft(JTe.useSyncExternalStore);Dct(zy.unstable_batchedUpdates);function vft(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function fCe(e,t){var n=I.useState(function(){return{inputs:t,result:e()}})[0],r=I.useRef(!0),i=I.useRef(n),s=r.current||!!(t&&i.current.inputs&&vft(t,i.current.inputs)),o=s?i.current:{inputs:t,result:e()};return I.useEffect(function(){r.current=!1,i.current=o},[o]),o.result}function bft(e,t){return fCe(function(){return e},t)}var Jn=fCe,$t=bft,_ft="Invariant failed";function wft(e,t){throw new Error(_ft)}var zf=function(t){var n=t.top,r=t.right,i=t.bottom,s=t.left,o=r-s,a=i-n,u={top:n,right:r,bottom:i,left:s,width:o,height:a,x:s,y:n,center:{x:(r+s)/2,y:(i+n)/2}};return u},PX=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},Lce=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},Eft=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},m8={top:0,right:0,bottom:0,left:0},OX=function(t){var n=t.borderBox,r=t.margin,i=r===void 0?m8:r,s=t.border,o=s===void 0?m8:s,a=t.padding,u=a===void 0?m8:a,l=zf(PX(n,i)),c=zf(Lce(n,o)),f=zf(Lce(c,u));return{marginBox:l,borderBox:zf(n),paddingBox:c,contentBox:f,margin:i,border:o,padding:u}},dc=function(t){var n=t.slice(0,-2),r=t.slice(-2);if(r!=="px")return 0;var i=Number(n);return isNaN(i)&&wft(),i},xft=function(){return{x:window.pageXOffset,y:window.pageYOffset}},L$=function(t,n){var r=t.borderBox,i=t.border,s=t.margin,o=t.padding,a=Eft(r,n);return OX({borderBox:a,border:i,margin:s,padding:o})},F$=function(t,n){return n===void 0&&(n=xft()),L$(t,n)},dCe=function(t,n){var r={top:dc(n.marginTop),right:dc(n.marginRight),bottom:dc(n.marginBottom),left:dc(n.marginLeft)},i={top:dc(n.paddingTop),right:dc(n.paddingRight),bottom:dc(n.paddingBottom),left:dc(n.paddingLeft)},s={top:dc(n.borderTopWidth),right:dc(n.borderRightWidth),bottom:dc(n.borderBottomWidth),left:dc(n.borderLeftWidth)};return OX({borderBox:t,margin:r,padding:i,border:s})},hCe=function(t){var n=t.getBoundingClientRect(),r=window.getComputedStyle(t);return dCe(n,r)},Fce=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function Sft(e,t){return!!(e===t||Fce(e)&&Fce(t))}function Tft(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!Sft(e[n],t[n]))return!1;return!0}function go(e,t){t===void 0&&(t=Tft);var n=null;function r(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(n&&n.lastThis===this&&t(i,n.lastArgs))return n.lastResult;var o=e.apply(this,i);return n={lastResult:o,lastArgs:i,lastThis:this},o}return r.clear=function(){n=null},r}var Z2=function(t){var n=[],r=null,i=function(){for(var o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];n=a,!r&&(r=requestAnimationFrame(function(){r=null,t.apply(void 0,n)}))};return i.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},i};function pCe(e,t){}pCe.bind(null,"warn");pCe.bind(null,"error");function O0(){}function Cft(e,t){return{...e,...t}}function Pc(e,t,n){const r=t.map(i=>{const s=Cft(n,i.options);return e.addEventListener(i.eventName,i.fn,s),function(){e.removeEventListener(i.eventName,i.fn,s)}});return function(){r.forEach(s=>{s()})}}const Aft="Invariant failed";class B$ extends Error{}B$.prototype.toString=function(){return this.message};function ft(e,t){throw new B$(Aft)}class Ift extends qt.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=O0,this.onWindowError=n=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),n.error instanceof B$&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=Pc(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof B$){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const kft=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,j$=e=>e+1,Rft=e=>`
  You have lifted an item in position ${j$(e.source.index)}
`,mCe=(e,t)=>{const n=e.droppableId===t.droppableId,r=j$(e.index),i=j$(t.index);return n?`
      You have moved the item from position ${r}
      to position ${i}
    `:`
    You have moved the item from position ${r}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${i}
  `},gCe=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,Nft=e=>{const t=e.destination;if(t)return mCe(e.source,t);const n=e.combine;return n?gCe(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},Bce=e=>`
  The item has returned to its starting position
  of ${j$(e.index)}
`,Dft=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${Bce(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${mCe(e.source,t)}
    `:n?`
      You have dropped the item.
      ${gCe(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${Bce(e.source)}
  `},Pft={dragHandleUsageInstructions:kft,onDragStart:Rft,onDragUpdate:Nft,onDragEnd:Dft};var UP=Pft;const vo={x:0,y:0},Fo=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),Ol=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),$0=(e,t)=>e.x===t.x&&e.y===t.y,wS=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),sb=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},eI=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),jce=(e,t)=>Math.min(...t.map(n=>eI(e,n))),yCe=e=>t=>({x:e(t.x),y:e(t.y)});var Oft=(e,t)=>{const n=zf({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const zk=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),Uce=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],$ft={top:0,right:0,bottom:0,left:0},Mft=(e,t)=>t?zk(e,t.scroll.diff.displacement):e,Lft=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,Fft=(e,t)=>t&&t.shouldClipSubject?Oft(t.pageMarginBox,e):zf(e);var YE=({page:e,withPlaceholder:t,axis:n,frame:r})=>{const i=Mft(e.marginBox,r),s=Lft(i,n,t),o=Fft(s,r);return{page:e,withPlaceholder:t,active:o}},$X=(e,t)=>{e.frame||ft();const n=e.frame,r=Ol(t,n.scroll.initial),i=wS(r),s={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:i},max:n.scroll.max}},o=YE({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:s});return{...e,frame:s,subject:o}};const vCe=go(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),bCe=go(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),pF=go(e=>Object.values(e)),Bft=go(e=>Object.values(e));var ES=go((e,t)=>Bft(t).filter(r=>e===r.descriptor.droppableId).sort((r,i)=>r.descriptor.index-i.descriptor.index));function MX(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function mF(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var gF=go((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),jft=({isMovingForward:e,draggable:t,destination:n,insideDestination:r,previousImpact:i})=>{if(!n.isCombineEnabled||!MX(i))return null;function o(h){const p={type:"COMBINE",combine:{draggableId:h,droppableId:n.descriptor.id}};return{...i,at:p}}const a=i.displaced.all,u=a.length?a[0]:null;if(e)return u?o(u):null;const l=gF(t,r);if(!u){if(!l.length)return null;const h=l[l.length-1];return o(h.descriptor.id)}const c=l.findIndex(h=>h.descriptor.id===u);c===-1&&ft();const f=c-1;if(f<0)return null;const d=l[f];return o(d.descriptor.id)},xS=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const _Ce={point:vo,value:0},tI={invisible:{},visible:{},all:[]},Uft={displaced:tI,displacedBy:_Ce,at:null};var zft=Uft,jc=(e,t)=>n=>e<=n&&n<=t,wCe=e=>{const t=jc(e.top,e.bottom),n=jc(e.left,e.right);return r=>{if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;const s=t(r.top)||t(r.bottom),o=n(r.left)||n(r.right);if(s&&o)return!0;const u=r.top<e.top&&r.bottom>e.bottom,l=r.left<e.left&&r.right>e.right;return u&&l?!0:u&&o||l&&s}},Vft=e=>{const t=jc(e.top,e.bottom),n=jc(e.left,e.right);return r=>t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right)};const LX={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},ECe={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var Hft=e=>t=>{const n=jc(t.top,t.bottom),r=jc(t.left,t.right);return i=>e===LX?n(i.top)&&n(i.bottom):r(i.left)&&r(i.right)};const qft=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:vo;return zk(e,n)},Wft=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,Gft=(e,t,n)=>n(t)(e),FX=({target:e,destination:t,viewport:n,withDroppableDisplacement:r,isVisibleThroughFrameFn:i})=>{const s=r?qft(e,t):e;return Wft(s,t,i)&&Gft(s,n,i)},Yft=e=>FX({...e,isVisibleThroughFrameFn:wCe}),xCe=e=>FX({...e,isVisibleThroughFrameFn:Vft}),Kft=e=>FX({...e,isVisibleThroughFrameFn:Hft(e.destination.axis)}),Xft=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:r,visible:i}=t;if(r[e])return!1;const s=i[e];return s?s.shouldAnimate:!0};function Qft(e,t){const n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return zf(PX(n,r))}function nI({afterDragging:e,destination:t,displacedBy:n,viewport:r,forceShouldAnimate:i,last:s}){return e.reduce(function(a,u){const l=Qft(u,n),c=u.descriptor.id;if(a.all.push(c),!Yft({target:l,destination:t,viewport:r,withDroppableDisplacement:!0}))return a.invisible[u.descriptor.id]=!0,a;const d=Xft(c,s,i),h={draggableId:c,shouldAnimate:d};return a.visible[c]=h,a},{all:[],visible:{},invisible:{}})}function Jft(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function zce({insideDestination:e,inHomeList:t,displacedBy:n,destination:r}){const i=Jft(e,{inHomeList:t});return{displaced:tI,displacedBy:n,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:i}}}}function U$({draggable:e,insideDestination:t,destination:n,viewport:r,displacedBy:i,last:s,index:o,forceShouldAnimate:a}){const u=xS(e,n);if(o==null)return zce({insideDestination:t,inHomeList:u,displacedBy:i,destination:n});const l=t.find(p=>p.descriptor.index===o);if(!l)return zce({insideDestination:t,inHomeList:u,displacedBy:i,destination:n});const c=gF(e,t),f=t.indexOf(l),d=c.slice(f);return{displaced:nI({afterDragging:d,destination:n,displacedBy:i,last:s,viewport:r.frame,forceShouldAnimate:a}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function iy(e,t){return!!t.effected[e]}var Zft=({isMovingForward:e,destination:t,draggables:n,combine:r,afterCritical:i})=>{if(!t.isCombineEnabled)return null;const s=r.draggableId,a=n[s].descriptor.index;return iy(s,i)?e?a:a-1:e?a+1:a},edt=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:r})=>{if(!n.length)return null;const i=r.index,s=e?i+1:i-1,o=n[0].descriptor.index,a=n[n.length-1].descriptor.index,u=t?a:a+1;return s<o||s>u?null:s},tdt=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:r,destination:i,insideDestination:s,previousImpact:o,viewport:a,afterCritical:u})=>{const l=o.at;if(l||ft(),l.type==="REORDER"){const f=edt({isMovingForward:e,isInHomeList:t,location:l.destination,insideDestination:s});return f==null?null:U$({draggable:n,insideDestination:s,destination:i,viewport:a,last:o.displaced,displacedBy:o.displacedBy,index:f})}const c=Zft({isMovingForward:e,destination:i,displaced:o.displaced,draggables:r,combine:l.combine,afterCritical:u});return c==null?null:U$({draggable:n,insideDestination:s,destination:i,viewport:a,last:o.displaced,displacedBy:o.displacedBy,index:c})},ndt=({displaced:e,afterCritical:t,combineWith:n,displacedBy:r})=>{const i=!!(e.visible[n]||e.invisible[n]);return iy(n,t)?i?vo:wS(r.point):i?r.point:vo},rdt=({afterCritical:e,impact:t,draggables:n})=>{const r=mF(t);r||ft();const i=r.draggableId,s=n[i].page.borderBox.center,o=ndt({displaced:t.displaced,afterCritical:e,combineWith:i,displacedBy:t.displacedBy});return Fo(s,o)};const SCe=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,idt=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,BX=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,Vce=({axis:e,moveRelativeTo:t,isMoving:n})=>sb(e.line,t.marginBox[e.end]+SCe(e,n),BX(e,t.marginBox,n)),Hce=({axis:e,moveRelativeTo:t,isMoving:n})=>sb(e.line,t.marginBox[e.start]-idt(e,n),BX(e,t.marginBox,n)),sdt=({axis:e,moveInto:t,isMoving:n})=>sb(e.line,t.contentBox[e.start]+SCe(e,n),BX(e,t.contentBox,n));var odt=({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:i})=>{const s=ES(r.descriptor.id,n),o=t.page,a=r.axis;if(!s.length)return sdt({axis:a,moveInto:r.page,isMoving:o});const{displaced:u,displacedBy:l}=e,c=u.all[0];if(c){const d=n[c];if(iy(c,i))return Hce({axis:a,moveRelativeTo:d.page,isMoving:o});const h=L$(d.page,l.point);return Hce({axis:a,moveRelativeTo:h,isMoving:o})}const f=s[s.length-1];if(f.descriptor.id===t.descriptor.id)return o.borderBox.center;if(iy(f.descriptor.id,i)){const d=L$(f.page,wS(i.displacedBy.point));return Vce({axis:a,moveRelativeTo:d,isMoving:o})}return Vce({axis:a,moveRelativeTo:f.page,isMoving:o})},qz=(e,t)=>{const n=e.frame;return n?Fo(t,n.scroll.diff.displacement):t};const adt=({impact:e,draggable:t,droppable:n,draggables:r,afterCritical:i})=>{const s=t.page.borderBox.center,o=e.at;return!n||!o?s:o.type==="REORDER"?odt({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:i}):rdt({impact:e,draggables:r,afterCritical:i})};var yF=e=>{const t=adt(e),n=e.droppable;return n?qz(n,t):t},TCe=(e,t)=>{const n=Ol(t,e.scroll.initial),r=wS(n);return{frame:zf({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function qce(e,t){return e.map(n=>t[n])}function udt(e,t){for(let n=0;n<t.length;n++){const r=t[n].visible[e];if(r)return r}return null}var ldt=({impact:e,viewport:t,destination:n,draggables:r,maxScrollChange:i})=>{const s=TCe(t,Fo(t.scroll.current,i)),o=n.frame?$X(n,Fo(n.frame.scroll.current,i)):n,a=e.displaced,u=nI({afterDragging:qce(a.all,r),destination:n,displacedBy:e.displacedBy,viewport:s.frame,last:a,forceShouldAnimate:!1}),l=nI({afterDragging:qce(a.all,r),destination:o,displacedBy:e.displacedBy,viewport:t.frame,last:a,forceShouldAnimate:!1}),c={},f={},d=[a,u,l];return a.all.forEach(p=>{const m=udt(p,d);if(m){f[p]=m;return}c[p]=!0}),{...e,displaced:{all:a.all,invisible:c,visible:f}}},cdt=(e,t)=>Fo(e.scroll.diff.displacement,t),jX=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const r=cdt(n,e),i=Ol(r,t.page.borderBox.center);return Fo(t.client.borderBox.center,i)},CCe=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:r,withDroppableDisplacement:i,onlyOnMainAxis:s=!1})=>{const o=Ol(n,e.page.borderBox.center),u={target:zk(e.page.borderBox,o),destination:t,withDroppableDisplacement:i,viewport:r};return s?Kft(u):xCe(u)},fdt=({isMovingForward:e,draggable:t,destination:n,draggables:r,previousImpact:i,viewport:s,previousPageBorderBoxCenter:o,previousClientSelection:a,afterCritical:u})=>{if(!n.isEnabled)return null;const l=ES(n.descriptor.id,r),c=xS(t,n),f=jft({isMovingForward:e,draggable:t,destination:n,insideDestination:l,previousImpact:i})||tdt({isMovingForward:e,isInHomeList:c,draggable:t,draggables:r,destination:n,insideDestination:l,previousImpact:i,viewport:s,afterCritical:u});if(!f)return null;const d=yF({impact:f,draggable:t,droppable:n,draggables:r,afterCritical:u});if(CCe({draggable:t,destination:n,newPageBorderBoxCenter:d,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:jX({pageBorderBoxCenter:d,draggable:t,viewport:s}),impact:f,scrollJumpRequest:null};const p=Ol(d,o),m=ldt({impact:f,viewport:s,destination:n,draggables:r,maxScrollChange:p});return{clientSelection:a,impact:m,scrollJumpRequest:p}};const Ba=e=>{const t=e.subject.active;return t||ft(),t};var ddt=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:r,viewport:i})=>{const s=n.subject.active;if(!s)return null;const o=n.axis,a=jc(s[o.start],s[o.end]),u=pF(r).filter(c=>c!==n).filter(c=>c.isEnabled).filter(c=>!!c.subject.active).filter(c=>wCe(i.frame)(Ba(c))).filter(c=>{const f=Ba(c);return e?s[o.crossAxisEnd]<f[o.crossAxisEnd]:f[o.crossAxisStart]<s[o.crossAxisStart]}).filter(c=>{const f=Ba(c),d=jc(f[o.start],f[o.end]);return a(f[o.start])||a(f[o.end])||d(s[o.start])||d(s[o.end])}).sort((c,f)=>{const d=Ba(c)[o.crossAxisStart],h=Ba(f)[o.crossAxisStart];return e?d-h:h-d}).filter((c,f,d)=>Ba(c)[o.crossAxisStart]===Ba(d[0])[o.crossAxisStart]);if(!u.length)return null;if(u.length===1)return u[0];const l=u.filter(c=>jc(Ba(c)[o.start],Ba(c)[o.end])(t[o.line]));return l.length===1?l[0]:l.length>1?l.sort((c,f)=>Ba(c)[o.start]-Ba(f)[o.start])[0]:u.sort((c,f)=>{const d=jce(t,Uce(Ba(c))),h=jce(t,Uce(Ba(f)));return d!==h?d-h:Ba(c)[o.start]-Ba(f)[o.start]})[0]};const Wce=(e,t)=>{const n=e.page.borderBox.center;return iy(e.descriptor.id,t)?Ol(n,t.displacedBy.point):n},hdt=(e,t)=>{const n=e.page.borderBox;return iy(e.descriptor.id,t)?zk(n,wS(t.displacedBy.point)):n};var pdt=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:r,afterCritical:i})=>r.filter(o=>xCe({target:hdt(o,i),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((o,a)=>{const u=eI(e,qz(n,Wce(o,i))),l=eI(e,qz(n,Wce(a,i)));return u<l?-1:l<u?1:o.descriptor.index-a.descriptor.index})[0]||null,Vk=go(function(t,n){const r=n[t.line];return{value:r,point:sb(t.line,r)}});const mdt=(e,t,n)=>{const r=e.axis;if(e.descriptor.mode==="virtual")return sb(r.line,t[r.line]);const i=e.subject.page.contentBox[r.size],u=ES(e.descriptor.id,n).reduce((l,c)=>l+c.client.marginBox[r.size],0)+t[r.line]-i;return u<=0?null:sb(r.line,u)},ACe=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),ICe=(e,t,n)=>{const r=e.frame;xS(t,e)&&ft(),e.subject.withPlaceholder&&ft();const i=Vk(e.axis,t.displaceBy).point,s=mdt(e,i,n),o={placeholderSize:i,increasedBy:s,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r){const c=YE({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:e.frame});return{...e,subject:c}}const a=s?Fo(r.scroll.max,s):r.scroll.max,u=ACe(r,a),l=YE({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:u});return{...e,subject:l,frame:u}},gdt=e=>{const t=e.subject.withPlaceholder;t||ft();const n=e.frame;if(!n){const o=YE({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:o}}const r=t.oldFrameMaxScroll;r||ft();const i=ACe(n,r),s=YE({page:e.subject.page,axis:e.axis,frame:i,withPlaceholder:null});return{...e,subject:s,frame:i}};var ydt=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:r,draggables:i,destination:s,viewport:o,afterCritical:a})=>{if(!t){if(n.length)return null;const f={displaced:tI,displacedBy:_Ce,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:0}}},d=yF({impact:f,draggable:r,droppable:s,draggables:i,afterCritical:a}),h=xS(r,s)?s:ICe(s,r,i);return CCe({draggable:r,destination:h,newPageBorderBoxCenter:d,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?f:null}const u=e[s.axis.line]<=t.page.borderBox.center[s.axis.line],l=(()=>{const f=t.descriptor.index;return t.descriptor.id===r.descriptor.id||u?f:f+1})(),c=Vk(s.axis,r.displaceBy);return U$({draggable:r,insideDestination:n,destination:s,viewport:o,displacedBy:c,last:tI,index:l})},vdt=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:r,draggables:i,droppables:s,viewport:o,afterCritical:a})=>{const u=ddt({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:s,viewport:o});if(!u)return null;const l=ES(u.descriptor.id,i),c=pdt({pageBorderBoxCenter:t,viewport:o,destination:u,insideDestination:l,afterCritical:a}),f=ydt({previousPageBorderBoxCenter:t,destination:u,draggable:n,draggables:i,moveRelativeTo:c,insideDestination:l,viewport:o,afterCritical:a});if(!f)return null;const d=yF({impact:f,draggable:n,droppable:u,draggables:i,afterCritical:a});return{clientSelection:jX({pageBorderBoxCenter:d,draggable:n,viewport:o}),impact:f,scrollJumpRequest:null}},Bl=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const bdt=(e,t)=>{const n=Bl(e);return n?t[n]:null};var _dt=({state:e,type:t})=>{const n=bdt(e.impact,e.dimensions.droppables),r=!!n,i=e.dimensions.droppables[e.critical.droppable.id],s=n||i,o=s.axis.direction,a=o==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||o==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(a&&!r)return null;const u=t==="MOVE_DOWN"||t==="MOVE_RIGHT",l=e.dimensions.draggables[e.critical.draggable.id],c=e.current.page.borderBoxCenter,{draggables:f,droppables:d}=e.dimensions;return a?fdt({isMovingForward:u,previousPageBorderBoxCenter:c,draggable:l,destination:s,draggables:f,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):vdt({isMovingForward:u,previousPageBorderBoxCenter:c,draggable:l,isOver:s,draggables:f,droppables:d,viewport:e.viewport,afterCritical:e.afterCritical})};function jv(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function kCe(e){const t=jc(e.top,e.bottom),n=jc(e.left,e.right);return function(i){return t(i.y)&&n(i.x)}}function wdt(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function Edt({pageBorderBox:e,draggable:t,candidates:n}){const r=t.page.borderBox.center,i=n.map(s=>{const o=s.axis,a=sb(s.axis.line,e.center[o.line],s.page.borderBox.center[o.crossAxisLine]);return{id:s.descriptor.id,distance:eI(r,a)}}).sort((s,o)=>o.distance-s.distance);return i[0]?i[0].id:null}function xdt({pageBorderBox:e,draggable:t,droppables:n}){const r=pF(n).filter(i=>{if(!i.isEnabled)return!1;const s=i.subject.active;if(!s||!wdt(e,s))return!1;if(kCe(s)(e.center))return!0;const o=i.axis,a=s.center[o.crossAxisLine],u=e[o.crossAxisStart],l=e[o.crossAxisEnd],c=jc(s[o.crossAxisStart],s[o.crossAxisEnd]),f=c(u),d=c(l);return!f&&!d?!0:f?u<a:l>a});return r.length?r.length===1?r[0].descriptor.id:Edt({pageBorderBox:e,draggable:t,candidates:r}):null}const RCe=(e,t)=>zf(zk(e,t));var Sdt=(e,t)=>{const n=e.frame;return n?RCe(t,n.scroll.diff.value):t};function NCe({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function Tdt({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var Cdt=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:r,last:i,viewport:s,afterCritical:o})=>{const a=n.axis,u=Vk(n.axis,t.displaceBy),l=u.value,c=e[a.start],f=e[a.end],h=gF(t,r).find(m=>{const g=m.descriptor.id,y=m.page.borderBox.center[a.line],v=iy(g,o),b=NCe({displaced:i,id:g});return v?b?f<=y:c<y-l:b?f<=y+l:c<y})||null,p=Tdt({draggable:t,closest:h,inHomeList:xS(t,n)});return U$({draggable:t,insideDestination:r,destination:n,viewport:s,last:i,displacedBy:u,index:p})};const Adt=4;var Idt=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:r,insideDestination:i,afterCritical:s})=>{if(!r.isCombineEnabled)return null;const o=r.axis,a=Vk(r.axis,e.displaceBy),u=a.value,l=t[o.start],c=t[o.end],d=gF(e,i).find(p=>{const m=p.descriptor.id,g=p.page.borderBox,v=g[o.size]/Adt,b=iy(m,s),w=NCe({displaced:n.displaced,id:m});return b?w?c>g[o.start]+v&&c<g[o.end]-v:l>g[o.start]-u+v&&l<g[o.end]-u-v:w?c>g[o.start]+u+v&&c<g[o.end]+u-v:l>g[o.start]+v&&l<g[o.end]-v});return d?{displacedBy:a,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:d.descriptor.id,droppableId:r.descriptor.id}}}:null},DCe=({pageOffset:e,draggable:t,draggables:n,droppables:r,previousImpact:i,viewport:s,afterCritical:o})=>{const a=RCe(t.page.borderBox,e),u=xdt({pageBorderBox:a,draggable:t,droppables:r});if(!u)return zft;const l=r[u],c=ES(l.descriptor.id,n),f=Sdt(l,a);return Idt({pageBorderBoxWithDroppableScroll:f,draggable:t,previousImpact:i,destination:l,insideDestination:c,afterCritical:o})||Cdt({pageBorderBoxWithDroppableScroll:f,draggable:t,destination:l,insideDestination:c,last:i.displaced,viewport:s,afterCritical:o})},UX=(e,t)=>({...e,[t.descriptor.id]:t});const kdt=({previousImpact:e,impact:t,droppables:n})=>{const r=Bl(e),i=Bl(t);if(!r||r===i)return n;const s=n[r];if(!s.subject.withPlaceholder)return n;const o=gdt(s);return UX(n,o)};var Rdt=({draggable:e,draggables:t,droppables:n,previousImpact:r,impact:i})=>{const s=kdt({previousImpact:r,impact:i,droppables:n}),o=Bl(i);if(!o)return s;const a=n[o];if(xS(e,a)||a.subject.withPlaceholder)return s;const u=ICe(a,e,t);return UX(s,u)},FA=({state:e,clientSelection:t,dimensions:n,viewport:r,impact:i,scrollJumpRequest:s})=>{const o=r||e.viewport,a=n||e.dimensions,u=t||e.current.client.selection,l=Ol(u,e.initial.client.selection),c={offset:l,selection:u,borderBoxCenter:Fo(e.initial.client.borderBoxCenter,l)},f={selection:Fo(c.selection,o.scroll.current),borderBoxCenter:Fo(c.borderBoxCenter,o.scroll.current),offset:Fo(c.offset,o.scroll.diff.value)},d={client:c,page:f};if(e.phase==="COLLECTING")return{...e,dimensions:a,viewport:o,current:d};const h=a.draggables[e.critical.draggable.id],p=i||DCe({pageOffset:f.offset,draggable:h,draggables:a.draggables,droppables:a.droppables,previousImpact:e.impact,viewport:o,afterCritical:e.afterCritical}),m=Rdt({draggable:h,impact:p,previousImpact:e.impact,draggables:a.draggables,droppables:a.droppables});return{...e,current:d,dimensions:{draggables:a.draggables,droppables:m},impact:p,viewport:o,scrollJumpRequest:s||null,forceShouldAnimate:s?!1:null}};function Ndt(e,t){return e.map(n=>t[n])}var PCe=({impact:e,viewport:t,draggables:n,destination:r,forceShouldAnimate:i})=>{const s=e.displaced,o=Ndt(s.all,n),a=nI({afterDragging:o,destination:r,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:i,last:s});return{...e,displaced:a}},OCe=({impact:e,draggable:t,droppable:n,draggables:r,viewport:i,afterCritical:s})=>{const o=yF({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:s});return jX({pageBorderBoxCenter:o,draggable:t,viewport:i})},$Ce=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&ft();const r=e.impact,i=n||e.viewport,s=t||e.dimensions,{draggables:o,droppables:a}=s,u=o[e.critical.draggable.id],l=Bl(r);l||ft();const c=a[l],f=PCe({impact:r,viewport:i,destination:c,draggables:o}),d=OCe({impact:f,draggable:u,droppable:c,draggables:o,viewport:i,afterCritical:e.afterCritical});return FA({impact:f,clientSelection:d,state:e,dimensions:s,viewport:i})},Ddt=e=>({index:e.index,droppableId:e.droppableId}),MCe=({draggable:e,home:t,draggables:n,viewport:r})=>{const i=Vk(t.axis,e.displaceBy),s=ES(t.descriptor.id,n),o=s.indexOf(e);o===-1&&ft();const a=s.slice(o+1),u=a.reduce((d,h)=>(d[h.descriptor.id]=!0,d),{}),l={inVirtualList:t.descriptor.mode==="virtual",displacedBy:i,effected:u};return{impact:{displaced:nI({afterDragging:a,destination:t,displacedBy:i,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:Ddt(e.descriptor)}},afterCritical:l}},Pdt=(e,t)=>({draggables:e.draggables,droppables:UX(e.droppables,t)}),Odt=({draggable:e,offset:t,initialWindowScroll:n})=>{const r=L$(e.client,t),i=F$(r,n);return{...e,placeholder:{...e.placeholder,client:r},client:r,page:i}},$dt=e=>{const t=e.frame;return t||ft(),t},Mdt=({additions:e,updatedDroppables:t,viewport:n})=>{const r=n.scroll.diff.value;return e.map(i=>{const s=i.descriptor.droppableId,o=t[s],u=$dt(o).scroll.diff.value,l=Fo(r,u);return Odt({draggable:i,offset:l,initialWindowScroll:n.scroll.initial})})},Ldt=({state:e,published:t})=>{const n=t.modified.map(y=>{const v=e.dimensions.droppables[y.droppableId];return $X(v,y.scroll)}),r={...e.dimensions.droppables,...vCe(n)},i=bCe(Mdt({additions:t.additions,updatedDroppables:r,viewport:e.viewport})),s={...e.dimensions.draggables,...i};t.removals.forEach(y=>{delete s[y]});const o={droppables:r,draggables:s},a=Bl(e.impact),u=a?o.droppables[a]:null,l=o.draggables[e.critical.draggable.id],c=o.droppables[e.critical.droppable.id],{impact:f,afterCritical:d}=MCe({draggable:l,home:c,draggables:s,viewport:e.viewport}),h=u&&u.isCombineEnabled?e.impact:f,p=DCe({pageOffset:e.current.page.offset,draggable:o.draggables[e.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:h,viewport:e.viewport,afterCritical:d}),m={...e,phase:"DRAGGING",impact:p,onLiftImpact:f,dimensions:o,afterCritical:d,forceShouldAnimate:!1};return e.phase==="COLLECTING"?m:{...m,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const Wz=e=>e.movementMode==="SNAP",g8=(e,t,n)=>{const r=Pdt(e.dimensions,t);return!Wz(e)||n?FA({state:e,dimensions:r}):$Ce({state:e,dimensions:r})};function y8(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const Gce={phase:"IDLE",completed:null,shouldFlush:!1};var Fdt=(e=Gce,t)=>{if(t.type==="FLUSH")return{...Gce,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&ft();const{critical:n,clientSelection:r,viewport:i,dimensions:s,movementMode:o}=t.payload,a=s.draggables[n.draggable.id],u=s.droppables[n.droppable.id],l={selection:r,borderBoxCenter:a.client.borderBox.center,offset:vo},c={client:l,page:{selection:Fo(l.selection,i.scroll.initial),borderBoxCenter:Fo(l.selection,i.scroll.initial),offset:Fo(l.selection,i.scroll.diff.value)}},f=pF(s.droppables).every(m=>!m.isFixedOnPage),{impact:d,afterCritical:h}=MCe({draggable:a,home:u,draggables:s.draggables,viewport:i});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:o,dimensions:s,initial:c,current:c,isWindowScrollAllowed:f,impact:d,afterCritical:h,onLiftImpact:d,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&ft(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||ft(),Ldt({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;jv(e)||ft();const{client:n}=t.payload;return $0(n,e.current.client.selection)?e:FA({state:e,clientSelection:n,impact:Wz(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return y8(e);jv(e)||ft();const{id:n,newScroll:r}=t.payload,i=e.dimensions.droppables[n];if(!i)return e;const s=$X(i,r);return g8(e,s,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;jv(e)||ft();const{id:n,isEnabled:r}=t.payload,i=e.dimensions.droppables[n];i||ft(),i.isEnabled===r&&ft();const s={...i,isEnabled:r};return g8(e,s,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;jv(e)||ft();const{id:n,isCombineEnabled:r}=t.payload,i=e.dimensions.droppables[n];i||ft(),i.isCombineEnabled===r&&ft();const s={...i,isCombineEnabled:r};return g8(e,s,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;jv(e)||ft(),e.isWindowScrollAllowed||ft();const n=t.payload.newScroll;if($0(e.viewport.scroll.current,n))return y8(e);const r=TCe(e.viewport,n);return Wz(e)?$Ce({state:e,viewport:r}):FA({state:e,viewport:r})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!jv(e))return e;const n=t.payload.maxScroll;if($0(n,e.viewport.scroll.max))return e;const r={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:r}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&ft();const n=_dt({state:e,type:t.type});return n?FA({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&ft(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:r,newHomeClientOffset:i}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||ft(),{phase:"DROP_ANIMATING",completed:n,dropDuration:r,newHomeClientOffset:i,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};const Bdt=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),jdt=e=>({type:"LIFT",payload:e}),Udt=e=>({type:"INITIAL_PUBLISH",payload:e}),zdt=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),Vdt=()=>({type:"COLLECTION_STARTING",payload:null}),Hdt=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),qdt=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),Wdt=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),LCe=e=>({type:"MOVE",payload:e}),Gdt=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),Ydt=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),Kdt=()=>({type:"MOVE_UP",payload:null}),Xdt=()=>({type:"MOVE_DOWN",payload:null}),Qdt=()=>({type:"MOVE_RIGHT",payload:null}),Jdt=()=>({type:"MOVE_LEFT",payload:null}),zX=()=>({type:"FLUSH",payload:null}),Zdt=e=>({type:"DROP_ANIMATE",payload:e}),VX=e=>({type:"DROP_COMPLETE",payload:e}),FCe=e=>({type:"DROP",payload:e}),eht=e=>({type:"DROP_PENDING",payload:e}),BCe=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var tht=e=>({getState:t,dispatch:n})=>r=>i=>{if(i.type!=="LIFT"){r(i);return}const{id:s,clientSelection:o,movementMode:a}=i.payload,u=t();u.phase==="DROP_ANIMATING"&&n(VX({completed:u.completed})),t().phase!=="IDLE"&&ft(),n(zX()),n(Bdt({draggableId:s,movementMode:a}));const c={draggableId:s,scrollOptions:{shouldPublishImmediately:a==="SNAP"}},{critical:f,dimensions:d,viewport:h}=e.startPublishing(c);n(Udt({critical:f,dimensions:d,clientSelection:o,movementMode:a,viewport:h}))},nht=e=>()=>t=>n=>{n.type==="INITIAL_PUBLISH"&&e.dragging(),n.type==="DROP_ANIMATE"&&e.dropping(n.payload.completed.result.reason),(n.type==="FLUSH"||n.type==="DROP_COMPLETE")&&e.resting(),t(n)};const HX={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},rI={opacity:{drop:0,combining:.7},scale:{drop:.75}},jCe={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Sv=`${jCe.outOfTheWay}s ${HX.outOfTheWay}`,BA={fluid:`opacity ${Sv}`,snap:`transform ${Sv}, opacity ${Sv}`,drop:e=>{const t=`${e}s ${HX.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${Sv}`,placeholder:`height ${Sv}, width ${Sv}, margin ${Sv}`},Yce=e=>$0(e,vo)?void 0:`translate(${e.x}px, ${e.y}px)`,Gz={moveTo:Yce,drop:(e,t)=>{const n=Yce(e);if(n)return t?`${n} scale(${rI.scale.drop})`:n}},{minDropTime:Yz,maxDropTime:UCe}=jCe,rht=UCe-Yz,Kce=1500,iht=.6;var sht=({current:e,destination:t,reason:n})=>{const r=eI(e,t);if(r<=0)return Yz;if(r>=Kce)return UCe;const i=r/Kce,s=Yz+rht*i,o=n==="CANCEL"?s*iht:s;return Number(o.toFixed(2))},oht=({impact:e,draggable:t,dimensions:n,viewport:r,afterCritical:i})=>{const{draggables:s,droppables:o}=n,a=Bl(e),u=a?o[a]:null,l=o[t.descriptor.droppableId],c=OCe({impact:e,draggable:t,draggables:s,afterCritical:i,droppable:u||l,viewport:r});return Ol(c,t.client.borderBox.center)},aht=({draggables:e,reason:t,lastImpact:n,home:r,viewport:i,onLiftImpact:s})=>!n.at||t!=="DROP"?{impact:PCe({draggables:e,impact:s,destination:r,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:tI},didDropInsideDroppable:!0};const uht=({getState:e,dispatch:t})=>n=>r=>{if(r.type!=="DROP"){n(r);return}const i=e(),s=r.payload.reason;if(i.phase==="COLLECTING"){t(eht({reason:s}));return}if(i.phase==="IDLE")return;i.phase==="DROP_PENDING"&&i.isWaiting&&ft(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||ft();const a=i.critical,u=i.dimensions,l=u.draggables[i.critical.draggable.id],{impact:c,didDropInsideDroppable:f}=aht({reason:s,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),d=f?MX(c):null,h=f?mF(c):null,p={index:a.draggable.index,droppableId:a.droppable.id},m={draggableId:l.descriptor.id,type:l.descriptor.type,source:p,reason:s,mode:i.movementMode,destination:d,combine:h},g=oht({impact:c,draggable:l,dimensions:u,viewport:i.viewport,afterCritical:i.afterCritical}),y={critical:i.critical,afterCritical:i.afterCritical,result:m,impact:c};if(!(!$0(i.current.client.offset,g)||!!m.combine)){t(VX({completed:y}));return}const b=sht({current:i.current.client.offset,destination:g,reason:s});t(Zdt({newHomeClientOffset:g,dropDuration:b,completed:y}))};var lht=uht,zCe=()=>({x:window.pageXOffset,y:window.pageYOffset});function cht(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function fht({onWindowScroll:e}){function t(){e(zCe())}const n=Z2(t),r=cht(n);let i=O0;function s(){return i!==O0}function o(){s()&&ft(),i=Pc(window,[r])}function a(){s()||ft(),n.cancel(),i(),i=O0}return{start:o,stop:a,isActive:s}}const dht=e=>e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH",hht=e=>{const t=fht({onWindowScroll:n=>{e.dispatch(Gdt({newScroll:n}))}});return n=>r=>{!t.isActive()&&r.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&dht(r)&&t.stop(),n(r)}};var pht=hht,mht=e=>{let t=!1,n=!1;const r=setTimeout(()=>{n=!0}),i=s=>{t||n||(t=!0,e(s),clearTimeout(r))};return i.wasCalled=()=>t,i},ght=()=>{const e=[],t=i=>{const s=e.findIndex(a=>a.timerId===i);s===-1&&ft();const[o]=e.splice(s,1);o.callback()};return{add:i=>{const s=setTimeout(()=>t(s)),o={timerId:s,callback:i};e.push(o)},flush:()=>{if(!e.length)return;const i=[...e];e.length=0,i.forEach(s=>{clearTimeout(s.timerId),s.callback()})}}};const yht=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,vht=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,bht=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r},jT=(e,t)=>{t()},sD=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function v8(e,t,n,r){if(!e){n(r(t));return}const i=mht(n);e(t,{announce:i}),i.wasCalled()||n(r(t))}var _ht=(e,t)=>{const n=ght();let r=null;const i=(f,d)=>{r&&ft(),jT("onBeforeCapture",()=>{const h=e().onBeforeCapture;h&&h({draggableId:f,mode:d})})},s=(f,d)=>{r&&ft(),jT("onBeforeDragStart",()=>{const h=e().onBeforeDragStart;h&&h(sD(f,d))})},o=(f,d)=>{r&&ft();const h=sD(f,d);r={mode:d,lastCritical:f,lastLocation:h.source,lastCombine:null},n.add(()=>{jT("onDragStart",()=>v8(e().onDragStart,h,t,UP.onDragStart))})},a=(f,d)=>{const h=MX(d),p=mF(d);r||ft();const m=!bht(f,r.lastCritical);m&&(r.lastCritical=f);const g=!yht(r.lastLocation,h);g&&(r.lastLocation=h);const y=!vht(r.lastCombine,p);if(y&&(r.lastCombine=p),!m&&!g&&!y)return;const v={...sD(f,r.mode),combine:p,destination:h};n.add(()=>{jT("onDragUpdate",()=>v8(e().onDragUpdate,v,t,UP.onDragUpdate))})},u=()=>{r||ft(),n.flush()},l=f=>{r||ft(),r=null,jT("onDragEnd",()=>v8(e().onDragEnd,f,t,UP.onDragEnd))};return{beforeCapture:i,beforeStart:s,start:o,update:a,flush:u,drop:l,abort:()=>{if(!r)return;const f={...sD(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};l(f)}}},wht=(e,t)=>{const n=_ht(e,t);return r=>i=>s=>{if(s.type==="BEFORE_INITIAL_CAPTURE"){n.beforeCapture(s.payload.draggableId,s.payload.movementMode);return}if(s.type==="INITIAL_PUBLISH"){const a=s.payload.critical;n.beforeStart(a,s.payload.movementMode),i(s),n.start(a,s.payload.movementMode);return}if(s.type==="DROP_COMPLETE"){const a=s.payload.completed.result;n.flush(),i(s),n.drop(a);return}if(i(s),s.type==="FLUSH"){n.abort();return}const o=r.getState();o.phase==="DRAGGING"&&n.update(o.critical,o.impact)}};const Eht=e=>t=>n=>{if(n.type!=="DROP_ANIMATION_FINISHED"){t(n);return}const r=e.getState();r.phase!=="DROP_ANIMATING"&&ft(),e.dispatch(VX({completed:r.completed}))};var xht=Eht;const Sht=e=>{let t=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return i=>s=>{if((s.type==="FLUSH"||s.type==="DROP_COMPLETE"||s.type==="DROP_ANIMATION_FINISHED")&&r(),i(s),s.type!=="DROP_ANIMATE")return;const o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(BCe())}};n=requestAnimationFrame(()=>{n=null,t=Pc(window,[o])})}};var Tht=Sht,Cht=e=>()=>t=>n=>{(n.type==="DROP_COMPLETE"||n.type==="FLUSH"||n.type==="DROP_ANIMATE")&&e.stopPublishing(),t(n)},Aht=e=>{let t=!1;return()=>n=>r=>{if(r.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),e.tryRestoreFocusRecorded();return}if(n(r),!!t){if(r.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(r.type==="DROP_COMPLETE"){t=!1;const i=r.payload.completed.result;i.combine&&e.tryShiftRecord(i.draggableId,i.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const Iht=e=>e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH";var kht=e=>t=>n=>r=>{if(Iht(r)){e.stop(),n(r);return}if(r.type==="INITIAL_PUBLISH"){n(r);const i=t.getState();i.phase!=="DRAGGING"&&ft(),e.start(i);return}n(r),e.scroll(t.getState())};const Rht=e=>t=>n=>{if(t(n),n.type!=="PUBLISH_WHILE_DRAGGING")return;const r=e.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||e.dispatch(FCe({reason:r.reason})))};var Nht=Rht;const Dht=J2;var Pht=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:r,announce:i,autoScroller:s})=>SX(Fdt,Dht(KTe(nht(n),Cht(e),tht(e),lht,xht,Tht,Nht,kht(s),pht,Aht(t),wht(r,i))));const b8=()=>({additions:{},removals:{},modified:{}});function Oht({registry:e,callbacks:t}){let n=b8(),r=null;const i=()=>{r||(t.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:u,removals:l,modified:c}=n,f=Object.keys(u).map(p=>e.draggable.getById(p).getDimension(vo)).sort((p,m)=>p.descriptor.index-m.descriptor.index),d=Object.keys(c).map(p=>{const g=e.droppable.getById(p).callbacks.getScrollWhileDragging();return{droppableId:p,scroll:g}}),h={additions:f,removals:Object.keys(l),modified:d};n=b8(),t.publish(h)}))};return{add:u=>{const l=u.descriptor.id;n.additions[l]=u,n.modified[u.descriptor.droppableId]=!0,n.removals[l]&&delete n.removals[l],i()},remove:u=>{const l=u.descriptor;n.removals[l.id]=!0,n.modified[l.droppableId]=!0,n.additions[l.id]&&delete n.additions[l.id],i()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,n=b8())}}}var VCe=({scrollHeight:e,scrollWidth:t,height:n,width:r})=>{const i=Ol({x:t,y:e},{x:r,y:n});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},HCe=()=>{const e=document.documentElement;return e||ft(),e},qCe=()=>{const e=HCe();return VCe({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},$ht=()=>{const e=zCe(),t=qCe(),n=e.y,r=e.x,i=HCe(),s=i.clientWidth,o=i.clientHeight,a=r+s,u=n+o;return{frame:zf({top:n,left:r,right:a,bottom:u}),scroll:{initial:e,current:e,max:t,diff:{value:vo,displacement:vo}}}},Mht=({critical:e,scrollOptions:t,registry:n})=>{const r=$ht(),i=r.scroll.current,s=e.droppable,o=n.droppable.getAllByType(s.type).map(c=>c.callbacks.getDimensionAndWatchScroll(i,t)),a=n.draggable.getAllByType(e.draggable.type).map(c=>c.getDimension(i));return{dimensions:{draggables:bCe(a),droppables:vCe(o)},critical:e,viewport:r}};function Xce(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var Lht=(e,t)=>{let n=null;const r=Oht({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),i=(d,h)=>{e.droppable.exists(d)||ft(),n&&t.updateDroppableIsEnabled({id:d,isEnabled:h})},s=(d,h)=>{n&&(e.droppable.exists(d)||ft(),t.updateDroppableIsCombineEnabled({id:d,isCombineEnabled:h}))},o=(d,h)=>{n&&(e.droppable.exists(d)||ft(),t.updateDroppableScroll({id:d,newScroll:h}))},a=(d,h)=>{n&&e.droppable.getById(d).callbacks.scroll(h)},u=()=>{if(!n)return;r.stop();const d=n.critical.droppable;e.droppable.getAllByType(d.type).forEach(h=>h.callbacks.dragStopped()),n.unsubscribe(),n=null},l=d=>{n||ft();const h=n.critical.draggable;d.type==="ADDITION"&&Xce(e,h,d.value)&&r.add(d.value),d.type==="REMOVAL"&&Xce(e,h,d.value)&&r.remove(d.value)};return{updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:s,scrollDroppable:a,updateDroppableScroll:o,startPublishing:d=>{n&&ft();const h=e.draggable.getById(d.draggableId),p=e.droppable.getById(h.descriptor.droppableId),m={draggable:h.descriptor,droppable:p.descriptor},g=e.subscribe(l);return n={critical:m,unsubscribe:g},Mht({critical:m,registry:e,scrollOptions:d.scrollOptions})},stopPublishing:u}},WCe=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",Fht=e=>{window.scrollBy(e.x,e.y)};const Bht=go(e=>pF(e).filter(t=>!(!t.isEnabled||!t.frame))),jht=(e,t)=>Bht(t).find(r=>(r.frame||ft(),kCe(r.frame.pageMarginBox)(e)))||null;var Uht=({center:e,destination:t,droppables:n})=>{if(t){const i=n[t];return i.frame?i:null}return jht(e,n)};const iI={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var zht=(e,t,n=()=>iI)=>{const r=n(),i=e[t.size]*r.startFromPercentage,s=e[t.size]*r.maxScrollAtPercentage;return{startScrollingFrom:i,maxScrollValueAt:s}},GCe=({startOfRange:e,endOfRange:t,current:n})=>{const r=t-e;return r===0?0:(n-e)/r},qX=1,Vht=(e,t,n=()=>iI)=>{const r=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return r.maxPixelScroll;if(e===t.startScrollingFrom)return qX;const s=1-GCe({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),o=r.maxPixelScroll*r.ease(s);return Math.ceil(o)},Hht=(e,t,n)=>{const r=n(),i=r.durationDampening.accelerateAt,s=r.durationDampening.stopDampeningAt,o=t,a=s,l=Date.now()-o;if(l>=s)return e;if(l<i)return qX;const c=GCe({startOfRange:i,endOfRange:a,current:l}),f=e*r.ease(c);return Math.ceil(f)},Qce=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const s=Vht(e,t,i);return s===0?0:r?Math.max(Hht(s,n,i),qX):s},Jce=({container:e,distanceToEdges:t,dragStartTime:n,axis:r,shouldUseTimeDampening:i,getAutoScrollerOptions:s})=>{const o=zht(e,r,s);return t[r.end]<t[r.start]?Qce({distanceToEdge:t[r.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:s}):-1*Qce({distanceToEdge:t[r.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:s})},qht=({container:e,subject:t,proposedScroll:n})=>{const r=t.height>e.height,i=t.width>e.width;return!i&&!r?n:i&&r?null:{x:i?0:n.x,y:r?0:n.y}};const Wht=yCe(e=>e===0?0:e);var YCe=({dragStartTime:e,container:t,subject:n,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:s})=>{const o={top:r.y-t.top,right:t.right-r.x,bottom:t.bottom-r.y,left:r.x-t.left},a=Jce({container:t,distanceToEdges:o,dragStartTime:e,axis:LX,shouldUseTimeDampening:i,getAutoScrollerOptions:s}),u=Jce({container:t,distanceToEdges:o,dragStartTime:e,axis:ECe,shouldUseTimeDampening:i,getAutoScrollerOptions:s}),l=Wht({x:u,y:a});if($0(l,vo))return null;const c=qht({container:t,subject:n,proposedScroll:l});return c?$0(c,vo)?null:c:null};const Ght=yCe(e=>e===0?0:e>0?1:-1),WX=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:r})=>{const i=Fo(t,r),s={x:e(i.x,n.x),y:e(i.y,n.y)};return $0(s,vo)?null:s}})(),KCe=({max:e,current:t,change:n})=>{const r={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},i=Ght(n),s=WX({max:r,current:t,change:i});return!s||i.x!==0&&s.x===0||i.y!==0&&s.y===0},GX=(e,t)=>KCe({current:e.scroll.current,max:e.scroll.max,change:t}),Yht=(e,t)=>{if(!GX(e,t))return null;const n=e.scroll.max,r=e.scroll.current;return WX({current:r,max:n,change:t})},YX=(e,t)=>{const n=e.frame;return n?KCe({current:n.scroll.current,max:n.scroll.max,change:t}):!1},Kht=(e,t)=>{const n=e.frame;return!n||!YX(e,t)?null:WX({current:n.scroll.current,max:n.scroll.max,change:t})};var Xht=({viewport:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:s})=>{const o=YCe({dragStartTime:r,container:e.frame,subject:t,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:s});return o&&GX(e,o)?o:null},Qht=({droppable:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:s})=>{const o=e.frame;if(!o)return null;const a=YCe({dragStartTime:r,container:o.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:s});return a&&YX(e,a)?a:null},Zce=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:r,scrollDroppable:i,getAutoScrollerOptions:s})=>{const o=e.current.page.borderBoxCenter,u=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const f=e.viewport,d=Xht({dragStartTime:t,viewport:f,subject:u,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:s});if(d){r(d);return}}const l=Uht({center:o,destination:Bl(e.impact),droppables:e.dimensions.droppables});if(!l)return;const c=Qht({dragStartTime:t,droppable:l,subject:u,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:s});c&&i(l.descriptor.id,c)},Jht=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>iI})=>{const r=Z2(e),i=Z2(t);let s=null;const o=l=>{s||ft();const{shouldUseTimeDampening:c,dragStartTime:f}=s;Zce({state:l,scrollWindow:r,scrollDroppable:i,dragStartTime:f,shouldUseTimeDampening:c,getAutoScrollerOptions:n})};return{start:l=>{s&&ft();const c=Date.now();let f=!1;const d=()=>{f=!0};Zce({state:l,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:d,scrollDroppable:d,getAutoScrollerOptions:n}),s={dragStartTime:c,shouldUseTimeDampening:f},f&&o(l)},stop:()=>{s&&(r.cancel(),i.cancel(),s=null)},scroll:o}},Zht=({move:e,scrollDroppable:t,scrollWindow:n})=>{const r=(a,u)=>{const l=Fo(a.current.client.selection,u);e({client:l})},i=(a,u)=>{if(!YX(a,u))return u;const l=Kht(a,u);if(!l)return t(a.descriptor.id,u),null;const c=Ol(u,l);return t(a.descriptor.id,c),Ol(u,c)},s=(a,u,l)=>{if(!a||!GX(u,l))return l;const c=Yht(u,l);if(!c)return n(l),null;const f=Ol(l,c);return n(f),Ol(l,f)};return a=>{const u=a.scrollJumpRequest;if(!u)return;const l=Bl(a.impact);l||ft();const c=i(a.dimensions.droppables[l],u);if(!c)return;const f=a.viewport,d=s(a.isWindowScrollAllowed,f,c);d&&r(a,d)}},ept=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:r})=>{const i=Jht({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:r}),s=Zht({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:u=>{if(!(r().disabled||u.phase!=="DRAGGING")){if(u.movementMode==="FLUID"){i.scroll(u);return}u.scrollJumpRequest&&s(u)}},start:i.start,stop:i.stop}};const KE="data-rfd",XE=(()=>{const e=`${KE}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Kz=(()=>{const e=`${KE}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),tpt=(()=>{const e=`${KE}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),efe={contextId:`${KE}-scroll-container-context-id`},npt=e=>t=>`[${t}="${e}"]`,UT=(e,t)=>e.map(n=>{const r=n.styles[t];return r?`${n.selector} { ${r} }`:""}).join(" "),rpt="pointer-events: none;";var ipt=e=>{const t=npt(e),n=(()=>{const a=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(XE.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:a,dragging:rpt,dropAnimating:a}}})(),r=(()=>{const a=`
      transition: ${BA.outOfTheWay};
    `;return{selector:t(Kz.contextId),styles:{dragging:a,dropAnimating:a,userCancel:a}}})(),i={selector:t(tpt.contextId),styles:{always:"overflow-anchor: none;"}},o=[r,n,i,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:UT(o,"always"),resting:UT(o,"resting"),dragging:UT(o,"dragging"),dropAnimating:UT(o,"dropAnimating"),userCancel:UT(o,"userCancel")}};const spt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?I.useLayoutEffect:I.useEffect;var jl=spt;const _8=()=>{const e=document.querySelector("head");return e||ft(),e},tfe=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function opt(e,t){const n=Jn(()=>ipt(e),[e]),r=I.useRef(null),i=I.useRef(null),s=$t(go(f=>{const d=i.current;d||ft(),d.textContent=f}),[]),o=$t(f=>{const d=r.current;d||ft(),d.textContent=f},[]);jl(()=>{!r.current&&!i.current||ft();const f=tfe(t),d=tfe(t);return r.current=f,i.current=d,f.setAttribute(`${KE}-always`,e),d.setAttribute(`${KE}-dynamic`,e),_8().appendChild(f),_8().appendChild(d),o(n.always),s(n.resting),()=>{const h=p=>{const m=p.current;m||ft(),_8().removeChild(m),p.current=null};h(r),h(i)}},[t,o,s,n.always,n.resting,e]);const a=$t(()=>s(n.dragging),[s,n.dragging]),u=$t(f=>{if(f==="DROP"){s(n.dropAnimating);return}s(n.userCancel)},[s,n.dropAnimating,n.userCancel]),l=$t(()=>{i.current&&s(n.resting)},[s,n.resting]);return Jn(()=>({dragging:a,dropping:u,resting:l}),[a,u,l])}function XCe(e,t){return Array.from(e.querySelectorAll(t))}var QCe=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function vF(e){return e instanceof QCe(e).HTMLElement}function apt(e,t){const n=`[${XE.contextId}="${e}"]`,r=XCe(document,n);if(!r.length)return null;const i=r.find(s=>s.getAttribute(XE.draggableId)===t);return!i||!vF(i)?null:i}function upt(e){const t=I.useRef({}),n=I.useRef(null),r=I.useRef(null),i=I.useRef(!1),s=$t(function(d,h){const p={id:d,focus:h};return t.current[d]=p,function(){const g=t.current;g[d]!==p&&delete g[d]}},[]),o=$t(function(d){const h=apt(e,d);h&&h!==document.activeElement&&h.focus()},[e]),a=$t(function(d,h){n.current===d&&(n.current=h)},[]),u=$t(function(){r.current||i.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const d=n.current;d&&o(d)}))},[o]),l=$t(function(d){n.current=null;const h=document.activeElement;h&&h.getAttribute(XE.draggableId)===d&&(n.current=d)},[]);return jl(()=>(i.current=!0,function(){i.current=!1;const d=r.current;d&&cancelAnimationFrame(d)}),[]),Jn(()=>({register:s,tryRecordFocus:l,tryRestoreFocusRecorded:u,tryShiftRecord:a}),[s,l,u,a])}function lpt(){const e={draggables:{},droppables:{}},t=[];function n(f){return t.push(f),function(){const h=t.indexOf(f);h!==-1&&t.splice(h,1)}}function r(f){t.length&&t.forEach(d=>d(f))}function i(f){return e.draggables[f]||null}function s(f){const d=i(f);return d||ft(),d}const o={register:f=>{e.draggables[f.descriptor.id]=f,r({type:"ADDITION",value:f})},update:(f,d)=>{const h=e.draggables[d.descriptor.id];h&&h.uniqueId===f.uniqueId&&(delete e.draggables[d.descriptor.id],e.draggables[f.descriptor.id]=f)},unregister:f=>{const d=f.descriptor.id,h=i(d);h&&f.uniqueId===h.uniqueId&&(delete e.draggables[d],e.droppables[f.descriptor.droppableId]&&r({type:"REMOVAL",value:f}))},getById:s,findById:i,exists:f=>!!i(f),getAllByType:f=>Object.values(e.draggables).filter(d=>d.descriptor.type===f)};function a(f){return e.droppables[f]||null}function u(f){const d=a(f);return d||ft(),d}const l={register:f=>{e.droppables[f.descriptor.id]=f},unregister:f=>{const d=a(f.descriptor.id);d&&f.uniqueId===d.uniqueId&&delete e.droppables[f.descriptor.id]},getById:u,findById:a,exists:f=>!!a(f),getAllByType:f=>Object.values(e.droppables).filter(d=>d.descriptor.type===f)};function c(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:l,subscribe:n,clean:c}}function cpt(){const e=Jn(lpt,[]);return I.useEffect(()=>function(){qt.version.startsWith("16")||qt.version.startsWith("17")?requestAnimationFrame(e.clean):e.clean()},[e]),e}var KX=qt.createContext(null),z$=()=>{const e=document.body;return e||ft(),e};const fpt={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var dpt=fpt;const hpt=e=>`rfd-announcement-${e}`;function ppt(e){const t=Jn(()=>hpt(e),[e]),n=I.useRef(null);return I.useEffect(function(){const s=document.createElement("div");return n.current=s,s.id=t,s.setAttribute("aria-live","assertive"),s.setAttribute("aria-atomic","true"),gm(s.style,dpt),z$().appendChild(s),function(){setTimeout(function(){const u=z$();u.contains(s)&&u.removeChild(s),s===n.current&&(n.current=null)})}},[t]),$t(i=>{const s=n.current;if(s){s.textContent=i;return}},[])}let mpt=0;const JCe={separator:"::"};function gpt(e,t=JCe){return Jn(()=>`${e}${t.separator}${mpt++}`,[t.separator,e])}function ypt(e,t=JCe){const n=qt.useId();return Jn(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}var XX="useId"in qt?ypt:gpt;function vpt({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function bpt({contextId:e,text:t}){const n=XX("hidden-text",{separator:"-"}),r=Jn(()=>vpt({contextId:e,uniqueId:n}),[n,e]);return I.useEffect(function(){const s=document.createElement("div");return s.id=r,s.textContent=t,s.style.display="none",z$().appendChild(s),function(){const a=z$();a.contains(s)&&a.removeChild(s)}},[r,t]),r}var bF=qt.createContext(null);function ZCe(e){const t=I.useRef(e);return I.useEffect(()=>{t.current=e}),t}function _pt(){let e=null;function t(){return!!e}function n(o){return o===e}function r(o){e&&ft();const a={abandon:o};return e=a,a}function i(){e||ft(),e=null}function s(){e&&(e.abandon(),i())}return{isClaimed:t,isActive:n,claim:r,release:i,tryAbandon:s}}function sI(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const wpt=9,Ept=13,QX=27,eAe=32,xpt=33,Spt=34,Tpt=35,Cpt=36,Apt=37,Ipt=38,kpt=39,Rpt=40,Npt={[Ept]:!0,[wpt]:!0};var tAe=e=>{Npt[e.keyCode]&&e.preventDefault()};const Dpt=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(r=>`on${r}`in document)||e})();var _F=Dpt;const nAe=0,nfe=5;function Ppt(e,t){return Math.abs(t.x-e.x)>=nfe||Math.abs(t.y-e.y)>=nfe}const rfe={type:"IDLE"};function Opt({cancel:e,completed:t,getPhase:n,setPhase:r}){return[{eventName:"mousemove",fn:i=>{const{button:s,clientX:o,clientY:a}=i;if(s!==nAe)return;const u={x:o,y:a},l=n();if(l.type==="DRAGGING"){i.preventDefault(),l.actions.move(u);return}l.type!=="PENDING"&&ft();const c=l.point;if(!Ppt(c,u))return;i.preventDefault();const f=l.actions.fluidLift(u);r({type:"DRAGGING",actions:f})}},{eventName:"mouseup",fn:i=>{const s=n();if(s.type!=="DRAGGING"){e();return}i.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:i=>{n().type==="DRAGGING"&&i.preventDefault(),e()}},{eventName:"keydown",fn:i=>{if(n().type==="PENDING"){e();return}if(i.keyCode===QX){i.preventDefault(),e();return}tAe(i)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:i=>{const s=n();if(s.type==="IDLE"&&ft(),s.actions.shouldRespectForcePress()){e();return}i.preventDefault()}},{eventName:_F,fn:e}]}function $pt(e){const t=I.useRef(rfe),n=I.useRef(O0),r=Jn(()=>({eventName:"mousedown",fn:function(f){if(f.defaultPrevented||f.button!==nAe||f.ctrlKey||f.metaKey||f.shiftKey||f.altKey)return;const d=e.findClosestDraggableId(f);if(!d)return;const h=e.tryGetLock(d,o,{sourceEvent:f});if(!h)return;f.preventDefault();const p={x:f.clientX,y:f.clientY};n.current(),l(h,p)}}),[e]),i=Jn(()=>({eventName:"webkitmouseforcewillbegin",fn:c=>{if(c.defaultPrevented)return;const f=e.findClosestDraggableId(c);if(!f)return;const d=e.findOptionsForDraggable(f);d&&(d.shouldRespectForcePress||e.canGetLock(f)&&c.preventDefault())}}),[e]),s=$t(function(){const f={passive:!1,capture:!0};n.current=Pc(window,[i,r],f)},[i,r]),o=$t(()=>{t.current.type!=="IDLE"&&(t.current=rfe,n.current(),s())},[s]),a=$t(()=>{const c=t.current;o(),c.type==="DRAGGING"&&c.actions.cancel({shouldBlockNextClick:!0}),c.type==="PENDING"&&c.actions.abort()},[o]),u=$t(function(){const f={capture:!0,passive:!1},d=Opt({cancel:a,completed:o,getPhase:()=>t.current,setPhase:h=>{t.current=h}});n.current=Pc(window,d,f)},[a,o]),l=$t(function(f,d){t.current.type!=="IDLE"&&ft(),t.current={type:"PENDING",point:d,actions:f},u()},[u]);jl(function(){return s(),function(){n.current()}},[s])}function Mpt(){}const Lpt={[Spt]:!0,[xpt]:!0,[Cpt]:!0,[Tpt]:!0};function Fpt(e,t){function n(){t(),e.cancel()}function r(){t(),e.drop()}return[{eventName:"keydown",fn:i=>{if(i.keyCode===QX){i.preventDefault(),n();return}if(i.keyCode===eAe){i.preventDefault(),r();return}if(i.keyCode===Rpt){i.preventDefault(),e.moveDown();return}if(i.keyCode===Ipt){i.preventDefault(),e.moveUp();return}if(i.keyCode===kpt){i.preventDefault(),e.moveRight();return}if(i.keyCode===Apt){i.preventDefault(),e.moveLeft();return}if(Lpt[i.keyCode]){i.preventDefault();return}tAe(i)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:_F,fn:n}]}function Bpt(e){const t=I.useRef(Mpt),n=Jn(()=>({eventName:"keydown",fn:function(s){if(s.defaultPrevented||s.keyCode!==eAe)return;const o=e.findClosestDraggableId(s);if(!o)return;const a=e.tryGetLock(o,c,{sourceEvent:s});if(!a)return;s.preventDefault();let u=!0;const l=a.snapLift();t.current();function c(){u||ft(),u=!1,t.current(),r()}t.current=Pc(window,Fpt(l,c),{capture:!0,passive:!1})}}),[e]),r=$t(function(){const s={passive:!1,capture:!0};t.current=Pc(window,[n],s)},[n]);jl(function(){return r(),function(){t.current()}},[r])}const w8={type:"IDLE"},jpt=120,Upt=.15;function zpt({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===QX&&n.preventDefault(),e()}},{eventName:_F,fn:e}]}function Vpt({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const i=n();if(i.type!=="DRAGGING"){e();return}i.hasMoved=!0;const{clientX:s,clientY:o}=r.touches[0],a={x:s,y:o};r.preventDefault(),i.actions.move(a)}},{eventName:"touchend",fn:r=>{const i=n();if(i.type!=="DRAGGING"){e();return}r.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:r=>{if(n().type!=="DRAGGING"){e();return}r.preventDefault(),e()}},{eventName:"touchforcechange",fn:r=>{const i=n();i.type==="IDLE"&&ft();const s=r.touches[0];if(!s||!(s.force>=Upt))return;const a=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){a&&e();return}if(a){if(i.hasMoved){r.preventDefault();return}e();return}r.preventDefault()}},{eventName:_F,fn:e}]}function Hpt(e){const t=I.useRef(w8),n=I.useRef(O0),r=$t(function(){return t.current},[]),i=$t(function(h){t.current=h},[]),s=Jn(()=>({eventName:"touchstart",fn:function(h){if(h.defaultPrevented)return;const p=e.findClosestDraggableId(h);if(!p)return;const m=e.tryGetLock(p,a,{sourceEvent:h});if(!m)return;const g=h.touches[0],{clientX:y,clientY:v}=g,b={x:y,y:v};n.current(),f(m,b)}}),[e]),o=$t(function(){const h={capture:!0,passive:!1};n.current=Pc(window,[s],h)},[s]),a=$t(()=>{const d=t.current;d.type!=="IDLE"&&(d.type==="PENDING"&&clearTimeout(d.longPressTimerId),i(w8),n.current(),o())},[o,i]),u=$t(()=>{const d=t.current;a(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[a]),l=$t(function(){const h={capture:!0,passive:!1},p={cancel:u,completed:a,getPhase:r},m=Pc(window,Vpt(p),h),g=Pc(window,zpt(p),h);n.current=function(){m(),g()}},[u,r,a]),c=$t(function(){const h=r();h.type!=="PENDING"&&ft();const p=h.actions.fluidLift(h.point);i({type:"DRAGGING",actions:p,hasMoved:!1})},[r,i]),f=$t(function(h,p){r().type!=="IDLE"&&ft();const m=setTimeout(c,jpt);i({type:"PENDING",point:p,actions:h,longPressTimerId:m}),l()},[l,r,i,c]);jl(function(){return o(),function(){n.current();const p=r();p.type==="PENDING"&&(clearTimeout(p.longPressTimerId),i(w8))}},[r,o,i]),jl(function(){return Pc(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const qpt=["input","button","textarea","select","option","optgroup","video","audio"];function rAe(e,t){if(t==null)return!1;if(qpt.includes(t.tagName.toLowerCase()))return!0;const r=t.getAttribute("contenteditable");return r==="true"||r===""?!0:t===e?!1:rAe(e,t.parentElement)}function Wpt(e,t){const n=t.target;return vF(n)?rAe(e,n):!1}var Gpt=e=>zf(e.getBoundingClientRect()).center;function Ypt(e){return e instanceof QCe(e).Element}const Kpt=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||e})();function iAe(e,t){return e==null?null:e[Kpt](t)?e:iAe(e.parentElement,t)}function Xpt(e,t){return e.closest?e.closest(t):iAe(e,t)}function Qpt(e){return`[${XE.contextId}="${e}"]`}function Jpt(e,t){const n=t.target;if(!Ypt(n))return null;const r=Qpt(e),i=Xpt(n,r);return!i||!vF(i)?null:i}function Zpt(e,t){const n=Jpt(e,t);return n?n.getAttribute(XE.draggableId):null}function emt(e,t){const n=`[${Kz.contextId}="${e}"]`,i=XCe(document,n).find(s=>s.getAttribute(Kz.id)===t);return!i||!vF(i)?null:i}function tmt(e){e.preventDefault()}function oD({expected:e,phase:t,isLockActive:n,shouldWarn:r}){return!(!n()||e!==t)}function sAe({lockAPI:e,store:t,registry:n,draggableId:r}){if(e.isClaimed())return!1;const i=n.draggable.findById(r);return!(!i||!i.options.isEnabled||!WCe(t.getState(),r))}function nmt({lockAPI:e,contextId:t,store:n,registry:r,draggableId:i,forceSensorStop:s,sourceEvent:o}){if(!sAe({lockAPI:e,store:n,registry:r,draggableId:i}))return null;const u=r.draggable.getById(i),l=emt(t,u.descriptor.id);if(!l||o&&!u.options.canDragInteractiveElements&&Wpt(l,o))return null;const c=e.claim(s||O0);let f="PRE_DRAG";function d(){return u.options.shouldRespectForcePress}function h(){return e.isActive(c)}function p(E,x){oD({expected:E,phase:f,isLockActive:h,shouldWarn:!0})&&n.dispatch(x())}const m=p.bind(null,"DRAGGING");function g(E){function x(){e.release(),f="COMPLETED"}f!=="PRE_DRAG"&&(x(),ft()),n.dispatch(jdt(E.liftActionArgs)),f="DRAGGING";function T(C,A={shouldBlockNextClick:!1}){if(E.cleanup(),A.shouldBlockNextClick){const k=Pc(window,[{eventName:"click",fn:tmt,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(k)}x(),n.dispatch(FCe({reason:C}))}return{isActive:()=>oD({expected:"DRAGGING",phase:f,isLockActive:h,shouldWarn:!1}),shouldRespectForcePress:d,drop:C=>T("DROP",C),cancel:C=>T("CANCEL",C),...E.actions}}function y(E){const x=Z2(C=>{m(()=>LCe({client:C}))});return{...g({liftActionArgs:{id:i,clientSelection:E,movementMode:"FLUID"},cleanup:()=>x.cancel(),actions:{move:x}}),move:x}}function v(){const E={moveUp:()=>m(Kdt),moveRight:()=>m(Qdt),moveDown:()=>m(Xdt),moveLeft:()=>m(Jdt)};return g({liftActionArgs:{id:i,clientSelection:Gpt(l),movementMode:"SNAP"},cleanup:O0,actions:E})}function b(){oD({expected:"PRE_DRAG",phase:f,isLockActive:h,shouldWarn:!0})&&e.release()}return{isActive:()=>oD({expected:"PRE_DRAG",phase:f,isLockActive:h,shouldWarn:!1}),shouldRespectForcePress:d,fluidLift:y,snapLift:v,abort:b}}const rmt=[$pt,Bpt,Hpt];function imt({contextId:e,store:t,registry:n,customSensors:r,enableDefaultSensors:i}){const s=[...i?rmt:[],...r||[]],o=I.useState(()=>_pt())[0],a=$t(function(g,y){sI(g)&&!sI(y)&&o.tryAbandon()},[o]);jl(function(){let g=t.getState();return t.subscribe(()=>{const v=t.getState();a(g,v),g=v})},[o,t,a]),jl(()=>o.tryAbandon,[o.tryAbandon]);const u=$t(m=>sAe({lockAPI:o,registry:n,store:t,draggableId:m}),[o,n,t]),l=$t((m,g,y)=>nmt({lockAPI:o,registry:n,contextId:e,store:t,draggableId:m,forceSensorStop:g||null,sourceEvent:y&&y.sourceEvent?y.sourceEvent:null}),[e,o,n,t]),c=$t(m=>Zpt(e,m),[e]),f=$t(m=>{const g=n.draggable.findById(m);return g?g.options:null},[n.draggable]),d=$t(function(){o.isClaimed()&&(o.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(zX()))},[o,t]),h=$t(()=>o.isClaimed(),[o]),p=Jn(()=>({canGetLock:u,tryGetLock:l,findClosestDraggableId:c,findOptionsForDraggable:f,tryReleaseLock:d,isLockClaimed:h}),[u,l,c,f,d,h]);for(let m=0;m<s.length;m++)s[m](p)}const smt=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};qt.version.startsWith("16")||qt.version.startsWith("17")?n():zy.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),omt=e=>({...iI,...e.autoScrollerOptions,durationDampening:{...iI.durationDampening,...e.autoScrollerOptions}});function zT(e){return e.current||ft(),e.current}function amt(e){const{contextId:t,setCallbacks:n,sensors:r,nonce:i,dragHandleUsageInstructions:s}=e,o=I.useRef(null),a=ZCe(e),u=$t(()=>smt(a.current),[a]),l=$t(()=>omt(a.current),[a]),c=ppt(t),f=bpt({contextId:t,text:s}),d=opt(t,i),h=$t(k=>{zT(o).dispatch(k)},[]),p=Jn(()=>Ace({publishWhileDragging:zdt,updateDroppableScroll:Hdt,updateDroppableIsEnabled:qdt,updateDroppableIsCombineEnabled:Wdt,collectionStarting:Vdt},h),[h]),m=cpt(),g=Jn(()=>Lht(m,p),[m,p]),y=Jn(()=>ept({scrollWindow:Fht,scrollDroppable:g.scrollDroppable,getAutoScrollerOptions:l,...Ace({move:LCe},h)}),[g.scrollDroppable,h,l]),v=upt(t),b=Jn(()=>Pht({announce:c,autoScroller:y,dimensionMarshal:g,focusMarshal:v,getResponders:u,styleMarshal:d}),[c,y,g,v,u,d]);o.current=b;const w=$t(()=>{const k=zT(o);k.getState().phase!=="IDLE"&&k.dispatch(zX())},[]),E=$t(()=>{const k=zT(o).getState();return k.phase==="DROP_ANIMATING"?!0:k.phase==="IDLE"?!1:k.isDragging},[]),x=Jn(()=>({isDragging:E,tryAbort:w}),[E,w]);n(x);const T=$t(k=>WCe(zT(o).getState(),k),[]),C=$t(()=>jv(zT(o).getState()),[]),A=Jn(()=>({marshal:g,focus:v,contextId:t,canLift:T,isMovementAllowed:C,dragHandleUsageInstructionsId:f,registry:m}),[t,g,f,v,T,C,m]);return imt({contextId:t,store:b,registry:m,customSensors:r||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),I.useEffect(()=>w,[w]),qt.createElement(bF.Provider,{value:A},qt.createElement(yft,{context:KX,store:b},e.children))}let umt=0;function lmt(){return Jn(()=>`${umt++}`,[])}function cmt(){return qt.useId()}var fmt="useId"in qt?cmt:lmt;function dmt(e){const t=fmt(),n=e.dragHandleUsageInstructions||UP.dragHandleUsageInstructions;return qt.createElement(Ift,null,r=>qt.createElement(amt,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const ife={dragging:5e3,dropAnimating:4500},hmt=(e,t)=>t?BA.drop(t.duration):e?BA.snap:BA.fluid,pmt=(e,t)=>{if(e)return t?rI.opacity.drop:rI.opacity.combining},mmt=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function gmt(e){const n=e.dimension.client,{offset:r,combineWith:i,dropping:s}=e,o=!!i,a=mmt(e),u=!!s,l=u?Gz.drop(r,o):Gz.moveTo(r);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:hmt(a,s),transform:l,opacity:pmt(o,u),zIndex:u?ife.dropAnimating:ife.dragging,pointerEvents:"none"}}function ymt(e){return{transform:Gz.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function vmt(e){return e.type==="DRAGGING"?gmt(e):ymt(e)}function bmt(e,t,n=vo){const r=window.getComputedStyle(t),i=t.getBoundingClientRect(),s=dCe(i,r),o=F$(s,n),a={client:s,tagName:t.tagName.toLowerCase(),display:r.display},u={x:s.marginBox.width,y:s.marginBox.height};return{descriptor:e,placeholder:a,displaceBy:u,client:s,page:o}}function _mt(e){const t=XX("draggable"),{descriptor:n,registry:r,getDraggableRef:i,canDragInteractiveElements:s,shouldRespectForcePress:o,isEnabled:a}=e,u=Jn(()=>({canDragInteractiveElements:s,shouldRespectForcePress:o,isEnabled:a}),[s,a,o]),l=$t(h=>{const p=i();return p||ft(),bmt(n,p,h)},[n,i]),c=Jn(()=>({uniqueId:t,descriptor:n,options:u,getDimension:l}),[n,l,u,t]),f=I.useRef(c),d=I.useRef(!0);jl(()=>(r.draggable.register(f.current),()=>r.draggable.unregister(f.current)),[r.draggable]),jl(()=>{if(d.current){d.current=!1;return}const h=f.current;f.current=c,r.draggable.update(c,h)},[c,r.draggable])}var JX=qt.createContext(null);function V$(e){const t=I.useContext(e);return t||ft(),t}function wmt(e){e.preventDefault()}const Emt=e=>{const t=I.useRef(null),n=$t((x=null)=>{t.current=x},[]),r=$t(()=>t.current,[]),{contextId:i,dragHandleUsageInstructionsId:s,registry:o}=V$(bF),{type:a,droppableId:u}=V$(JX),l=Jn(()=>({id:e.draggableId,index:e.index,type:a,droppableId:u}),[e.draggableId,e.index,a,u]),{children:c,draggableId:f,isEnabled:d,shouldRespectForcePress:h,canDragInteractiveElements:p,isClone:m,mapped:g,dropAnimationFinished:y}=e;if(!m){const x=Jn(()=>({descriptor:l,registry:o,getDraggableRef:r,canDragInteractiveElements:p,shouldRespectForcePress:h,isEnabled:d}),[l,o,r,p,h,d]);_mt(x)}const v=Jn(()=>d?{tabIndex:0,role:"button","aria-describedby":s,"data-rfd-drag-handle-draggable-id":f,"data-rfd-drag-handle-context-id":i,draggable:!1,onDragStart:wmt}:null,[i,s,f,d]),b=$t(x=>{g.type==="DRAGGING"&&g.dropping&&x.propertyName==="transform"&&(qt.version.startsWith("16")||qt.version.startsWith("17")?y():zy.flushSync(y))},[y,g]),w=Jn(()=>{const x=vmt(g),T=g.type==="DRAGGING"&&g.dropping?b:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":i,"data-rfd-draggable-id":f,style:x,onTransitionEnd:T},dragHandleProps:v}},[i,v,f,g,b,n]),E=Jn(()=>({draggableId:l.id,type:l.type,source:{index:l.index,droppableId:l.droppableId}}),[l.droppableId,l.id,l.index,l.type]);return qt.createElement(qt.Fragment,null,c(w,g.snapshot,E))};var xmt=Emt,oAe=(e,t)=>e===t,aAe=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const Smt=e=>e.combine?e.combine.draggableId:null,Tmt=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function Cmt(){const e=go((i,s)=>({x:i,y:s})),t=go((i,s,o=null,a=null,u=null)=>({isDragging:!0,isClone:s,isDropAnimating:!!u,dropAnimation:u,mode:i,draggingOver:o,combineWith:a,combineTargetFor:null})),n=go((i,s,o,a,u=null,l=null,c=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:u,combineWith:l,mode:s,offset:i,dimension:o,forceShouldAnimate:c,snapshot:t(s,a,u,l,null)}}));return(i,s)=>{if(sI(i)){if(i.critical.draggable.id!==s.draggableId)return null;const o=i.current.client.offset,a=i.dimensions.draggables[s.draggableId],u=Bl(i.impact),l=Tmt(i.impact),c=i.forceShouldAnimate;return n(e(o.x,o.y),i.movementMode,a,s.isClone,u,l,c)}if(i.phase==="DROP_ANIMATING"){const o=i.completed;if(o.result.draggableId!==s.draggableId)return null;const a=s.isClone,u=i.dimensions.draggables[s.draggableId],l=o.result,c=l.mode,f=aAe(l),d=Smt(l),p={duration:i.dropDuration,curve:HX.drop,moveTo:i.newHomeClientOffset,opacity:d?rI.opacity.drop:null,scale:d?rI.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:u,dropping:p,draggingOver:f,combineWith:d,mode:c,forceShouldAnimate:null,snapshot:t(c,a,f,d,p)}}}return null}}function uAe(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const Amt={mapped:{type:"SECONDARY",offset:vo,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:uAe(null)}};function Imt(){const e=go((o,a)=>({x:o,y:a})),t=go(uAe),n=go((o,a=null,u)=>({mapped:{type:"SECONDARY",offset:o,combineTargetFor:a,shouldAnimateDisplacement:u,snapshot:t(a)}})),r=o=>o?n(vo,o,!0):null,i=(o,a,u,l)=>{const c=u.displaced.visible[o],f=!!(l.inVirtualList&&l.effected[o]),d=mF(u),h=d&&d.draggableId===o?a:null;if(!c){if(!f)return r(h);if(u.displaced.invisible[o])return null;const g=wS(l.displacedBy.point),y=e(g.x,g.y);return n(y,h,!0)}if(f)return r(h);const p=u.displacedBy.point,m=e(p.x,p.y);return n(m,h,c.shouldAnimate)};return(o,a)=>{if(sI(o))return o.critical.draggable.id===a.draggableId?null:i(a.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){const u=o.completed;return u.result.draggableId===a.draggableId?null:i(a.draggableId,u.result.draggableId,u.impact,u.afterCritical)}return null}}const kmt=()=>{const e=Cmt(),t=Imt();return(r,i)=>e(r,i)||t(r,i)||Amt},Rmt={dropAnimationFinished:BCe},Nmt=cCe(kmt,Rmt,null,{context:KX,areStatePropsEqual:oAe})(xmt);var Dmt=Nmt;function lAe(e){return V$(JX).isUsingCloneFor===e.draggableId&&!e.isClone?null:qt.createElement(Dmt,e)}function Pmt(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,r=!!e.shouldRespectForcePress;return qt.createElement(lAe,gm({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}const cAe=e=>t=>e===t,Omt=cAe("scroll"),$mt=cAe("auto"),sfe=(e,t)=>t(e.overflowX)||t(e.overflowY),Mmt=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return sfe(n,Omt)||sfe(n,$mt)},Lmt=()=>!1,fAe=e=>e==null?null:e===document.body?Lmt()?e:null:e===document.documentElement?null:Mmt(e)?e:fAe(e.parentElement);var Xz=e=>({x:e.scrollLeft,y:e.scrollTop});const dAe=e=>e?window.getComputedStyle(e).position==="fixed"?!0:dAe(e.parentElement):!1;var Fmt=e=>{const t=fAe(e),n=dAe(e);return{closestScrollable:t,isFixedOnPage:n}},Bmt=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:r,direction:i,client:s,page:o,closest:a})=>{const u=(()=>{if(!a)return null;const{scrollSize:d,client:h}=a,p=VCe({scrollHeight:d.scrollHeight,scrollWidth:d.scrollWidth,height:h.paddingBox.height,width:h.paddingBox.width});return{pageMarginBox:a.page.marginBox,frameClient:h,scrollSize:d,shouldClipSubject:a.shouldClipSubject,scroll:{initial:a.scroll,current:a.scroll,max:p,diff:{value:vo,displacement:vo}}}})(),l=i==="vertical"?LX:ECe,c=YE({page:o,withPlaceholder:null,axis:l,frame:u});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:r,axis:l,isEnabled:t,client:s,page:o,frame:u,subject:c}};const jmt=(e,t)=>{const n=hCe(e);if(!t||e!==t)return n;const r=n.paddingBox.top-t.scrollTop,i=n.paddingBox.left-t.scrollLeft,s=r+t.scrollHeight,o=i+t.scrollWidth,u=PX({top:r,right:o,bottom:s,left:i},n.border);return OX({borderBox:u,margin:n.margin,border:n.border,padding:n.padding})};var Umt=({ref:e,descriptor:t,env:n,windowScroll:r,direction:i,isDropDisabled:s,isCombineEnabled:o,shouldClipSubject:a})=>{const u=n.closestScrollable,l=jmt(e,u),c=F$(l,r),f=(()=>{if(!u)return null;const h=hCe(u),p={scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth};return{client:h,page:F$(h,r),scroll:Xz(u),scrollSize:p,shouldClipSubject:a}})();return Bmt({descriptor:t,isEnabled:!s,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:i,client:l,page:c,closest:f})};const zmt={passive:!1},Vmt={passive:!0};var ofe=e=>e.shouldPublishImmediately?zmt:Vmt;const aD=e=>e&&e.env.closestScrollable||null;function Hmt(e){const t=I.useRef(null),n=V$(bF),r=XX("droppable"),{registry:i,marshal:s}=n,o=ZCe(e),a=Jn(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),u=I.useRef(a),l=Jn(()=>go((w,E)=>{t.current||ft();const x={x:w,y:E};s.updateDroppableScroll(a.id,x)}),[a.id,s]),c=$t(()=>{const w=t.current;return!w||!w.env.closestScrollable?vo:Xz(w.env.closestScrollable)},[]),f=$t(()=>{const w=c();l(w.x,w.y)},[c,l]),d=Jn(()=>Z2(f),[f]),h=$t(()=>{const w=t.current,E=aD(w);if(w&&E||ft(),w.scrollOptions.shouldPublishImmediately){f();return}d()},[d,f]),p=$t((w,E)=>{t.current&&ft();const x=o.current,T=x.getDroppableRef();T||ft();const C=Fmt(T),A={ref:T,descriptor:a,env:C,scrollOptions:E};t.current=A;const k=Umt({ref:T,descriptor:a,env:C,windowScroll:w,direction:x.direction,isDropDisabled:x.isDropDisabled,isCombineEnabled:x.isCombineEnabled,shouldClipSubject:!x.ignoreContainerClipping}),R=C.closestScrollable;return R&&(R.setAttribute(efe.contextId,n.contextId),R.addEventListener("scroll",h,ofe(A.scrollOptions))),k},[n.contextId,a,h,o]),m=$t(()=>{const w=t.current,E=aD(w);return w&&E||ft(),Xz(E)},[]),g=$t(()=>{const w=t.current;w||ft();const E=aD(w);t.current=null,E&&(d.cancel(),E.removeAttribute(efe.contextId),E.removeEventListener("scroll",h,ofe(w.scrollOptions)))},[h,d]),y=$t(w=>{const E=t.current;E||ft();const x=aD(E);x||ft(),x.scrollTop+=w.y,x.scrollLeft+=w.x},[]),v=Jn(()=>({getDimensionAndWatchScroll:p,getScrollWhileDragging:m,dragStopped:g,scroll:y}),[g,p,m,y]),b=Jn(()=>({uniqueId:r,descriptor:a,callbacks:v}),[v,a,r]);jl(()=>(u.current=b.descriptor,i.droppable.register(b),()=>{t.current&&g(),i.droppable.unregister(b)}),[v,a,g,b,s,i.droppable]),jl(()=>{t.current&&s.updateDroppableIsEnabled(u.current.id,!e.isDropDisabled)},[e.isDropDisabled,s]),jl(()=>{t.current&&s.updateDroppableIsCombineEnabled(u.current.id,e.isCombineEnabled)},[e.isCombineEnabled,s])}function E8(){}const afe={width:0,height:0,margin:$ft},qmt=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?afe:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},Wmt=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const r=qmt({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?BA.placeholder:null}},Gmt=e=>{const t=I.useRef(null),n=$t(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:r,onTransitionEnd:i,onClose:s,contextId:o}=e,[a,u]=I.useState(e.animate==="open");I.useEffect(()=>a?r!=="open"?(n(),u(!1),E8):t.current?E8:(t.current=setTimeout(()=>{t.current=null,u(!1)}),n):E8,[r,a,n]);const l=$t(f=>{f.propertyName==="height"&&(i(),r==="close"&&s())},[r,s,i]),c=Wmt({isAnimatingOpenOnMount:a,animate:e.animate,placeholder:e.placeholder});return qt.createElement(e.placeholder.tagName,{style:c,"data-rfd-placeholder-context-id":o,onTransitionEnd:l,ref:e.innerRef})};var Ymt=qt.memo(Gmt);class Kmt extends qt.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const Xmt=e=>{const t=I.useContext(bF);t||ft();const{contextId:n,isMovementAllowed:r}=t,i=I.useRef(null),s=I.useRef(null),{children:o,droppableId:a,type:u,mode:l,direction:c,ignoreContainerClipping:f,isDropDisabled:d,isCombineEnabled:h,snapshot:p,useClone:m,updateViewportMaxScroll:g,getContainerForClone:y}=e,v=$t(()=>i.current,[]),b=$t((R=null)=>{i.current=R},[]);$t(()=>s.current,[]);const w=$t((R=null)=>{s.current=R},[]),E=$t(()=>{r()&&g({maxScroll:qCe()})},[r,g]);Hmt({droppableId:a,type:u,mode:l,direction:c,isDropDisabled:d,isCombineEnabled:h,ignoreContainerClipping:f,getDroppableRef:v});const x=Jn(()=>qt.createElement(Kmt,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:R,data:O,animate:D})=>qt.createElement(Ymt,{placeholder:O,onClose:R,innerRef:w,animate:D,contextId:n,onTransitionEnd:E})),[n,E,e.placeholder,e.shouldAnimatePlaceholder,w]),T=Jn(()=>({innerRef:b,placeholder:x,droppableProps:{"data-rfd-droppable-id":a,"data-rfd-droppable-context-id":n}}),[n,a,x,b]),C=m?m.dragging.draggableId:null,A=Jn(()=>({droppableId:a,type:u,isUsingCloneFor:C}),[a,C,u]);function k(){if(!m)return null;const{dragging:R,render:O}=m,D=qt.createElement(lAe,{draggableId:R.draggableId,index:R.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},($,F)=>O($,F,R));return G_e.createPortal(D,y())}return qt.createElement(JX.Provider,{value:A},o(T,p),k())};var Qmt=Xmt;function Jmt(){return document.body||ft(),document.body}const ufe={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Jmt},hAe=e=>{let t={...e},n;for(n in ufe)e[n]===void 0&&(t={...t,[n]:ufe[n]});return t},x8=(e,t)=>e===t.droppable.type,lfe=(e,t)=>t.draggables[e.draggable.id],Zmt=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=go(s=>({draggableId:s.id,type:s.type,source:{index:s.index,droppableId:s.droppableId}})),r=go((s,o,a,u,l,c)=>{const f=l.descriptor.id;if(l.descriptor.droppableId===s){const p=c?{render:c,dragging:n(l.descriptor)}:null,m={isDraggingOver:a,draggingOverWith:a?f:null,draggingFromThisWith:f,isUsingPlaceholder:!0};return{placeholder:l.placeholder,shouldAnimatePlaceholder:!1,snapshot:m,useClone:p}}if(!o)return t;if(!u)return e;const h={isDraggingOver:a,draggingOverWith:f,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:l.placeholder,shouldAnimatePlaceholder:!0,snapshot:h,useClone:null}});return(s,o)=>{const a=hAe(o),u=a.droppableId,l=a.type,c=!a.isDropDisabled,f=a.renderClone;if(sI(s)){const d=s.critical;if(!x8(l,d))return t;const h=lfe(d,s.dimensions),p=Bl(s.impact)===u;return r(u,c,p,p,h,f)}if(s.phase==="DROP_ANIMATING"){const d=s.completed;if(!x8(l,d.critical))return t;const h=lfe(d.critical,s.dimensions);return r(u,c,aAe(d.result)===u,Bl(d.impact)===u,h,f)}if(s.phase==="IDLE"&&s.completed&&!s.shouldFlush){const d=s.completed;if(!x8(l,d.critical))return t;const h=Bl(d.impact)===u,p=!!(d.impact.at&&d.impact.at.type==="COMBINE"),m=d.critical.droppable.id===u;return h?p?e:t:m?e:t}return t}},egt={updateViewportMaxScroll:Ydt},tgt=cCe(Zmt,egt,(e,t,n)=>({...hAe(n),...e,...t}),{context:KX,areStatePropsEqual:oAe})(Qmt);var ngt=tgt;const rgt="_item_vxice_1",igt="_itemDragging_vxice_15",sgt="_symbol_vxice_19",vl={item:rgt,itemDragging:igt,symbol:sgt},ogt="/revisit/assets/bushfire-image-CS0hA0Al.png";function agt({parameters:e,setAnswer:t}){const{taskid:n,cards:r}=e,[i,s]=I.useState([]),[o,a]=iHe(r);I.useEffect(()=>{const l=o.map((c,f)=>_.jsx(Pmt,{index:f,draggableId:c.label,children:(d,h)=>_.jsx("div",{className:Bi(vl.item,{[vl.itemDragging]:h.isDragging}),...d.draggableProps,...d.dragHandleProps,ref:d.innerRef,children:_.jsx(Je,{className:vl.symbol,children:c.label})})},c.label));s(l)},[o]);const u=()=>{const l=JSON.stringify(o,null,2);t({status:!0,answers:{[n]:l}})};return _.jsxs(_e,{style:{minWidth:"fit-content"},children:[_.jsx(Je,{size:"lg",fw:700,style:{marginBottom:"10px"},children:"Below is a map showing the potential burn zones of a bushfire."}),_.jsx(cg,{radius:"md",h:500,w:1e3,src:ogt}),_.jsx(Je,{size:"md",fw:500,style:{marginBottom:"10px",marginTop:"20px"},children:"Drag and re-arrange the cards below on the left to match the cards on the right."}),_.jsx($h,{children:_.jsxs(ao,{children:[_.jsx(ao.Col,{span:{base:12,md:6,lg:3},style:{borderRight:"1px dotted LightGray"},children:_.jsx(dmt,{onDragEnd:({destination:l,source:c})=>a.reorder({from:c.index,to:(l==null?void 0:l.index)||0}),children:_.jsx(ngt,{droppableId:"dnd-list",direction:"vertical",children:l=>_.jsxs("div",{...l.droppableProps,ref:l.innerRef,children:[i,l.placeholder]})})})}),_.jsx(ao.Col,{span:{base:12,md:6,lg:3},children:_.jsxs(Gt,{justify:"space-between",align:"flex-start",direction:"column",wrap:"wrap",children:[_.jsx("div",{className:vl.item,children:_.jsx(Je,{className:vl.symbol,style:{width:"400px"},children:"1 Most Impacted"})}),_.jsx("div",{className:vl.item,children:_.jsx(Je,{className:vl.symbol,style:{width:"400px"},children:"2"})}),_.jsx("div",{className:vl.item,children:_.jsx(Je,{className:vl.symbol,style:{width:"400px"},children:"3"})}),_.jsx("div",{className:vl.item,children:_.jsx(Je,{className:vl.symbol,style:{width:"400px"},children:"4"})}),_.jsx("div",{className:vl.item,children:_.jsx(Je,{className:vl.symbol,style:{width:"400px"},children:"5 Least Impacted"})})]})})]})}),_.jsx(Nn,{onClick:()=>u(),children:"Confirm Cards"})]})}const ugt=Object.freeze(Object.defineProperty({__proto__:null,default:agt},Symbol.toStringTag,{value:"Module"}));function ym(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function lgt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function SS(e){let t,n,r;e.length!==2?(t=ym,n=(a,u)=>ym(e(a),u),r=(a,u)=>e(a)-u):(t=e===ym||e===lgt?e:cgt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function cgt(){return 0}function pAe(e){return e===null?NaN:+e}function*fgt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const mAe=SS(ym),sy=mAe.right,dgt=mAe.left;SS(pAe).center;function hgt(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function pgt(e,t){const n=hgt(e,t);return n&&Math.sqrt(n)}function cfe(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class tu{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class ffe extends Map{constructor(t,n=vAe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Qz(this,t))}has(t){return super.has(Qz(this,t))}set(t,n){return super.set(gAe(this,t),n)}delete(t){return super.delete(yAe(this,t))}}class H$ extends Set{constructor(t,n=vAe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(Qz(this,t))}add(t){return super.add(gAe(this,t))}delete(t){return super.delete(yAe(this,t))}}function Qz({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function gAe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function yAe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function vAe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function mgt(e,t){return Array.from(t,n=>e[n])}function ggt(e=ym){if(e===ym)return bAe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function bAe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const ygt=Math.sqrt(50),vgt=Math.sqrt(10),bgt=Math.sqrt(2);function q$(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=ygt?10:s>=vgt?5:s>=bgt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?q$(e,t,n*2):[a,u,l]}function Jz(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?q$(t,e,n):q$(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function Zz(e,t,n){return t=+t,e=+e,n=+n,q$(e,t,n)[2]}function oy(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Zz(t,e,n):Zz(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function M0(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function eV(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function _Ae(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?bAe:ggt(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));_Ae(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(VT(e,n,t),i(e[r],s)>0&&VT(e,n,r);o<a;){for(VT(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?VT(e,n,a):(++a,VT(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function VT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function tV(e,t,n){if(e=Float64Array.from(fgt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return eV(e);if(t>=1)return M0(e);var r,i=(r-1)*t,s=Math.floor(i),o=M0(_Ae(e,s).subarray(0,s+1)),a=eV(e.subarray(s+1));return o+(a-o)*(i-s)}}function wAe(e,t,n=pAe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function _gt(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function EAe(e,t){return tV(e,.5,t)}function*wgt(e){for(const t of e)yield*t}function xAe(e){return Array.from(wgt(e))}function Uu(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function SAe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function Egt(e,...t){e=new H$(e),t=t.map(xgt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function xgt(e){return e instanceof H$?e:new H$(e)}function Sgt(...e){const t=new H$;for(const n of e)for(const r of n)t.add(r);return t}var Tgt={value:()=>{}};function wF(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new zP(n)}function zP(e){this._=e}function Cgt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}zP.prototype=wF.prototype={constructor:zP,on:function(e,t){var n=this._,r=Cgt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=Agt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=dfe(n[i],e.name,t);else if(t==null)for(i in n)n[i]=dfe(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new zP(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Agt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function dfe(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Tgt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var nV="http://www.w3.org/1999/xhtml";const hfe={svg:"http://www.w3.org/2000/svg",xhtml:nV,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function EF(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),hfe.hasOwnProperty(t)?{space:hfe[t],local:e}:e}function Igt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===nV&&t.documentElement.namespaceURI===nV?t.createElement(e):t.createElementNS(n,e)}}function kgt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function TAe(e){var t=EF(e);return(t.local?kgt:Igt)(t)}function Rgt(){}function ZX(e){return e==null?Rgt:function(){return this.querySelector(e)}}function Ngt(e){typeof e!="function"&&(e=ZX(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new su(r,this._parents)}function CAe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Dgt(){return[]}function AAe(e){return e==null?Dgt:function(){return this.querySelectorAll(e)}}function Pgt(e){return function(){return CAe(e.apply(this,arguments))}}function Ogt(e){typeof e=="function"?e=Pgt(e):e=AAe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new su(r,i)}function IAe(e){return function(){return this.matches(e)}}function kAe(e){return function(t){return t.matches(e)}}var $gt=Array.prototype.find;function Mgt(e){return function(){return $gt.call(this.children,e)}}function Lgt(){return this.firstElementChild}function Fgt(e){return this.select(e==null?Lgt:Mgt(typeof e=="function"?e:kAe(e)))}var Bgt=Array.prototype.filter;function jgt(){return Array.from(this.children)}function Ugt(e){return function(){return Bgt.call(this.children,e)}}function zgt(e){return this.selectAll(e==null?jgt:Ugt(typeof e=="function"?e:kAe(e)))}function Vgt(e){typeof e!="function"&&(e=IAe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new su(r,this._parents)}function RAe(e){return new Array(e.length)}function Hgt(){return new su(this._enter||this._groups.map(RAe),this._parents)}function W$(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}W$.prototype={constructor:W$,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function qgt(e){return function(){return e}}function Wgt(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new W$(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function Ggt(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new W$(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function Ygt(e){return e.__data__}function Kgt(e,t){if(!arguments.length)return Array.from(this,Ygt);var n=t?Ggt:Wgt,r=this._parents,i=this._groups;typeof e!="function"&&(e=qgt(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=Xgt(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,b=0,w,E;v<p;++v)if(w=m[v]){for(v>=b&&(b=v+1);!(E=g[b])&&++b<p;);w._next=E||null}}return o=new su(o,r),o._enter=a,o._exit=u,o}function Xgt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Qgt(){return new su(this._exit||this._groups.map(RAe),this._parents)}function Jgt(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Zgt(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new su(a,this._parents)}function e0t(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function t0t(e){e||(e=n0t);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new su(i,this._parents).order()}function n0t(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function r0t(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function i0t(){return Array.from(this)}function s0t(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function o0t(){let e=0;for(const t of this)++e;return e}function a0t(){return!this.node()}function u0t(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function l0t(e){return function(){this.removeAttribute(e)}}function c0t(e){return function(){this.removeAttributeNS(e.space,e.local)}}function f0t(e,t){return function(){this.setAttribute(e,t)}}function d0t(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function h0t(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function p0t(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function m0t(e,t){var n=EF(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?c0t:l0t:typeof t=="function"?n.local?p0t:h0t:n.local?d0t:f0t)(n,t))}function NAe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function g0t(e){return function(){this.style.removeProperty(e)}}function y0t(e,t,n){return function(){this.style.setProperty(e,t,n)}}function v0t(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function b0t(e,t,n){return arguments.length>1?this.each((t==null?g0t:typeof t=="function"?v0t:y0t)(e,t,n??"")):QE(this.node(),e)}function QE(e,t){return e.style.getPropertyValue(t)||NAe(e).getComputedStyle(e,null).getPropertyValue(t)}function _0t(e){return function(){delete this[e]}}function w0t(e,t){return function(){this[e]=t}}function E0t(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function x0t(e,t){return arguments.length>1?this.each((t==null?_0t:typeof t=="function"?E0t:w0t)(e,t)):this.node()[e]}function DAe(e){return e.trim().split(/^|\s+/)}function eQ(e){return e.classList||new PAe(e)}function PAe(e){this._node=e,this._names=DAe(e.getAttribute("class")||"")}PAe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function OAe(e,t){for(var n=eQ(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function $Ae(e,t){for(var n=eQ(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function S0t(e){return function(){OAe(this,e)}}function T0t(e){return function(){$Ae(this,e)}}function C0t(e,t){return function(){(t.apply(this,arguments)?OAe:$Ae)(this,e)}}function A0t(e,t){var n=DAe(e+"");if(arguments.length<2){for(var r=eQ(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?C0t:t?S0t:T0t)(n,t))}function I0t(){this.textContent=""}function k0t(e){return function(){this.textContent=e}}function R0t(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function N0t(e){return arguments.length?this.each(e==null?I0t:(typeof e=="function"?R0t:k0t)(e)):this.node().textContent}function D0t(){this.innerHTML=""}function P0t(e){return function(){this.innerHTML=e}}function O0t(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function $0t(e){return arguments.length?this.each(e==null?D0t:(typeof e=="function"?O0t:P0t)(e)):this.node().innerHTML}function M0t(){this.nextSibling&&this.parentNode.appendChild(this)}function L0t(){return this.each(M0t)}function F0t(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function B0t(){return this.each(F0t)}function j0t(e){var t=typeof e=="function"?e:TAe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function U0t(){return null}function z0t(e,t){var n=typeof e=="function"?e:TAe(e),r=t==null?U0t:typeof t=="function"?t:ZX(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function V0t(){var e=this.parentNode;e&&e.removeChild(this)}function H0t(){return this.each(V0t)}function q0t(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function W0t(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function G0t(e){return this.select(e?W0t:q0t)}function Y0t(e){return arguments.length?this.property("__data__",e):this.node().__data__}function K0t(e){return function(t){e.call(this,t,this.__data__)}}function X0t(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Q0t(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function J0t(e,t,n){return function(){var r=this.__on,i,s=K0t(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Z0t(e,t,n){var r=X0t(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?J0t:Q0t,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function MAe(e,t,n){var r=NAe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function eyt(e,t){return function(){return MAe(this,e,t)}}function tyt(e,t){return function(){return MAe(this,e,t.apply(this,arguments))}}function nyt(e,t){return this.each((typeof t=="function"?tyt:eyt)(e,t))}function*ryt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var tQ=[null];function su(e,t){this._groups=e,this._parents=t}function Hk(){return new su([[document.documentElement]],tQ)}function iyt(){return this}su.prototype=Hk.prototype={constructor:su,select:Ngt,selectAll:Ogt,selectChild:Fgt,selectChildren:zgt,filter:Vgt,data:Kgt,enter:Hgt,exit:Qgt,join:Jgt,merge:Zgt,selection:iyt,order:e0t,sort:t0t,call:r0t,nodes:i0t,node:s0t,size:o0t,empty:a0t,each:u0t,attr:m0t,style:b0t,property:x0t,classed:A0t,text:N0t,html:$0t,raise:L0t,lower:B0t,append:j0t,insert:z0t,remove:H0t,clone:G0t,datum:Y0t,on:Z0t,dispatch:nyt,[Symbol.iterator]:ryt};function _s(e){return typeof e=="string"?new su([[document.querySelector(e)]],[document.documentElement]):new su([[e]],tQ)}function syt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function rV(e,t){if(e=syt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function oyt(e){return typeof e=="string"?new su([document.querySelectorAll(e)],[document.documentElement]):new su([CAe(e)],tQ)}const iV={capture:!0,passive:!1};function sV(e){e.preventDefault(),e.stopImmediatePropagation()}function ayt(e){var t=e.document.documentElement,n=_s(e).on("dragstart.drag",sV,iV);"onselectstart"in t?n.on("selectstart.drag",sV,iV):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function uyt(e,t){var n=e.document.documentElement,r=_s(e).on("dragstart.drag",null);t&&(r.on("click.drag",sV,iV),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function TS(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function qk(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Qy(){}var ob=.7,JE=1/ob,iE="\\s*([+-]?\\d+)\\s*",oI="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",wh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lyt=/^#([0-9a-f]{3,8})$/,cyt=new RegExp(`^rgb\\(${iE},${iE},${iE}\\)$`),fyt=new RegExp(`^rgb\\(${wh},${wh},${wh}\\)$`),dyt=new RegExp(`^rgba\\(${iE},${iE},${iE},${oI}\\)$`),hyt=new RegExp(`^rgba\\(${wh},${wh},${wh},${oI}\\)$`),pyt=new RegExp(`^hsl\\(${oI},${wh},${wh}\\)$`),myt=new RegExp(`^hsla\\(${oI},${wh},${wh},${oI}\\)$`),pfe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};TS(Qy,ab,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:mfe,formatHex:mfe,formatHex8:gyt,formatHsl:yyt,formatRgb:gfe,toString:gfe});function mfe(){return this.rgb().formatHex()}function gyt(){return this.rgb().formatHex8()}function yyt(){return LAe(this).formatHsl()}function gfe(){return this.rgb().formatRgb()}function ab(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=lyt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?yfe(t):n===3?new uo(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?uD(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?uD(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=cyt.exec(e))?new uo(t[1],t[2],t[3],1):(t=fyt.exec(e))?new uo(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=dyt.exec(e))?uD(t[1],t[2],t[3],t[4]):(t=hyt.exec(e))?uD(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=pyt.exec(e))?_fe(t[1],t[2]/100,t[3]/100,1):(t=myt.exec(e))?_fe(t[1],t[2]/100,t[3]/100,t[4]):pfe.hasOwnProperty(e)?yfe(pfe[e]):e==="transparent"?new uo(NaN,NaN,NaN,0):null}function yfe(e){return new uo(e>>16&255,e>>8&255,e&255,1)}function uD(e,t,n,r){return r<=0&&(e=t=n=NaN),new uo(e,t,n,r)}function nQ(e){return e instanceof Qy||(e=ab(e)),e?(e=e.rgb(),new uo(e.r,e.g,e.b,e.opacity)):new uo}function ay(e,t,n,r){return arguments.length===1?nQ(e):new uo(e,t,n,r??1)}function uo(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}TS(uo,ay,qk(Qy,{brighter(e){return e=e==null?JE:Math.pow(JE,e),new uo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ob:Math.pow(ob,e),new uo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new uo(L1(this.r),L1(this.g),L1(this.b),G$(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vfe,formatHex:vfe,formatHex8:vyt,formatRgb:bfe,toString:bfe}));function vfe(){return`#${v1(this.r)}${v1(this.g)}${v1(this.b)}`}function vyt(){return`#${v1(this.r)}${v1(this.g)}${v1(this.b)}${v1((isNaN(this.opacity)?1:this.opacity)*255)}`}function bfe(){const e=G$(this.opacity);return`${e===1?"rgb(":"rgba("}${L1(this.r)}, ${L1(this.g)}, ${L1(this.b)}${e===1?")":`, ${e})`}`}function G$(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function L1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function v1(e){return e=L1(e),(e<16?"0":"")+e.toString(16)}function _fe(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Mf(e,t,n,r)}function LAe(e){if(e instanceof Mf)return new Mf(e.h,e.s,e.l,e.opacity);if(e instanceof Qy||(e=ab(e)),!e)return new Mf;if(e instanceof Mf)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new Mf(o,a,u,e.opacity)}function Y$(e,t,n,r){return arguments.length===1?LAe(e):new Mf(e,t,n,r??1)}function Mf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}TS(Mf,Y$,qk(Qy,{brighter(e){return e=e==null?JE:Math.pow(JE,e),new Mf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ob:Math.pow(ob,e),new Mf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new uo(S8(e>=240?e-240:e+120,i,r),S8(e,i,r),S8(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Mf(wfe(this.h),lD(this.s),lD(this.l),G$(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=G$(this.opacity);return`${e===1?"hsl(":"hsla("}${wfe(this.h)}, ${lD(this.s)*100}%, ${lD(this.l)*100}%${e===1?")":`, ${e})`}`}}));function wfe(e){return e=(e||0)%360,e<0?e+360:e}function lD(e){return Math.max(0,Math.min(1,e||0))}function S8(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const FAe=Math.PI/180,BAe=180/Math.PI,K$=18,jAe=.96422,UAe=1,zAe=.82521,VAe=4/29,sE=6/29,HAe=3*sE*sE,byt=sE*sE*sE;function qAe(e){if(e instanceof Eh)return new Eh(e.l,e.a,e.b,e.opacity);if(e instanceof im)return WAe(e);e instanceof uo||(e=nQ(e));var t=I8(e.r),n=I8(e.g),r=I8(e.b),i=T8((.2225045*t+.7168786*n+.0606169*r)/UAe),s,o;return t===n&&n===r?s=o=i:(s=T8((.4360747*t+.3850649*n+.1430804*r)/jAe),o=T8((.0139322*t+.0971045*n+.7141733*r)/zAe)),new Eh(116*i-16,500*(s-i),200*(i-o),e.opacity)}function X$(e,t,n,r){return arguments.length===1?qAe(e):new Eh(e,t,n,r??1)}function Eh(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}TS(Eh,X$,qk(Qy,{brighter(e){return new Eh(this.l+K$*(e??1),this.a,this.b,this.opacity)},darker(e){return new Eh(this.l-K$*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=jAe*C8(t),e=UAe*C8(e),n=zAe*C8(n),new uo(A8(3.1338561*t-1.6168667*e-.4906146*n),A8(-.9787684*t+1.9161415*e+.033454*n),A8(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function T8(e){return e>byt?Math.pow(e,1/3):e/HAe+VAe}function C8(e){return e>sE?e*e*e:HAe*(e-VAe)}function A8(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function I8(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function _yt(e){if(e instanceof im)return new im(e.h,e.c,e.l,e.opacity);if(e instanceof Eh||(e=qAe(e)),e.a===0&&e.b===0)return new im(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*BAe;return new im(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Q$(e,t,n,r){return arguments.length===1?_yt(e):new im(e,t,n,r??1)}function im(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function WAe(e){if(isNaN(e.h))return new Eh(e.l,0,0,e.opacity);var t=e.h*FAe;return new Eh(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}TS(im,Q$,qk(Qy,{brighter(e){return new im(this.h,this.c,this.l+K$*(e??1),this.opacity)},darker(e){return new im(this.h,this.c,this.l-K$*(e??1),this.opacity)},rgb(){return WAe(this).rgb()}}));var GAe=-.14861,rQ=1.78277,iQ=-.29227,xF=-.90649,aI=1.97294,Efe=aI*xF,xfe=aI*rQ,Sfe=rQ*iQ-xF*GAe;function wyt(e){if(e instanceof F1)return new F1(e.h,e.s,e.l,e.opacity);e instanceof uo||(e=nQ(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Sfe*r+Efe*t-xfe*n)/(Sfe+Efe-xfe),s=r-i,o=(aI*(n-i)-iQ*s)/xF,a=Math.sqrt(o*o+s*s)/(aI*i*(1-i)),u=a?Math.atan2(o,s)*BAe-120:NaN;return new F1(u<0?u+360:u,a,i,e.opacity)}function oV(e,t,n,r){return arguments.length===1?wyt(e):new F1(e,t,n,r??1)}function F1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}TS(F1,oV,qk(Qy,{brighter(e){return e=e==null?JE:Math.pow(JE,e),new F1(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ob:Math.pow(ob,e),new F1(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*FAe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new uo(255*(t+n*(GAe*r+rQ*i)),255*(t+n*(iQ*r+xF*i)),255*(t+n*(aI*r)),this.opacity)}}));function YAe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function KAe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return YAe((n-r/t)*t,o,i,s,a)}}function XAe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return YAe((n-r/t)*t,i,s,o,a)}}const SF=e=>()=>e;function QAe(e,t){return function(n){return e+n*t}}function Eyt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function TF(e,t){var n=t-e;return n?QAe(e,n>180||n<-180?n-360*Math.round(n/360):n):SF(isNaN(e)?t:e)}function xyt(e){return(e=+e)==1?lo:function(t,n){return n-t?Eyt(t,n,e):SF(isNaN(t)?n:t)}}function lo(e,t){var n=t-e;return n?QAe(e,n):SF(isNaN(e)?t:e)}const uI=function e(t){var n=xyt(t);function r(i,s){var o=n((i=ay(i)).r,(s=ay(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=lo(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function JAe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=ay(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var Syt=JAe(KAe),Tyt=JAe(XAe);function sQ(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function ZAe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Cyt(e,t){return(ZAe(t)?sQ:e2e)(e,t)}function e2e(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=pg(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function t2e(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Cc(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function n2e(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=pg(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var aV=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,k8=new RegExp(aV.source,"g");function Ayt(e){return function(){return e}}function Iyt(e){return function(t){return e(t)+""}}function oQ(e,t){var n=aV.lastIndex=k8.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=aV.exec(e))&&(i=k8.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:Cc(r,i)})),n=k8.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?Iyt(u[0].x):Ayt(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function pg(e,t){var n=typeof t,r;return t==null||n==="boolean"?SF(t):(n==="number"?Cc:n==="string"?(r=ab(t))?(t=r,uI):oQ:t instanceof ab?uI:t instanceof Date?t2e:ZAe(t)?sQ:Array.isArray(t)?e2e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?n2e:Cc)(e,t)}function kyt(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Ryt(e,t){var n=TF(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function Wk(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Tfe=180/Math.PI,uV={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function r2e(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Tfe,skewX:Math.atan(u)*Tfe,scaleX:o,scaleY:a}}var cD;function Nyt(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?uV:r2e(t.a,t.b,t.c,t.d,t.e,t.f)}function Dyt(e){return e==null||(cD||(cD=document.createElementNS("http://www.w3.org/2000/svg","g")),cD.setAttribute("transform",e),!(e=cD.transform.baseVal.consolidate()))?uV:(e=e.matrix,r2e(e.a,e.b,e.c,e.d,e.e,e.f))}function i2e(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:Cc(l,f)},{i:m-2,x:Cc(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Cc(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Cc(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:Cc(l,f)},{i:m-2,x:Cc(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var s2e=i2e(Nyt,"px, ","px)","deg)"),o2e=i2e(Dyt,", ",")",")"),Pyt=1e-12;function Cfe(e){return((e=Math.exp(e))+1/e)/2}function Oyt(e){return((e=Math.exp(e))-1/e)/2}function $yt(e){return((e=Math.exp(2*e))-1)/(e+1)}const Myt=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<Pyt)y=Math.log(d/l)/t,g=function(T){return[a+T*h,u+T*p,l*Math.exp(t*T*y)]};else{var v=Math.sqrt(m),b=(d*d-l*l+r*m)/(2*l*n*v),w=(d*d-l*l-r*m)/(2*d*n*v),E=Math.log(Math.sqrt(b*b+1)-b),x=Math.log(Math.sqrt(w*w+1)-w);y=(x-E)/t,g=function(T){var C=T*y,A=Cfe(E),k=l/(n*v)*(A*$yt(t*C+E)-Oyt(E));return[a+k*h,u+k*p,l*A/Cfe(t*C+E)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function a2e(e){return function(t,n){var r=e((t=Y$(t)).h,(n=Y$(n)).h),i=lo(t.s,n.s),s=lo(t.l,n.l),o=lo(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Lyt=a2e(TF);var Fyt=a2e(lo);function Byt(e,t){var n=lo((e=X$(e)).l,(t=X$(t)).l),r=lo(e.a,t.a),i=lo(e.b,t.b),s=lo(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function u2e(e){return function(t,n){var r=e((t=Q$(t)).h,(n=Q$(n)).h),i=lo(t.c,n.c),s=lo(t.l,n.l),o=lo(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const jyt=u2e(TF);var Uyt=u2e(lo);function l2e(e){return function t(n){n=+n;function r(i,s){var o=e((i=oV(i)).h,(s=oV(s)).h),a=lo(i.s,s.s),u=lo(i.l,s.l),l=lo(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const zyt=l2e(TF);var Vyt=l2e(lo);function aQ(e,t){t===void 0&&(t=e,e=pg);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Hyt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const qyt=Object.freeze(Object.defineProperty({__proto__:null,interpolate:pg,interpolateArray:Cyt,interpolateBasis:KAe,interpolateBasisClosed:XAe,interpolateCubehelix:zyt,interpolateCubehelixLong:Vyt,interpolateDate:t2e,interpolateDiscrete:kyt,interpolateHcl:jyt,interpolateHclLong:Uyt,interpolateHsl:Lyt,interpolateHslLong:Fyt,interpolateHue:Ryt,interpolateLab:Byt,interpolateNumber:Cc,interpolateNumberArray:sQ,interpolateObject:n2e,interpolateRgb:uI,interpolateRgbBasis:Syt,interpolateRgbBasisClosed:Tyt,interpolateRound:Wk,interpolateString:oQ,interpolateTransformCss:s2e,interpolateTransformSvg:o2e,interpolateZoom:Myt,piecewise:aQ,quantize:Hyt},Symbol.toStringTag,{value:"Module"}));var ZE=0,$C=0,HT=0,c2e=1e3,J$,MC,Z$=0,ub=0,CF=0,lI=typeof performance=="object"&&performance.now?performance:Date,f2e=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function AF(){return ub||(f2e(Wyt),ub=lI.now()+CF)}function Wyt(){ub=0}function cI(){this._call=this._time=this._next=null}cI.prototype=uQ.prototype={constructor:cI,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?AF():+n)+(t==null?0:+t),!this._next&&MC!==this&&(MC?MC._next=this:J$=this,MC=this),this._call=e,this._time=n,lV()},stop:function(){this._call&&(this._call=null,this._time=1/0,lV())}};function uQ(e,t,n){var r=new cI;return r.restart(e,t,n),r}function Gyt(){AF(),++ZE;for(var e=J$,t;e;)(t=ub-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ZE}function Afe(){ub=(Z$=lI.now())+CF,ZE=$C=0;try{Gyt()}finally{ZE=0,Kyt(),ub=0}}function Yyt(){var e=lI.now(),t=e-Z$;t>c2e&&(CF-=t,Z$=e)}function Kyt(){for(var e,t=J$,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:J$=n);MC=e,lV(r)}function lV(e){if(!ZE){$C&&($C=clearTimeout($C));var t=e-ub;t>24?(e<1/0&&($C=setTimeout(Afe,e-lI.now()-CF)),HT&&(HT=clearInterval(HT))):(HT||(Z$=lI.now(),HT=setInterval(Yyt,c2e)),ZE=1,f2e(Afe))}}function Ife(e,t,n){var r=new cI;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function Xyt(e,t,n){var r=new cI,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?AF():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var Qyt=wF("start","end","cancel","interrupt"),Jyt=[],d2e=0,kfe=1,cV=2,VP=3,Rfe=4,fV=5,HP=6;function IF(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Zyt(e,n,{name:t,index:r,group:i,on:Qyt,tween:Jyt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:d2e})}function lQ(e,t){var n=yd(e,t);if(n.state>d2e)throw new Error("too late; already scheduled");return n}function up(e,t){var n=yd(e,t);if(n.state>VP)throw new Error("too late; already running");return n}function yd(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Zyt(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=uQ(s,0,n.time);function s(l){n.state=kfe,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==kfe)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===VP)return Ife(o);h.state===Rfe?(h.state=HP,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=HP,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(Ife(function(){n.state===VP&&(n.state=Rfe,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=cV,n.on.call("start",e,e.__data__,n.index,n.group),n.state===cV){for(n.state=VP,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=fV,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===fV&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=HP,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function dV(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>cV&&r.state<fV,r.state=HP,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function evt(e){return this.each(function(){dV(this,e)})}function tvt(e,t){var n,r;return function(){var i=up(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function nvt(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=up(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function rvt(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=yd(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?tvt:nvt)(n,e,t))}function cQ(e,t,n){var r=e._id;return e.each(function(){var i=up(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return yd(i,r).value[t]}}function h2e(e,t){var n;return(typeof t=="number"?Cc:t instanceof ab?uI:(n=ab(t))?(t=n,uI):oQ)(e,t)}function ivt(e){return function(){this.removeAttribute(e)}}function svt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ovt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function avt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function uvt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function lvt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function cvt(e,t){var n=EF(e),r=n==="transform"?o2e:h2e;return this.attrTween(e,typeof t=="function"?(n.local?lvt:uvt)(n,r,cQ(this,"attr."+e,t)):t==null?(n.local?svt:ivt)(n):(n.local?avt:ovt)(n,r,t))}function fvt(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function dvt(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function hvt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&dvt(e,s)),n}return i._value=t,i}function pvt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&fvt(e,s)),n}return i._value=t,i}function mvt(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=EF(e);return this.tween(n,(r.local?hvt:pvt)(r,t))}function gvt(e,t){return function(){lQ(this,e).delay=+t.apply(this,arguments)}}function yvt(e,t){return t=+t,function(){lQ(this,e).delay=t}}function vvt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?gvt:yvt)(t,e)):yd(this.node(),t).delay}function bvt(e,t){return function(){up(this,e).duration=+t.apply(this,arguments)}}function _vt(e,t){return t=+t,function(){up(this,e).duration=t}}function wvt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?bvt:_vt)(t,e)):yd(this.node(),t).duration}function Evt(e,t){if(typeof t!="function")throw new Error;return function(){up(this,e).ease=t}}function xvt(e){var t=this._id;return arguments.length?this.each(Evt(t,e)):yd(this.node(),t).ease}function Svt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;up(this,e).ease=n}}function Tvt(e){if(typeof e!="function")throw new Error;return this.each(Svt(this._id,e))}function Cvt(e){typeof e!="function"&&(e=IAe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Bm(r,this._parents,this._name,this._id)}function Avt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new Bm(o,this._parents,this._name,this._id)}function Ivt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function kvt(e,t,n){var r,i,s=Ivt(t)?lQ:up;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function Rvt(e,t){var n=this._id;return arguments.length<2?yd(this.node(),n).on.on(e):this.each(kvt(n,e,t))}function Nvt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Dvt(){return this.on("end.remove",Nvt(this._id))}function Pvt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ZX(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,IF(l[d],t,n,d,l,yd(c,n)));return new Bm(s,this._parents,t,n)}function Ovt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=AAe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=yd(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&IF(h,t,n,m,d,p);s.push(d),o.push(c)}return new Bm(s,o,t,n)}var $vt=Hk.prototype.constructor;function Mvt(){return new $vt(this._groups,this._parents)}function Lvt(e,t){var n,r,i;return function(){var s=QE(this,e),o=(this.style.removeProperty(e),QE(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function p2e(e){return function(){this.style.removeProperty(e)}}function Fvt(e,t,n){var r,i=n+"",s;return function(){var o=QE(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Bvt(e,t,n){var r,i,s;return function(){var o=QE(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),QE(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function jvt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=up(this,e),l=u.on,c=u.value[s]==null?a||(a=p2e(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function Uvt(e,t,n){var r=(e+="")=="transform"?s2e:h2e;return t==null?this.styleTween(e,Lvt(e,r)).on("end.style."+e,p2e(e)):typeof t=="function"?this.styleTween(e,Bvt(e,r,cQ(this,"style."+e,t))).each(jvt(this._id,e)):this.styleTween(e,Fvt(e,r,t),n).on("end.style."+e,null)}function zvt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Vvt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&zvt(e,o,n)),r}return s._value=t,s}function Hvt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Vvt(e,t,n??""))}function qvt(e){return function(){this.textContent=e}}function Wvt(e){return function(){var t=e(this);this.textContent=t??""}}function Gvt(e){return this.tween("text",typeof e=="function"?Wvt(cQ(this,"text",e)):qvt(e==null?"":e+""))}function Yvt(e){return function(t){this.textContent=e.call(this,t)}}function Kvt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Yvt(i)),t}return r._value=e,r}function Xvt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Kvt(e))}function Qvt(){for(var e=this._name,t=this._id,n=m2e(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=yd(u,t);IF(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Bm(r,this._parents,e,n)}function Jvt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=up(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var Zvt=0;function Bm(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function m2e(){return++Zvt}var Rp=Hk.prototype;Bm.prototype={constructor:Bm,select:Pvt,selectAll:Ovt,selectChild:Rp.selectChild,selectChildren:Rp.selectChildren,filter:Cvt,merge:Avt,selection:Mvt,transition:Qvt,call:Rp.call,nodes:Rp.nodes,node:Rp.node,size:Rp.size,empty:Rp.empty,each:Rp.each,on:Rvt,attr:cvt,attrTween:mvt,style:Uvt,styleTween:Hvt,text:Gvt,textTween:Xvt,remove:Dvt,tween:rvt,delay:vvt,duration:wvt,ease:xvt,easeVarying:Tvt,end:Jvt,[Symbol.iterator]:Rp[Symbol.iterator]};const e1t=e=>+e;function t1t(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var n1t={time:null,delay:0,duration:250,ease:t1t};function r1t(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function i1t(e){var t,n;e instanceof Bm?(t=e._id,e=e._name):(t=m2e(),(n=n1t).time=AF(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&IF(u,e,t,l,o,n||r1t(u,t));return new Bm(r,this._parents,e,t)}Hk.prototype.interrupt=evt;Hk.prototype.transition=i1t;const R8=e=>()=>e;function s1t(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function o1t(e){e.stopImmediatePropagation()}function N8(e){e.preventDefault(),e.stopImmediatePropagation()}var Nfe={name:"drag"},D8={name:"space"},B_={name:"handle"},j_={name:"center"};const{abs:Dfe,max:sa,min:oa}=Math;function Pfe(e){return[+e[0],+e[1]]}function hV(e){return[Pfe(e[0]),Pfe(e[1])]}var qP={name:"x",handles:["w","e"].map(fI),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},WP={name:"y",handles:["n","s"].map(fI),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},a1t={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(fI),input:function(e){return e==null?null:hV(e)},output:function(e){return e}},Np={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ofe={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},$fe={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},u1t={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},l1t={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function fI(e){return{type:e}}function c1t(e){return!e.ctrlKey&&!e.button}function f1t(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function d1t(){return navigator.maxTouchPoints||"ontouchstart"in this}function P8(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function h1t(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function p1t(){return fQ(qP)}function m1t(){return fQ(WP)}function g1t(){return fQ(a1t)}function fQ(e){var t=f1t,n=c1t,r=d1t,i=!0,s=wF("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([fI("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Np.overlay).merge(y).each(function(){var b=P8(this).extent;_s(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),g.selectAll(".selection").data([fI("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Np.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(b){return b.type});v.exit().remove(),v.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return Np[b.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(b){c(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){c(this,arguments).end(b)}).tween("brush",function(){var b=this,w=b.__brush,E=c(b,arguments),x=w.selection,T=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),C=pg(x,T);function A(k){w.selection=k===1&&T===null?null:C(k),l.call(b),E.brush()}return x!==null&&T!==null?A:A(1)}):g.each(function(){var b=this,w=arguments,E=b.__brush,x=e.input(typeof y=="function"?y.apply(b,w):y,E.extent),T=c(b,w).beforestart();dV(b),E.selection=x===null?null:x,l.call(b),T.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=_s(this),y=P8(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var b=g.__brush.emitter;return b&&(!v||!b.clean)?b:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var b=_s(this.that).datum();s.call(g,this.that,new s1t(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),b)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,b=(i&&g.metaKey?v="overlay":v)==="selection"?Nfe:i&&g.altKey?j_:B_,w=e===WP?null:u1t[v],E=e===qP?null:l1t[v],x=P8(y),T=x.extent,C=x.selection,A=T[0][0],k,R,O=T[0][1],D,$,F=T[1][0],L,j,z=T[1][1],q,P,U=0,W=0,B,H=w&&E&&i&&g.shiftKey,G,te,le=Array.from(g.touches||[g],be=>{const ke=be.identifier;return be=rV(be,y),be.point0=be.slice(),be.identifier=ke,be});dV(y);var fe=c(y,arguments,!0).beforestart();if(v==="overlay"){C&&(B=!0);const be=[le[0],le[1]||le[0]];x.selection=C=[[k=e===WP?A:oa(be[0][0],be[1][0]),D=e===qP?O:oa(be[0][1],be[1][1])],[L=e===WP?F:sa(be[0][0],be[1][0]),q=e===qP?z:sa(be[0][1],be[1][1])]],le.length>1&&He(g)}else k=C[0][0],D=C[0][1],L=C[1][0],q=C[1][1];R=k,$=D,j=L,P=q;var de=_s(y).attr("pointer-events","none"),ge=de.selectAll(".overlay").attr("cursor",Np[v]);if(g.touches)fe.moved=pe,fe.ended=Ue;else{var Ie=_s(g.view).on("mousemove.brush",pe,!0).on("mouseup.brush",Ue,!0);i&&Ie.on("keydown.brush",yt,!0).on("keyup.brush",it,!0),ayt(g.view)}l.call(y),fe.start(g,b.name);function pe(be){for(const ke of be.changedTouches||[be])for(const ze of le)ze.identifier===ke.identifier&&(ze.cur=rV(ke,y));if(H&&!G&&!te&&le.length===1){const ke=le[0];Dfe(ke.cur[0]-ke[0])>Dfe(ke.cur[1]-ke[1])?te=!0:G=!0}for(const ke of le)ke.cur&&(ke[0]=ke.cur[0],ke[1]=ke.cur[1]);B=!0,N8(be),He(be)}function He(be){const ke=le[0],ze=ke.point0;var ct;switch(U=ke[0]-ze[0],W=ke[1]-ze[1],b){case D8:case Nfe:{w&&(U=sa(A-k,oa(F-L,U)),R=k+U,j=L+U),E&&(W=sa(O-D,oa(z-q,W)),$=D+W,P=q+W);break}case B_:{le[1]?(w&&(R=sa(A,oa(F,le[0][0])),j=sa(A,oa(F,le[1][0])),w=1),E&&($=sa(O,oa(z,le[0][1])),P=sa(O,oa(z,le[1][1])),E=1)):(w<0?(U=sa(A-k,oa(F-k,U)),R=k+U,j=L):w>0&&(U=sa(A-L,oa(F-L,U)),R=k,j=L+U),E<0?(W=sa(O-D,oa(z-D,W)),$=D+W,P=q):E>0&&(W=sa(O-q,oa(z-q,W)),$=D,P=q+W));break}case j_:{w&&(R=sa(A,oa(F,k-U*w)),j=sa(A,oa(F,L+U*w))),E&&($=sa(O,oa(z,D-W*E)),P=sa(O,oa(z,q+W*E)));break}}j<R&&(w*=-1,ct=k,k=L,L=ct,ct=R,R=j,j=ct,v in Ofe&&ge.attr("cursor",Np[v=Ofe[v]])),P<$&&(E*=-1,ct=D,D=q,q=ct,ct=$,$=P,P=ct,v in $fe&&ge.attr("cursor",Np[v=$fe[v]])),x.selection&&(C=x.selection),G&&(R=C[0][0],j=C[1][0]),te&&($=C[0][1],P=C[1][1]),(C[0][0]!==R||C[0][1]!==$||C[1][0]!==j||C[1][1]!==P)&&(x.selection=[[R,$],[j,P]],l.call(y),fe.brush(be,b.name))}function Ue(be){if(o1t(be),be.touches){if(be.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else uyt(be.view,B),Ie.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);de.attr("pointer-events","all"),ge.attr("cursor",Np.overlay),x.selection&&(C=x.selection),h1t(C)&&(x.selection=null,l.call(y)),fe.end(be,b.name)}function yt(be){switch(be.keyCode){case 16:{H=w&&E;break}case 18:{b===B_&&(w&&(L=j-U*w,k=R+U*w),E&&(q=P-W*E,D=$+W*E),b=j_,He(be));break}case 32:{(b===B_||b===j_)&&(w<0?L=j-U:w>0&&(k=R-U),E<0?q=P-W:E>0&&(D=$-W),b=D8,ge.attr("cursor",Np.selection),He(be));break}default:return}N8(be)}function it(be){switch(be.keyCode){case 16:{H&&(G=te=H=!1,He(be));break}case 18:{b===j_&&(w<0?L=j:w>0&&(k=R),E<0?q=P:E>0&&(D=$),b=B_,He(be));break}case 32:{b===D8&&(be.altKey?(w&&(L=j-U*w,k=R+U*w),E&&(q=P-W*E,D=$+W*E),b=j_):(w<0?L=j:w>0&&(k=R),E<0?q=P:E>0&&(D=$),b=B_),ge.attr("cursor",Np[v]),He(be));break}default:return}N8(be)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=hV(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:R8(hV(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:R8(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:R8(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const pV=Math.PI,mV=2*pV,Uv=1e-6,y1t=mV-Uv;function g2e(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function v1t(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return g2e;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let dQ=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?g2e:v1t(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Uv)if(!(Math.abs(f*u-l*c)>Uv)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),b=s*Math.tan((pV-Math.acos((m+d-g)/(2*y*v)))/2),w=b/v,E=b/y;Math.abs(w-1)>Uv&&this._append`L${t+w*c},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+E*u},${this._y1=n+E*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Uv||Math.abs(this._y1-c)>Uv)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%mV+mV),d>y1t?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>Uv&&this._append`A${r},${r},0,${+(d>=pV)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function kF(){return new dQ}kF.prototype=dQ.prototype;const vm=11102230246251565e-32,aa=134217729,b1t=(3+8*vm)*vm;function O8(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function _1t(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function Gk(e){return new Float64Array(e)}const w1t=(3+16*vm)*vm,E1t=(2+12*vm)*vm,x1t=(9+64*vm)*vm*vm,U_=Gk(4),Mfe=Gk(8),Lfe=Gk(12),Ffe=Gk(16),ja=Gk(4);function S1t(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,b,w,E,x,T,C;const A=e-i,k=n-i,R=t-s,O=r-s;w=A*O,d=aa*A,h=d-(d-A),p=A-h,d=aa*O,m=d-(d-O),g=O-m,E=p*g-(w-h*m-p*m-h*g),x=R*k,d=aa*R,h=d-(d-R),p=R-h,d=aa*k,m=d-(d-k),g=k-m,T=p*g-(x-h*m-p*m-h*g),y=E-T,f=E-y,U_[0]=E-(y+f)+(f-T),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-x,f=b-y,U_[1]=b-(y+f)+(f-x),C=v+y,f=C-v,U_[2]=v-(C-f)+(y-f),U_[3]=C;let D=_1t(4,U_),$=E1t*o;if(D>=$||-D>=$||(f=e-A,a=e-(A+f)+(f-i),f=n-k,l=n-(k+f)+(f-i),f=t-R,u=t-(R+f)+(f-s),f=r-O,c=r-(O+f)+(f-s),a===0&&u===0&&l===0&&c===0)||($=x1t*o+b1t*Math.abs(D),D+=A*c+O*a-(R*l+k*u),D>=$||-D>=$))return D;w=a*O,d=aa*a,h=d-(d-a),p=a-h,d=aa*O,m=d-(d-O),g=O-m,E=p*g-(w-h*m-p*m-h*g),x=u*k,d=aa*u,h=d-(d-u),p=u-h,d=aa*k,m=d-(d-k),g=k-m,T=p*g-(x-h*m-p*m-h*g),y=E-T,f=E-y,ja[0]=E-(y+f)+(f-T),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-x,f=b-y,ja[1]=b-(y+f)+(f-x),C=v+y,f=C-v,ja[2]=v-(C-f)+(y-f),ja[3]=C;const F=O8(4,U_,4,ja,Mfe);w=A*c,d=aa*A,h=d-(d-A),p=A-h,d=aa*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),x=R*l,d=aa*R,h=d-(d-R),p=R-h,d=aa*l,m=d-(d-l),g=l-m,T=p*g-(x-h*m-p*m-h*g),y=E-T,f=E-y,ja[0]=E-(y+f)+(f-T),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-x,f=b-y,ja[1]=b-(y+f)+(f-x),C=v+y,f=C-v,ja[2]=v-(C-f)+(y-f),ja[3]=C;const L=O8(F,Mfe,4,ja,Lfe);w=a*c,d=aa*a,h=d-(d-a),p=a-h,d=aa*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),x=u*l,d=aa*u,h=d-(d-u),p=u-h,d=aa*l,m=d-(d-l),g=l-m,T=p*g-(x-h*m-p*m-h*g),y=E-T,f=E-y,ja[0]=E-(y+f)+(f-T),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-x,f=b-y,ja[1]=b-(y+f)+(f-x),C=v+y,f=C-v,ja[2]=v-(C-f)+(y-f),ja[3]=C;const j=O8(L,Lfe,4,ja,Ffe);return Ffe[j-1]}function fD(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=w1t*l?u:-S1t(e,t,n,r,i,s,l)}const Bfe=Math.pow(2,-52),dD=new Uint32Array(512);class eM{static from(t,n=k1t,r=R1t){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new eM(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let A=0;A<o;A++){const k=t[2*A],R=t[2*A+1];k<a&&(a=k),R<u&&(u=R),k>l&&(l=k),R>c&&(c=R),this._ids[A]=A}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let A=0,k=1/0;A<o;A++){const R=$8(f,d,t[2*A],t[2*A+1]);R<k&&(h=A,k=R)}const g=t[2*h],y=t[2*h+1];for(let A=0,k=1/0;A<o;A++){if(A===h)continue;const R=$8(g,y,t[2*A],t[2*A+1]);R<k&&R>0&&(p=A,k=R)}let v=t[2*p],b=t[2*p+1],w=1/0;for(let A=0;A<o;A++){if(A===h||A===p)continue;const k=A1t(g,y,v,b,t[2*A],t[2*A+1]);k<w&&(m=A,w=k)}let E=t[2*m],x=t[2*m+1];if(w===1/0){for(let R=0;R<o;R++)this._dists[R]=t[2*R]-t[0]||t[2*R+1]-t[1];Dw(this._ids,this._dists,0,o-1);const A=new Uint32Array(o);let k=0;for(let R=0,O=-1/0;R<o;R++){const D=this._ids[R],$=this._dists[D];$>O&&(A[k++]=D,O=$)}this.hull=A.subarray(0,k),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(fD(g,y,v,b,E,x)<0){const A=p,k=v,R=b;p=m,v=E,b=x,m=A,E=k,x=R}const T=I1t(g,y,v,b,E,x);this._cx=T.x,this._cy=T.y;for(let A=0;A<o;A++)this._dists[A]=$8(t[2*A],t[2*A+1],T.x,T.y);Dw(this._ids,this._dists,0,o-1),this._hullStart=h;let C=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,b)]=p,s[this._hashKey(E,x)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let A=0,k,R;A<this._ids.length;A++){const O=this._ids[A],D=t[2*O],$=t[2*O+1];if(A>0&&Math.abs(D-k)<=Bfe&&Math.abs($-R)<=Bfe||(k=D,R=$,O===h||O===p||O===m))continue;let F=0;for(let P=0,U=this._hashKey(D,$);P<this._hashSize&&(F=s[(U+P)%this._hashSize],!(F!==-1&&F!==r[F]));P++);F=n[F];let L=F,j;for(;j=r[L],fD(D,$,t[2*L],t[2*L+1],t[2*j],t[2*j+1])>=0;)if(L=j,L===F){L=-1;break}if(L===-1)continue;let z=this._addTriangle(L,O,r[L],-1,-1,i[L]);i[O]=this._legalize(z+2),i[L]=z,C++;let q=r[L];for(;j=r[q],fD(D,$,t[2*q],t[2*q+1],t[2*j],t[2*j+1])<0;)z=this._addTriangle(q,O,j,i[O],-1,i[q]),i[O]=this._legalize(z+2),r[q]=q,C--,q=j;if(L===F)for(;j=n[L],fD(D,$,t[2*j],t[2*j+1],t[2*L],t[2*L+1])<0;)z=this._addTriangle(j,O,L,-1,i[L],i[j]),this._legalize(z+2),i[j]=z,r[L]=L,C--,L=j;this._hullStart=n[O]=L,r[L]=n[q]=O,r[O]=q,s[this._hashKey(D,$)]=O,s[this._hashKey(t[2*L],t[2*L+1])]=L}this.hull=new Uint32Array(C);for(let A=0,k=this._hullStart;A<C;A++)this.hull[A]=k,k=r[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(T1t(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=dD[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(C1t(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<dD.length&&(dD[s++]=v)}else{if(s===0)break;t=dD[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function T1t(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function $8(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function C1t(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function A1t(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function I1t(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function Dw(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;qT(e,i,s),t[e[n]]>t[e[r]]&&qT(e,n,r),t[e[s]]>t[e[r]]&&qT(e,s,r),t[e[n]]>t[e[s]]&&qT(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;qT(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(Dw(e,t,s,r),Dw(e,t,n,o-1)):(Dw(e,t,n,o-1),Dw(e,t,s,r))}}function qT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function k1t(e){return e[0]}function R1t(e){return e[1]}const jfe=1e-6;class b1{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>jfe||Math.abs(this._y1-s)>jfe)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class gV{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let N1t=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,b;m<y;m+=3,g+=2){const w=r[m]*2,E=r[m+1]*2,x=r[m+2]*2,T=t[w],C=t[w+1],A=t[E],k=t[E+1],R=t[x],O=t[x+1],D=A-T,$=k-C,F=R-T,L=O-C,j=(D*L-$*F)*2;if(Math.abs(j)<1e-9){if(s===void 0){s=o=0;for(const q of n)s+=t[q*2],o+=t[q*2+1];s/=n.length,o/=n.length}const z=1e9*Math.sign((s-T)*L-(o-C)*F);v=(T+R)/2-z*L,b=(C+O)/2+z*F}else{const z=1/j,q=D*D+$*$,P=F*F+L*L;v=T+(L*q-$*P)*z,b=C+(D*P-F*q)*z}a[g]=v,a[g+1]=b}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new b1:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new b1:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new b1:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new gV;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const D1t=2*Math.PI,z_=Math.pow;function P1t(e){return e[0]}function O1t(e){return e[1]}function $1t(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function M1t(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class hQ{static from(t,n=P1t,r=O1t,i){return new hQ("length"in t?L1t(t,n,r,i):Float64Array.from(F1t(t,n,r,i)))}constructor(t){this._delaunator=new eM(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&$1t(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=M1t(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new eM(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new N1t(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=z_(n-l[t*2],2)+z_(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=z_(n-l[p*2],2)+z_(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&z_(n-l[h*2],2)+z_(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new b1:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new b1:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,D1t)}return r&&r.value()}renderHull(t){const n=t==null?t=new b1:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new gV;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new b1:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new gV;return this.renderTriangle(t,n),n.value()}}function L1t(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*F1t(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var Ufe={},M8={},L8=34,WT=10,F8=13;function y2e(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function B1t(e,t){var n=y2e(e);return function(r,i){return t(n(r),i,e)}}function zfe(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Su(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function j1t(e){return e<0?"-"+Su(-e,6):e>9999?"+"+Su(e,6):Su(e,4)}function U1t(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":j1t(e.getUTCFullYear())+"-"+Su(e.getUTCMonth()+1,2)+"-"+Su(e.getUTCDate(),2)+(i?"T"+Su(t,2)+":"+Su(n,2)+":"+Su(r,2)+"."+Su(i,3)+"Z":r?"T"+Su(t,2)+":"+Su(n,2)+":"+Su(r,2)+"Z":n||t?"T"+Su(t,2)+":"+Su(n,2)+"Z":"")}function v2e(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?B1t(g,d):y2e(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===WT&&--p,f.charCodeAt(p-1)===F8&&--p;function w(){if(v)return M8;if(b)return b=!1,Ufe;var x,T=m,C;if(f.charCodeAt(T)===L8){for(;m++<p&&f.charCodeAt(m)!==L8||f.charCodeAt(++m)===L8;);return(x=m)>=p?v=!0:(C=f.charCodeAt(m++))===WT?b=!0:C===F8&&(b=!0,f.charCodeAt(m)===WT&&++m),f.slice(T+1,x-1).replace(/""/g,'"')}for(;m<p;){if((C=f.charCodeAt(x=m++))===WT)b=!0;else if(C===F8)b=!0,f.charCodeAt(m)===WT&&++m;else if(C!==n)continue;return f.slice(T,x)}return v=!0,f.slice(T,p)}for(;(y=w())!==M8;){for(var E=[];y!==Ufe&&y!==M8;)E.push(y),y=w();d&&(E=d(E,g++))==null||h.push(E)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=zfe(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=zfe(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?U1t(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var z1t=v2e(","),V1t=z1t.parse;function H1t(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function q1t(e,t){return fetch(e,t).then(H1t)}function W1t(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),q1t(t,n).then(function(i){return e(i,r)})}}var G1t=W1t(V1t);function Y1t(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function K1t(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return b2e(this.cover(t,n),t,n,e)}function b2e(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function X1t(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)b2e(this,o[n],a[n],e[n]);return this}function Q1t(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function J1t(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Z1t(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Xa(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function ebt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new Xa(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new Xa(h[3],g,y,u,l),new Xa(h[2],o,y,g,l),new Xa(h[1],g,a,u,y),new Xa(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),w=v*v+b*b;if(w<n){var E=Math.sqrt(n=w);i=e-E,s=t-E,c=e+E,f=t+E,r=h.data}}return r}function tbt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function nbt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function rbt(){return this._root}function ibt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function sbt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new Xa(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new Xa(i,l,c,a,u)),(i=r[2])&&t.push(new Xa(i,s,c,l,u)),(i=r[1])&&t.push(new Xa(i,l,o,a,c)),(i=r[0])&&t.push(new Xa(i,s,o,l,c))}return this}function obt(e){var t=[],n=[],r;for(this._root&&t.push(new Xa(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new Xa(s,o,a,c,f)),(s=i[1])&&t.push(new Xa(s,c,a,u,f)),(s=i[2])&&t.push(new Xa(s,o,f,c,l)),(s=i[3])&&t.push(new Xa(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function abt(e){return e[0]}function ubt(e){return arguments.length?(this._x=e,this):this._x}function lbt(e){return e[1]}function cbt(e){return arguments.length?(this._y=e,this):this._y}function pQ(e,t,n){var r=new mQ(t??abt,n??lbt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function mQ(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Vfe(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var hu=pQ.prototype=mQ.prototype;hu.copy=function(){var e=new mQ(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Vfe(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Vfe(r));return e};hu.add=K1t;hu.addAll=X1t;hu.cover=Q1t;hu.data=J1t;hu.extent=Z1t;hu.find=ebt;hu.remove=tbt;hu.removeAll=nbt;hu.root=rbt;hu.size=ibt;hu.visit=sbt;hu.visitAfter=obt;hu.x=ubt;hu.y=cbt;function Ja(e){return function(){return e}}function d0(e){return(e()-.5)*1e-6}function fbt(e){return e.x+e.vx}function dbt(e){return e.y+e.vy}function hbt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Ja(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=pQ(t,fbt,dbt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,w,E,x,T){var C=b.data,A=b.r,k=m+A;if(C){if(C.index>d.index){var R=h-C.x-C.vx,O=p-C.y-C.vy,D=R*R+O*O;D<k*k&&(R===0&&(R=d0(r),D+=R*R),O===0&&(O=d0(r),D+=O*O),D=(k-(D=Math.sqrt(D)))/D*i,d.vx+=(R*=D)*(k=(A*=A)/(g+A)),d.vy+=(O*=D)*k,C.vx-=R*(k=1-k),C.vy-=O*k)}return}return w>h+k||x<h-k||E>p+k||T<p-k}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Ja(+l),u(),o):e},o}function pbt(e){return e.index}function Hfe(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function mbt(e){var t=pbt,n=f,r,i=Ja(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var b=0,w,E,x,T,C,A,k;b<v;++b)w=e[b],E=w.source,x=w.target,T=x.x+x.vx-E.x-E.vx||d0(l),C=x.y+x.vy-E.y-E.vy||d0(l),A=Math.sqrt(T*T+C*C),A=(A-s[b])/A*g*r[b],T*=A,C*=A,x.vx-=T*(k=u[b]),x.vy-=C*k,E.vx+=T*(k=1-k),E.vy+=C*k}function h(){if(o){var g,y=o.length,v=e.length,b=new Map(o.map((E,x)=>[t(E,x,o),E])),w;for(g=0,a=new Array(y);g<v;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=Hfe(b,w.source)),typeof w.target!="object"&&(w.target=Hfe(b,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)w=e[g],u[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:Ja(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Ja(+g),m(),d):i},d}const gbt=1664525,ybt=1013904223,qfe=4294967296;function vbt(){let e=1;return()=>(e=(gbt*e+ybt)%qfe)/qfe}function bbt(e){return e.x}function _bt(e){return e.y}var wbt=10,Ebt=Math.PI*(3-Math.sqrt(5));function xbt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=uQ(f),l=wF("tick","end"),c=vbt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var b=0;b<m;++b)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=wbt*Math.sqrt(.5+m),b=m*Ebt;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,b=e.length,w,E,x,T,C;for(y==null?y=1/0:y*=y,v=0;v<b;++v)T=e[v],w=m-T.x,E=g-T.y,x=w*w+E*E,x<y&&(C=T,y=x);return C},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function Sbt(){var e,t,n,r,i=Ja(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=pQ(e,bbt,_bt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,b,w;if(h.length){for(v=b=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,b+=g*m.y);h.x=v/y,h.y=b/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=g-p,w=y*y+v*v;if(b*b/u<w)return w<a&&(y===0&&(y=d0(n),w+=y*y),v===0&&(v=d0(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)),t.vx+=y*h.value*r/w,t.vy+=v*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(y===0&&(y=d0(n),w+=y*y),v===0&&(v=d0(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(b=s[h.data.index]*r/w,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Ja(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function Tbt(e){var t=Ja(.1),n,r,i;typeof e!="function"&&(e=Ja(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ja(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Ja(+a),o(),s):e},s}function Cbt(e){var t=Ja(.1),n,r,i;typeof e!="function"&&(e=Ja(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ja(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Ja(+a),o(),s):e},s}function Abt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function tM(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function ex(e){return e=tM(Math.abs(e)),e?e[1]:NaN}function Ibt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function kbt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Rbt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function lb(e){if(!(t=Rbt.exec(e)))throw new Error("invalid format: "+e);var t;return new gQ({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}lb.prototype=gQ.prototype;function gQ(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}gQ.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Nbt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var _2e;function Dbt(e,t){var n=tM(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(_2e=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+tM(e,Math.max(0,t+s-1))[0]}function Wfe(e,t){var n=tM(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Gfe={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Abt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Wfe(e*100,t),r:Wfe,s:Dbt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Yfe(e){return e}var Kfe=Array.prototype.map,Xfe=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function w2e(e){var t=e.grouping===void 0||e.thousands===void 0?Yfe:Ibt(Kfe.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Yfe:kbt(Kfe.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=lb(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,b=f.precision,w=f.trim,E=f.type;E==="n"?(v=!0,E="g"):Gfe[E]||(b===void 0&&(b=12),w=!0,E="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var x=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",T=m==="$"?r:/[%p]/.test(E)?o:"",C=Gfe[E],A=/[defgprs%]/.test(E);b=b===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function k(R){var O=x,D=T,$,F,L;if(E==="c")D=C(R)+D,R="";else{R=+R;var j=R<0||1/R<0;if(R=isNaN(R)?u:C(Math.abs(R),b),w&&(R=Nbt(R)),j&&+R==0&&p!=="+"&&(j=!1),O=(j?p==="("?p:a:p==="-"||p==="("?"":p)+O,D=(E==="s"?Xfe[8+_2e/3]:"")+D+(j&&p==="("?")":""),A){for($=-1,F=R.length;++$<F;)if(L=R.charCodeAt($),48>L||L>57){D=(L===46?i+R.slice($+1):R.slice($))+D,R=R.slice(0,$);break}}}v&&!g&&(R=t(R,1/0));var z=O.length+R.length+D.length,q=z<y?new Array(y-z+1).join(d):"";switch(v&&g&&(R=t(q+R,q.length?y-D.length:1/0),q=""),h){case"<":R=O+R+D+q;break;case"=":R=O+q+R+D;break;case"^":R=q.slice(0,z=q.length>>1)+O+R+D+q.slice(z);break;default:R=q+O+R+D;break}return s(R)}return k.toString=function(){return f+""},k}function c(f,d){var h=l((f=lb(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(ex(d)/3)))*3,m=Math.pow(10,-p),g=Xfe[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var hD,CS,yQ;Pbt({thousands:",",grouping:[3],currency:["$",""]});function Pbt(e){return hD=w2e(e),CS=hD.format,yQ=hD.formatPrefix,hD}function E2e(e){return Math.max(0,-ex(Math.abs(e)))}function x2e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ex(t)/3)))*3-ex(Math.abs(e)))}function S2e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ex(t)-ex(e))+1}var Ut=1e-6,nM=1e-12,On=Math.PI,Zi=On/2,rM=On/4,ou=On*2,as=180/On,Dn=On/180,Zn=Math.abs,AS=Math.atan,Gc=Math.atan2,Vt=Math.cos,pD=Math.ceil,T2e=Math.exp,yV=Math.hypot,iM=Math.log,B8=Math.pow,Bt=Math.sin,Oc=Math.sign||function(e){return e>0?1:e<0?-1:0},au=Math.sqrt,vQ=Math.tan;function C2e(e){return e>1?0:e<-1?On:Math.acos(e)}function nl(e){return e>1?Zi:e<-1?-Zi:Math.asin(e)}function Bo(){}function sM(e,t){e&&Jfe.hasOwnProperty(e.type)&&Jfe[e.type](e,t)}var Qfe={Feature:function(e,t){sM(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)sM(n[r].geometry,t)}},Jfe={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){vV(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)vV(n[r],t,0)},Polygon:function(e,t){Zfe(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Zfe(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)sM(n[r],t)}};function vV(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Zfe(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)vV(e[n],t,1);t.polygonEnd()}function Kp(e,t){e&&Qfe.hasOwnProperty(e.type)?Qfe[e.type](e,t):sM(e,t)}var oM=new tu,aM=new tu,A2e,I2e,bV,_V,wV,Mh={point:Bo,lineStart:Bo,lineEnd:Bo,polygonStart:function(){oM=new tu,Mh.lineStart=Obt,Mh.lineEnd=$bt},polygonEnd:function(){var e=+oM;aM.add(e<0?ou+e:e),this.lineStart=this.lineEnd=this.point=Bo},sphere:function(){aM.add(ou)}};function Obt(){Mh.point=Mbt}function $bt(){k2e(A2e,I2e)}function Mbt(e,t){Mh.point=k2e,A2e=e,I2e=t,e*=Dn,t*=Dn,bV=e,_V=Vt(t=t/2+rM),wV=Bt(t)}function k2e(e,t){e*=Dn,t*=Dn,t=t/2+rM;var n=e-bV,r=n>=0?1:-1,i=r*n,s=Vt(t),o=Bt(t),a=wV*o,u=_V*s+a*Vt(i),l=a*r*Bt(i);oM.add(Gc(l,u)),bV=e,_V=s,wV=o}function Lbt(e){return aM=new tu,Kp(e,Mh),aM*2}function uM(e){return[Gc(e[1],e[0]),nl(e[2])]}function cb(e){var t=e[0],n=e[1],r=Vt(n);return[r*Vt(t),r*Bt(t),Bt(n)]}function mD(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function tx(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function j8(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function gD(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function lM(e){var t=au(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Pi,Pu,qi,Cl,zv,R2e,N2e,oE,jA,Wg,jm,Hp={point:EV,lineStart:ede,lineEnd:tde,polygonStart:function(){Hp.point=P2e,Hp.lineStart=Fbt,Hp.lineEnd=Bbt,jA=new tu,Mh.polygonStart()},polygonEnd:function(){Mh.polygonEnd(),Hp.point=EV,Hp.lineStart=ede,Hp.lineEnd=tde,oM<0?(Pi=-(qi=180),Pu=-(Cl=90)):jA>Ut?Cl=90:jA<-Ut&&(Pu=-90),jm[0]=Pi,jm[1]=qi},sphere:function(){Pi=-(qi=180),Pu=-(Cl=90)}};function EV(e,t){Wg.push(jm=[Pi=e,qi=e]),t<Pu&&(Pu=t),t>Cl&&(Cl=t)}function D2e(e,t){var n=cb([e*Dn,t*Dn]);if(oE){var r=tx(oE,n),i=[r[1],-r[0],0],s=tx(i,r);lM(s),s=uM(s);var o=e-zv,a=o>0?1:-1,u=s[0]*as*a,l,c=Zn(o)>180;c^(a*zv<u&&u<a*e)?(l=s[1]*as,l>Cl&&(Cl=l)):(u=(u+360)%360-180,c^(a*zv<u&&u<a*e)?(l=-s[1]*as,l<Pu&&(Pu=l)):(t<Pu&&(Pu=t),t>Cl&&(Cl=t))),c?e<zv?Sl(Pi,e)>Sl(Pi,qi)&&(qi=e):Sl(e,qi)>Sl(Pi,qi)&&(Pi=e):qi>=Pi?(e<Pi&&(Pi=e),e>qi&&(qi=e)):e>zv?Sl(Pi,e)>Sl(Pi,qi)&&(qi=e):Sl(e,qi)>Sl(Pi,qi)&&(Pi=e)}else Wg.push(jm=[Pi=e,qi=e]);t<Pu&&(Pu=t),t>Cl&&(Cl=t),oE=n,zv=e}function ede(){Hp.point=D2e}function tde(){jm[0]=Pi,jm[1]=qi,Hp.point=EV,oE=null}function P2e(e,t){if(oE){var n=e-zv;jA.add(Zn(n)>180?n+(n>0?360:-360):n)}else R2e=e,N2e=t;Mh.point(e,t),D2e(e,t)}function Fbt(){Mh.lineStart()}function Bbt(){P2e(R2e,N2e),Mh.lineEnd(),Zn(jA)>Ut&&(Pi=-(qi=180)),jm[0]=Pi,jm[1]=qi,oE=null}function Sl(e,t){return(t-=e)<0?t+360:t}function jbt(e,t){return e[0]-t[0]}function nde(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Ubt(e){var t,n,r,i,s,o,a;if(Cl=qi=-(Pi=Pu=1/0),Wg=[],Kp(e,Hp),n=Wg.length){for(Wg.sort(jbt),t=1,r=Wg[0],s=[r];t<n;++t)i=Wg[t],nde(r,i[0])||nde(r,i[1])?(Sl(r[0],i[1])>Sl(r[0],r[1])&&(r[1]=i[1]),Sl(i[0],r[1])>Sl(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=Sl(r[1],i[0]))>o&&(o=a,Pi=i[0],qi=r[1])}return Wg=jm=null,Pi===1/0||Pu===1/0?[[NaN,NaN],[NaN,NaN]]:[[Pi,Pu],[qi,Cl]]}var LC,cM,fM,dM,hM,pM,mM,gM,xV,SV,TV,O2e,$2e,Ga,Ya,Ka,Vf={sphere:Bo,point:bQ,lineStart:rde,lineEnd:ide,polygonStart:function(){Vf.lineStart=Hbt,Vf.lineEnd=qbt},polygonEnd:function(){Vf.lineStart=rde,Vf.lineEnd=ide}};function bQ(e,t){e*=Dn,t*=Dn;var n=Vt(t);Yk(n*Vt(e),n*Bt(e),Bt(t))}function Yk(e,t,n){++LC,fM+=(e-fM)/LC,dM+=(t-dM)/LC,hM+=(n-hM)/LC}function rde(){Vf.point=zbt}function zbt(e,t){e*=Dn,t*=Dn;var n=Vt(t);Ga=n*Vt(e),Ya=n*Bt(e),Ka=Bt(t),Vf.point=Vbt,Yk(Ga,Ya,Ka)}function Vbt(e,t){e*=Dn,t*=Dn;var n=Vt(t),r=n*Vt(e),i=n*Bt(e),s=Bt(t),o=Gc(au((o=Ya*s-Ka*i)*o+(o=Ka*r-Ga*s)*o+(o=Ga*i-Ya*r)*o),Ga*r+Ya*i+Ka*s);cM+=o,pM+=o*(Ga+(Ga=r)),mM+=o*(Ya+(Ya=i)),gM+=o*(Ka+(Ka=s)),Yk(Ga,Ya,Ka)}function ide(){Vf.point=bQ}function Hbt(){Vf.point=Wbt}function qbt(){M2e(O2e,$2e),Vf.point=bQ}function Wbt(e,t){O2e=e,$2e=t,e*=Dn,t*=Dn,Vf.point=M2e;var n=Vt(t);Ga=n*Vt(e),Ya=n*Bt(e),Ka=Bt(t),Yk(Ga,Ya,Ka)}function M2e(e,t){e*=Dn,t*=Dn;var n=Vt(t),r=n*Vt(e),i=n*Bt(e),s=Bt(t),o=Ya*s-Ka*i,a=Ka*r-Ga*s,u=Ga*i-Ya*r,l=yV(o,a,u),c=nl(l),f=l&&-c/l;xV.add(f*o),SV.add(f*a),TV.add(f*u),cM+=c,pM+=c*(Ga+(Ga=r)),mM+=c*(Ya+(Ya=i)),gM+=c*(Ka+(Ka=s)),Yk(Ga,Ya,Ka)}function Gbt(e){LC=cM=fM=dM=hM=pM=mM=gM=0,xV=new tu,SV=new tu,TV=new tu,Kp(e,Vf);var t=+xV,n=+SV,r=+TV,i=yV(t,n,r);return i<nM&&(t=pM,n=mM,r=gM,cM<Ut&&(t=fM,n=dM,r=hM),i=yV(t,n,r),i<nM)?[NaN,NaN]:[Gc(n,t)*as,nl(r/i)*as]}function CV(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function AV(e,t){return Zn(e)>On&&(e-=Math.round(e/ou)*ou),[e,t]}AV.invert=AV;function L2e(e,t,n){return(e%=ou)?t||n?CV(ode(e),ade(t,n)):ode(e):t||n?ade(t,n):AV}function sde(e){return function(t,n){return t+=e,Zn(t)>On&&(t-=Math.round(t/ou)*ou),[t,n]}}function ode(e){var t=sde(e);return t.invert=sde(-e),t}function ade(e,t){var n=Vt(e),r=Bt(e),i=Vt(t),s=Bt(t);function o(a,u){var l=Vt(u),c=Vt(a)*l,f=Bt(a)*l,d=Bt(u),h=d*n+c*r;return[Gc(f*i-h*s,c*n-d*r),nl(h*i+f*s)]}return o.invert=function(a,u){var l=Vt(u),c=Vt(a)*l,f=Bt(a)*l,d=Bt(u),h=d*i-f*s;return[Gc(f*i+d*s,c*n+h*r),nl(h*n-c*r)]},o}function Ybt(e){e=L2e(e[0]*Dn,e[1]*Dn,e.length>2?e[2]*Dn:0);function t(n){return n=e(n[0]*Dn,n[1]*Dn),n[0]*=as,n[1]*=as,n}return t.invert=function(n){return n=e.invert(n[0]*Dn,n[1]*Dn),n[0]*=as,n[1]*=as,n},t}function Kbt(e,t,n,r,i,s){if(n){var o=Vt(t),a=Bt(t),u=r*n;i==null?(i=t+r*ou,s=t-u/2):(i=ude(o,i),s=ude(o,s),(r>0?i<s:i>s)&&(i+=r*ou));for(var l,c=i;r>0?c>s:c<s;c-=u)l=uM([o,-a*Vt(c),-a*Bt(c)]),e.point(l[0],l[1])}}function ude(e,t){t=cb(t),t[0]-=e,lM(t);var n=C2e(-t[1]);return((-t[2]<0?-n:n)+ou-Ut)%ou}function F2e(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Bo,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function GP(e,t){return Zn(e[0]-t[0])<Ut&&Zn(e[1]-t[1])<Ut}function yD(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function B2e(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(GP(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*Ut}s.push(v=new yD(g,p,null,!0)),o.push(v.o=new yD(g,null,v,!1)),s.push(v=new yD(y,p,null,!1)),o.push(v.o=new yD(y,null,v,!0))}}),!!s.length){for(o.sort(t),lde(s),lde(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function lde(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function U8(e){return Zn(e[0])<=On?e[0]:Oc(e[0])*((Zn(e[0])+On)%ou-On)}function Xbt(e,t){var n=U8(t),r=t[1],i=Bt(r),s=[Bt(n),-Vt(n),0],o=0,a=0,u=new tu;i===1?r=Zi+Ut:i===-1&&(r=-Zi-Ut);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=U8(h),m=h[1]/2+rM,g=Bt(m),y=Vt(m),v=0;v<d;++v,p=w,g=x,y=T,h=b){var b=f[v],w=U8(b),E=b[1]/2+rM,x=Bt(E),T=Vt(E),C=w-p,A=C>=0?1:-1,k=A*C,R=k>On,O=g*x;if(u.add(Gc(O*A*Bt(k),y*T+O*Vt(k))),o+=R?C+A*ou:C,R^p>=n^w>=n){var D=tx(cb(h),cb(b));lM(D);var $=tx(s,D);lM($);var F=(R^C>=0?-1:1)*nl($[2]);(r>F||r===F&&(D[0]||D[1]))&&(a+=R^C>=0?1:-1)}}return(o<-Ut||o<Ut&&u<-nM)^a&1}function j2e(e,t,n,r){return function(i){var s=t(i),o=F2e(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=xAe(c);var w=Xbt(l,r);c.length?(u||(i.polygonStart(),u=!0),B2e(c,Jbt,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,E){e(w,E)&&i.point(w,E)}function p(w,E){s.point(w,E)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(w,E){f.push([w,E]),a.point(w,E)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),E=o.result(),x,T=E.length,C,A,k;if(f.pop(),l.push(f),f=null,!!T){if(w&1){if(A=E[0],(C=A.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),x=0;x<C;++x)i.point((k=A[x])[0],k[1]);i.lineEnd()}return}T>1&&w&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(Qbt))}}return d}}function Qbt(e){return e.length>1}function Jbt(e,t){return((e=e.x)[0]<0?e[1]-Zi-Ut:Zi-e[1])-((t=t.x)[0]<0?t[1]-Zi-Ut:Zi-t[1])}const cde=j2e(function(){return!0},Zbt,t_t,[-On,-Zi]);function Zbt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?On:-On,u=Zn(s-t);Zn(u-On)<Ut?(e.point(t,n=(n+o)/2>0?Zi:-Zi),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=On&&(Zn(t-r)<Ut&&(t-=r*Ut),Zn(s-a)<Ut&&(s-=a*Ut),n=e_t(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function e_t(e,t,n,r){var i,s,o=Bt(e-n);return Zn(o)>Ut?AS((Bt(t)*(s=Vt(r))*Bt(n)-Bt(r)*(i=Vt(t))*Bt(e))/(i*s*o)):(t+r)/2}function t_t(e,t,n,r){var i;if(e==null)i=n*Zi,r.point(-On,i),r.point(0,i),r.point(On,i),r.point(On,0),r.point(On,-i),r.point(0,-i),r.point(-On,-i),r.point(-On,0),r.point(-On,i);else if(Zn(e[0]-t[0])>Ut){var s=e[0]<t[0]?On:-On;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function n_t(e){var t=Vt(e),n=2*Dn,r=t>0,i=Zn(t)>Ut;function s(c,f,d,h){Kbt(h,e,n,d,c,f)}function o(c,f){return Vt(c)*Vt(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],b,w=o(g,y),E=r?w?0:l(g,y):w?l(g+(g<0?On:-On),y):0;if(!f&&(p=h=w)&&c.lineStart(),w!==h&&(b=u(f,v),(!b||GP(f,b)||GP(v,b))&&(v[2]=1)),w!==h)m=0,w?(c.lineStart(),b=u(v,f),c.point(b[0],b[1])):(b=u(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^w){var x;!(E&d)&&(x=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(x[0][0],x[0][1]),c.point(x[1][0],x[1][1]),c.lineEnd()):(c.point(x[1][0],x[1][1]),c.lineEnd(),c.lineStart(),c.point(x[0][0],x[0][1],3)))}w&&(!f||!GP(f,v))&&c.point(v[0],v[1]),f=v,h=w,d=E},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=cb(c),p=cb(f),m=[1,0,0],g=tx(h,p),y=mD(g,g),v=g[0],b=y-v*v;if(!b)return!d&&c;var w=t*y/b,E=-t*v/b,x=tx(m,g),T=gD(m,w),C=gD(g,E);j8(T,C);var A=x,k=mD(T,A),R=mD(A,A),O=k*k-R*(mD(T,T)-1);if(!(O<0)){var D=au(O),$=gD(A,(-k-D)/R);if(j8($,T),$=uM($),!d)return $;var F=c[0],L=f[0],j=c[1],z=f[1],q;L<F&&(q=F,F=L,L=q);var P=L-F,U=Zn(P-On)<Ut,W=U||P<Ut;if(!U&&z<j&&(q=j,j=z,z=q),W?U?j+z>0^$[1]<(Zn($[0]-F)<Ut?j:z):j<=$[1]&&$[1]<=z:P>On^(F<=$[0]&&$[0]<=L)){var B=gD(A,(-k+D)/R);return j8(B,T),[$,uM(B)]}}}function l(c,f){var d=r?e:On-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return j2e(o,a,s,r?[0,-e]:[-On,e-On])}function r_t(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var FC=1e9,vD=-FC;function U2e(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Zn(l[0]-e)<Ut?c>0?0:3:Zn(l[0]-n)<Ut?c>0?2:1:Zn(l[1]-t)<Ut?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=F2e(),d,h,p,m,g,y,v,b,w,E,x,T={point:C,lineStart:O,lineEnd:D,polygonStart:k,polygonEnd:R};function C(F,L){i(F,L)&&c.point(F,L)}function A(){for(var F=0,L=0,j=h.length;L<j;++L)for(var z=h[L],q=1,P=z.length,U=z[0],W,B,H=U[0],G=U[1];q<P;++q)W=H,B=G,U=z[q],H=U[0],G=U[1],B<=r?G>r&&(H-W)*(r-B)>(G-B)*(e-W)&&++F:G<=r&&(H-W)*(r-B)<(G-B)*(e-W)&&--F;return F}function k(){c=f,d=[],h=[],x=!0}function R(){var F=A(),L=x&&F,j=(d=xAe(d)).length;(L||j)&&(l.polygonStart(),L&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),j&&B2e(d,a,F,s,l),l.polygonEnd()),c=l,d=h=p=null}function O(){T.point=$,h&&h.push(p=[]),E=!0,w=!1,v=b=NaN}function D(){d&&($(m,g),y&&w&&f.rejoin(),d.push(f.result())),T.point=C,w&&c.lineEnd()}function $(F,L){var j=i(F,L);if(h&&p.push([F,L]),E)m=F,g=L,y=j,E=!1,j&&(c.lineStart(),c.point(F,L));else if(j&&w)c.point(F,L);else{var z=[v=Math.max(vD,Math.min(FC,v)),b=Math.max(vD,Math.min(FC,b))],q=[F=Math.max(vD,Math.min(FC,F)),L=Math.max(vD,Math.min(FC,L))];r_t(z,q,e,t,n,r)?(w||(c.lineStart(),c.point(z[0],z[1])),c.point(q[0],q[1]),j||c.lineEnd(),x=!1):j&&(c.lineStart(),c.point(F,L),x=!1)}v=F,b=L,w=j}return T}}function fde(e,t,n){var r=Uu(e,t-Ut,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function dde(e,t,n){var r=Uu(e,t-Ut,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function i_t(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Uu(pD(r/c)*c,n,c).map(p).concat(Uu(pD(a/f)*f,o,f).map(m)).concat(Uu(pD(t/u)*u,e,u).filter(function(b){return Zn(b%c)>Ut}).map(d)).concat(Uu(pD(s/l)*l,i,l).filter(function(b){return Zn(b%f)>Ut}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(g)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(u=+b[0],l=+b[1],y):[u,l]},y.precision=function(b){return arguments.length?(g=+b,d=fde(s,i,90),h=dde(t,e,g),p=fde(a,o,90),m=dde(r,n,g),y):g},y.extentMajor([[-180,-90+Ut],[180,90-Ut]]).extentMinor([[-180,-80-Ut],[180,80+Ut]])}const dI=e=>e;var z8=new tu,IV=new tu,z2e,V2e,kV,RV,Xp={point:Bo,lineStart:Bo,lineEnd:Bo,polygonStart:function(){Xp.lineStart=s_t,Xp.lineEnd=a_t},polygonEnd:function(){Xp.lineStart=Xp.lineEnd=Xp.point=Bo,z8.add(Zn(IV)),IV=new tu},result:function(){var e=z8/2;return z8=new tu,e}};function s_t(){Xp.point=o_t}function o_t(e,t){Xp.point=H2e,z2e=kV=e,V2e=RV=t}function H2e(e,t){IV.add(RV*e-kV*t),kV=e,RV=t}function a_t(){H2e(z2e,V2e)}var nx=1/0,yM=nx,hI=-nx,vM=hI,bM={point:u_t,lineStart:Bo,lineEnd:Bo,polygonStart:Bo,polygonEnd:Bo,result:function(){var e=[[nx,yM],[hI,vM]];return hI=vM=-(yM=nx=1/0),e}};function u_t(e,t){e<nx&&(nx=e),e>hI&&(hI=e),t<yM&&(yM=t),t>vM&&(vM=t)}var NV=0,DV=0,BC=0,_M=0,wM=0,Pw=0,PV=0,OV=0,jC=0,q2e,W2e,Zd,eh,Rc={point:fb,lineStart:hde,lineEnd:pde,polygonStart:function(){Rc.lineStart=f_t,Rc.lineEnd=d_t},polygonEnd:function(){Rc.point=fb,Rc.lineStart=hde,Rc.lineEnd=pde},result:function(){var e=jC?[PV/jC,OV/jC]:Pw?[_M/Pw,wM/Pw]:BC?[NV/BC,DV/BC]:[NaN,NaN];return NV=DV=BC=_M=wM=Pw=PV=OV=jC=0,e}};function fb(e,t){NV+=e,DV+=t,++BC}function hde(){Rc.point=l_t}function l_t(e,t){Rc.point=c_t,fb(Zd=e,eh=t)}function c_t(e,t){var n=e-Zd,r=t-eh,i=au(n*n+r*r);_M+=i*(Zd+e)/2,wM+=i*(eh+t)/2,Pw+=i,fb(Zd=e,eh=t)}function pde(){Rc.point=fb}function f_t(){Rc.point=h_t}function d_t(){G2e(q2e,W2e)}function h_t(e,t){Rc.point=G2e,fb(q2e=Zd=e,W2e=eh=t)}function G2e(e,t){var n=e-Zd,r=t-eh,i=au(n*n+r*r);_M+=i*(Zd+e)/2,wM+=i*(eh+t)/2,Pw+=i,i=eh*e-Zd*t,PV+=i*(Zd+e),OV+=i*(eh+t),jC+=i*3,fb(Zd=e,eh=t)}function Y2e(e){this._context=e}Y2e.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,ou);break}}},result:Bo};var $V=new tu,V8,K2e,X2e,UC,zC,pI={point:Bo,lineStart:function(){pI.point=p_t},lineEnd:function(){V8&&Q2e(K2e,X2e),pI.point=Bo},polygonStart:function(){V8=!0},polygonEnd:function(){V8=null},result:function(){var e=+$V;return $V=new tu,e}};function p_t(e,t){pI.point=Q2e,K2e=UC=e,X2e=zC=t}function Q2e(e,t){UC-=e,zC-=t,$V.add(au(UC*UC+zC*zC)),UC=e,zC=t}let mde,EM,gde,yde;class vde{constructor(t){this._append=t==null?J2e:m_t(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==gde||this._append!==EM){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,gde=r,EM=this._append,yde=this._,this._=i}this._+=yde;break}}}result(){const t=this._;return this._="",t.length?t:null}}function J2e(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function m_t(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return J2e;if(t!==mde){const n=10**t;mde=t,EM=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return EM}function Z2e(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Kp(a,i(s))),s.result()}return o.area=function(a){return Kp(a,i(Xp)),Xp.result()},o.measure=function(a){return Kp(a,i(pI)),pI.result()},o.bounds=function(a){return Kp(a,i(bM)),bM.result()},o.centroid=function(a){return Kp(a,i(Rc)),Rc.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,dI):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new vde(n)):new Y2e(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new vde(n)),o},o.projection(e).digits(n).context(t)}function RF(e){return function(t){var n=new MV;for(var r in e)n[r]=e[r];return n.stream=t,n}}function MV(){}MV.prototype={constructor:MV,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function _Q(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Kp(n,e.stream(bM)),t(bM.result()),r!=null&&e.clipExtent(r),e}function NF(e,t,n){return _Q(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function wQ(e,t,n){return NF(e,[[0,0],t],n)}function EQ(e,t,n){return _Q(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function xQ(e,t,n){return _Q(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var bde=16,g_t=Vt(30*Dn);function _de(e,t){return+t?v_t(e,t):y_t(e)}function y_t(e){return RF({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function v_t(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var w=o+d,E=a+h,x=u+p,T=au(w*w+E*E+x*x),C=nl(x/=T),A=Zn(Zn(x)-1)<Ut||Zn(s-f)<Ut?(s+f)/2:Gc(E,w),k=e(A,C),R=k[0],O=k[1],D=R-r,$=O-i,F=v*D-y*$;(F*F/b>t||Zn((y*D+v*$)/b-.5)>.3||o*d+a*h+u*p<g_t)&&(n(r,i,s,o,a,u,R,O,A,w/=T,E/=T,x,m,g),g.point(R,O),n(R,O,A,w,E,x,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=E},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(C,A){C=e(C,A),r.point(C[0],C[1])}function v(){f=NaN,g.point=b,r.lineStart()}function b(C,A){var k=cb([C,A]),R=e(C,A);n(f,d,c,h,p,m,f=R[0],d=R[1],c=C,h=k[0],p=k[1],m=k[2],bde,r),r.point(f,d)}function w(){g.point=y,r.lineEnd()}function E(){v(),g.point=x,g.lineEnd=T}function x(C,A){b(i=C,A),s=f,o=d,a=h,u=p,l=m,g.point=b}function T(){n(f,d,c,h,p,m,s,o,i,a,u,l,bde,r),g.lineEnd=w,w()}return g}}var b_t=RF({point:function(e,t){this.stream.point(e*Dn,t*Dn)}});function __t(e){return RF({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function w_t(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function wde(e,t,n,r,i,s){if(!s)return w_t(e,t,n,r,i);var o=Vt(s),a=Bt(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function lp(e){return eIe(function(){return e})()}function eIe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=cde,g=null,y,v,b,w=dI,E=.5,x,T,C,A,k;function R(F){return C(F[0]*Dn,F[1]*Dn)}function O(F){return F=C.invert(F[0],F[1]),F&&[F[0]*as,F[1]*as]}R.stream=function(F){return A&&k===F?A:A=b_t(__t(c)(m(x(w(k=F)))))},R.preclip=function(F){return arguments.length?(m=F,p=void 0,$()):m},R.postclip=function(F){return arguments.length?(w=F,g=y=v=b=null,$()):w},R.clipAngle=function(F){return arguments.length?(m=+F?n_t(p=F*Dn):(p=null,cde),$()):p*as},R.clipExtent=function(F){return arguments.length?(w=F==null?(g=y=v=b=null,dI):U2e(g=+F[0][0],y=+F[0][1],v=+F[1][0],b=+F[1][1]),$()):g==null?null:[[g,y],[v,b]]},R.scale=function(F){return arguments.length?(n=+F,D()):n},R.translate=function(F){return arguments.length?(r=+F[0],i=+F[1],D()):[r,i]},R.center=function(F){return arguments.length?(s=F[0]%360*Dn,o=F[1]%360*Dn,D()):[s*as,o*as]},R.rotate=function(F){return arguments.length?(a=F[0]%360*Dn,u=F[1]%360*Dn,l=F.length>2?F[2]%360*Dn:0,D()):[a*as,u*as,l*as]},R.angle=function(F){return arguments.length?(f=F%360*Dn,D()):f*as},R.reflectX=function(F){return arguments.length?(d=F?-1:1,D()):d<0},R.reflectY=function(F){return arguments.length?(h=F?-1:1,D()):h<0},R.precision=function(F){return arguments.length?(x=_de(T,E=F*F),$()):au(E)},R.fitExtent=function(F,L){return NF(R,F,L)},R.fitSize=function(F,L){return wQ(R,F,L)},R.fitWidth=function(F,L){return EQ(R,F,L)},R.fitHeight=function(F,L){return xQ(R,F,L)};function D(){var F=wde(n,0,0,d,h,f).apply(null,t(s,o)),L=wde(n,r-F[0],i-F[1],d,h,f);return c=L2e(a,u,l),T=CV(t,L),C=CV(c,T),x=_de(T,E),$()}function $(){return A=k=null,R}return function(){return t=e.apply(this,arguments),R.invert=t.invert&&O,D()}}function SQ(e){var t=0,n=On/3,r=eIe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Dn,n=s[1]*Dn):[t*as,n*as]},i}function E_t(e){var t=Vt(e);function n(r,i){return[r*t,Bt(i)/t]}return n.invert=function(r,i){return[r/t,nl(i*t)]},n}function x_t(e,t){var n=Bt(e),r=(n+Bt(t))/2;if(Zn(r)<Ut)return E_t(e);var i=1+n*(2*r-n),s=au(i)/r;function o(a,u){var l=au(i-2*r*Bt(u))/r;return[l*Bt(a*=r),s-l*Vt(a)]}return o.invert=function(a,u){var l=s-u,c=Gc(a,Zn(l))*Oc(l);return l*r<0&&(c-=On*Oc(a)*Oc(l)),[c/r,nl((i-(a*a+l*l)*r*r)/(2*r))]},o}function xM(){return SQ(x_t).scale(155.424).center([0,33.6442])}function tIe(){return xM().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function S_t(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function T_t(){var e,t,n=tIe(),r,i=xM().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=xM().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=S_t([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Ut,m+.12*h+Ut],[p-.214*h-Ut,m+.234*h-Ut]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Ut,m+.166*h+Ut],[p-.115*h-Ut,m+.234*h-Ut]]).stream(l),f()},c.fitExtent=function(d,h){return NF(c,d,h)},c.fitSize=function(d,h){return wQ(c,d,h)},c.fitWidth=function(d,h){return EQ(c,d,h)},c.fitHeight=function(d,h){return xQ(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function nIe(e){return function(t,n){var r=Vt(t),i=Vt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Bt(t),s*Bt(n)]}}function Kk(e){return function(t,n){var r=au(t*t+n*n),i=e(r),s=Bt(i),o=Vt(i);return[Gc(t*s,r*o),nl(r&&n*s/r)]}}var rIe=nIe(function(e){return au(2/(1+e))});rIe.invert=Kk(function(e){return 2*nl(e/2)});function C_t(){return lp(rIe).scale(124.75).clipAngle(180-.001)}var iIe=nIe(function(e){return(e=C2e(e))&&e/Bt(e)});iIe.invert=Kk(function(e){return e});function A_t(){return lp(iIe).scale(79.4188).clipAngle(180-.001)}function DF(e,t){return[e,iM(vQ((Zi+t)/2))]}DF.invert=function(e,t){return[e,2*AS(T2e(t))-Zi]};function I_t(){return sIe(DF).scale(961/ou)}function sIe(e){var t=lp(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=On*r(),d=t(Ybt(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===DF?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function bD(e){return vQ((Zi+e)/2)}function k_t(e,t){var n=Vt(e),r=e===t?Bt(e):iM(n/Vt(t))/iM(bD(t)/bD(e)),i=n*B8(bD(e),r)/r;if(!r)return DF;function s(o,a){i>0?a<-Zi+Ut&&(a=-Zi+Ut):a>Zi-Ut&&(a=Zi-Ut);var u=i/B8(bD(a),r);return[u*Bt(r*o),i-u*Vt(r*o)]}return s.invert=function(o,a){var u=i-a,l=Oc(r)*au(o*o+u*u),c=Gc(o,Zn(u))*Oc(u);return u*r<0&&(c-=On*Oc(o)*Oc(u)),[c/r,2*AS(B8(i/l,1/r))-Zi]},s}function R_t(){return SQ(k_t).scale(109.5).parallels([30,30])}function SM(e,t){return[e,t]}SM.invert=SM;function N_t(){return lp(SM).scale(152.63)}function D_t(e,t){var n=Vt(e),r=e===t?Bt(e):(n-Vt(t))/(t-e),i=n/r+e;if(Zn(r)<Ut)return SM;function s(o,a){var u=i-a,l=r*o;return[u*Bt(l),i-u*Vt(l)]}return s.invert=function(o,a){var u=i-a,l=Gc(o,Zn(u))*Oc(u);return u*r<0&&(l-=On*Oc(o)*Oc(u)),[l/r,i-Oc(r)*au(o*o+u*u)]},s}function P_t(){return SQ(D_t).scale(131.154).center([0,13.9389])}var UA=1.340264,zA=-.081106,VA=893e-6,HA=.003796,TM=au(3)/2,O_t=12;function oIe(e,t){var n=nl(TM*Bt(t)),r=n*n,i=r*r*r;return[e*Vt(n)/(TM*(UA+3*zA*r+i*(7*VA+9*HA*r))),n*(UA+zA*r+i*(VA+HA*r))]}oIe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<O_t&&(a=n*(UA+zA*r+i*(VA+HA*r))-t,u=UA+3*zA*r+i*(7*VA+9*HA*r),n-=o=a/u,r=n*n,i=r*r*r,!(Zn(o)<nM));++s);return[TM*e*(UA+3*zA*r+i*(7*VA+9*HA*r))/Vt(n),nl(Bt(n)/TM)]};function $_t(){return lp(oIe).scale(177.158)}function aIe(e,t){var n=Vt(t),r=Vt(e)*n;return[n*Bt(e)/r,Bt(t)/r]}aIe.invert=Kk(AS);function M_t(){return lp(aIe).scale(144.049).clipAngle(60)}function L_t(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=RF({point:function(w,E){var x=b([w,E]);this.stream.point(x[0],x[1])}}),m=dI,g,y;function v(){return d=e*r,h=e*i,g=y=null,b}function b(w){var E=w[0]*d,x=w[1]*h;if(s){var T=x*o-E*a;E=E*o+x*a,x=T}return[E+t,x+n]}return b.invert=function(w){var E=w[0]-t,x=w[1]-n;if(s){var T=x*o+E*a;E=E*o-x*a,x=T}return[E/d,x/h]},b.stream=function(w){return g&&y===w?g:g=p(m(y=w))},b.postclip=function(w){return arguments.length?(m=w,u=l=c=f=null,v()):m},b.clipExtent=function(w){return arguments.length?(m=w==null?(u=l=c=f=null,dI):U2e(u=+w[0][0],l=+w[0][1],c=+w[1][0],f=+w[1][1]),v()):u==null?null:[[u,l],[c,f]]},b.scale=function(w){return arguments.length?(e=+w,v()):e},b.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],v()):[t,n]},b.angle=function(w){return arguments.length?(s=w%360*Dn,a=Bt(s),o=Vt(s),v()):s*as},b.reflectX=function(w){return arguments.length?(r=w?-1:1,v()):r<0},b.reflectY=function(w){return arguments.length?(i=w?-1:1,v()):i<0},b.fitExtent=function(w,E){return NF(b,w,E)},b.fitSize=function(w,E){return wQ(b,w,E)},b.fitWidth=function(w,E){return EQ(b,w,E)},b.fitHeight=function(w,E){return xQ(b,w,E)},b}function uIe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}uIe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Zn(i)>Ut&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function F_t(){return lp(uIe).scale(175.295)}function lIe(e,t){return[Vt(t)*Bt(e),Bt(t)]}lIe.invert=Kk(nl);function B_t(){return lp(lIe).scale(249.5).clipAngle(90+Ut)}function cIe(e,t){var n=Vt(t),r=1+Vt(e)*n;return[n*Bt(e)/r,Bt(t)/r]}cIe.invert=Kk(function(e){return 2*AS(e)});function j_t(){return lp(cIe).scale(250).clipAngle(142)}function fIe(e,t){return[iM(vQ((Zi+t)/2)),-e]}fIe.invert=function(e,t){return[-t,2*AS(T2e(e))-Zi]};function U_t(){var e=sIe(fIe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function z_t(e,t){return e.parent===t.parent?1:2}function V_t(e){return e.reduce(H_t,0)/e.length}function H_t(e,t){return e+t.x}function q_t(e){return 1+e.reduce(W_t,0)}function W_t(e,t){return Math.max(e,t.y)}function G_t(e){for(var t;t=e.children;)e=t[0];return e}function Y_t(e){for(var t;t=e.children;)e=t[t.length-1];return e}function K_t(){var e=z_t,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=V_t(h),d.y=q_t(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=G_t(s),l=Y_t(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function X_t(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Q_t(){return this.eachAfter(X_t)}function J_t(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Z_t(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function ewt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function twt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function nwt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function rwt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function iwt(e){for(var t=this,n=swt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function swt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function owt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function awt(){return Array.from(this)}function uwt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function lwt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*cwt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function PF(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=hwt)):t===void 0&&(t=dwt);for(var n=new rx(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new rx(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(dIe)}function fwt(){return PF(this).eachBefore(pwt)}function dwt(e){return e.children}function hwt(e){return Array.isArray(e)?e[1]:null}function pwt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function dIe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function rx(e){this.data=e,this.depth=this.height=0,this.parent=null}rx.prototype=PF.prototype={constructor:rx,count:Q_t,each:J_t,eachAfter:ewt,eachBefore:Z_t,find:twt,sum:nwt,sort:rwt,path:iwt,ancestors:owt,descendants:awt,leaves:uwt,links:lwt,copy:fwt,[Symbol.iterator]:cwt};function YP(e){return e==null?null:hIe(e)}function hIe(e){if(typeof e!="function")throw new Error;return e}function n1(){return 0}function aw(e){return function(){return e}}const mwt=1664525,gwt=1013904223,Ede=4294967296;function ywt(){let e=1;return()=>(e=(mwt*e+gwt)%Ede)/Ede}function vwt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function bwt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function _wt(e,t){for(var n=0,r=(e=bwt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&pIe(o,s)?++n:(o=Ewt(i=wwt(i,s)),n=0);return o}function wwt(e,t){var n,r;if(H8(t,e))return[t];for(n=0;n<e.length;++n)if(_D(t,e[n])&&H8(VC(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(_D(VC(e[n],e[r]),t)&&_D(VC(e[n],t),e[r])&&_D(VC(e[r],t),e[n])&&H8(mIe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function _D(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function pIe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function H8(e,t){for(var n=0;n<t.length;++n)if(!pIe(e,t[n]))return!1;return!0}function Ewt(e){switch(e.length){case 1:return xwt(e[0]);case 2:return VC(e[0],e[1]);case 3:return mIe(e[0],e[1],e[2])}}function xwt(e){return{x:e.x,y:e.y,r:e.r}}function VC(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function mIe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,b=v-o*o-a*a+u*u,w=v-l*l-c*c+f*f,E=h*p-d*m,x=(p*w-m*b)/(E*2)-r,T=(m*g-p*y)/E,C=(h*b-d*w)/(E*2)-i,A=(d*y-h*g)/E,k=T*T+A*A-1,R=2*(s+x*T+C*A),O=x*x+C*C-s*s,D=-(Math.abs(k)>1e-6?(R+Math.sqrt(R*R-4*k*O))/(2*k):O/R);return{x:r+x+T*D,y:i+C+A*D,r:D}}function xde(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function Sde(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Tde(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function wD(e){this._=e,this.next=null,this.previous=null}function Swt(e,t){if(!(s=(e=vwt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;xde(r,n,i=e[2]),n=new wD(n),r=new wD(r),i=new wD(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){xde(n._,r._,i=e[u]),i=new wD(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(Sde(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(Sde(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=Tde(n);(i=i.next)!==r;)(a=Tde(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=_wt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function Twt(e){return Math.sqrt(e.value)}function gIe(){var e=null,t=1,n=1,r=n1;function i(s){const o=ywt();return s.x=t/2,s.y=n/2,e?s.eachBefore(Cde(e)).eachAfter(q8(r,.5,o)).eachBefore(Ade(1)):s.eachBefore(Cde(Twt)).eachAfter(q8(n1,1,o)).eachAfter(q8(r,s.r/Math.min(t,n),o)).eachBefore(Ade(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=YP(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:aw(+s),i):r},i}function Cde(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function q8(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=Swt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function Ade(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function yIe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Xk(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function Cwt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(yIe),o}function s(o,a){return function(u){u.children&&Xk(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var Awt={depth:-1},Ide={},W8={};function Iwt(e){return e.id}function kwt(e){return e.parentId}function kde(){var e=Iwt,t=kwt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((w,E)=>Rwt(n(w,E,i))),v=y.map(Rde),b=new Set(y).add("");for(const w of v)b.has(w)||(b.add(w),y.push(w),v.push(Rde(w)),s.push(W8));o=(w,E)=>y[E],a=(w,E)=>v[E]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new rx(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?Ide:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===Ide)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===W8&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===W8);--y)h.data=null}if(f.parent=Awt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(dIe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=YP(i),r):e},r.parentId=function(i){return arguments.length?(t=YP(i),r):t},r.path=function(i){return arguments.length?(n=YP(i),r):n},r}function Rwt(e){e=`${e}`;let t=e.length;return LV(e,t-1)&&!LV(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Rde(e){let t=e.length;if(t<2)return"";for(;--t>1&&!LV(e,t););return e.slice(0,t)}function LV(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function Nwt(e,t){return e.parent===t.parent?1:2}function G8(e){var t=e.children;return t?t[0]:e.t}function Y8(e){var t=e.children;return t?t[t.length-1]:e.t}function Dwt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Pwt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function Owt(e,t,n){return e.a.parent===t.parent?e.a:n}function KP(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}KP.prototype=Object.create(rx.prototype);function $wt(e){for(var t=new KP(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new KP(s[o],o)),i.parent=n;return(t.parent=new KP(null,0)).children=[t],t}function Mwt(){var e=Nwt,t=1,n=1,r=null;function i(l){var c=$wt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){Pwt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,b=m.m,w;p=Y8(p),d=G8(d),p&&d;)m=G8(m),h=Y8(h),h.a=l,w=p.z+v-d.z-g+e(p._,d._),w>0&&(Dwt(Owt(p,l,f),l,w),g+=w,y+=w),v+=p.m,g+=d.m,b+=m.m,y+=h.m;p&&!Y8(h)&&(h.t=p,h.m+=v-y),d&&!G8(m)&&(m.t=d,m.m+=g-b,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function OF(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var vIe=(1+Math.sqrt(5))/2;function bIe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,b,w,E,x;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,E=Math.max(p/h,h/p)/(m*e),x=g*g*E,w=Math.max(v/x,x/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),x=g*g*E,b=Math.max(v/x,x/y),b>w){g-=l;break}w=b}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?Xk(u,n,r,i,m?r+=p*g/m:s):OF(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const _Ie=function e(t){function n(r,i,s,o,a){bIe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(vIe);function Lwt(){var e=_Ie,t=!1,n=1,r=1,i=[0],s=n1,o=n1,a=n1,u=n1,l=n1;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(yIe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=hIe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:aw(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:aw(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:aw(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:aw(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:aw(+d),c):l},c}function Fwt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var b=l[f],w=h/2+b,E=f+1,x=d-1;E<x;){var T=E+x>>>1;l[T]<w?E=T+1:x=T}w-l[E-1]<l[E]-w&&f+1<E&&--E;var C=l[E]-b,A=h-C;if(g-p>y-m){var k=h?(p*A+g*C)/h:g;c(f,E,C,p,m,k,y),c(E,d,A,k,m,g,y)}else{var R=h?(m*A+y*C)/h:y;c(f,E,C,p,m,g,R),c(E,d,A,p,R,g,y)}}}function Bwt(e,t,n,r,i){(e.depth&1?OF:Xk)(e,t,n,r,i)}const jwt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?Xk(l,i,s,o,m?s+=(a-s)*l.value/m:a):OF(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=bIe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(vIe);function vd(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Jy(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const FV=Symbol("implicit");function IS(){var e=new ffe,t=[],n=[],r=FV;function i(s){let o=e.get(s);if(o===void 0){if(r!==FV)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new ffe;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return IS(t,n).unknown(r)},vd.apply(i,arguments),i}function Qk(){var e=IS().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=Uu(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return Qk(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},vd.apply(f(),arguments)}function Uwt(e){return function(){return e}}function BV(e){return+e}var Nde=[0,1];function zu(e){return e}function jV(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Uwt(isNaN(t)?NaN:.5)}function zwt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Vwt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=jV(i,r),s=n(o,s)):(r=jV(r,i),s=n(s,o)),function(a){return s(r(a))}}function Hwt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=jV(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=sy(e,a,1,r)-1;return s[u](i[u](a))}}function Jk(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function $F(){var e=Nde,t=Nde,n=pg,r,i,s,o=zu,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==zu&&(o=zwt(e[0],e[d-1])),a=d>2?Hwt:Vwt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),Cc)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,BV),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=Wk,c()},f.clamp=function(d){return arguments.length?(o=d?!0:zu,c()):o!==zu},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function wIe(){return $F()(zu,zu)}function EIe(e,t,n,r){var i=oy(e,t,n),s;switch(r=lb(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=x2e(i,o))&&(r.precision=s),yQ(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=S2e(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=E2e(i))&&(r.precision=s-(r.type==="%")*2);break}}return CS(r)}function r_(e){var t=e.domain;return e.ticks=function(n){var r=t();return Jz(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return EIe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=Zz(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function Um(){var e=wIe();return e.copy=function(){return Jk(e,Um())},vd.apply(e,arguments),r_(e)}function xIe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,BV),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return xIe(e).unknown(t)},e=arguments.length?Array.from(e,BV):[0,1],r_(n)}function SIe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function Dde(e){return Math.log(e)}function Pde(e){return Math.exp(e)}function qwt(e){return-Math.log(-e)}function Wwt(e){return-Math.exp(-e)}function Gwt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Ywt(e){return e===10?Gwt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Kwt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Ode(e){return(t,n)=>-e(-t,n)}function TQ(e){const t=e(Dde,Pde),n=t.domain;let r=10,i,s;function o(){return i=Kwt(r),s=Ywt(r),n()[0]<0?(i=Ode(i),s=Ode(s),e(qwt,Wwt)):e(Dde,Pde),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=Jz(l,c,g))}else y=Jz(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=lb(u)).precision==null&&(u.trim=!0),u=CS(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(SIe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function TIe(){const e=TQ($F()).domain([1,10]);return e.copy=()=>Jk(e,TIe()).base(e.base()),vd.apply(e,arguments),e}function $de(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Mde(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function CQ(e){var t=1,n=e($de(t),Mde(t));return n.constant=function(r){return arguments.length?e($de(t=+r),Mde(t)):t},r_(n)}function CIe(){var e=CQ($F());return e.copy=function(){return Jk(e,CIe()).constant(e.constant())},vd.apply(e,arguments)}function Lde(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Xwt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Qwt(e){return e<0?-e*e:e*e}function AQ(e){var t=e(zu,zu),n=1;function r(){return n===1?e(zu,zu):n===.5?e(Xwt,Qwt):e(Lde(n),Lde(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},r_(t)}function IQ(){var e=AQ($F());return e.copy=function(){return Jk(e,IQ()).exponent(e.exponent())},vd.apply(e,arguments),e}function Jwt(){return IQ.apply(null,arguments).exponent(.5)}function AIe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=wAe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[sy(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(ym),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return AIe().domain(e).range(t).unknown(r)},vd.apply(s,arguments)}function IIe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[sy(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return IIe().domain([e,t]).range(i).unknown(s)},vd.apply(r_(o),arguments)}function kIe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[sy(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return kIe().domain(e).range(t).unknown(n)},vd.apply(i,arguments)}const K8=new Date,X8=new Date;function Gs(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>Gs(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(K8.setTime(+s),X8.setTime(+o),e(K8),e(X8),Math.floor(n(K8,X8))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const ix=Gs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);ix.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Gs(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):ix);ix.range;const sm=1e3,$c=sm*60,om=$c*60,zm=om*24,kQ=zm*7,Fde=zm*30,Q8=zm*365,am=Gs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*sm)},(e,t)=>(t-e)/sm,e=>e.getUTCSeconds());am.range;const MF=Gs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*sm)},(e,t)=>{e.setTime(+e+t*$c)},(e,t)=>(t-e)/$c,e=>e.getMinutes());MF.range;const LF=Gs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*$c)},(e,t)=>(t-e)/$c,e=>e.getUTCMinutes());LF.range;const FF=Gs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*sm-e.getMinutes()*$c)},(e,t)=>{e.setTime(+e+t*om)},(e,t)=>(t-e)/om,e=>e.getHours());FF.range;const BF=Gs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*om)},(e,t)=>(t-e)/om,e=>e.getUTCHours());BF.range;const bm=Gs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*$c)/zm,e=>e.getDate()-1);bm.range;const L0=Gs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/zm,e=>e.getUTCDate()-1);L0.range;const RIe=Gs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/zm,e=>Math.floor(e/zm));RIe.range;function i_(e){return Gs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*$c)/kQ)}const kS=i_(0),CM=i_(1),Zwt=i_(2),eEt=i_(3),sx=i_(4),tEt=i_(5),nEt=i_(6);kS.range;CM.range;Zwt.range;eEt.range;sx.range;tEt.range;nEt.range;function s_(e){return Gs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/kQ)}const RS=s_(0),AM=s_(1),rEt=s_(2),iEt=s_(3),ox=s_(4),sEt=s_(5),oEt=s_(6);RS.range;AM.range;rEt.range;iEt.range;ox.range;sEt.range;oEt.range;const mI=Gs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());mI.range;const gI=Gs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());gI.range;const Lh=Gs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Lh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Gs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Lh.range;const Fh=Gs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Fh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Gs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Fh.range;function NIe(e,t,n,r,i,s){const o=[[am,1,sm],[am,5,5*sm],[am,15,15*sm],[am,30,30*sm],[s,1,$c],[s,5,5*$c],[s,15,15*$c],[s,30,30*$c],[i,1,om],[i,3,3*om],[i,6,6*om],[i,12,12*om],[r,1,zm],[r,2,2*zm],[n,1,kQ],[t,1,Fde],[t,3,3*Fde],[e,1,Q8]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=SS(([,,g])=>g).right(o,d);if(h===o.length)return e.every(oy(l/Q8,c/Q8,f));if(h===0)return ix.every(Math.max(oy(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[aEt,uEt]=NIe(Fh,gI,RS,RIe,BF,LF),[lEt,cEt]=NIe(Lh,mI,kS,bm,FF,MF);function J8(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Z8(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function GT(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function DIe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=YT(i),c=KT(i),f=YT(s),d=KT(s),h=YT(o),p=KT(o),m=YT(a),g=KT(a),y=YT(u),v=KT(u),b={a:j,A:z,b:q,B:P,c:null,d:Hde,e:Hde,f:PEt,g:VEt,G:qEt,H:REt,I:NEt,j:DEt,L:PIe,m:OEt,M:$Et,p:U,q:W,Q:Gde,s:Yde,S:MEt,u:LEt,U:FEt,V:BEt,w:jEt,W:UEt,x:null,X:null,y:zEt,Y:HEt,Z:WEt,"%":Wde},w={a:B,A:H,b:G,B:te,c:null,d:qde,e:qde,f:XEt,g:oxt,G:uxt,H:GEt,I:YEt,j:KEt,L:$Ie,m:QEt,M:JEt,p:le,q:fe,Q:Gde,s:Yde,S:ZEt,u:ext,U:txt,V:nxt,w:rxt,W:ixt,x:null,X:null,y:sxt,Y:axt,Z:lxt,"%":Wde},E={a:k,A:R,b:O,B:D,c:$,d:zde,e:zde,f:CEt,g:Ude,G:jde,H:Vde,I:Vde,j:EEt,L:TEt,m:wEt,M:xEt,p:A,q:_Et,Q:IEt,s:kEt,S:SEt,u:mEt,U:gEt,V:yEt,w:pEt,W:vEt,x:F,X:L,y:Ude,Y:jde,Z:bEt,"%":AEt};b.x=x(n,b),b.X=x(r,b),b.c=x(t,b),w.x=x(n,w),w.X=x(r,w),w.c=x(t,w);function x(de,ge){return function(Ie){var pe=[],He=-1,Ue=0,yt=de.length,it,be,ke;for(Ie instanceof Date||(Ie=new Date(+Ie));++He<yt;)de.charCodeAt(He)===37&&(pe.push(de.slice(Ue,He)),(be=Bde[it=de.charAt(++He)])!=null?it=de.charAt(++He):be=it==="e"?" ":"0",(ke=ge[it])&&(it=ke(Ie,be)),pe.push(it),Ue=He+1);return pe.push(de.slice(Ue,He)),pe.join("")}}function T(de,ge){return function(Ie){var pe=GT(1900,void 0,1),He=C(pe,de,Ie+="",0),Ue,yt;if(He!=Ie.length)return null;if("Q"in pe)return new Date(pe.Q);if("s"in pe)return new Date(pe.s*1e3+("L"in pe?pe.L:0));if(ge&&!("Z"in pe)&&(pe.Z=0),"p"in pe&&(pe.H=pe.H%12+pe.p*12),pe.m===void 0&&(pe.m="q"in pe?pe.q:0),"V"in pe){if(pe.V<1||pe.V>53)return null;"w"in pe||(pe.w=1),"Z"in pe?(Ue=Z8(GT(pe.y,0,1)),yt=Ue.getUTCDay(),Ue=yt>4||yt===0?AM.ceil(Ue):AM(Ue),Ue=L0.offset(Ue,(pe.V-1)*7),pe.y=Ue.getUTCFullYear(),pe.m=Ue.getUTCMonth(),pe.d=Ue.getUTCDate()+(pe.w+6)%7):(Ue=J8(GT(pe.y,0,1)),yt=Ue.getDay(),Ue=yt>4||yt===0?CM.ceil(Ue):CM(Ue),Ue=bm.offset(Ue,(pe.V-1)*7),pe.y=Ue.getFullYear(),pe.m=Ue.getMonth(),pe.d=Ue.getDate()+(pe.w+6)%7)}else("W"in pe||"U"in pe)&&("w"in pe||(pe.w="u"in pe?pe.u%7:"W"in pe?1:0),yt="Z"in pe?Z8(GT(pe.y,0,1)).getUTCDay():J8(GT(pe.y,0,1)).getDay(),pe.m=0,pe.d="W"in pe?(pe.w+6)%7+pe.W*7-(yt+5)%7:pe.w+pe.U*7-(yt+6)%7);return"Z"in pe?(pe.H+=pe.Z/100|0,pe.M+=pe.Z%100,Z8(pe)):J8(pe)}}function C(de,ge,Ie,pe){for(var He=0,Ue=ge.length,yt=Ie.length,it,be;He<Ue;){if(pe>=yt)return-1;if(it=ge.charCodeAt(He++),it===37){if(it=ge.charAt(He++),be=E[it in Bde?ge.charAt(He++):it],!be||(pe=be(de,Ie,pe))<0)return-1}else if(it!=Ie.charCodeAt(pe++))return-1}return pe}function A(de,ge,Ie){var pe=l.exec(ge.slice(Ie));return pe?(de.p=c.get(pe[0].toLowerCase()),Ie+pe[0].length):-1}function k(de,ge,Ie){var pe=h.exec(ge.slice(Ie));return pe?(de.w=p.get(pe[0].toLowerCase()),Ie+pe[0].length):-1}function R(de,ge,Ie){var pe=f.exec(ge.slice(Ie));return pe?(de.w=d.get(pe[0].toLowerCase()),Ie+pe[0].length):-1}function O(de,ge,Ie){var pe=y.exec(ge.slice(Ie));return pe?(de.m=v.get(pe[0].toLowerCase()),Ie+pe[0].length):-1}function D(de,ge,Ie){var pe=m.exec(ge.slice(Ie));return pe?(de.m=g.get(pe[0].toLowerCase()),Ie+pe[0].length):-1}function $(de,ge,Ie){return C(de,t,ge,Ie)}function F(de,ge,Ie){return C(de,n,ge,Ie)}function L(de,ge,Ie){return C(de,r,ge,Ie)}function j(de){return o[de.getDay()]}function z(de){return s[de.getDay()]}function q(de){return u[de.getMonth()]}function P(de){return a[de.getMonth()]}function U(de){return i[+(de.getHours()>=12)]}function W(de){return 1+~~(de.getMonth()/3)}function B(de){return o[de.getUTCDay()]}function H(de){return s[de.getUTCDay()]}function G(de){return u[de.getUTCMonth()]}function te(de){return a[de.getUTCMonth()]}function le(de){return i[+(de.getUTCHours()>=12)]}function fe(de){return 1+~~(de.getUTCMonth()/3)}return{format:function(de){var ge=x(de+="",b);return ge.toString=function(){return de},ge},parse:function(de){var ge=T(de+="",!1);return ge.toString=function(){return de},ge},utcFormat:function(de){var ge=x(de+="",w);return ge.toString=function(){return de},ge},utcParse:function(de){var ge=T(de+="",!0);return ge.toString=function(){return de},ge}}}var Bde={"-":"",_:" ",0:"0"},Eo=/^\s*\d+/,fEt=/^%/,dEt=/[\\^$*+?|[\]().{}]/g;function vr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function hEt(e){return e.replace(dEt,"\\$&")}function YT(e){return new RegExp("^(?:"+e.map(hEt).join("|")+")","i")}function KT(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function pEt(e,t,n){var r=Eo.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function mEt(e,t,n){var r=Eo.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function gEt(e,t,n){var r=Eo.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function yEt(e,t,n){var r=Eo.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function vEt(e,t,n){var r=Eo.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function jde(e,t,n){var r=Eo.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Ude(e,t,n){var r=Eo.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function bEt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function _Et(e,t,n){var r=Eo.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function wEt(e,t,n){var r=Eo.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function zde(e,t,n){var r=Eo.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function EEt(e,t,n){var r=Eo.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Vde(e,t,n){var r=Eo.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function xEt(e,t,n){var r=Eo.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function SEt(e,t,n){var r=Eo.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function TEt(e,t,n){var r=Eo.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function CEt(e,t,n){var r=Eo.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function AEt(e,t,n){var r=fEt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function IEt(e,t,n){var r=Eo.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function kEt(e,t,n){var r=Eo.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Hde(e,t){return vr(e.getDate(),t,2)}function REt(e,t){return vr(e.getHours(),t,2)}function NEt(e,t){return vr(e.getHours()%12||12,t,2)}function DEt(e,t){return vr(1+bm.count(Lh(e),e),t,3)}function PIe(e,t){return vr(e.getMilliseconds(),t,3)}function PEt(e,t){return PIe(e,t)+"000"}function OEt(e,t){return vr(e.getMonth()+1,t,2)}function $Et(e,t){return vr(e.getMinutes(),t,2)}function MEt(e,t){return vr(e.getSeconds(),t,2)}function LEt(e){var t=e.getDay();return t===0?7:t}function FEt(e,t){return vr(kS.count(Lh(e)-1,e),t,2)}function OIe(e){var t=e.getDay();return t>=4||t===0?sx(e):sx.ceil(e)}function BEt(e,t){return e=OIe(e),vr(sx.count(Lh(e),e)+(Lh(e).getDay()===4),t,2)}function jEt(e){return e.getDay()}function UEt(e,t){return vr(CM.count(Lh(e)-1,e),t,2)}function zEt(e,t){return vr(e.getFullYear()%100,t,2)}function VEt(e,t){return e=OIe(e),vr(e.getFullYear()%100,t,2)}function HEt(e,t){return vr(e.getFullYear()%1e4,t,4)}function qEt(e,t){var n=e.getDay();return e=n>=4||n===0?sx(e):sx.ceil(e),vr(e.getFullYear()%1e4,t,4)}function WEt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+vr(t/60|0,"0",2)+vr(t%60,"0",2)}function qde(e,t){return vr(e.getUTCDate(),t,2)}function GEt(e,t){return vr(e.getUTCHours(),t,2)}function YEt(e,t){return vr(e.getUTCHours()%12||12,t,2)}function KEt(e,t){return vr(1+L0.count(Fh(e),e),t,3)}function $Ie(e,t){return vr(e.getUTCMilliseconds(),t,3)}function XEt(e,t){return $Ie(e,t)+"000"}function QEt(e,t){return vr(e.getUTCMonth()+1,t,2)}function JEt(e,t){return vr(e.getUTCMinutes(),t,2)}function ZEt(e,t){return vr(e.getUTCSeconds(),t,2)}function ext(e){var t=e.getUTCDay();return t===0?7:t}function txt(e,t){return vr(RS.count(Fh(e)-1,e),t,2)}function MIe(e){var t=e.getUTCDay();return t>=4||t===0?ox(e):ox.ceil(e)}function nxt(e,t){return e=MIe(e),vr(ox.count(Fh(e),e)+(Fh(e).getUTCDay()===4),t,2)}function rxt(e){return e.getUTCDay()}function ixt(e,t){return vr(AM.count(Fh(e)-1,e),t,2)}function sxt(e,t){return vr(e.getUTCFullYear()%100,t,2)}function oxt(e,t){return e=MIe(e),vr(e.getUTCFullYear()%100,t,2)}function axt(e,t){return vr(e.getUTCFullYear()%1e4,t,4)}function uxt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?ox(e):ox.ceil(e),vr(e.getUTCFullYear()%1e4,t,4)}function lxt(){return"+0000"}function Wde(){return"%"}function Gde(e){return+e}function Yde(e){return Math.floor(+e/1e3)}var V_,RQ,LIe,jF,FIe;cxt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function cxt(e){return V_=DIe(e),RQ=V_.format,LIe=V_.parse,jF=V_.utcFormat,FIe=V_.utcParse,V_}function fxt(e){return new Date(e)}function dxt(e){return e instanceof Date?+e:+new Date(+e)}function NQ(e,t,n,r,i,s,o,a,u,l){var c=wIe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),w=l("%Y");function E(x){return(u(x)<x?h:a(x)<x?p:o(x)<x?m:s(x)<x?g:r(x)<x?i(x)<x?y:v:n(x)<x?b:w)(x)}return c.invert=function(x){return new Date(f(x))},c.domain=function(x){return arguments.length?d(Array.from(x,dxt)):d().map(fxt)},c.ticks=function(x){var T=d();return e(T[0],T[T.length-1],x??10)},c.tickFormat=function(x,T){return T==null?E:l(T)},c.nice=function(x){var T=d();return(!x||typeof x.range!="function")&&(x=t(T[0],T[T.length-1],x??10)),x?d(SIe(T,x)):c},c.copy=function(){return Jk(c,NQ(e,t,n,r,i,s,o,a,u,l))},c}function BIe(){return vd.apply(NQ(lEt,cEt,Lh,mI,kS,bm,FF,MF,am,RQ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function hxt(){return vd.apply(NQ(aEt,uEt,Fh,gI,RS,L0,BF,LF,am,jF).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function UF(){var e=0,t=1,n,r,i,s,o=zu,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(pg),l.rangeRound=c(Wk),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Zy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function DQ(){var e=r_(UF()(zu));return e.copy=function(){return Zy(e,DQ())},Jy.apply(e,arguments)}function jIe(){var e=TQ(UF()).domain([1,10]);return e.copy=function(){return Zy(e,jIe()).base(e.base())},Jy.apply(e,arguments)}function UIe(){var e=CQ(UF());return e.copy=function(){return Zy(e,UIe()).constant(e.constant())},Jy.apply(e,arguments)}function PQ(){var e=AQ(UF());return e.copy=function(){return Zy(e,PQ()).exponent(e.exponent())},Jy.apply(e,arguments)}function pxt(){return PQ.apply(null,arguments).exponent(.5)}function zF(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=zu,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,b;return arguments.length?([y,v,b]=g,l=aQ(m,[y,v,b]),h):[l(0),l(.5),l(1)]}}return h.range=p(pg),h.rangeRound=p(Wk),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function zIe(){var e=r_(zF()(zu));return e.copy=function(){return Zy(e,zIe())},Jy.apply(e,arguments)}function VIe(){var e=TQ(zF()).domain([.1,1,10]);return e.copy=function(){return Zy(e,VIe()).base(e.base())},Jy.apply(e,arguments)}function HIe(){var e=CQ(zF());return e.copy=function(){return Zy(e,HIe()).constant(e.constant())},Jy.apply(e,arguments)}function OQ(){var e=AQ(zF());return e.copy=function(){return Zy(e,OQ()).exponent(e.exponent())},Jy.apply(e,arguments)}function mxt(){return OQ.apply(null,arguments).exponent(.5)}function bd(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const gxt=bd("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),yxt=bd("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),vxt=bd("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),bxt=bd("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),_xt=bd("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),wxt=bd("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Ext=bd("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),xxt=bd("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Sxt=bd("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Txt=bd("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),qIe=bd("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function xn(e){return function(){return e}}const Kde=Math.abs,ua=Math.atan2,Tv=Math.cos,Cxt=Math.max,e9=Math.min,Pd=Math.sin,_1=Math.sqrt,fa=1e-12,ax=Math.PI,IM=ax/2,qA=2*ax;function Axt(e){return e>1?0:e<-1?ax:Math.acos(e)}function Xde(e){return e>=1?IM:e<=-1?-IM:Math.asin(e)}function VF(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new dQ(t)}function Ixt(e){return e.innerRadius}function kxt(e){return e.outerRadius}function Rxt(e){return e.startAngle}function Nxt(e){return e.endAngle}function Dxt(e){return e&&e.padAngle}function Pxt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<fa))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function ED(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/_1(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,b=m-h,w=v*v+b*b,E=i-s,x=d*m-p*h,T=(b<0?-1:1)*_1(Cxt(0,E*E*w-x*x)),C=(x*b-v*T)/w,A=(-x*v-b*T)/w,k=(x*b+v*T)/w,R=(-x*v+b*T)/w,O=C-g,D=A-y,$=k-g,F=R-y;return O*O+D*D>$*$+F*F&&(C=k,A=R),{cx:C,cy:A,x01:-c,y01:-f,x11:C*(i/E-1),y11:A*(i/E-1)}}function UV(){var e=Ixt,t=kxt,n=xn(0),r=null,i=Rxt,s=Nxt,o=Dxt,a=null,u=VF(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-IM,m=s.apply(this,arguments)-IM,g=Kde(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>fa))a.moveTo(0,0);else if(g>qA-fa)a.moveTo(h*Tv(p),h*Pd(p)),a.arc(0,0,h,p,m,!y),d>fa&&(a.moveTo(d*Tv(m),d*Pd(m)),a.arc(0,0,d,m,p,y));else{var v=p,b=m,w=p,E=m,x=g,T=g,C=o.apply(this,arguments)/2,A=C>fa&&(r?+r.apply(this,arguments):_1(d*d+h*h)),k=e9(Kde(h-d)/2,+n.apply(this,arguments)),R=k,O=k,D,$;if(A>fa){var F=Xde(A/d*Pd(C)),L=Xde(A/h*Pd(C));(x-=F*2)>fa?(F*=y?1:-1,w+=F,E-=F):(x=0,w=E=(p+m)/2),(T-=L*2)>fa?(L*=y?1:-1,v+=L,b-=L):(T=0,v=b=(p+m)/2)}var j=h*Tv(v),z=h*Pd(v),q=d*Tv(E),P=d*Pd(E);if(k>fa){var U=h*Tv(b),W=h*Pd(b),B=d*Tv(w),H=d*Pd(w),G;if(g<ax)if(G=Pxt(j,z,B,H,U,W,q,P)){var te=j-G[0],le=z-G[1],fe=U-G[0],de=W-G[1],ge=1/Pd(Axt((te*fe+le*de)/(_1(te*te+le*le)*_1(fe*fe+de*de)))/2),Ie=_1(G[0]*G[0]+G[1]*G[1]);R=e9(k,(d-Ie)/(ge-1)),O=e9(k,(h-Ie)/(ge+1))}else R=O=0}T>fa?O>fa?(D=ED(B,H,j,z,h,O,y),$=ED(U,W,q,P,h,O,y),a.moveTo(D.cx+D.x01,D.cy+D.y01),O<k?a.arc(D.cx,D.cy,O,ua(D.y01,D.x01),ua($.y01,$.x01),!y):(a.arc(D.cx,D.cy,O,ua(D.y01,D.x01),ua(D.y11,D.x11),!y),a.arc(0,0,h,ua(D.cy+D.y11,D.cx+D.x11),ua($.cy+$.y11,$.cx+$.x11),!y),a.arc($.cx,$.cy,O,ua($.y11,$.x11),ua($.y01,$.x01),!y))):(a.moveTo(j,z),a.arc(0,0,h,v,b,!y)):a.moveTo(j,z),!(d>fa)||!(x>fa)?a.lineTo(q,P):R>fa?(D=ED(q,P,U,W,d,-R,y),$=ED(j,z,B,H,d,-R,y),a.lineTo(D.cx+D.x01,D.cy+D.y01),R<k?a.arc(D.cx,D.cy,R,ua(D.y01,D.x01),ua($.y01,$.x01),!y):(a.arc(D.cx,D.cy,R,ua(D.y01,D.x01),ua(D.y11,D.x11),!y),a.arc(0,0,d,ua(D.cy+D.y11,D.cx+D.x11),ua($.cy+$.y11,$.cx+$.x11),y),a.arc($.cx,$.cy,R,ua($.y11,$.x11),ua($.y01,$.x01),!y))):a.arc(0,0,d,E,w,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-ax/2;return[Tv(f)*c,Pd(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:xn(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:xn(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:xn(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:xn(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:xn(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:xn(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:xn(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function HF(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function WIe(e){this._context=e}WIe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function $Q(e){return new WIe(e)}function GIe(e){return e[0]}function YIe(e){return e[1]}function KIe(e,t){var n=xn(!0),r=null,i=$Q,s=null,o=VF(a);e=typeof e=="function"?e:e===void 0?GIe:xn(e),t=typeof t=="function"?t:t===void 0?YIe:xn(t);function a(u){var l,c=(u=HF(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:xn(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:xn(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:xn(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function XIe(e,t,n){var r=null,i=xn(!0),s=null,o=$Q,a=null,u=VF(l);e=typeof e=="function"?e:e===void 0?GIe:xn(+e),t=typeof t=="function"?t:xn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?YIe:xn(+n);function l(f){var d,h,p,m=(f=HF(f)).length,g,y=!1,v,b=new Array(m),w=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(g,d,f),w[d]=+t(g,d,f),a.point(r?+r(g,d,f):b[d],n?+n(g,d,f):w[d]))}if(v)return a=null,v+""||null}function c(){return KIe().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:xn(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:xn(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:xn(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:xn(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:xn(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:xn(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:xn(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function Oxt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function $xt(e){return e}function Mxt(){var e=$xt,t=Oxt,n=null,r=xn(0),i=xn(qA),s=xn(0);function o(a){var u,l=(a=HF(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(qA,Math.max(-qA,i.apply(this,arguments)-m)),y,v=Math.min(Math.abs(g)/l,s.apply(this,arguments)),b=v*(g<0?-1:1),w;for(u=0;u<l;++u)(w=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=w);for(t!=null?h.sort(function(E,x){return t(p[E],p[x])}):n!=null&&h.sort(function(E,x){return n(a[E],a[x])}),u=0,f=d?(g-l*b)/d:0;u<l;++u,m=y)c=h[u],w=p[c],y=m+(w>0?w*f:0)+b,p[c]={data:a[c],index:u,value:w,startAngle:m,endAngle:y,padAngle:v};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:xn(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:xn(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:xn(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:xn(+a),o):s},o}const Lxt={draw(e,t){const n=_1(t/ax);e.moveTo(n,0),e.arc(0,0,n,0,qA)}};function Fxt(e,t){let n=null,r=VF(i);e=typeof e=="function"?e:xn(e||Lxt),t=typeof t=="function"?t:xn(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:xn(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:xn(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function uy(){}function kM(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function qF(e){this._context=e}qF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:kM(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:kM(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Bxt(e){return new qF(e)}function QIe(e){this._context=e}QIe.prototype={areaStart:uy,areaEnd:uy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:kM(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function jxt(e){return new QIe(e)}function JIe(e){this._context=e}JIe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:kM(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Uxt(e){return new JIe(e)}function ZIe(e,t){this._basis=new qF(e),this._beta=t}ZIe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const zxt=function e(t){function n(r){return t===1?new qF(r):new ZIe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function RM(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function MQ(e,t){this._context=e,this._k=(1-t)/6}MQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:RM(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:RM(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Vxt=function e(t){function n(r){return new MQ(r,t)}return n.tension=function(r){return e(+r)},n}(0);function LQ(e,t){this._context=e,this._k=(1-t)/6}LQ.prototype={areaStart:uy,areaEnd:uy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:RM(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Hxt=function e(t){function n(r){return new LQ(r,t)}return n.tension=function(r){return e(+r)},n}(0);function FQ(e,t){this._context=e,this._k=(1-t)/6}FQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:RM(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const qxt=function e(t){function n(r){return new FQ(r,t)}return n.tension=function(r){return e(+r)},n}(0);function BQ(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>fa){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>fa){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function eke(e,t){this._context=e,this._alpha=t}eke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:BQ(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Wxt=function e(t){function n(r){return t?new eke(r,t):new MQ(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function tke(e,t){this._context=e,this._alpha=t}tke.prototype={areaStart:uy,areaEnd:uy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:BQ(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Gxt=function e(t){function n(r){return t?new tke(r,t):new LQ(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function nke(e,t){this._context=e,this._alpha=t}nke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:BQ(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Yxt=function e(t){function n(r){return t?new nke(r,t):new FQ(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function rke(e){this._context=e}rke.prototype={areaStart:uy,areaEnd:uy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Kxt(e){return new rke(e)}function Qde(e){return e<0?-1:1}function Jde(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Qde(s)+Qde(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Zde(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function t9(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function NM(e){this._context=e}NM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:t9(this,this._t0,Zde(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,t9(this,Zde(this,n=Jde(this,e,t)),n);break;default:t9(this,this._t0,n=Jde(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function ike(e){this._context=new ske(e)}(ike.prototype=Object.create(NM.prototype)).point=function(e,t){NM.prototype.point.call(this,t,e)};function ske(e){this._context=e}ske.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function Xxt(e){return new NM(e)}function Qxt(e){return new ike(e)}function oke(e){this._context=e}oke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=ehe(e),i=ehe(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function ehe(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function Jxt(e){return new oke(e)}function WF(e,t){this._context=e,this._t=t}WF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Zxt(e){return new WF(e,.5)}function eSt(e){return new WF(e,0)}function tSt(e){return new WF(e,1)}function the(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function nhe(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function nSt(e,t){return e[t]}function rSt(e){const t=[];return t.key=e,t}function iSt(){var e=xn([]),t=nhe,n=the,r=nSt;function i(s){var o=Array.from(e.apply(this,arguments),rSt),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=HF(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:xn(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:xn(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?nhe:typeof s=="function"?s:xn(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??the,i):n},i}function HC(e,t,n){this.k=e,this.x=t,this.y=n}HC.prototype={constructor:HC,scale:function(e){return e===1?this:new HC(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new HC(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};HC.prototype;function jQ({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=I.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=I.useCallback(c=>(s?jF("%B"):CS(".2s"))(c),[s]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:_.jsx($h,{children:_.jsx(Vs,{gap:3,children:_.jsx(Je,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?_.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>_.jsxs("g",{transform:`translate(${f}, ${n})`,children:[_.jsx("line",{y2:"6",stroke:"currentColor"}),o?_.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,_.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:_.jsx($h,{children:_.jsx(ls,{withinPortal:!0,label:c,children:_.jsx(Je,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const sSt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:jQ},Symbol.toStringTag,{value:"Module"}));function ake({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=I.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx($h,{children:_.jsx(Vs,{gap:3,children:_.jsx(Je,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>_.jsxs("g",{transform:`translate(${n}, ${l})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),s?_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,_.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:_.jsx("foreignObject",{width:a,height:20,children:_.jsx(Vs,{style:{width:"100%",height:"100%"},justify:"right",children:_.jsx(Je,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const oSt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:ake},Symbol.toStringTag,{value:"Module"})),hc={top:15,left:100,right:50,bottom:50};function zV({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=Qw(),o=I.useMemo(()=>s-hc.left-hc.right,[s]),a=I.useMemo(()=>i-hc.top-hc.bottom,[i]),u=I.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return IS(qIe).domain(d)},[n,t.category]),l=I.useMemo(()=>e?Um([hc.left,o+hc.left]).domain([0,M0(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=I.useMemo(()=>e?Qk([hc.top,a+hc.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=I.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:_.jsxs("g",{children:[_.jsx("rect",{x:hc.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-hc.left},h),_.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?_.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_.jsx(jQ,{xScale:l,yRange:c.range(),vertPosition:a+hc.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?_.jsx(ake,{yScale:c,horizontalPosition:hc.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):_.jsx(ag,{})}const aSt=Object.freeze(Object.defineProperty({__proto__:null,Bar:zV,default:zV},Symbol.toStringTag,{value:"Module"})),mr=Array.isArray;function rl(e){return e!=null?mr(e)?e:[e]:[]}function uSt(e=0,t=1/0){return`${rhe(e)} < row_number() && row_number() <= ${rhe(t)}`}function rhe(e){return e<0?`count() + ${e}`:e}class uke{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(uSt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,rl(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function Sn(e){throw Error(e)}function uu(e){return typeof e=="number"}function bi(e){return typeof e=="function"}function GF(e,t){const n=Array(e);if(bi(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let lSt=class extends uke{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){Sn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){Sn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){Sn("Not implemented")}getter(t){Sn("Not implemented")}objects(t){Sn("Not implemented")}object(t){Sn("Not implemented")}[Symbol.iterator](){Sn("Not implemented")}print(t={}){uu(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=GF(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},cSt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},fSt=function(e){return e&&bi(e.get)?e:new cSt(e)};function Vm(e){return e instanceof Date}function Ia(e){return e===Object(e)}function DM(e){return e instanceof RegExp}function Ko(e){return typeof e=="string"}function dSt(e,t){const n=r=>Sn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?ihe(e.entries(),t):Vm(e)?n("Date"):DM(e)?n("RegExp"):Ko(e)?n():mr(e)?hSt(e,t):bi(e[Symbol.iterator])?pSt(e,t):Ia(e)?ihe(Object.entries(e),t):n()}function ihe(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function hSt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function pSt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:mSt}=Object.prototype;function od(e,t){return mSt.call(e,t)}function uc(e){return e?new she({...e.data()},e.columnNames()):new she}class she{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return od(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const cr=void 0,gSt=Object.getPrototypeOf(Int8Array);function Zk(e){return e instanceof gSt}function w1(e){return mr(e)||Zk(e)}function Hf(e){return e!=null&&e===e}const XT=e=>w1(e)||Ko(e),ySt={compact:e=>w1(e)?e.filter(t=>Hf(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>XT(e)?e.includes(t,n):!1,indexof:(e,t)=>XT(e)?e.indexOf(t):-1,join:(e,t)=>w1(e)?e.join(t):cr,lastindexof:(e,t)=>XT(e)?e.lastIndexOf(t):-1,length:e=>XT(e)?e.length:0,pluck:(e,t)=>w1(e)?e.map(n=>Hf(n)?n[t]:cr):cr,reverse:e=>w1(e)?e.slice().reverse():Ko(e)?e.split("").reverse().join(""):cr,slice:(e,t,n)=>XT(e)?e.slice(t,n):cr};function vSt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function XP(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const Od=e=>(e<10?"0":"")+e,bSt=e=>e<0?"-"+XP(-e,6):e>9999?"+"+XP(e,6):XP(e,4);function lke(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return bSt(e)+"-"+Od(t+1)+"-"+Od(n)+(!u||o?"T"+Od(r)+":"+Od(i)+":"+Od(s)+"."+XP(o,3)+l:s?"T"+Od(r)+":"+Od(i)+":"+Od(s)+l:i||r||!a?"T"+Od(r)+":"+Od(i)+l:"")}function cke(e,t){return isNaN(e)?"Invalid Date":lke(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function YF(e,t){return isNaN(e)?"Invalid Date":lke(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const _St=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function wSt(e){return e.match(_St)&&!isNaN(Date.parse(e))}function ESt(e,t=Date.parse){return wSt(e)?t(e):e}const fke=6e4,dke=864e5,hke=6048e5,Ki=new Date,Xi=new Date,is=e=>(Ki.setTime(typeof e=="string"?ESt(e):e),Ki);function xSt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function SSt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function TSt(e){Xi.setTime(+e),Xi.setHours(0,0,0,0),Ki.setTime(+Xi),Ki.setMonth(0),Ki.setDate(1);const t=(Xi.getTimezoneOffset()-Ki.getTimezoneOffset())*fke;return Math.floor(1+(Xi-Ki-t)/dke)}function CSt(e){Xi.setTime(+e),Xi.setUTCHours(0,0,0,0);const t=Date.UTC(Xi.getUTCFullYear(),0,1);return Math.floor(1+(Xi-t)/dke)}function ASt(e,t){const n=t||0;Xi.setTime(+e),Xi.setDate(Xi.getDate()-(Xi.getDay()+7-n)%7),Xi.setHours(0,0,0,0),Ki.setTime(+e),Ki.setMonth(0),Ki.setDate(1),Ki.setDate(1-(Ki.getDay()+7-n)%7),Ki.setHours(0,0,0,0);const r=(Xi.getTimezoneOffset()-Ki.getTimezoneOffset())*fke;return Math.floor((1+(Xi-Ki)-r)/hke)}function ISt(e,t){const n=t||0;return Xi.setTime(+e),Xi.setUTCDate(Xi.getUTCDate()-(Xi.getUTCDay()+7-n)%7),Xi.setUTCHours(0,0,0,0),Ki.setTime(+e),Ki.setUTCMonth(0),Ki.setUTCDate(1),Ki.setUTCDate(1-(Ki.getUTCDay()+7-n)%7),Ki.setUTCHours(0,0,0,0),Math.floor((1+(Xi-Ki))/hke)}const kSt={format_date:(e,t)=>cke(is(e),!t),format_utcdate:(e,t)=>YF(is(e),!t),timestamp:e=>+is(e),year:e=>is(e).getFullYear(),quarter:e=>Math.floor(is(e).getMonth()/3),month:e=>is(e).getMonth(),date:e=>is(e).getDate(),dayofweek:e=>is(e).getDay(),hours:e=>is(e).getHours(),minutes:e=>is(e).getMinutes(),seconds:e=>is(e).getSeconds(),milliseconds:e=>is(e).getMilliseconds(),utcyear:e=>is(e).getUTCFullYear(),utcquarter:e=>Math.floor(is(e).getUTCMonth()/3),utcmonth:e=>is(e).getUTCMonth(),utcdate:e=>is(e).getUTCDate(),utcdayofweek:e=>is(e).getUTCDay(),utchours:e=>is(e).getUTCHours(),utcminutes:e=>is(e).getUTCMinutes(),utcseconds:e=>is(e).getUTCSeconds(),utcmilliseconds:e=>is(e).getUTCMilliseconds(),datetime:xSt,dayofyear:TSt,week:ASt,utcdatetime:SSt,utcdayofyear:CSt,utcweek:ISt,now:Date.now};function UQ(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:Vm(e)||Vm(t)?+e==+t:DM(e)&&DM(t)?e+""==t+"":Ia(e)&&Ia(t)?RSt(e,t):!1}function RSt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return ohe(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!ohe(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!UQ(e[o],t[o]))return!1}return!0}function ohe(e,t,n=UQ){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const NSt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let DSt=Math.random;function NS(){return DSt()}const PSt={random:NS,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function zQ(e){return e instanceof Map}function OSt(e){return e instanceof Set}function QP(e){return zQ(e)||OSt(e)}function n9(e){return Array.from(e)}const $St={has:(e,t)=>QP(e)?e.has(t):e!=null?od(e,t):!1,keys:e=>zQ(e)?n9(e.keys()):e!=null?Object.keys(e):[],values:e=>QP(e)?n9(e.values()):e!=null?Object.values(e):[],entries:e=>QP(e)?n9(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):cr};function MSt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(od(t,e))return t[e];return n!==void 0?n:e}function LSt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const FSt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},Ow={bin:vSt,equal:UQ,recode:MSt,sequence:LSt,...ySt,...kSt,...NSt,...PSt,...$St,...FSt};function yI(e){return typeof e=="bigint"}function Bh(e){return e===void 0?e+"":yI(e)?e+"n":JSON.stringify(e)}function bn(e,t=[],n=[]){return new BSt(e,rl(t),rl(n))}let BSt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${Bh(n)}]`),...this.params.map(Bh)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const pke=e=>bn("any",e),mke=()=>bn("count"),gke=e=>bn("array_agg",e),yke=e=>bn("array_agg_distinct",e),vke=(e,t)=>bn("map_agg",[e,t]),bke=(e,t)=>bn("object_agg",[e,t]),_ke=(e,t)=>bn("entries_agg",[e,t]);({...Ow});function jSt(e,t){e=QP(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function USt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function zSt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function VSt(e,t,n,r){const i=r==="map"||r===!0?vke:r==="entries"?_ke:r==="object"?bke:Sn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=jSt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:gke(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const HSt="ArrayPattern",qSt="ArrowFunctionExpression",WSt="FunctionExpression",F0="Identifier",DS="Literal",wke="MemberExpression",GSt="ObjectExpression",Eke="ObjectPattern",xke="Property",eR="Column",YSt="Constant",KSt="Dictionary",XSt="Function",QSt="Parameter",Ske="Op",ri=(e,t)=>{const n=JSt[e.type];return n?n(e,t):Sn(`Unsupported expression construct: ${e.type}`)},r9=(e,t)=>"("+ri(e.left,t)+" "+e.operator+" "+ri(e.right,t)+")",i9=(e,t)=>"("+Vd(e.params,t)+")=>"+ri(e.body,t),ahe=(e,t)=>ri(e.callee,t)+"("+Vd(e.arguments,t)+")",Vd=(e,t,n=",")=>e.map(r=>ri(r,t)).join(n),Tke=e=>e.computed?`[${Bh(e.name)}]`:`.${e.name}`,uhe=(e,t,n)=>{const r=e.table||"";return`data${r}${Tke(e)}.${n}(${t.index}${r})`},JSt={Constant:e=>e.raw,Column:(e,t)=>uhe(e,t,"get"),Dictionary:(e,t)=>uhe(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${Tke(e)}`,Op:(e,t)=>`op(${Bh(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+ri(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=ri(e.object,t),i=ri(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:ahe,NewExpression:(e,t)=>"new "+ahe(e,t),ArrayExpression:(e,t)=>"["+Vd(e.elements,t)+"]",AssignmentExpression:r9,BinaryExpression:r9,LogicalExpression:r9,UnaryExpression:(e,t)=>"("+e.operator+ri(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+ri(e.test,t)+"?"+ri(e.consequent,t)+":"+ri(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Vd(e.properties,t)+"})",Property:(e,t)=>{const n=ri(e.key,t);return(e.computed?`[${n}]`:n)+":"+ri(e.value,t)},ArrowFunctionExpression:i9,FunctionExpression:i9,FunctionDeclaration:i9,ArrayPattern:(e,t)=>"["+Vd(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Vd(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Vd(e.declarations,t,","),VariableDeclarator:(e,t)=>ri(e.id,t)+"="+ri(e.init,t),SpreadElement:(e,t)=>"..."+ri(e.argument,t),BlockStatement:(e,t)=>"{"+Vd(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>ri(e.expression,t),IfStatement:(e,t)=>"if ("+ri(e.test,t)+")"+ri(e.consequent,t)+(e.alternate?" else "+ri(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+ri(e.discriminant,t)+") {"+Vd(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+ri(e.test,t):"default")+": "+Vd(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+ri(e.argument,t),Program:(e,t)=>ri(e.body[0],t)};function PM(e,t={index:"row"}){return ri(e,t)}function ZSt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function ux(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:Vm(e)?+e:mr(e)||Zk(e)?`[${e.map(ux)}]`:DM(e)?e+"":eTt(e)}function eTt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${ux(e[r])}`;return t+="}",t}function OM(e,t){const n=e.length;return n===1?(r,i)=>ux(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=ux(a)}return s}}function tTt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=ux(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=ux(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function qp(){}function nTt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function ks(e){return e.init=e.init||qp,e.add=e.add||qp,e.rem=e.rem||qp,e}function lhe(e,t){return e.product_v=!1,e.product=t}const Cke={count:{create:()=>ks({value:e=>e.count}),param:[]},array_agg:{create:()=>ks({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>ks({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>ks({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>ks({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>ks({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:cr}),param:[1]},valid:{create:()=>ks({value:e=>e.valid}),param:[1]},invalid:{create:()=>ks({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=tTt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>ks({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>ks({value:e=>{let t=cr,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:cr,add:(e,t)=>yI(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>lhe(e,1),value:e=>e.valid?e.product_v?lhe(e,nTt(e.list.values())):e.product:void 0,add:(e,t)=>yI(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:cr,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>ks({value:e=>e.valid?e.mean:cr}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):cr,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>ks({value:e=>e.valid>1?e.dev/e.valid:cr}),param:[1],req:["variance"]},stdev:{create:()=>ks({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):cr}),param:[1],req:["variance"]},stdevp:{create:()=>ks({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):cr}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=cr,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===cr)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=cr,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===cr)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>ks({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>ks({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):cr,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>ks({value:e=>e.valid>1?e.cov/e.valid:cr}),param:[2],req:["covariance"]},corr:{create:()=>ks({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):cr}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>ks({value:i=>ZSt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},che={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},fhe={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},Ake={row_number:{create(){return{init:qp,value:e=>e.index+1}},param:[]},rank:che,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=che.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:fhe,ntile:{create(e){e=+e,e>0||Sn("ntile num must be greater than zero.");const{init:t,value:n}=fhe.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=cr){return e=+e||1,{init:qp,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=cr){return e=+e||1,{init:qp,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:qp,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:qp,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||Sn("nth_value nth must be greater than zero."),{init:qp,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):cr}}},param:[1,1]},fill_down:{create(e=cr){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return Hf(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=cr){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=rTt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function rTt(e,t,n){for(const r=e.size;n<r;++n)if(Hf(e.value(n,t)))return n;return-1}function VQ(e){return od(Cke,e)}function HQ(e){return od(Ake,e)}function Ike(e){return od(Ow,e)||e==="row_object"}function kke(e){return VQ(e)&&Cke[e]}function Rke(e){return HQ(e)&&Ake[e]}function QT(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const qQ={escape:(e,t,n)=>QT(e,t,n),expr:(e,t)=>QT(`(row,data,op)=>${e}`,Ow,t),expr2:(e,t)=>QT(`(row0,data0,row,data)=>${e}`,Ow,t),join:(e,t)=>QT(`(row1,data1,row2,data2)=>${e}`,Ow,t),param:(e,t)=>QT(e,Ow,t)},iTt={"==":1,"!=":1,"===":1,"!==":1};function Nke(e,t,n=0,r,i){if(e.type=eR,e.name=t,e.table=n,i&&r&&bi(r.keyFor)){const s=iTt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===DS&&sTt(i,e,s,r.keyFor(s.value))}return e}function sTt(e,t,n,r){return r<0?(e.type=DS,e.value=!1,e.raw="false"):(t.type=KSt,n.value=r,n.raw=r+""),!0}function KF(e){return mr(e)?e:zQ(e)?e.entries():e?Object.entries(e):[]}const Dke="row_object";function Pke(e,t){e.type=GSt;const n=e.properties=[];for(const r of KF(t)){const[i,s]=mr(r)?r:[r,r];n.push({type:xke,key:{type:DS,raw:Bh(s)},value:Nke({computed:!0},i)})}return e}function Oke(e){return PM(Pke({},e))}function $ke(e){return qQ.expr(Oke(e))}const oTt=new TextDecoder("utf-8"),VV=e=>oTt.decode(e),aTt=new TextEncoder,WQ=e=>aTt.encode(e),uTt=e=>typeof e=="boolean",Iu=e=>typeof e=="function",ev=e=>e!=null&&Object(e)===e,XF=e=>ev(e)&&Iu(e.then),GQ=e=>ev(e)&&Iu(e[Symbol.iterator]),QF=e=>ev(e)&&Iu(e[Symbol.asyncIterator]),lTt=e=>ev(e)&&"done"in e&&"value"in e,Mke=e=>"_getDOMStream"in e&&"_getNodeStream"in e,cTt=e=>ev(e)&&Iu(e.abort)&&Iu(e.getWriter)&&!Mke(e),fTt=e=>ev(e)&&Iu(e.end)&&Iu(e.write)&&uTt(e.writable)&&!Mke(e),dTt=e=>ev(e)&&Iu(e.clear)&&Iu(e.bytes)&&Iu(e.position)&&Iu(e.setPosition)&&Iu(e.capacity)&&Iu(e.getBufferIdentifier)&&Iu(e.createLong),YQ=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function hTt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function $M(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function jh(e,t){const n=hTt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?$M(o,s,a):o=s;break}$M(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function Zs(e,t){let n=lTt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=WQ(n)),n instanceof ArrayBuffer?new e(n):n instanceof YQ?new e(n):dTt(n)?Zs(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const JT=e=>Zs(Int32Array,e),Or=e=>Zs(Uint8Array,e),HV=e=>(e.next(),e);function*pTt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof YQ?n(t):GQ(t)?t:n(t);return yield*HV(function*(i){let s=null;do s=i.next(yield Zs(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const mTt=e=>pTt(Uint8Array,e);function Lke(e,t){return m1(this,arguments,function*(){if(XF(t))return yield Xn(yield Xn(yield*Aj(IA(Lke(e,yield Xn(t))))));const r=function(o){return m1(this,arguments,function*(){yield yield Xn(yield Xn(o))})},i=function(o){return m1(this,arguments,function*(){yield Xn(yield*Aj(IA(HV(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof YQ?r(t):GQ(t)?i(t):QF(t)?t:r(t);return yield Xn(yield*Aj(IA(HV(function(o){return m1(this,arguments,function*(){let a=null;do a=yield Xn(o.next(yield yield Xn(Zs(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Xn(new e)})}const gTt=e=>Lke(Uint8Array,e);function Fke(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function yTt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const dhe={fromIterable(e){return xD(vTt(e))},fromAsyncIterable(e){return xD(bTt(e))},fromDOMStream(e){return xD(_Tt(e))},fromNodeStream(e){return xD(ETt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},xD=e=>(e.next(),e);function*vTt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?jh(r,o)[0]:([i,r,a]=jh(r,o),i)}({cmd:s,size:o}=yield null);const l=mTt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function bTt(e){return m1(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?jh(i,a)[0]:([s,i,u]=jh(i,a),s)}({cmd:o,size:a}=yield yield Xn(null));const c=gTt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Xn(c.next()):yield Xn(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Xn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Xn(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Xn(c.return(new Uint8Array(0))))}return yield Xn(null)})}function _Tt(e){return m1(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?jh(i,a)[0]:([s,i,u]=jh(i,a),s)}({cmd:o,size:a}=yield yield Xn(null));const c=new wTt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Xn(c.read()):yield Xn(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Or(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Xn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Xn(c.cancel(f)))}finally{r===!1?yield Xn(c.cancel()):e.locked&&c.releaseLock()}return yield Xn(null)})}class wTt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Yp(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return Yp(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Or(n)),n})}}const s9=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function ETt(e){return m1(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?jh(l,a)[0]:([c,l,u]=jh(l,a),c)}if({cmd:o,size:a}=yield yield Xn(null),e.isTTY)return yield yield Xn(new Uint8Array(0)),yield Xn(null);try{n[0]=s9(e,"end"),n[1]=s9(e,"error");do{if(n[2]=s9(e,"readable"),[r,s]=yield Xn(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Or(e.read(a-u)),c.byteLength<a-u&&(c=Or(e.read()))):c=Or(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Xn(f()));while(a<u)}while(!i)}finally{yield Xn(d(n,r==="error"?s:null))}return yield Xn(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var Qa;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Qa||(Qa={}));var il;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(il||(il={}));var zo;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(zo||(zo={}));var Uh;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Uh||(Uh={}));var Yt;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Yt||(Yt={}));var zh;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(zh||(zh={}));var no;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(no||(no={}));var re;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(re||(re={}));var Bp;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(Bp||(Bp={}));const xTt=void 0;function db(e){if(e===null)return"null";if(e===xTt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>db(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const STt=Symbol.for("isArrowBigNum");function _d(e,...t){return t.length===0?Object.setPrototypeOf(Zs(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}_d.prototype[STt]=!0;_d.prototype.toJSON=function(){return`"${bI(this)}"`};_d.prototype.valueOf=function(){return Bke(this)};_d.prototype.toString=function(){return bI(this)};_d.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return Bke(this);case"string":return bI(this);case"default":return TTt(this)}return bI(this)};function aE(...e){return _d.apply(this,e)}function uE(...e){return _d.apply(this,e)}function vI(...e){return _d.apply(this,e)}Object.setPrototypeOf(aE.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(uE.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(vI.prototype,Object.create(Uint32Array.prototype));Object.assign(aE.prototype,_d.prototype,{constructor:aE,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(uE.prototype,_d.prototype,{constructor:uE,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(vI.prototype,_d.prototype,{constructor:vI,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function Bke(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const bI=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return o9(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return o9(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${o9(t)}`},TTt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:bI(e);function o9(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class KQ{static new(t,n){switch(n){case!0:return new aE(t);case!1:return new uE(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new aE(t)}return t.byteLength===16?new vI(t):new uE(t)}static signed(t){return new aE(t)}static unsigned(t){return new uE(t)}static decimal(t){return new vI(t)}constructor(t,n){return KQ.new(t,n)}}function ad(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var jke,Uke,zke,Vke,Hke,qke,Wke,Gke,Yke,Kke,Xke,Qke,Jke,Zke,eRe,tRe,nRe,rRe,iRe,sRe;let Tn=class qV{static isNull(t){return(t==null?void 0:t.typeId)===re.Null}static isInt(t){return(t==null?void 0:t.typeId)===re.Int}static isFloat(t){return(t==null?void 0:t.typeId)===re.Float}static isBinary(t){return(t==null?void 0:t.typeId)===re.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===re.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===re.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===re.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===re.Date}static isTime(t){return(t==null?void 0:t.typeId)===re.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===re.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===re.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===re.Duration}static isList(t){return(t==null?void 0:t.typeId)===re.List}static isStruct(t){return(t==null?void 0:t.typeId)===re.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===re.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===re.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===re.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===re.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===re.Dictionary}static isDenseUnion(t){return qV.isUnion(t)&&t.mode===il.Dense}static isSparseUnion(t){return qV.isUnion(t)&&t.mode===il.Sparse}get typeId(){return re.NONE}};jke=Symbol.toStringTag;Tn[jke]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(Tn.prototype);let Hm=class extends Tn{toString(){return"Null"}get typeId(){return re.Null}};Uke=Symbol.toStringTag;Hm[Uke]=(e=>e[Symbol.toStringTag]="Null")(Hm.prototype);class lu extends Tn{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return re.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}zke=Symbol.toStringTag;lu[zke]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(lu.prototype);class XQ extends lu{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class QQ extends lu{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class ly extends lu{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class JQ extends lu{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class ZQ extends lu{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class eJ extends lu{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class tJ extends lu{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class nJ extends lu{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(XQ.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(QQ.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(ly.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(JQ.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(ZQ.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(eJ.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(tJ.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(nJ.prototype,"ArrayType",{value:BigUint64Array});class cy extends Tn{constructor(t){super(),this.precision=t}get typeId(){return re.Float}get ArrayType(){switch(this.precision){case zo.HALF:return Uint16Array;case zo.SINGLE:return Float32Array;case zo.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}Vke=Symbol.toStringTag;cy[Vke]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(cy.prototype);class oRe extends cy{constructor(){super(zo.HALF)}}class rJ extends cy{constructor(){super(zo.SINGLE)}}class iJ extends cy{constructor(){super(zo.DOUBLE)}}Object.defineProperty(oRe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(rJ.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(iJ.prototype,"ArrayType",{value:Float64Array});let _I=class extends Tn{constructor(){super()}get typeId(){return re.Binary}toString(){return"Binary"}};Hke=Symbol.toStringTag;_I[Hke]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(_I.prototype);let lx=class extends Tn{constructor(){super()}get typeId(){return re.Utf8}toString(){return"Utf8"}};qke=Symbol.toStringTag;lx[qke]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(lx.prototype);let wI=class extends Tn{constructor(){super()}get typeId(){return re.Bool}toString(){return"Bool"}};Wke=Symbol.toStringTag;wI[Wke]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(wI.prototype);let MM=class extends Tn{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return re.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};Gke=Symbol.toStringTag;MM[Gke]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(MM.prototype);class cx extends Tn{constructor(t){super(),this.unit=t}get typeId(){return re.Date}toString(){return`Date${(this.unit+1)*32}<${Uh[this.unit]}>`}}Yke=Symbol.toStringTag;cx[Yke]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(cx.prototype);class CTt extends cx{constructor(){super(Uh.DAY)}}class ATt extends cx{constructor(){super(Uh.MILLISECOND)}}class qm extends Tn{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return re.Time}toString(){return`Time${this.bitWidth}<${Yt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}Kke=Symbol.toStringTag;qm[Kke]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(qm.prototype);class ITt extends qm{constructor(){super(Yt.SECOND,32)}}class kTt extends qm{constructor(){super(Yt.MILLISECOND,32)}}class RTt extends qm{constructor(){super(Yt.MICROSECOND,64)}}class NTt extends qm{constructor(){super(Yt.NANOSECOND,64)}}class LM extends Tn{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return re.Timestamp}toString(){return`Timestamp<${Yt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}Xke=Symbol.toStringTag;LM[Xke]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(LM.prototype);class fx extends Tn{constructor(t){super(),this.unit=t}get typeId(){return re.Interval}toString(){return`Interval<${zh[this.unit]}>`}}Qke=Symbol.toStringTag;fx[Qke]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(fx.prototype);class DTt extends fx{constructor(){super(zh.DAY_TIME)}}class PTt extends fx{constructor(){super(zh.YEAR_MONTH)}}let FM=class extends Tn{constructor(t){super(),this.unit=t}get typeId(){return re.Duration}toString(){return`Duration<${Yt[this.unit]}>`}};Jke=Symbol.toStringTag;FM[Jke]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(FM.prototype);let dx=class extends Tn{constructor(t){super(),this.children=[t]}get typeId(){return re.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};Zke=Symbol.toStringTag;dx[Zke]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(dx.prototype);class va extends Tn{constructor(t){super(),this.children=t}get typeId(){return re.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}eRe=Symbol.toStringTag;va[eRe]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(va.prototype);class EI extends Tn{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return re.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}tRe=Symbol.toStringTag;EI[tRe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(EI.prototype);let BM=class extends Tn{constructor(t){super(),this.byteWidth=t}get typeId(){return re.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};nRe=Symbol.toStringTag;BM[nRe]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(BM.prototype);let hx=class extends Tn{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return re.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};rRe=Symbol.toStringTag;hx[rRe]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(hx.prototype);class xI extends Tn{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return re.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}iRe=Symbol.toStringTag;xI[iRe]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(xI.prototype);const OTt=(e=>()=>++e)(-1);class fy extends Tn{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?OTt():ad(r)}get typeId(){return re.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}sRe=Symbol.toStringTag;fy[sRe]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(fy.prototype);function Wd(e){const t=e;switch(e.typeId){case re.Decimal:return e.bitWidth/32;case re.Timestamp:return 2;case re.Date:return 1+t.unit;case re.Interval:return 1+t.unit;case re.FixedSizeList:return t.listSize;case re.FixedSizeBinary:return t.byteWidth;default:return 1}}class Cn{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return $Tt(this,t,n)}getVisitFnByTypeId(t,n=!0){return uw(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function $Tt(e,t,n=!0){return typeof t=="number"?uw(e,t,n):typeof t=="string"&&t in re?uw(e,re[t],n):t&&t instanceof Tn?uw(e,hhe(t),n):t!=null&&t.type&&t.type instanceof Tn?uw(e,hhe(t.type),n):uw(e,re.NONE,n)}function uw(e,t,n=!0){let r=null;switch(t){case re.Null:r=e.visitNull;break;case re.Bool:r=e.visitBool;break;case re.Int:r=e.visitInt;break;case re.Int8:r=e.visitInt8||e.visitInt;break;case re.Int16:r=e.visitInt16||e.visitInt;break;case re.Int32:r=e.visitInt32||e.visitInt;break;case re.Int64:r=e.visitInt64||e.visitInt;break;case re.Uint8:r=e.visitUint8||e.visitInt;break;case re.Uint16:r=e.visitUint16||e.visitInt;break;case re.Uint32:r=e.visitUint32||e.visitInt;break;case re.Uint64:r=e.visitUint64||e.visitInt;break;case re.Float:r=e.visitFloat;break;case re.Float16:r=e.visitFloat16||e.visitFloat;break;case re.Float32:r=e.visitFloat32||e.visitFloat;break;case re.Float64:r=e.visitFloat64||e.visitFloat;break;case re.Utf8:r=e.visitUtf8;break;case re.Binary:r=e.visitBinary;break;case re.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case re.Date:r=e.visitDate;break;case re.DateDay:r=e.visitDateDay||e.visitDate;break;case re.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case re.Timestamp:r=e.visitTimestamp;break;case re.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case re.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case re.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case re.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case re.Time:r=e.visitTime;break;case re.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case re.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case re.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case re.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case re.Decimal:r=e.visitDecimal;break;case re.List:r=e.visitList;break;case re.Struct:r=e.visitStruct;break;case re.Union:r=e.visitUnion;break;case re.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case re.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case re.Dictionary:r=e.visitDictionary;break;case re.Interval:r=e.visitInterval;break;case re.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case re.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case re.Duration:r=e.visitDuration;break;case re.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case re.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case re.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case re.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case re.FixedSizeList:r=e.visitFixedSizeList;break;case re.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${re[t]}'`)}function hhe(e){switch(e.typeId){case re.Null:return re.Null;case re.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?re.Int8:re.Uint8;case 16:return n?re.Int16:re.Uint16;case 32:return n?re.Int32:re.Uint32;case 64:return n?re.Int64:re.Uint64}return re.Int}case re.Float:switch(e.precision){case zo.HALF:return re.Float16;case zo.SINGLE:return re.Float32;case zo.DOUBLE:return re.Float64}return re.Float;case re.Binary:return re.Binary;case re.Utf8:return re.Utf8;case re.Bool:return re.Bool;case re.Decimal:return re.Decimal;case re.Time:switch(e.unit){case Yt.SECOND:return re.TimeSecond;case Yt.MILLISECOND:return re.TimeMillisecond;case Yt.MICROSECOND:return re.TimeMicrosecond;case Yt.NANOSECOND:return re.TimeNanosecond}return re.Time;case re.Timestamp:switch(e.unit){case Yt.SECOND:return re.TimestampSecond;case Yt.MILLISECOND:return re.TimestampMillisecond;case Yt.MICROSECOND:return re.TimestampMicrosecond;case Yt.NANOSECOND:return re.TimestampNanosecond}return re.Timestamp;case re.Date:switch(e.unit){case Uh.DAY:return re.DateDay;case Uh.MILLISECOND:return re.DateMillisecond}return re.Date;case re.Interval:switch(e.unit){case zh.DAY_TIME:return re.IntervalDayTime;case zh.YEAR_MONTH:return re.IntervalYearMonth}return re.Interval;case re.Duration:switch(e.unit){case Yt.SECOND:return re.DurationSecond;case Yt.MILLISECOND:return re.DurationMillisecond;case Yt.MICROSECOND:return re.DurationMicrosecond;case Yt.NANOSECOND:return re.DurationNanosecond}return re.Duration;case re.Map:return re.Map;case re.List:return re.List;case re.Struct:return re.Struct;case re.Union:switch(e.mode){case il.Dense:return re.DenseUnion;case il.Sparse:return re.SparseUnion}return re.Union;case re.FixedSizeBinary:return re.FixedSizeBinary;case re.FixedSizeList:return re.FixedSizeList;case re.Dictionary:return re.Dictionary}throw new Error(`Unrecognized type '${re[e.typeId]}'`)}Cn.prototype.visitInt8=null;Cn.prototype.visitInt16=null;Cn.prototype.visitInt32=null;Cn.prototype.visitInt64=null;Cn.prototype.visitUint8=null;Cn.prototype.visitUint16=null;Cn.prototype.visitUint32=null;Cn.prototype.visitUint64=null;Cn.prototype.visitFloat16=null;Cn.prototype.visitFloat32=null;Cn.prototype.visitFloat64=null;Cn.prototype.visitDateDay=null;Cn.prototype.visitDateMillisecond=null;Cn.prototype.visitTimestampSecond=null;Cn.prototype.visitTimestampMillisecond=null;Cn.prototype.visitTimestampMicrosecond=null;Cn.prototype.visitTimestampNanosecond=null;Cn.prototype.visitTimeSecond=null;Cn.prototype.visitTimeMillisecond=null;Cn.prototype.visitTimeMicrosecond=null;Cn.prototype.visitTimeNanosecond=null;Cn.prototype.visitDenseUnion=null;Cn.prototype.visitSparseUnion=null;Cn.prototype.visitIntervalDayTime=null;Cn.prototype.visitIntervalYearMonth=null;Cn.prototype.visitDuration=null;Cn.prototype.visitDurationSecond=null;Cn.prototype.visitDurationMillisecond=null;Cn.prototype.visitDurationMicrosecond=null;Cn.prototype.visitDurationNanosecond=null;const aRe=new Float64Array(1),H_=new Uint32Array(aRe.buffer);function uRe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function lRe(e){if(e!==e)return 32256;aRe[0]=e;const t=(H_[1]&2147483648)>>16&65535;let n=H_[1]&2146435072,r=0;return n>=1089470464?H_[0]>0?n=31744:(n=(n&2080374784)>>16,r=(H_[1]&1048575)>>10):n<=1056964608?(r=1048576+(H_[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(H_[1]&1048575)+512>>10),t|n|r&65535}class Zt extends Cn{}function on(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const MTt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},sJ=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},LTt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},FTt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},cRe=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},BTt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},mg=({values:e},t,n)=>{e[t]=n},oJ=({values:e},t,n)=>{e[t]=n},fRe=({values:e},t,n)=>{e[t]=lRe(n)},jTt=(e,t,n)=>{switch(e.type.precision){case zo.HALF:return fRe(e,t,n);case zo.SINGLE:case zo.DOUBLE:return oJ(e,t,n)}},aJ=({values:e},t,n)=>{MTt(e,t,n.valueOf())},uJ=({values:e},t,n)=>{sJ(e,t*2,n.valueOf())},dRe=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},UTt=({values:e,valueOffsets:t},n,r)=>cRe(e,t,n,r),zTt=({values:e,valueOffsets:t},n,r)=>{cRe(e,t,n,WQ(r))},hRe=(e,t,n)=>{e.type.unit===Uh.DAY?aJ(e,t,n):uJ(e,t,n)},lJ=({values:e},t,n)=>sJ(e,t*2,n/1e3),cJ=({values:e},t,n)=>sJ(e,t*2,n),fJ=({values:e},t,n)=>LTt(e,t*2,n),dJ=({values:e},t,n)=>FTt(e,t*2,n),pRe=(e,t,n)=>{switch(e.type.unit){case Yt.SECOND:return lJ(e,t,n);case Yt.MILLISECOND:return cJ(e,t,n);case Yt.MICROSECOND:return fJ(e,t,n);case Yt.NANOSECOND:return dJ(e,t,n)}},hJ=({values:e},t,n)=>{e[t]=n},pJ=({values:e},t,n)=>{e[t]=n},mJ=({values:e},t,n)=>{e[t]=n},gJ=({values:e},t,n)=>{e[t]=n},mRe=(e,t,n)=>{switch(e.type.unit){case Yt.SECOND:return hJ(e,t,n);case Yt.MILLISECOND:return pJ(e,t,n);case Yt.MICROSECOND:return mJ(e,t,n);case Yt.NANOSECOND:return gJ(e,t,n)}},gRe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},VTt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=Yc.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},HTt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=Yc.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},qTt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),WTt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),GTt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),YTt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),KTt=(e,t,n)=>{const r=e.type.children.map(s=>Yc.getVisitFn(s.type)),i=n instanceof Map?GTt(t,n):n instanceof gr?WTt(t,n):Array.isArray(n)?qTt(t,n):YTt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},XTt=(e,t,n)=>{e.type.mode===il.Dense?yRe(e,t,n):vRe(e,t,n)},yRe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Yc.visit(i,e.valueOffsets[t],n)},vRe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Yc.visit(i,t,n)},QTt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},bRe=(e,t,n)=>{e.type.unit===zh.DAY_TIME?yJ(e,t,n):vJ(e,t,n)},yJ=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},vJ=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},bJ=({values:e},t,n)=>{e[t]=n},_J=({values:e},t,n)=>{e[t]=n},wJ=({values:e},t,n)=>{e[t]=n},EJ=({values:e},t,n)=>{e[t]=n},_Re=(e,t,n)=>{switch(e.type.unit){case Yt.SECOND:return bJ(e,t,n);case Yt.MILLISECOND:return _J(e,t,n);case Yt.MICROSECOND:return wJ(e,t,n);case Yt.NANOSECOND:return EJ(e,t,n)}},JTt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=Yc.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Zt.prototype.visitBool=on(BTt);Zt.prototype.visitInt=on(mg);Zt.prototype.visitInt8=on(mg);Zt.prototype.visitInt16=on(mg);Zt.prototype.visitInt32=on(mg);Zt.prototype.visitInt64=on(mg);Zt.prototype.visitUint8=on(mg);Zt.prototype.visitUint16=on(mg);Zt.prototype.visitUint32=on(mg);Zt.prototype.visitUint64=on(mg);Zt.prototype.visitFloat=on(jTt);Zt.prototype.visitFloat16=on(fRe);Zt.prototype.visitFloat32=on(oJ);Zt.prototype.visitFloat64=on(oJ);Zt.prototype.visitUtf8=on(zTt);Zt.prototype.visitBinary=on(UTt);Zt.prototype.visitFixedSizeBinary=on(dRe);Zt.prototype.visitDate=on(hRe);Zt.prototype.visitDateDay=on(aJ);Zt.prototype.visitDateMillisecond=on(uJ);Zt.prototype.visitTimestamp=on(pRe);Zt.prototype.visitTimestampSecond=on(lJ);Zt.prototype.visitTimestampMillisecond=on(cJ);Zt.prototype.visitTimestampMicrosecond=on(fJ);Zt.prototype.visitTimestampNanosecond=on(dJ);Zt.prototype.visitTime=on(mRe);Zt.prototype.visitTimeSecond=on(hJ);Zt.prototype.visitTimeMillisecond=on(pJ);Zt.prototype.visitTimeMicrosecond=on(mJ);Zt.prototype.visitTimeNanosecond=on(gJ);Zt.prototype.visitDecimal=on(gRe);Zt.prototype.visitList=on(VTt);Zt.prototype.visitStruct=on(KTt);Zt.prototype.visitUnion=on(XTt);Zt.prototype.visitDenseUnion=on(yRe);Zt.prototype.visitSparseUnion=on(vRe);Zt.prototype.visitDictionary=on(QTt);Zt.prototype.visitInterval=on(bRe);Zt.prototype.visitIntervalDayTime=on(yJ);Zt.prototype.visitIntervalYearMonth=on(vJ);Zt.prototype.visitDuration=on(_Re);Zt.prototype.visitDurationSecond=on(bJ);Zt.prototype.visitDurationMillisecond=on(_J);Zt.prototype.visitDurationMicrosecond=on(wJ);Zt.prototype.visitDurationNanosecond=on(EJ);Zt.prototype.visitFixedSizeList=on(JTt);Zt.prototype.visitMap=on(HTt);const Yc=new Zt,kf=Symbol.for("parent"),lE=Symbol.for("rowIndex");class xJ{constructor(t,n){return this[kf]=t,this[lE]=n,new Proxy(this,new eCt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[lE],n=this[kf],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=sl.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${db(t)}: ${db(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new ZTt(this[kf],this[lE])}}class ZTt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,sl.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(xJ.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[kf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[lE]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class eCt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[kf].type.children.map(n=>n.name)}has(t,n){return t[kf].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[kf].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[kf].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=sl.visit(t[kf].children[r],t[lE]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[kf].type.children.findIndex(s=>s.name===n);return i!==-1?(Yc.visit(t[kf].children[i],t[lE],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class Kt extends Cn{}function en(e){return(t,n)=>t.getValid(n)?e(t,n):null}const tCt=(e,t)=>864e5*e[t],SJ=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),nCt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,rCt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,wRe=e=>new Date(e),iCt=(e,t)=>wRe(tCt(e,t)),sCt=(e,t)=>wRe(SJ(e,t)),oCt=(e,t)=>null,ERe=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},aCt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},xRe=({values:e},t)=>iCt(e,t),SRe=({values:e},t)=>sCt(e,t*2),tv=({stride:e,values:t},n)=>t[e*n],uCt=({stride:e,values:t},n)=>uRe(t[e*n]),TRe=({values:e},t)=>e[t],lCt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),cCt=({values:e,valueOffsets:t},n)=>ERe(e,t,n),fCt=({values:e,valueOffsets:t},n)=>{const r=ERe(e,t,n);return r!==null?VV(r):null},dCt=({values:e},t)=>e[t],hCt=({type:e,values:t},n)=>e.precision!==zo.HALF?t[n]:uRe(t[n]),pCt=(e,t)=>e.type.unit===Uh.DAY?xRe(e,t):SRe(e,t),CRe=({values:e},t)=>1e3*SJ(e,t*2),ARe=({values:e},t)=>SJ(e,t*2),IRe=({values:e},t)=>nCt(e,t*2),kRe=({values:e},t)=>rCt(e,t*2),mCt=(e,t)=>{switch(e.type.unit){case Yt.SECOND:return CRe(e,t);case Yt.MILLISECOND:return ARe(e,t);case Yt.MICROSECOND:return IRe(e,t);case Yt.NANOSECOND:return kRe(e,t)}},RRe=({values:e},t)=>e[t],NRe=({values:e},t)=>e[t],DRe=({values:e},t)=>e[t],PRe=({values:e},t)=>e[t],gCt=(e,t)=>{switch(e.type.unit){case Yt.SECOND:return RRe(e,t);case Yt.MILLISECOND:return NRe(e,t);case Yt.MICROSECOND:return DRe(e,t);case Yt.NANOSECOND:return PRe(e,t)}},yCt=({values:e,stride:t},n)=>KQ.decimal(e.subarray(t*n,t*(n+1))),vCt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new gr([u])},bCt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new JF(o.slice(i,s-i))},_Ct=(e,t)=>new xJ(e,t),wCt=(e,t)=>e.type.mode===il.Dense?ORe(e,t):$Re(e,t),ORe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return sl.visit(r,e.valueOffsets[t])},$Re=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return sl.visit(r,t)},ECt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},xCt=(e,t)=>e.type.unit===zh.DAY_TIME?MRe(e,t):LRe(e,t),MRe=({values:e},t)=>e.subarray(2*t,2*(t+1)),LRe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},FRe=({values:e},t)=>e[t],BRe=({values:e},t)=>e[t],jRe=({values:e},t)=>e[t],URe=({values:e},t)=>e[t],SCt=(e,t)=>{switch(e.type.unit){case Yt.SECOND:return FRe(e,t);case Yt.MILLISECOND:return BRe(e,t);case Yt.MICROSECOND:return jRe(e,t);case Yt.NANOSECOND:return URe(e,t)}},TCt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new gr([s])};Kt.prototype.visitNull=en(oCt);Kt.prototype.visitBool=en(aCt);Kt.prototype.visitInt=en(dCt);Kt.prototype.visitInt8=en(tv);Kt.prototype.visitInt16=en(tv);Kt.prototype.visitInt32=en(tv);Kt.prototype.visitInt64=en(TRe);Kt.prototype.visitUint8=en(tv);Kt.prototype.visitUint16=en(tv);Kt.prototype.visitUint32=en(tv);Kt.prototype.visitUint64=en(TRe);Kt.prototype.visitFloat=en(hCt);Kt.prototype.visitFloat16=en(uCt);Kt.prototype.visitFloat32=en(tv);Kt.prototype.visitFloat64=en(tv);Kt.prototype.visitUtf8=en(fCt);Kt.prototype.visitBinary=en(cCt);Kt.prototype.visitFixedSizeBinary=en(lCt);Kt.prototype.visitDate=en(pCt);Kt.prototype.visitDateDay=en(xRe);Kt.prototype.visitDateMillisecond=en(SRe);Kt.prototype.visitTimestamp=en(mCt);Kt.prototype.visitTimestampSecond=en(CRe);Kt.prototype.visitTimestampMillisecond=en(ARe);Kt.prototype.visitTimestampMicrosecond=en(IRe);Kt.prototype.visitTimestampNanosecond=en(kRe);Kt.prototype.visitTime=en(gCt);Kt.prototype.visitTimeSecond=en(RRe);Kt.prototype.visitTimeMillisecond=en(NRe);Kt.prototype.visitTimeMicrosecond=en(DRe);Kt.prototype.visitTimeNanosecond=en(PRe);Kt.prototype.visitDecimal=en(yCt);Kt.prototype.visitList=en(vCt);Kt.prototype.visitStruct=en(_Ct);Kt.prototype.visitUnion=en(wCt);Kt.prototype.visitDenseUnion=en(ORe);Kt.prototype.visitSparseUnion=en($Re);Kt.prototype.visitDictionary=en(ECt);Kt.prototype.visitInterval=en(xCt);Kt.prototype.visitIntervalDayTime=en(MRe);Kt.prototype.visitIntervalYearMonth=en(LRe);Kt.prototype.visitDuration=en(SCt);Kt.prototype.visitDurationSecond=en(FRe);Kt.prototype.visitDurationMillisecond=en(BRe);Kt.prototype.visitDurationMicrosecond=en(jRe);Kt.prototype.visitDurationNanosecond=en(URe);Kt.prototype.visitFixedSizeList=en(TCt);Kt.prototype.visitMap=en(bCt);const sl=new Kt,Lf=Symbol.for("keys"),cE=Symbol.for("vals");class JF{constructor(t){return this[Lf]=new gr([t.children[0]]).memoize(),this[cE]=t.children[1],new Proxy(this,new ACt)}[Symbol.iterator](){return new CCt(this[Lf],this[cE])}get size(){return this[Lf].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Lf],n=this[cE],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=sl.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${db(t)}: ${db(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class CCt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),sl.visit(this.vals,t)]})}}class ACt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Lf].toArray().map(String)}has(t,n){return t[Lf].includes(n)}getOwnPropertyDescriptor(t,n){if(t[Lf].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Lf].indexOf(n);if(r!==-1){const i=sl.visit(Reflect.get(t,cE),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Lf].indexOf(n);return i!==-1?(Yc.visit(Reflect.get(t,cE),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(JF.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Lf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[cE]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let phe;function zRe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(phe=s,s=o,o=phe),o>i&&(o=i),r?r(e,s,o):[s,o]}const mhe=e=>e!==e;function PS(e){if(typeof e!=="object"||e===null)return mhe(e)?mhe:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?yTt(e,n):!1:e instanceof Map?kCt(e):Array.isArray(e)?ICt(e):e instanceof gr?RCt(e):NCt(e,!0)}function ICt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=PS(e[n]);return ZF(t)}function kCt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=PS(r);return ZF(n)}function RCt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=PS(e.get(n));return ZF(t)}function NCt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=PS(e[n[i]]);return ZF(r,n)}function ZF(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return DCt(e,n);case Map:return ghe(e,n,n.keys());case JF:case xJ:case Object:case void 0:return ghe(e,n,t||Object.keys(n))}return n instanceof gr?PCt(e,n):!1}}function DCt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function PCt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function ghe(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function VRe(e,t,n,r){return(n&1<<r)!==0}function OCt(e,t,n,r){return(n&1<<r)>>r}function jM(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):HRe(new TJ(n,e,t,null,VRe)).subarray(0,r)),i}return n}function HRe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class TJ{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function WV(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new TJ(e,t,n-t,e,OCt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return WV(e,t,i)+WV(e,r,n)+$Ct(e,i>>3,r-i>>3)}function $Ct(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=a9(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=a9(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=a9(s.getUint8(i)),i+=1;return r}function a9(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const MCt=-1;class Pr{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return Tn.isSparseUnion(t)?this.children.some(n=>n.nullable):Tn.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(Tn.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=MCt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-WV(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof Pr?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Wd(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(Tn.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===il.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(Tn.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===il.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(jM(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Pr(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===re.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(jM(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[Bp.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[Bp.TYPE])&&(o[Bp.TYPE]=s.subarray(t,t+n)),(s=o[Bp.OFFSET])&&(o[Bp.OFFSET]=s.subarray(t,t+n+1))||(s=o[Bp.DATA])&&(o[Bp.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Pr.prototype.children=Object.freeze([]);class WA extends Cn{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Pr(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Or(t.nullBitmap),s=Zs(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Or(t.nullBitmap),s=Zs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Or(t.nullBitmap),s=Zs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Or(t.data),s=Or(t.nullBitmap),o=JT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Pr(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Or(t.data),s=Or(t.nullBitmap),o=JT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Pr(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Or(t.nullBitmap),s=Zs(n.ArrayType,t.data),{["length"]:o=s.length/Wd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Or(t.nullBitmap),s=Zs(n.ArrayType,t.data),{["length"]:o=s.length/Wd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Or(t.nullBitmap),s=Zs(n.ArrayType,t.data),{["length"]:o=s.length/Wd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Or(t.nullBitmap),s=Zs(n.ArrayType,t.data),{["length"]:o=s.length/Wd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Or(t.nullBitmap),s=Zs(n.ArrayType,t.data),{["length"]:o=s.length/Wd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Or(t.nullBitmap),o=JT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Pr(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Or(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Zs(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(Tn.isSparseUnion(n))return new Pr(n,r,o,a,[void 0,void 0,void 0,s],i);const u=JT(t.valueOffsets);return new Pr(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Or(t.nullBitmap),s=Zs(n.indices.ArrayType,t.data),{["dictionary"]:o=new gr([new WA().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Pr(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Or(t.nullBitmap),s=Zs(n.ArrayType,t.data),{["length"]:o=s.length/Wd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Or(t.nullBitmap),s=Zs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new WA().visit({type:n.valueType})}=t,s=Or(t.nullBitmap),{["length"]:o=i.length/Wd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new WA().visit({type:n.childType})}=t,s=Or(t.nullBitmap),o=JT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Pr(n,r,a,u,[o,void 0,s],[i])}}const LCt=new WA;function pa(e){return LCt.visit(e)}class yhe{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function qRe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function WRe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function GRe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function CJ(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function AJ(e,t){return e.getValid(t)}function fE(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return CJ(r,this._offsets,n,t)}}function YRe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=CJ(s,this._offsets,r,n);return t=void 0,o}}function KRe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):CJ(s,this._offsets,i,n);return t=void 0,o}}class Xt extends Cn{}function FCt(e,t){return t===null&&e.length>0?0:-1}function BCt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new TJ(n,e.offset+(t||0),e.length,n,VRe)){if(!i)return r;++r}return-1}function dn(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case re.Union:break;case re.Dictionary:break;default:return BCt(e,n)}const r=sl.getVisitFn(e),i=PS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function XRe(e,t,n){const r=sl.getVisitFn(e),i=PS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}Xt.prototype.visitNull=FCt;Xt.prototype.visitBool=dn;Xt.prototype.visitInt=dn;Xt.prototype.visitInt8=dn;Xt.prototype.visitInt16=dn;Xt.prototype.visitInt32=dn;Xt.prototype.visitInt64=dn;Xt.prototype.visitUint8=dn;Xt.prototype.visitUint16=dn;Xt.prototype.visitUint32=dn;Xt.prototype.visitUint64=dn;Xt.prototype.visitFloat=dn;Xt.prototype.visitFloat16=dn;Xt.prototype.visitFloat32=dn;Xt.prototype.visitFloat64=dn;Xt.prototype.visitUtf8=dn;Xt.prototype.visitBinary=dn;Xt.prototype.visitFixedSizeBinary=dn;Xt.prototype.visitDate=dn;Xt.prototype.visitDateDay=dn;Xt.prototype.visitDateMillisecond=dn;Xt.prototype.visitTimestamp=dn;Xt.prototype.visitTimestampSecond=dn;Xt.prototype.visitTimestampMillisecond=dn;Xt.prototype.visitTimestampMicrosecond=dn;Xt.prototype.visitTimestampNanosecond=dn;Xt.prototype.visitTime=dn;Xt.prototype.visitTimeSecond=dn;Xt.prototype.visitTimeMillisecond=dn;Xt.prototype.visitTimeMicrosecond=dn;Xt.prototype.visitTimeNanosecond=dn;Xt.prototype.visitDecimal=dn;Xt.prototype.visitList=dn;Xt.prototype.visitStruct=dn;Xt.prototype.visitUnion=dn;Xt.prototype.visitDenseUnion=XRe;Xt.prototype.visitSparseUnion=XRe;Xt.prototype.visitDictionary=dn;Xt.prototype.visitInterval=dn;Xt.prototype.visitIntervalDayTime=dn;Xt.prototype.visitIntervalYearMonth=dn;Xt.prototype.visitDuration=dn;Xt.prototype.visitDurationSecond=dn;Xt.prototype.visitDurationMillisecond=dn;Xt.prototype.visitDurationMicrosecond=dn;Xt.prototype.visitDurationNanosecond=dn;Xt.prototype.visitFixedSizeList=dn;Xt.prototype.visitMap=dn;const UM=new Xt;class Qt extends Cn{}function tn(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===re.Timestamp||t instanceof lu&&t.bitWidth!==64||t instanceof qm&&t.bitWidth!==64||t instanceof cy&&t.precision!==zo.HALF))return new yhe(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new yhe(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new jCt(o)})}class jCt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Qt.prototype.visitNull=tn;Qt.prototype.visitBool=tn;Qt.prototype.visitInt=tn;Qt.prototype.visitInt8=tn;Qt.prototype.visitInt16=tn;Qt.prototype.visitInt32=tn;Qt.prototype.visitInt64=tn;Qt.prototype.visitUint8=tn;Qt.prototype.visitUint16=tn;Qt.prototype.visitUint32=tn;Qt.prototype.visitUint64=tn;Qt.prototype.visitFloat=tn;Qt.prototype.visitFloat16=tn;Qt.prototype.visitFloat32=tn;Qt.prototype.visitFloat64=tn;Qt.prototype.visitUtf8=tn;Qt.prototype.visitBinary=tn;Qt.prototype.visitFixedSizeBinary=tn;Qt.prototype.visitDate=tn;Qt.prototype.visitDateDay=tn;Qt.prototype.visitDateMillisecond=tn;Qt.prototype.visitTimestamp=tn;Qt.prototype.visitTimestampSecond=tn;Qt.prototype.visitTimestampMillisecond=tn;Qt.prototype.visitTimestampMicrosecond=tn;Qt.prototype.visitTimestampNanosecond=tn;Qt.prototype.visitTime=tn;Qt.prototype.visitTimeSecond=tn;Qt.prototype.visitTimeMillisecond=tn;Qt.prototype.visitTimeMicrosecond=tn;Qt.prototype.visitTimeNanosecond=tn;Qt.prototype.visitDecimal=tn;Qt.prototype.visitList=tn;Qt.prototype.visitStruct=tn;Qt.prototype.visitUnion=tn;Qt.prototype.visitDenseUnion=tn;Qt.prototype.visitSparseUnion=tn;Qt.prototype.visitDictionary=tn;Qt.prototype.visitInterval=tn;Qt.prototype.visitIntervalDayTime=tn;Qt.prototype.visitIntervalYearMonth=tn;Qt.prototype.visitDuration=tn;Qt.prototype.visitDurationSecond=tn;Qt.prototype.visitDurationMillisecond=tn;Qt.prototype.visitDurationMicrosecond=tn;Qt.prototype.visitDurationNanosecond=tn;Qt.prototype.visitFixedSizeList=tn;Qt.prototype.visitMap=tn;const IJ=new Qt,UCt=(e,t)=>e+t;class nv extends Cn{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===Yt.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+Vh.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Vh.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const zCt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),VCt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),HCt=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Vh.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},qCt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Vh.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},WCt=(e,t)=>e.type.mode===il.Dense?QRe(e,t):JRe(e,t),QRe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Vh.visit(t[s],r[i])},JRe=({children:e},t)=>4+Vh.visitMany(e,e.map(()=>t)).reduce(UCt,0);nv.prototype.visitUtf8=zCt;nv.prototype.visitBinary=VCt;nv.prototype.visitList=HCt;nv.prototype.visitFixedSizeList=qCt;nv.prototype.visitUnion=WCt;nv.prototype.visitDenseUnion=QRe;nv.prototype.visitSparseUnion=JRe;const Vh=new nv;var ZRe;const eNe={},tNe={};class gr{constructor(t){var n,r,i;const s=t[0]instanceof gr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Pr)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=eNe[o.typeId],f=s[0];this.isValid=d=>AJ(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,tNe[o.typeId]),this._offsets=WRe(s);break}this.data=s,this.type=o,this.stride=Wd(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return qRe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${re[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return IJ.visit(this)}concat(...t){return new gr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new gr(zRe(this,t,n,({data:r,_offsets:i},s,o)=>GRe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case re.Int:case re.Float:case re.Decimal:case re.Time:case re.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new gr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return Tn.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Tn.isDictionary(this.type)){const t=new zM(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new gr(n)}return new zM(this)}unmemoize(){if(Tn.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new gr(n)}return this}}ZRe=Symbol.toStringTag;gr[ZRe]=(e=>{e.type=Tn.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(re).map(n=>re[n]).filter(n=>typeof n=="number"&&n!==re.NONE);for(const n of t){const r=sl.getVisitFnByTypeId(n),i=Yc.getVisitFnByTypeId(n),s=UM.getVisitFnByTypeId(n),o=Vh.getVisitFnByTypeId(n);eNe[n]={get:r,set:i,indexOf:s,byteLength:o},tNe[n]=Object.create(e,{isValid:{value:fE(AJ)},get:{value:fE(sl.getVisitFnByTypeId(n))},set:{value:YRe(Yc.getVisitFnByTypeId(n))},indexOf:{value:KRe(UM.getVisitFnByTypeId(n))},getByteLength:{value:fE(Vh.getVisitFnByTypeId(n))}})}return"Vector"})(gr.prototype);class zM extends gr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new zM(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new gr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function GCt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${YCt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function YCt(e){return typeof e!="bigint"?db(e):`${db(e)}n`}const u9=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,KCt=(e,t=0)=>e.length>=t?e.subarray(0,t):$M(new e.constructor(t),e,0);class e4{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?u9(r*1,this.BYTES_PER_ELEMENT):u9(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=u9(t*this.stride,this.BYTES_PER_ELEMENT);const n=KCt(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=$M(new this.ArrayType(t),this.buffer)}}e4.prototype.offset=0;class tR extends e4{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class nNe extends tR{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class rNe extends tR{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let hl=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=Wd(t),this._nulls=new nNe,n&&n.length>0&&(this._isValid=GCt(n))}toVector(){return new gr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),pa({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};hl.prototype.length=1;hl.prototype.stride=1;hl.prototype.children=null;hl.prototype.finished=!1;hl.prototype.nullValues=null;hl.prototype._isValid=()=>!0;class gg extends hl{constructor(t){super(t),this._values=new tR(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class t4 extends hl{constructor(t){super(t),this._pendingLength=0,this._offsets=new rNe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof JF?n[Lf].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class GV{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const l9=2,th=4,Qp=4,qr=4,Gg=new Int32Array(2),vhe=new Float32Array(Gg.buffer),bhe=new Float64Array(Gg.buffer),SD=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var YV;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(YV||(YV={}));let VM=class iNe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new iNe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Gg[0]=this.readInt32(t),vhe[0]}readFloat64(t){return Gg[SD?0:1]=this.readInt32(t),Gg[SD?1:0]=this.readInt32(t+4),bhe[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){vhe[0]=n,this.writeInt32(t,Gg[0])}writeFloat64(t,n){bhe[0]=n,this.writeInt32(t,Gg[SD?0:1]),this.writeInt32(t+4,Gg[SD?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+th+Qp)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Qp;n++)t+=String.fromCharCode(this.readInt8(this.position_+th+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=th;const i=this.bytes_.subarray(t,t+r);return n===YV.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+th}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Qp)throw new Error("FlatBuffers: file identifier must be length "+Qp);for(let n=0;n<Qp;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+th+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},sNe=class oNe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=VM.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=oNe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=VM.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(th,0),this.writeInt32(this.offset()-t+th)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*l9;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=l9;l<s;l+=l9)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?qr:0;if(n){const s=n;if(this.prep(this.minalign,th+Qp+i),s.length!=Qp)throw new TypeError("FlatBuffers: file identifier must be length "+Qp);for(let o=Qp-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,th+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(th,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class Ps{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Ps).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+qr),(n||new Ps).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Ps.startKeyValue(t),Ps.addKey(t,n),Ps.addValue(t,r),Ps.endKeyValue(t)}}var px;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(px||(px={}));var mx;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(mx||(mx={}));var HM;(function(e){e[e.DenseArray=0]="DenseArray"})(HM||(HM={}));class Al{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new Al).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+qr),(n||new Al).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return Al.startInt(t),Al.addBitWidth(t,n),Al.addIsSigned(t,r),Al.endInt(t)}}class Jp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new Jp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+qr),(n||new Jp).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Al).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):HM.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,HM.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class E1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new E1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+qr),(n||new E1).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return E1.startBinary(t),E1.endBinary(t)}}class x1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new x1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+qr),(n||new x1).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return x1.startBool(t),x1.endBool(t)}}var qM;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(qM||(qM={}));let JP=class lw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new lw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+qr),(n||new lw).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):qM.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,qM.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return lw.startDate(t),lw.addUnit(t,n),lw.endDate(t)}};class ku{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new ku).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+qr),(n||new ku).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return ku.startDecimal(t),ku.addPrecision(t,n),ku.addScale(t,r),ku.addBitWidth(t,i),ku.endDecimal(t)}}var dy;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(dy||(dy={}));class nh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new nh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+qr),(n||new nh).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):dy.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,dy.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return nh.startDuration(t),nh.addUnit(t,n),nh.endDuration(t)}}class rh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new rh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+qr),(n||new rh).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return rh.startFixedSizeBinary(t),rh.addByteWidth(t,n),rh.endFixedSizeBinary(t)}}class ih{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new ih).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+qr),(n||new ih).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return ih.startFixedSizeList(t),ih.addListSize(t,n),ih.endFixedSizeList(t)}}var WM;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(WM||(WM={}));class sh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new sh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+qr),(n||new sh).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):WM.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,WM.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return sh.startFloatingPoint(t),sh.addPrecision(t,n),sh.endFloatingPoint(t)}}var GM;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(GM||(GM={}));class oh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new oh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+qr),(n||new oh).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):GM.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,GM.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return oh.startInterval(t),oh.addUnit(t,n),oh.endInterval(t)}}class S1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new S1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+qr),(n||new S1).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return S1.startList(t),S1.endList(t)}}let ZP=class cw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new cw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+qr),(n||new cw).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return cw.startMap(t),cw.addKeysSorted(t,n),cw.endMap(t)}};class T1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new T1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+qr),(n||new T1).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return T1.startNull(t),T1.endNull(t)}}class C1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new C1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+qr),(n||new C1).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return C1.startStruct_(t),C1.endStruct_(t)}}let qC=class Vv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new Vv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+qr),(n||new Vv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):dy.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,dy.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return Vv.startTime(t),Vv.addUnit(t,n),Vv.addBitWidth(t,r),Vv.endTime(t)}},WC=class Hv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new Hv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+qr),(n||new Hv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):dy.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,dy.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return Hv.startTimestamp(t),Hv.addUnit(t,n),Hv.addTimezone(t,r),Hv.endTimestamp(t)}};var YM;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(YM||(YM={}));let qv=class Wv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Wv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+qr),(n||new Wv).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):YM.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,YM.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return Wv.startUnion(t),Wv.addMode(t,n),Wv.addTypeIds(t,r),Wv.endUnion(t)}};class A1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new A1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+qr),(n||new A1).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return A1.startUtf8(t),A1.endUtf8(t)}}var Ei;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(Ei||(Ei={}));let bc=class eO{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new eO).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+qr),(n||new eO).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Ei.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Jp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new eO).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new Ps).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,Ei.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Hd=class Lp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Lp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+qr),(n||new Lp).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):mx.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new bc).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Ps).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,mx.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return Lp.startSchema(t),Lp.addEndianness(t,n),Lp.addFields(t,r),Lp.addCustomMetadata(t,i),Lp.addFeatures(t,s),Lp.endSchema(t)}};class El{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new El).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+qr),(n||new El).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):px.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Hd).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new GV).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new GV).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Ps).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,px.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class Ar{constructor(t=[],n,r,i=Qa.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=XV(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new Ar(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new Ar(n,this.metadata)}assign(...t){const n=t[0]instanceof Ar?t[0]:Array.isArray(t[0])?new Ar(t[0]):new Ar(t),r=[...this.fields],i=TD(TD(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:TD(TD(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=XV(s,new Map);return new Ar([...r,...s],i,new Map([...this.dictionaries,...o]))}}Ar.prototype.fields=null;Ar.prototype.metadata=null;Ar.prototype.dictionaries=null;let Ur=class KV{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new KV(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],KV.new(n,r,i,s)}};Ur.prototype.type=null;Ur.prototype.name=null;Ur.prototype.nullable=null;Ur.prototype.metadata=null;function TD(e,t){return new Map([...e||new Map,...t||new Map])}function XV(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(Tn.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&XV(s.children,t)}return t}var XCt=sNe,QCt=VM;class QV{static decode(t){t=new QCt(Or(t));const n=El.getRootAsFooter(t),r=Ar.decode(n.schema(),new Map,n.version());return new JCt(r,n)}static encode(t){const n=new XCt,r=Ar.encode(n,t.schema);El.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())hy.encode(n,o);const i=n.endVector();El.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())hy.encode(n,o);const s=n.endVector();return El.startFooter(n),El.addSchema(n,r),El.addVersion(n,Qa.V5),El.addRecordBatches(n,i),El.addDictionaries(n,s),El.finishFooterBuffer(n,El.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Qa.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class JCt extends QV{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return hy.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return hy.decode(n)}return null}}class hy{static decode(t){return new hy(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return GV.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=ad(r),this.bodyLength=ad(n)}}const CD=Object.freeze({done:!0,value:void 0});class aNe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class ZCt extends aNe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Yp(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(CD);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return dhe.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return dhe.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Yp(this,void 0,void 0,function*(){return yield this.abort(t),CD})}return(t){return Yp(this,void 0,void 0,function*(){return yield this.close(),CD})}read(t){return Yp(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Yp(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(CD)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class c9 extends ZCt{write(t){if((t=Or(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?VV(this.toUint8Array(!0)):this.toUint8Array(!1).then(VV)}toUint8Array(t=!1){return t?jh(this._values)[0]:Yp(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=IA(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return jh(o,a)[0]})}}class uNe extends t4{constructor(t){super(t),this._values=new e4(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Or(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class eAt extends hl{constructor(t){super(t),this._values=new nNe}setValue(t,n){this._values.set(t,+n)}}class n4 extends gg{}n4.prototype._setValue=hRe;class lNe extends n4{}lNe.prototype._setValue=aJ;class cNe extends n4{}cNe.prototype._setValue=uJ;class fNe extends gg{}fNe.prototype._setValue=gRe;class tAt extends hl{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new fy(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=KM({type:this.type.indices,nullValues:n}),this.dictionary=KM({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class dNe extends gg{}dNe.prototype._setValue=dRe;class nAt extends hl{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new hx(this.type.listSize,new Ur(n,t.type,!0)),r}}class r4 extends gg{setValue(t,n){this._values.set(t,n)}}class rAt extends r4{setValue(t,n){super.setValue(t,lRe(n))}}class iAt extends r4{}class sAt extends r4{}class i4 extends gg{}i4.prototype._setValue=bRe;class hNe extends i4{}hNe.prototype._setValue=yJ;class pNe extends i4{}pNe.prototype._setValue=vJ;class OS extends gg{}OS.prototype._setValue=_Re;class mNe extends OS{}mNe.prototype._setValue=bJ;class gNe extends OS{}gNe.prototype._setValue=_J;class yNe extends OS{}yNe.prototype._setValue=wJ;class vNe extends OS{}vNe.prototype._setValue=EJ;class yg extends gg{setValue(t,n){this._values.set(t,n)}}class oAt extends yg{}class aAt extends yg{}class uAt extends yg{}class lAt extends yg{}class cAt extends yg{}class fAt extends yg{}class dAt extends yg{}class hAt extends yg{}class pAt extends t4{constructor(t){super(t),this._offsets=new rNe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new dx(new Ur(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class mAt extends t4{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new xI(new Ur(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class gAt extends hl{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class yAt extends hl{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new va([...this.type.children,new Ur(n,t.type,!0)]),r}}class $S extends gg{}$S.prototype._setValue=pRe;class bNe extends $S{}bNe.prototype._setValue=lJ;class _Ne extends $S{}_Ne.prototype._setValue=cJ;class wNe extends $S{}wNe.prototype._setValue=fJ;class ENe extends $S{}ENe.prototype._setValue=dJ;class MS extends gg{}MS.prototype._setValue=mRe;class xNe extends MS{}xNe.prototype._setValue=hJ;class SNe extends MS{}SNe.prototype._setValue=pJ;class TNe extends MS{}TNe.prototype._setValue=mJ;class CNe extends MS{}CNe.prototype._setValue=gJ;class kJ extends hl{constructor(t){super(t),this._typeIds=new tR(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Ur(n,t.type)];return this.type=new EI(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class vAt extends kJ{}class bAt extends kJ{constructor(t){super(t),this._offsets=new tR(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class ANe extends t4{constructor(t){super(t),this._values=new e4(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,WQ(n))}_flushPending(t,n){}}ANe.prototype._flushPending=uNe.prototype._flushPending;class _At extends Cn{visitNull(){return gAt}visitBool(){return eAt}visitInt(){return yg}visitInt8(){return oAt}visitInt16(){return aAt}visitInt32(){return uAt}visitInt64(){return lAt}visitUint8(){return cAt}visitUint16(){return fAt}visitUint32(){return dAt}visitUint64(){return hAt}visitFloat(){return r4}visitFloat16(){return rAt}visitFloat32(){return iAt}visitFloat64(){return sAt}visitUtf8(){return ANe}visitBinary(){return uNe}visitFixedSizeBinary(){return dNe}visitDate(){return n4}visitDateDay(){return lNe}visitDateMillisecond(){return cNe}visitTimestamp(){return $S}visitTimestampSecond(){return bNe}visitTimestampMillisecond(){return _Ne}visitTimestampMicrosecond(){return wNe}visitTimestampNanosecond(){return ENe}visitTime(){return MS}visitTimeSecond(){return xNe}visitTimeMillisecond(){return SNe}visitTimeMicrosecond(){return TNe}visitTimeNanosecond(){return CNe}visitDecimal(){return fNe}visitList(){return pAt}visitStruct(){return yAt}visitUnion(){return kJ}visitDenseUnion(){return bAt}visitSparseUnion(){return vAt}visitDictionary(){return tAt}visitInterval(){return i4}visitIntervalDayTime(){return hNe}visitIntervalYearMonth(){return pNe}visitDuration(){return OS}visitDurationSecond(){return mNe}visitDurationMillisecond(){return gNe}visitDurationMicrosecond(){return yNe}visistDurationNanosecond(){return vNe}visitFixedSizeList(){return nAt}visitMap(){return mAt}}const wAt=new _At;class Jt extends Cn{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function pu(e,t){return t instanceof e.constructor}function nR(e,t){return e===t||pu(e,t)}function vg(e,t){return e===t||pu(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function s4(e,t){return e===t||pu(e,t)&&e.precision===t.precision}function EAt(e,t){return e===t||pu(e,t)&&e.byteWidth===t.byteWidth}function RJ(e,t){return e===t||pu(e,t)&&e.unit===t.unit}function rR(e,t){return e===t||pu(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function iR(e,t){return e===t||pu(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function xAt(e,t){return e===t||pu(e,t)&&e.children.length===t.children.length&&py.compareManyFields(e.children,t.children)}function SAt(e,t){return e===t||pu(e,t)&&e.children.length===t.children.length&&py.compareManyFields(e.children,t.children)}function NJ(e,t){return e===t||pu(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&py.compareManyFields(e.children,t.children)}function TAt(e,t){return e===t||pu(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&py.visit(e.indices,t.indices)&&py.visit(e.dictionary,t.dictionary)}function DJ(e,t){return e===t||pu(e,t)&&e.unit===t.unit}function sR(e,t){return e===t||pu(e,t)&&e.unit===t.unit}function CAt(e,t){return e===t||pu(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&py.compareManyFields(e.children,t.children)}function AAt(e,t){return e===t||pu(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&py.compareManyFields(e.children,t.children)}Jt.prototype.visitNull=nR;Jt.prototype.visitBool=nR;Jt.prototype.visitInt=vg;Jt.prototype.visitInt8=vg;Jt.prototype.visitInt16=vg;Jt.prototype.visitInt32=vg;Jt.prototype.visitInt64=vg;Jt.prototype.visitUint8=vg;Jt.prototype.visitUint16=vg;Jt.prototype.visitUint32=vg;Jt.prototype.visitUint64=vg;Jt.prototype.visitFloat=s4;Jt.prototype.visitFloat16=s4;Jt.prototype.visitFloat32=s4;Jt.prototype.visitFloat64=s4;Jt.prototype.visitUtf8=nR;Jt.prototype.visitBinary=nR;Jt.prototype.visitFixedSizeBinary=EAt;Jt.prototype.visitDate=RJ;Jt.prototype.visitDateDay=RJ;Jt.prototype.visitDateMillisecond=RJ;Jt.prototype.visitTimestamp=rR;Jt.prototype.visitTimestampSecond=rR;Jt.prototype.visitTimestampMillisecond=rR;Jt.prototype.visitTimestampMicrosecond=rR;Jt.prototype.visitTimestampNanosecond=rR;Jt.prototype.visitTime=iR;Jt.prototype.visitTimeSecond=iR;Jt.prototype.visitTimeMillisecond=iR;Jt.prototype.visitTimeMicrosecond=iR;Jt.prototype.visitTimeNanosecond=iR;Jt.prototype.visitDecimal=nR;Jt.prototype.visitList=xAt;Jt.prototype.visitStruct=SAt;Jt.prototype.visitUnion=NJ;Jt.prototype.visitDenseUnion=NJ;Jt.prototype.visitSparseUnion=NJ;Jt.prototype.visitDictionary=TAt;Jt.prototype.visitInterval=DJ;Jt.prototype.visitIntervalDayTime=DJ;Jt.prototype.visitIntervalYearMonth=DJ;Jt.prototype.visitDuration=sR;Jt.prototype.visitDurationSecond=sR;Jt.prototype.visitDurationMillisecond=sR;Jt.prototype.visitDurationMicrosecond=sR;Jt.prototype.visitDurationNanosecond=sR;Jt.prototype.visitFixedSizeList=CAt;Jt.prototype.visitMap=AAt;const py=new Jt;function JV(e,t){return py.compareSchemas(e,t)}function KM(e){const t=e.type,n=new(wAt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(KM(Object.assign(Object.assign({},l),{type:u})))}}return n}function f9(e,t){return IAt(e,t.map(n=>n.data.concat()))}function IAt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=kAt(n,o,c,t,i),o>0&&(r[s++]=pa({type:new va(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new Il(e,f))]}function kAt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:pa({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var INe;class Ou{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new Ar([]),this._offsets=[0],this;let i,s;t[0]instanceof Ar&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof Il)return[u];if(u instanceof Ou)return u.batches;if(u instanceof Pr){if(u.type instanceof va)return[new Il(new Ar(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new gr([u[h]])),f=new Ar(l.map((h,p)=>new Ur(String(h),c[p].type))),[,d]=f9(f,c);return d.length===0?[new Il(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Ar([]),!(i instanceof Ar))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof Il))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!JV(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??WRe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=qRe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?IJ.visit(new gr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Ou(n,r.map(i=>new Il(n,i)))}slice(t,n){const r=this.schema;[t,n]=zRe({length:this.numRows},t,n);const i=GRe(this.data,this._offsets,t,n);return new Ou(r,i.map(s=>new Il(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=pa({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new gr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new gr([pa({type:new Hm,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=f9(r,a)}return new Ou(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Ou(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Ou(...f9(s,o))}}INe=Symbol.toStringTag;Ou[INe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=fE(AJ),e.get=fE(sl.getVisitFn(re.Struct)),e.set=YRe(Yc.getVisitFn(re.Struct)),e.indexOf=KRe(UM.getVisitFn(re.Struct)),e.getByteLength=fE(Vh.getVisitFn(re.Struct)),"Table"))(Ou.prototype);var kNe;let Il=class GC{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Ar))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=pa({nullCount:0,type:new va(this.schema.fields),children:this.schema.fields.map(n=>pa({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Pr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=_he(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Ur.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new Ar(r),a=pa({type:new va(r),length:s,children:i,nullCount:0});[this.schema,this.data]=_he(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=RNe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return sl.visit(this.data,t)}set(t,n){return Yc.visit(this.data,t,n)}indexOf(t,n){return UM.visit(this.data,t,n)}getByteLength(t){return Vh.visit(this.data,t)}[Symbol.iterator](){return IJ.visit(new gr([this.data]))}toArray(){return[...this]}concat(...t){return new Ou(this.schema,[this,...t])}slice(t,n){const[r]=new gr([this.data]).slice(t,n).data;return new GC(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new gr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new gr([pa({type:new Hm,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new Ar(s,new Map(this.schema.metadata)),i=pa({type:new va(s),children:o})}return new GC(r,i)}select(t){const n=this.schema.select(t),r=new va(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new GC(n,pa({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=pa({type:new va(n.fields),length:this.numRows,children:r});return new GC(n,i)}};kNe=Symbol.toStringTag;Il[kNe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Il.prototype);function _he(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:pa({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),pa({type:new va(i),length:n,children:s})]}function RNe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])RNe(a.children,l==null?void 0:l.children,n);if(Tn.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class RAt extends Il{constructor(t){const n=t.fields.map(i=>pa({type:i.type})),r=pa({type:new va(t.fields),nullCount:0,children:n});super(t,r)}}var XM;(function(e){e[e.BUFFER=0]="BUFFER"})(XM||(XM={}));var QM;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(QM||(QM={}));class Yg{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Yg).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+qr),(n||new Yg).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):QM.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):XM.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,QM.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,XM.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Yg.startBodyCompression(t),Yg.addCodec(t,n),Yg.addMethod(t,r),Yg.endBodyCompression(t)}}let NNe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},DNe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},jp=class ZV{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new ZV).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+qr),(n||new ZV).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new DNe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new NNe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Yg).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},fw=class eH{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new eH).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+qr),(n||new eH).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new jp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var JM;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(JM||(JM={}));let Pg=class Md{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new Md).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+qr),(n||new Md).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):px.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):JM.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Ps).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,px.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,JM.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return Md.startMessage(t),Md.addVersion(t,n),Md.addHeaderType(t,r),Md.addHeader(t,i),Md.addBodyLength(t,s),Md.addCustomMetadata(t,o),Md.endMessage(t)}};class NAt extends Cn{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return T1.startNull(n),T1.endNull(n)}visitInt(t,n){return Al.startInt(n),Al.addBitWidth(n,t.bitWidth),Al.addIsSigned(n,t.isSigned),Al.endInt(n)}visitFloat(t,n){return sh.startFloatingPoint(n),sh.addPrecision(n,t.precision),sh.endFloatingPoint(n)}visitBinary(t,n){return E1.startBinary(n),E1.endBinary(n)}visitBool(t,n){return x1.startBool(n),x1.endBool(n)}visitUtf8(t,n){return A1.startUtf8(n),A1.endUtf8(n)}visitDecimal(t,n){return ku.startDecimal(n),ku.addScale(n,t.scale),ku.addPrecision(n,t.precision),ku.addBitWidth(n,t.bitWidth),ku.endDecimal(n)}visitDate(t,n){return JP.startDate(n),JP.addUnit(n,t.unit),JP.endDate(n)}visitTime(t,n){return qC.startTime(n),qC.addUnit(n,t.unit),qC.addBitWidth(n,t.bitWidth),qC.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return WC.startTimestamp(n),WC.addUnit(n,t.unit),r!==void 0&&WC.addTimezone(n,r),WC.endTimestamp(n)}visitInterval(t,n){return oh.startInterval(n),oh.addUnit(n,t.unit),oh.endInterval(n)}visitDuration(t,n){return nh.startDuration(n),nh.addUnit(n,t.unit),nh.endDuration(n)}visitList(t,n){return S1.startList(n),S1.endList(n)}visitStruct(t,n){return C1.startStruct_(n),C1.endStruct_(n)}visitUnion(t,n){qv.startTypeIdsVector(n,t.typeIds.length);const r=qv.createTypeIdsVector(n,t.typeIds);return qv.startUnion(n),qv.addMode(n,t.mode),qv.addTypeIds(n,r),qv.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Jp.startDictionaryEncoding(n),Jp.addId(n,BigInt(t.id)),Jp.addIsOrdered(n,t.isOrdered),r!==void 0&&Jp.addIndexType(n,r),Jp.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return rh.startFixedSizeBinary(n),rh.addByteWidth(n,t.byteWidth),rh.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return ih.startFixedSizeList(n),ih.addListSize(n,t.listSize),ih.endFixedSizeList(n)}visitMap(t,n){return ZP.startMap(n),ZP.addKeysSorted(n,t.keysSorted),ZP.endMap(n)}}const d9=new NAt;function DAt(e,t=new Map){return new Ar(OAt(e,t),tO(e.metadata),t)}function PNe(e){return new Xl(e.count,ONe(e.columns),$Ne(e.columns))}function PAt(e){return new Hh(PNe(e.data),e.id,e.isDelta)}function OAt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Ur.fromJSON(n,t))}function whe(e,t){return(e.children||[]).filter(Boolean).map(n=>Ur.fromJSON(n,t))}function ONe(e){return(e||[]).reduce((t,n)=>[...t,new my(n.count,$At(n.VALIDITY)),...ONe(n.children)],[])}function $Ne(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new hh(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new hh(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new hh(t.length,i.OFFSET.length)),i.DATA&&t.push(new hh(t.length,i.DATA.length)),t=$Ne(i.children,t)}return t}function $At(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function MAt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=xhe(e,whe(e,t)),i=new Ur(e.name,o,e.nullable,tO(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?Ehe(r):new ly,a=new fy(t.get(n),r,n,s.isOrdered),i=new Ur(e.name,a,e.nullable,tO(e.metadata))):(r=(r=s.indexType)?Ehe(r):new ly,t.set(n,o=xhe(e,whe(e,t))),a=new fy(o,r,n,s.isOrdered),i=new Ur(e.name,a,e.nullable,tO(e.metadata))),i||null}function tO(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function Ehe(e){return new lu(e.isSigned,e.bitWidth)}function xhe(e,t){const n=e.type.name;switch(n){case"NONE":return new Hm;case"null":return new Hm;case"binary":return new _I;case"utf8":return new lx;case"bool":return new wI;case"list":return new dx((t||[])[0]);case"struct":return new va(t||[]);case"struct_":return new va(t||[])}switch(n){case"int":{const r=e.type;return new lu(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new cy(zo[r.precision])}case"decimal":{const r=e.type;return new MM(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new cx(Uh[r.unit])}case"time":{const r=e.type;return new qm(Yt[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new LM(Yt[r.unit],r.timezone)}case"interval":{const r=e.type;return new fx(zh[r.unit])}case"duration":{const r=e.type;return new FM(Yt[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new EI(il[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new BM(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new hx(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new xI((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var LAt=sNe,FAt=VM;class ah{static fromJSON(t,n){const r=new ah(0,Qa.V5,n);return r._createHeader=BAt(t,n),r}static decode(t){t=new FAt(Or(t));const n=Pg.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new ah(r,i,s);return o._createHeader=jAt(n,s),o}static encode(t){const n=new LAt;let r=-1;return t.isSchema()?r=Ar.encode(n,t.header()):t.isRecordBatch()?r=Xl.encode(n,t.header()):t.isDictionaryBatch()&&(r=Hh.encode(n,t.header())),Pg.startMessage(n),Pg.addVersion(n,Qa.V5),Pg.addHeader(n,r),Pg.addHeaderType(n,t.headerType),Pg.addBodyLength(n,BigInt(t.bodyLength)),Pg.finishMessageBuffer(n,Pg.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Ar)return new ah(0,Qa.V5,no.Schema,t);if(t instanceof Xl)return new ah(n,Qa.V5,no.RecordBatch,t);if(t instanceof Hh)return new ah(n,Qa.V5,no.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===no.Schema}isRecordBatch(){return this.headerType===no.RecordBatch}isDictionaryBatch(){return this.headerType===no.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=ad(t)}}class Xl{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=ad(t)}}class Hh{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=ad(n)}}class hh{constructor(t,n){this.offset=ad(t),this.length=ad(n)}}class my{constructor(t,n){this.length=ad(t),this.nullCount=ad(n)}}function BAt(e,t){return()=>{switch(t){case no.Schema:return Ar.fromJSON(e);case no.RecordBatch:return Xl.fromJSON(e);case no.DictionaryBatch:return Hh.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${no[t]}, type: ${t} }`)}}function jAt(e,t){return()=>{switch(t){case no.Schema:return Ar.decode(e.header(new Hd),new Map,e.version());case no.RecordBatch:return Xl.decode(e.header(new jp),e.version());case no.DictionaryBatch:return Hh.decode(e.header(new fw),e.version())}throw new Error(`Unrecognized Message type: { name: ${no[t]}, type: ${t} }`)}}Ur.encode=QAt;Ur.decode=KAt;Ur.fromJSON=MAt;Ar.encode=XAt;Ar.decode=UAt;Ar.fromJSON=DAt;Xl.encode=JAt;Xl.decode=zAt;Xl.fromJSON=PNe;Hh.encode=ZAt;Hh.decode=VAt;Hh.fromJSON=PAt;my.encode=e2t;my.decode=qAt;hh.encode=t2t;hh.decode=HAt;function UAt(e,t=new Map,n=Qa.V5){const r=YAt(e,t);return new Ar(r,nO(e),t,n)}function zAt(e,t=Qa.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Xl(e.length(),WAt(e),GAt(e,t))}function VAt(e,t=Qa.V5){return new Hh(Xl.decode(e.data(),t),e.id(),e.isDelta())}function HAt(e){return new hh(e.offset(),e.length())}function qAt(e){return new my(e.length(),e.nullCount())}function WAt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=my.decode(n));return t}function GAt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Qa.V4&&(r.bb_pos+=8*(i+1)),n[++s]=hh.decode(r));return n}function YAt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Ur.decode(r,t));return n}function She(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Ur.decode(r,t));return n}function KAt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=Che(e,She(e,t)),r=new Ur(e.name(),i,e.nullable(),nO(e))):t.has(n=ad(a.id()))?(s=(s=a.indexType())?The(s):new ly,o=new fy(t.get(n),s,n,a.isOrdered()),r=new Ur(e.name(),o,e.nullable(),nO(e))):(s=(s=a.indexType())?The(s):new ly,t.set(n,i=Che(e,She(e,t))),o=new fy(i,s,n,a.isOrdered()),r=new Ur(e.name(),o,e.nullable(),nO(e))),r||null}function nO(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function The(e){return new lu(e.isSigned(),e.bitWidth())}function Che(e,t){const n=e.typeType();switch(n){case Ei.NONE:return new Hm;case Ei.Null:return new Hm;case Ei.Binary:return new _I;case Ei.Utf8:return new lx;case Ei.Bool:return new wI;case Ei.List:return new dx((t||[])[0]);case Ei.Struct_:return new va(t||[])}switch(n){case Ei.Int:{const r=e.type(new Al);return new lu(r.isSigned(),r.bitWidth())}case Ei.FloatingPoint:{const r=e.type(new sh);return new cy(r.precision())}case Ei.Decimal:{const r=e.type(new ku);return new MM(r.scale(),r.precision(),r.bitWidth())}case Ei.Date:{const r=e.type(new JP);return new cx(r.unit())}case Ei.Time:{const r=e.type(new qC);return new qm(r.unit(),r.bitWidth())}case Ei.Timestamp:{const r=e.type(new WC);return new LM(r.unit(),r.timezone())}case Ei.Interval:{const r=e.type(new oh);return new fx(r.unit())}case Ei.Duration:{const r=e.type(new nh);return new FM(r.unit())}case Ei.Union:{const r=e.type(new qv);return new EI(r.mode(),r.typeIdsArray()||[],t||[])}case Ei.FixedSizeBinary:{const r=e.type(new rh);return new BM(r.byteWidth())}case Ei.FixedSizeList:{const r=e.type(new ih);return new hx(r.listSize(),(t||[])[0])}case Ei.Map:{const r=e.type(new ZP);return new xI((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${Ei[n]}" (${n})`)}function XAt(e,t){const n=t.fields.map(s=>Ur.encode(e,s));Hd.startFieldsVector(e,n.length);const r=Hd.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Hd.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return Ps.startKeyValue(e),Ps.addKey(e,a),Ps.addValue(e,u),Ps.endKeyValue(e)})):-1;return Hd.startSchema(e),Hd.addFields(e,r),Hd.addEndianness(e,n2t?mx.Little:mx.Big),i!==-1&&Hd.addCustomMetadata(e,i),Hd.endSchema(e)}function QAt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;Tn.isDictionary(s)?(o=s.dictionary.typeId,i=d9.visit(s,e),r=d9.visit(s.dictionary,e)):r=d9.visit(s,e);const a=(s.children||[]).map(c=>Ur.encode(e,c)),u=bc.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?bc.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return Ps.startKeyValue(e),Ps.addKey(e,d),Ps.addValue(e,h),Ps.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),bc.startField(e),bc.addType(e,r),bc.addTypeType(e,o),bc.addChildren(e,u),bc.addNullable(e,!!t.nullable),n!==-1&&bc.addName(e,n),i!==-1&&bc.addDictionary(e,i),l!==-1&&bc.addCustomMetadata(e,l),bc.endField(e)}function JAt(e,t){const n=t.nodes||[],r=t.buffers||[];jp.startNodesVector(e,n.length);for(const o of n.slice().reverse())my.encode(e,o);const i=e.endVector();jp.startBuffersVector(e,r.length);for(const o of r.slice().reverse())hh.encode(e,o);const s=e.endVector();return jp.startRecordBatch(e),jp.addLength(e,BigInt(t.length)),jp.addNodes(e,i),jp.addBuffers(e,s),jp.endRecordBatch(e)}function ZAt(e,t){const n=Xl.encode(e,t.data);return fw.startDictionaryBatch(e),fw.addId(e,BigInt(t.id)),fw.addIsDelta(e,t.isDelta),fw.addData(e,n),fw.endDictionaryBatch(e)}function e2t(e,t){return DNe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function t2t(e,t){return NNe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const n2t=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),tH="ARROW1",PJ=new Uint8Array(tH.length);for(let e=0;e<tH.length;e+=1)PJ[e]=tH.codePointAt(e);PJ.length;class ds extends Cn{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof Il?s.data.children:s.data),r=new ds;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof gr)return this.visitMany(t.data),this;const{type:n}=t;if(!Tn.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(Tn.isUnion(n))this.nodes.push(new my(r,0));else{const{nullCount:i}=t;Tn.isNull(n)||Jf.call(this,i<=0?new Uint8Array(0):jM(t.offset,r,t.nullBitmap)),this.nodes.push(new my(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Jf(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new hh(this._byteLength,t)),this._byteLength+=t,this}function r2t(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(Jf.call(this,i),n.mode===il.Sparse)return nH.call(this,e);if(n.mode===il.Dense){if(e.offset<=0)return Jf.call(this,s),nH.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);Jf.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function i2t(e){let t;return e.nullCount>=e.length?Jf.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Jf.call(this,jM(e.offset,e.length,t)):Jf.call(this,HRe(e.values))}function bg(e){return Jf.call(this,e.values.subarray(0,e.length*e.stride))}function MNe(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return Jf.call(this,Fke(-i,t+1,r)),Jf.call(this,n.subarray(i,i+o)),this}function OJ(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return Jf.call(this,Fke(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function nH(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}ds.prototype.visitBool=i2t;ds.prototype.visitInt=bg;ds.prototype.visitFloat=bg;ds.prototype.visitUtf8=MNe;ds.prototype.visitBinary=MNe;ds.prototype.visitFixedSizeBinary=bg;ds.prototype.visitDate=bg;ds.prototype.visitTimestamp=bg;ds.prototype.visitTime=bg;ds.prototype.visitDecimal=bg;ds.prototype.visitList=OJ;ds.prototype.visitStruct=nH;ds.prototype.visitUnion=r2t;ds.prototype.visitInterval=bg;ds.prototype.visitDuration=bg;ds.prototype.visitFixedSizeList=OJ;ds.prototype.visitMap=OJ;class LNe extends aNe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new c9,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,ev(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return XF(t)?t.then(n=>this.writeAll(n)):QF(t)?FJ(this,t):LJ(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof c9?this._sink=t:(this._sink=new c9,t&&cTt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&fTt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!JV(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Ou&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof Il&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!JV(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof Il?t instanceof RAt||this._writeRecordBatch(t):t instanceof Ou?this.writeAll(t.batches):GQ(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=ah.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===no.RecordBatch?this._recordBatchBlocks.push(new hy(a,t.bodyLength,this._position)):t.headerType===no.DictionaryBatch&&this._dictionaryBlocks.push(new hy(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Or(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(ah.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(PJ)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=ds.assemble(t),o=new Xl(t.numRows,r,i),a=ah.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=ds.assemble(new gr([t])),u=new Xl(t.length,s,o),l=new Hh(u,n,r),c=ah.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class $J extends LNe{static writeAll(t,n){const r=new $J(n);return XF(t)?t.then(i=>r.writeAll(i)):QF(t)?FJ(r,t):LJ(r,t)}}class MJ extends LNe{static writeAll(t){const n=new MJ;return XF(t)?t.then(r=>n.writeAll(r)):QF(t)?FJ(n,t):LJ(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=QV.encode(new QV(t,Qa.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function LJ(e,t){let n=t;t instanceof Ou&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function FJ(e,t){var n,r,i,s,o,a,u;return Yp(this,void 0,void 0,function*(){try{for(n=!0,r=IA(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function s2t(e,t="stream"){return(t==="stream"?$J:MJ).writeAll(e).toUint8Array(!0)}function BJ(e,t=1){return(e*t+63&-64||64)/t}function gy(e,t,n=e.BYTES_PER_ELEMENT){return new e(BJ(t,n))}function jJ(e){return e instanceof Pr?e:new Pr(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function o2t(e){return new gr([jJ(e)])}const UJ=new TextEncoder;function a2t(e,t,n){const r=UJ.encode(n);return e.set(r,t),r.length}function u2t(e,t,n){return UJ.encodeInto(n,e.subarray(t)).written}const l2t=UJ.encodeInto?u2t:a2t;function Ahe(e,t){const n=gy(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function c2t(e,t){const n=gy(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function f2t(e,t){const n=gy(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function d2t(e,t){const n=gy(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function h2t(e){const t=KM({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function p2t(e,t,n){const r=gy(Int32Array,t+1),i=gy(Uint8Array,3*n);let s=0;return{set(o,a){s+=l2t(i,s,o),r[a+1]=s},data:()=>{const o=BJ(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function m2t(e,t){const n=[],r=gy(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:g2t(e.dictionary,n,o)})}}function g2t(e,t,n){const r=p2t(e,t.length,n);return t.forEach(r.set),o2t(r.data())}function y2t(e,t){const n=gy(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function v2t(e,t,n=!0){let r;switch(e.typeId){case re.Int:r=e.bitWidth<64?Ahe:null;break;case re.Float:r=e.precision>0?Ahe:null;break;case re.Dictionary:r=e.dictionary.typeId===re.Utf8&&e.indices.typeId===re.Int&&e.indices.bitWidth<64?m2t:null;break;case re.Bool:r=c2t;break;case re.Date:r=e.unit?d2t:f2t;break}return r==null?h2t(e):n?y2t(r(e,t),t):r(e,t)}function b2t(e,t){const n=e.length,r=BJ(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),jJ({type:t,length:n,buffers:[null,i]})}function FNe(e,t,n,r,i=!0){const s=v2t(r,e,i);return t(n,s.set),jJ(s.data())}function zJ(e){if(e instanceof Tn||e==null)return e;switch(e){case re.Binary:return new _I;case re.Bool:return new wI;case re.DateDay:return new CTt;case re.DateMillisecond:case re.Date:return new ATt;case re.Dictionary:return new fy(new lx,new ly);case re.Float16:return new oRe;case re.Float32:return new rJ;case re.Float64:case re.Float:return new iJ;case re.Int8:return new XQ;case re.Int16:return new QQ;case re.Int32:case re.Int:return new ly;case re.Int64:return new JQ;case re.IntervalDayTime:return new DTt;case re.Interval:case re.IntervalYearMonth:return new PTt;case re.Null:return new Hm;case re.TimeMicrosecond:return new RTt;case re.TimeMillisecond:case re.Time:return new kTt;case re.TimeNanosecond:return new NTt;case re.TimeSecond:return new ITt;case re.Uint8:return new ZQ;case re.Uint16:return new eJ;case re.Uint32:return new tJ;case re.Uint64:return new nJ;case re.Utf8:return new lx;default:Sn(`Unsupported type code: ${Bh(e)}. Use a data type constructor instead?`)}}function _2t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function BNe(e,t){const n=rH();return e(t,n.add),n}function rH(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(Vm(t))++e.dates,_2t(t)&&++e.utcdays;else if(w1(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=rH());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=rH())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return zJ(w2t(e))}};return e}function w2t(e){const t=e.count-e.nulls;if(t===0)return re.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?re.Float64:n<128?re.Int8:n<32768?re.Int16:re.Int32:n>=2**32?re.Float64:n<256?re.Uint8:n<65536?re.Uint16:re.Uint32}else{if(e.nums===t)return re.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?re.Int64:Sn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?re.Uint64:Sn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return re.Bool;if(e.utcdays===t)return re.DateDay;if(e.dates===t)return re.DateMillisecond;if(e.arrays===t){const n=Ur.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new hx(e.minlen,n):new dx(n)}else if(e.structs===t){const n=e.struct_prof;return new va(Object.keys(n).map(r=>Ur.new(r,n[r].type(),!0)))}else{if(e.strings>0)return re.Dictionary;Sn("Type inference failure")}}}}function E2t(e,t,n,r,i,s=!0){if(i=zJ(i),!i){const o=BNe(r,t);s=o.nulls>0,i=o.type()}return FNe(n,r,t,i,s)}function x2t(e,t,n,r,i,s=!0){i=zJ(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=S2t(o);if(u&&a&&Ihe(u.type,i))return u;const l=o.data;if(Zk(l)){const c=T2t(l);if(a&&c&&Ihe(c,i))return b2t(l,c);i=i||c,s=!1}if(!i){const c=BNe(r,o);s=c.nulls>0,i=c.type()}return FNe(n,r,o,i,s)}function S2t(e){return e instanceof gr?e:e.vector instanceof gr?e.vector:null}function T2t(e){const n={Float32Array:rJ,Float64Array:iJ,Int8Array:XQ,Int16Array:QQ,Int32Array:ly,Uint8Array:ZQ,Uint16Array:eJ,Uint32Array:tJ,BigInt64Array:JQ,BigUint64Array:nJ}[e.constructor.name];return n?new n:null}function Ihe(e,t){return!e||!t?!0:e.compareTo(t)}function C2t(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function A2t(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&w1(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const I2t=()=>Sn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function k2t(){try{return Ou}catch{I2t()}}function jNe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=R2t(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&Sn("Column length mismatch"),a[l]=c});const u=k2t();return new u(a)}function R2t(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=bi(n)?n(e):mr(n)?n:null;if(mr(e))return{dataFrom:E2t,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:C2t(e,r,i)};if(N2t(e))return{dataFrom:x2t,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:A2t(e,r,i)};Sn("Unsupported input data type")}function N2t(e){return e&&bi(e.reify)}function D2t(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return s2t(jNe(e,r),n)}function P2t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function O2t(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&Vm(u))++i,P2t(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function o4(e,t){return bi(t)?t(e):t||e.columnNames()}function UNe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=O2t($2t(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function $2t(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function VJ(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function M2t(e,t={}){const n=o4(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":Vm(l)?YF(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return VJ(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function zNe(e,t={}){if(bi(t))return t(e)+"";const n=typeof e;if(n==="object"){if(Vm(e))return t.utc?YF(e):cke(e);{const r=JSON.stringify(e,(s,o)=>Zk(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function a4(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function L2t(e,t={}){const n=o4(e,t.columns),{align:r,format:i}=UNe(e,n,t),s=F2t(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(zNe(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",b=s[m]&&s[m](g,d,f)||"",w=(v?`text-align: ${v};`+(b?" ":""):"")+b;return`<${m}${w?` style="${w}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return VJ(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function F2t(e){return a4(e.style,t=>bi(t)?t:()=>t)}function B2t(e,t=!0,n=!1){return e===void 0||e?t:n}const j2t=e=>Vm(e)?YF(e,!0):e;function U2t(e,t={}){const n=B2t(t.schema),r=t.format||{},i=o4(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||j2t;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function z2t(e,t={}){const n=o4(e,t.columns),{align:r,format:i}=UNe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return VJ(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(zNe(u,i[l]))+"|"}}),a+`
`}function VNe(e,t){for(const[n,r]of KF(t))e.set(n,r);return e}function V2t(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function Wm(e,t,n=new Map){return t=uu(t)?e.columnName(t):t,Ko(t)?n.set(t,t):mr(t)?t.forEach(r=>Wm(e,r,n)):bi(t)?Wm(e,t(e),n):Ia(t)?VNe(n,t):Sn(`Invalid column selection: ${Bh(t)}`),n}function u4(e,t){return e.toObject=t,e}function HNe(e){return mr(e)?e.map(HNe):e&&e.toObject?e.toObject():e}function gx(){return u4(e=>e.columnNames(),()=>({all:[]}))}function qNe(...e){return e=e.flat(),u4(t=>{const n=Wm(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:HNe(e)}))}function H2t(e,t){return u4(n=>{let r=uu(e)?e:n.columnIndex(e),i=uu(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function q2t(e){return Ko(e)&&(e=RegExp(V2t(e))),u4(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function W2t(e){return Zk(e.data)?e.data.constructor:Array}class Zp extends lSt{static from(t,n){return new Zp(dSt(t,n),n)}static new(t,n){if(t instanceof Zp)return t;const r={},i=[];for(const[s,o]of KF(t))r[s]=o,i.push(s);return new Zp(r,n||i)}constructor(t,n,r,i,s,o){a4(t,fSt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new Zp(t||this._data,n||(t?null:this._names),o,i!==void 0?i:USt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=uc(r).groupby(r.groups());return t.forEach(s=>{s=Zp.new(s),s.numRows()!==n&&Sn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):Sn(`Unrecognized column: ${t}`)}object(t=0){return khe(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=Wm(this,t.columns||gx()),o=$ke(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),VSt(this,u,a,n)}return a}*[Symbol.iterator](){const t=khe(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(W2t(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=zSt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return jNe(this,t)}toArrowBuffer(t){return D2t(this,t)}toCSV(t){return M2t(this,t)}toHTML(t){return L2t(this,t)}toJSON(t){return U2t(this,t)}toMarkdown(t){return z2t(this,t)}}function khe(e){let t=e._builder;if(!t){const n=$ke(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class G2t{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function rr(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=Y2t[e.type];s&&s(e,t,n)}const AD=(e,t,n)=>{rr(e.argument,t,n,e)},h9=(e,t,n)=>{rr(e.left,t,n,e),rr(e.right,t,n,e)},Rhe=(e,t,n)=>{rr(e.test,t,n,e),rr(e.consequent,t,n,e),e.alternate&&rr(e.alternate,t,n,e)},p9=(e,t,n)=>{qd(e.params,t,n,e),rr(e.body,t,n,e)},Nhe=(e,t,n)=>{rr(e.callee,t,n,e),qd(e.arguments,t,n,e)},qd=(e,t,n,r)=>{e.forEach(i=>rr(i,t,n,r))},Y2t={TemplateLiteral:(e,t,n)=>{qd(e.expressions,t,n,e),qd(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{rr(e.object,t,n,e),rr(e.property,t,n,e)},CallExpression:Nhe,NewExpression:Nhe,ArrayExpression:(e,t,n)=>{qd(e.elements,t,n,e)},AssignmentExpression:h9,AwaitExpression:AD,BinaryExpression:h9,LogicalExpression:h9,UnaryExpression:AD,UpdateExpression:AD,ConditionalExpression:Rhe,ObjectExpression:(e,t,n)=>{qd(e.properties,t,n,e)},Property:(e,t,n)=>{rr(e.key,t,n,e),rr(e.value,t,n,e)},ArrowFunctionExpression:p9,FunctionExpression:p9,FunctionDeclaration:p9,VariableDeclaration:(e,t,n)=>{qd(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{rr(e.id,t,n,e),rr(e.init,t,n,e)},SpreadElement:(e,t,n)=>{rr(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{qd(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{rr(e.expression,t,n,e)},IfStatement:Rhe,ForStatement:(e,t,n)=>{rr(e.init,t,n,e),rr(e.test,t,n,e),rr(e.update,t,n,e),rr(e.body,t,n,e)},WhileStatement:(e,t,n)=>{rr(e.test,t,n,e),rr(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{rr(e.body,t,n,e),rr(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{rr(e.discriminant,t,n,e),qd(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&rr(e.test,t,n,e),qd(e.consequent,t,n,e)},ReturnStatement:AD,Program:(e,t,n)=>{rr(e.body[0],t,n,e)}};function WNe(e){delete e.start,delete e.end,delete e.optional}function Dhe(e){WNe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function K2t(e){return rr(e,null,{Column:Dhe,Constant:Dhe,Default:WNe}),e}function $s(e,t){return t&&t.type===e}function X2t(e){return $s(WSt,e)||$s(qSt,e)}function Q2t(e){return bi(e)?e:()=>e}const J2t="Escaped functions are not valid as rollup or pivot values.";function Z2t(e,t,n){e.aggronly&&Sn(J2t);const r="(row,data)=>fn("+Oke(e.table.columnNames())+",$)";return{escape:qQ.escape(r,Q2t(t.expr),n)}}var eIt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],GNe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],tIt="-----------------------------------------------------------------------------------------------------------------------------------------------------",YNe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",m9={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},g9="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",nIt={5:g9,"5module":g9+" export import",6:g9+" const class extends export import super"},rIt=/^in(stanceof)?$/,iIt=new RegExp("["+YNe+"]"),sIt=new RegExp("["+YNe+tIt+"]");function iH(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function Gm(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&iIt.test(String.fromCharCode(e)):t===!1?!1:iH(e,GNe)}function yx(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&sIt.test(String.fromCharCode(e)):t===!1?!1:iH(e,GNe)||iH(e,eIt)}var lr=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function pc(e,t){return new lr(e,{beforeExpr:!0,binop:t})}var mc={beforeExpr:!0},Eu={startsExpr:!0},HJ={};function Yn(e,t){return t===void 0&&(t={}),t.keyword=e,HJ[e]=new lr(e,t)}var K={num:new lr("num",Eu),regexp:new lr("regexp",Eu),string:new lr("string",Eu),name:new lr("name",Eu),privateId:new lr("privateId",Eu),eof:new lr("eof"),bracketL:new lr("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new lr("]"),braceL:new lr("{",{beforeExpr:!0,startsExpr:!0}),braceR:new lr("}"),parenL:new lr("(",{beforeExpr:!0,startsExpr:!0}),parenR:new lr(")"),comma:new lr(",",mc),semi:new lr(";",mc),colon:new lr(":",mc),dot:new lr("."),question:new lr("?",mc),questionDot:new lr("?."),arrow:new lr("=>",mc),template:new lr("template"),invalidTemplate:new lr("invalidTemplate"),ellipsis:new lr("...",mc),backQuote:new lr("`",Eu),dollarBraceL:new lr("${",{beforeExpr:!0,startsExpr:!0}),eq:new lr("=",{beforeExpr:!0,isAssign:!0}),assign:new lr("_=",{beforeExpr:!0,isAssign:!0}),incDec:new lr("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new lr("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:pc("||",1),logicalAND:pc("&&",2),bitwiseOR:pc("|",3),bitwiseXOR:pc("^",4),bitwiseAND:pc("&",5),equality:pc("==/!=/===/!==",6),relational:pc("</>/<=/>=",7),bitShift:pc("<</>>/>>>",8),plusMin:new lr("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:pc("%",10),star:pc("*",10),slash:pc("/",10),starstar:new lr("**",{beforeExpr:!0}),coalesce:pc("??",1),_break:Yn("break"),_case:Yn("case",mc),_catch:Yn("catch"),_continue:Yn("continue"),_debugger:Yn("debugger"),_default:Yn("default",mc),_do:Yn("do",{isLoop:!0,beforeExpr:!0}),_else:Yn("else",mc),_finally:Yn("finally"),_for:Yn("for",{isLoop:!0}),_function:Yn("function",Eu),_if:Yn("if"),_return:Yn("return",mc),_switch:Yn("switch"),_throw:Yn("throw",mc),_try:Yn("try"),_var:Yn("var"),_const:Yn("const"),_while:Yn("while",{isLoop:!0}),_with:Yn("with"),_new:Yn("new",{beforeExpr:!0,startsExpr:!0}),_this:Yn("this",Eu),_super:Yn("super",Eu),_class:Yn("class",Eu),_extends:Yn("extends",mc),_export:Yn("export"),_import:Yn("import",Eu),_null:Yn("null",Eu),_true:Yn("true",Eu),_false:Yn("false",Eu),_in:Yn("in",{beforeExpr:!0,binop:7}),_instanceof:Yn("instanceof",{beforeExpr:!0,binop:7}),_typeof:Yn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Yn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Yn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},cf=/\r\n?|\n|\u2028|\u2029/,oIt=new RegExp(cf.source,"g");function LS(e){return e===10||e===13||e===8232||e===8233}function KNe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(LS(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var XNe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Ac=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,QNe=Object.prototype,aIt=QNe.hasOwnProperty,uIt=QNe.toString,oR=Object.hasOwn||function(e,t){return aIt.call(e,t)},Phe=Array.isArray||function(e){return uIt.call(e)==="[object Array]"},Ohe=Object.create(null);function h0(e){return Ohe[e]||(Ohe[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function yy(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var lIt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,SI=function(t,n){this.line=t,this.column=n};SI.prototype.offset=function(t){return new SI(this.line,this.column+t)};var l4=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function JNe(e,t){for(var n=1,r=0;;){var i=KNe(e,r,t);if(i<0)return new SI(n,t-r);++n,r=i}}var sH={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},$he=!1;function cIt(e){var t={};for(var n in sH)t[n]=e&&oR(e,n)?e[n]:sH[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!$he&&typeof console=="object"&&console.warn&&($he=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),Phe(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return Phe(t.onComment)&&(t.onComment=fIt(t,t.onComment)),t}function fIt(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new l4(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var TI=1,FS=2,qJ=4,ZNe=8,eDe=16,tDe=32,WJ=64,nDe=128,aR=256,GJ=TI|FS|aR;function YJ(e,t){return FS|(e?qJ:0)|(t?ZNe:0)}var ZM=0,KJ=1,_g=2,rDe=3,iDe=4,sDe=5,Hs=function(t,n,r){this.options=t=cIt(t),this.sourceFile=t.sourceFile,this.keywords=h0(nIt[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=m9[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=h0(i);var s=(i?i+" ":"")+m9.strict;this.reservedWordsStrict=h0(s),this.reservedWordsStrictBind=h0(s+" "+m9.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(cf).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=K.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(TI),this.regexpState=null,this.privateNameStack=[]},cp={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Hs.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};cp.inFunction.get=function(){return(this.currentVarScope().flags&FS)>0};cp.inGenerator.get=function(){return(this.currentVarScope().flags&ZNe)>0&&!this.currentVarScope().inClassFieldInit};cp.inAsync.get=function(){return(this.currentVarScope().flags&qJ)>0&&!this.currentVarScope().inClassFieldInit};cp.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&aR)return!1;if(t.flags&FS)return(t.flags&qJ)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};cp.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&WJ)>0||n||this.options.allowSuperOutsideMethod};cp.allowDirectSuper.get=function(){return(this.currentThisScope().flags&nDe)>0};cp.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};cp.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(FS|aR))>0||n};cp.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&aR)>0};Hs.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Hs.parse=function(t,n){return new this(n,t).parse()};Hs.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Hs.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Hs.prototype,cp);var mu=Hs.prototype,dIt=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;mu.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){Ac.lastIndex=e,e+=Ac.exec(this.input)[0].length;var t=dIt.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){Ac.lastIndex=e+t[0].length;var n=Ac.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||cf.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,Ac.lastIndex=e,e+=Ac.exec(this.input)[0].length,this.input[e]===";"&&e++}};mu.eat=function(e){return this.type===e?(this.next(),!0):!1};mu.isContextual=function(e){return this.type===K.name&&this.value===e&&!this.containsEsc};mu.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};mu.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};mu.canInsertSemicolon=function(){return this.type===K.eof||this.type===K.braceR||cf.test(this.input.slice(this.lastTokEnd,this.start))};mu.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};mu.semicolon=function(){!this.eat(K.semi)&&!this.insertSemicolon()&&this.unexpected()};mu.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};mu.expect=function(e){this.eat(e)||this.unexpected()};mu.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var c4=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};mu.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};mu.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};mu.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};mu.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var Mt=Hs.prototype;Mt.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==K.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var XJ={kind:"loop"},hIt={kind:"switch"};Mt.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Ac.lastIndex=this.pos;var t=Ac.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(Gm(r,!0)){for(var i=n+1;yx(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!rIt.test(s))return!0}return!1};Mt.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Ac.lastIndex=this.pos;var e=Ac.exec(this.input),t=this.pos+e[0].length,n;return!cf.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(yx(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};Mt.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=K._var,s="let"),r){case K._break:case K._continue:return this.parseBreakContinueStatement(i,r.keyword);case K._debugger:return this.parseDebuggerStatement(i);case K._do:return this.parseDoStatement(i);case K._for:return this.parseForStatement(i);case K._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case K._class:return e&&this.unexpected(),this.parseClass(i,!0);case K._if:return this.parseIfStatement(i);case K._return:return this.parseReturnStatement(i);case K._switch:return this.parseSwitchStatement(i);case K._throw:return this.parseThrowStatement(i);case K._try:return this.parseTryStatement(i);case K._const:case K._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case K._while:return this.parseWhileStatement(i);case K._with:return this.parseWithStatement(i);case K.braceL:return this.parseBlock(!0,i);case K.semi:return this.parseEmptyStatement(i);case K._export:case K._import:if(this.options.ecmaVersion>10&&r===K._import){Ac.lastIndex=this.pos;var o=Ac.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===K._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===K.name&&c.type==="Identifier"&&this.eat(K.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};Mt.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(K.semi)||this.insertSemicolon()?e.label=null:this.type!==K.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};Mt.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};Mt.parseDoStatement=function(e){return this.next(),this.labels.push(XJ),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(K._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(K.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};Mt.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(XJ),this.enterScope(0),this.expect(K.parenL),this.type===K.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===K._var||this.type===K._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new c4,u=this.parseExpression(t>-1?"await":!0,a);return this.type===K._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};Mt.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,GA|(n?0:oH),!1,t)};Mt.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(K._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};Mt.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(K.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};Mt.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(K.braceL),this.labels.push(hIt),this.enterScope(0);for(var t,n=!1;this.type!==K.braceR;)if(this.type===K._case||this.type===K._default){var r=this.type===K._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(K.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};Mt.parseThrowStatement=function(e){return this.next(),cf.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var pIt=[];Mt.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?tDe:0),this.checkLValPattern(e,t?iDe:_g),this.expect(K.parenR),e};Mt.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===K._catch){var t=this.startNode();this.next(),this.eat(K.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(K._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};Mt.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};Mt.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(XJ),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};Mt.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};Mt.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};Mt.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===K._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};Mt.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};Mt.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(K.braceL),e&&this.enterScope(0);this.type!==K.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};Mt.parseFor=function(e,t){return e.init=t,this.expect(K.semi),e.test=this.type===K.semi?null:this.parseExpression(),this.expect(K.semi),e.update=this.type===K.parenR?null:this.parseExpression(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};Mt.parseForIn=function(e,t){var n=this.type===K._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};Mt.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(K.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===K._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(K.comma))break}return e};Mt.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?KJ:_g,!1)};var GA=1,oH=2,oDe=4;Mt.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===K.star&&t&oH&&this.unexpected(),e.generator=this.eat(K.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&GA&&(e.id=t&oDe&&this.type!==K.name?null:this.parseIdent(),e.id&&!(t&oH)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?KJ:_g:rDe));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(YJ(e.async,e.generator)),t&GA||(e.id=this.type===K.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&GA?"FunctionDeclaration":"FunctionExpression")};Mt.parseFunctionParams=function(e){this.expect(K.parenL),e.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};Mt.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(K.braceL);this.type!==K.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&mIt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};Mt.parseClassElement=function(e){if(this.eat(K.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(K.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===K.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===K.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(K.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===K.parenL||o!=="method"||i||s){var l=!n.static&&e3(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};Mt.isClassElementNameStart=function(){return this.type===K.name||this.type===K.privateId||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword};Mt.parseClassElementName=function(e){this.type===K.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};Mt.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&e3(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};Mt.parseClassField=function(e){if(e3(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&e3(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(K.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};Mt.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(aR|WJ);this.type!==K.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};Mt.parseClassId=function(e,t){this.type===K.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,_g,!1)):(t===!0&&this.unexpected(),e.id=null)};Mt.parseClassSuper=function(e){e.superClass=this.eat(K._extends)?this.parseExprSubscripts(null,!1):null};Mt.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};Mt.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];oR(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function mIt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function e3(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}Mt.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};Mt.parseExport=function(e,t){if(this.next(),this.eat(K.star))return this.parseExportAllDeclaration(e,t);if(this.eat(K._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};Mt.parseExportDeclaration=function(e){return this.parseStatement(null)};Mt.parseExportDefaultDeclaration=function(){var e;if(this.type===K._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,GA|oDe,!1,e)}else if(this.type===K._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};Mt.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),oR(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};Mt.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};Mt.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};Mt.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};Mt.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};Mt.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(K.braceL);!this.eat(K.braceR);){if(n)n=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;t.push(this.parseExportSpecifier(e))}return t};Mt.parseImport=function(e){return this.next(),this.type===K.string?(e.specifiers=pIt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===K.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};Mt.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,_g),this.finishNode(e,"ImportSpecifier")};Mt.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,_g),this.finishNode(e,"ImportDefaultSpecifier")};Mt.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,_g),this.finishNode(e,"ImportNamespaceSpecifier")};Mt.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===K.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(K.comma)))return e;if(this.type===K.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(K.braceL);!this.eat(K.braceR);){if(t)t=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;e.push(this.parseImportSpecifier())}return e};Mt.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===K.string){var e=this.parseLiteral(this.value);return lIt.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};Mt.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};Mt.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var ff=Hs.prototype;ff.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};ff.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};ff.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};ff.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==K.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};ff.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case K.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(K.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case K.braceL:return this.parseObj(!0)}return this.parseIdent()};ff.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(K.comma),t&&this.type===K.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===K.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};ff.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};ff.parseBindingListItem=function(e){return e};ff.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(K.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};ff.checkLValSimple=function(e,t,n){t===void 0&&(t=ZM);var r=t!==ZM;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===_g&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(oR(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==sDe&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};ff.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=ZM),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};ff.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=ZM),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var _f=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},Ii={b_stat:new _f("{",!1),b_expr:new _f("{",!0),b_tmpl:new _f("${",!1),p_stat:new _f("(",!1),p_expr:new _f("(",!0),q_tmpl:new _f("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new _f("function",!1),f_expr:new _f("function",!0),f_expr_gen:new _f("function",!0,!1,null,!0),f_gen:new _f("function",!1,!1,null,!0)},BS=Hs.prototype;BS.initialContext=function(){return[Ii.b_stat]};BS.curContext=function(){return this.context[this.context.length-1]};BS.braceIsBlock=function(e){var t=this.curContext();return t===Ii.f_expr||t===Ii.f_stat?!0:e===K.colon&&(t===Ii.b_stat||t===Ii.b_expr)?!t.isExpr:e===K._return||e===K.name&&this.exprAllowed?cf.test(this.input.slice(this.lastTokEnd,this.start)):e===K._else||e===K.semi||e===K.eof||e===K.parenR||e===K.arrow?!0:e===K.braceL?t===Ii.b_stat:e===K._var||e===K._const||e===K.name?!1:!this.exprAllowed};BS.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};BS.updateContext=function(e){var t,n=this.type;n.keyword&&e===K.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};BS.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};K.parenR.updateContext=K.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Ii.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};K.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Ii.b_stat:Ii.b_expr),this.exprAllowed=!0};K.dollarBraceL.updateContext=function(){this.context.push(Ii.b_tmpl),this.exprAllowed=!0};K.parenL.updateContext=function(e){var t=e===K._if||e===K._for||e===K._with||e===K._while;this.context.push(t?Ii.p_stat:Ii.p_expr),this.exprAllowed=!0};K.incDec.updateContext=function(){};K._function.updateContext=K._class.updateContext=function(e){e.beforeExpr&&e!==K._else&&!(e===K.semi&&this.curContext()!==Ii.p_stat)&&!(e===K._return&&cf.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===K.colon||e===K.braceL)&&this.curContext()===Ii.b_stat)?this.context.push(Ii.f_expr):this.context.push(Ii.f_stat),this.exprAllowed=!1};K.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};K.backQuote.updateContext=function(){this.curContext()===Ii.q_tmpl?this.context.pop():this.context.push(Ii.q_tmpl),this.exprAllowed=!1};K.star.updateContext=function(e){if(e===K._function){var t=this.context.length-1;this.context[t]===Ii.f_expr?this.context[t]=Ii.f_expr_gen:this.context[t]=Ii.f_gen}this.exprAllowed=!0};K.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==K.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var cn=Hs.prototype;cn.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};cn.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===K.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(K.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};cn.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new c4,r=!0);var a=this.start,u=this.startLoc;(this.type===K.parenL||this.type===K.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===K.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===K.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};cn.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(K.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(K.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};cn.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};cn.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==K._in)&&s>r){var o=this.type===K.logicalOR||this.type===K.logicalAND,a=this.type===K.coalesce;a&&(s=K.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===K.coalesce||a&&(this.type===K.logicalOR||this.type===K.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};cn.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};cn.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===K.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&aDe(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===K.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==K._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(K.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function aDe(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&aDe(e.expression)}cn.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};cn.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};cn.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(K.arrow)};cn.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};cn.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(K.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(K.bracketL);if(l||u&&this.type!==K.parenL&&this.type!==K.backQuote||this.eat(K.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(K.bracketR)):this.type===K.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(K.parenL)){var f=new c4,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===K.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};cn.parseExprAtom=function(e,t,n){this.type===K.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case K._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===K.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==K.dot&&this.type!==K.bracketL&&this.type!==K.parenL&&this.unexpected(),this.finishNode(r,"Super");case K._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case K.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(K._function))return this.overrideContext(Ii.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(K.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===K.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(K.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case K.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case K.num:case K.string:return this.parseLiteral(this.value);case K._null:case K._true:case K._false:return r=this.startNode(),r.value=this.type===K._null?null:this.type===K._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case K.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case K.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(K.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case K.braceL:return this.overrideContext(Ii.b_expr),this.parseObj(!1,e);case K._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case K._class:return this.parseClass(this.startNode(),!1);case K._new:return this.parseNew();case K.backQuote:return this.parseTemplate();case K._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};cn.parseExprAtomDefault=function(){this.unexpected()};cn.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===K.parenL&&!e)return this.parseDynamicImport(t);if(this.type===K.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};cn.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(K.parenR)){var t=this.start;this.eat(K.comma)&&this.eat(K.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};cn.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};cn.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};cn.parseParenExpression=function(){this.expect(K.parenL);var e=this.parseExpression();return this.expect(K.parenR),e};cn.shouldParseArrow=function(e){return!this.canInsertSemicolon()};cn.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new c4,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==K.parenR;)if(l?l=!1:this.expect(K.comma),s&&this.afterTrailingComma(K.parenR,!0)){c=!0;break}else if(this.type===K.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(K.parenR),e&&this.shouldParseArrow(u)&&this.eat(K.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};cn.parseParenItem=function(e){return e};cn.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var gIt=[];cn.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===K.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(K.parenL)?e.arguments=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1):e.arguments=gIt,this.finishNode(e,"NewExpression")};cn.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===K.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===K.backQuote,this.finishNode(n,"TemplateElement")};cn.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===K.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(K.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(K.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};cn.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===K.name||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===K.star)&&!cf.test(this.input.slice(this.lastTokEnd,this.start))};cn.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(K.braceR);){if(r)r=!1;else if(this.expect(K.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(K.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};cn.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(K.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===K.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(K.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(K.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};cn.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};cn.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===K.colon&&this.unexpected(),this.eat(K.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===K.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==K.comma&&this.type!==K.braceR&&this.type!==K.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===K.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};cn.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(K.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(K.bracketR),e.key;e.computed=!1}return e.key=this.type===K.num||this.type===K.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};cn.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};cn.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(YJ(t,r.generator)|WJ|(n?nDe:0)),this.expect(K.parenL),r.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};cn.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(YJ(n,!1)|eDe),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};cn.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==K.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,sDe),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};cn.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};cn.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,KJ,t?null:n)}};cn.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(K.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===K.comma?o=null:this.type===K.ellipsis?(o=this.parseSpread(r),r&&this.type===K.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};cn.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};cn.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};cn.parseIdentNode=function(){var e=this.startNode();return this.type===K.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=K.name):this.unexpected(),e};cn.parsePrivateIdent=function(){var e=this.startNode();return this.type===K.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};cn.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===K.semi||this.canInsertSemicolon()||this.type!==K.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(K.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};cn.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var t3=Hs.prototype;t3.raise=function(e,t){var n=JNe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};t3.raiseRecoverable=t3.raise;t3.curPosition=function(){if(this.options.locations)return new SI(this.curLine,this.pos-this.lineStart)};var rv=Hs.prototype,yIt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};rv.enterScope=function(e){this.scopeStack.push(new yIt(e))};rv.exitScope=function(){this.scopeStack.pop()};rv.treatFunctionsAsVarInScope=function(e){return e.flags&FS||!this.inModule&&e.flags&TI};rv.declareName=function(e,t,n){var r=!1;if(t===_g){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&TI&&delete this.undefinedExports[e]}else if(t===iDe){var s=this.currentScope();s.lexical.push(e)}else if(t===rDe){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&tDe&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&TI&&delete this.undefinedExports[e],u.flags&GJ)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};rv.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};rv.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};rv.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&GJ)return t}};rv.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&GJ&&!(t.flags&eDe))return t}};var f4=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new l4(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},uR=Hs.prototype;uR.startNode=function(){return new f4(this,this.start,this.startLoc)};uR.startNodeAt=function(e,t){return new f4(this,e,t)};function uDe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}uR.finishNode=function(e,t){return uDe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};uR.finishNodeAt=function(e,t,n,r){return uDe.call(this,e,t,n,r)};uR.copyNode=function(e){var t=new f4(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var lDe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",cDe=lDe+" Extended_Pictographic",fDe=cDe,dDe=fDe+" EBase EComp EMod EPres ExtPict",hDe=dDe,vIt=hDe,bIt={9:lDe,10:cDe,11:fDe,12:dDe,13:hDe,14:vIt},_It="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",wIt={9:"",10:"",11:"",12:"",13:"",14:_It},Mhe="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",pDe="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",mDe=pDe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",gDe=mDe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",yDe=gDe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",vDe=yDe+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",EIt=vDe+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",xIt={9:pDe,10:mDe,11:gDe,12:yDe,13:vDe,14:EIt},bDe={};function SIt(e){var t=bDe[e]={binary:h0(bIt[e]+" "+Mhe),binaryOfStrings:h0(wIt[e]),nonBinary:{General_Category:h0(Mhe),Script:h0(xIt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var y9=0,Lhe=[9,10,11,12,13,14];y9<Lhe.length;y9+=1){var TIt=Lhe[y9];SIt(TIt)}var At=Hs.prototype,fp=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=bDe[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};fp.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};fp.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};fp.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};fp.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};fp.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};fp.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};fp.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};fp.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};fp.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};At.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};At.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};At.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};At.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};At.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};At.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};At.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};At.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};At.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};At.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};At.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};At.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};At.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};At.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};At.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};At.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};At.regexp_eatSyntaxCharacter=function(e){var t=e.current();return _De(t)?(e.lastIntValue=t,e.advance(),!0):!1};function _De(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}At.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!_De(n);)e.advance();return e.pos!==t};At.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};At.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};At.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};At.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=yy(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=yy(e.lastIntValue);return!0}return!1};At.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),CIt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function CIt(e){return Gm(e,!0)||e===36||e===95}At.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),AIt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function AIt(e){return yx(e,!0)||e===36||e===95||e===8204||e===8205}At.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};At.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};At.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};At.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};At.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};At.regexp_eatZero=function(e){return e.current()===48&&!d4(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};At.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};At.regexp_eatControlLetter=function(e){var t=e.current();return wDe(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function wDe(e){return e>=65&&e<=90||e>=97&&e<=122}At.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&IIt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function IIt(e){return e>=0&&e<=1114111}At.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};At.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var EDe=0,Ym=1,Nc=2;At.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(kIt(t))return e.lastIntValue=-1,e.advance(),Ym;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===Nc&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return EDe};function kIt(e){return e===100||e===68||e===115||e===83||e===119||e===87}At.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Ym}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return EDe};At.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){oR(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};At.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Ym;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return Nc;e.raise("Invalid property name")};At.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";xDe(t=e.current());)e.lastStringValue+=yy(t),e.advance();return e.lastStringValue!==""};function xDe(e){return wDe(e)||e===95}At.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";RIt(t=e.current());)e.lastStringValue+=yy(t),e.advance();return e.lastStringValue!==""};function RIt(e){return xDe(e)||d4(e)}At.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};At.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===Nc&&e.raise("Negated character class may contain strings"),!0}return!1};At.regexp_classContents=function(e){return e.current()===93?Ym:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Ym)};At.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};At.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||CDe(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};At.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};At.regexp_classSetExpression=function(e){var t=Ym,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===Nc&&(t=Nc);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==Nc&&(t=Ym);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===Nc&&(t=Nc)}};At.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};At.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Ym:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};At.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===Nc&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};At.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};At.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===Nc&&(t=Nc);return t};At.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Ym:Nc};At.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&NIt(n)||DIt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function NIt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function DIt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}At.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return PIt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function PIt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}At.regexp_eatClassControlLetter=function(e){var t=e.current();return d4(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};At.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};At.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;d4(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function d4(e){return e>=48&&e<=57}At.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;SDe(n=e.current());)e.lastIntValue=16*e.lastIntValue+TDe(n),e.advance();return e.pos!==t};function SDe(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function TDe(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}At.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};At.regexp_eatOctalDigit=function(e){var t=e.current();return CDe(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function CDe(e){return e>=48&&e<=55}At.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!SDe(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+TDe(i),e.advance()}return!0};var QJ=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new l4(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Gn=Hs.prototype;Gn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new QJ(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Gn.getToken=function(){return this.next(),new QJ(this)};typeof Symbol<"u"&&(Gn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===K.eof,value:t}}}});Gn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(K.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Gn.readToken=function(e){return Gm(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Gn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Gn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=KNe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Gn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!LS(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Gn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&XNe.test(String.fromCharCode(e)))++this.pos;else break e}}};Gn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Gn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(K.ellipsis)):(++this.pos,this.finishToken(K.dot))};Gn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(K.assign,2):this.finishOp(K.slash,1)};Gn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?K.star:K.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=K.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(K.assign,n+1):this.finishOp(r,n)};Gn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(K.assign,3)}return this.finishOp(e===124?K.logicalOR:K.logicalAND,2)}return t===61?this.finishOp(K.assign,2):this.finishOp(e===124?K.bitwiseOR:K.bitwiseAND,1)};Gn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(K.assign,2):this.finishOp(K.bitwiseXOR,1)};Gn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||cf.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(K.incDec,2):t===61?this.finishOp(K.assign,2):this.finishOp(K.plusMin,1)};Gn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(K.assign,n+1):this.finishOp(K.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(K.relational,n))};Gn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(K.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(K.arrow)):this.finishOp(e===61?K.eq:K.prefix,1)};Gn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(K.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(K.assign,3)}return this.finishOp(K.coalesce,2)}}return this.finishOp(K.question,1)};Gn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),Gm(t,!0)||t===92))return this.finishToken(K.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+yy(t)+"'")};Gn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(K.parenL);case 41:return++this.pos,this.finishToken(K.parenR);case 59:return++this.pos,this.finishToken(K.semi);case 44:return++this.pos,this.finishToken(K.comma);case 91:return++this.pos,this.finishToken(K.bracketL);case 93:return++this.pos,this.finishToken(K.bracketR);case 123:return++this.pos,this.finishToken(K.braceL);case 125:return++this.pos,this.finishToken(K.braceR);case 58:return++this.pos,this.finishToken(K.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(K.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(K.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+yy(e)+"'")};Gn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Gn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(cf.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new fp(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(K.regexp,{pattern:i,flags:o,value:u})};Gn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function OIt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function ADe(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Gn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=ADe(this.input.slice(t,this.pos)),++this.pos):Gm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,n)};Gn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=ADe(this.input.slice(t,this.pos));return++this.pos,Gm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),Gm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=OIt(this.input.slice(t,this.pos),n);return this.finishToken(K.num,s)};Gn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Gn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(LS(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(K.string,t)};var IDe={};Gn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===IDe)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Gn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw IDe;this.raise(e,t)};Gn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===K.template||this.type===K.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(K.dollarBraceL)):(++this.pos,this.finishToken(K.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(K.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(LS(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Gn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(K.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Gn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return yy(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return LS(t)?"":String.fromCharCode(t)}};Gn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Gn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(yx(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?Gm:yx)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=yy(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Gn.readWord=function(){var e=this.readWord1(),t=K.name;return this.keywords.test(e)&&(t=HJ[e]),this.finishToken(t,e)};var $It="8.11.3";Hs.acorn={Parser:Hs,version:$It,defaultOptions:sH,Position:SI,SourceLocation:l4,getLineInfo:JNe,Node:f4,TokenType:lr,tokTypes:K,keywordTypes:HJ,TokContext:_f,tokContexts:Ii,isIdentifierChar:yx,isIdentifierStart:Gm,Token:QJ,isNewLine:LS,lineBreak:cf,lineBreakG:oIt,nonASCIIwhitespace:XNe};function MIt(e,t){return Hs.parse(e,t)}const JJ={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},LIt={ecmaVersion:11},Fhe="$",FIt="d",BIt="d1",jIt="d2",Po=e=>(t,n)=>n.error(t,e+" not allowed"),UIt=Po("Aggregate function"),zIt=Po("Window function"),VIt="Invalid argument",ZJ="Invalid column reference",HIt=ZJ+" (must be input to an aggregate function)",kDe="Invalid function call",qIt="Invalid member expression",WIt="Invalid operator parameter",GIt="Invalid param reference",YIt="Invalid variable reference",KIt="Variable not accessible in operator call",XIt="Unsupported variable declaration",QIt="Unsupported destructuring pattern",RDe="Table expressions do not support closures",NDe="Use aq.escape(fn) to use a function as-is (including closures)",JIt="use table.params({ name: value }) to define dynamic parameters",ZIt="use aq.addFunction(name, fn) to add new op functions",ekt=`
Note: ${RDe}. ${NDe}, or ${JIt}.`,DDe=`
Note: ${RDe}. ${NDe}, or ${ZIt}.`,tkt=`The ${Dke} method is not valid in multi-table expressions.`;function nkt(e,t){const n=rkt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,X2t(r)?(skt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=BIt),e.scope.add(e.tuple2=jIt),e.scope.add(e.$param=Fhe)):(e.scope.add(e.tuple=FIt),e.scope.add(e.$param=Fhe)),rr(r,e,eZ),e.root}function rkt(e){try{const t=e.field?ikt(e):mr(e)?Bh(e):e;return MIt(`expr=(${t})`,LIt).body[0].expression.right}catch{Sn(`Expression parse error: ${e+""}`)}}function ikt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const eZ={FunctionDeclaration:Po("Function definitions"),ForStatement:Po("For loops"),ForOfStatement:Po("For-of loops"),ForInStatement:Po("For-in loops"),WhileStatement:Po("While loops"),DoWhileStatement:Po("Do-while loops"),AwaitExpression:Po("Await expressions"),ArrowFunctionExpression:Po("Function definitions"),AssignmentExpression:Po("Assignments"),FunctionExpression:Po("Function definitions"),NewExpression:Po('Use of "new"'),UpdateExpression:Po("Update expressions"),VariableDeclarator(e,t){lH(e.id,t)},Identifier(e,t,n){$De(e,t,n)&&!t.scope.has(e.name)&&t.error(e,YIt,ekt)},CallExpression(e,t){const n=PDe(e.callee),r=kke(n)||Rke(n);if(r){if((t.join||t.aggregate===!1)&&VQ(n)&&UIt(e,t),(t.join||t.window===!1)&&HQ(n)&&zIt(e,t),t.$op=1,t.ast)uH(e,n,t),e.arguments.forEach(i=>rr(i,t,aH));else{const i=t.op(okt(t,r,n,e.arguments));Object.assign(e,{type:Ske,name:i.id})}return t.$op=0,!1}else Ike(n)?uH(e,n,t):t.error(e,kDe,DDe)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!$s(F0,r))return;const{name:s}=r;if(ODe(e)&&$s(F0,i)&&od(JJ,i.name)){FDe(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return Bhe(e,o,t,MDe,n);if(s===t.$param)return Bhe(e,o,t,ukt);t.paramsRef.has(s)?CI(e,t.paramsRef.get(s)):t.columnRef.has(s)?LDe(r,s,t,e):od(t.params,s)&&CI(r,s)}};function Bhe(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if($s(DS,s))a=s.value;else try{rr(s,n,eZ,e),a=n.param(s)}catch{n.error(e,qIt)}return r(e,a,t,n,i),!1}const aH={...eZ,VariableDeclarator:Po("Variable declaration in operator call"),Identifier(e,t,n){$De(e,t,n)&&t.error(e,KIt)},CallExpression(e,t){const n=PDe(e.callee);Ike(n)?uH(e,n,t):t.error(e,kDe,DDe)}};function skt(e,t){e.generator&&Po("Generator functions")(e,t),e.async&&Po("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(ZT(t,n[0],"tuple1",i(1)),r>1&&ZT(t,n[1],"tuple2",i(2)),r>2&&ZT(t,n[2],"$param",s)):(ZT(t,n[0],"tuple",i(0)),r>1&&ZT(t,n[1],"$param",s))),t.root=e.body}function ZT(e,t,n,r){$s(F0,t)?(e.scope.add(t.name),e[n]=t.name):$s(Eke,t)&&t.properties.forEach(i=>{const s=$s(F0,i.key)?i.key.name:$s(DS,i.key)?i.key.value:e.error(i,VIt);$s(F0,i.value)||e.error(i.value,QIt),r(i.value.name,s)})}function okt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(rr(u,e,aH),i.push(e.field(u))):l<a?(rr(u,e,aH),s.push(e.param(u))):e.error(u,WIt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function PDe(e){return $s(F0,e)?e.name:$s(wke,e)?ODe(e)?akt(e.property.name):e.property.name:null}function ODe(e){return $s(F0,e.object)&&e.object.name==="Math"}function akt(e){return e==="max"?"greatest":e==="min"?"least":e}function $De(e,t,n){const{name:r}=e;if(!($s(wke,n)&&n.property===e)){if(!($s(xke,n)&&n.key===e))if(t.paramsRef.has(r))CI(e,t.paramsRef.get(r));else if(t.columnRef.has(r))LDe(e,r,t,n);else if(od(t.params,r))CI(e,r);else if(od(JJ,r))FDe(e,r);else return!0}}function MDe(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,ZJ),r.aggronly&&!r.$op&&r.error(e,HIt),Nke(e,t,n,o,i)}function LDe(e,t,n,r){const[i,s]=n.columnRef.get(t);MDe(e,i,s,n,r)}function ukt(e,t,n,r){r.params&&!od(r.params,t)&&r.error(e,GIt),CI(e,t)}function CI(e,t){e.type=QSt,e.name=t}function FDe(e,t){e.type=YSt,e.name=t,e.raw=JJ[t]}function uH(e,t,n){if(t===Dke){const r=n.table;r||n.error(e,tkt),Pke(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=uu(s)?r.columnName(s):s;return r.column(o)||n.error(i,ZJ),o}):r.columnNames())}else e.callee={type:XSt,name:t}}function lH(e,t){$s(F0,e)?t.scope.add(e.name):$s(HSt,e)?e.elements.forEach(n=>lH(n,t)):$s(Eke,e)?e.properties.forEach(n=>lH(n.value,t)):t.error(e.id,XIt)}const lkt={[eR]:1,[Ske]:1};function ol(e,t={}){const n=t.generate||PM,r=t.compiler||qQ,i=fkt(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=ckt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return $s(DS,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?K2t(g):f(n(g),i));u.push(y),lkt[g.type]&&y!==g&&Ia(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,b=m.end-6,w=String(d.spec).slice(v,b);Sn(`${g}: "${w}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of KF(e))d.value(m+"",g.escape?Z2t(d,g,i):nkt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function ckt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function fkt(e){return(e.table?v9(e.table):e.join?{...v9(e.join[1]),...v9(e.join[0])}:{})||{}}function v9(e){return e&&bi(e.params)?e.params():{}}const BDe="Expr",wf="ExprList",jDe="ExprNumber",YC="ExprObject",$w="JoinKeys",n3="JoinValues",_c="Options",tZ="OrderKeys",jg="SelectionList",r1="TableRef",Mw="TableRefList",dkt="Descending",hkt="Query",pkt="Selection",mkt="Verb",gkt="Window";function h4(e,t){return e&&e.expr?new jhe({...e,...t}):new jhe(t,e)}class jhe{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...bi(this.expr)?{func:!0}:{}}}}function ykt(e){return h4(e,{desc:!0})}function hb(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return h4(e,t?{expr:t,...r}:r)}function vkt(e,t,n){return h4(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function bkt(e){const t=n=>n;return t.toString=()=>e,t}function Uhe(e,t){return t=t&&bi(t.query)?t.query():t,t&&bi(t.evaluate)?t.evaluate(null,e):e(t)}function UDe(e){return Ia(e)&&(mr(e.all)||mr(e.matches)||mr(e.not)||mr(e.range))}function AI(e){return e&&bi(e.toObject)?e.toObject():bi(e)?{expr:String(e),func:!0}:mr(e)?e.map(AI):Ia(e)?a4(e,t=>AI(t)):e}function nZ(e){return mr(e)?e.map(nZ):Ia(e)?mr(e.verbs)?iZ.from(e):mr(e.all)?gx():mr(e.range)?H2t(...e.range):mr(e.match)?q2t(RegExp(...e.match)):mr(e.not)?qNe(e.not.map(AI)):_kt(e):e}function _kt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=hb(n):e.func===!0&&(t=n=bkt(n)),Ia(e.window)){const{frame:r,peers:i}=e.window;t=n=vkt(n,r,i)}e.desc===!0&&(t=ykt(n))}return e===t?a4(e,r=>nZ(r)):t}function wkt(e){return mr(e)?e.map(Ekt):e}function Ekt(e){const t=[];return rl(e).forEach(n=>{uu(n)?t.push(n):Ko(n)?t.push(hb(n,null)):Ia(n)&&n.expr||bi(n)?t.push(n):Sn(`Invalid key value: ${n+""}`)}),t}function xkt(e){return mr(e)?e.map(Skt):e}function Skt(e,t){return t<2?rl(e):e}function Tkt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(Ia(r)&&!bi(r))for(const i in r)t.push(r[i]);else n=uu(r)?r:Ko(r)?hb(n):bi(r)?n:Sn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const Ckt={[BDe]:qDe,[wf]:vx,[jDe]:Dkt,[YC]:vy,[$w]:Pkt,[n3]:Okt,[tZ]:vx,[jg]:Rkt};function Akt(e,t,n){return t===r1?zhe(e):t===Mw?e.map(zhe):zDe(AI(e),t,n)}function zDe(e,t,n){return t===_c?e&&Ikt(e,n):Ckt[t](e)}function Ikt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?zDe(i,t[r]):i}return n}function kkt(e,t){return ol({expr:e},{...t,ast:!0}).exprs[0]}function rZ(e){return{type:eR,name:e}}function VDe(e){return{type:eR,index:e}}function vy(e,t){if(Ko(e))return kkt(e,t);if(e.expr){let n;if(e.field===!0?n=rZ(e.expr):e.func===!0&&(n=vy(e.expr,t)),n)return e.desc&&(n={type:dkt,expr:n}),e.window&&(n={type:gkt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...vy(e[n],t),as:n}))}function HDe(e){const t=pkt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:vx(e.not)}:e.range?{type:t,operator:"range",arguments:vx(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:Sn("Invalid input")}function Rkt(e){return rl(e).map(Nkt).flat()}function Nkt(e){return UDe(e)?HDe(e):uu(e)?VDe(e):Ko(e)?rZ(e):Ia(e)?Object.keys(e).map(t=>({type:eR,name:t,as:e[t]})):Sn("Invalid input")}function qDe(e){return UDe(e)?HDe(e):uu(e)?VDe(e):Ko(e)?rZ(e):Ia(e)?vy(e):Sn("Invalid input")}function vx(e){return rl(e).map(qDe).flat()}function Dkt(e){return uu(e)?e:vy(e)}function Pkt(e){return mr(e)?e.map(vx):vy(e,{join:!0})}function Okt(e){return mr(e)?e.map((t,n)=>n<2?vx(t):vy(t,{join:!0})):vy(e,{join:!0})}function zhe(e){return e&&bi(e.toAST)?e.toAST():e}class WDe{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===$w?wkt(a):o===n3?xkt(a):o===tZ?Tkt(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=cH[t.verb],r=(n.schema||[]).map(({name:i})=>nZ(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===r1?Uhe(n,o):s===Mw?o.map(a=>Uhe(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=AI(this[n])}),t}toAST(){const t={type:mkt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=Akt(this[n],r,i)}),t}}function jr(e,t){return Object.assign((...n)=>new WDe(e,t,n),{schema:t})}const cH={count:jr("count",[{name:"options",type:_c}]),derive:jr("derive",[{name:"values",type:YC},{name:"options",type:_c,props:{before:jg,after:jg}}]),filter:jr("filter",[{name:"criteria",type:YC}]),groupby:jr("groupby",[{name:"keys",type:wf}]),orderby:jr("orderby",[{name:"keys",type:tZ}]),relocate:jr("relocate",[{name:"columns",type:jg},{name:"options",type:_c,props:{before:jg,after:jg}}]),rename:jr("rename",[{name:"columns",type:jg}]),rollup:jr("rollup",[{name:"values",type:YC}]),sample:jr("sample",[{name:"size",type:jDe},{name:"options",type:_c,props:{weight:BDe}}]),select:jr("select",[{name:"columns",type:jg}]),ungroup:jr("ungroup"),unorder:jr("unorder"),reify:jr("reify"),dedupe:jr("dedupe",[{name:"keys",type:wf,default:[]}]),impute:jr("impute",[{name:"values",type:YC},{name:"options",type:_c,props:{expand:wf}}]),fold:jr("fold",[{name:"values",type:wf},{name:"options",type:_c}]),pivot:jr("pivot",[{name:"keys",type:wf},{name:"values",type:wf},{name:"options",type:_c}]),spread:jr("spread",[{name:"values",type:wf},{name:"options",type:_c}]),unroll:jr("unroll",[{name:"values",type:wf},{name:"options",type:_c,props:{drop:wf}}]),lookup:jr("lookup",[{name:"table",type:r1},{name:"on",type:$w},{name:"values",type:wf}]),join:jr("join",[{name:"table",type:r1},{name:"on",type:$w},{name:"values",type:n3},{name:"options",type:_c}]),cross:jr("cross",[{name:"table",type:r1},{name:"values",type:n3},{name:"options",type:_c}]),semijoin:jr("semijoin",[{name:"table",type:r1},{name:"on",type:$w}]),antijoin:jr("antijoin",[{name:"table",type:r1},{name:"on",type:$w}]),concat:jr("concat",[{name:"tables",type:Mw}]),union:jr("union",[{name:"tables",type:Mw}]),intersect:jr("intersect",[{name:"tables",type:Mw}]),except:jr("except",[{name:"tables",type:Mw}])};let iZ=class GDe extends uke{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new GDe(t.map(WDe.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return Vhe(this,"toObject")}toJSON(){return this.toObject()}toAST(){return Vhe(this,"toAST",{type:hkt})}};function Vhe(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function $kt(e,t){return new iZ(e._verbs.concat(t),e._params,e._table)}for(const e in cH){const t=cH[e];iZ.prototype["__"+e]=function(n,...r){return $kt(n,t(...r))}}function jS(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function Mkt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function sZ(e,t){const n=uc();return t.forEach((r,i)=>{const s=Ko(r)?r:i;if(s){const o=e.column(i)||Sn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function YDe(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||Sn("relocate requires a before or after option."),i&&s&&Sn("relocate accepts only one of the before or after options."),t=Wm(e,t);const o=[...Wm(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),sZ(e,u)}function lR(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function oZ(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Lkt(e,t=0,n=e.length){let r=n?e[t++]:cr;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function Fkt(e,t=0,n=e.length){let r=n?e[t++]:cr;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function ID(e){return yI(e)?e:+e}function Bkt(e,t){const n=e.length;if(!n)return cr;if((t=+t)<=0||n<2)return ID(e[0]);if(t>=1)return ID(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=ID(e[i]);return yI(s)?s:s+(ID(e[i+1])-s)*(r-i)}class jkt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:Lkt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:Fkt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(oZ)),Bkt(this._sorted,t)}}const r3=(e,t,n)=>jS(t,"{"+lR(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function Ukt(e,t){const{ops:n,output:r}=zkt(e,t),i=e[0].fields,s=i.length,o=s===0?aZ:s===1?Vkt:s===2?Hkt:Sn("Unsupported field count: "+s);return new o(i,n,r,t)}function zkt(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=kke(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class aZ extends G2t{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new jkt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class Vkt extends aZ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=r3(n,s,"add"),this._rem=r3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,Hf(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,Hf(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class Hkt extends aZ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=r3(n,s,"add"),this._rem=r3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,Hf(i)&&Hf(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,Hf(i)&&Hf(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function o_(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=US(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function US(e,t,n){if(!t.length)return n;const r=KDe(t),i=e.groups(),s=i?i.size:1;return n=n||GF(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=QDe(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=XDe(e,o);o.write(a,n,0)}),n}function KDe(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(Ukt(r[i],t));return n}function XDe(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function QDe(e,t,n){const{keys:r,size:i}=n,s=GF(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function JDe(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function ZDe(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const Hhe=ZDe(oZ);function qkt(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?jS(["w","r","k"],"{"+lR(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i?i.map(b=>b.init()):null;for(let b=0;b<f;++b)r[b].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,b=p.i0,w=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=Hhe.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=Hhe.right(o,o[p.i1-1])));for(let E=0;E<d;++E){const x=i[E],T=a[E];for(let C=b;C<p.i0;++C)x.rem(T,s[C],e);for(let C=w;C<p.i1;++C)x.add(T,s[C],e);x.write(T,u,l)}return h(p,u,l),u}};return p}const Wkt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),Gkt=e=>!!e.peers;function Ykt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=Rke(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function Kkt(e,t,n,r={},i){const s=e.data(),o=Xkt(i,s),a=o.length,u=jS(["r","d","op"],"{"+lR(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=Qkt(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function Xkt(e,t){const n={};return e.forEach(r=>{const i=Wkt(r),s=Gkt(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});VQ(r.name)?a.push(r):u.push(Ykt(r))}),Object.values(n).map(r=>qkt(t,r.frame,r.peers,r.winOps,KDe(r.aggOps,r.frame[0]!=null?-1:1)))}function Qkt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function Jkt(e){return HQ(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function uZ(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=uc(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=Zkt(r),c=e.isGrouped()?e.groups().size:1,f=US(e,u,GF(r.length,()=>Array(c)));return l.length?Kkt(e,a,n,f,l):eRt(e,a,n,f),e.create(o)}function Zkt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(Jkt(s)?n:t).push(s)}return[t,n]}function eRt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function tRt(e,t,n={}){const r=uZ(e,ol(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:YDe(r,Object.keys(t).filter(i=>!e.column(i)),n)}function nRt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const kD=2147483648,rRt=4294967295;class ePe{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&kD>>>t}set(t){this._bits[t>>5]|=kD>>>t}clear(t){this._bits[t>>5]&=~(kD>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&rRt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=kD>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function iRt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new ePe(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function sRt(e,t){const n=ol({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=uZ(e,n,{drop:!0}).column("p");r=s=>i[s]}return iRt(e,r)}function tPe(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=o_(e,r,n),l=uc(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(w=>{if(!a.has(w)){const E=l.add(w,[]);c.has(w)||(f.push(e.column(w)),d.push(E))}}),t.forEach(w=>{a.has(w)||(l.has(w)||l.add(w,[]),h.push(l.data[w]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(w,E)=>{for(let x=0;x<g;++x)d[x].length=m+E,d[x].fill(f[x].get(w),m,m+E)},b=p?(w,E)=>{for(let x=0;x<E;++x)p[w+x]=x}:()=>{};if(y===1){const w=u[0],E=h[0];e.scan((x,T)=>{const C=rl(w(x,T)),A=Math.min(C.length,s);v(x,A);for(let k=0;k<A;++k)E[m+k]=C[k];b(m,A),m+=A})}else e.scan((w,E)=>{let x=0;const T=u.map(C=>{const A=rl(C(w,E));return x=Math.min(Math.max(x,A.length),s),A});v(w,x);for(let C=0;C<y;++C){const A=h[C],k=T[C];for(let R=0;R<x;++R)A[m+R]=k[R]}b(m,x),m+=x});return e.create(l.new())}function oRt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=o_(e,r,n);return tPe(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function ud(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=uu(o)?t.columnName(o):o,Ko(o)?i.set(o,hb(o)):bi(o)?Wm(t,o).forEach(s):Ia(o)?VNe(i,o):Sn(`Invalid ${e} value: ${o+""}`)};return rl(n).forEach(s),r.preparse&&r.preparse(i),ol(i,{table:t,...r})}function aRt(e,t,n){return oRt(e,ud("fold",e,t),n)}function qhe(e,t,n,r){const i=n&&n.length;return uRt(i?lRt(e,n,r):e,t,i)}function uRt(e,{names:t,exprs:n,ops:r},i){const s=o_(e,r,n),o=i?null:uc(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=Hf(p)?p:d(h)})}),i?e:e.create(o)}function lRt(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=OM(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=uc(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=OM(o.map((p,m)=>g=>g[m])),h=jS("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),Whe(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else Whe(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function Whe(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function lZ(e,{names:t,exprs:n,ops:r}){const i=uc(),s=e.groups();return s&&JDe(i,s),cRt(t,n,s,US(e,r),i),e.create(i.new())}function cRt(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function fRt(e,t,n={}){if(t=ol(t,{table:e}),t.names.forEach(r=>e.column(r)?0:Sn(`Invalid impute column ${Bh(r)}`)),n.expand){const r={preparse:dRt,aggronly:!0},i=ud("impute",e,n.expand,r),s=lZ(e.ungroup(),i);return qhe(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return qhe(e,t)}function dRt(e){e.forEach((t,n)=>t.field?e.set(n,yke(t+"")):0)}function hRt(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function nPe(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function pRt(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function mRt(e,t){const n=["i","a","j","b"];return jS(n,"{"+lR(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function gRt(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=uc(),g=Array(p),y=Array(p);for(let w=0;w<r.length;++w)g[w]=m.add(r[w],[]),y[w]=i[w];const v=mRt(g,y);if((mr(n)?vRt:yRt)(v,n,o,c,a,f,l,h,u,d),s.left)for(let w=0;w<u;++w)l[w]||v(a[w],o,-1,c);if(s.right)for(let w=0;w<d;++w)h[w]||v(-1,o,f[w],c);return e.create(m.new())}function yRt(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function vRt(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,b=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,b=(x,T,C,A)=>e(C,A,x,T));const w=pRt(v,m,g),E=p.length;for(let x=0;x<E;++x){const T=p[x],C=w.get(d(T,f));if(C){const A=C.length;for(let k=0;k<A;++k){const R=C[k];b(T,f,v[R],m),y[R]=1}h[x]=1}}}function i3(e,t,n){const r=new Map;rl(n).forEach((s,o)=>{s=uu(s)?t.columnName(s):s,Ko(s)?r.set(o,hb(s)):bi(s)||Ia(s)&&s.expr?r.set(o,s):Sn(`Invalid ${e} key value: ${s+""}`)});const i=ol(r,{table:t,aggregate:!1,window:!1});return OM(i.exprs,!0)}function bRt(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function cZ(e,t,n){if(n)Ko(n)?n=[n,n]:mr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=bRt(e.columnNames(),t.columnNames());r.length||Sn("Natural join requires shared column names."),n=[r,r]}return n}function rPe(e,t,n,r){return n.length!==r.length&&Sn("Mismatched number of join keys"),[i3("join",e,n),i3("join",t,r)]}const _Rt={aggregate:!1,window:!1},wRt={..._Rt,index:1};function Ghe(e,t,n,r,i={}){n=cZ(e,t,n);const s={join:[e,t]};let o;if(mr(n)){const[a,u]=n.map(rl);o=rPe(e,t,a,u),r||(r=ERt(e,a,u,i))}else o=ol({on:n},s).exprs[0],r||(r=[gx(),gx()]);return gRt(e,t,o,xRt(e,t,r,s,i&&i.suffix),i)}function ERt(e,t,n,r){const i=[];t.forEach((o,a)=>Ko(o)&&o===n[a]?i.push(o):0);const s=qNe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${Bh(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,gx()]:[gx(),s]}function xRt(e,t,n,r,i=[]){if(mr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=ud("join",e,n[0],r)),u--&&(o=ud("join",t,n[1],wRt)),u--&&(a=ol(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&Yhe(s.names,l,i[0]||"_1"),i[1]!==""&&Yhe(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return ol(n,r)}function Yhe(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function SRt(e,t,n,r={}){const i=new ePe(e.totalRows());return(mr(n)?TRt:CRt)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function TRt(e,t,n,[r,i]){const s=nPe(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function CRt(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function Khe(e,t,n,r){n=cZ(e,t,n);const i=mr(n)?rPe(e,t,...n.map(rl)):ol({on:n},{join:[e,t]}).exprs[0];return SRt(e,t,i,r)}function ARt(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=uc(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(cr)));const l=nPe(t,r),c=jS(["lr","rr","data"],"{"+lR(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),o_(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function IRt(e,t,n,r){return n=cZ(e,t,n),ARt(e,t,[i3("lookup",e,n[0]),i3("lookup",t,n[1])],ud("lookup",t,r))}const fH=(e,t)=>e??t;function kRt(e,t,n,r={}){const{keys:i,keyColumn:s}=RRt(e,t,r),o=fH(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>US(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(NRt(n,a,e.groups(),u))}function RRt(e,t,n){const r=n.limit>0?+n.limit:1/0,i=fH(n.sort,!0),s=fH(n.keySeparator,"_"),o=o_(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=US(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function NRt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=uc(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&JDe(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function DRt(e,t,n,r){return kRt(e,ud("fold",e,t),ud("fold",e,n,{preparse:PRt,aggronly:!0}),r)}function PRt(e){e.forEach((t,n)=>t.field?e.set(n,pke(t+"")):0)}function ORt(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),sZ(e,Wm(e,t,n))}function Xhe(e,t){return lZ(e,ol(t,{table:e,aggronly:!0,window:!1}))}function $Rt(e,t,n,r){return(t?r?LRt:MRt:r?BRt:FRt)(e.length,e,n,r)}function MRt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*NS()|0];return t}function LRt(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=ZDe(oZ).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*NS())];return t}function FRt(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*NS();s<e&&(t[s|0]=n[i])}return t}function BRt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(NS())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function jRt(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=NS()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function URt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):$Rt(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&jRt(u),e.reify(u)}function zRt(e,t,n={}){return URt(e,VRt(e,t),HRt(e,n.weight),n)}const iPe=e=>t=>e.get(t)||0;function VRt(e,t){return uu(t)?()=>t:iPe(lZ(e,ol({size:t},{table:e,window:!1})).column("size"))}function HRt(e,t){return t==null?null:(t=uu(t)?e.columnName(t):t,iPe(Ko(t)?e.column(t):uZ(e,ol({w:t},{table:e}),{drop:!0}).column("w")))}function qRt(e,t){return sZ(e,Wm(e,t))}function WRt(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=o_(e,r,n),l=uc(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=GRt(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function GRt(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=rl(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(cr));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function YRt(e,t,n){return WRt(e,ud("spread",e,t),n)}function KRt(e,t){return e.concat(t).dedupe()}function XRt(e,t,n){return tPe(e,ud("unroll",e,t),n&&n.drop?{...n,drop:ud("unroll",e,n.drop).names}:n)}function QRt(e,t){return e.create({groups:JRt(e,t)})}function JRt(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=o_(e,r,n);const o=OM(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function ZRt(e,t){return QRt(e,ud("groupby",e,t))}function eNt(e,t){return e.create({order:t})}const tNt=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function nNt(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=ol(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([PM(p,{index:"a",op:o}),PM(p,{index:"b",op:a})])},window:!1}),l=US(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=tNt(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function rNt(e,t){return eNt(e,iNt(e,t))}function iNt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(Ia(o)&&!bi(o))for(const a in o)i(o[a]);else i(uu(o)?hb(s,e.columnName(o)):Ko(o)?hb(s):bi(o)?s:Sn(`Invalid orderby field: ${s+""}`))}),nNt(e,r)}function sNt(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=uc();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>cr};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function oNt(e,t){const n=uc(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?QDe(e,t,r):[XDe(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function aNt(e){return e.isGrouped()?e.create({groups:null}):e}function uNt(e){return e.isOrdered()?e.create({order:null}):e}const lNt={__antijoin:(e,t,n)=>Khe(e,t,n,{anti:!0}),__count:(e,t={})=>Xhe(e,{[t.as||"count"]:mke()}),__cross:(e,t,n,r)=>Ghe(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:sNt,__dedupe:Mkt,__derive:tRt,__except:nRt,__filter:sRt,__fold:aRt,__impute:fRt,__intersect:hRt,__join:Ghe,__lookup:IRt,__pivot:DRt,__relocate:YDe,__rename:ORt,__rollup:Xhe,__sample:zRt,__select:qRt,__semijoin:Khe,__spread:YRt,__union:KRt,__unroll:XRt,__groupby:ZRt,__orderby:rNt,__ungroup:aNt,__unorder:uNt,__reduce:oNt};Object.assign(Zp.prototype,lNt);function cNt(e,t){return Zp.from(e,t)}function b9(e){return h4(e,{escape:!0,toString(){Sn("Escaped values can not be serialized.")}})}Zp.prototype;function Ff(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function by(e){return!!e&&!!e[Si]}function Km(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===bNt}(e)||Array.isArray(e)||!!e[rpe]||!!(!((t=e.constructor)===null||t===void 0)&&t[rpe])||fZ(e)||dZ(e))}function pb(e,t,n){n===void 0&&(n=!1),zS(e)===0?(n?Object.keys:hE)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function zS(e){var t=e[Si];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:fZ(e)?2:dZ(e)?3:0}function dE(e,t){return zS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function fNt(e,t){return zS(e)===2?e.get(t):e[t]}function sPe(e,t,n){var r=zS(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function oPe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function fZ(e){return yNt&&e instanceof Map}function dZ(e){return vNt&&e instanceof Set}function Gv(e){return e.o||e.t}function hZ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=uPe(e);delete t[Si];for(var n=hE(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function pZ(e,t){return t===void 0&&(t=!1),mZ(e)||by(e)||!Km(e)||(zS(e)>1&&(e.set=e.add=e.clear=e.delete=dNt),Object.freeze(e),t&&pb(e,function(n,r){return pZ(r,!0)},!0)),e}function dNt(){Ff(2)}function mZ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function xh(e){var t=mH[e];return t||Ff(18,e),t}function hNt(e,t){mH[e]||(mH[e]=t)}function dH(){return II}function _9(e,t){t&&(xh("Patches"),e.u=[],e.s=[],e.v=t)}function s3(e){hH(e),e.p.forEach(pNt),e.p=null}function hH(e){e===II&&(II=e.l)}function Qhe(e){return II={p:[],l:II,h:e,m:!0,_:0}}function pNt(e){var t=e[Si];t.i===0||t.i===1?t.j():t.g=!0}function w9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||xh("ES5").S(t,e,r),r?(n[Si].P&&(s3(t),Ff(4)),Km(e)&&(e=o3(t,e),t.l||a3(t,e)),t.u&&xh("Patches").M(n[Si].t,e,t.u,t.s)):e=o3(t,n,[]),s3(t),t.u&&t.v(t.u,t.s),e!==aPe?e:void 0}function o3(e,t,n){if(mZ(t))return t;var r=t[Si];if(!r)return pb(t,function(a,u){return Jhe(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return a3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=hZ(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),pb(s,function(a,u){return Jhe(e,r,i,a,u,n,o)}),a3(e,i,!1),n&&e.u&&xh("Patches").N(r,n,e.u,e.s)}return r.o}function Jhe(e,t,n,r,i,s,o){if(by(i)){var a=o3(e,i,s&&t&&t.i!==3&&!dE(t.R,r)?s.concat(r):void 0);if(sPe(n,r,a),!by(a))return;e.m=!1}else o&&n.add(i);if(Km(i)&&!mZ(i)){if(!e.h.D&&e._<1)return;o3(e,i),t&&t.A.l||a3(e,i)}}function a3(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&pZ(t,n)}function E9(e,t){var n=e[Si];return(n?Gv(n):e)[t]}function Zhe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function r0(e){e.P||(e.P=!0,e.l&&r0(e.l))}function x9(e){e.o||(e.o=hZ(e.t))}function pH(e,t,n){var r=fZ(t)?xh("MapSet").F(t,n):dZ(t)?xh("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:dH(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=kI;o&&(u=[a],l=KC);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):xh("ES5").J(t,n);return(n?n.A:dH()).p.push(r),r}function mNt(e){return by(e)||Ff(22,e),function t(n){if(!Km(n))return n;var r,i=n[Si],s=zS(n);if(i){if(!i.P&&(i.i<4||!xh("ES5").K(i)))return i.t;i.I=!0,r=epe(n,s),i.I=!1}else r=epe(n,s);return pb(r,function(o,a){i&&fNt(i.t,o)===a||sPe(r,o,t(a))}),s===3?new Set(r):r}(e)}function epe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return hZ(e)}function gNt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[Si];return kI.get(u,s)},set:function(u){var l=this[Si];kI.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][Si];if(!a.P)switch(a.i){case 5:r(a)&&r0(a);break;case 4:n(a)&&r0(a)}}}function n(s){for(var o=s.t,a=s.k,u=hE(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==Si){var f=o[c];if(f===void 0&&!dE(o,c))return!0;var d=a[c],h=d&&d[Si];if(h?h.t!==f:!oPe(d,f))return!0}}var p=!!o[Si];return u.length!==hE(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};hNt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=uPe(f);delete p[Si];for(var m=hE(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:dH(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,Si,{value:l,writable:!0}),u},S:function(s,o,a){a?by(o)&&o[Si].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[Si];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)pb(d,function(b){b!==Si&&(f[b]!==void 0||dE(f,b)?h[b]||u(d[b]):(h[b]=!0,r0(c)))}),pb(f,function(b){d[b]!==void 0||dE(d,b)||(h[b]=!1,r0(c))});else if(p===5){if(r(c)&&(r0(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var tpe,II,gZ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",yNt=typeof Map<"u",vNt=typeof Set<"u",npe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",aPe=gZ?Symbol.for("immer-nothing"):((tpe={})["immer-nothing"]=!0,tpe),rpe=gZ?Symbol.for("immer-draftable"):"__$immer_draftable",Si=gZ?Symbol.for("immer-state"):"__$immer_state",bNt=""+Object.prototype.constructor,hE=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,uPe=Object.getOwnPropertyDescriptors||function(e){var t={};return hE(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},mH={},kI={get:function(e,t){if(t===Si)return e;var n=Gv(e);if(!dE(n,t))return function(i,s,o){var a,u=Zhe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Km(r)?r:r===E9(e.t,t)?(x9(e),e.o[t]=pH(e.A.h,r,e)):r},has:function(e,t){return t in Gv(e)},ownKeys:function(e){return Reflect.ownKeys(Gv(e))},set:function(e,t,n){var r=Zhe(Gv(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=E9(Gv(e),t),s=i==null?void 0:i[Si];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(oPe(n,i)&&(n!==void 0||dE(e.t,t)))return!0;x9(e),r0(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return E9(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,x9(e),r0(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Gv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Ff(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ff(12)}},KC={};pb(kI,function(e,t){KC[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),KC.deleteProperty=function(e,t){return KC.set.call(this,e,t,void 0)},KC.set=function(e,t,n){return kI.set.call(this,e[0],t,n,e[0])};var _Nt=function(){function e(n){var r=this;this.O=npe,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&Ff(6),o!==void 0&&typeof o!="function"&&Ff(7),Km(i)){var c=Qhe(r),f=pH(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?s3(c):hH(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return _9(c,o),w9(m,c)},function(m){throw s3(c),m}):(_9(c,o),w9(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===aPe&&(l=void 0),r.D&&pZ(l,!0),o){var h=[],p=[];xh("Patches").M(i,l,h,p),o(h,p)}return l}Ff(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Km(n)||Ff(8),by(n)&&(n=mNt(n));var r=Qhe(this),i=pH(this,n,void 0);return i[Si].C=!0,hH(r),i},t.finishDraft=function(n,r){var i=n&&n[Si],s=i.A;return _9(s,r),w9(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!npe&&Ff(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=xh("Patches").$;return by(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Ql=new _Nt,wNt=Ql.produce;Ql.produceWithPatches.bind(Ql);Ql.setAutoFreeze.bind(Ql);Ql.setUseProxies.bind(Ql);Ql.applyPatches.bind(Ql);Ql.createDraft.bind(Ql);Ql.finishDraft.bind(Ql);const lPe=wNt;function cPe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var gH=cPe();gH.withExtraArgument=cPe;var fPe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),cR=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},mb=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},ENt=Object.defineProperty,xNt=Object.defineProperties,SNt=Object.getOwnPropertyDescriptors,ipe=Object.getOwnPropertySymbols,TNt=Object.prototype.hasOwnProperty,CNt=Object.prototype.propertyIsEnumerable,spe=function(e,t,n){return t in e?ENt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},B0=function(e,t){for(var n in t||(t={}))TNt.call(t,n)&&spe(e,n,t[n]);if(ipe)for(var r=0,i=ipe(t);r<i.length;r++){var n=i[r];CNt.call(t,n)&&spe(e,n,t[n])}return e},S9=function(e,t){return xNt(e,SNt(t))},fR=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},ANt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?J2:J2.apply(null,arguments)};function dPe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var INt=function(e){return e&&typeof e.match=="function"};function Sh(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return B0(B0({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function kNt(e){return dPe(e)&&"type"in e}var RNt=function(e){fPe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,mb([void 0],n[0].concat(this)))):new(t.bind.apply(t,mb([void 0],n.concat(this))))},t}(Array),NNt=function(e){fPe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,mb([void 0],n[0].concat(this)))):new(t.bind.apply(t,mb([void 0],n.concat(this))))},t}(Array);function yH(e){return Km(e)?lPe(e,function(){}):e}function DNt(e){return typeof e=="boolean"}function PNt(){return function(t){return ONt(t)}}function ONt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new RNt;return n&&(DNt(n)?r.push(gH):r.push(gH.withExtraArgument(n.extraArgument))),r}var $Nt=!0;function MNt(e){var t=PNt(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(dPe(i))h=dct(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=KTe.apply(void 0,p),g=J2;u&&(g=ANt(B0({trace:!$Nt},typeof u=="object"&&u)));var y=new NNt(m),v=y;Array.isArray(d)?v=mb([m],d):typeof d=="function"&&(v=d(y));var b=g.apply(void 0,v);return SX(h,c,b)}function hPe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function LNt(e){return typeof e=="function"}function FNt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?hPe(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(LNt(e))u=function(){return yH(e())};else{var l=yH(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=mb([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(by(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(Km(p))return lPe(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function BNt(e,t){return e+"/"+t}function jNt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:yH(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=BNt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?Sh(d,p):Sh(d)});function u(){var c=typeof e.extraReducers=="function"?hPe(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=B0(B0({},d),o);return FNt(n,function(v){for(var b in y)v.addCase(b,y[b]);for(var w=0,E=p;w<E.length;w++){var x=E[w];v.addMatcher(x.matcher,x.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var UNt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",pPe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=UNt[Math.random()*64|0];return t},zNt=["name","message","stack","code"],T9=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),ope=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),VNt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=zNt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=Sh(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:S9(B0({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=Sh(t+"/pending",function(l,c,f){return{payload:void 0,meta:S9(B0({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=Sh(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||VNt)(l||"Rejected"),meta:S9(B0({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):pPe(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return fR(this,null,function(){var v,b,w,E,x,T,C;return cR(this,function(A){switch(A.label){case 0:return A.trys.push([0,4,,5]),E=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),qNt(E)?[4,E]:[3,2];case 1:E=A.sent(),A.label=2;case 2:if(E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return x=new Promise(function(k,R){return p.signal.addEventListener("abort",function(){return R({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(b=r==null?void 0:r.getPendingMeta)==null?void 0:b.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([x,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(k,R){return new T9(k,R)},fulfillWithValue:function(k,R){return new ope(k,R)}})).then(function(k){if(k instanceof T9)throw k;return k instanceof ope?i(k.payload,h,l,k.meta):i(k,h,l)})])];case 3:return w=A.sent(),[3,5];case 4:return T=A.sent(),w=T instanceof T9?o(null,h,l,T.payload,T.meta):o(T,h,l),[3,5];case 5:return C=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,C||c(w),[2,w]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(HNt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function HNt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function qNt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var WNt=function(e,t){return INt(e)?e.match(t):e(t)};function ape(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return WNt(r,n)})}}var yZ=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},vH=function(){},mPe=function(e,t){return t===void 0&&(t=vH),e.catch(t),e},gPe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},pE=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},GNt="task",yPe="listener",vPe="completed",vZ="cancelled",YNt="task-"+vZ,KNt="task-"+vPe,bPe=yPe+"-"+vZ,XNt=yPe+"-"+vPe,p4=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=GNt+" "+vZ+" (reason: "+t+")"}return e}(),mE=function(e){if(e.aborted)throw new p4(e.reason)};function _Pe(e,t){var n=vH;return new Promise(function(r,i){var s=function(){return i(new p4(e.reason))};if(e.aborted){s();return}n=gPe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=vH})}var QNt=function(e,t){return fR(void 0,null,function(){var n,r;return cR(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof p4?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},u3=function(e){return function(t){return mPe(_Pe(e,t).then(function(n){return mE(e),n}))}},wPe=function(e){var t=u3(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},JNt=Object.assign,upe={},dR="listenerMiddleware",ZNt=function(e,t){var n=function(r){return gPe(e,function(){return pE(r,e.reason)})};return function(r,i){yZ(r,"taskExecutor");var s=new AbortController;n(s);var o=QNt(function(){return fR(void 0,null,function(){var a;return cR(this,function(u){switch(u.label){case 0:return mE(e),mE(s.signal),[4,r({pause:u3(s.signal),delay:wPe(s.signal),signal:s.signal})];case 1:return a=u.sent(),mE(s.signal),[2,a]}})})},function(){return pE(s,KNt)});return i!=null&&i.autoJoin&&t.push(o),{result:u3(e)(o),cancel:function(){pE(s,YNt)}}}},eDt=function(e,t){var n=function(r,i){return fR(void 0,null,function(){var s,o,a,u;return cR(this,function(l){switch(l.label){case 0:mE(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,_Pe(t,Promise.race(a))];case 2:return u=l.sent(),mE(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return mPe(n(r,i))}},EPe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=Sh(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return yZ(s,"options.listener"),{predicate:i,type:t,effect:s}},tDt=function(e){var t=EPe(e),n=t.type,r=t.predicate,i=t.effect,s=pPe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},bH=function(e){e.pending.forEach(function(t){pE(t,bPe)})},nDt=function(e){return function(){e.forEach(bH),e.clear()}},lpe=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},rDt=Sh(dR+"/add"),iDt=Sh(dR+"/removeAll"),sDt=Sh(dR+"/remove"),oDt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,mb([dR+"/error"],e))};function aDt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?oDt:i;yZ(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&bH(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=tDt(h)),o(p)},l=function(h){var p=EPe(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(b){var w=typeof m=="string"?b.type===m:b.predicate===y;return w&&b.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&bH(v)),!!v},c=function(h,p,m,g){return fR(t,null,function(){var y,v,b,w;return cR(this,function(E){switch(E.label){case 0:y=new AbortController,v=eDt(u,y.signal),b=[],E.label=1;case 1:return E.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,JNt({},m,{getOriginalState:g,condition:function(x,T){return v(x,T).then(Boolean)},take:v,delay:wPe(y.signal),pause:u3(y.signal),extra:r,signal:y.signal,fork:ZNt(y.signal,b),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(x,T,C){x!==y&&(pE(x,bPe),C.delete(x))})}})))];case 2:return E.sent(),[3,6];case 3:return w=E.sent(),w instanceof p4||lpe(s,w,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(b)];case 5:return E.sent(),pE(y,XNt),h.pending.delete(y),[7];case 6:return[2]}})})},f=nDt(n),d=function(h){return function(p){return function(m){if(!kNt(m))return p(m);if(rDt.match(m))return u(m.payload);if(iDt.match(m)){f();return}if(sDt.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===upe)throw new Error(dR+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var b=h.getState(),w=Array.from(n.values()),E=0,x=w;E<x.length;E++){var T=x[E],C=!1;try{C=T.predicate(m,b,g)}catch(A){C=!1,lpe(s,A,{raisedBy:"predicate"})}C&&c(T,m,h,y)}}finally{g=upe}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var cpe;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);gNt();function uDt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let RD;const lDt=new Uint8Array(16);function cDt(){if(!RD&&(RD=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!RD))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return RD(lDt)}const Ao=[];for(let e=0;e<256;++e)Ao.push((e+256).toString(16).slice(1));function fDt(e,t=0){return(Ao[e[t+0]]+Ao[e[t+1]]+Ao[e[t+2]]+Ao[e[t+3]]+"-"+Ao[e[t+4]]+Ao[e[t+5]]+"-"+Ao[e[t+6]]+Ao[e[t+7]]+"-"+Ao[e[t+8]]+Ao[e[t+9]]+"-"+Ao[e[t+10]]+Ao[e[t+11]]+Ao[e[t+12]]+Ao[e[t+13]]+Ao[e[t+14]]+Ao[e[t+15]]).toLowerCase()}const dDt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),fpe={randomUUID:dDt};function dpe(e,t,n){if(fpe.randomUUID&&!t&&!e)return fpe.randomUUID();e=e||{};const r=e.random||(e.rng||cDt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,fDt(r)}class Th{static get(){let t=dpe();for(;this.ids.has(t);)t=dpe();return this.ids.set(t,!0),t}}Th.ids=new Map;function Ch(e){return"parent"in e}function hDt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:Th.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:Th.get(),createdOn:Date.now(),val:r}]:[];return{id:Th.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function pDt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:Th.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:Th.get(),createdOn:Date.now(),val:s}]:[];return{id:Th.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function Qi(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=xDt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function gb(e){return!!e&&!!e[Jl]}function _y(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===SDt}(e)||Array.isArray(e)||!!e[YA]||!!(!((t=e.constructor)===null||t===void 0)&&t[YA])||m4(e)||g4(e))}function bx(e,t,n){n===void 0&&(n=!1),wy(e)===0?(n?Object.keys:SZ)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function wy(e){var t=e[Jl];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:m4(e)?2:g4(e)?3:0}function RI(e,t){return wy(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function rO(e,t){return wy(e)===2?e.get(t):e[t]}function xPe(e,t,n){var r=wy(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function mDt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function m4(e){return wDt&&e instanceof Map}function g4(e){return EDt&&e instanceof Set}function Yv(e){return e.o||e.t}function bZ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=TDt(e);delete t[Jl];for(var n=SZ(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function _Z(e,t){return t===void 0&&(t=!1),wZ(e)||gb(e)||!_y(e)||(wy(e)>1&&(e.set=e.add=e.clear=e.delete=gDt),Object.freeze(e),t&&bx(e,function(n,r){return _Z(r,!0)},!0)),e}function gDt(){Qi(2)}function wZ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Ah(e){var t=xH[e];return t||Qi(18,e),t}function yDt(e,t){xH[e]||(xH[e]=t)}function hpe(){return{}.NODE_ENV==="production"||_x||Qi(0),_x}function C9(e,t){t&&(Ah("Patches"),e.u=[],e.s=[],e.v=t)}function l3(e){_H(e),e.p.forEach(vDt),e.p=null}function _H(e){e===_x&&(_x=e.l)}function ppe(e){return _x={p:[],l:_x,h:e,m:!0,_:0}}function vDt(e){var t=e[Jl];t.i===0||t.i===1?t.j():t.O=!0}function A9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||Ah("ES5").S(t,e,r),r?(n[Jl].P&&(l3(t),Qi(4)),_y(e)&&(e=c3(t,e),t.l||f3(t,e)),t.u&&Ah("Patches").M(n[Jl].t,e,t.u,t.s)):e=c3(t,n,[]),l3(t),t.u&&t.v(t.u,t.s),e!==xZ?e:void 0}function c3(e,t,n){if(wZ(t))return t;var r=t[Jl];if(!r)return bx(t,function(s,o){return mpe(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return f3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=bZ(r.k):r.o;bx(r.i===3?new Set(i):i,function(s,o){return mpe(e,r,i,s,o,n)}),f3(e,i,!1),n&&e.u&&Ah("Patches").R(r,n,e.u,e.s)}return r.o}function mpe(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Qi(5),gb(i)){var o=c3(e,i,s&&t&&t.i!==3&&!RI(t.D,r)?s.concat(r):void 0);if(xPe(n,r,o),!gb(o))return;e.m=!1}if(_y(i)&&!wZ(i)){if(!e.h.F&&e._<1)return;c3(e,i),t&&t.A.l||f3(e,i)}}function f3(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&_Z(t,n)}function I9(e,t){var n=e[Jl];return(n?Yv(n):e)[t]}function gpe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function wH(e){e.P||(e.P=!0,e.l&&wH(e.l))}function k9(e){e.o||(e.o=bZ(e.t))}function EH(e,t,n){var r=m4(t)?Ah("MapSet").N(t,n):g4(t)?Ah("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:hpe(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=SH;o&&(u=[a],l=XC);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Ah("ES5").J(t,n);return(n?n.A:hpe()).p.push(r),r}function bDt(e){return gb(e)||Qi(22,e),function t(n){if(!_y(n))return n;var r,i=n[Jl],s=wy(n);if(i){if(!i.P&&(i.i<4||!Ah("ES5").K(i)))return i.t;i.I=!0,r=ype(n,s),i.I=!1}else r=ype(n,s);return bx(r,function(o,a){i&&rO(i.t,o)===a||xPe(r,o,t(a))}),s===3?new Set(r):r}(e)}function ype(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return bZ(e)}function _Dt(){function e(r){if(!_y(r))return r;if(Array.isArray(r))return r.map(e);if(m4(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(g4(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return RI(r,YA)&&(i[YA]=r[YA]),i}function t(r){return gb(r)?e(r):r}var n="add";yDt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=wy(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||Qi(24),typeof u=="function"&&f==="prototype"&&Qi(24),typeof(u=rO(u,f))!="object"&&Qi(15,o.join("/"))}var d=wy(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:Qi(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:Qi(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;bx(a.D,function(h,p){var m=rO(f,h),g=rO(d,h),y=p?RI(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var b=u.concat([v]);l.push({op:n,path:b,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===xZ?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var vpe,_x,EZ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",wDt=typeof Map<"u",EDt=typeof Set<"u",bpe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",xZ=EZ?Symbol.for("immer-nothing"):((vpe={})["immer-nothing"]=!0,vpe),YA=EZ?Symbol.for("immer-draftable"):"__$immer_draftable",Jl=EZ?Symbol.for("immer-state"):"__$immer_state",xDt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},SDt=""+Object.prototype.constructor,SZ=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,TDt=Object.getOwnPropertyDescriptors||function(e){var t={};return SZ(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},xH={},SH={get:function(e,t){if(t===Jl)return e;var n=Yv(e);if(!RI(n,t))return function(i,s,o){var a,u=gpe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!_y(r)?r:r===I9(e.t,t)?(k9(e),e.o[t]=EH(e.A.h,r,e)):r},has:function(e,t){return t in Yv(e)},ownKeys:function(e){return Reflect.ownKeys(Yv(e))},set:function(e,t,n){var r=gpe(Yv(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=I9(Yv(e),t),s=i==null?void 0:i[Jl];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(mDt(n,i)&&(n!==void 0||RI(e.t,t)))return!0;k9(e),wH(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return I9(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,k9(e),wH(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Yv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Qi(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Qi(12)}},XC={};bx(SH,function(e,t){XC[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),XC.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Qi(13),XC.set.call(this,e,t,void 0)},XC.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Qi(14),SH.set.call(this,e[0],t,n,e[0])};var CDt=function(){function e(n){var r=this;this.g=bpe,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&Qi(6),o!==void 0&&typeof o!="function"&&Qi(7),_y(i)){var c=ppe(r),f=EH(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?l3(c):_H(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return C9(c,o),A9(m,c)},function(m){throw l3(c),m}):(C9(c,o),A9(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===xZ&&(l=void 0),r.F&&_Z(l,!0),o){var h=[],p=[];Ah("Patches").M(i,l,h,p),o(h,p)}return l}Qi(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){_y(n)||Qi(8),gb(n)&&(n=bDt(n));var r=ppe(this),i=EH(this,n,void 0);return i[Jl].C=!0,_H(r),i},t.finishDraft=function(n,r){var i=n&&n[Jl];({}).NODE_ENV!=="production"&&(i&&i.C||Qi(9),i.I&&Qi(10));var s=i.A;return C9(s,r),A9(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!bpe&&Qi(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Ah("Patches").$;return gb(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Zl=new CDt,ADt=Zl.produce;Zl.produceWithPatches.bind(Zl);Zl.setAutoFreeze.bind(Zl);Zl.setUseProxies.bind(Zl);Zl.applyPatches.bind(Zl);Zl.createDraft.bind(Zl);Zl.finishDraft.bind(Zl);function IDt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=hDt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return jNt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:Th.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:Th.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function kDt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=IDt(e),s=aDt();s.startListening({matcher:ape(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=ape(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=MNt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:Th.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var RDt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),NDt=Object.prototype.hasOwnProperty;function TH(e,t){return NDt.call(e,t)}function CH(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)TH(e,i)&&r.push(i);return r}function Vu(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function AH(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Kv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function SPe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function IH(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(IH(e[t]))return!0}else if(typeof e=="object"){for(var r=CH(e),i=r.length,s=0;s<i;s++)if(IH(e[r[s]]))return!0}}return!1}function _pe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var TPe=function(e){RDt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,_pe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=_pe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Wi=TPe,DDt=Vu,Lw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=d3(n,this.path);r&&(r=Vu(r));var i=B1(n,{op:"remove",path:this.from}).removed;return B1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=d3(n,this.from);return B1(n,{op:"add",path:this.path,value:Vu(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:NI(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},PDt={add:function(e,t,n){return AH(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Lw.move,copy:Lw.copy,test:Lw.test,_get:Lw._get};function d3(e,t){if(t=="")return e;var n={op:"_get",path:t};return B1(e,n),n.value}function B1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):h3(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=d3(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=NI(e,t.value),o.test===!1)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Wi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Vu(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=h3;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=SPe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!AH(h))throw new Wi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);AH(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Wi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=PDt[t.op].call(t,l,h,e);if(o.test===!1)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=Lw[t.op].call(t,l,h,e);if(o.test===!1)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Wi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function y4(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Wi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Vu(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=B1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function ODt(e,t,n){var r=B1(e,t);if(r.test===!1)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function h3(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Wi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Lw[e.op]){if(typeof e.path!="string")throw new Wi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Wi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Wi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Wi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&IH(e.value))throw new Wi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Wi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Wi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=CPe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Wi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Wi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function CPe(e,t,n){try{if(!Array.isArray(e))throw new Wi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)y4(Vu(t),Vu(e),n||!0);else{n=n||h3;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Wi)return i;throw i}}function NI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!NI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!NI(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const $Dt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Wi,_areEquals:NI,applyOperation:B1,applyPatch:y4,applyReducer:ODt,deepClone:DDt,getValueByPointer:d3,validate:CPe,validator:h3},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var TZ=new WeakMap,MDt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),LDt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function FDt(e){return TZ.get(e)}function BDt(e,t){return e.observers.get(t)}function jDt(e,t){e.observers.delete(t.callback)}function UDt(e,t){t.unobserve()}function zDt(e,t){var n=[],r,i=FDt(e);if(!i)i=new MDt(e),TZ.set(e,i);else{var s=BDt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Vu(e),t){r.callback=t,r.next=null;var o=function(){kH(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){kH(r),clearTimeout(r.next),jDt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new LDt(t,r)),r}function kH(e,t){t===void 0&&(t=!1);var n=TZ.get(e.object);CZ(n.value,e.object,e.patches,"",t),e.patches.length&&y4(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function CZ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=CH(t),o=CH(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(TH(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?CZ(c,f,n,r+"/"+Kv(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Kv(l),value:Vu(c)}),n.push({op:"replace",path:r+"/"+Kv(l),value:Vu(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Kv(l),value:Vu(c)}),n.push({op:"remove",path:r+"/"+Kv(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!TH(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Kv(l),value:Vu(t[l])})}}}function APe(e,t,n){n===void 0&&(n=!1);var r=[];return CZ(e,t,r,"",n),r}const VDt=Object.freeze(Object.defineProperty({__proto__:null,compare:APe,generate:kH,observe:zDt,unobserve:UDt},Symbol.toStringTag,{value:"Module"}));Object.assign({},$Dt,VDt,{JsonPatchError:TPe,deepClone:Vu,escapePathComponent:Kv,unescapePathComponent:SPe});var QC=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(QC||{});function iO(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=kPe(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=iO(i,t);return y4(a,Vu(o),!0,!1).newDocument}function HDt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function IPe({registry:e,initialState:t}){let n=!1;const r=uDt(),i=kDt(t);function s(c){return i.backend.nodes[c]}r.listen(QC.TRAVERSAL_START,()=>{n=!0}),r.listen(QC.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return iO(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=iO(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=APe(y,f);if(HDt(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const b=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:b}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=pDt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=iO(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(QC.TRAVERSAL_START);const f=kPe(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);WDt(p,m)?Ch(p)&&d.push(...p.sideEffects.undo):Ch(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(QC.TRAVERSAL_END)},undo(){const{current:c}=i;return Ch(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return RPe(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function qDt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;Ch(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)Ch(r)&&(r=n[r.parent]),Ch(i)&&(i=n[i.parent]);return r.id}function kPe(e,t,n){const r=qDt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),Ch(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),Ch(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function WDt(e,t){if(Ch(e)&&e.parent===t.id)return!0;if(Ch(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function RPe(e,t){return{...e,children:e.children.map(n=>RPe(t[n],t)),name:`${e.label}`}}_Dt();function GDt(e){return e.length===2?ADt(e):e}class v4{static create(){return new v4}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:GDt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),Sh(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var YDt="Expected a function",wpe=NaN,KDt="[object Symbol]",XDt=/^\s+|\s+$/g,QDt=/^[-+]0x[0-9a-f]+$/i,JDt=/^0b[01]+$/i,ZDt=/^0o[0-7]+$/i,ePt=parseInt,tPt=typeof oo=="object"&&oo&&oo.Object===Object&&oo,nPt=typeof self=="object"&&self&&self.Object===Object&&self,rPt=tPt||nPt||Function("return this")(),iPt=Object.prototype,sPt=iPt.toString,oPt=Math.max,aPt=Math.min,R9=function(){return rPt.Date.now()};function uPt(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(YDt);t=Epe(t)||0,RH(n)&&(c=!!n.leading,f="maxWait"in n,s=f?oPt(Epe(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(x){var T=r,C=i;return r=i=void 0,l=x,o=e.apply(C,T),o}function p(x){return l=x,a=setTimeout(y,t),c?h(x):o}function m(x){var T=x-u,C=x-l,A=t-T;return f?aPt(A,s-C):A}function g(x){var T=x-u,C=x-l;return u===void 0||T>=t||T<0||f&&C>=s}function y(){var x=R9();if(g(x))return v(x);a=setTimeout(y,m(x))}function v(x){return a=void 0,d&&r?h(x):(r=i=void 0,o)}function b(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function w(){return a===void 0?o:v(R9())}function E(){var x=R9(),T=g(x);if(r=arguments,i=this,u=x,T){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return E.cancel=b,E.flush=w,E}function RH(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function lPt(e){return!!e&&typeof e=="object"}function cPt(e){return typeof e=="symbol"||lPt(e)&&sPt.call(e)==KDt}function Epe(e){if(typeof e=="number")return e;if(cPt(e))return wpe;if(RH(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=RH(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(XDt,"");var n=JDt.test(e);return n||ZDt.test(e)?ePt(e.slice(2),n?2:8):QDt.test(e)?wpe:+e}var fPt=uPt;const Ld=dl(fPt);function NPe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=I.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=I.useMemo(()=>CS(".2s"),[]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx($h,{children:_.jsx(Vs,{gap:3,children:_.jsx(Je,{size:"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>_.jsxs("g",{transform:`translate(${n}, ${a})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),_.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const dPt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:NPe},Symbol.toStringTag,{value:"Module"})),N9=15;function DPe({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=I.useState([0,0]),[l,c]=I.useState(!1);return I.useEffect(()=>{const f=_s("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<N9&&Math.abs(t(g[r.y])-p[1])<N9);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),_.jsx("circle",{style:{cursor:l?"pointer":"default"},r:N9,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const hPt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:DPe},Symbol.toStringTag,{value:"Module"})),_i={top:15,left:100,right:15,bottom:70};function NH({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=Qw(),[c]=Qw(),[f]=Qw(),[d,h]=I.useState(!0),p=I.useMemo(()=>l-_i.left-_i.right,[l]),m=I.useMemo(()=>u-_i.top-_i.bottom,[u]),g=I.useMemo(()=>{const k=Array.from(new Set(s.map(R=>R[i.category])));return IS(qIe).domain(k)},[s,i.category]),{xMin:y,yMin:v,xMax:b,yMax:w}=I.useMemo(()=>{const k=s.map(L=>+L[i.x]).filter(L=>L!==null),[R,O]=cfe(k),D=s.map(L=>+L[i.y]).filter(L=>L!==null),[$,F]=cfe(D);return{xMin:R,xMax:O,yMin:$,yMax:F}},[s,i.x,i.y]),E=I.useMemo(()=>{const k=b-y;return p<=0?null:i.dataType==="date"?BIe([_i.left,p+_i.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):Um([_i.left,p+_i.left]).domain([y-k/10,b+k/10]).nice()},[i.dataType,p,b,y]),x=I.useMemo(()=>{const k=w-v;return m<=0?null:Um([m+_i.top,_i.top]).domain([v-k/10,w+k/10]).nice()},[m,w,v]),T=I.useMemo(()=>{if(!E||!x)return()=>null;if(r==="Axis Selection"){const k=p1t().extent([[_i.left,_i.top+m-5],[_i.left+p,_i.top+m+5]]).on("brush end",O=>{O.sourceEvent!==void 0&&n([[O.selection[0],null],[O.selection[1],null]],E,x,O.mode)}),R=m1t().extent([[_i.left-5,_i.top],[_i.left+5,_i.top+m]]).on("brush end",O=>{O.sourceEvent!==void 0&&n([[null,O.selection[0]],[null,O.selection[1]]],E,x,O.mode)});return c.current&&f.current&&(_s(f.current).call(R),_s(c.current).call(k),t.hasBrush||(_s(f.current).call(R.move,[x(w),x(v)]),_s(c.current).call(k.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),x(w)],[E(new Date("2015-12-31")),x(v)]],E,x,"drag"))),()=>{_s(f.current).call(R.move,[x(w),x(v)]),_s(c.current).call(k.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),x(w)],[E(new Date("2015-12-31")),x(v)]],E,x,"clear")}}if(r==="Rectangular Selection"){const k=g1t().extent([[_i.left,_i.top],[_i.left+p,_i.top+m]]).on("brush",R=>{R.sourceEvent!==void 0&&n([[R.selection[0][0],R.selection[0][1]],[R.selection[1][0],R.selection[1][1]]],E,x,R.mode)}).on("end",R=>{R.selection===null&&R.sourceEvent!==void 0&&(_s(a.current).call(k.move,null),e(null))});return _s(a.current).call(k),()=>{_s(a.current).call(k.move,null),n([[null,null],[null,null]],E,x,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[E(y),x(w)],[E(b),x(v)]],E,x,null),()=>n([[E(y),x(w)],[E(b),x(v)]],E,x,"clear")):r==="Paintbrush Selection"?()=>n([[E(y),x(w)],[E(b),x(v)]],E,x,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,b,y,E,w,v,x]),C=I.useMemo(()=>o.length===0?null:new Set(o),[o]),A=I.useMemo(()=>!E||!x?null:s.map((k,R)=>{if(k[i.x]===null||k[i.y]===null)return null;const O=i.dataType==="date"?E(new Date(k[i.x])):E(k[i.x]);return _.jsx("circle",{opacity:C&&!C.has(k[i.ids])?.3:1,r:3,fill:C&&!C.has(k[i.ids])?"lightgray":g(k[i.category]),cx:O,cy:x(k[i.y])},R)}),[C,g,s,i.category,i.dataType,i.ids,i.x,i.y,E,x]);return I.useEffect(()=>{r==="Axis Selection"&&oyt(".handle").style("fill","darkgrey")},[t,r]),_.jsxs(fh,{children:[_.jsxs(Vs,{children:[_.jsx(Nn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),T==null||T()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?_.jsx(kK,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:k=>h(k==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),_.jsxs(Vs,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[_.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E&&x?_.jsxs("g",{children:[_.jsx(NPe,{yScale:x,label:i.y,horizontalPosition:_i.left,xRange:E.range()}),_.jsx(jQ,{xScale:E,yRange:x.range(),isDate:i.dataType==="date",vertPosition:m+_i.top,label:i.x,ticks:E.ticks(i.brushType==="Axis Selection"?12:5).map(k=>({value:k.toString(),offset:E(k)}))})]}):null,A,_.jsx("g",{id:"brushXRef",ref:c}),_.jsx("g",{id:"brushYRef",ref:f}),E&&x&&r==="Paintbrush Selection"?_.jsx(DPe,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:E,yScale:x}):null]}),r==="Slider Selection"&&E&&x?_.jsxs(fh,{style:{flexGrow:1},gap:50,children:[_.jsxs(fh,{gap:0,children:[_.jsx(Je,{children:i.x}),_.jsx(E$,{minRange:1,label:null,min:E.domain()[0],max:E.domain()[1],labelAlwaysOn:!1,onChange:k=>{n([[E(k[0]),t.y1],[E(k[1]),t.y2]],E,x,"drag")},style:{width:"300px"},marks:E.ticks(5).map(k=>({value:k,label:k})),value:[E.invert(t.x1),E.invert(t.x2)]})]}),_.jsxs(fh,{gap:0,children:[_.jsx(Je,{children:i.y}),_.jsx(E$,{minRange:1,label:null,min:x.domain()[0],max:x.domain()[1],onChange:k=>{n([[t.x1,x(k[1])],[t.x2,x(k[0])]],E,x,"drag")},style:{width:"300px"},marks:x.ticks(5).map(k=>({value:k,label:k})),value:[x.invert(t.y2),x.invert(t.y1)]})]})]}):null]})]})}const pPt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:NH,default:NH},Symbol.toStringTag,{value:"Module"}));function xpe({parameters:e,setAnswer:t}){const[n,r]=I.useState(null),[i,s]=I.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=I.useState(null);I.useEffect(()=>{G1t(`./data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=I.useMemo(()=>o?cNt(o):null,[o]),{actions:l,trrack:c}=I.useMemo(()=>{const g=v4.create(),y=g.register("brush",(x,T)=>(x.all={brush:T},x)),v=g.register("brushMove",(x,T)=>(x.all={brush:T},x)),b=g.register("brushResize",(x,T)=>(x.all={brush:T},x)),w=g.register("brushClear",(x,T)=>(x.all={brush:T},x)),E=IPe({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:v,brushResize:b,clearBrush:w},trrack:E}},[]),f=I.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=I.useMemo(()=>Ld(f,100,{maxWait:100}),[f]),h=I.useCallback((g,y,v,b,w)=>{if(!y||!v)return;const E=y.invert(g[0][0]||i.x1),x=y.invert(g[1][0]||i.x2),T=v.invert(g[1][1]||i.y2),C=v.invert(g[0][1]||i.y1);let A=null;if(b==="clear")A=u;else if(w){const R=new Set(w);A=u.filter(b9(O=>R.has(O[e.ids])))}else e.brushType==="Axis Selection"?A=u.filter(b9(R=>new Date(R[e.x])>=new Date(E)&&new Date(R[e.x])<=new Date(x)&&R[e.y]>=T&&R[e.y]<=C)):A=u.filter(b9(R=>R[e.x]>=E&&R[e.x]<=x&&R[e.y]>=T&&R[e.y]<=C));const k={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:b!=="clear",ids:b!=="clear"?A==null?void 0:A.array("id"):[]};s(k),b==="drag"||b==="handle"?d(b,k):b==="clear"&&c.apply("Clear Brush",l.clearBrush(k)),r(A),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=I.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=I.useCallback(g=>{r(g)},[]);return o?_.jsxs(fh,{gap:"xs",children:[_.jsx(NH,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),_.jsx(zV,{data:o,parameters:e,barsTable:p})]}):_.jsx(ag,{})}const mPt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:xpe,default:xpe},Symbol.toStringTag,{value:"Module"})),gPt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Spe=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},VS=e=>{const t=I.useRef(null),n=Spe(e),[r,i]=I.useState(0),[s,o]=I.useState(0);I.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=Spe({...n,width:n.width||r,height:n.height||s});return[t,a]},yPt=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:VS},Symbol.toStringTag,{value:"Module"}));function PPe({data:e,xScale:t,yScale:n,height:r}){return _.jsx("g",{children:e.map((i,s)=>_.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const vPt=Object.freeze(Object.defineProperty({__proto__:null,Bars:PPe},Symbol.toStringTag,{value:"Module"}));function AZ({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=Um().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(0,${a})`,children:[_.jsx("line",{x2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const bPt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:AZ},Symbol.toStringTag,{value:"Module"}));function OPe({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=Qk().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsx("g",{transform:`translate(${a}, 10)`,children:_.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const _Pt=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:OPe},Symbol.toStringTag,{value:"Module"})),wPt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function EPt({parameters:e}){const[n,r]=VS(wPt),i=Qk().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=Um().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(OPe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(AZ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(PPe,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const xPt=Object.freeze(Object.defineProperty({__proto__:null,default:EPt},Symbol.toStringTag,{value:"Module"}));function $Pe({data:e}){return _.jsx("g",{children:e.map(({bubble:t},n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const SPt=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:$Pe},Symbol.toStringTag,{value:"Module"}));function IZ({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const TPt=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:IZ},Symbol.toStringTag,{value:"Module"})),CPt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},APt=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=gIe().size([t-10,n-10]).padding(1.5),o=PF(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},IPt=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function kPt({parameters:e}){const[t,n]=VS(CPt),r=APt(e,n.width,n.height),i=IPt(r,e.selectedIndices);return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[_.jsx($Pe,{data:r}),_.jsx(IZ,{positions:i})]})})})}const RPt=Object.freeze(Object.defineProperty({__proto__:null,default:kPt},Symbol.toStringTag,{value:"Module"}));function MPe({arcs:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const NPt=Object.freeze(Object.defineProperty({__proto__:null,Slices:MPe},Symbol.toStringTag,{value:"Module"}));function LPe({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("g",{transform:`translate(${t.centroid()})`,children:_.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const DPt=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:LPe},Symbol.toStringTag,{value:"Module"})),PPt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},OPt=Mxt().value(e=>e.value),eC=150;function $Pt({parameters:e}){const[t,n]=VS(PPt),r=OPt(e.data),i=r.map(o=>UV().innerRadius(0).outerRadius(eC).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>UV().outerRadius(eC+10).innerRadius(eC+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft+eC,n.marginTop+eC].join(",")})`,children:[_.jsx(MPe,{arcs:i}),_.jsx(LPe,{positions:s})]})})})}const MPt=Object.freeze(Object.defineProperty({__proto__:null,default:$Pt},Symbol.toStringTag,{value:"Module"}));function FPe({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=Um().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(${a}, 0)`,children:[_.jsx("line",{y2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const LPt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:FPe},Symbol.toStringTag,{value:"Module"}));function BPe({data:e,barWidth:t,yScale:n}){return _.jsx("g",{children:e.map((r,i)=>_.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const FPt=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:BPe},Symbol.toStringTag,{value:"Module"})),BPt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function jPt({parameters:e}){const[n,r]=VS(BPt),i=Qk().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=Um().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(b=>+b.value),g=p.reduce((b,w)=>Number(b)+Number(w))/100,y={};p.forEach((b,w)=>{y[String.fromCharCode(w+65)]=b/g});const v=[y];return iSt().keys(e.data.map(b=>b.name))(v)},l=(h,p,m)=>h.filter((y,v)=>p.includes(v)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(FPe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:"translate(0, 0)",children:_.jsx(AZ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsxs("g",{transform:"translate(0, 0)",children:[_.jsx(BPe,{data:c,barWidth:f,yScale:s}),_.jsx(IZ,{positions:d})]})]})})})}const UPt=Object.freeze(Object.defineProperty({__proto__:null,default:jPt},Symbol.toStringTag,{value:"Module"})),zPt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function VPt({parameters:e,setAnswer:t}){const[n,r]=VS(zPt),[i,s]=I.useState(100),[o,a]=I.useState(100),[u,l]=I.useState(300),{taskid:c}=e,{actions:f,trrack:d}=I.useMemo(()=>{const p=v4.create(),m=p.register("click",(y,v)=>(y.clickX=v.clickX,y.clickY=v.clickY,y.distance=v.distance,y)),g=IPe({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=I.useCallback(p=>{const m=_s("#movingCircle"),g=_s("#clickAccuracySvg"),y=rV(p,g.node()),v=[+m.attr("cx"),+m.attr("cy")],b=`${Math.round(Math.sqrt((y[0]-v[0])**2+(y[1]-v[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+b,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:b}})},[f,t,c,d]);return I.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;_s(n.current).select("circle").transition().duration(y).ease(e1t).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:_.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[_.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),_.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),_.jsxs(_e,{children:["Adjust speed (px/s):",_.jsx(R6,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const HPt=Object.freeze(Object.defineProperty({__proto__:null,default:VPt},Symbol.toStringTag,{value:"Module"}));function Tpe({rankings:e}){return _.jsx("div",{style:{fontFamily:"sans-serif"},children:_.jsx("div",{children:e.map((t,n)=>_.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function qPt({parameters:e,setAnswer:t}){const n=Xy(),[r,i]=I.useState(""),{goToNextStep:s,isNextDisabled:o}=HTe(),a=I.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[u]=I.useState(new URLSearchParams(window.location.search)),l=(u.get("admin")||"f")==="t",c=I.useCallback(h=>{i(h),t({status:!0,answers:{[`${n}/leftARP`]:a==="r1"?e.data.r1ARP:e.data.r2ARP,[`${n}/rightARP`]:a==="r2"?e.data.r1ARP:e.data.r2ARP,[`${n}/leftRanking`]:JSON.stringify(a==="r1"?e.data.r1:e.data.r2),[`${n}/rightRanking`]:JSON.stringify(a==="r2"?e.data.r1:e.data.r2),[`${n}/choice`]:h,[`${n}/correctChoice`]:a==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[n,a,e.data,t]),f=I.useCallback(()=>{o||s()},[o,s]);I.useEffect(()=>{const h=cHe([["ArrowLeft",()=>c("left")],["ArrowRight",()=>c("right")],["Enter",f]]);return document.body.addEventListener("keydown",h),()=>{document.body.removeEventListener("keydown",h)}},[c,f]);let d=!1;return a==="r1"?(r==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||r==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(d=!0):(r==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||r==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(d=!0),_.jsxs("div",{children:[_.jsxs(ao,{children:[_.jsxs(ao.Col,{span:2,children:[_.jsx(Tpe,{rankings:a==="r1"?e.data.r1:e.data.r2}),_.jsx(Nn,{fullWidth:!0,disabled:r==="left",onClick:()=>{c("left")},children:r==="left"?_.jsx(Kue,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r1ARP:e.data.r2ARP})]}),_.jsxs(ao.Col,{span:2,children:[_.jsx(Tpe,{rankings:a==="r1"?e.data.r2:e.data.r1}),_.jsx(Nn,{fullWidth:!0,disabled:r==="right",onClick:()=>{c("right")},children:r==="right"?_.jsx(Kue,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),l&&r&&_.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:d?"CORRECT":"INCORRECT"})]})}const WPt=Object.freeze(Object.defineProperty({__proto__:null,default:qPt},Symbol.toStringTag,{value:"Module"})),Cpe=Object.assign({"../public/card-sort-2/CardSortReact.tsx":ugt,"../public/demo-brush-interactions/assets/Bar.tsx":aSt,"../public/demo-brush-interactions/assets/BrushPlot.tsx":mPt,"../public/demo-brush-interactions/assets/Paintbrush.tsx":hPt,"../public/demo-brush-interactions/assets/Scatter.tsx":pPt,"../public/demo-brush-interactions/assets/XAxisBar.tsx":sSt,"../public/demo-brush-interactions/assets/YAxis.tsx":dPt,"../public/demo-brush-interactions/assets/YAxisBar.tsx":oSt,"../public/demo-brush-interactions/assets/types.ts":gPt,"../public/demo-cleveland/assets/BarChart.tsx":xPt,"../public/demo-cleveland/assets/BubbleChart.tsx":RPt,"../public/demo-cleveland/assets/PieChart.tsx":MPt,"../public/demo-cleveland/assets/StackedBarChart.tsx":UPt,"../public/demo-cleveland/assets/chartcomponents/Bars.tsx":vPt,"../public/demo-cleveland/assets/chartcomponents/Bubbles.tsx":SPt,"../public/demo-cleveland/assets/chartcomponents/DotMarks.tsx":TPt,"../public/demo-cleveland/assets/chartcomponents/NumericAxisH.tsx":LPt,"../public/demo-cleveland/assets/chartcomponents/NumericAxisV.tsx":bPt,"../public/demo-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":_Pt,"../public/demo-cleveland/assets/chartcomponents/Slices.tsx":NPt,"../public/demo-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":DPt,"../public/demo-cleveland/assets/chartcomponents/StackedBars.tsx":FPt,"../public/demo-cleveland/assets/hooks/useChartDimensions.tsx":yPt,"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":HPt,"../public/demo-fairness-jnd/assets/FairnessJND.tsx":WPt});function GPt({currentConfig:e}){const t=hg(),n=Xy(),r=`../public/${e.path}`,i=r in Cpe?Cpe[r].default:null,s=ap(),{updateResponseBlockValidation:o,setIframeAnswers:a}=op();function u({status:l,provenanceGraph:c,answers:f}){s(o({location:"sidebar",identifier:`${n}_${t}`,status:l,values:f,provenanceGraph:c})),s(a(f))}return _.jsx(I.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:i?_.jsx(i,{parameters:e.parameters,setAnswer:u}):_.jsx(ib,{path:e.path})})}function YPt({currentConfig:e}){const[t,n]=I.useState(""),[r,i]=I.useState(!0);return I.useEffect(()=>{async function s(){const o=await xX(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?_.jsx(iu,{text:t}):_.jsx(ib,{path:e.path})}const KPt={},XPt=Object.freeze(Object.defineProperty({__proto__:null,default:KPt},Symbol.toStringTag,{value:"Module"})),QPt=AUe(XPt);var JPt=QPt;function ZPt(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function eOt(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function tOt(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function nOt(e){return e.__COMMENTS__}function rOt(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var b4={EOL:JPt.EOL||`
`,tryParseNumber:ZPt,createComment:eOt,removeComment:tOt,getComment:nOt,forceComment:rOt},iOt="3.2.1";function sOt(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return Ape}else if(e.length===0)return Ape;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return aOt(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),oOt.bind(null,n)}function oOt(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function Ape(){}function aOt(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function jPe(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}jPe.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function UPe(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}UPe.description="parse hexadecimal numbers prefixed with 0x";function zPe(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}zPe.description="support ISO dates";var kZ={loadDsf:sOt,std:{math:jPe,hex:UPe,date:zPe}},uOt=function(e,t){var n=b4,r=kZ,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f($){return $==="{"||$==="}"||$==="["||$==="]"||$===","||$===":"}function d($){var F,L=0,j=1;for(F=s-1;F>0&&i[F]!==`
`;F--,L++);for(;F>0;F--)i[F]===`
`&&j++;throw new Error($+" at line "+j+","+L+" >>>"+i.substr(s-L,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p($){return i.charAt(s+$)}function m($){for(var F="",L=o;h();){if(o===L)return h(),$&&L==="'"&&o==="'"&&F.length===0?(h(),g()):F;if(o==="\\")if(h(),o==="u"){for(var j=0,z=0;z<4;z++){h();var q=o.charCodeAt(0),P;o>="0"&&o<="9"?P=q-48:o>="a"&&o<="f"?P=q-97+10:o>="A"&&o<="F"?P=q-65+10:d("Bad \\u char "+o),j=j*16+P}F+=String.fromCharCode(j)}else if(typeof a[o]=="string")F+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):F+=o}d("Bad string")}function g(){for(var $="",F=0,L=0;;){var j=p(-L-5);if(!j||j===`
`)break;L++}function z(){for(var q=L;o&&o<=" "&&o!==`
`&&q-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),z());;){if(!o)d("Bad multiline string");else if(o==="'"){if(F++,h(),F===3)return $.slice(-1)===`
`&&($=$.slice(0,-1)),$;continue}else for(;F>0;)$+="'",F--;o===`
`?($+=`
`,h(),z()):(o!=="\r"&&($+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var $="",F=s,L=-1;;){if(o===":")return $?L>=0&&L!==$.length&&(s=F+L,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),$;o<=" "?o?L<0&&(L=$.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):$+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function b(){var $=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var F=o==="\r"||o===`
`||o==="";if(F||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var L=$[0];switch(L){case"f":if($.trim()==="false")return!1;break;case"n":if($.trim()==="null")return null;break;case"t":if($.trim()==="true")return!0;break;default:if(L==="-"||L>="0"&&L<="9"){var j=n.tryParseNumber($);if(j!==void 0)return j}}if(F){$=$.trim();var z=l($);return z!==void 0?z:$}}$+=o}}function w($,F){var L;for($--,L=s-2;L>$&&i[L]<=" "&&i[L]!==`
`;L--);i[L]===`
`&&L--,i[L]==="\r"&&L--;var j=i.substr($,L-$+1);for(L=0;L<j.length;L++)if(j[L]>" "){var z=j.indexOf(`
`);if(z>=0){var q=[j.substr(0,z),j.substr(z+1)];return F&&q[0].trim().length===0&&q.shift(),q}else return[j]}return[]}function E($){function F(j,z){var q,P,U,W;switch(typeof j){case"string":j.indexOf(z)>=0&&(W=j);break;case"object":if(Object.prototype.toString.apply(j)==="[object Array]")for(q=0,U=j.length;q<U;q++)W=F(j[q],z)||W;else for(P in j)Object.prototype.hasOwnProperty.call(j,P)&&(W=F(j[P],z)||W)}return W}function L(j){var z=F($,j);return z?"found '"+j+`' in a string value, your mistake could be with:
  > `+z+`
  (unquoted strings contain everything up to the next line!)`:""}return L("}")||L("]")}function x(){var $=[],F,L,j;try{if(u&&(F=n.createComment($,{a:[]})),h(),L=s,v(),F&&(j=w(L,!0).join(`
`)),o==="]")return h(),F&&(F.e=[j]),$;for(;o;){if($.push(C()),L=s,v(),o===","&&(h(),L=s,v()),F){var z=w(L);F.a.push([j||"",z[0]||""]),j=z[1]}if(o==="]")return h(),F&&(F.a[F.a.length-1][1]+=j||""),$;v()}d("End of input while parsing an array (missing ']')")}catch(q){throw q.hint=q.hint||E($),q}}function T($){var F="",L={},j,z,q;try{if(u&&(j=n.createComment(L,{c:{},o:[]})),$?z=1:(h(),z=s),v(),j&&(q=w(z,!0).join(`
`)),o==="}"&&!$)return j&&(j.e=[q]),h(),L;for(;o;){if(F=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),L[F]=C(),z=s,v(),o===","&&(h(),z=s,v()),j){var P=w(z);j.c[F]=[q||"",P[0]||""],q=P[1],j.o.push(F)}if(o==="}"&&!$)return h(),j&&(j.c[F][1]+=q||""),L;v()}if($)return L;d("End of input while parsing an object (missing '}')")}catch(U){throw U.hint=U.hint||E(L),U}}function C(){switch(v(),o){case"{":return T();case"[":return x();case"'":case'"':return m(!0);default:return b()}}function A($,F){var L=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var j=F.join(`
`),z=w(L).join(`
`);if(z||j){var q=n.createComment($,n.getComment($));q.r=[j,z]}}return $}function k(){v();var $=u?w(1):null;switch(o){case"{":return A(T(),$);case"[":return A(x(),$);default:return A(C(),$)}}function R(){v();var $=u?w(1):null;switch(o){case"{":return A(T(),$);case"[":return A(x(),$)}try{return A(T(!0),$)}catch(F){c();try{return A(C(),$)}catch{throw F}}}if(typeof e!="string")throw new Error("source is not a string");var O=null,D=!0;return t&&typeof t=="object"&&(u=t.keepWsc,O=t.dsf,D=t.legacyRoot!==!1),l=r.loadDsf(O,"parse"),i=e,c(),D?R():k()},lOt=function(e,t){var n=b4,r=kZ,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var b=v[y];g[b].push(i[b][0].length,i[b][1].length)}}var w,E="---\u2028--\uFEFF-",x=new RegExp('[\\\\\\"\0-'+E+"]","g"),T=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+E+"]","g"),C=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+E+"]","g"),A=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),k={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},R=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,O="",D=0;function $(W,B){return D+=W[0].length+W[1].length-W[2]-W[3],W[0]+B+W[1]}function F(W){return W.replace(x,function(B){var H=k[B];return typeof H=="string"?$(g.esc,H):$(g.uni,("0000"+B.charCodeAt(0).toString(16)).slice(-4))})}function L(W,B,H,G){return W?(T.lastIndex=0,A.lastIndex=0,c||H||T.test(W)||n.tryParseNumber(W,!0)!==void 0||A.test(W)?(x.lastIndex=0,C.lastIndex=0,x.test(W)?!C.test(W)&&!G&&d?j(W,B):$(g.qstr,F(W)):$(g.qstr,W)):$(g.str,W)):$(g.qstr,"")}function j(W,B){var H,G=W.replace(/\r/g,"").split(`
`);if(B+=o,G.length===1)return $(g.mstr,G[0]);var te=s+B+g.mstr[0];for(H=0;H<G.length;H++)te+=s,G[H]&&(te+=B+G[H]);return te+s+B+g.mstr[1]}function z(W){return W?l||R.test(W)?(x.lastIndex=0,$(g.qkey,x.test(W)?F(W):W)):$(g.key,W):'""'}function q(W,B,H,G){function te(yn){return yn&&yn[yn[0]==="\r"?1:0]===`
`}function le(yn){return yn&&!te(yn)}function fe(yn,An,sr){if(!yn)return"";yn=n.forceComment(yn);var or,Qo=yn.length;for(or=0;or<Qo&&yn[or]<=" ";or++);return sr&&or>0&&(yn=yn.substr(or)),or<Qo?An+$(g.rem,yn):yn}var de=w(W);if(de!==void 0)return $(g.dsf,de);switch(typeof W){case"string":return L(W,O,B,G);case"number":return isFinite(W)?$(g.num,String(W)):$(g.lit,"null");case"boolean":return $(g.lit,String(W));case"object":if(!W)return $(g.lit,"null");var ge;a&&(ge=n.getComment(W));var Ie=Object.prototype.toString.apply(W)==="[object Array]",pe=O;O+=o;var He=s+pe,Ue=s+O,yt=H||u?"":He,it=[],be,ke=f?[]:null,ze=c,ct=d,Ot=h?"":g.com[0],Ge=0,ye,ht,bt,me,Ae,qe,ut,wt,Bn;if(Ie){for(ye=0,ht=W.length;ye<ht;ye++){if(be=ye<ht-1,ge?(qe=ge.a[ye]||[],ut=le(qe[1]),it.push(fe(qe[0],`
`)+Ue),ke&&(qe[0]||qe[1]||ut)&&(ke=null)):it.push(Ue),D=0,me=W[ye],it.push(q(me,ge?ut:!1,!0)+(be?h:"")),ke){switch(typeof me){case"string":D=0,c=!0,d=0,ke.push(q(me,!1,!0)+(be?g.com[0]:"")),c=ze,d=ct;break;case"object":if(me){ke=null;break}default:ke.push(it[it.length-1]+(be?Ot:""));break}be&&(D+=g.com[0].length-g.com[2]),Ge+=D}ge&&qe[1]&&it.push(fe(qe[1],ut?" ":`
`,ut))}ht===0?ge&&ge.e&&it.push(fe(ge.e[0],`
`)+He):it.push(He),it.length===0?wt=$(g.arr,""):(wt=yt+$(g.arr,it.join("")),ke&&(Bn=ke.join(" "),Bn.length-Ge<=f&&(wt=$(g.arr,Bn))))}else{var Ir=ge?ge.o.slice():[],jn=[];for(bt in W)Object.prototype.hasOwnProperty.call(W,bt)&&Ir.indexOf(bt)<0&&jn.push(bt);m&&jn.sort();var hr=Ir.concat(jn);for(ye=0,ht=hr.length;ye<ht;ye++)if(be=ye<ht-1,bt=hr[ye],ge?(qe=ge.c[bt]||[],ut=le(qe[1]),it.push(fe(qe[0],`
`)+Ue),ke&&(qe[0]||qe[1]||ut)&&(ke=null)):it.push(Ue),D=0,me=W[bt],Ae=q(me,ge&&ut),it.push(z(bt)+g.col[0]+(te(Ae)?"":" ")+Ae+(be?h:"")),ge&&qe[1]&&it.push(fe(qe[1],ut?" ":`
`,ut)),ke){switch(typeof me){case"string":D=0,c=!0,d=0,Ae=q(me,!1),c=ze,d=ct,ke.push(z(bt)+g.col[0]+" "+Ae+(be?g.com[0]:""));break;case"object":if(me){ke=null;break}default:ke.push(it[it.length-1]+(be?Ot:""));break}D+=g.col[0].length-g.col[2],be&&(D+=g.com[0].length-g.com[2]),Ge+=D}ht===0?ge&&ge.e&&it.push(fe(ge.e[0],`
`)+He):it.push(He),it.length===0?wt=$(g.obj,""):(wt=yt+$(g.obj,it.join("")),ke&&(Bn=ke.join(" "),Bn.length-Ge<=f&&(wt=$(g.obj,Bn))))}return O=pe,wt}}w=r.loadDsf(p,"stringify");var P="",U=a?U=(n.getComment(e)||{}).r:null;return U&&U[0]&&(P=U[0]+`
`),P+=q(e,null,!0,!0),U&&(P+=U[1]||""),P},gE=b4;function KA(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function DH(e,t){if(!(e===null||typeof e!="object")){var n=gE.getComment(e);n&&gE.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)Ipe(o.a,r,n.a[r],DH(e[r]))&&(s=!0);!s&&n.e&&(o.e=KA(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];Ipe(o.s,l,n.c[l],DH(e[l]))&&(s=!0)}!s&&n.e&&(o.e=KA(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=KA(n.r[0],n.r[1])),s?o:void 0}}function cOt(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function fOt(e,t){var n=[];if(PH(e,t,n,[]),n.length>0){var r=p3(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+cOt(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),p3(t,r,1)}}function Ipe(e,t,n,r){var i=KA(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function XA(e,t){var n=KA(t.b,t.a);return n.path=e,n}function QA(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(XA(s,o)),QA(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(XA(u,l)),QA(l.x,t,u))});e.e&&t.push(XA(n,e.e))}}function PH(e,t,n,r){if(e){if(t===null||typeof t!="object"){QA(e,n,r);return}var i,s=gE.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],PH(u.x,t[i],n,l)):(n.push(XA(l,u)),QA(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],PH(d.x,t[c],n,f))):d&&(n.push(XA(f,d)),QA(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function p3(e,t,n){var r=gE.createComment(e,gE.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=gE.forceComment(t)),r.r[n]||""}var dOt={extract:function(e){return DH(e,!0)},merge:fOt,header:function(e,t){return p3(e,t,0)},footer:function(e,t){return p3(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var kpe=b4,hOt=iOt,Rpe=uOt,Npe=lOt,pOt=dOt,mOt=kZ,RZ={parse:Rpe,stringify:Npe,endOfLine:function(){return kpe.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(kpe.EOL=e)},version:hOt,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,Rpe(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,Npe(e,t)}},comments:pOt,dsf:mOt.std},OH={exports:{}},VPe={},Zf={},wx={},hR={},$n={},DI={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((b,w)=>`${b}${w}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((b,w)=>(w instanceof n&&(b[w.str]=(b[w.str]||0)+1),b),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const b=[y[0]];let w=0;for(;w<v.length;)a(b,v[w]),b.push(y[++w]);return new r(b)}e._=i;const s=new r("+");function o(y,...v){const b=[h(y[0])];let w=0;for(;w<v.length;)b.push(s),a(b,v[w]),b.push(s,h(y[++w]));return u(b),new r(b)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const b=l(y[v-1],y[v+1]);if(b!==void 0){y.splice(v-1,3,b);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(DI);var $H={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=DI;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const b=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${b} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})($H);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=DI,n=$H;var r=DI;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=$H;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(H,G){return this}}class o extends s{constructor(H,G,te){super(),this.varKind=H,this.name=G,this.rhs=te}render({es5:H,_n:G}){const te=H?n.varKinds.var:this.varKind,le=this.rhs===void 0?"":` = ${this.rhs}`;return`${te} ${this.name}${le};`+G}optimizeNames(H,G){if(H[this.name.str])return this.rhs&&(this.rhs=$(this.rhs,H,G)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(H,G,te){super(),this.lhs=H,this.rhs=G,this.sideEffects=te}render({_n:H}){return`${this.lhs} = ${this.rhs};`+H}optimizeNames(H,G){if(!(this.lhs instanceof t.Name&&!H[this.lhs.str]&&!this.sideEffects))return this.rhs=$(this.rhs,H,G),this}get names(){const H=this.lhs instanceof t.Name?{}:{...this.lhs.names};return D(H,this.rhs)}}class u extends a{constructor(H,G,te,le){super(H,te,le),this.op=G}render({_n:H}){return`${this.lhs} ${this.op}= ${this.rhs};`+H}}class l extends s{constructor(H){super(),this.label=H,this.names={}}render({_n:H}){return`${this.label}:`+H}}class c extends s{constructor(H){super(),this.label=H,this.names={}}render({_n:H}){return`break${this.label?` ${this.label}`:""};`+H}}class f extends s{constructor(H){super(),this.error=H}render({_n:H}){return`throw ${this.error};`+H}get names(){return this.error.names}}class d extends s{constructor(H){super(),this.code=H}render({_n:H}){return`${this.code};`+H}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(H,G){return this.code=$(this.code,H,G),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(H=[]){super(),this.nodes=H}render(H){return this.nodes.reduce((G,te)=>G+te.render(H),"")}optimizeNodes(){const{nodes:H}=this;let G=H.length;for(;G--;){const te=H[G].optimizeNodes();Array.isArray(te)?H.splice(G,1,...te):te?H[G]=te:H.splice(G,1)}return H.length>0?this:void 0}optimizeNames(H,G){const{nodes:te}=this;let le=te.length;for(;le--;){const fe=te[le];fe.optimizeNames(H,G)||(F(H,fe.names),te.splice(le,1))}return te.length>0?this:void 0}get names(){return this.nodes.reduce((H,G)=>O(H,G.names),{})}}class p extends h{render(H){return"{"+H._n+super.render(H)+"}"+H._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(H,G){super(G),this.condition=H}render(H){let G=`if(${this.condition})`+super.render(H);return this.else&&(G+="else "+this.else.render(H)),G}optimizeNodes(){super.optimizeNodes();const H=this.condition;if(H===!0)return this.nodes;let G=this.else;if(G){const te=G.optimizeNodes();G=this.else=Array.isArray(te)?new g(te):te}if(G)return H===!1?G instanceof y?G:G.nodes:this.nodes.length?this:new y(L(H),G instanceof y?[G]:G.nodes);if(!(H===!1||!this.nodes.length))return this}optimizeNames(H,G){var te;if(this.else=(te=this.else)===null||te===void 0?void 0:te.optimizeNames(H,G),!!(super.optimizeNames(H,G)||this.else))return this.condition=$(this.condition,H,G),this}get names(){const H=super.names;return D(H,this.condition),this.else&&O(H,this.else.names),H}}y.kind="if";class v extends p{}v.kind="for";class b extends v{constructor(H){super(),this.iteration=H}render(H){return`for(${this.iteration})`+super.render(H)}optimizeNames(H,G){if(super.optimizeNames(H,G))return this.iteration=$(this.iteration,H,G),this}get names(){return O(super.names,this.iteration.names)}}class w extends v{constructor(H,G,te,le){super(),this.varKind=H,this.name=G,this.from=te,this.to=le}render(H){const G=H.es5?n.varKinds.var:this.varKind,{name:te,from:le,to:fe}=this;return`for(${G} ${te}=${le}; ${te}<${fe}; ${te}++)`+super.render(H)}get names(){const H=D(super.names,this.from);return D(H,this.to)}}class E extends v{constructor(H,G,te,le){super(),this.loop=H,this.varKind=G,this.name=te,this.iterable=le}render(H){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(H)}optimizeNames(H,G){if(super.optimizeNames(H,G))return this.iterable=$(this.iterable,H,G),this}get names(){return O(super.names,this.iterable.names)}}class x extends p{constructor(H,G,te){super(),this.name=H,this.args=G,this.async=te}render(H){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(H)}}x.kind="func";class T extends h{render(H){return"return "+super.render(H)}}T.kind="return";class C extends p{render(H){let G="try"+super.render(H);return this.catch&&(G+=this.catch.render(H)),this.finally&&(G+=this.finally.render(H)),G}optimizeNodes(){var H,G;return super.optimizeNodes(),(H=this.catch)===null||H===void 0||H.optimizeNodes(),(G=this.finally)===null||G===void 0||G.optimizeNodes(),this}optimizeNames(H,G){var te,le;return super.optimizeNames(H,G),(te=this.catch)===null||te===void 0||te.optimizeNames(H,G),(le=this.finally)===null||le===void 0||le.optimizeNames(H,G),this}get names(){const H=super.names;return this.catch&&O(H,this.catch.names),this.finally&&O(H,this.finally.names),H}}class A extends p{constructor(H){super(),this.error=H}render(H){return`catch(${this.error})`+super.render(H)}}A.kind="catch";class k extends p{render(H){return"finally"+super.render(H)}}k.kind="finally";class R{constructor(H,G={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...G,_n:G.lines?`
`:""},this._extScope=H,this._scope=new n.Scope({parent:H}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(H){return this._scope.name(H)}scopeName(H){return this._extScope.name(H)}scopeValue(H,G){const te=this._extScope.value(H,G);return(this._values[te.prefix]||(this._values[te.prefix]=new Set)).add(te),te}getScopeValue(H,G){return this._extScope.getValue(H,G)}scopeRefs(H){return this._extScope.scopeRefs(H,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(H,G,te,le){const fe=this._scope.toName(G);return te!==void 0&&le&&(this._constants[fe.str]=te),this._leafNode(new o(H,fe,te)),fe}const(H,G,te){return this._def(n.varKinds.const,H,G,te)}let(H,G,te){return this._def(n.varKinds.let,H,G,te)}var(H,G,te){return this._def(n.varKinds.var,H,G,te)}assign(H,G,te){return this._leafNode(new a(H,G,te))}add(H,G){return this._leafNode(new u(H,e.operators.ADD,G))}code(H){return typeof H=="function"?H():H!==t.nil&&this._leafNode(new d(H)),this}object(...H){const G=["{"];for(const[te,le]of H)G.length>1&&G.push(","),G.push(te),(te!==le||this.opts.es5)&&(G.push(":"),(0,t.addCodeArg)(G,le));return G.push("}"),new t._Code(G)}if(H,G,te){if(this._blockNode(new y(H)),G&&te)this.code(G).else().code(te).endIf();else if(G)this.code(G).endIf();else if(te)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(H){return this._elseNode(new y(H))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(H,G){return this._blockNode(H),G&&this.code(G).endFor(),this}for(H,G){return this._for(new b(H),G)}forRange(H,G,te,le,fe=this.opts.es5?n.varKinds.var:n.varKinds.let){const de=this._scope.toName(H);return this._for(new w(fe,de,G,te),()=>le(de))}forOf(H,G,te,le=n.varKinds.const){const fe=this._scope.toName(H);if(this.opts.es5){const de=G instanceof t.Name?G:this.var("_arr",G);return this.forRange("_i",0,(0,t._)`${de}.length`,ge=>{this.var(fe,(0,t._)`${de}[${ge}]`),te(fe)})}return this._for(new E("of",le,fe,G),()=>te(fe))}forIn(H,G,te,le=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(H,(0,t._)`Object.keys(${G})`,te);const fe=this._scope.toName(H);return this._for(new E("in",le,fe,G),()=>te(fe))}endFor(){return this._endBlockNode(v)}label(H){return this._leafNode(new l(H))}break(H){return this._leafNode(new c(H))}return(H){const G=new T;if(this._blockNode(G),this.code(H),G.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(T)}try(H,G,te){if(!G&&!te)throw new Error('CodeGen: "try" without "catch" and "finally"');const le=new C;if(this._blockNode(le),this.code(H),G){const fe=this.name("e");this._currNode=le.catch=new A(fe),G(fe)}return te&&(this._currNode=le.finally=new k,this.code(te)),this._endBlockNode(A,k)}throw(H){return this._leafNode(new f(H))}block(H,G){return this._blockStarts.push(this._nodes.length),H&&this.code(H).endBlock(G),this}endBlock(H){const G=this._blockStarts.pop();if(G===void 0)throw new Error("CodeGen: not in self-balancing block");const te=this._nodes.length-G;if(te<0||H!==void 0&&te!==H)throw new Error(`CodeGen: wrong number of nodes: ${te} vs ${H} expected`);return this._nodes.length=G,this}func(H,G=t.nil,te,le){return this._blockNode(new x(H,G,te)),le&&this.code(le).endFunc(),this}endFunc(){return this._endBlockNode(x)}optimize(H=1){for(;H-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(H){return this._currNode.nodes.push(H),this}_blockNode(H){this._currNode.nodes.push(H),this._nodes.push(H)}_endBlockNode(H,G){const te=this._currNode;if(te instanceof H||G&&te instanceof G)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${G?`${H.kind}/${G.kind}`:H.kind}"`)}_elseNode(H){const G=this._currNode;if(!(G instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=G.else=H,this}get _root(){return this._nodes[0]}get _currNode(){const H=this._nodes;return H[H.length-1]}set _currNode(H){const G=this._nodes;G[G.length-1]=H}}e.CodeGen=R;function O(B,H){for(const G in H)B[G]=(B[G]||0)+(H[G]||0);return B}function D(B,H){return H instanceof t._CodeOrName?O(B,H.names):B}function $(B,H,G){if(B instanceof t.Name)return te(B);if(!le(B))return B;return new t._Code(B._items.reduce((fe,de)=>(de instanceof t.Name&&(de=te(de)),de instanceof t._Code?fe.push(...de._items):fe.push(de),fe),[]));function te(fe){const de=G[fe.str];return de===void 0||H[fe.str]!==1?fe:(delete H[fe.str],de)}function le(fe){return fe instanceof t._Code&&fe._items.some(de=>de instanceof t.Name&&H[de.str]===1&&G[de.str]!==void 0)}}function F(B,H){for(const G in H)B[G]=(B[G]||0)-(H[G]||0)}function L(B){return typeof B=="boolean"||typeof B=="number"||B===null?!B:(0,t._)`!${W(B)}`}e.not=L;const j=U(e.operators.AND);function z(...B){return B.reduce(j)}e.and=z;const q=U(e.operators.OR);function P(...B){return B.reduce(q)}e.or=P;function U(B){return(H,G)=>H===t.nil?G:G===t.nil?H:(0,t._)`${W(H)} ${B} ${W(G)}`}function W(B){return B instanceof t.Name?B:(0,t._)`(${B})`}})($n);var Et={};Object.defineProperty(Et,"__esModule",{value:!0});Et.checkStrictMode=Et.getErrorPath=Et.Type=Et.useFunc=Et.setEvaluated=Et.evaluatedPropsToName=Et.mergeEvaluated=Et.eachItem=Et.unescapeJsonPointer=Et.escapeJsonPointer=Et.escapeFragment=Et.unescapeFragment=Et.schemaRefOrVal=Et.schemaHasRulesButRef=Et.schemaHasRules=Et.checkUnknownRules=Et.alwaysValidSchema=Et.toHash=void 0;const Qr=$n,gOt=DI;function yOt(e){const t={};for(const n of e)t[n]=!0;return t}Et.toHash=yOt;function vOt(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(HPe(e,t),!qPe(t,e.self.RULES.all))}Et.alwaysValidSchema=vOt;function HPe(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||YPe(e,`unknown keyword: "${s}"`)}Et.checkUnknownRules=HPe;function qPe(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}Et.schemaHasRules=qPe;function bOt(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}Et.schemaHasRulesButRef=bOt;function _Ot({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Qr._)`${n}`}return(0,Qr._)`${e}${t}${(0,Qr.getProperty)(r)}`}Et.schemaRefOrVal=_Ot;function wOt(e){return WPe(decodeURIComponent(e))}Et.unescapeFragment=wOt;function EOt(e){return encodeURIComponent(NZ(e))}Et.escapeFragment=EOt;function NZ(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}Et.escapeJsonPointer=NZ;function WPe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}Et.unescapeJsonPointer=WPe;function xOt(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}Et.eachItem=xOt;function Dpe({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof Qr.Name?(s instanceof Qr.Name?e(i,s,o):t(i,s,o),o):s instanceof Qr.Name?(t(i,o,s),s):n(s,o);return a===Qr.Name&&!(u instanceof Qr.Name)?r(i,u):u}}Et.mergeEvaluated={props:Dpe({mergeNames:(e,t,n)=>e.if((0,Qr._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,Qr._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,Qr._)`${n} || {}`).code((0,Qr._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,Qr._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,Qr._)`${n} || {}`),DZ(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:GPe}),items:Dpe({mergeNames:(e,t,n)=>e.if((0,Qr._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,Qr._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,Qr._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,Qr._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function GPe(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,Qr._)`{}`);return t!==void 0&&DZ(e,n,t),n}Et.evaluatedPropsToName=GPe;function DZ(e,t,n){Object.keys(n).forEach(r=>e.assign((0,Qr._)`${t}${(0,Qr.getProperty)(r)}`,!0))}Et.setEvaluated=DZ;const Ppe={};function SOt(e,t){return e.scopeValue("func",{ref:t,code:Ppe[t.code]||(Ppe[t.code]=new gOt._Code(t.code))})}Et.useFunc=SOt;var MH;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(MH||(Et.Type=MH={}));function TOt(e,t,n){if(e instanceof Qr.Name){const r=t===MH.Num;return n?r?(0,Qr._)`"[" + ${e} + "]"`:(0,Qr._)`"['" + ${e} + "']"`:r?(0,Qr._)`"/" + ${e}`:(0,Qr._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Qr.getProperty)(e).toString():"/"+NZ(e)}Et.getErrorPath=TOt;function YPe(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}Et.checkStrictMode=YPe;var dp={};Object.defineProperty(dp,"__esModule",{value:!0});const la=$n,COt={data:new la.Name("data"),valCxt:new la.Name("valCxt"),instancePath:new la.Name("instancePath"),parentData:new la.Name("parentData"),parentDataProperty:new la.Name("parentDataProperty"),rootData:new la.Name("rootData"),dynamicAnchors:new la.Name("dynamicAnchors"),vErrors:new la.Name("vErrors"),errors:new la.Name("errors"),this:new la.Name("this"),self:new la.Name("self"),scope:new la.Name("scope"),json:new la.Name("json"),jsonPos:new la.Name("jsonPos"),jsonLen:new la.Name("jsonLen"),jsonPart:new la.Name("jsonPart")};dp.default=COt;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=$n,n=Et,r=dp;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,b){const{it:w}=g,{gen:E,compositeRule:x,allErrors:T}=w,C=f(g,y,v);b??(x||T)?u(E,C):l(w,(0,t._)`[${C}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:b}=g,{gen:w,compositeRule:E,allErrors:x}=b,T=f(g,y,v);u(w,T),E||x||l(b,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:b,errsCount:w,it:E}){if(w===void 0)throw new Error("ajv implementation error");const x=g.name("err");g.forRange("i",w,r.default.errors,T=>{g.const(x,(0,t._)`${r.default.vErrors}[${T}]`),g.if((0,t._)`${x}.instancePath === undefined`,()=>g.assign((0,t._)`${x}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),g.assign((0,t._)`${x}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${y}`),E.opts.verbose&&(g.assign((0,t._)`${x}.schema`,v),g.assign((0,t._)`${x}.data`,b))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:b,schemaEnv:w}=g;w.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${b}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:b}=g.it;return b===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:b,it:w}=g,E=[h(w,v),p(g,v)];return m(g,y,E),b.object(...E)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:b}){let w=b?y:(0,t.str)`${y}/${g}`;return v&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:y,message:v},b){const{keyword:w,data:E,schemaValue:x,it:T}=g,{opts:C,propertyName:A,topSchemaRef:k,schemaPath:R}=T;b.push([c.keyword,w],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),C.messages&&b.push([c.message,typeof v=="function"?v(g):v]),C.verbose&&b.push([c.schema,x],[c.parentSchema,(0,t._)`${k}${R}`],[r.default.data,E]),A&&b.push([c.propertyName,A])}})(hR);Object.defineProperty(wx,"__esModule",{value:!0});wx.boolOrEmptySchema=wx.topBoolOrEmptySchema=void 0;const AOt=hR,IOt=$n,kOt=dp,ROt={message:"boolean schema is false"};function NOt(e){const{gen:t,schema:n,validateName:r}=e;n===!1?KPe(e,!1):typeof n=="object"&&n.$async===!0?t.return(kOt.default.data):(t.assign((0,IOt._)`${r}.errors`,null),t.return(!0))}wx.topBoolOrEmptySchema=NOt;function DOt(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),KPe(e)):n.var(t,!0)}wx.boolOrEmptySchema=DOt;function KPe(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,AOt.reportError)(i,ROt,void 0,t)}var Ds={},yb={};Object.defineProperty(yb,"__esModule",{value:!0});yb.getRules=yb.isJSONType=void 0;const POt=["string","number","integer","boolean","null","object","array"],OOt=new Set(POt);function $Ot(e){return typeof e=="string"&&OOt.has(e)}yb.isJSONType=$Ot;function MOt(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}yb.getRules=MOt;var _m={};Object.defineProperty(_m,"__esModule",{value:!0});_m.shouldUseRule=_m.shouldUseGroup=_m.schemaHasRulesForType=void 0;function LOt({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&XPe(e,r)}_m.schemaHasRulesForType=LOt;function XPe(e,t){return t.rules.some(n=>QPe(e,n))}_m.shouldUseGroup=XPe;function QPe(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}_m.shouldUseRule=QPe;Object.defineProperty(Ds,"__esModule",{value:!0});Ds.reportTypeError=Ds.checkDataTypes=Ds.checkDataType=Ds.coerceAndCheckDataType=Ds.getJSONTypes=Ds.getSchemaTypes=Ds.DataType=void 0;const FOt=yb,BOt=_m,jOt=hR,En=$n,JPe=Et;var yE;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(yE||(Ds.DataType=yE={}));function UOt(e){const t=ZPe(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Ds.getSchemaTypes=UOt;function ZPe(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(FOt.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Ds.getJSONTypes=ZPe;function zOt(e,t){const{gen:n,data:r,opts:i}=e,s=VOt(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,BOt.schemaHasRulesForType)(e,t[0]));if(o){const a=PZ(t,r,i.strictNumbers,yE.Wrong);n.if(a,()=>{s.length?HOt(e,t,s):OZ(e)})}return o}Ds.coerceAndCheckDataType=zOt;const eOe=new Set(["string","number","integer","boolean","null"]);function VOt(e,t){return t?e.filter(n=>eOe.has(n)||t==="array"&&n==="array"):[]}function HOt(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,En._)`typeof ${i}`),a=r.let("coerced",(0,En._)`undefined`);s.coerceTypes==="array"&&r.if((0,En._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,En._)`${i}[0]`).assign(o,(0,En._)`typeof ${i}`).if(PZ(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,En._)`${a} !== undefined`);for(const l of n)(eOe.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),OZ(e),r.endIf(),r.if((0,En._)`${a} !== undefined`,()=>{r.assign(i,a),qOt(e,a)});function u(l){switch(l){case"string":r.elseIf((0,En._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,En._)`"" + ${i}`).elseIf((0,En._)`${i} === null`).assign(a,(0,En._)`""`);return;case"number":r.elseIf((0,En._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,En._)`+${i}`);return;case"integer":r.elseIf((0,En._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,En._)`+${i}`);return;case"boolean":r.elseIf((0,En._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,En._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,En._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,En._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,En._)`[${i}]`)}}}function qOt({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,En._)`${t} !== undefined`,()=>e.assign((0,En._)`${t}[${n}]`,r))}function LH(e,t,n,r=yE.Correct){const i=r===yE.Correct?En.operators.EQ:En.operators.NEQ;let s;switch(e){case"null":return(0,En._)`${t} ${i} null`;case"array":s=(0,En._)`Array.isArray(${t})`;break;case"object":s=(0,En._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,En._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,En._)`typeof ${t} ${i} ${e}`}return r===yE.Correct?s:(0,En.not)(s);function o(a=En.nil){return(0,En.and)((0,En._)`typeof ${t} == "number"`,a,n?(0,En._)`isFinite(${t})`:En.nil)}}Ds.checkDataType=LH;function PZ(e,t,n,r){if(e.length===1)return LH(e[0],t,n,r);let i;const s=(0,JPe.toHash)(e);if(s.array&&s.object){const o=(0,En._)`typeof ${t} != "object"`;i=s.null?o:(0,En._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=En.nil;s.number&&delete s.integer;for(const o in s)i=(0,En.and)(i,LH(o,t,n,r));return i}Ds.checkDataTypes=PZ;const WOt={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,En._)`{type: ${e}}`:(0,En._)`{type: ${t}}`};function OZ(e){const t=GOt(e);(0,jOt.reportError)(t,WOt)}Ds.reportTypeError=OZ;function GOt(e){const{gen:t,data:n,schema:r}=e,i=(0,JPe.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var _4={};Object.defineProperty(_4,"__esModule",{value:!0});_4.assignDefaults=void 0;const q_=$n,YOt=Et;function KOt(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)Ope(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>Ope(e,s,i.default))}_4.assignDefaults=KOt;function Ope(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,q_._)`${s}${(0,q_.getProperty)(t)}`;if(i){(0,YOt.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,q_._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,q_._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,q_._)`${a} = ${(0,q_.stringify)(n)}`)}var ph={},Pn={};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.validateUnion=Pn.validateArray=Pn.usePattern=Pn.callValidateCode=Pn.schemaProperties=Pn.allSchemaProperties=Pn.noPropertyInData=Pn.propertyInData=Pn.isOwnProperty=Pn.hasPropFunc=Pn.reportMissingProp=Pn.checkMissingProp=Pn.checkReportMissingProp=void 0;const di=$n,$Z=Et,Og=dp,XOt=Et;function QOt(e,t){const{gen:n,data:r,it:i}=e;n.if(LZ(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,di._)`${t}`},!0),e.error()})}Pn.checkReportMissingProp=QOt;function JOt({gen:e,data:t,it:{opts:n}},r,i){return(0,di.or)(...r.map(s=>(0,di.and)(LZ(e,t,s,n.ownProperties),(0,di._)`${i} = ${s}`)))}Pn.checkMissingProp=JOt;function ZOt(e,t){e.setParams({missingProperty:t},!0),e.error()}Pn.reportMissingProp=ZOt;function tOe(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,di._)`Object.prototype.hasOwnProperty`})}Pn.hasPropFunc=tOe;function MZ(e,t,n){return(0,di._)`${tOe(e)}.call(${t}, ${n})`}Pn.isOwnProperty=MZ;function e$t(e,t,n,r){const i=(0,di._)`${t}${(0,di.getProperty)(n)} !== undefined`;return r?(0,di._)`${i} && ${MZ(e,t,n)}`:i}Pn.propertyInData=e$t;function LZ(e,t,n,r){const i=(0,di._)`${t}${(0,di.getProperty)(n)} === undefined`;return r?(0,di.or)(i,(0,di.not)(MZ(e,t,n))):i}Pn.noPropertyInData=LZ;function nOe(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Pn.allSchemaProperties=nOe;function t$t(e,t){return nOe(t).filter(n=>!(0,$Z.alwaysValidSchema)(e,t[n]))}Pn.schemaProperties=t$t;function n$t({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,di._)`${e}, ${t}, ${r}${i}`:t,f=[[Og.default.instancePath,(0,di.strConcat)(Og.default.instancePath,s)],[Og.default.parentData,o.parentData],[Og.default.parentDataProperty,o.parentDataProperty],[Og.default.rootData,Og.default.rootData]];o.opts.dynamicRef&&f.push([Og.default.dynamicAnchors,Og.default.dynamicAnchors]);const d=(0,di._)`${c}, ${n.object(...f)}`;return u!==di.nil?(0,di._)`${a}.call(${u}, ${d})`:(0,di._)`${a}(${d})`}Pn.callValidateCode=n$t;const r$t=(0,di._)`new RegExp`;function i$t({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,di._)`${i.code==="new RegExp"?r$t:(0,XOt.useFunc)(e,i)}(${n}, ${r})`})}Pn.usePattern=i$t;function s$t(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,di._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:$Z.Type.Num},s),t.if((0,di.not)(s),a)})}}Pn.validateArray=s$t;function o$t(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,$Z.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,di._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,di.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Pn.validateUnion=o$t;Object.defineProperty(ph,"__esModule",{value:!0});ph.validateKeywordUsage=ph.validSchemaType=ph.funcKeywordCode=ph.macroKeywordCode=void 0;const qa=$n,i1=dp,a$t=Pn,u$t=hR;function l$t(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=rOe(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:qa.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}ph.macroKeywordCode=l$t;function c$t(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;d$t(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=rOe(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&$pe(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&$pe(e),g(()=>f$t(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,qa._)`await `),v=>r.assign(f,!1).if((0,qa._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,qa._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,qa._)`${c}.errors`;return r.assign(y,null),m(qa.nil),y}function m(y=t.async?(0,qa._)`await `:qa.nil){const v=u.opts.passContext?i1.default.this:i1.default.self,b=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,qa._)`${y}${(0,a$t.callValidateCode)(e,c,v,b)}`,t.modifying)}function g(y){var v;r.if((0,qa.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}ph.funcKeywordCode=c$t;function $pe(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,qa._)`${r.parentData}[${r.parentDataProperty}]`))}function f$t(e,t){const{gen:n}=e;n.if((0,qa._)`Array.isArray(${t})`,()=>{n.assign(i1.default.vErrors,(0,qa._)`${i1.default.vErrors} === null ? ${t} : ${i1.default.vErrors}.concat(${t})`).assign(i1.default.errors,(0,qa._)`${i1.default.vErrors}.length`),(0,u$t.extendErrors)(e)},()=>e.error())}function d$t({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function rOe(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,qa.stringify)(n)})}function h$t(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}ph.validSchemaType=h$t;function p$t({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}ph.validateKeywordUsage=p$t;var j0={};Object.defineProperty(j0,"__esModule",{value:!0});j0.extendSubschemaMode=j0.extendSubschemaData=j0.getSubschema=void 0;const uh=$n,iOe=Et;function m$t(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,uh._)`${e.schemaPath}${(0,uh.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,uh._)`${e.schemaPath}${(0,uh.getProperty)(t)}${(0,uh.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,iOe.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}j0.getSubschema=m$t;function g$t(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,uh._)`${t.data}${(0,uh.getProperty)(n)}`,!0);u(d),e.errorPath=(0,uh.str)`${l}${(0,iOe.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,uh._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof uh.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}j0.extendSubschemaData=g$t;function y$t(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}j0.extendSubschemaMode=y$t;var Mo={},sOe={exports:{}},p0=sOe.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};sO(t,r,i,e,"",e)};p0.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};p0.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};p0.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};p0.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function sO(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in p0.arrayKeywords)for(var d=0;d<f.length;d++)sO(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in p0.propsKeywords){if(f&&typeof f=="object")for(var h in f)sO(e,t,n,f[h],i+"/"+c+"/"+v$t(h),s,i,c,r,h)}else(c in p0.keywords||e.allKeys&&!(c in p0.skipKeywords))&&sO(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function v$t(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var b$t=sOe.exports;Object.defineProperty(Mo,"__esModule",{value:!0});Mo.getSchemaRefs=Mo.resolveUrl=Mo.normalizeId=Mo._getFullPath=Mo.getFullPath=Mo.inlineRef=void 0;const _$t=Et,w$t=EX,E$t=b$t,x$t=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function S$t(e,t=!0){return typeof e=="boolean"?!0:t===!0?!FH(e):t?oOe(e)<=t:!1}Mo.inlineRef=S$t;const T$t=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function FH(e){for(const t in e){if(T$t.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(FH)||typeof n=="object"&&FH(n))return!0}return!1}function oOe(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!x$t.has(n)&&(typeof e[n]=="object"&&(0,_$t.eachItem)(e[n],r=>t+=oOe(r)),t===1/0))return 1/0}return t}function aOe(e,t="",n){n!==!1&&(t=vE(t));const r=e.parse(t);return uOe(e,r)}Mo.getFullPath=aOe;function uOe(e,t){return e.serialize(t).split("#")[0]+"#"}Mo._getFullPath=uOe;const C$t=/#\/?$/;function vE(e){return e?e.replace(C$t,""):""}Mo.normalizeId=vE;function A$t(e,t,n){return n=vE(n),e.resolve(t,n)}Mo.resolveUrl=A$t;const I$t=/^[a-z_][-a-z0-9._]*$/i;function k$t(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=vE(e[n]||t),s={"":i},o=aOe(r,i,!1),a={},u=new Set;return E$t(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(b){const w=this.opts.uriResolver.resolve;if(b=vE(g?w(g,b):b),u.has(b))throw c(b);u.add(b);let E=this.refs[b];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?l(f,E.schema,b):b!==vE(m)&&(b[0]==="#"?(l(f,a[b],b),a[b]=f):this.refs[b]=m),b}function v(b){if(typeof b=="string"){if(!I$t.test(b))throw new Error(`invalid anchor "${b}"`);y.call(this,`#${b}`)}}}),a;function l(f,d,h){if(d!==void 0&&!w$t(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Mo.getSchemaRefs=k$t;Object.defineProperty(Zf,"__esModule",{value:!0});Zf.getData=Zf.KeywordCxt=Zf.validateFunctionCode=void 0;const lOe=wx,Mpe=Ds,FZ=_m,m3=Ds,R$t=_4,JA=ph,D9=j0,Pt=$n,an=dp,N$t=Mo,wm=Et,tC=hR;function D$t(e){if(dOe(e)&&(hOe(e),fOe(e))){$$t(e);return}cOe(e,()=>(0,lOe.topBoolOrEmptySchema)(e))}Zf.validateFunctionCode=D$t;function cOe({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Pt._)`${an.default.data}, ${an.default.valCxt}`,r.$async,()=>{e.code((0,Pt._)`"use strict"; ${Lpe(n,i)}`),O$t(e,i),e.code(s)}):e.func(t,(0,Pt._)`${an.default.data}, ${P$t(i)}`,r.$async,()=>e.code(Lpe(n,i)).code(s))}function P$t(e){return(0,Pt._)`{${an.default.instancePath}="", ${an.default.parentData}, ${an.default.parentDataProperty}, ${an.default.rootData}=${an.default.data}${e.dynamicRef?(0,Pt._)`, ${an.default.dynamicAnchors}={}`:Pt.nil}}={}`}function O$t(e,t){e.if(an.default.valCxt,()=>{e.var(an.default.instancePath,(0,Pt._)`${an.default.valCxt}.${an.default.instancePath}`),e.var(an.default.parentData,(0,Pt._)`${an.default.valCxt}.${an.default.parentData}`),e.var(an.default.parentDataProperty,(0,Pt._)`${an.default.valCxt}.${an.default.parentDataProperty}`),e.var(an.default.rootData,(0,Pt._)`${an.default.valCxt}.${an.default.rootData}`),t.dynamicRef&&e.var(an.default.dynamicAnchors,(0,Pt._)`${an.default.valCxt}.${an.default.dynamicAnchors}`)},()=>{e.var(an.default.instancePath,(0,Pt._)`""`),e.var(an.default.parentData,(0,Pt._)`undefined`),e.var(an.default.parentDataProperty,(0,Pt._)`undefined`),e.var(an.default.rootData,an.default.data),t.dynamicRef&&e.var(an.default.dynamicAnchors,(0,Pt._)`{}`)})}function $$t(e){const{schema:t,opts:n,gen:r}=e;cOe(e,()=>{n.$comment&&t.$comment&&mOe(e),j$t(e),r.let(an.default.vErrors,null),r.let(an.default.errors,0),n.unevaluated&&M$t(e),pOe(e),V$t(e)})}function M$t(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Pt._)`${n}.evaluated`),t.if((0,Pt._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Pt._)`${e.evaluated}.props`,(0,Pt._)`undefined`)),t.if((0,Pt._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Pt._)`${e.evaluated}.items`,(0,Pt._)`undefined`))}function Lpe(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Pt._)`/*# sourceURL=${n} */`:Pt.nil}function L$t(e,t){if(dOe(e)&&(hOe(e),fOe(e))){F$t(e,t);return}(0,lOe.boolOrEmptySchema)(e,t)}function fOe({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function dOe(e){return typeof e.schema!="boolean"}function F$t(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&mOe(e),U$t(e),z$t(e);const s=r.const("_errs",an.default.errors);pOe(e,s),r.var(t,(0,Pt._)`${s} === ${an.default.errors}`)}function hOe(e){(0,wm.checkUnknownRules)(e),B$t(e)}function pOe(e,t){if(e.opts.jtd)return Fpe(e,[],!1,t);const n=(0,Mpe.getSchemaTypes)(e.schema),r=(0,Mpe.coerceAndCheckDataType)(e,n);Fpe(e,n,!r,t)}function B$t(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,wm.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function j$t(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,wm.checkStrictMode)(e,"default is ignored in the schema root")}function U$t(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,N$t.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function z$t(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function mOe({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Pt._)`${an.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Pt.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Pt._)`${an.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function V$t(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Pt._)`${an.default.errors} === 0`,()=>t.return(an.default.data),()=>t.throw((0,Pt._)`new ${i}(${an.default.vErrors})`)):(t.assign((0,Pt._)`${r}.errors`,an.default.vErrors),s.unevaluated&&H$t(e),t.return((0,Pt._)`${an.default.errors} === 0`))}function H$t({gen:e,evaluated:t,props:n,items:r}){n instanceof Pt.Name&&e.assign((0,Pt._)`${t}.props`,n),r instanceof Pt.Name&&e.assign((0,Pt._)`${t}.items`,r)}function Fpe(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,wm.schemaHasRulesButRef)(s,c))){i.block(()=>vOe(e,"$ref",c.all.$ref.definition));return}u.jtd||q$t(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,FZ.shouldUseGroup)(s,d)&&(d.type?(i.if((0,m3.checkDataType)(d.type,o,u.strictNumbers)),Bpe(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,m3.reportTypeError)(e)),i.endIf()):Bpe(e,d),a||i.if((0,Pt._)`${an.default.errors} === ${r||0}`))}}function Bpe(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,R$t.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,FZ.shouldUseRule)(r,s)&&vOe(e,s.keyword,s.definition,t.type)})}function q$t(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(W$t(e,t),e.opts.allowUnionTypes||G$t(e,t),Y$t(e,e.dataTypes))}function W$t(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{gOe(e.dataTypes,n)||BZ(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),X$t(e,t)}}function G$t(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&BZ(e,"use allowUnionTypes to allow union type keyword")}function Y$t(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,FZ.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>K$t(t,o))&&BZ(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function K$t(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function gOe(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function X$t(e,t){const n=[];for(const r of e.dataTypes)gOe(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function BZ(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,wm.checkStrictMode)(e,t,e.opts.strictTypes)}class yOe{constructor(t,n,r){if((0,JA.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,wm.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",bOe(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,JA.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",an.default.errors))}result(t,n,r){this.failResult((0,Pt.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Pt.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Pt._)`${n} !== undefined && (${(0,Pt.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?tC.reportExtraError:tC.reportError)(this,this.def.error,n)}$dataError(){(0,tC.reportError)(this,this.def.$dataError||tC.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,tC.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Pt.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Pt.nil,n=Pt.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Pt.or)((0,Pt._)`${i} === undefined`,n)),t!==Pt.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Pt.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Pt.or)(o(),a());function o(){if(r.length){if(!(n instanceof Pt.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,Pt._)`${(0,m3.checkDataTypes)(u,n,s.opts.strictNumbers,m3.DataType.Wrong)}`}return Pt.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Pt._)`!${u}(${n})`}return Pt.nil}}subschema(t,n){const r=(0,D9.getSubschema)(this.it,t);(0,D9.extendSubschemaData)(r,this.it,t),(0,D9.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return L$t(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=wm.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=wm.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Pt.Name)),!0}}Zf.KeywordCxt=yOe;function vOe(e,t,n,r){const i=new yOe(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,JA.funcKeywordCode)(i,n):"macro"in n?(0,JA.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,JA.funcKeywordCode)(i,n)}const Q$t=/^\/(?:[^~]|~0|~1)*$/,J$t=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function bOe(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return an.default.rootData;if(e[0]==="/"){if(!Q$t.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=an.default.rootData}else{const l=J$t.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,Pt._)`${s}${(0,Pt.getProperty)((0,wm.unescapeJsonPointer)(l))}`,o=(0,Pt._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}Zf.getData=bOe;var pR={};Object.defineProperty(pR,"__esModule",{value:!0});class Z$t extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}pR.default=Z$t;var HS={};Object.defineProperty(HS,"__esModule",{value:!0});const P9=Mo;class eMt extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,P9.resolveUrl)(t,n,r),this.missingSchema=(0,P9.normalizeId)((0,P9.getFullPath)(t,this.missingRef))}}HS.default=eMt;var Mu={};Object.defineProperty(Mu,"__esModule",{value:!0});Mu.resolveSchema=Mu.getCompilingSchema=Mu.resolveRef=Mu.compileSchema=Mu.SchemaEnv=void 0;const yf=$n,tMt=pR,Cv=dp,Bf=Mo,jpe=Et,nMt=Zf;class w4{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,Bf.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Mu.SchemaEnv=w4;function jZ(e){const t=_Oe.call(this,e);if(t)return t;const n=(0,Bf.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new yf.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:tMt.default,code:(0,yf._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:Cv.default.data,parentData:Cv.default.parentData,parentDataProperty:Cv.default.parentDataProperty,dataNames:[Cv.default.data],dataPathArr:[yf.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,yf.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:yf.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,yf._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,nMt.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(Cv.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${Cv.default.self}`,`${Cv.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof yf.Name?void 0:p,items:m instanceof yf.Name?void 0:m,dynamicProps:p instanceof yf.Name,dynamicItems:m instanceof yf.Name},h.source&&(h.source.evaluated=(0,yf.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}Mu.compileSchema=jZ;function rMt(e,t,n){var r;n=(0,Bf.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=oMt.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new w4({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=iMt.call(this,s)}Mu.resolveRef=rMt;function iMt(e){return(0,Bf.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:jZ.call(this,e)}function _Oe(e){for(const t of this._compilations)if(sMt(t,e))return t}Mu.getCompilingSchema=_Oe;function sMt(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function oMt(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||E4.call(this,e,t)}function E4(e,t){const n=this.opts.uriResolver.parse(t),r=(0,Bf._getFullPath)(this.opts.uriResolver,n);let i=(0,Bf.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return O9.call(this,n,e);const s=(0,Bf.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=E4.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:O9.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||jZ.call(this,o),s===(0,Bf.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,Bf.resolveUrl)(this.opts.uriResolver,i,l)),new w4({schema:a,schemaId:u,root:e,baseId:i})}return O9.call(this,n,o)}}Mu.resolveSchema=E4;const aMt=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function O9(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,jpe.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!aMt.has(a)&&l&&(t=(0,Bf.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,jpe.schemaHasRulesButRef)(n,this.RULES)){const a=(0,Bf.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=E4.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new w4({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const uMt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",lMt="Meta-schema for $data reference (JSON AnySchema extension proposal)",cMt="object",fMt=["$data"],dMt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},hMt=!1,pMt={$id:uMt,description:lMt,type:cMt,required:fMt,properties:dMt,additionalProperties:hMt};var UZ={},BH={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(oo,function(n){function r(){for(var oe=arguments.length,ee=Array(oe),ae=0;ae<oe;ae++)ee[ae]=arguments[ae];if(ee.length>1){ee[0]=ee[0].slice(0,-1);for(var Te=ee.length-1,Se=1;Se<Te;++Se)ee[Se]=ee[Se].slice(1,-1);return ee[Te]=ee[Te].slice(1),ee.join("")}else return ee[0]}function i(oe){return"(?:"+oe+")"}function s(oe){return oe===void 0?"undefined":oe===null?"null":Object.prototype.toString.call(oe).split(" ").pop().split("]").shift().toLowerCase()}function o(oe){return oe.toUpperCase()}function a(oe){return oe!=null?oe instanceof Array?oe:typeof oe.length!="number"||oe.split||oe.setInterval||oe.call?[oe]:Array.prototype.slice.call(oe):[]}function u(oe,ee){var ae=oe;if(ee)for(var Te in ee)ae[Te]=ee[Te];return ae}function l(oe){var ee="[A-Za-z]",ae="[0-9]",Te=r(ae,"[A-Fa-f]"),Se=i(i("%[EFef]"+Te+"%"+Te+Te+"%"+Te+Te)+"|"+i("%[89A-Fa-f]"+Te+"%"+Te+Te)+"|"+i("%"+Te+Te)),ot="[\\:\\/\\?\\#\\[\\]\\@]",Tt="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Wt=r(ot,Tt),Mn=oe?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Un=oe?"[\\uE000-\\uF8FF]":"[]",mn=r(ee,ae,"[\\-\\.\\_\\~]",Mn);i(ee+r(ee,ae,"[\\+\\-\\.]")+"*"),i(i(Se+"|"+r(mn,Tt,"[\\:]"))+"*");var ar=i(i("25[0-5]")+"|"+i("2[0-4]"+ae)+"|"+i("1"+ae+ae)+"|"+i("0?[1-9]"+ae)+"|0?0?"+ae),Rr=i(ar+"\\."+ar+"\\."+ar+"\\."+ar),Ht=i(Te+"{1,4}"),ur=i(i(Ht+"\\:"+Ht)+"|"+Rr),Gr=i(i(Ht+"\\:")+"{6}"+ur),tr=i("\\:\\:"+i(Ht+"\\:")+"{5}"+ur),Di=i(i(Ht)+"?\\:\\:"+i(Ht+"\\:")+"{4}"+ur),Ks=i(i(i(Ht+"\\:")+"{0,1}"+Ht)+"?\\:\\:"+i(Ht+"\\:")+"{3}"+ur),ni=i(i(i(Ht+"\\:")+"{0,2}"+Ht)+"?\\:\\:"+i(Ht+"\\:")+"{2}"+ur),So=i(i(i(Ht+"\\:")+"{0,3}"+Ht)+"?\\:\\:"+Ht+"\\:"+ur),Vi=i(i(i(Ht+"\\:")+"{0,4}"+Ht)+"?\\:\\:"+ur),Hi=i(i(i(Ht+"\\:")+"{0,5}"+Ht)+"?\\:\\:"+Ht),Jo=i(i(i(Ht+"\\:")+"{0,6}"+Ht)+"?\\:\\:"),La=i([Gr,tr,Di,Ks,ni,So,Vi,Hi,Jo].join("|")),Xs=i(i(mn+"|"+Se)+"+");i("[vV]"+Te+"+\\."+r(mn,Tt,"[\\:]")+"+"),i(i(Se+"|"+r(mn,Tt))+"*");var cc=i(Se+"|"+r(mn,Tt,"[\\:\\@]"));return i(i(Se+"|"+r(mn,Tt,"[\\@]"))+"+"),i(i(cc+"|"+r("[\\/\\?]",Un))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ee,ae,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",mn,Tt),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",mn,Tt),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",mn,Tt),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",mn,Tt),"g"),NOT_QUERY:new RegExp(r("[^\\%]",mn,Tt,"[\\:\\@\\/\\?]",Un),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",mn,Tt,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",mn,Tt),"g"),UNRESERVED:new RegExp(mn,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",mn,Wt),"g"),PCT_ENCODED:new RegExp(Se,"g"),IPV4ADDRESS:new RegExp("^("+Rr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+La+")"+i(i("\\%25|\\%(?!"+Te+"{2})")+"("+Xs+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function oe(ee,ae){var Te=[],Se=!0,ot=!1,Tt=void 0;try{for(var Wt=ee[Symbol.iterator](),Mn;!(Se=(Mn=Wt.next()).done)&&(Te.push(Mn.value),!(ae&&Te.length===ae));Se=!0);}catch(Un){ot=!0,Tt=Un}finally{try{!Se&&Wt.return&&Wt.return()}finally{if(ot)throw Tt}}return Te}return function(ee,ae){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return oe(ee,ae);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(oe){if(Array.isArray(oe)){for(var ee=0,ae=Array(oe.length);ee<oe.length;ee++)ae[ee]=oe[ee];return ae}else return Array.from(oe)},p=2147483647,m=36,g=1,y=26,v=38,b=700,w=72,E=128,x="-",T=/^xn--/,C=/[^\0-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=m-g,O=Math.floor,D=String.fromCharCode;function $(oe){throw new RangeError(k[oe])}function F(oe,ee){for(var ae=[],Te=oe.length;Te--;)ae[Te]=ee(oe[Te]);return ae}function L(oe,ee){var ae=oe.split("@"),Te="";ae.length>1&&(Te=ae[0]+"@",oe=ae[1]),oe=oe.replace(A,".");var Se=oe.split("."),ot=F(Se,ee).join(".");return Te+ot}function j(oe){for(var ee=[],ae=0,Te=oe.length;ae<Te;){var Se=oe.charCodeAt(ae++);if(Se>=55296&&Se<=56319&&ae<Te){var ot=oe.charCodeAt(ae++);(ot&64512)==56320?ee.push(((Se&1023)<<10)+(ot&1023)+65536):(ee.push(Se),ae--)}else ee.push(Se)}return ee}var z=function(ee){return String.fromCodePoint.apply(String,h(ee))},q=function(ee){return ee-48<10?ee-22:ee-65<26?ee-65:ee-97<26?ee-97:m},P=function(ee,ae){return ee+22+75*(ee<26)-((ae!=0)<<5)},U=function(ee,ae,Te){var Se=0;for(ee=Te?O(ee/b):ee>>1,ee+=O(ee/ae);ee>R*y>>1;Se+=m)ee=O(ee/R);return O(Se+(R+1)*ee/(ee+v))},W=function(ee){var ae=[],Te=ee.length,Se=0,ot=E,Tt=w,Wt=ee.lastIndexOf(x);Wt<0&&(Wt=0);for(var Mn=0;Mn<Wt;++Mn)ee.charCodeAt(Mn)>=128&&$("not-basic"),ae.push(ee.charCodeAt(Mn));for(var Un=Wt>0?Wt+1:0;Un<Te;){for(var mn=Se,ar=1,Rr=m;;Rr+=m){Un>=Te&&$("invalid-input");var Ht=q(ee.charCodeAt(Un++));(Ht>=m||Ht>O((p-Se)/ar))&&$("overflow"),Se+=Ht*ar;var ur=Rr<=Tt?g:Rr>=Tt+y?y:Rr-Tt;if(Ht<ur)break;var Gr=m-ur;ar>O(p/Gr)&&$("overflow"),ar*=Gr}var tr=ae.length+1;Tt=U(Se-mn,tr,mn==0),O(Se/tr)>p-ot&&$("overflow"),ot+=O(Se/tr),Se%=tr,ae.splice(Se++,0,ot)}return String.fromCodePoint.apply(String,ae)},B=function(ee){var ae=[];ee=j(ee);var Te=ee.length,Se=E,ot=0,Tt=w,Wt=!0,Mn=!1,Un=void 0;try{for(var mn=ee[Symbol.iterator](),ar;!(Wt=(ar=mn.next()).done);Wt=!0){var Rr=ar.value;Rr<128&&ae.push(D(Rr))}}catch(Oe){Mn=!0,Un=Oe}finally{try{!Wt&&mn.return&&mn.return()}finally{if(Mn)throw Un}}var Ht=ae.length,ur=Ht;for(Ht&&ae.push(x);ur<Te;){var Gr=p,tr=!0,Di=!1,Ks=void 0;try{for(var ni=ee[Symbol.iterator](),So;!(tr=(So=ni.next()).done);tr=!0){var Vi=So.value;Vi>=Se&&Vi<Gr&&(Gr=Vi)}}catch(Oe){Di=!0,Ks=Oe}finally{try{!tr&&ni.return&&ni.return()}finally{if(Di)throw Ks}}var Hi=ur+1;Gr-Se>O((p-ot)/Hi)&&$("overflow"),ot+=(Gr-Se)*Hi,Se=Gr;var Jo=!0,La=!1,Xs=void 0;try{for(var cc=ee[Symbol.iterator](),Rd;!(Jo=(Rd=cc.next()).done);Jo=!0){var Y=Rd.value;if(Y<Se&&++ot>p&&$("overflow"),Y==Se){for(var se=ot,Z=m;;Z+=m){var he=Z<=Tt?g:Z>=Tt+y?y:Z-Tt;if(se<he)break;var ve=se-he,ce=m-he;ae.push(D(P(he+ve%ce,0))),se=O(ve/ce)}ae.push(D(P(se,0))),Tt=U(ot,Hi,ur==Ht),ot=0,++ur}}}catch(Oe){La=!0,Xs=Oe}finally{try{!Jo&&cc.return&&cc.return()}finally{if(La)throw Xs}}++ot,++Se}return ae.join("")},H=function(ee){return L(ee,function(ae){return T.test(ae)?W(ae.slice(4).toLowerCase()):ae})},G=function(ee){return L(ee,function(ae){return C.test(ae)?"xn--"+B(ae):ae})},te={version:"2.1.0",ucs2:{decode:j,encode:z},decode:W,encode:B,toASCII:G,toUnicode:H},le={};function fe(oe){var ee=oe.charCodeAt(0),ae=void 0;return ee<16?ae="%0"+ee.toString(16).toUpperCase():ee<128?ae="%"+ee.toString(16).toUpperCase():ee<2048?ae="%"+(ee>>6|192).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase():ae="%"+(ee>>12|224).toString(16).toUpperCase()+"%"+(ee>>6&63|128).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase(),ae}function de(oe){for(var ee="",ae=0,Te=oe.length;ae<Te;){var Se=parseInt(oe.substr(ae+1,2),16);if(Se<128)ee+=String.fromCharCode(Se),ae+=3;else if(Se>=194&&Se<224){if(Te-ae>=6){var ot=parseInt(oe.substr(ae+4,2),16);ee+=String.fromCharCode((Se&31)<<6|ot&63)}else ee+=oe.substr(ae,6);ae+=6}else if(Se>=224){if(Te-ae>=9){var Tt=parseInt(oe.substr(ae+4,2),16),Wt=parseInt(oe.substr(ae+7,2),16);ee+=String.fromCharCode((Se&15)<<12|(Tt&63)<<6|Wt&63)}else ee+=oe.substr(ae,9);ae+=9}else ee+=oe.substr(ae,3),ae+=3}return ee}function ge(oe,ee){function ae(Te){var Se=de(Te);return Se.match(ee.UNRESERVED)?Se:Te}return oe.scheme&&(oe.scheme=String(oe.scheme).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_SCHEME,"")),oe.userinfo!==void 0&&(oe.userinfo=String(oe.userinfo).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_USERINFO,fe).replace(ee.PCT_ENCODED,o)),oe.host!==void 0&&(oe.host=String(oe.host).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_HOST,fe).replace(ee.PCT_ENCODED,o)),oe.path!==void 0&&(oe.path=String(oe.path).replace(ee.PCT_ENCODED,ae).replace(oe.scheme?ee.NOT_PATH:ee.NOT_PATH_NOSCHEME,fe).replace(ee.PCT_ENCODED,o)),oe.query!==void 0&&(oe.query=String(oe.query).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_QUERY,fe).replace(ee.PCT_ENCODED,o)),oe.fragment!==void 0&&(oe.fragment=String(oe.fragment).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_FRAGMENT,fe).replace(ee.PCT_ENCODED,o)),oe}function Ie(oe){return oe.replace(/^0*(.*)/,"$1")||"0"}function pe(oe,ee){var ae=oe.match(ee.IPV4ADDRESS)||[],Te=d(ae,2),Se=Te[1];return Se?Se.split(".").map(Ie).join("."):oe}function He(oe,ee){var ae=oe.match(ee.IPV6ADDRESS)||[],Te=d(ae,3),Se=Te[1],ot=Te[2];if(Se){for(var Tt=Se.toLowerCase().split("::").reverse(),Wt=d(Tt,2),Mn=Wt[0],Un=Wt[1],mn=Un?Un.split(":").map(Ie):[],ar=Mn.split(":").map(Ie),Rr=ee.IPV4ADDRESS.test(ar[ar.length-1]),Ht=Rr?7:8,ur=ar.length-Ht,Gr=Array(Ht),tr=0;tr<Ht;++tr)Gr[tr]=mn[tr]||ar[ur+tr]||"";Rr&&(Gr[Ht-1]=pe(Gr[Ht-1],ee));var Di=Gr.reduce(function(Hi,Jo,La){if(!Jo||Jo==="0"){var Xs=Hi[Hi.length-1];Xs&&Xs.index+Xs.length===La?Xs.length++:Hi.push({index:La,length:1})}return Hi},[]),Ks=Di.sort(function(Hi,Jo){return Jo.length-Hi.length})[0],ni=void 0;if(Ks&&Ks.length>1){var So=Gr.slice(0,Ks.index),Vi=Gr.slice(Ks.index+Ks.length);ni=So.join(":")+"::"+Vi.join(":")}else ni=Gr.join(":");return ot&&(ni+="%"+ot),ni}else return oe}var Ue=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,yt="".match(/(){0}/)[1]===void 0;function it(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae={},Te=ee.iri!==!1?f:c;ee.reference==="suffix"&&(oe=(ee.scheme?ee.scheme+":":"")+"//"+oe);var Se=oe.match(Ue);if(Se){yt?(ae.scheme=Se[1],ae.userinfo=Se[3],ae.host=Se[4],ae.port=parseInt(Se[5],10),ae.path=Se[6]||"",ae.query=Se[7],ae.fragment=Se[8],isNaN(ae.port)&&(ae.port=Se[5])):(ae.scheme=Se[1]||void 0,ae.userinfo=oe.indexOf("@")!==-1?Se[3]:void 0,ae.host=oe.indexOf("//")!==-1?Se[4]:void 0,ae.port=parseInt(Se[5],10),ae.path=Se[6]||"",ae.query=oe.indexOf("?")!==-1?Se[7]:void 0,ae.fragment=oe.indexOf("#")!==-1?Se[8]:void 0,isNaN(ae.port)&&(ae.port=oe.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Se[4]:void 0)),ae.host&&(ae.host=He(pe(ae.host,Te),Te)),ae.scheme===void 0&&ae.userinfo===void 0&&ae.host===void 0&&ae.port===void 0&&!ae.path&&ae.query===void 0?ae.reference="same-document":ae.scheme===void 0?ae.reference="relative":ae.fragment===void 0?ae.reference="absolute":ae.reference="uri",ee.reference&&ee.reference!=="suffix"&&ee.reference!==ae.reference&&(ae.error=ae.error||"URI is not a "+ee.reference+" reference.");var ot=le[(ee.scheme||ae.scheme||"").toLowerCase()];if(!ee.unicodeSupport&&(!ot||!ot.unicodeSupport)){if(ae.host&&(ee.domainHost||ot&&ot.domainHost))try{ae.host=te.toASCII(ae.host.replace(Te.PCT_ENCODED,de).toLowerCase())}catch(Tt){ae.error=ae.error||"Host's domain name can not be converted to ASCII via punycode: "+Tt}ge(ae,c)}else ge(ae,Te);ot&&ot.parse&&ot.parse(ae,ee)}else ae.error=ae.error||"URI can not be parsed.";return ae}function be(oe,ee){var ae=ee.iri!==!1?f:c,Te=[];return oe.userinfo!==void 0&&(Te.push(oe.userinfo),Te.push("@")),oe.host!==void 0&&Te.push(He(pe(String(oe.host),ae),ae).replace(ae.IPV6ADDRESS,function(Se,ot,Tt){return"["+ot+(Tt?"%25"+Tt:"")+"]"})),(typeof oe.port=="number"||typeof oe.port=="string")&&(Te.push(":"),Te.push(String(oe.port))),Te.length?Te.join(""):void 0}var ke=/^\.\.?\//,ze=/^\/\.(\/|$)/,ct=/^\/\.\.(\/|$)/,Ot=/^\/?(?:.|\n)*?(?=\/|$)/;function Ge(oe){for(var ee=[];oe.length;)if(oe.match(ke))oe=oe.replace(ke,"");else if(oe.match(ze))oe=oe.replace(ze,"/");else if(oe.match(ct))oe=oe.replace(ct,"/"),ee.pop();else if(oe==="."||oe==="..")oe="";else{var ae=oe.match(Ot);if(ae){var Te=ae[0];oe=oe.slice(Te.length),ee.push(Te)}else throw new Error("Unexpected dot segment condition")}return ee.join("")}function ye(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae=ee.iri?f:c,Te=[],Se=le[(ee.scheme||oe.scheme||"").toLowerCase()];if(Se&&Se.serialize&&Se.serialize(oe,ee),oe.host&&!ae.IPV6ADDRESS.test(oe.host)){if(ee.domainHost||Se&&Se.domainHost)try{oe.host=ee.iri?te.toUnicode(oe.host):te.toASCII(oe.host.replace(ae.PCT_ENCODED,de).toLowerCase())}catch(Wt){oe.error=oe.error||"Host's domain name can not be converted to "+(ee.iri?"Unicode":"ASCII")+" via punycode: "+Wt}}ge(oe,ae),ee.reference!=="suffix"&&oe.scheme&&(Te.push(oe.scheme),Te.push(":"));var ot=be(oe,ee);if(ot!==void 0&&(ee.reference!=="suffix"&&Te.push("//"),Te.push(ot),oe.path&&oe.path.charAt(0)!=="/"&&Te.push("/")),oe.path!==void 0){var Tt=oe.path;!ee.absolutePath&&(!Se||!Se.absolutePath)&&(Tt=Ge(Tt)),ot===void 0&&(Tt=Tt.replace(/^\/\//,"/%2F")),Te.push(Tt)}return oe.query!==void 0&&(Te.push("?"),Te.push(oe.query)),oe.fragment!==void 0&&(Te.push("#"),Te.push(oe.fragment)),Te.join("")}function ht(oe,ee){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Te=arguments[3],Se={};return Te||(oe=it(ye(oe,ae),ae),ee=it(ye(ee,ae),ae)),ae=ae||{},!ae.tolerant&&ee.scheme?(Se.scheme=ee.scheme,Se.userinfo=ee.userinfo,Se.host=ee.host,Se.port=ee.port,Se.path=Ge(ee.path||""),Se.query=ee.query):(ee.userinfo!==void 0||ee.host!==void 0||ee.port!==void 0?(Se.userinfo=ee.userinfo,Se.host=ee.host,Se.port=ee.port,Se.path=Ge(ee.path||""),Se.query=ee.query):(ee.path?(ee.path.charAt(0)==="/"?Se.path=Ge(ee.path):((oe.userinfo!==void 0||oe.host!==void 0||oe.port!==void 0)&&!oe.path?Se.path="/"+ee.path:oe.path?Se.path=oe.path.slice(0,oe.path.lastIndexOf("/")+1)+ee.path:Se.path=ee.path,Se.path=Ge(Se.path)),Se.query=ee.query):(Se.path=oe.path,ee.query!==void 0?Se.query=ee.query:Se.query=oe.query),Se.userinfo=oe.userinfo,Se.host=oe.host,Se.port=oe.port),Se.scheme=oe.scheme),Se.fragment=ee.fragment,Se}function bt(oe,ee,ae){var Te=u({scheme:"null"},ae);return ye(ht(it(oe,Te),it(ee,Te),Te,!0),Te)}function me(oe,ee){return typeof oe=="string"?oe=ye(it(oe,ee),ee):s(oe)==="object"&&(oe=it(ye(oe,ee),ee)),oe}function Ae(oe,ee,ae){return typeof oe=="string"?oe=ye(it(oe,ae),ae):s(oe)==="object"&&(oe=ye(oe,ae)),typeof ee=="string"?ee=ye(it(ee,ae),ae):s(ee)==="object"&&(ee=ye(ee,ae)),oe===ee}function qe(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.ESCAPE:f.ESCAPE,fe)}function ut(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.PCT_ENCODED:f.PCT_ENCODED,de)}var wt={scheme:"http",domainHost:!0,parse:function(ee,ae){return ee.host||(ee.error=ee.error||"HTTP URIs must have a host."),ee},serialize:function(ee,ae){var Te=String(ee.scheme).toLowerCase()==="https";return(ee.port===(Te?443:80)||ee.port==="")&&(ee.port=void 0),ee.path||(ee.path="/"),ee}},Bn={scheme:"https",domainHost:wt.domainHost,parse:wt.parse,serialize:wt.serialize};function Ir(oe){return typeof oe.secure=="boolean"?oe.secure:String(oe.scheme).toLowerCase()==="wss"}var jn={scheme:"ws",domainHost:!0,parse:function(ee,ae){var Te=ee;return Te.secure=Ir(Te),Te.resourceName=(Te.path||"/")+(Te.query?"?"+Te.query:""),Te.path=void 0,Te.query=void 0,Te},serialize:function(ee,ae){if((ee.port===(Ir(ee)?443:80)||ee.port==="")&&(ee.port=void 0),typeof ee.secure=="boolean"&&(ee.scheme=ee.secure?"wss":"ws",ee.secure=void 0),ee.resourceName){var Te=ee.resourceName.split("?"),Se=d(Te,2),ot=Se[0],Tt=Se[1];ee.path=ot&&ot!=="/"?ot:void 0,ee.query=Tt,ee.resourceName=void 0}return ee.fragment=void 0,ee}},hr={scheme:"wss",domainHost:jn.domainHost,parse:jn.parse,serialize:jn.serialize},yn={},An="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",sr="[0-9A-Fa-f]",or=i(i("%[EFef]"+sr+"%"+sr+sr+"%"+sr+sr)+"|"+i("%[89A-Fa-f]"+sr+"%"+sr+sr)+"|"+i("%"+sr+sr)),Qo="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Ui="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",In=r(Ui,'[\\"\\\\]'),zi="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",kr=new RegExp(An,"g"),ys=new RegExp(or,"g"),Sp=new RegExp(r("[^]",Qo,"[\\.]",'[\\"]',In),"g"),gl=new RegExp(r("[^]",An,zi),"g"),kd=gl;function Tr(oe){var ee=de(oe);return ee.match(kr)?ee:oe}var Ni={scheme:"mailto",parse:function(ee,ae){var Te=ee,Se=Te.to=Te.path?Te.path.split(","):[];if(Te.path=void 0,Te.query){for(var ot=!1,Tt={},Wt=Te.query.split("&"),Mn=0,Un=Wt.length;Mn<Un;++Mn){var mn=Wt[Mn].split("=");switch(mn[0]){case"to":for(var ar=mn[1].split(","),Rr=0,Ht=ar.length;Rr<Ht;++Rr)Se.push(ar[Rr]);break;case"subject":Te.subject=ut(mn[1],ae);break;case"body":Te.body=ut(mn[1],ae);break;default:ot=!0,Tt[ut(mn[0],ae)]=ut(mn[1],ae);break}}ot&&(Te.headers=Tt)}Te.query=void 0;for(var ur=0,Gr=Se.length;ur<Gr;++ur){var tr=Se[ur].split("@");if(tr[0]=ut(tr[0]),ae.unicodeSupport)tr[1]=ut(tr[1],ae).toLowerCase();else try{tr[1]=te.toASCII(ut(tr[1],ae).toLowerCase())}catch(Di){Te.error=Te.error||"Email address's domain name can not be converted to ASCII via punycode: "+Di}Se[ur]=tr.join("@")}return Te},serialize:function(ee,ae){var Te=ee,Se=a(ee.to);if(Se){for(var ot=0,Tt=Se.length;ot<Tt;++ot){var Wt=String(Se[ot]),Mn=Wt.lastIndexOf("@"),Un=Wt.slice(0,Mn).replace(ys,Tr).replace(ys,o).replace(Sp,fe),mn=Wt.slice(Mn+1);try{mn=ae.iri?te.toUnicode(mn):te.toASCII(ut(mn,ae).toLowerCase())}catch(ur){Te.error=Te.error||"Email address's domain name can not be converted to "+(ae.iri?"Unicode":"ASCII")+" via punycode: "+ur}Se[ot]=Un+"@"+mn}Te.path=Se.join(",")}var ar=ee.headers=ee.headers||{};ee.subject&&(ar.subject=ee.subject),ee.body&&(ar.body=ee.body);var Rr=[];for(var Ht in ar)ar[Ht]!==yn[Ht]&&Rr.push(Ht.replace(ys,Tr).replace(ys,o).replace(gl,fe)+"="+ar[Ht].replace(ys,Tr).replace(ys,o).replace(kd,fe));return Rr.length&&(Te.query=Rr.join("&")),Te}},ti=/^([^\:]+)\:(.*)/,yu={scheme:"urn",parse:function(ee,ae){var Te=ee.path&&ee.path.match(ti),Se=ee;if(Te){var ot=ae.scheme||Se.scheme||"urn",Tt=Te[1].toLowerCase(),Wt=Te[2],Mn=ot+":"+(ae.nid||Tt),Un=le[Mn];Se.nid=Tt,Se.nss=Wt,Se.path=void 0,Un&&(Se=Un.parse(Se,ae))}else Se.error=Se.error||"URN can not be parsed.";return Se},serialize:function(ee,ae){var Te=ae.scheme||ee.scheme||"urn",Se=ee.nid,ot=Te+":"+(ae.nid||Se),Tt=le[ot];Tt&&(ee=Tt.serialize(ee,ae));var Wt=ee,Mn=ee.nss;return Wt.path=(Se||ae.nid)+":"+Mn,Wt}},$a=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ma={scheme:"urn:uuid",parse:function(ee,ae){var Te=ee;return Te.uuid=Te.nss,Te.nss=void 0,!ae.tolerant&&(!Te.uuid||!Te.uuid.match($a))&&(Te.error=Te.error||"UUID is not valid."),Te},serialize:function(ee,ae){var Te=ee;return Te.nss=(ee.uuid||"").toLowerCase(),Te}};le[wt.scheme]=wt,le[Bn.scheme]=Bn,le[jn.scheme]=jn,le[hr.scheme]=hr,le[Ni.scheme]=Ni,le[yu.scheme]=yu,le[Ma.scheme]=Ma,n.SCHEMES=le,n.pctEncChar=fe,n.pctDecChars=de,n.parse=it,n.removeDotSegments=Ge,n.serialize=ye,n.resolveComponents=ht,n.resolve=bt,n.normalize=me,n.equal=Ae,n.escapeComponent=qe,n.unescapeComponent=ut,Object.defineProperty(n,"__esModule",{value:!0})})})(BH,BH.exports);var mMt=BH.exports;Object.defineProperty(UZ,"__esModule",{value:!0});const wOe=mMt;wOe.code='require("ajv/dist/runtime/uri").default';UZ.default=wOe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Zf;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=$n;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=pR,i=HS,s=yb,o=Mu,a=$n,u=Mo,l=Ds,c=Et,f=pMt,d=UZ,h=(P,U)=>new RegExp(P,U);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function b(P){var U,W,B,H,G,te,le,fe,de,ge,Ie,pe,He,Ue,yt,it,be,ke,ze,ct,Ot,Ge,ye,ht,bt;const me=P.strict,Ae=(U=P.code)===null||U===void 0?void 0:U.optimize,qe=Ae===!0||Ae===void 0?1:Ae||0,ut=(B=(W=P.code)===null||W===void 0?void 0:W.regExp)!==null&&B!==void 0?B:h,wt=(H=P.uriResolver)!==null&&H!==void 0?H:d.default;return{strictSchema:(te=(G=P.strictSchema)!==null&&G!==void 0?G:me)!==null&&te!==void 0?te:!0,strictNumbers:(fe=(le=P.strictNumbers)!==null&&le!==void 0?le:me)!==null&&fe!==void 0?fe:!0,strictTypes:(ge=(de=P.strictTypes)!==null&&de!==void 0?de:me)!==null&&ge!==void 0?ge:"log",strictTuples:(pe=(Ie=P.strictTuples)!==null&&Ie!==void 0?Ie:me)!==null&&pe!==void 0?pe:"log",strictRequired:(Ue=(He=P.strictRequired)!==null&&He!==void 0?He:me)!==null&&Ue!==void 0?Ue:!1,code:P.code?{...P.code,optimize:qe,regExp:ut}:{optimize:qe,regExp:ut},loopRequired:(yt=P.loopRequired)!==null&&yt!==void 0?yt:v,loopEnum:(it=P.loopEnum)!==null&&it!==void 0?it:v,meta:(be=P.meta)!==null&&be!==void 0?be:!0,messages:(ke=P.messages)!==null&&ke!==void 0?ke:!0,inlineRefs:(ze=P.inlineRefs)!==null&&ze!==void 0?ze:!0,schemaId:(ct=P.schemaId)!==null&&ct!==void 0?ct:"$id",addUsedSchema:(Ot=P.addUsedSchema)!==null&&Ot!==void 0?Ot:!0,validateSchema:(Ge=P.validateSchema)!==null&&Ge!==void 0?Ge:!0,validateFormats:(ye=P.validateFormats)!==null&&ye!==void 0?ye:!0,unicodeRegExp:(ht=P.unicodeRegExp)!==null&&ht!==void 0?ht:!0,int32range:(bt=P.int32range)!==null&&bt!==void 0?bt:!0,uriResolver:wt}}class w{constructor(U={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,U=this.opts={...U,...b(U)};const{es5:W,lines:B}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:B}),this.logger=O(U.logger);const H=U.validateFormats;U.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,g,U,"NOT SUPPORTED"),E.call(this,y,U,"DEPRECATED","warn"),this._metaOpts=k.call(this),U.formats&&C.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),U.keywords&&A.call(this,U.keywords),typeof U.meta=="object"&&this.addMetaSchema(U.meta),T.call(this),U.validateFormats=H}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:U,meta:W,schemaId:B}=this.opts;let H=f;B==="id"&&(H={...f},H.id=H.$id,delete H.$id),W&&U&&this.addMetaSchema(H,H[B],!1)}defaultMeta(){const{meta:U,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof U=="object"?U[W]||U:void 0}validate(U,W){let B;if(typeof U=="string"){if(B=this.getSchema(U),!B)throw new Error(`no schema with key or ref "${U}"`)}else B=this.compile(U);const H=B(W);return"$async"in B||(this.errors=B.errors),H}compile(U,W){const B=this._addSchema(U,W);return B.validate||this._compileSchemaEnv(B)}compileAsync(U,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:B}=this.opts;return H.call(this,U,W);async function H(ge,Ie){await G.call(this,ge.$schema);const pe=this._addSchema(ge,Ie);return pe.validate||te.call(this,pe)}async function G(ge){ge&&!this.getSchema(ge)&&await H.call(this,{$ref:ge},!0)}async function te(ge){try{return this._compileSchemaEnv(ge)}catch(Ie){if(!(Ie instanceof i.default))throw Ie;return le.call(this,Ie),await fe.call(this,Ie.missingSchema),te.call(this,ge)}}function le({missingSchema:ge,missingRef:Ie}){if(this.refs[ge])throw new Error(`AnySchema ${ge} is loaded but ${Ie} cannot be resolved`)}async function fe(ge){const Ie=await de.call(this,ge);this.refs[ge]||await G.call(this,Ie.$schema),this.refs[ge]||this.addSchema(Ie,ge,W)}async function de(ge){const Ie=this._loading[ge];if(Ie)return Ie;try{return await(this._loading[ge]=B(ge))}finally{delete this._loading[ge]}}}addSchema(U,W,B,H=this.opts.validateSchema){if(Array.isArray(U)){for(const te of U)this.addSchema(te,void 0,B,H);return this}let G;if(typeof U=="object"){const{schemaId:te}=this.opts;if(G=U[te],G!==void 0&&typeof G!="string")throw new Error(`schema ${te} must be string`)}return W=(0,u.normalizeId)(W||G),this._checkUnique(W),this.schemas[W]=this._addSchema(U,B,W,H,!0),this}addMetaSchema(U,W,B=this.opts.validateSchema){return this.addSchema(U,W,!0,B),this}validateSchema(U,W){if(typeof U=="boolean")return!0;let B;if(B=U.$schema,B!==void 0&&typeof B!="string")throw new Error("$schema must be a string");if(B=B||this.opts.defaultMeta||this.defaultMeta(),!B)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const H=this.validate(B,U);if(!H&&W){const G="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(G);else throw new Error(G)}return H}getSchema(U){let W;for(;typeof(W=x.call(this,U))=="string";)U=W;if(W===void 0){const{schemaId:B}=this.opts,H=new o.SchemaEnv({schema:{},schemaId:B});if(W=o.resolveSchema.call(this,H,U),!W)return;this.refs[U]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(U){if(U instanceof RegExp)return this._removeAllSchemas(this.schemas,U),this._removeAllSchemas(this.refs,U),this;switch(typeof U){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=x.call(this,U);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[U],delete this.refs[U],this}case"object":{const W=U;this._cache.delete(W);let B=U[this.opts.schemaId];return B&&(B=(0,u.normalizeId)(B),delete this.schemas[B],delete this.refs[B]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(U){for(const W of U)this.addKeyword(W);return this}addKeyword(U,W){let B;if(typeof U=="string")B=U,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=B);else if(typeof U=="object"&&W===void 0){if(W=U,B=W.keyword,Array.isArray(B)&&!B.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if($.call(this,B,W),!W)return(0,c.eachItem)(B,G=>F.call(this,G)),this;j.call(this,W);const H={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(B,H.type.length===0?G=>F.call(this,G,H):G=>H.type.forEach(te=>F.call(this,G,H,te))),this}getKeyword(U){const W=this.RULES.all[U];return typeof W=="object"?W.definition:!!W}removeKeyword(U){const{RULES:W}=this;delete W.keywords[U],delete W.all[U];for(const B of W.rules){const H=B.rules.findIndex(G=>G.keyword===U);H>=0&&B.rules.splice(H,1)}return this}addFormat(U,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[U]=W,this}errorsText(U=this.errors,{separator:W=", ",dataVar:B="data"}={}){return!U||U.length===0?"No errors":U.map(H=>`${B}${H.instancePath} ${H.message}`).reduce((H,G)=>H+W+G)}$dataMetaSchema(U,W){const B=this.RULES.all;U=JSON.parse(JSON.stringify(U));for(const H of W){const G=H.split("/").slice(1);let te=U;for(const le of G)te=te[le];for(const le in B){const fe=B[le];if(typeof fe!="object")continue;const{$data:de}=fe.definition,ge=te[le];de&&ge&&(te[le]=q(ge))}}return U}_removeAllSchemas(U,W){for(const B in U){const H=U[B];(!W||W.test(B))&&(typeof H=="string"?delete U[B]:H&&!H.meta&&(this._cache.delete(H.schema),delete U[B]))}}_addSchema(U,W,B,H=this.opts.validateSchema,G=this.opts.addUsedSchema){let te;const{schemaId:le}=this.opts;if(typeof U=="object")te=U[le];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof U!="boolean")throw new Error("schema must be object or boolean")}let fe=this._cache.get(U);if(fe!==void 0)return fe;B=(0,u.normalizeId)(te||B);const de=u.getSchemaRefs.call(this,U,B);return fe=new o.SchemaEnv({schema:U,schemaId:le,meta:W,baseId:B,localRefs:de}),this._cache.set(fe.schema,fe),G&&!B.startsWith("#")&&(B&&this._checkUnique(B),this.refs[B]=fe),H&&this.validateSchema(U,!0),fe}_checkUnique(U){if(this.schemas[U]||this.refs[U])throw new Error(`schema with key or id "${U}" already exists`)}_compileSchemaEnv(U){if(U.meta?this._compileMetaSchema(U):o.compileSchema.call(this,U),!U.validate)throw new Error("ajv implementation error");return U.validate}_compileMetaSchema(U){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,U)}finally{this.opts=W}}}w.ValidationError=r.default,w.MissingRefError=i.default,e.default=w;function E(P,U,W,B="error"){for(const H in P){const G=H;G in U&&this.logger[B](`${W}: option ${H}. ${P[G]}`)}}function x(P){return P=(0,u.normalizeId)(P),this.schemas[P]||this.refs[P]}function T(){const P=this.opts.schemas;if(P)if(Array.isArray(P))this.addSchema(P);else for(const U in P)this.addSchema(P[U],U)}function C(){for(const P in this.opts.formats){const U=this.opts.formats[P];U&&this.addFormat(P,U)}}function A(P){if(Array.isArray(P)){this.addVocabulary(P);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const U in P){const W=P[U];W.keyword||(W.keyword=U),this.addKeyword(W)}}function k(){const P={...this.opts};for(const U of p)delete P[U];return P}const R={log(){},warn(){},error(){}};function O(P){if(P===!1)return R;if(P===void 0)return console;if(P.log&&P.warn&&P.error)return P;throw new Error("logger must implement log, warn and error methods")}const D=/^[a-z_$][a-z0-9_$:-]*$/i;function $(P,U){const{RULES:W}=this;if((0,c.eachItem)(P,B=>{if(W.keywords[B])throw new Error(`Keyword ${B} is already defined`);if(!D.test(B))throw new Error(`Keyword ${B} has invalid name`)}),!!U&&U.$data&&!("code"in U||"validate"in U))throw new Error('$data keyword must have "code" or "validate" function')}function F(P,U,W){var B;const H=U==null?void 0:U.post;if(W&&H)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:G}=this;let te=H?G.post:G.rules.find(({type:fe})=>fe===W);if(te||(te={type:W,rules:[]},G.rules.push(te)),G.keywords[P]=!0,!U)return;const le={keyword:P,definition:{...U,type:(0,l.getJSONTypes)(U.type),schemaType:(0,l.getJSONTypes)(U.schemaType)}};U.before?L.call(this,te,le,U.before):te.rules.push(le),G.all[P]=le,(B=U.implements)===null||B===void 0||B.forEach(fe=>this.addKeyword(fe))}function L(P,U,W){const B=P.rules.findIndex(H=>H.keyword===W);B>=0?P.rules.splice(B,0,U):(P.rules.push(U),this.logger.warn(`rule ${W} is not defined`))}function j(P){let{metaSchema:U}=P;U!==void 0&&(P.$data&&this.opts.$data&&(U=q(U)),P.validateSchema=this.compile(U,!0))}const z={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function q(P){return{anyOf:[P,z]}}})(VPe);var zZ={},VZ={},HZ={};Object.defineProperty(HZ,"__esModule",{value:!0});const gMt={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};HZ.default=gMt;var vb={};Object.defineProperty(vb,"__esModule",{value:!0});vb.callRef=vb.getValidate=void 0;const yMt=HS,Upe=Pn,Tu=$n,W_=dp,zpe=Mu,ND=Et,vMt={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=zpe.resolveRef.call(u,l,i,n);if(c===void 0)throw new yMt.default(r.opts.uriResolver,i,n);if(c instanceof zpe.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return oO(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return oO(e,(0,Tu._)`${p}.validate`,l,l.$async)}function d(p){const m=EOe(e,p);oO(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,Tu.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:Tu.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function EOe(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,Tu._)`${n.scopeValue("wrapper",{ref:t})}.validate`}vb.getValidate=EOe;function oO(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?W_.default.this:Tu.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,Tu._)`await ${(0,Upe.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,Tu._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,Upe.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,Tu._)`${p}.errors`;i.assign(W_.default.vErrors,(0,Tu._)`${W_.default.vErrors} === null ? ${m} : ${W_.default.vErrors}.concat(${m})`),i.assign(W_.default.errors,(0,Tu._)`${W_.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=ND.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,Tu._)`${p}.evaluated.props`);s.props=ND.mergeEvaluated.props(i,y,s.props,Tu.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=ND.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,Tu._)`${p}.evaluated.items`);s.items=ND.mergeEvaluated.items(i,y,s.items,Tu.Name)}}}vb.callRef=oO;vb.default=vMt;Object.defineProperty(VZ,"__esModule",{value:!0});const bMt=HZ,_Mt=vb,wMt=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",bMt.default,_Mt.default];VZ.default=wMt;var qZ={},WZ={};Object.defineProperty(WZ,"__esModule",{value:!0});const g3=$n,$g=g3.operators,y3={maximum:{okStr:"<=",ok:$g.LTE,fail:$g.GT},minimum:{okStr:">=",ok:$g.GTE,fail:$g.LT},exclusiveMaximum:{okStr:"<",ok:$g.LT,fail:$g.GTE},exclusiveMinimum:{okStr:">",ok:$g.GT,fail:$g.LTE}},EMt={message:({keyword:e,schemaCode:t})=>(0,g3.str)`must be ${y3[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,g3._)`{comparison: ${y3[e].okStr}, limit: ${t}}`},xMt={keyword:Object.keys(y3),type:"number",schemaType:"number",$data:!0,error:EMt,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,g3._)`${n} ${y3[t].fail} ${r} || isNaN(${n})`)}};WZ.default=xMt;var GZ={};Object.defineProperty(GZ,"__esModule",{value:!0});const ZA=$n,SMt={message:({schemaCode:e})=>(0,ZA.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,ZA._)`{multipleOf: ${e}}`},TMt={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:SMt,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,ZA._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,ZA._)`${o} !== parseInt(${o})`;e.fail$data((0,ZA._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};GZ.default=TMt;var YZ={},KZ={};Object.defineProperty(KZ,"__esModule",{value:!0});function xOe(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}KZ.default=xOe;xOe.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(YZ,"__esModule",{value:!0});const s1=$n,CMt=Et,AMt=KZ,IMt={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,s1.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,s1._)`{limit: ${e}}`},kMt={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:IMt,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?s1.operators.GT:s1.operators.LT,o=i.opts.unicode===!1?(0,s1._)`${n}.length`:(0,s1._)`${(0,CMt.useFunc)(e.gen,AMt.default)}(${n})`;e.fail$data((0,s1._)`${o} ${s} ${r}`)}};YZ.default=kMt;var XZ={};Object.defineProperty(XZ,"__esModule",{value:!0});const RMt=Pn,v3=$n,NMt={message:({schemaCode:e})=>(0,v3.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,v3._)`{pattern: ${e}}`},DMt={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:NMt,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,v3._)`(new RegExp(${i}, ${o}))`:(0,RMt.usePattern)(e,r);e.fail$data((0,v3._)`!${a}.test(${t})`)}};XZ.default=DMt;var QZ={};Object.defineProperty(QZ,"__esModule",{value:!0});const e2=$n,PMt={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,e2.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,e2._)`{limit: ${e}}`},OMt={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:PMt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?e2.operators.GT:e2.operators.LT;e.fail$data((0,e2._)`Object.keys(${n}).length ${i} ${r}`)}};QZ.default=OMt;var JZ={};Object.defineProperty(JZ,"__esModule",{value:!0});const nC=Pn,t2=$n,$Mt=Et,MMt={message:({params:{missingProperty:e}})=>(0,t2.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,t2._)`{missingProperty: ${e}}`},LMt={keyword:"required",type:"object",schemaType:"array",$data:!0,error:MMt,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,$Mt.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(t2.nil,f);else for(const h of n)(0,nC.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,nC.checkMissingProp)(e,n,h)),(0,nC.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,nC.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,nC.propertyInData)(t,i,h,a.ownProperties)),t.if((0,t2.not)(p),()=>{e.error(),t.break()})},t2.nil)}}};JZ.default=LMt;var ZZ={};Object.defineProperty(ZZ,"__esModule",{value:!0});const n2=$n,FMt={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,n2.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,n2._)`{limit: ${e}}`},BMt={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:FMt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?n2.operators.GT:n2.operators.LT;e.fail$data((0,n2._)`${n}.length ${i} ${r}`)}};ZZ.default=BMt;var eee={},mR={};Object.defineProperty(mR,"__esModule",{value:!0});const SOe=EX;SOe.code='require("ajv/dist/runtime/equal").default';mR.default=SOe;Object.defineProperty(eee,"__esModule",{value:!0});const $9=Ds,ko=$n,jMt=Et,UMt=mR,zMt={message:({params:{i:e,j:t}})=>(0,ko.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,ko._)`{i: ${e}, j: ${t}}`},VMt={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:zMt,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,$9.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,ko._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,ko._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,ko._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,$9.checkDataTypes)(l,g,a.opts.strictNumbers,$9.DataType.Wrong),v=t.const("indices",(0,ko._)`{}`);t.for((0,ko._)`;${p}--;`,()=>{t.let(g,(0,ko._)`${n}[${p}]`),t.if(y,(0,ko._)`continue`),l.length>1&&t.if((0,ko._)`typeof ${g} == "string"`,(0,ko._)`${g} += "_"`),t.if((0,ko._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,ko._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,ko._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,jMt.useFunc)(t,UMt.default),y=t.name("outer");t.label(y).for((0,ko._)`;${p}--;`,()=>t.for((0,ko._)`${m} = ${p}; ${m}--;`,()=>t.if((0,ko._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};eee.default=VMt;var tee={};Object.defineProperty(tee,"__esModule",{value:!0});const jH=$n,HMt=Et,qMt=mR,WMt={message:"must be equal to constant",params:({schemaCode:e})=>(0,jH._)`{allowedValue: ${e}}`},GMt={keyword:"const",$data:!0,error:WMt,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,jH._)`!${(0,HMt.useFunc)(t,qMt.default)}(${n}, ${i})`):e.fail((0,jH._)`${s} !== ${n}`)}};tee.default=GMt;var nee={};Object.defineProperty(nee,"__esModule",{value:!0});const JC=$n,YMt=Et,KMt=mR,XMt={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,JC._)`{allowedValues: ${e}}`},QMt={keyword:"enum",schemaType:"array",$data:!0,error:XMt,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,YMt.useFunc)(t,KMt.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,JC.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,JC._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,JC._)`${l()}(${n}, ${h}[${p}])`:(0,JC._)`${n} === ${m}`}}};nee.default=QMt;Object.defineProperty(qZ,"__esModule",{value:!0});const JMt=WZ,ZMt=GZ,e3t=YZ,t3t=XZ,n3t=QZ,r3t=JZ,i3t=ZZ,s3t=eee,o3t=tee,a3t=nee,u3t=[JMt.default,ZMt.default,e3t.default,t3t.default,n3t.default,r3t.default,i3t.default,s3t.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},o3t.default,a3t.default];qZ.default=u3t;var ree={},qS={};Object.defineProperty(qS,"__esModule",{value:!0});qS.validateAdditionalItems=void 0;const o1=$n,UH=Et,l3t={message:({params:{len:e}})=>(0,o1.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,o1._)`{limit: ${e}}`},c3t={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:l3t,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,UH.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}TOe(e,r)}};function TOe(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,o1._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,o1._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,UH.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,o1._)`${a} <= ${t.length}`);n.if((0,o1.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:UH.Type.Num},l),o.allErrors||n.if((0,o1.not)(l),()=>n.break())})}}qS.validateAdditionalItems=TOe;qS.default=c3t;var iee={},WS={};Object.defineProperty(WS,"__esModule",{value:!0});WS.validateTuple=void 0;const Vpe=$n,aO=Et,f3t=Pn,d3t={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return COe(e,"additionalItems",t);n.items=!0,!(0,aO.alwaysValidSchema)(n,t)&&e.ok((0,f3t.validateArray)(e))}};function COe(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=aO.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,Vpe._)`${s}.length`);n.forEach((f,d)=>{(0,aO.alwaysValidSchema)(a,f)||(r.if((0,Vpe._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,aO.checkStrictMode)(a,g,d.strictTuples)}}}WS.validateTuple=COe;WS.default=d3t;Object.defineProperty(iee,"__esModule",{value:!0});const h3t=WS,p3t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,h3t.validateTuple)(e,"items")};iee.default=p3t;var see={};Object.defineProperty(see,"__esModule",{value:!0});const Hpe=$n,m3t=Et,g3t=Pn,y3t=qS,v3t={message:({params:{len:e}})=>(0,Hpe.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Hpe._)`{limit: ${e}}`},b3t={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:v3t,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,m3t.alwaysValidSchema)(r,t)&&(i?(0,y3t.validateAdditionalItems)(e,i):e.ok((0,g3t.validateArray)(e)))}};see.default=b3t;var oee={};Object.defineProperty(oee,"__esModule",{value:!0});const Ec=$n,DD=Et,_3t={message:({params:{min:e,max:t}})=>t===void 0?(0,Ec.str)`must contain at least ${e} valid item(s)`:(0,Ec.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Ec._)`{minContains: ${e}}`:(0,Ec._)`{minContains: ${e}, maxContains: ${t}}`},w3t={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:_3t,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,Ec._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,DD.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,DD.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,DD.alwaysValidSchema)(s,n)){let m=(0,Ec._)`${c} >= ${o}`;a!==void 0&&(m=(0,Ec._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,Ec._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:DD.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,Ec._)`${m}++`),a===void 0?t.if((0,Ec._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,Ec._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,Ec._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};oee.default=w3t;var AOe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=$n,n=Et,r=Pn;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(AOe);var aee={};Object.defineProperty(aee,"__esModule",{value:!0});const IOe=$n,E3t=Et,x3t={message:"property name must be valid",params:({params:e})=>(0,IOe._)`{propertyName: ${e.propertyName}}`},S3t={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:x3t,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,E3t.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,IOe.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};aee.default=S3t;var x4={};Object.defineProperty(x4,"__esModule",{value:!0});const PD=Pn,Ef=$n,T3t=dp,OD=Et,C3t={message:"must NOT have additional properties",params:({params:e})=>(0,Ef._)`{additionalProperty: ${e.additionalProperty}}`},A3t={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:C3t,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,OD.alwaysValidSchema)(o,n))return;const l=(0,PD.allSchemaProperties)(r.properties),c=(0,PD.allSchemaProperties)(r.patternProperties);f(),e.ok((0,Ef._)`${s} === ${T3t.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,OD.schemaRefOrVal)(o,r.properties,"properties");y=(0,PD.isOwnProperty)(t,v,g)}else l.length?y=(0,Ef.or)(...l.map(v=>(0,Ef._)`${g} === ${v}`)):y=Ef.nil;return c.length&&(y=(0,Ef.or)(y,...c.map(v=>(0,Ef._)`${(0,PD.usePattern)(e,v)}.test(${g})`))),(0,Ef.not)(y)}function h(g){t.code((0,Ef._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,OD.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,Ef.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,Ef.not)(y),()=>t.break()))}}function m(g,y,v){const b={keyword:"additionalProperties",dataProp:g,dataPropType:OD.Type.Str};v===!1&&Object.assign(b,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(b,y)}}};x4.default=A3t;var uee={};Object.defineProperty(uee,"__esModule",{value:!0});const I3t=Zf,qpe=Pn,M9=Et,Wpe=x4,k3t={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&Wpe.default.code(new I3t.KeywordCxt(s,Wpe.default,"additionalProperties"));const o=(0,qpe.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=M9.mergeEvaluated.props(t,(0,M9.toHash)(o),s.props));const a=o.filter(f=>!(0,M9.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,qpe.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};uee.default=k3t;var lee={};Object.defineProperty(lee,"__esModule",{value:!0});const Gpe=Pn,$D=$n,Ype=Et,Kpe=Et,R3t={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,Gpe.allSchemaProperties)(n),u=a.filter(m=>(0,Ype.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof $D.Name)&&(s.props=(0,Kpe.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,Ype.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,$D._)`${(0,Gpe.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:Kpe.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,$D._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,$D.not)(c),()=>t.break())})})}}};lee.default=R3t;var cee={};Object.defineProperty(cee,"__esModule",{value:!0});const N3t=Et,D3t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,N3t.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};cee.default=D3t;var fee={};Object.defineProperty(fee,"__esModule",{value:!0});const P3t=Pn,O3t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:P3t.validateUnion,error:{message:"must match a schema in anyOf"}};fee.default=O3t;var dee={};Object.defineProperty(dee,"__esModule",{value:!0});const uO=$n,$3t=Et,M3t={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,uO._)`{passingSchemas: ${e.passing}}`},L3t={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:M3t,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,$3t.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,uO._)`${u} && ${o}`).assign(o,!1).assign(a,(0,uO._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,uO.Name)})})}}};dee.default=L3t;var hee={};Object.defineProperty(hee,"__esModule",{value:!0});const F3t=Et,B3t={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,F3t.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};hee.default=B3t;var pee={};Object.defineProperty(pee,"__esModule",{value:!0});const b3=$n,kOe=Et,j3t={message:({params:e})=>(0,b3.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,b3._)`{failingKeyword: ${e.ifClause}}`},U3t={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:j3t,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,kOe.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=Xpe(r,"then"),s=Xpe(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,b3.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,b3._)`${c}`):e.setParams({ifClause:c})}}}};function Xpe(e,t){const n=e.schema[t];return n!==void 0&&!(0,kOe.alwaysValidSchema)(e,n)}pee.default=U3t;var mee={};Object.defineProperty(mee,"__esModule",{value:!0});const z3t=Et,V3t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,z3t.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};mee.default=V3t;Object.defineProperty(ree,"__esModule",{value:!0});const H3t=qS,q3t=iee,W3t=WS,G3t=see,Y3t=oee,K3t=AOe,X3t=aee,Q3t=x4,J3t=uee,Z3t=lee,eLt=cee,tLt=fee,nLt=dee,rLt=hee,iLt=pee,sLt=mee;function oLt(e=!1){const t=[eLt.default,tLt.default,nLt.default,rLt.default,iLt.default,sLt.default,X3t.default,Q3t.default,K3t.default,J3t.default,Z3t.default];return e?t.push(q3t.default,G3t.default):t.push(H3t.default,W3t.default),t.push(Y3t.default),t}ree.default=oLt;var gee={},yee={};Object.defineProperty(yee,"__esModule",{value:!0});const ss=$n,aLt={message:({schemaCode:e})=>(0,ss.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,ss._)`{format: ${e}}`},uLt={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:aLt,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,ss._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,ss._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,ss._)`${m}.type || "string"`).assign(y,(0,ss._)`${m}.validate`),()=>n.assign(g,(0,ss._)`"string"`).assign(y,m)),e.fail$data((0,ss.or)(v(),b()));function v(){return u.strictSchema===!1?ss.nil:(0,ss._)`${o} && !${y}`}function b(){const w=c.$async?(0,ss._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,ss._)`${y}(${r})`,E=(0,ss._)`(typeof ${y} == "function" ? ${w} : ${y}.test(${r}))`;return(0,ss._)`${y} && ${y} !== true && ${g} === ${t} && !${E}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=b(p);m===t&&e.pass(w());function v(){if(u.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function b(E){const x=E instanceof RegExp?(0,ss.regexpCode)(E):u.code.formats?(0,ss._)`${u.code.formats}${(0,ss.getProperty)(s)}`:void 0,T=n.scopeValue("formats",{key:s,ref:E,code:x});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,ss._)`${T}.validate`]:["string",E,T]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,ss._)`await ${y}(${r})`}return typeof g=="function"?(0,ss._)`${y}(${r})`:(0,ss._)`${y}.test(${r})`}}}};yee.default=uLt;Object.defineProperty(gee,"__esModule",{value:!0});const lLt=yee,cLt=[lLt.default];gee.default=cLt;var Ex={};Object.defineProperty(Ex,"__esModule",{value:!0});Ex.contentVocabulary=Ex.metadataVocabulary=void 0;Ex.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Ex.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(zZ,"__esModule",{value:!0});const fLt=VZ,dLt=qZ,hLt=ree,pLt=gee,Qpe=Ex,mLt=[fLt.default,dLt.default,(0,hLt.default)(),pLt.default,Qpe.metadataVocabulary,Qpe.contentVocabulary];zZ.default=mLt;var vee={},S4={};Object.defineProperty(S4,"__esModule",{value:!0});S4.DiscrError=void 0;var Jpe;(function(e){e.Tag="tag",e.Mapping="mapping"})(Jpe||(S4.DiscrError=Jpe={}));Object.defineProperty(vee,"__esModule",{value:!0});const dw=$n,zH=S4,Zpe=Mu,gLt=HS,yLt=Et,vLt={message:({params:{discrError:e,tagName:t}})=>e===zH.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,dw._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},bLt={keyword:"discriminator",type:"object",schemaType:"object",error:vLt,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,dw._)`${n}${(0,dw.getProperty)(a)}`);t.if((0,dw._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:zH.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,dw._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:zH.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,dw.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let w=0;w<o.length;w++){let E=o[w];if(E!=null&&E.$ref&&!(0,yLt.schemaHasRulesButRef)(E,s.self.RULES)){const T=E.$ref;if(E=Zpe.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,T),E instanceof Zpe.SchemaEnv&&(E=E.schema),E===void 0)throw new gLt.default(s.opts.uriResolver,s.baseId,T)}const x=(h=E==null?void 0:E.properties)===null||h===void 0?void 0:h[a];if(typeof x!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(E)),v(x,w)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:w}){return Array.isArray(w)&&w.includes(a)}function v(w,E){if(w.const)b(w.const,E);else if(w.enum)for(const x of w.enum)b(x,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function b(w,E){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[w]=E}}}};vee.default=bLt;const _Lt="http://json-schema.org/draft-07/schema#",wLt="http://json-schema.org/draft-07/schema#",ELt="Core schema meta-schema",xLt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},SLt=["object","boolean"],TLt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},CLt={$schema:_Lt,$id:wLt,title:ELt,definitions:xLt,type:SLt,properties:TLt,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=VPe,r=zZ,i=vee,s=CLt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=Zf;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=$n;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=pR;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=HS;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(OH,OH.exports);var ALt=OH.exports;const ROe=dl(ALt),ILt="#/definitions/StudyConfig",kLt="http://json-schema.org/draft-07/schema#",RLt={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "required": true,    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": [       {         "label": "Europe",         "value": "Europe"       },       {         "label": "Japan",         "value": "Japan"       },       {         "label": "USA",         "value": "USA"       }     ],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": [  {    "label": "Option 1",    "value": "opt-1"  },  {    "label": "Option 2",    "value": "opt-2"  },  {    "label": "Option 3",    "value": "opt-3"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "required": true, "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": [  {    "label": "Red",    "value": "red"  },  {    "label": "Blue",    "value": "blue"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "required": true, "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "required": true, "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "required": true, "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","required","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "required": true,    "location": "belowStimulus",    "type": "checkbox",    "options": [      {        "label": "Man",        "value": "Man"      },      {        "label": "Woman",        "value": "Woman"      },      {        "label": "Genderqueer",        "value": "Genderqueer"      },      {        "label": "Third-gender",        "value": "Third-gender"      },      ... etc.    ]  } ] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "required": true, "location": "aboveStimulus", "type": "radio", "options": [  {    "label": "Option 1",    "value": "opt-1"  },  {    "label": "Option 2",    "value": "opt-2"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.0/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.0/src/public/demo-brush-interactions/assets)",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "required": true, "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "required": true, "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js { "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.0/src/parser/StudyConfigSchema.json", "studyMetadata": {  ... }, "uiConfig": {  ... }, "components": {  ... }, "sequence": {  ... } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : { "title": "My New Study", "version": "pilot", "authors": [  "Jane Doe",  "John Doe" ], "date": "2024-04-01", "description": "This study is meant to test your ability.", "organizations": [  "The reVISit Team",  "The Other Team" ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ "contactEmail": "contact@revisit.dev", "helpTextPath": "<study-name>/assets/help.md", "logoPath": "<study-name>/assets/logo.jpg", "withProgressBar": true, "autoDownloadStudy": true "autoDownloadTime": 5000, "studyEndMsg": "Thank you for completing this study. You\'re the best!", "sidebar": true, "windowEventDebounceTime": 500, "urlParticipantIdParam": "PROLIFIC_ID", "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "required": true,    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},NLt={$ref:ILt,$schema:kLt,definitions:RLt},DLt="#/definitions/GlobalConfig",PLt="http://json-schema.org/draft-07/schema#",OLt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},$Lt={$ref:DLt,$schema:PLt,definitions:OLt},NOe=new ROe;NOe.addSchema($Lt);const eme=NOe.getSchema("#/definitions/GlobalConfig"),DOe=new ROe;DOe.addSchema(NLt);const L9=DOe.getSchema("#/definitions/StudyConfig");function MLt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function T4(e){return e.baseComponent!==void 0}function LLt(e){const t=RZ.parse(e),n=eme(t),r=MLt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...eme.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function POe(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):POe(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function FLt(e){const t=[],n=[];Object.entries(e.components).forEach(([s,o])=>{var a;T4(o)&&!((a=e.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${s}`,params:{action:"add the base component to the baseComponents object"}})});const r=LTe(e.sequence);r.forEach(s=>{var o;e.components[s]||t.push({message:(o=e.baseComponents)!=null&&o[s]?`Component \`${s}\` is a base component and cannot be used in the sequence`:`Component \`${s}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(s=>!r.includes(s)).forEach(s=>{n.push({message:`Component \`${s}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const i=[];return POe(e.sequence,i),i.forEach(s=>{t.push({message:`Skip target \`${s}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:t,warnings:n}}function BLt(e){let t=!1,n;try{n=RZ.parse(e),t=L9(n)}catch{t=!1}let r=[],i=[];if(t){const{errors:s,warnings:o}=FLt(n);r=[...L9.errors||[],...s],i=o}else r=L9.errors||[{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}function OOe(){const e=hg(),{setAlertModal:t}=op(),n=ap();I.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var tme=Object.prototype.hasOwnProperty;function nme(e,t,n){for(n of e.keys())if(r2(n,t))return n}function r2(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&r2(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=nme(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=nme(t,i),!i)||!r2(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(tme.call(e,n)&&++r&&!tme.call(t,n)||!(n in t)||!r2(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function jLt(e){var t=I.useRef(e),n=I.useRef(0);return r2(e,t.current)||(t.current=e,n.current+=1),I.useMemo(function(){return t.current},[n.current])}function ULt(e,t){return I.useEffect(e,jLt(t))}const zLt=(e,t=null)=>{const[n,r]=I.useState("idle"),[i,s]=I.useState(null),[o,a]=I.useState(null),u=I.useRef(),l=I.useRef(!1);I.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=I.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return ULt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}},rme=["status","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","meta","configHash"],$Oe=["participantId","trialId","trialOrder","responseId"];function bee(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function VLt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==void 0).length/(Lm(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=T4(u)&&u.baseComponent&&n.baseComponents?_X({},n.baseComponents[u.baseComponent],u):u,c=s.endTime-s.startTime;return Object.entries(s.answer).map(([d,h])=>{var g,y;const p={participantId:e.participantId,trialId:o,trialOrder:a,responseId:d},m=l.response.find(v=>v.id===d);if(t.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("configHash")&&(p.configHash=e.participantConfigHash),t.includes("percentComplete")&&(p.percentComplete=r),t.includes("description")&&(p.description=l.description),t.includes("instruction")&&(p.instruction=l.instruction),t.includes("responsePrompt")&&(p.responsePrompt=m==null?void 0:m.prompt),t.includes("answer")&&(p.answer=h),t.includes("correctAnswer")){const v=(y=(g=l.correctAnswer)==null?void 0:g.find(b=>b.id===d))==null?void 0:y.answer;p.correctAnswer=typeof v=="object"?JSON.stringify(v):v}return t.includes("responseMin")&&(p.responseMin=(m==null?void 0:m.type)==="numerical"?m.min:void 0),t.includes("responseMax")&&(p.responseMax=(m==null?void 0:m.type)==="numerical"?m.max:void 0),t.includes("startTime")&&(p.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(p.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(p.duration=c),t.includes("meta")&&(p.meta=JSON.stringify(l.meta,null,2)),p}).flat()}).flat()}async function HLt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...$Oe,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await VLt(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function qLt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=I.useState([...rme].filter(h=>h!=="meta")),a=Is(),{value:u,status:l,error:c}=zLt(HLt,[s,r,a.storageEngine,i]),f=I.useCallback(()=>{if(!u)return;const h=[u.header.join(","),...u.rows.map(p=>u.header.map(m=>p[m]).join(","))].join(`
`);bee(h,n)},[n,u]),d=I.useMemo(()=>{if(!u)return"";const h=u.rows.length>5?5:u.rows.length,p=h===1?"":"s";return`This is a preview of the first ${p?h:""} row${p} of the CSV. The full CSV contains ${u.rows.length} row${p}.`},[u]);return _.jsxs(Ts,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[_.jsx(wK,{searchable:!0,nothingFoundMessage:"Property not found",data:[...rme],value:s,onChange:h=>o(h),label:"Included optional columns:",leftSection:_.jsx(net,{}),variant:"filled"}),_.jsx(Bc,{h:"md"}),_.jsxs(_e,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?_.jsxs(kn,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[_.jsx(kn.Thead,{children:_.jsx(kn.Tr,{children:u.header.map(h=>_.jsx(kn.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(h)?200:void 0},children:_.jsxs(Gt,{direction:"row",justify:"space-between",align:"center",children:[h,!$Oe.includes(h)&&_.jsx(ty,{onClick:()=>o(s.filter(p=>p!==h)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:_.jsx(GK,{size:16})})]})},h))})}),_.jsx(kn.Tbody,{children:u.rows.slice(0,5).map((h,p)=>_.jsx(kn.Tr,{children:u.header.map(m=>_.jsx(kn.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(m)?"normal":"nowrap"},children:h[m]},`${p}-${m}`))},p))})]}):l==="error"&&c?_.jsx(Ak,{variant:"light",children:c.message}):null,_.jsx(Gl,{visible:l==="pending"||l==="idle"})]}),_.jsx(Bc,{h:"sm"}),_.jsx(Gt,{justify:"center",fz:"sm",c:"dimmed",children:_.jsx(Je,{children:d})}),_.jsx(Bc,{h:"md"}),_.jsxs(Vs,{justify:"right",children:[_.jsx(Nn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),_.jsx(Nn,{leftSection:_.jsx(Vxe,{}),onClick:()=>f(),"data-autofocus":!0,children:"Download"})]})]})}function WLt(){const e=Fm(),{storageEngine:t}=Is(),{answers:n}=uf(v=>v),[r,i]=I.useState(!1);I.useEffect(()=>{const v=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(v))},1e3)},[]),OOe();const[s,o]=I.useState(),[a,u]=I.useState(""),l=e.studyMetadata.title.replace(" ","_");I.useEffect(()=>{async function v(){if(t){const b=await t.getCurrentParticipantId(),w=await t.getParticipantData();u(b),o(w)}}v()},[t]);const c=I.useCallback(async()=>{bee(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=I.useState(Math.floor(d/1e3));I.useEffect(()=>{if(r){const v=setInterval(()=>{p(b=>b-1)},1e3);return h<=0?(f&&c(),clearInterval(v),()=>clearInterval(v)):()=>clearInterval(v)}return()=>{}},[f,r,h,c]);const m=t_(),[g,y]=I.useState(!1);return I.useEffect(()=>{(async()=>{if(t){const b=await t.getModes(m);y(b.dataCollectionEnabled)}})()},[t,m]),_.jsx($h,{style:{height:"100%"},children:_.jsx(Gt,{direction:"column",children:r||!g?_.jsx(Je,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?_.jsx(iu,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):_.jsxs(_.Fragment,{children:[_.jsx(Je,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),_.jsx(Bc,{h:"lg"}),_.jsx($h,{children:_.jsx(ag,{color:"blue"})})]})})})}function GLt(){var d;const e=Fm(),t=hg(),n=Xy()||"Notfound",r=e.components[n],i=wX();OOe();const{storageEngine:s}=Is(),o=ap(),{setAlertModal:a}=op();if(I.useEffect(()=>{(s==null?void 0:s.getEngine())!=="firebase"&&o(a({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[a,s,o]),n==="end")return _.jsx(WLt,{});if(n==="Notfound")return _.jsx(ib,{email:e.uiConfig.contactEmail});const u=T4(r)&&e.baseComponents?_X({},(d=e.baseComponents)==null?void 0:d[r.baseComponent],r):r,l=u.instruction||"",{instructionLocation:c}=u,f=e.uiConfig.sidebar&&(c==="sidebar"||c===void 0);return _.jsxs(_.Fragment,{children:[c==="aboveStimulus"&&_.jsx(iu,{text:l}),_.jsx(O$,{status:i,config:u,location:"aboveStimulus"},`${t}-above-response-block`),_.jsxs(I.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:[u.type==="markdown"&&_.jsx(YPt,{currentConfig:u}),u.type==="website"&&_.jsx(ict,{currentConfig:u}),u.type==="image"&&_.jsx(oct,{currentConfig:u}),u.type==="react-component"&&_.jsx(GPt,{currentConfig:u})]},`${t}-stimulus`),(c==="belowStimulus"||c===void 0&&!f)&&_.jsx(iu,{text:l}),_.jsx(O$,{status:i,config:u,location:"belowStimulus"},`${t}-below-response-block`)]})}function VH(e){const[t]=HK();return _.jsx(VK,{...e,to:{pathname:e.to,search:t.toString()}})}function MOe(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=MOe(o,t,n,r),r.includes(o.orderPath))break}return i}function LOe(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=LOe(s,r)}}),n}function YLt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function KLt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,subSequence:s,participantView:o}){const a=t_(),u=dg(),l=hg(),c=Fm(),[f,{close:d,open:h}]=Jw(!1),p=e in c.components&&c.components[e],m=s&&s.components.slice(r).includes(e)?MOe(n,e,r,s.orderPath):-1,g=o?l===m:l===`reviewer-${e}`;return _.jsxs(si,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:f,offset:20,children:[_.jsx(si.Target,{children:_.jsx(_e,{onMouseEnter:h,onMouseLeave:d,children:_.jsx(x6,{active:g,style:{lineHeight:"32px",height:"32px"},label:_.jsxs(_e,{children:[i&&_.jsx(KZe,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),g?_.jsx(Je,{size:"sm",span:!0,fw:"700",display:"inline",children:e}):_.jsx(Je,{size:"sm",display:"inline",children:e})]}),onClick:()=>u(o?`/${a}/${m}`:`/${a}/reviewer-${e}`),disabled:t})})}),p&&(p.description||p.meta)&&_.jsx(si.Dropdown,{onMouseLeave:d,children:_.jsx(Je,{size:"sm",children:_.jsxs(_e,{children:[p.description&&_.jsxs(_e,{children:[_.jsx(Je,{fw:900,display:"inline-block",mr:2,children:"Description:"}),_.jsx(Je,{fw:400,component:"span",children:p.description})]}),p.meta&&_.jsxs(Je,{children:[_.jsx(Je,{fw:"900",component:"span",children:"Task Meta: "}),_.jsx(Je,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(p.meta,null,2)}`})]})]})})})]})}function HH({configSequence:e,fullSequence:t,participantSequence:n,participantView:r}){var s;let i=M1(e.components);return n&&r&&(i=YLt(M1(e.components),M1(n.components))),r||(i=[...((s=e.interruptions)==null?void 0:s.flatMap(o=>o.components))||[],...i]),_.jsx(_.Fragment,{children:i.map((o,a)=>{if(typeof o=="string")return _.jsx(KLt,{step:o,disabled:r&&(n==null?void 0:n.components[a])!==o,fullSequence:t,startIndex:a,interruption:e.interruptions&&e.interruptions.findIndex(f=>f.components.includes(o))>-1||!1,subSequence:n,participantView:r},a);const u=n==null?void 0:n.components.find(f=>typeof f!="string"&&f.orderPath===o.orderPath),l=u?Lm(u).length-LOe(o,u):0,c=Lm(o);return _.jsx(x6,{label:_.jsxs(_e,{style:{opacity:l>0?1:.5},children:[_.jsx(Je,{size:"sm",display:"inline",children:o.order}),o.order==="random"||o.order==="latinSquare"?_.jsx(GZe,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&_.jsxs(mm,{ml:5,variant:"light",children:[l,"/",c.length]}),r&&o.interruptions&&_.jsx(mm,{ml:5,color:"orange",variant:"light",children:(u==null?void 0:u.components.filter(f=>{var d;return typeof f=="string"&&((d=o.interruptions)==null?void 0:d.flatMap(h=>h.components).includes(f))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:_.jsx(_e,{style:{borderLeft:"1px solid #e9ecef"},children:_.jsx(HH,{configSequence:o,participantSequence:u,fullSequence:t,participantView:r})})},a)})})}function FOe(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function BOe(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>BOe(n,`${t}-${r}`))}}function ime({text:e}){return _.jsx(ls,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:_.jsx(jxe,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function XLt(){const{sequence:e,metadata:t}=uf(f=>f),{toggleStudyBrowser:n}=op(),r=Fm(),i=ap(),s=t_(),o=Oxe(`/${s}`),{storageEngine:a}=Is(),u=I.useMemo(()=>{let f=M1(r.sequence);return f=BOe(f,"root"),f.components.push("end"),f},[r.sequence]),[l,c]=I.useState("participant");return _.jsxs(yi.Aside,{p:"0",children:[_.jsx(yi.Section,{children:_.jsxs(Gt,{direction:"row",p:"sm",justify:"space-between",pb:"xs",children:[_.jsx(Je,{size:"md",fw:700,pt:3,children:"Study Browser"}),_.jsx(Nn,{variant:"light",leftSection:_.jsx(WK,{size:14}),onClick:()=>FOe(a,r,t,o),size:"xs",disabled:l==="allTrials",children:"Next Participant"}),_.jsx(Wy,{onClick:()=>i(n()),mt:1})]})}),_.jsx(yi.Section,{grow:!0,component:Gb,p:"xs",pt:0,children:_.jsxs(os,{value:l,onChange:c,children:[_.jsx(_e,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:_.jsxs(os.List,{grow:!0,children:[_.jsxs(os.Tab,{value:"participant",children:["Participant View",_.jsx(ime,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),_.jsxs(os.Tab,{value:"allTrials",children:["All Trials View",_.jsx(ime,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),_.jsx(os.Panel,{value:"participant",children:_.jsx(HH,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!0})}),_.jsx(os.Panel,{value:"allTrials",children:_.jsx(HH,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!1})})]})})]})}function QLt({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const{config:n,metadata:r}=uf(E=>E),i=bX(),s=ap(),{toggleShowHelpText:o,toggleStudyBrowser:a}=op(),{storageEngine:u}=Is(),l=hg(),c=i.length-1,f=typeof l=="number"?l/c*100:0,[d,h]=I.useState(!1),p=n==null?void 0:n.uiConfig.logoPath,m=n==null?void 0:n.uiConfig.withProgressBar,g=t_(),y=Oxe(`/${g}`),v=I.useRef(null),[b,w]=I.useState(!1);return I.useEffect(()=>{const E=v.current;E&&w(E.scrollWidth>E.offsetWidth)},[n]),_.jsx(yi.Header,{p:"md",children:_.jsxs(ao,{mt:-7,align:"center",children:[_.jsx(ao.Col,{span:4,children:_.jsxs(Gt,{align:"center",children:[_.jsx(cg,{w:40,src:`${ip}${p}`,alt:"Study Logo"}),_.jsx(Bc,{w:"md"}),_.jsx($i,{ref:v,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:b?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),_.jsx(ao.Col,{span:4,children:m&&_.jsx(hS,{radius:"md",size:"lg",value:f})}),_.jsx(ao.Col,{span:4,children:_.jsxs(Vs,{wrap:"nowrap",justify:"right",children:[!t&&_.jsx(ls,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:_.jsx(mm,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&_.jsx(Nn,{variant:"outline",onClick:()=>s(o()),children:"Help"}),_.jsxs(Du,{shadow:"md",width:200,withinPortal:!0,opened:d,onChange:h,children:[_.jsx(Du.Target,{children:_.jsx(ty,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:_.jsx(eet,{})})}),_.jsxs(Du.Dropdown,{children:[e&&_.jsx(Du.Item,{leftSection:_.jsx(oet,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),_.jsx(Du.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:_.jsx(ret,{size:14}),children:"Contact"}),e&&_.jsx(Du.Item,{leftSection:_.jsx(WK,{size:14}),onClick:()=>FOe(u,n,r,y),children:"Next Participant"})]})]})]})})]})})}function JLt(){var u;const e=(u=Fm())==null?void 0:u.uiConfig.sidebar,t=Fm(),n=Xy(),r=t.components[n],i=I.useMemo(()=>{var l;return r?T4(r)&&t.baseComponents?_X({},(l=t.baseComponents)==null?void 0:l[r.baseComponent],r):r:null},[r,t.baseComponents]),s=wX(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?_.jsxs(yi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&_.jsx(yi.Section,{bg:"gray.3",p:"md",children:_.jsxs(Je,{c:"gray.9",children:[_.jsx(Je,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),_.jsx(iu,{text:o})]})}),_.jsx(yi.Section,{p:"md",children:_.jsx(O$,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):_.jsx(yi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:_.jsx(O$,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function ZLt(){const{showHelpText:e,config:t}=uf(u=>u),n=ap(),{toggleShowHelpText:r}=op(),[i,s]=I.useState(""),[o,a]=I.useState(!0);return I.useEffect(()=>{async function u(){const l=await xX(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),_.jsx(Ts,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?_.jsx(iu,{text:i}):_.jsx(ib,{path:t.uiConfig.helpTextPath})})}function e6t(){const{alertModal:e}=uf(o=>o),{setAlertModal:t}=op(),n=ap(),[r,i]=I.useState(e.show),s=I.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return I.useEffect(()=>i(e.show),[e.show]),_.jsx(Ts,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:_.jsxs(Ak,{color:"red",radius:"xs",title:"Alert",icon:_.jsx(WZe,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[_.jsx(Je,{my:"md",children:e.message}),_.jsx(Vs,{w:"100%",justify:"end",children:_.jsx(Nn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}function t6t(){const e=I.useRef([]),t=Fm(),n=t.uiConfig.windowEventDebounceTime??100,r=uf(d=>d.showStudyBrowser);I.useEffect(()=>{const d=Ld(E=>{e.current.push([Date.now(),"focus",E.target instanceof HTMLElement?E.target.tagName:""])},n,{maxWait:n}),h=Ld(E=>{e.current.push([Date.now(),"input",E.data??""])},n,{maxWait:n}),p=Ld(E=>{e.current.push([Date.now(),"keypress",E.key])},n,{maxWait:n}),m=Ld(E=>{e.current.push([Date.now(),"mousedown",[E.clientX,E.clientY]])},n,{maxWait:n}),g=Ld(E=>{e.current.push([Date.now(),"mouseup",[E.clientX,E.clientY]])},n,{maxWait:n}),y=Ld(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),v=Ld(E=>{e.current.push([Date.now(),"mousemove",[E.clientX,E.clientY]])},n,{maxWait:n}),b=Ld(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),w=Ld(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",y),window.addEventListener("mousemove",v),window.addEventListener("scroll",b),document.addEventListener("visibilitychange",w),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",y),window.removeEventListener("mousemove",v),window.removeEventListener("scroll",b),document.removeEventListener("visibilitychange",w)}},[]);const i=t.uiConfig.sidebarWidth??300,{storageEngine:s}=Is(),o=t_(),[a,u]=I.useState(!1),[l,c]=I.useState(!1);I.useEffect(()=>{(async()=>{if(s){const h=await s.getModes(o);u(h.studyNavigatorEnabled),c(h.dataCollectionEnabled)}})()},[s,o]);const f=I.useMemo(()=>a&&r,[a,r]);return _.jsx(VTe.Provider,{value:e,children:_.jsxs(yi,{padding:"md",header:{height:70},navbar:{width:i,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!f,mobile:!f}},children:[_.jsx(JLt,{}),_.jsx(XLt,{}),_.jsx(QLt,{studyNavigatorEnabled:a,dataCollectionEnabled:l}),_.jsx(ZLt,{}),_.jsx(e6t,{}),_.jsx(yi.Main,{children:_.jsx(DZe,{})})]})})}function n6t(e,t=!1){return typeof e=="number"?sme(e,t):sme(e.length,t).map(r=>r.map(i=>e[i]))}function sme(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function jOe(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=jOe(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function r6t(e,t){const n=M1(e);return jOe(n,t,"root")}function UOe(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&UOe(s,t,i,o)})}function i6t(e){const t=[];return UOe(e,t,"",0),t}function ome(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return n6t(i.sort(()=>.5-Math.random()),!0)}function s6t(e){const n=i6t(e.sequence).map(s=>({[s]:ome(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=r6t(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=ome(e,o))})}),i}var o6t={VITE_BASE_PATH:"/revisit/",VITE_FIREBASE_CONFIG:`
{
  apiKey: "AIzaSyDks0KPmUNFtOPDsOHFAuQY6XSMksNecWE",
  authDomain: "revisit-fb-db.firebaseapp.com",
  projectId: "revisit-fb-db",
  storageBucket: "revisit-fb-db.appspot.com",
  messagingSenderId: "329639127561",
  appId: "1:329639127561:web:346fc2d58229c9ba2ae6d8"
}
`,VITE_STORAGE_ENGINE:"firebase",VITE_RECAPTCHAV3TOKEN:"6LcoLeIpAAAAAFvL4FMjROebfEEYkWq4LyHHkA7O",BASE_URL:"/revisit/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};async function a6t(e){const t=await(await fetch(`${ip}${e}`)).text();return BLt(t)}async function C4(e,t){const n=t.configsList.find(r=>qxe(r)===e);if(n){const r=t.configs[n];return await a6t(`${r.path}`)}return null}async function u6t(e){const t={},n=e.configsList.filter(i=>o6t.VITE_CI==="true"?!0:!e.configs[i].test).map(async i=>C4(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function l6t({globalConfig:e}){const t=t_(),[n,r]=I.useState(null),i=e.configsList.includes(t);I.useEffect(()=>{C4(t,e).then(h=>{r(h)})},[e,t]);const[s,o]=I.useState([]),[a,u]=I.useState(null),{storageEngine:l}=Is(),[c]=HK();I.useEffect(()=>{async function h(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await s6t(n));const m=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,g=Object.fromEntries(c.entries()),y=await fetch("https://api.ipify.org?format=json").catch(x=>""),v=y instanceof Response?await y.json():{ip:""},b={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:v.ip},w=await l.initializeParticipantSession(t,g,n,b,m),E=await xlt(t,n,w.sequence,b,w.answers);u(E),o([{element:_.jsx(t6t,{}),children:[{path:"/",element:_.jsx(VH,{to:"0",replace:!0})},{path:"/:index",element:n.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx($i,{order:2,mb:8,children:"Error loading config"}),_.jsx(Oz,{issues:n.errors,type:"error"})]}):_.jsx(GLt,{})}]}])}h()},[l,n,t,c]);const f=Mxe(s);let d=null;return i?s.length===0?d=_.jsx(Gl,{visible:!0}):d=f&&a?_.jsx(zTe.Provider,{value:a,children:_.jsx(yut,{store:a.store,children:f})}):_.jsx(ib,{}):d=_.jsx(ib,{}),d}var ame={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zOe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},c6t=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},_ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(zOe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):c6t(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new f6t;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class f6t extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const d6t=function(e){const t=zOe(e);return _ee.encodeByteArray(t,!0)},_3=function(e){return d6t(e).replace(/\./g,"")},VOe=function(e){try{return _ee.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HOe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6t=()=>HOe().__FIREBASE_DEFAULTS__,p6t=()=>{if(typeof process>"u"||typeof ame>"u")return;const e=ame.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},m6t=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&VOe(e[1]);return t&&JSON.parse(t)},A4=()=>{try{return h6t()||p6t()||m6t()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},qOe=e=>{var t,n;return(n=(t=A4())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},g6t=e=>{const t=qOe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},WOe=()=>{var e;return(e=A4())===null||e===void 0?void 0:e.config},GOe=e=>{var t;return(t=A4())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y6t(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[_3(JSON.stringify(n)),_3(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Go(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function v6t(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Go())}function b6t(){var e;const t=(e=A4())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _6t(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function w6t(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function E6t(){const e=Go();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function x6t(){return!b6t()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wee(){try{return typeof indexedDB=="object"}catch{return!1}}function S6t(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6t="FirebaseError";class hp extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=T6t,Object.setPrototypeOf(this,hp.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,GS.prototype.create)}}class GS{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?C6t(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new hp(i,a,r)}}function C6t(e,t){return e.replace(A6t,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const A6t=/\{\$([^}]+)}/g;function I6t(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function OI(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(ume(s)&&ume(o)){if(!OI(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ume(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function k6t(e,t){const n=new R6t(e,t);return n.subscribe.bind(n)}class R6t{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");N6t(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=F9),i.error===void 0&&(i.error=F9),i.complete===void 0&&(i.complete=F9);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function N6t(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function F9(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6t=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6t=1e3,O6t=2,$6t=4*60*60*1e3,M6t=.5;function L6t(e,t=P6t,n=O6t){const r=t*Math.pow(n,e),i=Math.round(M6t*r*(Math.random()-.5)*2);return Math.min($6t,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(e){return e&&e._delegate?e._delegate:e}class qh{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6t{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new PI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(j6t(t))try{this.getOrInitializeService({instanceIdentifier:Xv})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=Xv){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Xv){return this.instances.has(t)}getOptions(t=Xv){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:B6t(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Xv){return this.component?this.component.multipleInstances?t:Xv:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function B6t(e){return e===Xv?void 0:e}function j6t(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6t{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new F6t(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Kn||(Kn={}));const z6t={debug:Kn.DEBUG,verbose:Kn.VERBOSE,info:Kn.INFO,warn:Kn.WARN,error:Kn.ERROR,silent:Kn.SILENT},V6t=Kn.INFO,H6t={[Kn.DEBUG]:"log",[Kn.VERBOSE]:"log",[Kn.INFO]:"info",[Kn.WARN]:"warn",[Kn.ERROR]:"error"},q6t=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=H6t[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class I4{constructor(t){this.name=t,this._logLevel=V6t,this._logHandler=q6t,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Kn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?z6t[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Kn.DEBUG,...t),this._logHandler(this,Kn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Kn.VERBOSE,...t),this._logHandler(this,Kn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Kn.INFO,...t),this._logHandler(this,Kn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Kn.WARN,...t),this._logHandler(this,Kn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Kn.ERROR,...t),this._logHandler(this,Kn.ERROR,...t)}}const W6t=(e,t)=>t.some(n=>e instanceof n);let lme,cme;function G6t(){return lme||(lme=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Y6t(){return cme||(cme=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const YOe=new WeakMap,qH=new WeakMap,KOe=new WeakMap,B9=new WeakMap,Eee=new WeakMap;function K6t(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(U0(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&YOe.set(n,e)}).catch(()=>{}),Eee.set(t,e),t}function X6t(e){if(qH.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});qH.set(e,t)}let WH={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return qH.get(e);if(t==="objectStoreNames")return e.objectStoreNames||KOe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return U0(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Q6t(e){WH=e(WH)}function J6t(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(j9(this),t,...n);return KOe.set(r,t.sort?t.sort():[t]),U0(r)}:Y6t().includes(e)?function(...t){return e.apply(j9(this),t),U0(YOe.get(this))}:function(...t){return U0(e.apply(j9(this),t))}}function Z6t(e){return typeof e=="function"?J6t(e):(e instanceof IDBTransaction&&X6t(e),W6t(e,G6t())?new Proxy(e,WH):e)}function U0(e){if(e instanceof IDBRequest)return K6t(e);if(B9.has(e))return B9.get(e);const t=Z6t(e);return t!==e&&(B9.set(e,t),Eee.set(t,e)),t}const j9=e=>Eee.get(e);function eFt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=U0(o);return r&&o.addEventListener("upgradeneeded",u=>{r(U0(o.result),u.oldVersion,u.newVersion,U0(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const tFt=["get","getKey","getAll","getAllKeys","count"],nFt=["put","add","delete","clear"],U9=new Map;function fme(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(U9.get(t))return U9.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=nFt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||tFt.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return U9.set(t,s),s}Q6t(e=>({...e,get:(t,n,r)=>fme(t,n)||e.get(t,n,r),has:(t,n)=>!!fme(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rFt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(iFt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function iFt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const GH="@firebase/app",dme="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb=new I4("@firebase/app"),sFt="@firebase/app-compat",oFt="@firebase/analytics-compat",aFt="@firebase/analytics",uFt="@firebase/app-check-compat",lFt="@firebase/app-check",cFt="@firebase/auth",fFt="@firebase/auth-compat",dFt="@firebase/database",hFt="@firebase/database-compat",pFt="@firebase/functions",mFt="@firebase/functions-compat",gFt="@firebase/installations",yFt="@firebase/installations-compat",vFt="@firebase/messaging",bFt="@firebase/messaging-compat",_Ft="@firebase/performance",wFt="@firebase/performance-compat",EFt="@firebase/remote-config",xFt="@firebase/remote-config-compat",SFt="@firebase/storage",TFt="@firebase/storage-compat",CFt="@firebase/firestore",AFt="@firebase/vertexai-preview",IFt="@firebase/firestore-compat",kFt="firebase",RFt="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YH="[DEFAULT]",NFt={[GH]:"fire-core",[sFt]:"fire-core-compat",[aFt]:"fire-analytics",[oFt]:"fire-analytics-compat",[lFt]:"fire-app-check",[uFt]:"fire-app-check-compat",[cFt]:"fire-auth",[fFt]:"fire-auth-compat",[dFt]:"fire-rtdb",[hFt]:"fire-rtdb-compat",[pFt]:"fire-fn",[mFt]:"fire-fn-compat",[gFt]:"fire-iid",[yFt]:"fire-iid-compat",[vFt]:"fire-fcm",[bFt]:"fire-fcm-compat",[_Ft]:"fire-perf",[wFt]:"fire-perf-compat",[EFt]:"fire-rc",[xFt]:"fire-rc-compat",[SFt]:"fire-gcs",[TFt]:"fire-gcs-compat",[CFt]:"fire-fst",[IFt]:"fire-fst-compat",[AFt]:"fire-vertex","fire-js":"fire-js",[kFt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3=new Map,DFt=new Map,KH=new Map;function hme(e,t){try{e.container.addComponent(t)}catch(n){bb.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Xm(e){const t=e.name;if(KH.has(t))return bb.debug(`There were multiple attempts to register component ${t}.`),!1;KH.set(t,e);for(const n of w3.values())hme(n,e);for(const n of DFt.values())hme(n,e);return!0}function YS(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function mh(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PFt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},z0=new GS("app","Firebase",PFt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OFt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw z0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_=RFt;function XOe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:YH,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw z0.create("bad-app-name",{appName:String(i)});if(n||(n=WOe()),!n)throw z0.create("no-options");const s=w3.get(i);if(s){if(OI(n,s.options)&&OI(r,s.config))return s;throw z0.create("duplicate-app",{appName:i})}const o=new U6t(i);for(const u of KH.values())o.addComponent(u);const a=new OFt(n,r,o);return w3.set(i,a),a}function xee(e=YH){const t=w3.get(e);if(!t&&e===YH&&WOe())return XOe();if(!t)throw z0.create("no-app",{appName:e});return t}function ed(e,t,n){var r;let i=(r=NFt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),bb.warn(a.join(" "));return}Xm(new qh(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Ft="firebase-heartbeat-database",MFt=1,$I="firebase-heartbeat-store";let z9=null;function QOe(){return z9||(z9=eFt($Ft,MFt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore($I)}catch(n){console.warn(n)}}}}).catch(e=>{throw z0.create("idb-open",{originalErrorMessage:e.message})})),z9}async function LFt(e){try{const n=(await QOe()).transaction($I),r=await n.objectStore($I).get(JOe(e));return await n.done,r}catch(t){if(t instanceof hp)bb.warn(t.message);else{const n=z0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});bb.warn(n.message)}}}async function pme(e,t){try{const r=(await QOe()).transaction($I,"readwrite");await r.objectStore($I).put(t,JOe(e)),await r.done}catch(n){if(n instanceof hp)bb.warn(n.message);else{const r=z0.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});bb.warn(r.message)}}}function JOe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FFt=1024,BFt=30*24*60*60*1e3;class jFt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new zFt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=mme();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=BFt}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=mme(),{heartbeatsToSend:r,unsentEntries:i}=UFt(this._heartbeatsCache.heartbeats),s=_3(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function mme(){return new Date().toISOString().substring(0,10)}function UFt(e,t=FFt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),gme(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),gme(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class zFt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wee()?S6t().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await LFt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return pme(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return pme(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function gme(e){return _3(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VFt(e){Xm(new qh("platform-logger",t=>new rFt(t),"PRIVATE")),Xm(new qh("heartbeat",t=>new jFt(t),"PRIVATE")),ed(GH,dme,e),ed(GH,dme,"esm2017"),ed("fire-js","")}VFt("");function ZOe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HFt=ZOe,e$e=new GS("auth","Firebase",ZOe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3=new I4("@firebase/auth");function qFt(e,...t){E3.logLevel<=Kn.WARN&&E3.warn(`Auth (${a_}): ${e}`,...t)}function lO(e,...t){E3.logLevel<=Kn.ERROR&&E3.error(`Auth (${a_}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(e,...t){throw Tee(e,...t)}function td(e,...t){return Tee(e,...t)}function See(e,t,n){const r=Object.assign(Object.assign({},HFt()),{[t]:n});return new GS("auth","Firebase",r).create(t,{appName:e.name})}function V0(e){return See(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function WFt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Wh(e,"argument-error"),See(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Tee(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return e$e.create(e,...t)}function un(e,t,...n){if(!e)throw Tee(t,...n)}function um(e){const t="INTERNAL ASSERTION FAILED: "+e;throw lO(t),new Error(t)}function Qm(e,t){e||um(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XH(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function GFt(){return yme()==="http:"||yme()==="https:"}function yme(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YFt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(GFt()||_6t()||"connection"in navigator)?navigator.onLine:!0}function KFt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(t,n){this.shortDelay=t,this.longDelay=n,Qm(n>t,"Short delay should be less than long delay!"),this.isMobile=v6t()||w6t()}get(){return YFt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cee(e,t){Qm(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t$e{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;um("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;um("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;um("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XFt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QFt=new yR(3e4,6e4);function k4(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function KS(e,t,n,r,i={}){return n$e(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=gR(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),t$e.fetch()(i$e(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function n$e(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},XFt),t);try{const i=new JFt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw MD(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw MD(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw MD(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw MD(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw See(e,c,l);Wh(e,c)}}catch(i){if(i instanceof hp)throw i;Wh(e,"network-request-failed",{message:String(i)})}}async function r$e(e,t,n,r,i={}){const s=await KS(e,t,n,r,i);return"mfaPendingCredential"in s&&Wh(e,"multi-factor-auth-required",{_serverResponse:s}),s}function i$e(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?Cee(e.config,i):`${e.config.apiScheme}://${i}`}class JFt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(td(this.auth,"network-request-failed")),QFt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function MD(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=td(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZFt(e,t){return KS(e,"POST","/v1/accounts:delete",t)}async function s$e(e,t){return KS(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function e4t(e,t=!1){const n=li(e),r=await n.getIdToken(t),i=Aee(r);un(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:i2(V9(i.auth_time)),issuedAtTime:i2(V9(i.iat)),expirationTime:i2(V9(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function V9(e){return Number(e)*1e3}function Aee(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return lO("JWT malformed, contained fewer than 3 sections"),null;try{const i=VOe(n);return i?JSON.parse(i):(lO("Failed to decode base64 JWT payload"),null)}catch(i){return lO("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function vme(e){const t=Aee(e);return un(t,"internal-error"),un(typeof t.exp<"u","internal-error"),un(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MI(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof hp&&t4t(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function t4t({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4t{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QH{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=i2(this.lastLoginAt),this.creationTime=i2(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x3(e){var t;const n=e.auth,r=await e.getIdToken(),i=await MI(e,s$e(n,{idToken:r}));un(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?o$e(s.providerUserInfo):[],a=i4t(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new QH(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function r4t(e){const t=li(e);await x3(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function i4t(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function o$e(e){return e.map(t=>{var{providerId:n}=t,r=Ek(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s4t(e,t){const n=await n$e(e,{},async()=>{const r=gR({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=i$e(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",t$e.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function o4t(e,t){return KS(e,"POST","/v2/accounts:revokeToken",k4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){un(t.idToken,"internal-error"),un(typeof t.idToken<"u","internal-error"),un(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):vme(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){un(t.length!==0,"internal-error");const n=vme(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(un(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await s4t(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new bE;return r&&(un(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(un(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(un(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new bE,this.toJSON())}_performRefresh(){return um("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(e,t){un(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class lm{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=Ek(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new n4t(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new QH(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await MI(this,this.stsTokenManager.getToken(this.auth,t));return un(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return e4t(this,t)}reload(){return r4t(this)}_assign(t){this!==t&&(un(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new lm(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){un(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await x3(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mh(this.auth.app))return Promise.reject(V0(this.auth));const t=await this.getIdToken();return await MI(this,ZFt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:w,isAnonymous:E,providerData:x,stsTokenManager:T}=n;un(b&&T,t,"internal-error");const C=bE.fromJSON(this.name,T);un(typeof b=="string",t,"internal-error"),Mg(f,t.name),Mg(d,t.name),un(typeof w=="boolean",t,"internal-error"),un(typeof E=="boolean",t,"internal-error"),Mg(h,t.name),Mg(p,t.name),Mg(m,t.name),Mg(g,t.name),Mg(y,t.name),Mg(v,t.name);const A=new lm({uid:b,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:C,createdAt:y,lastLoginAt:v});return x&&Array.isArray(x)&&(A.providerData=x.map(k=>Object.assign({},k))),g&&(A._redirectEventId=g),A}static async _fromIdTokenResponse(t,n,r=!1){const i=new bE;i.updateFromServerResponse(n);const s=new lm({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await x3(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];un(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?o$e(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new bE;a.updateFromIdToken(r);const u=new lm({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new QH(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bme=new Map;function cm(e){Qm(e instanceof Function,"Expected a class definition");let t=bme.get(e);return t?(Qm(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,bme.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a$e{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}a$e.type="NONE";const _me=a$e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cO(e,t,n){return`firebase:${e}:${t}:${n}`}class _E{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=cO(this.userKey,i.apiKey,s),this.fullPersistenceKey=cO("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?lm._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new _E(cm(_me),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||cm(_me);const o=cO(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=lm._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new _E(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new _E(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wme(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(c$e(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(u$e(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(d$e(t))return"Blackberry";if(h$e(t))return"Webos";if(Iee(t))return"Safari";if((t.includes("chrome/")||l$e(t))&&!t.includes("edge/"))return"Chrome";if(f$e(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function u$e(e=Go()){return/firefox\//i.test(e)}function Iee(e=Go()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function l$e(e=Go()){return/crios\//i.test(e)}function c$e(e=Go()){return/iemobile/i.test(e)}function f$e(e=Go()){return/android/i.test(e)}function d$e(e=Go()){return/blackberry/i.test(e)}function h$e(e=Go()){return/webos/i.test(e)}function R4(e=Go()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function a4t(e=Go()){var t;return R4(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function u4t(){return E6t()&&document.documentMode===10}function p$e(e=Go()){return R4(e)||f$e(e)||h$e(e)||d$e(e)||/windows phone/i.test(e)||c$e(e)}function l4t(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m$e(e,t=[]){let n;switch(e){case"Browser":n=wme(Go());break;case"Worker":n=`${wme(Go())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${a_}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4t{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f4t(e,t={}){return KS(e,"GET","/v2/passwordPolicy",k4(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4t=6;class h4t{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:d4t,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4t{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Eme(this),this.idTokenSubscription=new Eme(this),this.beforeStateQueue=new c4t(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=e$e,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=cm(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await _E.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await s$e(this,{idToken:t}),r=await lm._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(mh(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return un(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await x3(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=KFt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(mh(this.app))return Promise.reject(V0(this));const n=t?li(t):null;return n&&un(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&un(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return mh(this.app)?Promise.reject(V0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return mh(this.app)?Promise.reject(V0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(cm(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await f4t(this),n=new h4t(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new GS("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await o4t(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&cm(t)||this._popupRedirectResolver;un(n,this,"argument-error"),this.redirectPersistenceManager=await _E.create(this,[cm(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(un(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return un(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=m$e(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&qFt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function vR(e){return li(e)}class Eme{constructor(t){this.auth=t,this.observer=null,this.addObserver=k6t(n=>this.observer=n)}get next(){return un(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kee={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function m4t(e){kee=e}function g4t(e){return kee.loadJS(e)}function y4t(){return kee.gapiScript}function v4t(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b4t(e,t){const n=YS(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(OI(s,t??{}))return i;Wh(i,"already-initialized")}return n.initialize({options:t})}function _4t(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(cm);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function w4t(e,t,n){const r=vR(e);un(r._canInitEmulator,r,"emulator-config-failed"),un(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=g$e(t),{host:o,port:a}=E4t(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),x4t()}function g$e(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function E4t(e){const t=g$e(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:xme(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:xme(o)}}}function xme(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function x4t(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y$e{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return um("not implemented")}_getIdTokenResponse(t){return um("not implemented")}_linkToIdToken(t,n){return um("not implemented")}_getReauthenticationResolver(t){return um("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wE(e,t){return r$e(e,"POST","/v1/accounts:signInWithIdp",k4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4t="http://localhost";class _b extends y$e{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new _b(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Wh("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=Ek(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new _b(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return wE(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,wE(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,wE(t,n)}buildRequest(){const t={requestUri:S4t,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=gR(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ree{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR extends Ree{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0 extends bR{constructor(){super("facebook.com")}static credential(t){return _b._fromParams({providerId:i0.PROVIDER_ID,signInMethod:i0.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return i0.credentialFromTaggedObject(t)}static credentialFromError(t){return i0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return i0.credential(t.oauthAccessToken)}catch{return null}}}i0.FACEBOOK_SIGN_IN_METHOD="facebook.com";i0.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em extends bR{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return _b._fromParams({providerId:em.PROVIDER_ID,signInMethod:em.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return em.credentialFromTaggedObject(t)}static credentialFromError(t){return em.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return em.credential(n,r)}catch{return null}}}em.GOOGLE_SIGN_IN_METHOD="google.com";em.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0 extends bR{constructor(){super("github.com")}static credential(t){return _b._fromParams({providerId:s0.PROVIDER_ID,signInMethod:s0.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return s0.credentialFromTaggedObject(t)}static credentialFromError(t){return s0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return s0.credential(t.oauthAccessToken)}catch{return null}}}s0.GITHUB_SIGN_IN_METHOD="github.com";s0.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0 extends bR{constructor(){super("twitter.com")}static credential(t,n){return _b._fromParams({providerId:o0.PROVIDER_ID,signInMethod:o0.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return o0.credentialFromTaggedObject(t)}static credentialFromError(t){return o0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return o0.credential(n,r)}catch{return null}}}o0.TWITTER_SIGN_IN_METHOD="twitter.com";o0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T4t(e,t){return r$e(e,"POST","/v1/accounts:signUp",k4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await lm._fromIdTokenResponse(t,r,i),o=Sme(r);return new Ey({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=Sme(r);return new Ey({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function Sme(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C4t(e){var t;if(mh(e.app))return Promise.reject(V0(e));const n=vR(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new Ey({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await T4t(n,{returnSecureToken:!0}),i=await Ey._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3 extends hp{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,S3.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new S3(t,n,r,i)}}function v$e(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?S3._fromErrorAndOperation(e,s,t,r):s})}async function A4t(e,t,n=!1){const r=await MI(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ey._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I4t(e,t,n=!1){const{auth:r}=e;if(mh(r.app))return Promise.reject(V0(r));const i="reauthenticate";try{const s=await MI(e,v$e(r,i,t,e),n);un(s.idToken,r,"internal-error");const o=Aee(s.idToken);un(o,r,"internal-error");const{sub:a}=o;return un(e.uid===a,r,"user-mismatch"),Ey._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Wh(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k4t(e,t,n=!1){if(mh(e.app))return Promise.reject(V0(e));const r="signIn",i=await v$e(e,r,t),s=await Ey._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function R4t(e,t,n,r){return li(e).onIdTokenChanged(t,n,r)}function N4t(e,t,n){return li(e).beforeAuthStateChanged(t,n)}function D4t(e,t,n,r){return li(e).onAuthStateChanged(t,n,r)}function P4t(e){return li(e).signOut()}const T3="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b$e{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(T3,"1"),this.storage.removeItem(T3),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4t(){const e=Go();return Iee(e)||R4(e)}const $4t=1e3,M4t=10;class _$e extends b$e{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=O4t()&&l4t(),this.fallbackToPolling=p$e(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);u4t()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,M4t):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},$4t)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}_$e.type="LOCAL";const L4t=_$e;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w$e extends b$e{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}w$e.type="SESSION";const E$e=w$e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4t(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new N4(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await F4t(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}N4.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nee(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4t{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=Nee("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(){return window}function j4t(e){Ih().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x$e(){return typeof Ih().WorkerGlobalScope<"u"&&typeof Ih().importScripts=="function"}async function U4t(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function z4t(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function V4t(){return x$e()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S$e="firebaseLocalStorageDb",H4t=1,C3="firebaseLocalStorage",T$e="fbase_key";class _R{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function D4(e,t){return e.transaction([C3],t?"readwrite":"readonly").objectStore(C3)}function q4t(){const e=indexedDB.deleteDatabase(S$e);return new _R(e).toPromise()}function JH(){const e=indexedDB.open(S$e,H4t);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(C3,{keyPath:T$e})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(C3)?t(r):(r.close(),await q4t(),t(await JH()))})})}async function Tme(e,t,n){const r=D4(e,!0).put({[T$e]:t,value:n});return new _R(r).toPromise()}async function W4t(e,t){const n=D4(e,!1).get(t),r=await new _R(n).toPromise();return r===void 0?null:r.value}function Cme(e,t){const n=D4(e,!0).delete(t);return new _R(n).toPromise()}const G4t=800,Y4t=3;class C$e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await JH(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>Y4t)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return x$e()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=N4._getInstance(V4t()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await U4t(),!this.activeServiceWorker)return;this.sender=new B4t(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||z4t()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await JH();return await Tme(t,T3,"1"),await Cme(t,T3),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Tme(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>W4t(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Cme(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=D4(i,!1).getAll();return new _R(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),G4t)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}C$e.type="LOCAL";const K4t=C$e;new yR(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A$e(e,t){return t?cm(t):(un(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dee extends y$e{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return wE(t,this._buildIdpRequest())}_linkToIdToken(t,n){return wE(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return wE(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function X4t(e){return k4t(e.auth,new Dee(e),e.bypassAuthState)}function Q4t(e){const{auth:t,user:n}=e;return un(n,t,"internal-error"),I4t(n,new Dee(e),e.bypassAuthState)}async function J4t(e){const{auth:t,user:n}=e;return un(n,t,"internal-error"),A4t(n,new Dee(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I$e{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return X4t;case"linkViaPopup":case"linkViaRedirect":return J4t;case"reauthViaPopup":case"reauthViaRedirect":return Q4t;default:Wh(this.auth,"internal-error")}}resolve(t){Qm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Qm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4t=new yR(2e3,1e4);async function e5t(e,t,n){if(mh(e.app))return Promise.reject(td(e,"operation-not-supported-in-this-environment"));const r=vR(e);WFt(e,t,Ree);const i=A$e(r,n);return new I1(r,"signInViaPopup",t,i).executeNotNull()}class I1 extends I$e{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,I1.currentPopupAction&&I1.currentPopupAction.cancel(),I1.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return un(t,this.auth,"internal-error"),t}async onExecution(){Qm(this.filter.length===1,"Popup operations only handle one event");const t=Nee();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(td(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(td(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,I1.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(td(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Z4t.get())};t()}}I1.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t5t="pendingRedirect",fO=new Map;class n5t extends I$e{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=fO.get(this.auth._key());if(!t){try{const r=await r5t(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}fO.set(this.auth._key(),t)}return this.bypassAuthState||fO.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function r5t(e,t){const n=o5t(t),r=s5t(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function i5t(e,t){fO.set(e._key(),t)}function s5t(e){return cm(e._redirectPersistence)}function o5t(e){return cO(t5t,e.config.apiKey,e.name)}async function a5t(e,t,n=!1){if(mh(e.app))return Promise.reject(V0(e));const r=vR(e),i=A$e(r,t),o=await new n5t(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u5t=10*60*1e3;class l5t{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!c5t(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!k$e(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(td(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=u5t&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ame(t))}saveEventToCache(t){this.cachedEventUids.add(Ame(t)),this.lastProcessedEventTime=Date.now()}}function Ame(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function k$e({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function c5t(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return k$e(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f5t(e,t={}){return KS(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d5t=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,h5t=/^https?/;async function p5t(e){if(e.config.emulator)return;const{authorizedDomains:t}=await f5t(e);for(const n of t)try{if(m5t(n))return}catch{}Wh(e,"unauthorized-domain")}function m5t(e){const t=XH(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!h5t.test(n))return!1;if(d5t.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g5t=new yR(3e4,6e4);function Ime(){const e=Ih().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function y5t(e){return new Promise((t,n)=>{var r,i,s;function o(){Ime(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ime(),n(td(e,"network-request-failed"))},timeout:g5t.get()})}if(!((i=(r=Ih().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=Ih().gapi)===null||s===void 0)&&s.load)o();else{const a=v4t("iframefcb");return Ih()[a]=()=>{gapi.load?o():n(td(e,"network-request-failed"))},g4t(`${y4t()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw dO=null,t})}let dO=null;function v5t(e){return dO=dO||y5t(e),dO}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b5t=new yR(5e3,15e3),_5t="__/auth/iframe",w5t="emulator/auth/iframe",E5t={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},x5t=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function S5t(e){const t=e.config;un(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Cee(t,w5t):`https://${e.config.authDomain}/${_5t}`,r={apiKey:t.apiKey,appName:e.name,v:a_},i=x5t.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${gR(r).slice(1)}`}async function T5t(e){const t=await v5t(e),n=Ih().gapi;return un(n,e,"internal-error"),t.open({where:document.body,url:S5t(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:E5t,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=td(e,"network-request-failed"),a=Ih().setTimeout(()=>{s(o)},b5t.get());function u(){Ih().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5t={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},A5t=500,I5t=600,k5t="_blank",R5t="http://localhost";class kme{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function N5t(e,t,n,r=A5t,i=I5t){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},C5t),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Go().toLowerCase();n&&(a=l$e(l)?k5t:n),u$e(l)&&(t=t||R5t,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(a4t(l)&&a!=="_self")return D5t(t||"",a),new kme(null);const f=window.open(t||"",a,c);un(f,e,"popup-blocked");try{f.focus()}catch{}return new kme(f)}function D5t(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5t="__/auth/handler",O5t="emulator/auth/handler",$5t=encodeURIComponent("fac");async function Rme(e,t,n,r,i,s){un(e.config.authDomain,e,"auth-domain-config-required"),un(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:a_,eventId:i};if(t instanceof Ree){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",I6t(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof bR){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${$5t}=${encodeURIComponent(u)}`:"";return`${M5t(e)}?${gR(a).slice(1)}${l}`}function M5t({config:e}){return e.emulator?Cee(e,O5t):`https://${e.authDomain}/${P5t}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9="webStorageSupport";class L5t{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=E$e,this._completeRedirectFn=a5t,this._overrideRedirectResult=i5t}async _openPopup(t,n,r,i){var s;Qm((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Rme(t,n,r,XH(),i);return N5t(t,o,Nee())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await Rme(t,n,r,XH(),i);return j4t(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Qm(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await T5t(t),r=new l5t(t);return n.register("authEvent",i=>(un(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(H9,{type:H9},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[H9];o!==void 0&&n(!!o),Wh(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=p5t(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return p$e()||Iee()||R4()}}const R$e=L5t;var Nme="@firebase/auth",Dme="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5t{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){un(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B5t(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function j5t(e){Xm(new qh("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;un(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:m$e(e)},l=new p4t(r,i,s,u);return _4t(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Xm(new qh("auth-internal",t=>{const n=vR(t.getProvider("auth").getImmediate());return(r=>new F5t(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ed(Nme,Dme,B5t(e)),ed(Nme,Dme,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U5t=5*60,z5t=GOe("authIdTokenMaxAge")||U5t;let Pme=null;const V5t=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>z5t)return;const i=n==null?void 0:n.token;Pme!==i&&(Pme=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function A3(e=xee()){const t=YS(e,"auth");if(t.isInitialized())return t.getImmediate();const n=b4t(e,{popupRedirectResolver:R$e,persistence:[K4t,L4t,E$e]}),r=GOe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=V5t(s.toString());N4t(n,o,()=>o(n.currentUser)),R4t(n,a=>o(a))}}const i=qOe("auth");return i&&w4t(n,`http://${i}`),n}function H5t(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}m4t({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=td("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",H5t().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});j5t("Browser");var q5t="firebase",W5t="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ed(q5t,W5t,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$e="firebasestorage.googleapis.com",D$e="storageBucket",G5t=2*60*1e3,Y5t=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends hp{constructor(t,n,r=0){super(q9(t),`Firebase Storage: ${n} (${q9(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ns.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return q9(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ts;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ts||(ts={}));function q9(e){return"storage/"+e}function Pee(){const e="An unknown error occurred, please check the error payload for server response.";return new ns(ts.UNKNOWN,e)}function K5t(e){return new ns(ts.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function X5t(e){return new ns(ts.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Q5t(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ns(ts.UNAUTHENTICATED,e)}function J5t(){return new ns(ts.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Z5t(e){return new ns(ts.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function eBt(){return new ns(ts.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function tBt(){return new ns(ts.CANCELED,"User canceled the upload/download.")}function nBt(e){return new ns(ts.INVALID_URL,"Invalid URL '"+e+"'.")}function rBt(e){return new ns(ts.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function iBt(){return new ns(ts.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+D$e+"' property when initializing the app?")}function sBt(){return new ns(ts.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function oBt(){return new ns(ts.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function aBt(e){return new ns(ts.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ZH(e){return new ns(ts.INVALID_ARGUMENT,e)}function P$e(){return new ns(ts.APP_DELETED,"The Firebase app was deleted.")}function uBt(e){return new ns(ts.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function s2(e,t){return new ns(ts.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function rC(e){throw new ns(ts.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Za.makeFromUrl(t,n)}catch{return new Za(t,"")}if(r.path==="")return r;throw rBt(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===N$e?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),b=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<b.length;w++){const E=b[w],x=E.regex.exec(t);if(x){const T=x[E.indices.bucket];let C=x[E.indices.path];C||(C=""),r=new Za(T,C),E.postModify(r);break}}if(r==null)throw nBt(t);return r}}class lBt{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cBt(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function fBt(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dBt(e){return e!==void 0}function hBt(e){return typeof e=="object"&&!Array.isArray(e)}function Oee(e){return typeof e=="string"||e instanceof String}function Ome(e){return $ee()&&e instanceof Blob}function $ee(){return typeof Blob<"u"}function eq(e,t,n,r){if(r<t)throw ZH(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw ZH(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function O$e(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var j1;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(j1||(j1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pBt(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mBt{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new LD(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===j1.NO_ERROR,u=s.getStatus();if(!a||pBt(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===j1.ABORT;r(!1,new LD(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new LD(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());dBt(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=Pee();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?P$e():tBt();o(u)}else{const u=eBt();o(u)}};this.canceled_?n(!1,new LD(!1,null,!0)):this.backoffId_=cBt(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&fBt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class LD{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function gBt(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function yBt(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function vBt(e,t){t&&(e["X-Firebase-GMPID"]=t)}function bBt(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function _Bt(e,t,n,r,i,s,o=!0){const a=O$e(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return vBt(l,t),gBt(l,n),yBt(l,s),bBt(l,r),new mBt(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wBt(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function EBt(...e){const t=wBt();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if($ee())return new Blob(e);throw new ns(ts.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function xBt(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SBt(e){if(typeof atob>"u")throw aBt("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class W9{constructor(t,n){this.data=t,this.contentType=n||null}}function TBt(e,t){switch(e){case gh.RAW:return new W9($$e(t));case gh.BASE64:case gh.BASE64URL:return new W9(M$e(e,t));case gh.DATA_URL:return new W9(ABt(t),IBt(t))}throw Pee()}function $$e(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function CBt(e){let t;try{t=decodeURIComponent(e)}catch{throw s2(gh.DATA_URL,"Malformed data URL.")}return $$e(t)}function M$e(e,t){switch(e){case gh.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw s2(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case gh.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw s2(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=SBt(t)}catch(i){throw i.message.includes("polyfill")?i:s2(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class L$e{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw s2(gh.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=kBt(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function ABt(e){const t=new L$e(e);return t.base64?M$e(gh.BASE64,t.rest):CBt(t.rest)}function IBt(e){return new L$e(e).contentType}function kBt(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(t,n){let r=0,i="";Ome(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(Ome(this.data_)){const r=this.data_,i=xBt(r,t,n);return i===null?null:new a0(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new a0(r,!0)}}static getBlob(...t){if($ee()){const n=t.map(r=>r instanceof a0?r.data_:r);return new a0(EBt.apply(null,n))}else{const n=t.map(o=>Oee(o)?TBt(gh.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new a0(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mee(e){let t;try{t=JSON.parse(e)}catch{return null}return hBt(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RBt(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function NBt(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function F$e(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DBt(e,t){return t}class Ua{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||DBt}}let FD=null;function PBt(e){return!Oee(e)||e.length<2?e:F$e(e)}function B$e(){if(FD)return FD;const e=[];e.push(new Ua("bucket")),e.push(new Ua("generation")),e.push(new Ua("metageneration")),e.push(new Ua("name","fullPath",!0));function t(s,o){return PBt(o)}const n=new Ua("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Ua("size");return i.xform=r,e.push(i),e.push(new Ua("timeCreated")),e.push(new Ua("updated")),e.push(new Ua("md5Hash",null,!0)),e.push(new Ua("cacheControl",null,!0)),e.push(new Ua("contentDisposition",null,!0)),e.push(new Ua("contentEncoding",null,!0)),e.push(new Ua("contentLanguage",null,!0)),e.push(new Ua("contentType",null,!0)),e.push(new Ua("metadata","customMetadata",!0)),FD=e,FD}function OBt(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new Za(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function $Bt(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return OBt(r,e),r}function j$e(e,t,n){const r=Mee(t);return r===null?null:$Bt(e,r,n)}function MBt(e,t,n,r){const i=Mee(t);if(i===null||!Oee(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=wR(d,n,r),p=O$e({alt:"media",token:l});return h+p})[0]}function LBt(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $me="prefixes",Mme="items";function FBt(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[$me])for(const i of n[$me]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new Za(t,s));r.prefixes.push(o)}if(n[Mme])for(const i of n[Mme]){const s=e._makeStorageReference(new Za(t,i.name));r.items.push(s)}return r}function BBt(e,t,n){const r=Mee(n);return r===null?null:FBt(e,t,r)}class P4{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lee(e){if(!e)throw Pee()}function jBt(e,t){function n(r,i){const s=j$e(e,i,t);return Lee(s!==null),s}return n}function UBt(e,t){function n(r,i){const s=BBt(e,t,i);return Lee(s!==null),s}return n}function zBt(e,t){function n(r,i){const s=j$e(e,i,t);return Lee(s!==null),MBt(s,i,e.host,e._protocol)}return n}function Fee(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=J5t():i=Q5t():n.getStatus()===402?i=X5t(e.bucket):n.getStatus()===403?i=Z5t(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function U$e(e){const t=Fee(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=K5t(e.path)),s.serverResponse=i.serverResponse,s}return n}function VBt(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=wR(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new P4(a,u,UBt(e,t.bucket),l);return c.urlParams=s,c.errorHandler=Fee(t),c}function HBt(e,t,n){const r=t.fullServerUrl(),i=wR(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new P4(i,s,zBt(e,n),o);return a.errorHandler=U$e(t),a}function qBt(e,t){const n=t.fullServerUrl(),r=wR(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new P4(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=U$e(t),a}function WBt(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function GBt(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=WBt(null,t)),r}function YBt(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let w=0;w<2;w++)b=b+Math.random().toString().slice(2);return b}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=GBt(t,r,i),c=LBt(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=a0.getBlob(f,r,d);if(h===null)throw sBt();const p={name:l.fullPath},m=wR(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new P4(m,g,jBt(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=Fee(t),v}class KBt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=j1.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=j1.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=j1.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw rC("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw rC("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw rC("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw rC("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw rC("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class XBt extends KBt{initXhr(){this.xhr_.responseType="text"}}function O4(){return new XBt}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(t,n){this._service=t,n instanceof Za?this._location=n:this._location=Za.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new wb(t,n)}get root(){const t=new Za(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return F$e(this._location.path)}get storage(){return this._service}get parent(){const t=RBt(this._location.path);if(t===null)return null;const n=new Za(this._location.bucket,t);return new wb(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw uBt(t)}}function QBt(e,t,n){e._throwIfRoot("uploadBytes");const r=YBt(e.storage,e._location,B$e(),new a0(t,!0),n);return e.storage.makeRequestWithTokens(r,O4).then(i=>({metadata:i,ref:e}))}function JBt(e){const t={prefixes:[],items:[]};return z$e(e,t).then(()=>t)}async function z$e(e,t,n){const i=await ZBt(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await z$e(e,t,i.nextPageToken)}function ZBt(e,t){t!=null&&typeof t.maxResults=="number"&&eq("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=VBt(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,O4)}function ejt(e){e._throwIfRoot("getDownloadURL");const t=HBt(e.storage,e._location,B$e());return e.storage.makeRequestWithTokens(t,O4).then(n=>{if(n===null)throw oBt();return n})}function tjt(e){e._throwIfRoot("deleteObject");const t=qBt(e.storage,e._location);return e.storage.makeRequestWithTokens(t,O4)}function njt(e,t){const n=NBt(e._location.path,t),r=new Za(e._location.bucket,n);return new wb(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rjt(e){return/^[A-Za-z]+:\/\//.test(e)}function ijt(e,t){return new wb(e,t)}function V$e(e,t){if(e instanceof Bee){const n=e;if(n._bucket==null)throw iBt();const r=new wb(n,n._bucket);return t!=null?V$e(r,t):r}else return t!==void 0?njt(e,t):e}function sjt(e,t){if(t&&rjt(t)){if(e instanceof Bee)return ijt(e,t);throw ZH("To use ref(service, url), the first argument must be a Storage instance.")}else return V$e(e,t)}function Lme(e,t){const n=t==null?void 0:t[D$e];return n==null?null:Za.makeFromBucketSpec(n,e)}function ojt(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:y6t(i,e.app.options.projectId))}class Bee{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=N$e,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=G5t,this._maxUploadRetryTime=Y5t,this._requests=new Set,i!=null?this._bucket=Za.makeFromBucketSpec(i,this._host):this._bucket=Lme(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Za.makeFromBucketSpec(this._url,t):this._bucket=Lme(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){eq("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){eq("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new wb(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new lBt(P$e());{const o=_Bt(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const Fme="@firebase/storage",Bme="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H$e="storage";function G9(e,t,n){return e=li(e),QBt(e,t,n)}function iC(e){return e=li(e),JBt(e)}function Y9(e){return e=li(e),ejt(e)}function jme(e){return e=li(e),tjt(e)}function gc(e,t){return e=li(e),sjt(e,t)}function ajt(e=xee(),t){e=li(e);const r=YS(e,H$e).getImmediate({identifier:t}),i=g6t("storage");return i&&ujt(r,...i),r}function ujt(e,t,n,r={}){ojt(e,t,n,r)}function ljt(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new Bee(n,r,i,t,a_)}function cjt(){Xm(new qh(H$e,ljt,"PUBLIC").setMultipleInstances(!0)),ed(Fme,Bme,""),ed(Fme,Bme,"esm2017")}cjt();var Ume=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var U1,q$e;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,C){function A(){}A.prototype=C.prototype,T.D=C.prototype,T.prototype=new A,T.prototype.constructor=T,T.C=function(k,R,O){for(var D=Array(arguments.length-2),$=2;$<arguments.length;$++)D[$-2]=arguments[$];return C.prototype[R].apply(k,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,C,A){A||(A=0);var k=Array(16);if(typeof C=="string")for(var R=0;16>R;++R)k[R]=C.charCodeAt(A++)|C.charCodeAt(A++)<<8|C.charCodeAt(A++)<<16|C.charCodeAt(A++)<<24;else for(R=0;16>R;++R)k[R]=C[A++]|C[A++]<<8|C[A++]<<16|C[A++]<<24;C=T.g[0],A=T.g[1],R=T.g[2];var O=T.g[3],D=C+(O^A&(R^O))+k[0]+3614090360&4294967295;C=A+(D<<7&4294967295|D>>>25),D=O+(R^C&(A^R))+k[1]+3905402710&4294967295,O=C+(D<<12&4294967295|D>>>20),D=R+(A^O&(C^A))+k[2]+606105819&4294967295,R=O+(D<<17&4294967295|D>>>15),D=A+(C^R&(O^C))+k[3]+3250441966&4294967295,A=R+(D<<22&4294967295|D>>>10),D=C+(O^A&(R^O))+k[4]+4118548399&4294967295,C=A+(D<<7&4294967295|D>>>25),D=O+(R^C&(A^R))+k[5]+1200080426&4294967295,O=C+(D<<12&4294967295|D>>>20),D=R+(A^O&(C^A))+k[6]+2821735955&4294967295,R=O+(D<<17&4294967295|D>>>15),D=A+(C^R&(O^C))+k[7]+4249261313&4294967295,A=R+(D<<22&4294967295|D>>>10),D=C+(O^A&(R^O))+k[8]+1770035416&4294967295,C=A+(D<<7&4294967295|D>>>25),D=O+(R^C&(A^R))+k[9]+2336552879&4294967295,O=C+(D<<12&4294967295|D>>>20),D=R+(A^O&(C^A))+k[10]+4294925233&4294967295,R=O+(D<<17&4294967295|D>>>15),D=A+(C^R&(O^C))+k[11]+2304563134&4294967295,A=R+(D<<22&4294967295|D>>>10),D=C+(O^A&(R^O))+k[12]+1804603682&4294967295,C=A+(D<<7&4294967295|D>>>25),D=O+(R^C&(A^R))+k[13]+4254626195&4294967295,O=C+(D<<12&4294967295|D>>>20),D=R+(A^O&(C^A))+k[14]+2792965006&4294967295,R=O+(D<<17&4294967295|D>>>15),D=A+(C^R&(O^C))+k[15]+1236535329&4294967295,A=R+(D<<22&4294967295|D>>>10),D=C+(R^O&(A^R))+k[1]+4129170786&4294967295,C=A+(D<<5&4294967295|D>>>27),D=O+(A^R&(C^A))+k[6]+3225465664&4294967295,O=C+(D<<9&4294967295|D>>>23),D=R+(C^A&(O^C))+k[11]+643717713&4294967295,R=O+(D<<14&4294967295|D>>>18),D=A+(O^C&(R^O))+k[0]+3921069994&4294967295,A=R+(D<<20&4294967295|D>>>12),D=C+(R^O&(A^R))+k[5]+3593408605&4294967295,C=A+(D<<5&4294967295|D>>>27),D=O+(A^R&(C^A))+k[10]+38016083&4294967295,O=C+(D<<9&4294967295|D>>>23),D=R+(C^A&(O^C))+k[15]+3634488961&4294967295,R=O+(D<<14&4294967295|D>>>18),D=A+(O^C&(R^O))+k[4]+3889429448&4294967295,A=R+(D<<20&4294967295|D>>>12),D=C+(R^O&(A^R))+k[9]+568446438&4294967295,C=A+(D<<5&4294967295|D>>>27),D=O+(A^R&(C^A))+k[14]+3275163606&4294967295,O=C+(D<<9&4294967295|D>>>23),D=R+(C^A&(O^C))+k[3]+4107603335&4294967295,R=O+(D<<14&4294967295|D>>>18),D=A+(O^C&(R^O))+k[8]+1163531501&4294967295,A=R+(D<<20&4294967295|D>>>12),D=C+(R^O&(A^R))+k[13]+2850285829&4294967295,C=A+(D<<5&4294967295|D>>>27),D=O+(A^R&(C^A))+k[2]+4243563512&4294967295,O=C+(D<<9&4294967295|D>>>23),D=R+(C^A&(O^C))+k[7]+1735328473&4294967295,R=O+(D<<14&4294967295|D>>>18),D=A+(O^C&(R^O))+k[12]+2368359562&4294967295,A=R+(D<<20&4294967295|D>>>12),D=C+(A^R^O)+k[5]+4294588738&4294967295,C=A+(D<<4&4294967295|D>>>28),D=O+(C^A^R)+k[8]+2272392833&4294967295,O=C+(D<<11&4294967295|D>>>21),D=R+(O^C^A)+k[11]+1839030562&4294967295,R=O+(D<<16&4294967295|D>>>16),D=A+(R^O^C)+k[14]+4259657740&4294967295,A=R+(D<<23&4294967295|D>>>9),D=C+(A^R^O)+k[1]+2763975236&4294967295,C=A+(D<<4&4294967295|D>>>28),D=O+(C^A^R)+k[4]+1272893353&4294967295,O=C+(D<<11&4294967295|D>>>21),D=R+(O^C^A)+k[7]+4139469664&4294967295,R=O+(D<<16&4294967295|D>>>16),D=A+(R^O^C)+k[10]+3200236656&4294967295,A=R+(D<<23&4294967295|D>>>9),D=C+(A^R^O)+k[13]+681279174&4294967295,C=A+(D<<4&4294967295|D>>>28),D=O+(C^A^R)+k[0]+3936430074&4294967295,O=C+(D<<11&4294967295|D>>>21),D=R+(O^C^A)+k[3]+3572445317&4294967295,R=O+(D<<16&4294967295|D>>>16),D=A+(R^O^C)+k[6]+76029189&4294967295,A=R+(D<<23&4294967295|D>>>9),D=C+(A^R^O)+k[9]+3654602809&4294967295,C=A+(D<<4&4294967295|D>>>28),D=O+(C^A^R)+k[12]+3873151461&4294967295,O=C+(D<<11&4294967295|D>>>21),D=R+(O^C^A)+k[15]+530742520&4294967295,R=O+(D<<16&4294967295|D>>>16),D=A+(R^O^C)+k[2]+3299628645&4294967295,A=R+(D<<23&4294967295|D>>>9),D=C+(R^(A|~O))+k[0]+4096336452&4294967295,C=A+(D<<6&4294967295|D>>>26),D=O+(A^(C|~R))+k[7]+1126891415&4294967295,O=C+(D<<10&4294967295|D>>>22),D=R+(C^(O|~A))+k[14]+2878612391&4294967295,R=O+(D<<15&4294967295|D>>>17),D=A+(O^(R|~C))+k[5]+4237533241&4294967295,A=R+(D<<21&4294967295|D>>>11),D=C+(R^(A|~O))+k[12]+1700485571&4294967295,C=A+(D<<6&4294967295|D>>>26),D=O+(A^(C|~R))+k[3]+2399980690&4294967295,O=C+(D<<10&4294967295|D>>>22),D=R+(C^(O|~A))+k[10]+4293915773&4294967295,R=O+(D<<15&4294967295|D>>>17),D=A+(O^(R|~C))+k[1]+2240044497&4294967295,A=R+(D<<21&4294967295|D>>>11),D=C+(R^(A|~O))+k[8]+1873313359&4294967295,C=A+(D<<6&4294967295|D>>>26),D=O+(A^(C|~R))+k[15]+4264355552&4294967295,O=C+(D<<10&4294967295|D>>>22),D=R+(C^(O|~A))+k[6]+2734768916&4294967295,R=O+(D<<15&4294967295|D>>>17),D=A+(O^(R|~C))+k[13]+1309151649&4294967295,A=R+(D<<21&4294967295|D>>>11),D=C+(R^(A|~O))+k[4]+4149444226&4294967295,C=A+(D<<6&4294967295|D>>>26),D=O+(A^(C|~R))+k[11]+3174756917&4294967295,O=C+(D<<10&4294967295|D>>>22),D=R+(C^(O|~A))+k[2]+718787259&4294967295,R=O+(D<<15&4294967295|D>>>17),D=A+(O^(R|~C))+k[9]+3951481745&4294967295,T.g[0]=T.g[0]+C&4294967295,T.g[1]=T.g[1]+(R+(D<<21&4294967295|D>>>11))&4294967295,T.g[2]=T.g[2]+R&4294967295,T.g[3]=T.g[3]+O&4294967295}r.prototype.u=function(T,C){C===void 0&&(C=T.length);for(var A=C-this.blockSize,k=this.B,R=this.h,O=0;O<C;){if(R==0)for(;O<=A;)i(this,T,O),O+=this.blockSize;if(typeof T=="string"){for(;O<C;)if(k[R++]=T.charCodeAt(O++),R==this.blockSize){i(this,k),R=0;break}}else for(;O<C;)if(k[R++]=T[O++],R==this.blockSize){i(this,k),R=0;break}}this.h=R,this.o+=C},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var C=1;C<T.length-8;++C)T[C]=0;var A=8*this.o;for(C=T.length-8;C<T.length;++C)T[C]=A&255,A/=256;for(this.u(T),T=Array(16),C=A=0;4>C;++C)for(var k=0;32>k;k+=8)T[A++]=this.g[C]>>>k&255;return T};function s(T,C){var A=a;return Object.prototype.hasOwnProperty.call(A,T)?A[T]:A[T]=C(T)}function o(T,C){this.h=C;for(var A=[],k=!0,R=T.length-1;0<=R;R--){var O=T[R]|0;k&&O==C||(A[R]=O,k=!1)}this.g=A}var a={};function u(T){return-128<=T&&128>T?s(T,function(C){return new o([C|0],0>C?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return g(l(-T));for(var C=[],A=1,k=0;T>=A;k++)C[k]=T/A|0,A*=4294967296;return new o(C,0)}function c(T,C){if(T.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(T.charAt(0)=="-")return g(c(T.substring(1),C));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=l(Math.pow(C,8)),k=f,R=0;R<T.length;R+=8){var O=Math.min(8,T.length-R),D=parseInt(T.substring(R,R+O),C);8>O?(O=l(Math.pow(C,O)),k=k.j(O).add(l(D))):(k=k.j(A),k=k.add(l(D)))}return k}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var T=0,C=1,A=0;A<this.g.length;A++){var k=this.i(A);T+=(0<=k?k:4294967296+k)*C,C*=4294967296}return T},e.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(p(this))return"0";if(m(this))return"-"+g(this).toString(T);for(var C=l(Math.pow(T,6)),A=this,k="";;){var R=w(A,C).g;A=y(A,R.j(C));var O=((0<A.g.length?A.g[0]:A.h)>>>0).toString(T);if(A=R,p(A))return O+k;for(;6>O.length;)O="0"+O;k=O+k}},e.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function p(T){if(T.h!=0)return!1;for(var C=0;C<T.g.length;C++)if(T.g[C]!=0)return!1;return!0}function m(T){return T.h==-1}e.l=function(T){return T=y(this,T),m(T)?-1:p(T)?0:1};function g(T){for(var C=T.g.length,A=[],k=0;k<C;k++)A[k]=~T.g[k];return new o(A,~T.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(T){for(var C=Math.max(this.g.length,T.g.length),A=[],k=0,R=0;R<=C;R++){var O=k+(this.i(R)&65535)+(T.i(R)&65535),D=(O>>>16)+(this.i(R)>>>16)+(T.i(R)>>>16);k=D>>>16,O&=65535,D&=65535,A[R]=D<<16|O}return new o(A,A[A.length-1]&-2147483648?-1:0)};function y(T,C){return T.add(g(C))}e.j=function(T){if(p(this)||p(T))return f;if(m(this))return m(T)?g(this).j(g(T)):g(g(this).j(T));if(m(T))return g(this.j(g(T)));if(0>this.l(h)&&0>T.l(h))return l(this.m()*T.m());for(var C=this.g.length+T.g.length,A=[],k=0;k<2*C;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var R=0;R<T.g.length;R++){var O=this.i(k)>>>16,D=this.i(k)&65535,$=T.i(R)>>>16,F=T.i(R)&65535;A[2*k+2*R]+=D*F,v(A,2*k+2*R),A[2*k+2*R+1]+=O*F,v(A,2*k+2*R+1),A[2*k+2*R+1]+=D*$,v(A,2*k+2*R+1),A[2*k+2*R+2]+=O*$,v(A,2*k+2*R+2)}for(k=0;k<C;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=C;k<2*C;k++)A[k]=0;return new o(A,0)};function v(T,C){for(;(T[C]&65535)!=T[C];)T[C+1]+=T[C]>>>16,T[C]&=65535,C++}function b(T,C){this.g=T,this.h=C}function w(T,C){if(p(C))throw Error("division by zero");if(p(T))return new b(f,f);if(m(T))return C=w(g(T),C),new b(g(C.g),g(C.h));if(m(C))return C=w(T,g(C)),new b(g(C.g),C.h);if(30<T.g.length){if(m(T)||m(C))throw Error("slowDivide_ only works with positive integers.");for(var A=d,k=C;0>=k.l(T);)A=E(A),k=E(k);var R=x(A,1),O=x(k,1);for(k=x(k,2),A=x(A,2);!p(k);){var D=O.add(k);0>=D.l(T)&&(R=R.add(A),O=D),k=x(k,1),A=x(A,1)}return C=y(T,R.j(C)),new b(R,C)}for(R=f;0<=T.l(C);){for(A=Math.max(1,Math.floor(T.m()/C.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),O=l(A),D=O.j(C);m(D)||0<D.l(T);)A-=k,O=l(A),D=O.j(C);p(O)&&(O=d),R=R.add(O),T=y(T,D)}return new b(R,T)}e.A=function(T){return w(this,T).h},e.and=function(T){for(var C=Math.max(this.g.length,T.g.length),A=[],k=0;k<C;k++)A[k]=this.i(k)&T.i(k);return new o(A,this.h&T.h)},e.or=function(T){for(var C=Math.max(this.g.length,T.g.length),A=[],k=0;k<C;k++)A[k]=this.i(k)|T.i(k);return new o(A,this.h|T.h)},e.xor=function(T){for(var C=Math.max(this.g.length,T.g.length),A=[],k=0;k<C;k++)A[k]=this.i(k)^T.i(k);return new o(A,this.h^T.h)};function E(T){for(var C=T.g.length+1,A=[],k=0;k<C;k++)A[k]=T.i(k)<<1|T.i(k-1)>>>31;return new o(A,T.h)}function x(T,C){var A=C>>5;C%=32;for(var k=T.g.length-A,R=[],O=0;O<k;O++)R[O]=0<C?T.i(O+A)>>>C|T.i(O+A+1)<<32-C:T.i(O+A);return new o(R,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,q$e=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,U1=o}).apply(typeof Ume<"u"?Ume:typeof self<"u"?self:typeof window<"u"?window:{});var BD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var W$e,G$e,ZC,Y$e,hO,tq,K$e,X$e,Q$e;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(S,M,V){return S==Array.prototype||S==Object.prototype||(S[M]=V.value),S};function n(S){S=[typeof globalThis=="object"&&globalThis,S,typeof window=="object"&&window,typeof self=="object"&&self,typeof BD=="object"&&BD];for(var M=0;M<S.length;++M){var V=S[M];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var r=n(this);function i(S,M){if(M)e:{var V=r;S=S.split(".");for(var Q=0;Q<S.length-1;Q++){var we=S[Q];if(!(we in V))break e;V=V[we]}S=S[S.length-1],Q=V[S],M=M(Q),M!=Q&&M!=null&&t(V,S,{configurable:!0,writable:!0,value:M})}}function s(S,M){S instanceof String&&(S+="");var V=0,Q=!1,we={next:function(){if(!Q&&V<S.length){var Pe=V++;return{value:M(Pe,S[Pe]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return we[Symbol.iterator]=function(){return we},we}i("Array.prototype.values",function(S){return S||function(){return s(this,function(M,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(S){var M=typeof S;return M=M!="object"?M:S?Array.isArray(S)?"array":M:"null",M=="array"||M=="object"&&typeof S.length=="number"}function l(S){var M=typeof S;return M=="object"&&S!=null||M=="function"}function c(S,M,V){return S.call.apply(S.bind,arguments)}function f(S,M,V){if(!S)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var we=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(we,Q),S.apply(M,we)}}return function(){return S.apply(M,arguments)}}function d(S,M,V){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(S,M){var V=Array.prototype.slice.call(arguments,1);return function(){var Q=V.slice();return Q.push.apply(Q,arguments),S.apply(this,Q)}}function p(S,M){function V(){}V.prototype=M.prototype,S.aa=M.prototype,S.prototype=new V,S.prototype.constructor=S,S.Qb=function(Q,we,Pe){for(var dt=Array(arguments.length-2),Xr=2;Xr<arguments.length;Xr++)dt[Xr-2]=arguments[Xr];return M.prototype[we].apply(Q,dt)}}function m(S){const M=S.length;if(0<M){const V=Array(M);for(let Q=0;Q<M;Q++)V[Q]=S[Q];return V}return[]}function g(S,M){for(let V=1;V<arguments.length;V++){const Q=arguments[V];if(u(Q)){const we=S.length||0,Pe=Q.length||0;S.length=we+Pe;for(let dt=0;dt<Pe;dt++)S[we+dt]=Q[dt]}else S.push(Q)}}class y{constructor(M,V){this.i=M,this.j=V,this.h=0,this.g=null}get(){let M;return 0<this.h?(this.h--,M=this.g,this.g=M.next,M.next=null):M=this.i(),M}}function v(S){return/^[\s\xa0]*$/.test(S)}function b(){var S=a.navigator;return S&&(S=S.userAgent)?S:""}function w(S){return w[" "](S),S}w[" "]=function(){};var E=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function x(S,M,V){for(const Q in S)M.call(V,S[Q],Q,S)}function T(S,M){for(const V in S)M.call(void 0,S[V],V,S)}function C(S){const M={};for(const V in S)M[V]=S[V];return M}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(S,M){let V,Q;for(let we=1;we<arguments.length;we++){Q=arguments[we];for(V in Q)S[V]=Q[V];for(let Pe=0;Pe<A.length;Pe++)V=A[Pe],Object.prototype.hasOwnProperty.call(Q,V)&&(S[V]=Q[V])}}function R(S){var M=1;S=S.split(":");const V=[];for(;0<M&&S.length;)V.push(S.shift()),M--;return S.length&&V.push(S.join(":")),V}function O(S){a.setTimeout(()=>{throw S},0)}function D(){var S=q;let M=null;return S.g&&(M=S.g,S.g=S.g.next,S.g||(S.h=null),M.next=null),M}class ${constructor(){this.h=this.g=null}add(M,V){const Q=F.get();Q.set(M,V),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var F=new y(()=>new L,S=>S.reset());class L{constructor(){this.next=this.g=this.h=null}set(M,V){this.h=M,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let j,z=!1,q=new $,P=()=>{const S=a.Promise.resolve(void 0);j=()=>{S.then(U)}};var U=()=>{for(var S;S=D();){try{S.h.call(S.g)}catch(V){O(V)}var M=F;M.j(S),100>M.h&&(M.h++,S.next=M.g,M.g=S)}z=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(S,M){this.type=S,this.g=this.target=M,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var S=!1,M=Object.defineProperty({},"passive",{get:function(){S=!0}});try{const V=()=>{};a.addEventListener("test",V,M),a.removeEventListener("test",V,M)}catch{}return S}();function G(S,M){if(B.call(this,S?S.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,S){var V=this.type=S.type,Q=S.changedTouches&&S.changedTouches.length?S.changedTouches[0]:null;if(this.target=S.target||S.srcElement,this.g=M,M=S.relatedTarget){if(E){e:{try{w(M.nodeName);var we=!0;break e}catch{}we=!1}we||(M=null)}}else V=="mouseover"?M=S.fromElement:V=="mouseout"&&(M=S.toElement);this.relatedTarget=M,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0),this.button=S.button,this.key=S.key||"",this.ctrlKey=S.ctrlKey,this.altKey=S.altKey,this.shiftKey=S.shiftKey,this.metaKey=S.metaKey,this.pointerId=S.pointerId||0,this.pointerType=typeof S.pointerType=="string"?S.pointerType:te[S.pointerType]||"",this.state=S.state,this.i=S,S.defaultPrevented&&G.aa.h.call(this)}}p(G,B);var te={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var S=this.i;S.preventDefault?S.preventDefault():S.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),fe=0;function de(S,M,V,Q,we){this.listener=S,this.proxy=null,this.src=M,this.type=V,this.capture=!!Q,this.ha=we,this.key=++fe,this.da=this.fa=!1}function ge(S){S.da=!0,S.listener=null,S.proxy=null,S.src=null,S.ha=null}function Ie(S){this.src=S,this.g={},this.h=0}Ie.prototype.add=function(S,M,V,Q,we){var Pe=S.toString();S=this.g[Pe],S||(S=this.g[Pe]=[],this.h++);var dt=He(S,M,Q,we);return-1<dt?(M=S[dt],V||(M.fa=!1)):(M=new de(M,this.src,Pe,!!Q,we),M.fa=V,S.push(M)),M};function pe(S,M){var V=M.type;if(V in S.g){var Q=S.g[V],we=Array.prototype.indexOf.call(Q,M,void 0),Pe;(Pe=0<=we)&&Array.prototype.splice.call(Q,we,1),Pe&&(ge(M),S.g[V].length==0&&(delete S.g[V],S.h--))}}function He(S,M,V,Q){for(var we=0;we<S.length;++we){var Pe=S[we];if(!Pe.da&&Pe.listener==M&&Pe.capture==!!V&&Pe.ha==Q)return we}return-1}var Ue="closure_lm_"+(1e6*Math.random()|0),yt={};function it(S,M,V,Q,we){if(Array.isArray(M)){for(var Pe=0;Pe<M.length;Pe++)it(S,M[Pe],V,Q,we);return null}return V=bt(V),S&&S[le]?S.K(M,V,l(Q)?!!Q.capture:!!Q,we):be(S,M,V,!1,Q,we)}function be(S,M,V,Q,we,Pe){if(!M)throw Error("Invalid event type");var dt=l(we)?!!we.capture:!!we,Xr=ye(S);if(Xr||(S[Ue]=Xr=new Ie(S)),V=Xr.add(M,V,Q,dt,Pe),V.proxy)return V;if(Q=ke(),V.proxy=Q,Q.src=S,Q.listener=V,S.addEventListener)H||(we=dt),we===void 0&&(we=!1),S.addEventListener(M.toString(),Q,we);else if(S.attachEvent)S.attachEvent(Ot(M.toString()),Q);else if(S.addListener&&S.removeListener)S.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return V}function ke(){function S(V){return M.call(S.src,S.listener,V)}const M=Ge;return S}function ze(S,M,V,Q,we){if(Array.isArray(M))for(var Pe=0;Pe<M.length;Pe++)ze(S,M[Pe],V,Q,we);else Q=l(Q)?!!Q.capture:!!Q,V=bt(V),S&&S[le]?(S=S.i,M=String(M).toString(),M in S.g&&(Pe=S.g[M],V=He(Pe,V,Q,we),-1<V&&(ge(Pe[V]),Array.prototype.splice.call(Pe,V,1),Pe.length==0&&(delete S.g[M],S.h--)))):S&&(S=ye(S))&&(M=S.g[M.toString()],S=-1,M&&(S=He(M,V,Q,we)),(V=-1<S?M[S]:null)&&ct(V))}function ct(S){if(typeof S!="number"&&S&&!S.da){var M=S.src;if(M&&M[le])pe(M.i,S);else{var V=S.type,Q=S.proxy;M.removeEventListener?M.removeEventListener(V,Q,S.capture):M.detachEvent?M.detachEvent(Ot(V),Q):M.addListener&&M.removeListener&&M.removeListener(Q),(V=ye(M))?(pe(V,S),V.h==0&&(V.src=null,M[Ue]=null)):ge(S)}}}function Ot(S){return S in yt?yt[S]:yt[S]="on"+S}function Ge(S,M){if(S.da)S=!0;else{M=new G(M,this);var V=S.listener,Q=S.ha||S.src;S.fa&&ct(S),S=V.call(Q,M)}return S}function ye(S){return S=S[Ue],S instanceof Ie?S:null}var ht="__closure_events_fn_"+(1e9*Math.random()>>>0);function bt(S){return typeof S=="function"?S:(S[ht]||(S[ht]=function(M){return S.handleEvent(M)}),S[ht])}function me(){W.call(this),this.i=new Ie(this),this.M=this,this.F=null}p(me,W),me.prototype[le]=!0,me.prototype.removeEventListener=function(S,M,V,Q){ze(this,S,M,V,Q)};function Ae(S,M){var V,Q=S.F;if(Q)for(V=[];Q;Q=Q.F)V.push(Q);if(S=S.M,Q=M.type||M,typeof M=="string")M=new B(M,S);else if(M instanceof B)M.target=M.target||S;else{var we=M;M=new B(Q,S),k(M,we)}if(we=!0,V)for(var Pe=V.length-1;0<=Pe;Pe--){var dt=M.g=V[Pe];we=qe(dt,Q,!0,M)&&we}if(dt=M.g=S,we=qe(dt,Q,!0,M)&&we,we=qe(dt,Q,!1,M)&&we,V)for(Pe=0;Pe<V.length;Pe++)dt=M.g=V[Pe],we=qe(dt,Q,!1,M)&&we}me.prototype.N=function(){if(me.aa.N.call(this),this.i){var S=this.i,M;for(M in S.g){for(var V=S.g[M],Q=0;Q<V.length;Q++)ge(V[Q]);delete S.g[M],S.h--}}this.F=null},me.prototype.K=function(S,M,V,Q){return this.i.add(String(S),M,!1,V,Q)},me.prototype.L=function(S,M,V,Q){return this.i.add(String(S),M,!0,V,Q)};function qe(S,M,V,Q){if(M=S.i.g[String(M)],!M)return!0;M=M.concat();for(var we=!0,Pe=0;Pe<M.length;++Pe){var dt=M[Pe];if(dt&&!dt.da&&dt.capture==V){var Xr=dt.listener,To=dt.ha||dt.src;dt.fa&&pe(S.i,dt),we=Xr.call(To,Q)!==!1&&we}}return we&&!Q.defaultPrevented}function ut(S,M,V){if(typeof S=="function")V&&(S=d(S,V));else if(S&&typeof S.handleEvent=="function")S=d(S.handleEvent,S);else throw Error("Invalid listener argument");return 2147483647<Number(M)?-1:a.setTimeout(S,M||0)}function wt(S){S.g=ut(()=>{S.g=null,S.i&&(S.i=!1,wt(S))},S.l);const M=S.h;S.h=null,S.m.apply(null,M)}class Bn extends W{constructor(M,V){super(),this.m=M,this.l=V,this.h=null,this.i=!1,this.g=null}j(M){this.h=arguments,this.g?this.i=!0:wt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ir(S){W.call(this),this.h=S,this.g={}}p(Ir,W);var jn=[];function hr(S){x(S.g,function(M,V){this.g.hasOwnProperty(V)&&ct(M)},S),S.g={}}Ir.prototype.N=function(){Ir.aa.N.call(this),hr(this)},Ir.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yn=a.JSON.stringify,An=a.JSON.parse,sr=class{stringify(S){return a.JSON.stringify(S,void 0)}parse(S){return a.JSON.parse(S,void 0)}};function or(){}or.prototype.h=null;function Qo(S){return S.h||(S.h=S.i())}function Ui(){}var In={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zi(){B.call(this,"d")}p(zi,B);function kr(){B.call(this,"c")}p(kr,B);var ys={},Sp=null;function gl(){return Sp=Sp||new me}ys.La="serverreachability";function kd(S){B.call(this,ys.La,S)}p(kd,B);function Tr(S){const M=gl();Ae(M,new kd(M))}ys.STAT_EVENT="statevent";function Ni(S,M){B.call(this,ys.STAT_EVENT,S),this.stat=M}p(Ni,B);function ti(S){const M=gl();Ae(M,new Ni(M,S))}ys.Ma="timingevent";function yu(S,M){B.call(this,ys.Ma,S),this.size=M}p(yu,B);function $a(S,M){if(typeof S!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){S()},M)}function Ma(){this.g=!0}Ma.prototype.xa=function(){this.g=!1};function oe(S,M,V,Q,we,Pe){S.info(function(){if(S.g)if(Pe)for(var dt="",Xr=Pe.split("&"),To=0;To<Xr.length;To++){var pr=Xr[To].split("=");if(1<pr.length){var ta=pr[0];pr=pr[1];var na=ta.split("_");dt=2<=na.length&&na[1]=="type"?dt+(ta+"="+pr+"&"):dt+(ta+"=redacted&")}}else dt=null;else dt=Pe;return"XMLHTTP REQ ("+Q+") [attempt "+we+"]: "+M+`
`+V+`
`+dt})}function ee(S,M,V,Q,we,Pe,dt){S.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+we+"]: "+M+`
`+V+`
`+Pe+" "+dt})}function ae(S,M,V,Q){S.info(function(){return"XMLHTTP TEXT ("+M+"): "+Se(S,V)+(Q?" "+Q:"")})}function Te(S,M){S.info(function(){return"TIMEOUT: "+M})}Ma.prototype.info=function(){};function Se(S,M){if(!S.g)return M;if(!M)return null;try{var V=JSON.parse(M);if(V){for(S=0;S<V.length;S++)if(Array.isArray(V[S])){var Q=V[S];if(!(2>Q.length)){var we=Q[1];if(Array.isArray(we)&&!(1>we.length)){var Pe=we[0];if(Pe!="noop"&&Pe!="stop"&&Pe!="close")for(var dt=1;dt<we.length;dt++)we[dt]=""}}}}return yn(V)}catch{return M}}var ot={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Wt;function Mn(){}p(Mn,or),Mn.prototype.g=function(){return new XMLHttpRequest},Mn.prototype.i=function(){return{}},Wt=new Mn;function Un(S,M,V,Q){this.j=S,this.i=M,this.l=V,this.R=Q||1,this.U=new Ir(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mn}function mn(){this.i=null,this.g="",this.h=!1}var ar={},Rr={};function Ht(S,M,V){S.L=1,S.v=zn(Ye(M)),S.m=V,S.P=!0,ur(S,null)}function ur(S,M){S.F=Date.now(),Di(S),S.A=Ye(S.v);var V=S.A,Q=S.R;Array.isArray(Q)||(Q=[String(Q)]),yN(V.i,"t",Q),S.C=0,V=S.j.J,S.h=new mn,S.g=Eoe(S.j,V?M:null,!S.m),0<S.O&&(S.M=new Bn(d(S.Y,S,S.g),S.O)),M=S.U,V=S.g,Q=S.ca;var we="readystatechange";Array.isArray(we)||(we&&(jn[0]=we.toString()),we=jn);for(var Pe=0;Pe<we.length;Pe++){var dt=it(V,we[Pe],Q||M.handleEvent,!1,M.h||M);if(!dt)break;M.g[dt.key]=dt}M=S.H?C(S.H):{},S.m?(S.u||(S.u="POST"),M["Content-Type"]="application/x-www-form-urlencoded",S.g.ea(S.A,S.u,S.m,M)):(S.u="GET",S.g.ea(S.A,S.u,null,M)),Tr(),oe(S.i,S.u,S.A,S.l,S.R,S.m)}Un.prototype.ca=function(S){S=S.target;const M=this.M;M&&rs(S)==3?M.j():this.Y(S)},Un.prototype.Y=function(S){try{if(S==this.g)e:{const na=rs(this.g);var M=this.g.Ba();const N_=this.g.Z();if(!(3>na)&&(na!=3||this.g&&(this.h.h||this.g.oa()||ea(this.g)))){this.J||na!=4||M==7||(M==8||0>=N_?Tr(3):Tr(2)),ni(this);var V=this.g.Z();this.X=V;t:if(Gr(this)){var Q=ea(this.g);S="";var we=Q.length,Pe=rs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vi(this),So(this);var dt="";break t}this.h.i=new a.TextDecoder}for(M=0;M<we;M++)this.h.h=!0,S+=this.h.i.decode(Q[M],{stream:!(Pe&&M==we-1)});Q.length=0,this.h.g+=S,this.C=0,dt=this.h.g}else dt=this.g.oa();if(this.o=V==200,ee(this.i,this.u,this.A,this.l,this.R,na,V),this.o){if(this.T&&!this.K){t:{if(this.g){var Xr,To=this.g;if((Xr=To.g?To.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Xr)){var pr=Xr;break t}}pr=null}if(V=pr)ae(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hi(this,V);else{this.o=!1,this.s=3,ti(12),Vi(this),So(this);break e}}if(this.P){V=!0;let mf;for(;!this.J&&this.C<dt.length;)if(mf=tr(this,dt),mf==Rr){na==4&&(this.s=4,ti(14),V=!1),ae(this.i,this.l,null,"[Incomplete Response]");break}else if(mf==ar){this.s=4,ti(15),ae(this.i,this.l,dt,"[Invalid Chunk]"),V=!1;break}else ae(this.i,this.l,mf,null),Hi(this,mf);if(Gr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),na!=4||dt.length!=0||this.h.h||(this.s=1,ti(16),V=!1),this.o=this.o&&V,!V)ae(this.i,this.l,dt,"[Invalid Chunked Response]"),Vi(this),So(this);else if(0<dt.length&&!this.W){this.W=!0;var ta=this.j;ta.g==this&&ta.ba&&!ta.M&&(ta.j.info("Great, no buffering proxy detected. Bytes received: "+dt.length),ZB(ta),ta.M=!0,ti(11))}}else ae(this.i,this.l,dt,null),Hi(this,dt);na==4&&Vi(this),this.o&&!this.J&&(na==4?voe(this.j,this):(this.o=!1,Di(this)))}else Ev(this.g),V==400&&0<dt.indexOf("Unknown SID")?(this.s=3,ti(12)):(this.s=0,ti(13)),Vi(this),So(this)}}}catch{}finally{}};function Gr(S){return S.g?S.u=="GET"&&S.L!=2&&S.j.Ca:!1}function tr(S,M){var V=S.C,Q=M.indexOf(`
`,V);return Q==-1?Rr:(V=Number(M.substring(V,Q)),isNaN(V)?ar:(Q+=1,Q+V>M.length?Rr:(M=M.slice(Q,Q+V),S.C=Q+V,M)))}Un.prototype.cancel=function(){this.J=!0,Vi(this)};function Di(S){S.S=Date.now()+S.I,Ks(S,S.I)}function Ks(S,M){if(S.B!=null)throw Error("WatchDog timer not null");S.B=$a(d(S.ba,S),M)}function ni(S){S.B&&(a.clearTimeout(S.B),S.B=null)}Un.prototype.ba=function(){this.B=null;const S=Date.now();0<=S-this.S?(Te(this.i,this.A),this.L!=2&&(Tr(),ti(17)),Vi(this),this.s=2,So(this)):Ks(this,this.S-S)};function So(S){S.j.G==0||S.J||voe(S.j,S)}function Vi(S){ni(S);var M=S.M;M&&typeof M.ma=="function"&&M.ma(),S.M=null,hr(S.U),S.g&&(M=S.g,S.g=null,M.abort(),M.ma())}function Hi(S,M){try{var V=S.j;if(V.G!=0&&(V.g==S||Rd(V.h,S))){if(!S.K&&Rd(V.h,S)&&V.G==3){try{var Q=V.Da.g.parse(M)}catch{Q=null}if(Array.isArray(Q)&&Q.length==3){var we=Q;if(we[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<S.F)SN(V),EN(V);else break e;JB(V),ti(18)}}else V.za=we[1],0<V.za-V.T&&37500>we[2]&&V.F&&V.v==0&&!V.C&&(V.C=$a(d(V.Za,V),6e3));if(1>=cc(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else xv(V,11)}else if((S.K||V.g==S)&&SN(V),!v(M))for(we=V.Da.g.parse(M),M=0;M<we.length;M++){let pr=we[M];if(V.T=pr[0],pr=pr[1],V.G==2)if(pr[0]=="c"){V.K=pr[1],V.ia=pr[2];const ta=pr[3];ta!=null&&(V.la=ta,V.j.info("VER="+V.la));const na=pr[4];na!=null&&(V.Aa=na,V.j.info("SVER="+V.Aa));const N_=pr[5];N_!=null&&typeof N_=="number"&&0<N_&&(Q=1.5*N_,V.L=Q,V.j.info("backChannelRequestTimeoutMs_="+Q)),Q=V;const mf=S.g;if(mf){const CN=mf.g?mf.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(CN){var Pe=Q.h;Pe.g||CN.indexOf("spdy")==-1&&CN.indexOf("quic")==-1&&CN.indexOf("h2")==-1||(Pe.j=Pe.l,Pe.g=new Set,Pe.h&&(Y(Pe,Pe.h),Pe.h=null))}if(Q.D){const ej=mf.g?mf.g.getResponseHeader("X-HTTP-Session-Id"):null;ej&&(Q.ya=ej,Dt(Q.I,Q.D,ej))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-S.F,V.j.info("Handshake RTT: "+V.R+"ms")),Q=V;var dt=S;if(Q.qa=woe(Q,Q.J?Q.ia:null,Q.W),dt.K){se(Q.h,dt);var Xr=dt,To=Q.L;To&&(Xr.I=To),Xr.B&&(ni(Xr),Di(Xr)),Q.g=dt}else goe(Q);0<V.i.length&&xN(V)}else pr[0]!="stop"&&pr[0]!="close"||xv(V,7);else V.G==3&&(pr[0]=="stop"||pr[0]=="close"?pr[0]=="stop"?xv(V,7):k_(V):pr[0]!="noop"&&V.l&&V.l.ta(pr),V.v=0)}}Tr(4)}catch{}}var Jo=class{constructor(S,M){this.g=S,this.map=M}};function La(S){this.l=S||10,a.PerformanceNavigationTiming?(S=a.performance.getEntriesByType("navigation"),S=0<S.length&&(S[0].nextHopProtocol=="hq"||S[0].nextHopProtocol=="h2")):S=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=S?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xs(S){return S.h?!0:S.g?S.g.size>=S.j:!1}function cc(S){return S.h?1:S.g?S.g.size:0}function Rd(S,M){return S.h?S.h==M:S.g?S.g.has(M):!1}function Y(S,M){S.g?S.g.add(M):S.h=M}function se(S,M){S.h&&S.h==M?S.h=null:S.g&&S.g.has(M)&&S.g.delete(M)}La.prototype.cancel=function(){if(this.i=Z(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const S of this.g.values())S.cancel();this.g.clear()}};function Z(S){if(S.h!=null)return S.i.concat(S.h.D);if(S.g!=null&&S.g.size!==0){let M=S.i;for(const V of S.g.values())M=M.concat(V.D);return M}return m(S.i)}function he(S){if(S.V&&typeof S.V=="function")return S.V();if(typeof Map<"u"&&S instanceof Map||typeof Set<"u"&&S instanceof Set)return Array.from(S.values());if(typeof S=="string")return S.split("");if(u(S)){for(var M=[],V=S.length,Q=0;Q<V;Q++)M.push(S[Q]);return M}M=[],V=0;for(Q in S)M[V++]=S[Q];return M}function ve(S){if(S.na&&typeof S.na=="function")return S.na();if(!S.V||typeof S.V!="function"){if(typeof Map<"u"&&S instanceof Map)return Array.from(S.keys());if(!(typeof Set<"u"&&S instanceof Set)){if(u(S)||typeof S=="string"){var M=[];S=S.length;for(var V=0;V<S;V++)M.push(V);return M}M=[],V=0;for(const Q in S)M[V++]=Q;return M}}}function ce(S,M){if(S.forEach&&typeof S.forEach=="function")S.forEach(M,void 0);else if(u(S)||typeof S=="string")Array.prototype.forEach.call(S,M,void 0);else for(var V=ve(S),Q=he(S),we=Q.length,Pe=0;Pe<we;Pe++)M.call(void 0,Q[Pe],V&&V[Pe],S)}var Oe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ve(S,M){if(S){S=S.split("&");for(var V=0;V<S.length;V++){var Q=S[V].indexOf("="),we=null;if(0<=Q){var Pe=S[V].substring(0,Q);we=S[V].substring(Q+1)}else Pe=S[V];M(Pe,we?decodeURIComponent(we.replace(/\+/g," ")):"")}}}function We(S){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,S instanceof We){this.h=S.h,st(this,S.j),this.o=S.o,this.g=S.g,xt(this,S.s),this.l=S.l;var M=S.i,V=new fc;V.i=M.i,M.g&&(V.g=new Map(M.g),V.h=M.h),gn(this,V),this.m=S.m}else S&&(M=String(S).match(Oe))?(this.h=!1,st(this,M[1]||"",!0),this.o=Nr(M[2]||""),this.g=Nr(M[3]||"",!0),xt(this,M[4]),this.l=Nr(M[5]||"",!0),gn(this,M[6]||"",!0),this.m=Nr(M[7]||"")):(this.h=!1,this.i=new fc(null,this.h))}We.prototype.toString=function(){var S=[],M=this.j;M&&S.push(Dr(M,Nd,!0),":");var V=this.g;return(V||M=="file")&&(S.push("//"),(M=this.o)&&S.push(Dr(M,Nd,!0),"@"),S.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&S.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&S.push("/"),S.push(Dr(V,V.charAt(0)=="/"?wT:Tp,!0))),(V=this.i.toString())&&S.push("?",V),(V=this.m)&&S.push("#",Dr(V,gN)),S.join("")};function Ye(S){return new We(S)}function st(S,M,V){S.j=V?Nr(M,!0):M,S.j&&(S.j=S.j.replace(/:$/,""))}function xt(S,M){if(M){if(M=Number(M),isNaN(M)||0>M)throw Error("Bad port number "+M);S.s=M}else S.s=null}function gn(S,M,V){M instanceof fc?(S.i=M,ET(S.i,S.h)):(V||(M=Dr(M,vv)),S.i=new fc(M,S.h))}function Dt(S,M,V){S.i.set(M,V)}function zn(S){return Dt(S,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),S}function Nr(S,M){return S?M?decodeURI(S.replace(/%25/g,"%2525")):decodeURIComponent(S):""}function Dr(S,M,V){return typeof S=="string"?(S=encodeURI(S).replace(M,Zo),V&&(S=S.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S):null}function Zo(S){return S=S.charCodeAt(0),"%"+(S>>4&15).toString(16)+(S&15).toString(16)}var Nd=/[#\/\?@]/g,Tp=/[#\?:]/g,wT=/[#\?]/g,vv=/[#\?@]/g,gN=/#/g;function fc(S,M){this.h=this.g=null,this.i=S||null,this.j=!!M}function vu(S){S.g||(S.g=new Map,S.h=0,S.i&&Ve(S.i,function(M,V){S.add(decodeURIComponent(M.replace(/\+/g," ")),V)}))}e=fc.prototype,e.add=function(S,M){vu(this),this.i=null,S=Ap(this,S);var V=this.g.get(S);return V||this.g.set(S,V=[]),V.push(M),this.h+=1,this};function Cp(S,M){vu(S),M=Ap(S,M),S.g.has(M)&&(S.i=null,S.h-=S.g.get(M).length,S.g.delete(M))}function A_(S,M){return vu(S),M=Ap(S,M),S.g.has(M)}e.forEach=function(S,M){vu(this),this.g.forEach(function(V,Q){V.forEach(function(we){S.call(M,we,Q,this)},this)},this)},e.na=function(){vu(this);const S=Array.from(this.g.values()),M=Array.from(this.g.keys()),V=[];for(let Q=0;Q<M.length;Q++){const we=S[Q];for(let Pe=0;Pe<we.length;Pe++)V.push(M[Q])}return V},e.V=function(S){vu(this);let M=[];if(typeof S=="string")A_(this,S)&&(M=M.concat(this.g.get(Ap(this,S))));else{S=Array.from(this.g.values());for(let V=0;V<S.length;V++)M=M.concat(S[V])}return M},e.set=function(S,M){return vu(this),this.i=null,S=Ap(this,S),A_(this,S)&&(this.h-=this.g.get(S).length),this.g.set(S,[M]),this.h+=1,this},e.get=function(S,M){return S?(S=this.V(S),0<S.length?String(S[0]):M):M};function yN(S,M,V){Cp(S,M),0<V.length&&(S.i=null,S.g.set(Ap(S,M),m(V)),S.h+=V.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const S=[],M=Array.from(this.g.keys());for(var V=0;V<M.length;V++){var Q=M[V];const Pe=encodeURIComponent(String(Q)),dt=this.V(Q);for(Q=0;Q<dt.length;Q++){var we=Pe;dt[Q]!==""&&(we+="="+encodeURIComponent(String(dt[Q]))),S.push(we)}}return this.i=S.join("&")};function Ap(S,M){return M=String(M),S.j&&(M=M.toLowerCase()),M}function ET(S,M){M&&!S.j&&(vu(S),S.i=null,S.g.forEach(function(V,Q){var we=Q.toLowerCase();Q!=we&&(Cp(this,Q),yN(this,we,V))},S)),S.j=M}function vN(S,M){const V=new Ma;if(a.Image){const Q=new Image;Q.onload=h(bu,V,"TestLoadImage: loaded",!0,M,Q),Q.onerror=h(bu,V,"TestLoadImage: error",!1,M,Q),Q.onabort=h(bu,V,"TestLoadImage: abort",!1,M,Q),Q.ontimeout=h(bu,V,"TestLoadImage: timeout",!1,M,Q),a.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=S}else M(!1)}function Ip(S,M){const V=new Ma,Q=new AbortController,we=setTimeout(()=>{Q.abort(),bu(V,"TestPingServer: timeout",!1,M)},1e4);fetch(S,{signal:Q.signal}).then(Pe=>{clearTimeout(we),Pe.ok?bu(V,"TestPingServer: ok",!0,M):bu(V,"TestPingServer: server error",!1,M)}).catch(()=>{clearTimeout(we),bu(V,"TestPingServer: error",!1,M)})}function bu(S,M,V,Q,we){try{we&&(we.onload=null,we.onerror=null,we.onabort=null,we.ontimeout=null),Q(V)}catch{}}function QB(){this.g=new sr}function bN(S,M,V){const Q=V||"";try{ce(S,function(we,Pe){let dt=we;l(we)&&(dt=yn(we)),M.push(Q+Pe+"="+encodeURIComponent(dt))})}catch(we){throw M.push(Q+"type="+encodeURIComponent("_badmap")),we}}function bv(S){this.l=S.Ub||null,this.j=S.eb||!1}p(bv,or),bv.prototype.g=function(){return new _v(this.l,this.j)},bv.prototype.i=function(S){return function(){return S}}({});function _v(S,M){me.call(this),this.D=S,this.o=M,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(_v,me),e=_v.prototype,e.open=function(S,M){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=S,this.A=M,this.readyState=1,Rg(this)},e.send=function(S){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const M={headers:this.u,method:this.B,credentials:this.m,cache:void 0};S&&(M.body=S),(this.D||a).fetch(new Request(this.A,M)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wv(this)),this.readyState=0},e.Sa=function(S){if(this.g&&(this.l=S,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=S.headers,this.readyState=2,Rg(this)),this.g&&(this.readyState=3,Rg(this),this.g)))if(this.responseType==="arraybuffer")S.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in S){if(this.j=S.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_N(this)}else S.text().then(this.Ra.bind(this),this.ga.bind(this))};function _N(S){S.j.read().then(S.Pa.bind(S)).catch(S.ga.bind(S))}e.Pa=function(S){if(this.g){if(this.o&&S.value)this.response.push(S.value);else if(!this.o){var M=S.value?S.value:new Uint8Array(0);(M=this.v.decode(M,{stream:!S.done}))&&(this.response=this.responseText+=M)}S.done?wv(this):Rg(this),this.readyState==3&&_N(this)}},e.Ra=function(S){this.g&&(this.response=this.responseText=S,wv(this))},e.Qa=function(S){this.g&&(this.response=S,wv(this))},e.ga=function(){this.g&&wv(this)};function wv(S){S.readyState=4,S.l=null,S.j=null,S.v=null,Rg(S)}e.setRequestHeader=function(S,M){this.u.append(S,M)},e.getResponseHeader=function(S){return this.h&&this.h.get(S.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const S=[],M=this.h.entries();for(var V=M.next();!V.done;)V=V.value,S.push(V[0]+": "+V[1]),V=M.next();return S.join(`\r
`)};function Rg(S){S.onreadystatechange&&S.onreadystatechange.call(S)}Object.defineProperty(_v.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(S){this.m=S?"include":"same-origin"}});function wN(S){let M="";return x(S,function(V,Q){M+=Q,M+=":",M+=V,M+=`\r
`}),M}function ne(S,M,V){e:{for(Q in V){var Q=!1;break e}Q=!0}Q||(V=wN(V),typeof S=="string"?V!=null&&encodeURIComponent(String(V)):Dt(S,M,V))}function ue(S){me.call(this),this.headers=new Map,this.o=S||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ue,me);var Re=/^https?$/i,It=["POST","PUT"];e=ue.prototype,e.Ha=function(S){this.J=S},e.ea=function(S,M,V,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+S);M=M?M.toUpperCase():"GET",this.D=S,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Wt.g(),this.v=this.o?Qo(this.o):Qo(Wt),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(M,String(S),!0),this.B=!1}catch(Pe){Ln(this,Pe);return}if(S=V||"",V=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var we in Q)V.set(we,Q[we]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const Pe of Q.keys())V.set(Pe,Q.get(Pe));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(V.keys()).find(Pe=>Pe.toLowerCase()=="content-type"),we=a.FormData&&S instanceof a.FormData,!(0<=Array.prototype.indexOf.call(It,M,void 0))||Q||we||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Pe,dt]of V)this.g.setRequestHeader(Pe,dt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Kr(this),this.u=!0,this.g.send(S),this.u=!1}catch(Pe){Ln(this,Pe)}};function Ln(S,M){S.h=!1,S.g&&(S.j=!0,S.g.abort(),S.j=!1),S.l=M,S.m=5,Cr(S),Vn(S)}function Cr(S){S.A||(S.A=!0,Ae(S,"complete"),Ae(S,"error"))}e.abort=function(S){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=S||7,Ae(this,"complete"),Ae(this,"abort"),Vn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vn(this,!0)),ue.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Yr(this):this.bb())},e.bb=function(){Yr(this)};function Yr(S){if(S.h&&typeof o<"u"&&(!S.v[1]||rs(S)!=4||S.Z()!=2)){if(S.u&&rs(S)==4)ut(S.Ea,0,S);else if(Ae(S,"readystatechange"),rs(S)==4){S.h=!1;try{const dt=S.Z();e:switch(dt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var M=!0;break e;default:M=!1}var V;if(!(V=M)){var Q;if(Q=dt===0){var we=String(S.D).match(Oe)[1]||null;!we&&a.self&&a.self.location&&(we=a.self.location.protocol.slice(0,-1)),Q=!Re.test(we?we.toLowerCase():"")}V=Q}if(V)Ae(S,"complete"),Ae(S,"success");else{S.m=6;try{var Pe=2<rs(S)?S.g.statusText:""}catch{Pe=""}S.l=Pe+" ["+S.Z()+"]",Cr(S)}}finally{Vn(S)}}}}function Vn(S,M){if(S.g){Kr(S);const V=S.g,Q=S.v[0]?()=>{}:null;S.g=null,S.v=null,M||Ae(S,"ready");try{V.onreadystatechange=Q}catch{}}}function Kr(S){S.I&&(a.clearTimeout(S.I),S.I=null)}e.isActive=function(){return!!this.g};function rs(S){return S.g?S.g.readyState:0}e.Z=function(){try{return 2<rs(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(S){if(this.g){var M=this.g.responseText;return S&&M.indexOf(S)==0&&(M=M.substring(S.length)),An(M)}};function ea(S){try{if(!S.g)return null;if("response"in S.g)return S.g.response;switch(S.H){case"":case"text":return S.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in S.g)return S.g.mozResponseArrayBuffer}return null}catch{return null}}function Ev(S){const M={};S=(S.g&&2<=rs(S)&&S.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<S.length;Q++){if(v(S[Q]))continue;var V=R(S[Q]);const we=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const Pe=M[we]||[];M[we]=Pe,Pe.push(V)}T(M,function(Q){return Q.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function kp(S,M,V){return V&&V.internalChannelParams&&V.internalChannelParams[S]||M}function I_(S){this.Aa=0,this.i=[],this.j=new Ma,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=kp("failFast",!1,S),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=kp("baseRetryDelayMs",5e3,S),this.cb=kp("retryDelaySeedMs",1e4,S),this.Wa=kp("forwardChannelMaxRetries",2,S),this.wa=kp("forwardChannelRequestTimeoutMs",2e4,S),this.pa=S&&S.xmlHttpFactory||void 0,this.Xa=S&&S.Tb||void 0,this.Ca=S&&S.useFetchStreams||!1,this.L=void 0,this.J=S&&S.supportsCrossDomainXhr||!1,this.K="",this.h=new La(S&&S.concurrentRequestLimit),this.Da=new QB,this.P=S&&S.fastHandshake||!1,this.O=S&&S.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=S&&S.Rb||!1,S&&S.xa&&this.j.xa(),S&&S.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&S&&S.detectBufferingProxy||!1,this.ja=void 0,S&&S.longPollingTimeout&&0<S.longPollingTimeout&&(this.ja=S.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=I_.prototype,e.la=8,e.G=1,e.connect=function(S,M,V,Q){ti(0),this.W=S,this.H=M||{},V&&Q!==void 0&&(this.H.OSID=V,this.H.OAID=Q),this.F=this.X,this.I=woe(this,null,this.W),xN(this)};function k_(S){if(hoe(S),S.G==3){var M=S.U++,V=Ye(S.I);if(Dt(V,"SID",S.K),Dt(V,"RID",M),Dt(V,"TYPE","terminate"),xT(S,V),M=new Un(S,S.j,M),M.L=2,M.v=zn(Ye(V)),V=!1,a.navigator&&a.navigator.sendBeacon)try{V=a.navigator.sendBeacon(M.v.toString(),"")}catch{}!V&&a.Image&&(new Image().src=M.v,V=!0),V||(M.g=Eoe(M.j,null),M.g.ea(M.v)),M.F=Date.now(),Di(M)}_oe(S)}function EN(S){S.g&&(ZB(S),S.g.cancel(),S.g=null)}function hoe(S){EN(S),S.u&&(a.clearTimeout(S.u),S.u=null),SN(S),S.h.cancel(),S.s&&(typeof S.s=="number"&&a.clearTimeout(S.s),S.s=null)}function xN(S){if(!Xs(S.h)&&!S.s){S.s=!0;var M=S.Ga;j||P(),z||(j(),z=!0),q.add(M,S),S.B=0}}function EUe(S,M){return cc(S.h)>=S.h.j-(S.s?1:0)?!1:S.s?(S.i=M.D.concat(S.i),!0):S.G==1||S.G==2||S.B>=(S.Va?0:S.Wa)?!1:(S.s=$a(d(S.Ga,S,M),boe(S,S.B)),S.B++,!0)}e.Ga=function(S){if(this.s)if(this.s=null,this.G==1){if(!S){this.U=Math.floor(1e5*Math.random()),S=this.U++;const we=new Un(this,this.j,S);let Pe=this.o;if(this.S&&(Pe?(Pe=C(Pe),k(Pe,this.S)):Pe=this.S),this.m!==null||this.O||(we.H=Pe,Pe=null),this.P)e:{for(var M=0,V=0;V<this.i.length;V++){t:{var Q=this.i[V];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if(M+=Q,4096<M){M=V;break e}if(M===4096||V===this.i.length-1){M=V+1;break e}}M=1e3}else M=1e3;M=moe(this,we,M),V=Ye(this.I),Dt(V,"RID",S),Dt(V,"CVER",22),this.D&&Dt(V,"X-HTTP-Session-Id",this.D),xT(this,V),Pe&&(this.O?M="headers="+encodeURIComponent(String(wN(Pe)))+"&"+M:this.m&&ne(V,this.m,Pe)),Y(this.h,we),this.Ua&&Dt(V,"TYPE","init"),this.P?(Dt(V,"$req",M),Dt(V,"SID","null"),we.T=!0,Ht(we,V,null)):Ht(we,V,M),this.G=2}}else this.G==3&&(S?poe(this,S):this.i.length==0||Xs(this.h)||poe(this))};function poe(S,M){var V;M?V=M.l:V=S.U++;const Q=Ye(S.I);Dt(Q,"SID",S.K),Dt(Q,"RID",V),Dt(Q,"AID",S.T),xT(S,Q),S.m&&S.o&&ne(Q,S.m,S.o),V=new Un(S,S.j,V,S.B+1),S.m===null&&(V.H=S.o),M&&(S.i=M.D.concat(S.i)),M=moe(S,V,1e3),V.I=Math.round(.5*S.wa)+Math.round(.5*S.wa*Math.random()),Y(S.h,V),Ht(V,Q,M)}function xT(S,M){S.H&&x(S.H,function(V,Q){Dt(M,Q,V)}),S.l&&ce({},function(V,Q){Dt(M,Q,V)})}function moe(S,M,V){V=Math.min(S.i.length,V);var Q=S.l?d(S.l.Na,S.l,S):null;e:{var we=S.i;let Pe=-1;for(;;){const dt=["count="+V];Pe==-1?0<V?(Pe=we[0].g,dt.push("ofs="+Pe)):Pe=0:dt.push("ofs="+Pe);let Xr=!0;for(let To=0;To<V;To++){let pr=we[To].g;const ta=we[To].map;if(pr-=Pe,0>pr)Pe=Math.max(0,we[To].g-100),Xr=!1;else try{bN(ta,dt,"req"+pr+"_")}catch{Q&&Q(ta)}}if(Xr){Q=dt.join("&");break e}}}return S=S.i.splice(0,V),M.D=S,Q}function goe(S){if(!S.g&&!S.u){S.Y=1;var M=S.Fa;j||P(),z||(j(),z=!0),q.add(M,S),S.v=0}}function JB(S){return S.g||S.u||3<=S.v?!1:(S.Y++,S.u=$a(d(S.Fa,S),boe(S,S.v)),S.v++,!0)}e.Fa=function(){if(this.u=null,yoe(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var S=2*this.R;this.j.info("BP detection timer enabled: "+S),this.A=$a(d(this.ab,this),S)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ti(10),EN(this),yoe(this))};function ZB(S){S.A!=null&&(a.clearTimeout(S.A),S.A=null)}function yoe(S){S.g=new Un(S,S.j,"rpc",S.Y),S.m===null&&(S.g.H=S.o),S.g.O=0;var M=Ye(S.qa);Dt(M,"RID","rpc"),Dt(M,"SID",S.K),Dt(M,"AID",S.T),Dt(M,"CI",S.F?"0":"1"),!S.F&&S.ja&&Dt(M,"TO",S.ja),Dt(M,"TYPE","xmlhttp"),xT(S,M),S.m&&S.o&&ne(M,S.m,S.o),S.L&&(S.g.I=S.L);var V=S.g;S=S.ia,V.L=1,V.v=zn(Ye(M)),V.m=null,V.P=!0,ur(V,S)}e.Za=function(){this.C!=null&&(this.C=null,EN(this),JB(this),ti(19))};function SN(S){S.C!=null&&(a.clearTimeout(S.C),S.C=null)}function voe(S,M){var V=null;if(S.g==M){SN(S),ZB(S),S.g=null;var Q=2}else if(Rd(S.h,M))V=M.D,se(S.h,M),Q=1;else return;if(S.G!=0){if(M.o)if(Q==1){V=M.m?M.m.length:0,M=Date.now()-M.F;var we=S.B;Q=gl(),Ae(Q,new yu(Q,V)),xN(S)}else goe(S);else if(we=M.s,we==3||we==0&&0<M.X||!(Q==1&&EUe(S,M)||Q==2&&JB(S)))switch(V&&0<V.length&&(M=S.h,M.i=M.i.concat(V)),we){case 1:xv(S,5);break;case 4:xv(S,10);break;case 3:xv(S,6);break;default:xv(S,2)}}}function boe(S,M){let V=S.Ta+Math.floor(Math.random()*S.cb);return S.isActive()||(V*=2),V*M}function xv(S,M){if(S.j.info("Error code "+M),M==2){var V=d(S.fb,S),Q=S.Xa;const we=!Q;Q=new We(Q||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||st(Q,"https"),zn(Q),we?vN(Q.toString(),V):Ip(Q.toString(),V)}else ti(2);S.G=0,S.l&&S.l.sa(M),_oe(S),hoe(S)}e.fb=function(S){S?(this.j.info("Successfully pinged google.com"),ti(2)):(this.j.info("Failed to ping google.com"),ti(1))};function _oe(S){if(S.G=0,S.ka=[],S.l){const M=Z(S.h);(M.length!=0||S.i.length!=0)&&(g(S.ka,M),g(S.ka,S.i),S.h.i.length=0,m(S.i),S.i.length=0),S.l.ra()}}function woe(S,M,V){var Q=V instanceof We?Ye(V):new We(V);if(Q.g!="")M&&(Q.g=M+"."+Q.g),xt(Q,Q.s);else{var we=a.location;Q=we.protocol,M=M?M+"."+we.hostname:we.hostname,we=+we.port;var Pe=new We(null);Q&&st(Pe,Q),M&&(Pe.g=M),we&&xt(Pe,we),V&&(Pe.l=V),Q=Pe}return V=S.D,M=S.ya,V&&M&&Dt(Q,V,M),Dt(Q,"VER",S.la),xT(S,Q),Q}function Eoe(S,M,V){if(M&&!S.J)throw Error("Can't create secondary domain capable XhrIo object.");return M=S.Ca&&!S.pa?new ue(new bv({eb:V})):new ue(S.pa),M.Ha(S.J),M}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function xoe(){}e=xoe.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function TN(){}TN.prototype.g=function(S,M){return new yl(S,M)};function yl(S,M){me.call(this),this.g=new I_(M),this.l=S,this.h=M&&M.messageUrlParams||null,S=M&&M.messageHeaders||null,M&&M.clientProtocolHeaderRequired&&(S?S["X-Client-Protocol"]="webchannel":S={"X-Client-Protocol":"webchannel"}),this.g.o=S,S=M&&M.initMessageHeaders||null,M&&M.messageContentType&&(S?S["X-WebChannel-Content-Type"]=M.messageContentType:S={"X-WebChannel-Content-Type":M.messageContentType}),M&&M.va&&(S?S["X-WebChannel-Client-Profile"]=M.va:S={"X-WebChannel-Client-Profile":M.va}),this.g.S=S,(S=M&&M.Sb)&&!v(S)&&(this.g.m=S),this.v=M&&M.supportsCrossDomainXhr||!1,this.u=M&&M.sendRawJson||!1,(M=M&&M.httpSessionIdParam)&&!v(M)&&(this.g.D=M,S=this.h,S!==null&&M in S&&(S=this.h,M in S&&delete S[M])),this.j=new R_(this)}p(yl,me),yl.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yl.prototype.close=function(){k_(this.g)},yl.prototype.o=function(S){var M=this.g;if(typeof S=="string"){var V={};V.__data__=S,S=V}else this.u&&(V={},V.__data__=yn(S),S=V);M.i.push(new Jo(M.Ya++,S)),M.G==3&&xN(M)},yl.prototype.N=function(){this.g.l=null,delete this.j,k_(this.g),delete this.g,yl.aa.N.call(this)};function Soe(S){zi.call(this),S.__headers__&&(this.headers=S.__headers__,this.statusCode=S.__status__,delete S.__headers__,delete S.__status__);var M=S.__sm__;if(M){e:{for(const V in M){S=V;break e}S=void 0}(this.i=S)&&(S=this.i,M=M!==null&&S in M?M[S]:void 0),this.data=M}else this.data=S}p(Soe,zi);function Toe(){kr.call(this),this.status=1}p(Toe,kr);function R_(S){this.g=S}p(R_,xoe),R_.prototype.ua=function(){Ae(this.g,"a")},R_.prototype.ta=function(S){Ae(this.g,new Soe(S))},R_.prototype.sa=function(S){Ae(this.g,new Toe)},R_.prototype.ra=function(){Ae(this.g,"b")},TN.prototype.createWebChannel=TN.prototype.g,yl.prototype.send=yl.prototype.o,yl.prototype.open=yl.prototype.m,yl.prototype.close=yl.prototype.close,Q$e=function(){return new TN},X$e=function(){return gl()},K$e=ys,tq={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ot.NO_ERROR=0,ot.TIMEOUT=8,ot.HTTP_ERROR=6,hO=ot,Tt.COMPLETE="complete",Y$e=Tt,Ui.EventType=In,In.OPEN="a",In.CLOSE="b",In.ERROR="c",In.MESSAGE="d",me.prototype.listen=me.prototype.K,ZC=Ui,G$e=bv,ue.prototype.listenOnce=ue.prototype.L,ue.prototype.getLastError=ue.prototype.Ka,ue.prototype.getLastErrorCode=ue.prototype.Ba,ue.prototype.getStatus=ue.prototype.Z,ue.prototype.getResponseJson=ue.prototype.Oa,ue.prototype.getResponseText=ue.prototype.oa,ue.prototype.send=ue.prototype.ea,ue.prototype.setWithCredentials=ue.prototype.Ha,W$e=ue}).apply(typeof BD<"u"?BD:typeof self<"u"?self:typeof window<"u"?window:{});const zme="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Cu.UNAUTHENTICATED=new Cu(null),Cu.GOOGLE_CREDENTIALS=new Cu("google-credentials-uid"),Cu.FIRST_PARTY=new Cu("first-party-uid"),Cu.MOCK_USER=new Cu("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XS="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=new I4("@firebase/firestore");function sC(){return Eb.logLevel}function kt(e,...t){if(Eb.logLevel<=Kn.DEBUG){const n=t.map(jee);Eb.debug(`Firestore (${XS}): ${e}`,...n)}}function Jm(e,...t){if(Eb.logLevel<=Kn.ERROR){const n=t.map(jee);Eb.error(`Firestore (${XS}): ${e}`,...n)}}function LI(e,...t){if(Eb.logLevel<=Kn.WARN){const n=t.map(jee);Eb.warn(`Firestore (${XS}): ${e}`,...n)}}function jee(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(e="Unexpected state"){const t=`FIRESTORE (${XS}) INTERNAL ASSERTION FAILED: `+e;throw Jm(t),new Error(t)}function ui(e,t){e||ln()}function pn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const je={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _t extends hp{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fjt{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class djt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Cu.UNAUTHENTICATED))}shutdown(){}}class hjt{constructor(t){this.t=t,this.currentUser=Cu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Em;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Em,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{kt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(kt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Em)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(kt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ui(typeof r.accessToken=="string"),new fjt(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ui(t===null||typeof t=="string"),new Cu(t)}}class pjt{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Cu.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class mjt{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new pjt(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Cu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gjt{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yjt{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&kt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,kt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{kt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):kt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ui(typeof n.token=="string"),this.R=n.token,new gjt(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vjt(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J$e{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=vjt(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function wr(e,t){return e<t?-1:e>t?1:0}function xx(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new _t(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _t(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new _t(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new _t(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return js.fromMillis(Date.now())}static fromDate(t){return js.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new js(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?wr(this.nanoseconds,t.nanoseconds):wr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new hn(t)}static min(){return new hn(new js(0,0))}static max(){return new hn(new js(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(t,n,r){n===void 0?n=0:n>t.length&&ln(),r===void 0?r=t.length-n:r>t.length-n&&ln(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return FI.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof FI?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class hi extends FI{construct(t,n,r){return new hi(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new _t(je.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new hi(n)}static emptyPath(){return new hi([])}}const bjt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lo extends FI{construct(t,n,r){return new Lo(t,n,r)}static isValidIdentifier(t){return bjt.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lo.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Lo(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new _t(je.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new _t(je.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new _t(je.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new _t(je.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Lo(n)}static emptyPath(){return new Lo([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(t){this.path=t}static fromPath(t){return new zt(hi.fromString(t))}static fromName(t){return new zt(hi.fromString(t).popFirst(5))}static empty(){return new zt(hi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&hi.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return hi.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new zt(new hi(t.slice()))}}function _jt(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=hn.fromTimestamp(r===1e9?new js(n+1,0):new js(n,r));return new xy(i,zt.empty(),t)}function wjt(e){return new xy(e.readTime,e.key,-1)}class xy{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new xy(hn.min(),zt.empty(),-1)}static max(){return new xy(hn.max(),zt.empty(),-1)}}function Ejt(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=zt.comparator(e.documentKey,t.documentKey),n!==0?n:wr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xjt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Sjt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ER(e){if(e.code!==je.FAILED_PRECONDITION||e.message!==xjt)throw e;kt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&ln(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Xe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Xe?n:Xe.resolve(n)}catch(n){return Xe.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Xe.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Xe.reject(n)}static resolve(t){return new Xe((n,r)=>{n(t)})}static reject(t){return new Xe((n,r)=>{r(t)})}static waitFor(t){return new Xe((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Xe.resolve(!1);for(const r of t)n=n.next(i=>i?Xe.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Xe((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Xe((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function Tjt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xR(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uee{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}Uee.oe=-1;function $4(e){return e==null}function I3(e){return e===0&&1/e==-1/0}function Cjt(e){return typeof e=="number"&&Number.isInteger(e)&&!I3(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vme(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function u_(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Z$e(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(t,n){this.comparator=t,this.root=n||Oo.EMPTY}insert(t,n){return new ji(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Oo.BLACK,null,null))}remove(t){return new ji(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Oo.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new jD(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new jD(this.root,t,this.comparator,!1)}getReverseIterator(){return new jD(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new jD(this.root,t,this.comparator,!0)}}class jD{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Oo{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??Oo.RED,this.left=i??Oo.EMPTY,this.right=s??Oo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new Oo(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Oo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Oo.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Oo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Oo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ln();const t=this.left.check();if(t!==this.right.check())throw ln();return t+(this.isRed()?0:1)}}Oo.EMPTY=null,Oo.RED=!0,Oo.BLACK=!1;Oo.EMPTY=new class{constructor(){this.size=0}get key(){throw ln()}get value(){throw ln()}get color(){throw ln()}get left(){throw ln()}get right(){throw ln()}copy(t,n,r,i,s){return this}insert(t,n,r){return new Oo(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(t){this.comparator=t,this.data=new ji(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Hme(this.data.getIterator())}getIteratorFrom(t){return new Hme(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Vo)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Vo(this.comparator);return n.data=t,n}}class Hme{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(t){this.fields=t,t.sort(Lo.comparator)}static empty(){return new $l([])}unionWith(t){let n=new Vo(Lo.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new $l(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return xx(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eMe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new eMe("Invalid base64 string: "+s):s}}(t);return new ka(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new ka(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return wr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ka.EMPTY_BYTE_STRING=new ka("");const Ajt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sy(e){if(ui(!!e),typeof e=="string"){let t=0;const n=Ajt.exec(e);if(ui(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ws(e.seconds),nanos:ws(e.nanos)}}function ws(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function xb(e){return typeof e=="string"?ka.fromBase64String(e):ka.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zee(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Vee(e){const t=e.mapValue.fields.__previous_value__;return zee(t)?Vee(t):t}function BI(e){const t=Sy(e.mapValue.fields.__local_write_time__.timestampValue);return new js(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ijt{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class jI{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new jI("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof jI&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Sb(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?zee(e)?4:kjt(e)?9007199254740991:10:ln()}function Gh(e,t){if(e===t)return!0;const n=Sb(e);if(n!==Sb(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return BI(e).isEqual(BI(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Sy(i.timestampValue),a=Sy(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return xb(i.bytesValue).isEqual(xb(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return ws(i.geoPointValue.latitude)===ws(s.geoPointValue.latitude)&&ws(i.geoPointValue.longitude)===ws(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ws(i.integerValue)===ws(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ws(i.doubleValue),a=ws(s.doubleValue);return o===a?I3(o)===I3(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return xx(e.arrayValue.values||[],t.arrayValue.values||[],Gh);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Vme(o)!==Vme(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Gh(o[u],a[u])))return!1;return!0}(e,t);default:return ln()}}function UI(e,t){return(e.values||[]).find(n=>Gh(n,t))!==void 0}function Sx(e,t){if(e===t)return 0;const n=Sb(e),r=Sb(t);if(n!==r)return wr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return wr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=ws(s.integerValue||s.doubleValue),u=ws(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return qme(e.timestampValue,t.timestampValue);case 4:return qme(BI(e),BI(t));case 5:return wr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=xb(s),u=xb(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=wr(a[l],u[l]);if(c!==0)return c}return wr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=wr(ws(s.latitude),ws(o.latitude));return a!==0?a:wr(ws(s.longitude),ws(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=Sx(a[l],u[l]);if(c)return c}return wr(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===UD.mapValue&&o===UD.mapValue)return 0;if(s===UD.mapValue)return 1;if(o===UD.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=wr(u[f],c[f]);if(d!==0)return d;const h=Sx(a[u[f]],l[c[f]]);if(h!==0)return h}return wr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw ln()}}function qme(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return wr(e,t);const n=Sy(e),r=Sy(t),i=wr(n.seconds,r.seconds);return i!==0?i:wr(n.nanos,r.nanos)}function Tx(e){return nq(e)}function nq(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Sy(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return xb(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return zt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=nq(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${nq(n.fields[o])}`;return i+"}"}(e.mapValue):ln()}function Wme(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function rq(e){return!!e&&"integerValue"in e}function Hee(e){return!!e&&"arrayValue"in e}function Gme(e){return!!e&&"nullValue"in e}function Yme(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function pO(e){return!!e&&"mapValue"in e}function o2(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return u_(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=o2(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=o2(e.arrayValue.values[n]);return t}return Object.assign({},e)}function kjt(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(t){this.value=t}static empty(){return new Lu({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!pO(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=o2(n)}setAll(t){let n=Lo.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=o2(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());pO(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Gh(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];pO(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){u_(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Lu(o2(this.value))}}function tMe(e){const t=[];return u_(e.fields,(n,r)=>{const i=new Lo([n]);if(pO(r)){const s=tMe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new $l(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new ya(t,0,hn.min(),hn.min(),hn.min(),Lu.empty(),0)}static newFoundDocument(t,n,r,i){return new ya(t,1,n,hn.min(),r,i,0)}static newNoDocument(t,n){return new ya(t,2,n,hn.min(),hn.min(),Lu.empty(),0)}static newUnknownDocument(t,n){return new ya(t,3,n,hn.min(),hn.min(),Lu.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(hn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Lu.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Lu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=hn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ya&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ya(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let k3=class{constructor(t,n){this.position=t,this.inclusive=n}};function Kme(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=zt.comparator(zt.fromName(o.referenceValue),n.key):r=Sx(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Xme(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Gh(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(t,n="asc"){this.field=t,this.dir=n}}function Rjt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nMe=class{};class xs extends nMe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new Djt(t,n,r):n==="array-contains"?new $jt(t,r):n==="in"?new Mjt(t,r):n==="not-in"?new Ljt(t,r):n==="array-contains-any"?new Fjt(t,r):new xs(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new Pjt(t,r):new Ojt(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Sx(n,this.value)):n!==null&&Sb(this.value)===Sb(n)&&this.matchesComparison(Sx(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ln()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ld extends nMe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new ld(t,n)}matches(t){return rMe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function rMe(e){return e.op==="and"}function iMe(e){return Njt(e)&&rMe(e)}function Njt(e){for(const t of e.filters)if(t instanceof ld)return!1;return!0}function iq(e){if(e instanceof xs)return e.field.canonicalString()+e.op.toString()+Tx(e.value);if(iMe(e))return e.filters.map(t=>iq(t)).join(",");{const t=e.filters.map(n=>iq(n)).join(",");return`${e.op}(${t})`}}function sMe(e,t){return e instanceof xs?function(r,i){return i instanceof xs&&r.op===i.op&&r.field.isEqual(i.field)&&Gh(r.value,i.value)}(e,t):e instanceof ld?function(r,i){return i instanceof ld&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&sMe(o,i.filters[a]),!0):!1}(e,t):void ln()}function oMe(e){return e instanceof xs?function(n){return`${n.field.canonicalString()} ${n.op} ${Tx(n.value)}`}(e):e instanceof ld?function(n){return n.op.toString()+" {"+n.getFilters().map(oMe).join(" ,")+"}"}(e):"Filter"}class Djt extends xs{constructor(t,n,r){super(t,n,r),this.key=zt.fromName(r.referenceValue)}matches(t){const n=zt.comparator(t.key,this.key);return this.matchesComparison(n)}}class Pjt extends xs{constructor(t,n){super(t,"in",n),this.keys=aMe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class Ojt extends xs{constructor(t,n){super(t,"not-in",n),this.keys=aMe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function aMe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>zt.fromName(r.referenceValue))}class $jt extends xs{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Hee(n)&&UI(n.arrayValue,this.value)}}class Mjt extends xs{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&UI(this.value.arrayValue,n)}}class Ljt extends xs{constructor(t,n){super(t,"not-in",n)}matches(t){if(UI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!UI(this.value.arrayValue,n)}}class Fjt extends xs{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Hee(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>UI(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bjt{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Qme(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Bjt(e,t,n,r,i,s,o)}function qee(e){const t=pn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>iq(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),$4(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Tx(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Tx(r)).join(",")),t.ue=n}return t.ue}function Wee(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Rjt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!sMe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Xme(e.startAt,t.startAt)&&Xme(e.endAt,t.endAt)}function sq(e){return zt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function jjt(e,t,n,r,i,s,o,a){return new QS(e,t,n,r,i,s,o,a)}function Gee(e){return new QS(e)}function Jme(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function uMe(e){return e.collectionGroup!==null}function a2(e){const t=pn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Vo(Lo.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new zI(s,r))}),n.has(Lo.keyField().canonicalString())||t.ce.push(new zI(Lo.keyField(),r))}return t.ce}function kh(e){const t=pn(e);return t.le||(t.le=Ujt(t,a2(e))),t.le}function Ujt(e,t){if(e.limitType==="F")return Qme(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new zI(i.field,s)});const n=e.endAt?new k3(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new k3(e.startAt.position,e.startAt.inclusive):null;return Qme(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function oq(e,t){const n=e.filters.concat([t]);return new QS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function aq(e,t,n){return new QS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function M4(e,t){return Wee(kh(e),kh(t))&&e.limitType===t.limitType}function lMe(e){return`${qee(kh(e))}|lt:${e.limitType}`}function hw(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>oMe(i)).join(", ")}]`),$4(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Tx(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Tx(i)).join(",")),`Target(${r})`}(kh(e))}; limitType=${e.limitType})`}function L4(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):zt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of a2(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=Kme(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,a2(r),i)||r.endAt&&!function(o,a,u){const l=Kme(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,a2(r),i))}(e,t)}function zjt(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function cMe(e){return(t,n)=>{let r=!1;for(const i of a2(e)){const s=Vjt(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Vjt(e,t,n){const r=e.field.isKeyField()?zt.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?Sx(u,l):ln()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ln()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){u_(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return Z$e(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hjt=new ji(zt.comparator);function Zm(){return Hjt}const fMe=new ji(zt.comparator);function eA(...e){let t=fMe;for(const n of e)t=t.insert(n.key,n);return t}function dMe(e){let t=fMe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function k1(){return u2()}function hMe(){return u2()}function u2(){return new JS(e=>e.toString(),(e,t)=>e.isEqual(t))}const qjt=new ji(zt.comparator),Wjt=new Vo(zt.comparator);function Hn(...e){let t=Wjt;for(const n of e)t=t.add(n);return t}const Gjt=new Vo(wr);function Yjt(){return Gjt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pMe(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:I3(t)?"-0":t}}function mMe(e){return{integerValue:""+e}}function Kjt(e,t){return Cjt(t)?mMe(t):pMe(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(){this._=void 0}}function Xjt(e,t,n){return e instanceof VI?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&zee(s)&&(s=Vee(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof HI?yMe(e,t):e instanceof qI?vMe(e,t):function(i,s){const o=gMe(i,s),a=Zme(o)+Zme(i.Pe);return rq(o)&&rq(i.Pe)?mMe(a):pMe(i.serializer,a)}(e,t)}function Qjt(e,t,n){return e instanceof HI?yMe(e,t):e instanceof qI?vMe(e,t):n}function gMe(e,t){return e instanceof R3?function(r){return rq(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class VI extends F4{}class HI extends F4{constructor(t){super(),this.elements=t}}function yMe(e,t){const n=bMe(t);for(const r of e.elements)n.some(i=>Gh(i,r))||n.push(r);return{arrayValue:{values:n}}}class qI extends F4{constructor(t){super(),this.elements=t}}function vMe(e,t){let n=bMe(t);for(const r of e.elements)n=n.filter(i=>!Gh(i,r));return{arrayValue:{values:n}}}class R3 extends F4{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function Zme(e){return ws(e.integerValue||e.doubleValue)}function bMe(e){return Hee(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jjt{constructor(t,n){this.field=t,this.transform=n}}function Zjt(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof HI&&i instanceof HI||r instanceof qI&&i instanceof qI?xx(r.elements,i.elements,Gh):r instanceof R3&&i instanceof R3?Gh(r.Pe,i.Pe):r instanceof VI&&i instanceof VI}(e.transform,t.transform)}class e8t{constructor(t,n){this.version=t,this.transformResults=n}}class Qu{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Qu}static exists(t){return new Qu(void 0,t)}static updateTime(t){return new Qu(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function mO(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class B4{}function _Me(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new j4(e.key,Qu.none()):new SR(e.key,e.data,Qu.none());{const n=e.data,r=Lu.empty();let i=new Vo(Lo.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new iv(e.key,r,new $l(i.toArray()),Qu.none())}}function t8t(e,t,n){e instanceof SR?function(i,s,o){const a=i.value.clone(),u=tge(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof iv?function(i,s,o){if(!mO(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=tge(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(wMe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function l2(e,t,n,r){return e instanceof SR?function(s,o,a,u){if(!mO(s.precondition,o))return a;const l=s.value.clone(),c=nge(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof iv?function(s,o,a,u){if(!mO(s.precondition,o))return a;const l=nge(s.fieldTransforms,u,o),c=o.data;return c.setAll(wMe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return mO(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function n8t(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=gMe(r.transform,i||null);s!=null&&(n===null&&(n=Lu.empty()),n.set(r.field,s))}return n||null}function ege(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&xx(r,i,(s,o)=>Zjt(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class SR extends B4{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class iv extends B4{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function wMe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function tge(e,t,n){const r=new Map;ui(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Qjt(o,a,n[i]))}return r}function nge(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Xjt(s,o,t))}return r}class j4 extends B4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class r8t extends B4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8t{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&t8t(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=l2(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=l2(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=hMe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=_Me(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(hn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Hn())}isEqual(t){return this.batchId===t.batchId&&xx(this.mutations,t.mutations,(n,r)=>ege(n,r))&&xx(this.baseMutations,t.baseMutations,(n,r)=>ege(n,r))}}class Yee{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){ui(t.mutations.length===r.length);let i=function(){return qjt}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Yee(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8t{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8t{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vs,nr;function a8t(e){switch(e){default:return ln();case je.CANCELLED:case je.UNKNOWN:case je.DEADLINE_EXCEEDED:case je.RESOURCE_EXHAUSTED:case je.INTERNAL:case je.UNAVAILABLE:case je.UNAUTHENTICATED:return!1;case je.INVALID_ARGUMENT:case je.NOT_FOUND:case je.ALREADY_EXISTS:case je.PERMISSION_DENIED:case je.FAILED_PRECONDITION:case je.ABORTED:case je.OUT_OF_RANGE:case je.UNIMPLEMENTED:case je.DATA_LOSS:return!0}}function EMe(e){if(e===void 0)return Jm("GRPC error has no .code"),je.UNKNOWN;switch(e){case vs.OK:return je.OK;case vs.CANCELLED:return je.CANCELLED;case vs.UNKNOWN:return je.UNKNOWN;case vs.DEADLINE_EXCEEDED:return je.DEADLINE_EXCEEDED;case vs.RESOURCE_EXHAUSTED:return je.RESOURCE_EXHAUSTED;case vs.INTERNAL:return je.INTERNAL;case vs.UNAVAILABLE:return je.UNAVAILABLE;case vs.UNAUTHENTICATED:return je.UNAUTHENTICATED;case vs.INVALID_ARGUMENT:return je.INVALID_ARGUMENT;case vs.NOT_FOUND:return je.NOT_FOUND;case vs.ALREADY_EXISTS:return je.ALREADY_EXISTS;case vs.PERMISSION_DENIED:return je.PERMISSION_DENIED;case vs.FAILED_PRECONDITION:return je.FAILED_PRECONDITION;case vs.ABORTED:return je.ABORTED;case vs.OUT_OF_RANGE:return je.OUT_OF_RANGE;case vs.UNIMPLEMENTED:return je.UNIMPLEMENTED;case vs.DATA_LOSS:return je.DATA_LOSS;default:return ln()}}(nr=vs||(vs={}))[nr.OK=0]="OK",nr[nr.CANCELLED=1]="CANCELLED",nr[nr.UNKNOWN=2]="UNKNOWN",nr[nr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nr[nr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nr[nr.NOT_FOUND=5]="NOT_FOUND",nr[nr.ALREADY_EXISTS=6]="ALREADY_EXISTS",nr[nr.PERMISSION_DENIED=7]="PERMISSION_DENIED",nr[nr.UNAUTHENTICATED=16]="UNAUTHENTICATED",nr[nr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nr[nr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nr[nr.ABORTED=10]="ABORTED",nr[nr.OUT_OF_RANGE=11]="OUT_OF_RANGE",nr[nr.UNIMPLEMENTED=12]="UNIMPLEMENTED",nr[nr.INTERNAL=13]="INTERNAL",nr[nr.UNAVAILABLE=14]="UNAVAILABLE",nr[nr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u8t(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l8t=new U1([4294967295,4294967295],0);function rge(e){const t=u8t().encode(e),n=new q$e;return n.update(t),new Uint8Array(n.digest())}function ige(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new U1([n,r],0),new U1([i,s],0)]}class Kee{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new tA(`Invalid padding: ${n}`);if(r<0)throw new tA(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new tA(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new tA(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=U1.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(U1.fromNumber(r)));return i.compare(l8t)===1&&(i=new U1([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=rge(t),[r,i]=ige(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new Kee(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=rge(t),[r,i]=ige(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class tA extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,TR.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new U4(hn.min(),i,new ji(wr),Zm(),Hn())}}class TR{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new TR(r,n,Hn(),Hn(),Hn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class xMe{constructor(t,n){this.targetId=t,this.me=n}}class SMe{constructor(t,n,r=ka.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class sge{constructor(){this.fe=0,this.ge=age(),this.pe=ka.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=Hn(),n=Hn(),r=Hn();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ln()}}),new TR(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=age()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ui(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class c8t{constructor(t){this.Le=t,this.Be=new Map,this.ke=Zm(),this.qe=oge(),this.Qe=new ji(wr)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:ln()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(sq(s))if(r===0){const o=new zt(s.path);this.Ue(n,o,ya.newNoDocument(o,hn.min()))}else ui(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=xb(r).toUint8Array()}catch(u){if(u instanceof eMe)return LI("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Kee(o,i,s)}catch(u){return LI(u instanceof tA?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&sq(a.target)){const u=new zt(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,ya.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=Hn();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new U4(t,n,this.Qe,this.ke,r);return this.ke=Zm(),this.qe=oge(),this.Qe=new ji(wr),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new sge,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Vo(wr),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||kt("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new sge),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function oge(){return new ji(zt.comparator)}function age(){return new ji(zt.comparator)}const f8t={asc:"ASCENDING",desc:"DESCENDING"},d8t={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},h8t={and:"AND",or:"OR"};class p8t{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function uq(e,t){return e.useProto3Json||$4(t)?t:{value:t}}function N3(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function TMe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function m8t(e,t){return N3(e,t.toTimestamp())}function Rh(e){return ui(!!e),hn.fromTimestamp(function(n){const r=Sy(n);return new js(r.seconds,r.nanos)}(e))}function Xee(e,t){return lq(e,t).canonicalString()}function lq(e,t){const n=function(i){return new hi(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function CMe(e){const t=hi.fromString(e);return ui(NMe(t)),t}function cq(e,t){return Xee(e.databaseId,t.path)}function K9(e,t){const n=CMe(t);if(n.get(1)!==e.databaseId.projectId)throw new _t(je.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new _t(je.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new zt(IMe(n))}function AMe(e,t){return Xee(e.databaseId,t)}function g8t(e){const t=CMe(e);return t.length===4?hi.emptyPath():IMe(t)}function fq(e){return new hi(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function IMe(e){return ui(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function uge(e,t,n){return{name:cq(e,t),fields:n.value.mapValue.fields}}function y8t(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ln()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(ui(c===void 0||typeof c=="string"),ka.fromBase64String(c||"")):(ui(c===void 0||c instanceof Buffer||c instanceof Uint8Array),ka.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?je.UNKNOWN:EMe(l.code);return new _t(c,l.message||"")}(o);n=new SMe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=K9(e,r.document.name),s=Rh(r.document.updateTime),o=r.document.createTime?Rh(r.document.createTime):hn.min(),a=new Lu({mapValue:{fields:r.document.fields}}),u=ya.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new gO(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=K9(e,r.document),s=r.readTime?Rh(r.readTime):hn.min(),o=ya.newNoDocument(i,s),a=r.removedTargetIds||[];n=new gO([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=K9(e,r.document),s=r.removedTargetIds||[];n=new gO([],s,i,null)}else{if(!("filter"in t))return ln();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new o8t(i,s),a=r.targetId;n=new xMe(a,o)}}return n}function v8t(e,t){let n;if(t instanceof SR)n={update:uge(e,t.key,t.value)};else if(t instanceof j4)n={delete:cq(e,t.key)};else if(t instanceof iv)n={update:uge(e,t.key,t.data),updateMask:A8t(t.fieldMask)};else{if(!(t instanceof r8t))return ln();n={verify:cq(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof VI)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof HI)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qI)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof R3)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ln()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:m8t(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ln()}(e,t.precondition)),n}function b8t(e,t){return e&&e.length>0?(ui(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?Rh(i.updateTime):Rh(s);return o.isEqual(hn.min())&&(o=Rh(s)),new e8t(o,i.transformResults||[])}(n,t))):[]}function _8t(e,t){return{documents:[AMe(e,t.path)]}}function w8t(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=AMe(e,i);const s=function(l){if(l.length!==0)return RMe(ld.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:pw(d.field),direction:S8t(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=uq(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function E8t(e){let t=g8t(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ui(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=kMe(f);return d instanceof ld&&iMe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new zI(mw(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,$4(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new k3(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new k3(h,d)}(n.endAt)),jjt(t,i,o,s,a,"F",u,l)}function x8t(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ln()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function kMe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=mw(n.unaryFilter.field);return xs.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=mw(n.unaryFilter.field);return xs.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=mw(n.unaryFilter.field);return xs.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=mw(n.unaryFilter.field);return xs.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ln()}}(e):e.fieldFilter!==void 0?function(n){return xs.create(mw(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ln()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return ld.create(n.compositeFilter.filters.map(r=>kMe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ln()}}(n.compositeFilter.op))}(e):ln()}function S8t(e){return f8t[e]}function T8t(e){return d8t[e]}function C8t(e){return h8t[e]}function pw(e){return{fieldPath:e.canonicalString()}}function mw(e){return Lo.fromServerFormat(e.fieldPath)}function RMe(e){return e instanceof xs?function(n){if(n.op==="=="){if(Yme(n.value))return{unaryFilter:{field:pw(n.field),op:"IS_NAN"}};if(Gme(n.value))return{unaryFilter:{field:pw(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Yme(n.value))return{unaryFilter:{field:pw(n.field),op:"IS_NOT_NAN"}};if(Gme(n.value))return{unaryFilter:{field:pw(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pw(n.field),op:T8t(n.op),value:n.value}}}(e):e instanceof ld?function(n){const r=n.getFilters().map(i=>RMe(i));return r.length===1?r[0]:{compositeFilter:{op:C8t(n.op),filters:r}}}(e):ln()}function A8t(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function NMe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(t,n,r,i,s=hn.min(),o=hn.min(),a=ka.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new m0(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new m0(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new m0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new m0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I8t{constructor(t){this.ct=t}}function k8t(e){const t=E8t({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?aq(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8t{constructor(){this._n=new N8t}addToCollectionParentIndex(t,n){return this._n.add(n),Xe.resolve()}getCollectionParents(t,n){return Xe.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return Xe.resolve()}deleteFieldIndex(t,n){return Xe.resolve()}deleteAllFieldIndexes(t){return Xe.resolve()}createTargetIndexes(t,n){return Xe.resolve()}getDocumentsMatchingTarget(t,n){return Xe.resolve(null)}getIndexType(t,n){return Xe.resolve(0)}getFieldIndexes(t,n){return Xe.resolve([])}getNextCollectionGroupToUpdate(t){return Xe.resolve(null)}getMinOffset(t,n){return Xe.resolve(xy.min())}getMinOffsetFromCollectionGroup(t,n){return Xe.resolve(xy.min())}updateCollectionGroup(t,n,r){return Xe.resolve()}updateIndexEntries(t,n){return Xe.resolve()}}class N8t{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Vo(hi.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Vo(hi.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new Cx(0)}static Ln(){return new Cx(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8t{constructor(){this.changes=new JS(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ya.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Xe.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8t{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O8t{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&l2(r.mutation,i,$l.empty(),js.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Hn()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Hn()){const i=k1();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=eA();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=k1();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Hn()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Zm();const o=u2(),a=function(){return u2()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof iv)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),l2(c.mutation,l,c.mutation.getFieldMask(),js.now())):o.set(l.key,$l.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new P8t(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=u2();let i=new ji((o,a)=>o-a),s=Hn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||$l.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||Hn()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=hMe();c.forEach(d=>{if(!s.has(d)){const h=_Me(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Xe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return zt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):uMe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Xe.resolve(k1());let a=-1,u=s;return o.next(l=>Xe.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Xe.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,Hn())).next(c=>({batchId:a,changes:dMe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new zt(n)).next(r=>{let i=eA();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=eA();return this.indexManager.getCollectionParents(t,s).next(a=>Xe.forEach(a,u=>{const l=function(f,d){return new QS(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,ya.newInvalidDocument(c)))});let a=eA();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&l2(c.mutation,l,$l.empty(),js.now()),L4(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8t{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return Xe.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Rh(i.createTime)}}(n)),Xe.resolve()}getNamedQuery(t,n){return Xe.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:k8t(i.bundledQuery),readTime:Rh(i.readTime)}}(n)),Xe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8t{constructor(){this.overlays=new ji(zt.comparator),this.hr=new Map}getOverlay(t,n){return Xe.resolve(this.overlays.get(n))}getOverlays(t,n){const r=k1();return Xe.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),Xe.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Xe.resolve()}getOverlaysForCollection(t,n,r){const i=k1(),s=n.length+1,o=new zt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Xe.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new ji((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=k1(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=k1(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Xe.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new s8t(n,r));let s=this.hr.get(n);s===void 0&&(s=Hn(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qee{constructor(){this.Pr=new Vo(eo.Ir),this.Tr=new Vo(eo.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new eo(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new eo(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new zt(new hi([])),r=new eo(n,t),i=new eo(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new zt(new hi([])),r=new eo(n,t),i=new eo(n,t+1);let s=Hn();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new eo(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class eo{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return zt.comparator(t.key,n.key)||wr(t.pr,n.pr)}static Er(t,n){return wr(t.pr,n.pr)||zt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8t{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Vo(eo.Ir)}checkEmpty(t){return Xe.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new i8t(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new eo(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Xe.resolve(o)}lookupMutationBatch(t,n){return Xe.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Xe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Xe.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return Xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new eo(n,0),i=new eo(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Xe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Vo(wr);return n.forEach(i=>{const s=new eo(i,0),o=new eo(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Xe.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;zt.isDocumentKey(s)||(s=s.child(""));const o=new eo(new zt(s),0);let a=new Vo(wr);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),Xe.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){ui(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Xe.forEach(n.mutations,i=>{const s=new eo(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new eo(n,0),i=this.wr.firstAfterOrEqual(r);return Xe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Xe.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8t{constructor(t){this.vr=t,this.docs=function(){return new ji(zt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Xe.resolve(r?r.document.mutableCopy():ya.newInvalidDocument(n))}getEntries(t,n){let r=Zm();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ya.newInvalidDocument(i))}),Xe.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Zm();const o=n.path,a=new zt(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Ejt(wjt(c),r)<=0||(i.has(c.key)||L4(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Xe.resolve(s)}getAllFromCollectionGroup(t,n,r,i){ln()}Fr(t,n){return Xe.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new B8t(this)}getSize(t){return Xe.resolve(this.size)}}class B8t extends D8t{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),Xe.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8t{constructor(t){this.persistence=t,this.Mr=new JS(n=>qee(n),Wee),this.lastRemoteSnapshotVersion=hn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Qee,this.targetCount=0,this.Lr=Cx.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),Xe.resolve()}getLastRemoteSnapshotVersion(t){return Xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Xe.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Xe.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Xe.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new Cx(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,Xe.resolve()}updateTargetData(t,n){return this.qn(n),Xe.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Xe.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Xe.waitFor(s).next(()=>i)}getTargetCount(t){return Xe.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return Xe.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),Xe.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Xe.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),Xe.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return Xe.resolve(r)}containsKey(t,n){return Xe.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8t{constructor(t,n){this.Br={},this.overlays={},this.kr=new Uee(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new j8t(this),this.indexManager=new R8t,this.remoteDocumentCache=function(i){return new F8t(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new I8t(n),this.$r=new $8t(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new M8t,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new L8t(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){kt("MemoryPersistence","Starting transaction:",t);const i=new z8t(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return Xe.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class z8t extends Sjt{constructor(t){super(),this.currentSequenceNumber=t}}class Jee{constructor(t){this.persistence=t,this.zr=new Qee,this.jr=null}static Hr(t){return new Jee(t)}get Jr(){if(this.jr)return this.jr;throw ln()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Xe.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Xe.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),Xe.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xe.forEach(this.Jr,r=>{const i=zt.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,hn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return Xe.or([()=>Xe.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zee{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=Hn(),i=Hn();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Zee(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8t{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8t{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return x6t()?8:Tjt(Go())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new V8t;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(sC()<=Kn.DEBUG&&kt("QueryEngine","SDK will not create cache indexes for query:",hw(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Xe.resolve()):(sC()<=Kn.DEBUG&&kt("QueryEngine","Query:",hw(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(sC()<=Kn.DEBUG&&kt("QueryEngine","The SDK decides to create cache indexes for query:",hw(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,kh(n))):Xe.resolve())}ji(t,n){if(Jme(n))return Xe.resolve(null);let r=kh(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=aq(n,null,"F"),r=kh(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=Hn(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,aq(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return Jme(n)||i.isEqual(hn.min())?Xe.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Xe.resolve(null):(sC()<=Kn.DEBUG&&kt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),hw(n)),this.es(t,o,n,_jt(i,-1)).next(a=>a))})}Zi(t,n){let r=new Vo(cMe(t));return n.forEach((i,s)=>{L4(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return sC()<=Kn.DEBUG&&kt("QueryEngine","Using full collection scan to execute query:",hw(n)),this.zi.getDocumentsMatchingQuery(t,n,xy.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8t{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new ji(wr),this.rs=new JS(s=>qee(s),Wee),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new O8t(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function W8t(e,t,n,r){return new q8t(e,t,n,r)}async function DMe(e,t){const n=pn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Hn();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function G8t(e,t){const n=pn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Xe.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);ui(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Hn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function PMe(e){const t=pn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function Y8t(e,t){const n=pn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(ka.EMPTY_BYTE_STRING,hn.min()).withLastLimboFreeSnapshotVersion(hn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=Zm(),l=Hn();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(K8t(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(hn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Xe.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function K8t(e,t,n){let r=Hn(),i=Hn();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Zm();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(hn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):kt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function X8t(e,t){const n=pn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function Q8t(e,t){const n=pn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,Xe.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new m0(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function dq(e,t,n){const r=pn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!xR(o))throw o;kt("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function lge(e,t,n){const r=pn(e);let i=hn.min(),s=Hn();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=pn(u),d=f.rs.get(c);return d!==void 0?Xe.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,kh(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:hn.min(),n?s:Hn())).next(a=>(J8t(r,zjt(t),a),{documents:a,hs:s})))}function J8t(e,t,n){let r=e.ss.get(t)||hn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class cge{constructor(){this.activeTargetIds=Yjt()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Z8t{constructor(){this.no=new cge,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new cge,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9t{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fge{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){kt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){kt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zD=null;function X9(){return zD===null?zD=function(){return 268435456+Math.round(2147483648*Math.random())}():zD++,"0x"+zD.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t9t={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9t{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="WebChannelConnection";class r9t extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=X9(),u=this.vo(n,r.toUriEncodedString());kt("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(kt("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw LI("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+XS}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=t9t[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=X9();return new Promise((o,a)=>{const u=new W$e;u.setWithCredentials(!0),u.listenOnce(Y$e.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case hO.NO_ERROR:const c=u.getResponseJson();kt(ca,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case hO.TIMEOUT:kt(ca,`RPC '${t}' ${s} timed out`),a(new _t(je.DEADLINE_EXCEEDED,"Request time out"));break;case hO.HTTP_ERROR:const f=u.getStatus();if(kt(ca,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(je).indexOf(y)>=0?y:je.UNKNOWN}(h.status);a(new _t(p,h.message))}else a(new _t(je.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new _t(je.UNAVAILABLE,"Connection failed."));break;default:ln()}}finally{kt(ca,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);kt(ca,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=X9(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Q$e(),a=X$e(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new G$e({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");kt(ca,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new n9t({lo:g=>{h?kt(ca,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(kt(ca,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),kt(ca,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,b=>{try{v(b)}catch(w){setTimeout(()=>{throw w},0)}})};return m(f,ZC.EventType.OPEN,()=>{h||(kt(ca,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,ZC.EventType.CLOSE,()=>{h||(h=!0,kt(ca,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,ZC.EventType.ERROR,g=>{h||(h=!0,LI(ca,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new _t(je.UNAVAILABLE,"The operation could not be completed")))}),m(f,ZC.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];ui(!!v);const b=v,w=b.error||((y=b[0])===null||y===void 0?void 0:y.error);if(w){kt(ca,`RPC '${t}' stream ${i} received error:`,w);const E=w.status;let x=function(A){const k=vs[A];if(k!==void 0)return EMe(k)}(E),T=w.message;x===void 0&&(x=je.INTERNAL,T="Unknown error status: "+E+" with message "+w.message),h=!0,p.po(new _t(x,T)),f.close()}else kt(ca,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,K$e.STAT_EVENT,g=>{g.stat===tq.PROXY?kt(ca,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===tq.NOPROXY&&kt(ca,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function Q9(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z4(e){return new p8t(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OMe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&kt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Me{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new OMe(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===je.RESOURCE_EXHAUSTED?(Jm(n.toString()),Jm("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===je.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new _t(je.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return kt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(kt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class i9t extends $Me{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=y8t(this.serializer,t),r=function(s){if(!("targetChange"in s))return hn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?hn.min():o.readTime?Rh(o.readTime):hn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=fq(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=sq(u)?{documents:_8t(s,u)}:{query:w8t(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=TMe(s,o.resumeToken);const l=uq(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(hn.min())>0){a.readTime=N3(s,o.snapshotVersion.toTimestamp());const l=uq(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=x8t(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=fq(this.serializer),n.removeTarget=t,this.i_(n)}}class s9t extends $Me{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(ui(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=b8t(t.writeResults,t.commitTime),r=Rh(t.commitTime);return this.listener.A_(r,n)}return ui(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=fq(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>v8t(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9t extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new _t(je.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,lq(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new _t(je.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,lq(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _t(je.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class a9t{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Jm(n),this.y_=!1):kt("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9t{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{l_(this)&&(kt("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=pn(u);l.M_.add(4),await AR(l),l.N_.set("Unknown"),l.M_.delete(4),await CR(l)}(this))})}),this.N_=new a9t(r,i)}}async function CR(e){if(l_(e))for(const t of e.x_)await t(!0)}async function AR(e){for(const t of e.x_)await t(!1)}function MMe(e,t){const n=pn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),rte(n)?nte(n):ZS(n).Xo()&&tte(n,t))}function ete(e,t){const n=pn(e),r=ZS(n);n.F_.delete(t),r.Xo()&&LMe(n,t),n.F_.size===0&&(r.Xo()?r.n_():l_(n)&&n.N_.set("Unknown"))}function tte(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(hn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ZS(e).P_(t)}function LMe(e,t){e.L_.xe(t),ZS(e).I_(t)}function nte(e){e.L_=new c8t({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),ZS(e).start(),e.N_.w_()}function rte(e){return l_(e)&&!ZS(e).Zo()&&e.F_.size>0}function l_(e){return pn(e).M_.size===0}function FMe(e){e.L_=void 0}async function l9t(e){e.N_.set("Online")}async function c9t(e){e.F_.forEach((t,n)=>{tte(e,t)})}async function f9t(e,t){FMe(e),rte(e)?(e.N_.D_(t),nte(e)):e.N_.set("Unknown")}async function d9t(e,t,n){if(e.N_.set("Online"),t instanceof SMe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){kt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await D3(e,r)}else if(t instanceof gO?e.L_.Ke(t):t instanceof xMe?e.L_.He(t):e.L_.We(t),!n.isEqual(hn.min()))try{const r=await PMe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(ka.EMPTY_BYTE_STRING,c.snapshotVersion)),LMe(s,u);const f=new m0(c.target,u,l,c.sequenceNumber);tte(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){kt("RemoteStore","Failed to raise snapshot:",r),await D3(e,r)}}async function D3(e,t,n){if(!xR(t))throw t;e.M_.add(1),await AR(e),e.N_.set("Offline"),n||(n=()=>PMe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{kt("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await CR(e)})}function BMe(e,t){return t().catch(n=>D3(e,n,t))}async function V4(e){const t=pn(e),n=Ty(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;h9t(t);)try{const i=await X8t(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,p9t(t,i)}catch(i){await D3(t,i)}jMe(t)&&UMe(t)}function h9t(e){return l_(e)&&e.v_.length<10}function p9t(e,t){e.v_.push(t);const n=Ty(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function jMe(e){return l_(e)&&!Ty(e).Zo()&&e.v_.length>0}function UMe(e){Ty(e).start()}async function m9t(e){Ty(e).V_()}async function g9t(e){const t=Ty(e);for(const n of e.v_)t.d_(n.mutations)}async function y9t(e,t,n){const r=e.v_.shift(),i=Yee.from(r,t,n);await BMe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await V4(e)}async function v9t(e,t){t&&Ty(e).E_&&await async function(r,i){if(function(o){return a8t(o)&&o!==je.ABORTED}(i.code)){const s=r.v_.shift();Ty(r).t_(),await BMe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await V4(r)}}(e,t),jMe(e)&&UMe(e)}async function dge(e,t){const n=pn(e);n.asyncQueue.verifyOperationInProgress(),kt("RemoteStore","RemoteStore received new credentials");const r=l_(n);n.M_.add(3),await AR(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await CR(n)}async function b9t(e,t){const n=pn(e);t?(n.M_.delete(2),await CR(n)):t||(n.M_.add(2),await AR(n),n.N_.set("Unknown"))}function ZS(e){return e.B_||(e.B_=function(n,r,i){const s=pn(n);return s.f_(),new i9t(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:l9t.bind(null,e),To:c9t.bind(null,e),Ao:f9t.bind(null,e),h_:d9t.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),rte(e)?nte(e):e.N_.set("Unknown")):(await e.B_.stop(),FMe(e))})),e.B_}function Ty(e){return e.k_||(e.k_=function(n,r,i){const s=pn(n);return s.f_(),new s9t(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:m9t.bind(null,e),Ao:v9t.bind(null,e),R_:g9t.bind(null,e),A_:y9t.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await V4(e)):(await e.k_.stop(),e.v_.length>0&&(kt("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ite{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Em,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new ite(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _t(je.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ste(e,t){if(Jm("AsyncQueue",`${t}: ${e}`),xR(e))return new _t(je.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(t){this.comparator=t?(n,r)=>t(n,r)||zt.comparator(n.key,r.key):(n,r)=>zt.comparator(n.key,r.key),this.keyedMap=eA(),this.sortedSet=new ji(this.comparator)}static emptySet(t){return new EE(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof EE)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new EE;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hge{constructor(){this.q_=new ji(zt.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):ln():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class Ax{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ax(t,n,EE.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&M4(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _9t{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class w9t{constructor(){this.queries=new JS(t=>lMe(t),M4),this.onlineState="Unknown",this.z_=new Set}}async function zMe(e,t){const n=pn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new _9t,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=ste(o,`Initialization of query '${hw(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&ote(n)}async function VMe(e,t){const n=pn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function E9t(e,t){const n=pn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&ote(n)}function x9t(e,t,n){const r=pn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function ote(e){e.z_.forEach(t=>{t.next()})}var hq,pge;(pge=hq||(hq={})).J_="default",pge.Cache="cache";class HMe{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new Ax(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=Ax.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==hq.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qMe{constructor(t){this.key=t}}class WMe{constructor(t){this.key=t}}class S9t{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Hn(),this.mutatedKeys=Hn(),this.Ia=cMe(t),this.Ta=new EE(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new hge,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=L4(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ln()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new Ax(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new hge,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=Hn(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new WMe(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new qMe(r))}),n}pa(t){this.la=t.hs,this.Pa=Hn();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return Ax.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class T9t{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class C9t{constructor(t){this.key=t,this.wa=!1}}class A9t{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new JS(a=>lMe(a),M4),this.Da=new Map,this.Ca=new Set,this.va=new ji(zt.comparator),this.Fa=new Map,this.Ma=new Qee,this.xa={},this.Oa=new Map,this.Na=Cx.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function I9t(e,t,n=!0){const r=JMe(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await GMe(r,t,n,!0),i}async function k9t(e,t){const n=JMe(e);await GMe(n,t,!0,!1)}async function GMe(e,t,n,r){const i=await Q8t(e.localStore,kh(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await R9t(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&MMe(e.remoteStore,i),a}async function R9t(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let b=g.view.da(y);b.Xi&&(b=await lge(m.localStore,g.query,!1).then(({documents:T})=>g.view.da(T,b)));const w=v&&v.targetChanges.get(g.targetId),E=v&&v.targetMismatches.get(g.targetId)!=null,x=g.view.applyChanges(b,m.isPrimaryClient,w,E);return gge(m,g.targetId,x.fa),x.snapshot}(e,f,d,h);const s=await lge(e.localStore,t,!0),o=new S9t(t,s.hs),a=o.da(s.documents),u=TR.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);gge(e,n,l.fa);const c=new T9t(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function N9t(e,t,n){const r=pn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!M4(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await dq(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ete(r.remoteStore,i.targetId),pq(r,i.targetId)}).catch(ER)):(pq(r,i.targetId),await dq(r.localStore,i.targetId,!0))}async function D9t(e,t){const n=pn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ete(n.remoteStore,r.targetId))}async function P9t(e,t,n){const r=j9t(e);try{const i=await function(o,a){const u=pn(o),l=js.now(),c=a.reduce((h,p)=>h.add(p.key),Hn());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Zm(),m=Hn();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const b=n8t(v,f.get(v.key).overlayedDocument);b!=null&&y.push(new iv(v.key,b,tMe(b.value.mapValue),Qu.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:dMe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new ji(wr)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await IR(r,i.changes),await V4(r.remoteStore)}catch(i){const s=ste(i,"Failed to persist write");n.reject(s)}}async function YMe(e,t){const n=pn(e);try{const r=await Y8t(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(ui(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?ui(o.wa):i.removedDocuments.size>0&&(ui(o.wa),o.wa=!1))}),await IR(n,r,t)}catch(r){await ER(r)}}function mge(e,t,n){const r=pn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=pn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&ote(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function O9t(e,t,n){const r=pn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new ji(zt.comparator);o=o.insert(s,ya.newNoDocument(s,hn.min()));const a=Hn().add(s),u=new U4(hn.min(),new Map,new ji(wr),o,a);await YMe(r,u),r.va=r.va.remove(s),r.Fa.delete(t),ate(r)}else await dq(r.localStore,t,!1).then(()=>pq(r,t,n)).catch(ER)}async function $9t(e,t){const n=pn(e),r=t.batch.batchId;try{const i=await G8t(n.localStore,t);XMe(n,r,null),KMe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await IR(n,i)}catch(i){await ER(i)}}async function M9t(e,t,n){const r=pn(e);try{const i=await function(o,a){const u=pn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(ui(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);XMe(r,t,n),KMe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await IR(r,i)}catch(i){await ER(i)}}function KMe(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function XMe(e,t,n){const r=pn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function pq(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||QMe(e,r)})}function QMe(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(ete(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),ate(e))}function gge(e,t,n){for(const r of n)r instanceof qMe?(e.Ma.addReference(r.key,t),L9t(e,r)):r instanceof WMe?(kt("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||QMe(e,r.key)):ln()}function L9t(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(kt("SyncEngine","New document in limbo: "+n),e.Ca.add(r),ate(e))}function ate(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new zt(hi.fromString(t)),r=e.Na.next();e.Fa.set(r,new C9t(n)),e.va=e.va.insert(n,r),MMe(e.remoteStore,new m0(kh(Gee(n.path)),r,"TargetPurposeLimboResolution",Uee.oe))}}async function IR(e,t,n){const r=pn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=Zee.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=pn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Xe.forEach(l,d=>Xe.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Xe.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!xR(f))throw f;kt("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function F9t(e,t){const n=pn(e);if(!n.currentUser.isEqual(t)){kt("SyncEngine","User change. New user:",t.toKey());const r=await DMe(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new _t(je.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await IR(n,r.us)}}function B9t(e,t){const n=pn(e),r=n.Fa.get(t);if(r&&r.wa)return Hn().add(r.key);{let i=Hn();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function JMe(e){const t=pn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=YMe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=B9t.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=O9t.bind(null,t),t.Sa.h_=E9t.bind(null,t.eventManager),t.Sa.ka=x9t.bind(null,t.eventManager),t}function j9t(e){const t=pn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=$9t.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=M9t.bind(null,t),t}class yge{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=z4(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return W8t(this.persistence,new H8t,t.initialUser,this.serializer)}createPersistence(t){return new U8t(Jee.Hr,this.serializer)}createSharedClientState(t){return new Z8t}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class U9t{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>mge(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=F9t.bind(null,this.syncEngine),await b9t(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new w9t}()}createDatastore(t){const n=z4(t.databaseInfo.databaseId),r=function(s){return new r9t(s)}(t.databaseInfo);return function(s,o,a,u){return new o9t(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new u9t(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>mge(this.syncEngine,n,0),function(){return fge.D()?new fge:new e9t}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new A9t(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=pn(r);kt("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await AR(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZMe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Jm("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z9t{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Cu.UNAUTHENTICATED,this.clientId=J$e.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{kt("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(kt("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new _t(je.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Em;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=ste(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function J9(e,t){e.asyncQueue.verifyOperationInProgress(),kt("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await DMe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function vge(e,t){e.asyncQueue.verifyOperationInProgress();const n=await e3e(e);kt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>dge(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>dge(t.remoteStore,i)),e._onlineComponents=t}function V9t(e){return e.name==="FirebaseError"?e.code===je.FAILED_PRECONDITION||e.code===je.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function e3e(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){kt("FirestoreClient","Using user provided OfflineComponentProvider");try{await J9(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!V9t(n))throw n;LI("Error using user provided cache. Falling back to memory cache: "+n),await J9(e,new yge)}}else kt("FirestoreClient","Using default OfflineComponentProvider"),await J9(e,new yge);return e._offlineComponents}async function ute(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(kt("FirestoreClient","Using user provided OnlineComponentProvider"),await vge(e,e._uninitializedComponentsProvider._online)):(kt("FirestoreClient","Using default OnlineComponentProvider"),await vge(e,new U9t))),e._onlineComponents}function H9t(e){return e3e(e).then(t=>t.persistence)}function q9t(e){return ute(e).then(t=>t.remoteStore)}function W9t(e){return ute(e).then(t=>t.syncEngine)}async function t3e(e){const t=await ute(e),n=t.eventManager;return n.onListen=I9t.bind(null,t.syncEngine),n.onUnlisten=N9t.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=k9t.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=D9t.bind(null,t.syncEngine),n}function G9t(e){return e.asyncQueue.enqueue(async()=>{const t=await H9t(e),n=await q9t(e);return t.setNetworkEnabled(!0),function(i){const s=pn(i);return s.M_.delete(0),CR(s)}(n)})}function Y9t(e,t,n={}){const r=new Em;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new ZMe({next:d=>{o.enqueueAndForget(()=>VMe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new _t(je.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new _t(je.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new HMe(Gee(a.path),c,{includeMetadataChanges:!0,ra:!0});return zMe(s,f)}(await t3e(e),e.asyncQueue,t,n,r)),r.promise}function K9t(e,t,n={}){const r=new Em;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new ZMe({next:d=>{o.enqueueAndForget(()=>VMe(s,f)),d.fromCache&&u.source==="server"?l.reject(new _t(je.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new HMe(a,c,{includeMetadataChanges:!0,ra:!0});return zMe(s,f)}(await t3e(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n3e(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bge=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3e(e,t,n){if(!n)throw new _t(je.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function X9t(e,t,n,r){if(t===!0&&r===!0)throw new _t(je.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function _ge(e){if(!zt.isDocumentKey(e))throw new _t(je.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function wge(e){if(zt.isDocumentKey(e))throw new _t(je.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function H4(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":ln()}function cd(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new _t(je.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=H4(e);throw new _t(je.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ege{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new _t(je.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new _t(je.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}X9t("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=n3e((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new _t(je.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new _t(je.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new _t(je.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class lte{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ege({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new _t(je.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new _t(je.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ege(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new djt;switch(r.type){case"firstParty":return new mjt(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _t(je.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=bge.get(n);r&&(kt("ComponentProvider","Removing Datastore"),bge.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new c_(this.firestore,t,this._query)}}class nu{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new H0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new nu(this.firestore,t,this._key)}}class H0 extends c_{constructor(t,n,r){super(t,n,Gee(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new nu(this.firestore,null,new zt(t))}withConverter(t){return new H0(this.firestore,t,this._path)}}function vf(e,t,...n){if(e=li(e),r3e("collection","path",t),e instanceof lte){const r=hi.fromString(t,...n);return wge(r),new H0(e,null,r)}{if(!(e instanceof nu||e instanceof H0))throw new _t(je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(hi.fromString(t,...n));return wge(r),new H0(e.firestore,null,r)}}function Rs(e,t,...n){if(e=li(e),arguments.length===1&&(t=J$e.newId()),r3e("doc","path",t),e instanceof lte){const r=hi.fromString(t,...n);return _ge(r),new nu(e,null,new zt(r))}{if(!(e instanceof nu||e instanceof H0))throw new _t(je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(hi.fromString(t,...n));return _ge(r),new nu(e.firestore,e instanceof H0?e.converter:null,new zt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q9t{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new OMe(this,"async_queue_retry"),this.hu=()=>{const n=Q9();n&&kt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=Q9();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=Q9();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Em;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!xR(t))throw t;kt("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Jm("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=ite.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&ln()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class sv extends lte{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new Q9t}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||i3e(this),this._firestoreClient.terminate()}}function J9t(e,t,n){n||(n="(default)");const r=YS(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(OI(s,t))return i;throw new _t(je.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new _t(je.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new _t(je.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function kR(e){return e._firestoreClient||i3e(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function i3e(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new Ijt(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,n3e(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new z9t(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Z9t(e){return G9t(kR(e=cd(e,sv)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ix(ka.fromBase64String(t))}catch(n){throw new _t(je.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ix(ka.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new _t(je.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lo(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cte=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new _t(je.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new _t(je.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return wr(this._lat,t._lat)||wr(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eUt=/^__.*__$/;class tUt{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new iv(t,this.data,this.fieldMask,n,this.fieldTransforms):new SR(t,this.data,n,this.fieldTransforms)}}class s3e{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new iv(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function o3e(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ln()}}class fte{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new fte(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return P3(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(o3e(this.fu)&&eUt.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class nUt{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||z4(t)}Fu(t,n,r,i=!1){return new fte({fu:t,methodName:n,vu:r,path:Lo.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function W4(e){const t=e._freezeSettings(),n=z4(e._databaseId);return new nUt(e._databaseId,!!t.ignoreUndefinedProperties,n)}function a3e(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);hte("Data must be an object, but it was:",o,r);const a=c3e(r,o);let u,l;if(s.merge)u=new $l(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=mq(t,f,n);if(!o.contains(d))throw new _t(je.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);d3e(c,d)||c.push(d)}u=new $l(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new tUt(new Lu(a),u,l)}class G4 extends q4{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof G4}}class dte extends q4{_toFieldTransform(t){return new Jjt(t.path,new VI)}isEqual(t){return t instanceof dte}}function u3e(e,t,n,r){const i=e.Fu(1,t,n);hte("Data must be an object, but it was:",i,r);const s=[],o=Lu.empty();u_(r,(u,l)=>{const c=pte(t,u,n);l=li(l);const f=i.Su(c);if(l instanceof G4)s.push(c);else{const d=NR(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new $l(s);return new s3e(o,a,i.fieldTransforms)}function l3e(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[mq(t,r,n)],u=[i];if(s.length%2!=0)throw new _t(je.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(mq(t,s[d])),u.push(s[d+1]);const l=[],c=Lu.empty();for(let d=a.length-1;d>=0;--d)if(!d3e(l,a[d])){const h=a[d];let p=u[d];p=li(p);const m=o.Su(h);if(p instanceof G4)l.push(h);else{const g=NR(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new $l(l);return new s3e(c,f,o.fieldTransforms)}function rUt(e,t,n,r=!1){return NR(n,e.Fu(r?4:3,t))}function NR(e,t){if(f3e(e=li(e)))return hte("Unsupported field value:",t,e),c3e(e,t);if(e instanceof q4)return function(r,i){if(!o3e(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=NR(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=li(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Kjt(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=js.fromDate(r);return{timestampValue:N3(i.serializer,s)}}if(r instanceof js){const s=new js(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:N3(i.serializer,s)}}if(r instanceof cte)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ix)return{bytesValue:TMe(i.serializer,r._byteString)};if(r instanceof nu){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Xee(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${H4(r)}`)}(e,t)}function c3e(e,t){const n={};return Z$e(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):u_(e,(r,i)=>{const s=NR(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function f3e(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof js||e instanceof cte||e instanceof Ix||e instanceof nu||e instanceof q4)}function hte(e,t,n){if(!f3e(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=H4(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function mq(e,t,n){if((t=li(t))instanceof RR)return t._internalPath;if(typeof t=="string")return pte(e,t);throw P3("Field path arguments must be of type string or ",e,!1,void 0,n)}const iUt=new RegExp("[~\\*/\\[\\]]");function pte(e,t,n){if(t.search(iUt)>=0)throw P3(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new RR(...t.split("."))._internalPath}catch{throw P3(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function P3(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new _t(je.INVALID_ARGUMENT,a+e+u)}function d3e(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3e{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new nu(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new sUt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Y4("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sUt extends h3e{data(){return super.data()}}function Y4(e,t){return typeof t=="string"?pte(e,t):t instanceof RR?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oUt(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new _t(je.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mte{}class p3e extends mte{}function xge(e,t,...n){let r=[];t instanceof mte&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof gte).length,a=s.filter(u=>u instanceof K4).length;if(o>1||o>0&&a>0)throw new _t(je.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class K4 extends p3e{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new K4(t,n,r)}_apply(t){const n=this._parse(t);return m3e(t._query,n),new c_(t.firestore,t.converter,oq(t._query,n))}_parse(t){const n=W4(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new _t(je.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){Tge(f,c);const h=[];for(const p of f)h.push(Sge(u,s,p));d={arrayValue:{values:h}}}else d=Sge(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||Tge(f,c),d=rUt(a,o,f,c==="in"||c==="not-in");return xs.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function aUt(e,t,n){const r=t,i=Y4("where",e);return K4._create(i,r,n)}class gte extends mte{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new gte(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ld.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)m3e(o,u),o=oq(o,u)}(t._query,n),new c_(t.firestore,t.converter,oq(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class yte extends p3e{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new yte(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new _t(je.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new _t(je.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zI(s,o)}(t._query,this._field,this._direction);return new c_(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new QS(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function uUt(e,t="asc"){const n=t,r=Y4("orderBy",e);return yte._create(r,n)}function Sge(e,t,n){if(typeof(n=li(n))=="string"){if(n==="")throw new _t(je.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uMe(t)&&n.indexOf("/")!==-1)throw new _t(je.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(hi.fromString(n));if(!zt.isDocumentKey(r))throw new _t(je.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wme(e,new zt(r))}if(n instanceof nu)return Wme(e,n._key);throw new _t(je.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${H4(n)}.`)}function Tge(e,t){if(!Array.isArray(e)||e.length===0)throw new _t(je.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function m3e(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new _t(je.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new _t(je.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class lUt{convertValue(t,n="none"){switch(Sb(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ws(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(xb(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw ln()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return u_(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new cte(ws(t.latitude),ws(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Vee(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(BI(t));default:return null}}convertTimestamp(t){const n=Sy(t);return new js(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=hi.fromString(t);ui(NMe(r));const i=new jI(r.get(1),r.get(3)),s=new zt(r.popFirst(5));return i.isEqual(n)||Jm(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g3e(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class y3e extends h3e{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new yO(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Y4("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class yO extends y3e{data(t={}){return super.data(t)}}class cUt{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new nA(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new yO(this._firestore,this._userDataWriter,r.key,r,new nA(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new _t(je.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new yO(i._firestore,i._userDataWriter,a.doc.key,a.doc,new nA(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new yO(i._firestore,i._userDataWriter,a.doc.key,a.doc,new nA(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:fUt(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function fUt(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ln()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z9(e){e=cd(e,nu);const t=cd(e.firestore,sv);return Y9t(kR(t),e._key).then(n=>pUt(t,e,n))}class v3e extends lUt{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ix(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new nu(this.firestore,null,n)}}function oC(e){e=cd(e,c_);const t=cd(e.firestore,sv),n=kR(t),r=new v3e(t);return oUt(e._query),K9t(n,e._query).then(i=>new cUt(t,r,e,i))}function bl(e,t,n){e=cd(e,nu);const r=cd(e.firestore,sv),i=g3e(e.converter,t,n);return X4(r,[a3e(W4(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Qu.none())])}function dUt(e,t,n,...r){e=cd(e,nu);const i=cd(e.firestore,sv),s=W4(i);let o;return o=typeof(t=li(t))=="string"||t instanceof RR?l3e(s,"updateDoc",e._key,t,n,r):u3e(s,"updateDoc",e._key,t),X4(i,[o.toMutation(e._key,Qu.exists(!0))])}function hUt(e){return X4(cd(e.firestore,sv),[new j4(e._key,Qu.none())])}function X4(e,t){return function(r,i){const s=new Em;return r.asyncQueue.enqueueAndForget(async()=>P9t(await W9t(r),i,s)),s.promise}(kR(e),t)}function pUt(e,t,n){const r=n.docs.get(t._key),i=new v3e(e);return new y3e(e,i,t._key,r,new nA(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mUt{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=W4(t)}set(t,n,r){this._verifyNotCommitted();const i=eU(t,this._firestore),s=g3e(i.converter,n,r),o=a3e(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Qu.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=eU(t,this._firestore);let o;return o=typeof(n=li(n))=="string"||n instanceof RR?l3e(this._dataReader,"WriteBatch.update",s._key,n,r,i):u3e(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Qu.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=eU(t,this._firestore);return this._mutations=this._mutations.concat(new j4(n._key,Qu.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _t(je.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function eU(e,t){if((e=li(e)).firestore!==t)throw new _t(je.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function gUt(){return new dte("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cge(e){return kR(e=cd(e,sv)),new mUt(e,t=>X4(e,t))}(function(t,n=!0){(function(i){XS=i})(a_),Xm(new qh("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new sv(new hjt(r.getProvider("auth-internal")),new yjt(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new _t(je.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jI(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ed(zme,"4.6.3",t),ed(zme,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gq=new Map,b3e={activated:!1,tokenObservers:[]},yUt={initialized:!1,enabled:!1};function Us(e){return gq.get(e)||Object.assign({},b3e)}function vUt(e,t){return gq.set(e,t),gq.get(e)}function Q4(){return yUt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _3e="https://content-firebaseappcheck.googleapis.com/v1",bUt="exchangeRecaptchaV3Token",_Ut="exchangeDebugToken",Age={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},wUt=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EUt{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new PI,this.pending.promise.catch(n=>{}),await xUt(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new PI,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function xUt(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SUt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Hu=new GS("appCheck","AppCheck",SUt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ige(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function vte(e){if(!Us(e).activated)throw Hu.create("use-before-activation",{appName:e.name})}function w3e(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=VD(n)+"d:"),r&&(o+=VD(r)+"h:"),o+=VD(i)+"m:"+VD(s)+"s",o}function VD(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bte({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw Hu.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Hu.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Hu.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Hu.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function TUt(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${_3e}/projects/${n}/apps/${r}:${bUt}?key=${i}`,body:{recaptcha_v3_token:t}}}function E3e(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${_3e}/projects/${n}/apps/${r}:${_Ut}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CUt="firebase-app-check-database",AUt=1,WI="firebase-app-check-store",x3e="debug-token";let HD=null;function S3e(){return HD||(HD=new Promise((e,t)=>{try{const n=indexedDB.open(CUt,AUt);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Hu.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(WI,{keyPath:"compositeKey"})}}}catch(n){t(Hu.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),HD)}function IUt(e){return C3e(A3e(e))}function kUt(e,t){return T3e(A3e(e),t)}function RUt(e){return T3e(x3e,e)}function NUt(){return C3e(x3e)}async function T3e(e,t){const r=(await S3e()).transaction(WI,"readwrite"),s=r.objectStore(WI).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Hu.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function C3e(e){const n=(await S3e()).transaction(WI,"readonly"),i=n.objectStore(WI).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Hu.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function A3e(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=new I4("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DUt(e){if(wee()){let t;try{t=await IUt(e)}catch(n){GI.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function tU(e,t){return wee()?kUt(e,t).catch(n=>{GI.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function PUt(){let e;try{e=await NUt()}catch{}if(e)return e;{const t=D6t();return RUt(t).catch(n=>GI.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _te(){return Q4().enabled}async function wte(){const e=Q4();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function OUt(){const e=HOe(),t=Q4();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new PI;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(PUt())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Ut={error:"UNKNOWN_ERROR"};function MUt(e){return _ee.encodeString(JSON.stringify(e),!1)}async function yq(e,t=!1){const n=e.app;vte(n);const r=Us(n);let i=r.token,s;if(i&&!Fw(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(Fw(u)?i=u:await tU(n,void 0))}if(!t&&i&&Fw(i))return{token:i.token};let o=!1;if(_te()){r.exchangeTokenPromise||(r.exchangeTokenPromise=bte(E3e(n,await wte()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await tU(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Us(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?GI.warn(u.message):GI.error(u),s=u}let a;return i?s?Fw(i)?a={token:i.token,internalError:s}:a=Rge(s):(a={token:i.token},r.token=i,await tU(n,i)):a=Rge(s),o&&R3e(n,a),a}async function LUt(e){const t=e.app;vte(t);const{provider:n}=Us(t);if(_te()){const r=await wte(),{token:i}=await bte(E3e(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function I3e(e,t,n,r){const{app:i}=e,s=Us(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Fw(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),kge(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>kge(e))}function k3e(e,t){const n=Us(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function kge(e){const{app:t}=e,n=Us(t);let r=n.tokenRefresher;r||(r=FUt(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function FUt(e){const{app:t}=e;return new EUt(async()=>{const n=Us(t);let r;if(n.token?r=await yq(e,!0):r=await yq(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Us(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Age.RETRIAL_MIN_WAIT,Age.RETRIAL_MAX_WAIT)}function R3e(e,t){const n=Us(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function Fw(e){return e.expireTimeMillis-Date.now()>0}function Rge(e){return{token:MUt($Ut),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BUt{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Us(this.app);for(const n of t)k3e(this.app,n.next);return Promise.resolve()}}function jUt(e,t){return new BUt(e,t)}function UUt(e){return{getToken:t=>yq(e,t),getLimitedUseToken:()=>LUt(e),addTokenListener:t=>I3e(e,"INTERNAL",t),removeTokenListener:t=>k3e(e.app,t)}}const zUt="@firebase/app-check",VUt="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HUt="https://www.google.com/recaptcha/api.js";function qUt(e,t){const n=new PI,r=Us(e);r.reCAPTCHAState={initialized:n};const i=WUt(e),s=Ige(!1);return s?Nge(e,t,s,i,n):KUt(()=>{const o=Ige(!1);if(!o)throw new Error("no recaptcha");Nge(e,t,o,i,n)}),n.promise}function Nge(e,t,n,r,i){n.ready(()=>{YUt(e,t,n,r),i.resolve(n)})}function WUt(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function GUt(e){vte(e);const n=await Us(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Us(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function YUt(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{Us(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Us(e).reCAPTCHAState.succeeded=!1}}),s=Us(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function KUt(e){const t=document.createElement("script");t.src=HUt,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ete{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;QUt(this._throttleData);const i=await GUt(this._app).catch(o=>{throw Hu.create("recaptcha-error")});if(!(!((t=Us(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Hu.create("recaptcha-error");let s;try{s=await bte(TUt(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=XUt(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Hu.create("throttled",{time:w3e(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=YS(t,"heartbeat"),qUt(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof Ete?this._siteKey===t._siteKey:!1}}function XUt(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+wUt,httpStatus:e};{const n=t?t.backoffCount:0,r=L6t(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function QUt(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Hu.create("throttled",{time:w3e(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JUt(e=xee(),t){e=li(e);const n=YS(e,"app-check");if(Q4().initialized||OUt(),_te()&&wte().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Hu.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return ZUt(e,t.provider,t.isTokenAutoRefreshEnabled),Us(e).isTokenAutoRefreshEnabled&&I3e(r,"INTERNAL",()=>{}),r}function ZUt(e,t,n){const r=vUt(e,Object.assign({},b3e));r.activated=!0,r.provider=t,r.cachedTokenPromise=DUt(e).then(i=>(i&&Fw(i)&&(r.token=i,R3e(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const e7t="app-check",Dge="app-check-internal";function t7t(){Xm(new qh(e7t,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return jUt(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(Dge).initialize()})),Xm(new qh(Dge,e=>{const t=e.getProvider("app-check").getImmediate();return UUt(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),ed(zUt,VUt)}t7t();function qD(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var N3e={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof qD=="function"&&qD;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof qD=="function"&&qD,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof oo<"u"?oo:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==o&&m(this,E)}f.prototype.catch=function(E){return this.then(null,E)},f.prototype.then=function(E,x){if(typeof E!="function"&&this.state===l||typeof x!="function"&&this.state===u)return this;var T=new this.constructor(o);if(this.state!==c){var C=this.state===l?E:x;h(T,C,this.outcome)}else this.queue.push(new d(T,E,x));return T};function d(E,x,T){this.promise=E,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},d.prototype.otherCallFulfilled=function(E){h(this.promise,this.onFulfilled,E)},d.prototype.callRejected=function(E){a.reject(this.promise,E)},d.prototype.otherCallRejected=function(E){h(this.promise,this.onRejected,E)};function h(E,x,T){s(function(){var C;try{C=x(T)}catch(A){return a.reject(E,A)}C===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,C)})}a.resolve=function(E,x){var T=g(p,x);if(T.status==="error")return a.reject(E,T.value);var C=T.value;if(C)m(E,C);else{E.state=l,E.outcome=x;for(var A=-1,k=E.queue.length;++A<k;)E.queue[A].callFulfilled(x)}return E},a.reject=function(E,x){E.state=u,E.outcome=x;for(var T=-1,C=E.queue.length;++T<C;)E.queue[T].callRejected(x);return E};function p(E){var x=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof x=="function")return function(){x.apply(E,arguments)}}function m(E,x){var T=!1;function C(O){T||(T=!0,a.reject(E,O))}function A(O){T||(T=!0,a.resolve(E,O))}function k(){x(A,C)}var R=g(k);R.status==="error"&&C(R.value)}function g(E,x){var T={};try{T.value=E(x),T.status="success"}catch(C){T.status="error",T.value=C}return T}f.resolve=y;function y(E){return E instanceof this?E:a.resolve(new this(o),E)}f.reject=v;function v(E){var x=new this(o);return a.reject(x,E)}f.all=b;function b(E){var x=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=E.length,C=!1;if(!T)return this.resolve([]);for(var A=new Array(T),k=0,R=-1,O=new this(o);++R<T;)D(E[R],R);return O;function D($,F){x.resolve($).then(L,function(j){C||(C=!0,a.reject(O,j))});function L(j){A[F]=j,++k===T&&!C&&(C=!0,a.resolve(O,A))}}}f.race=w;function w(E){var x=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=E.length,C=!1;if(!T)return this.resolve([]);for(var A=-1,k=new this(o);++A<T;)R(E[A]);return k;function R(O){x.resolve(O).then(function(D){C||(C=!0,a.resolve(k,D))},function(D){C||(C=!0,a.reject(k,D))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof oo<"u"?oo:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function o(Y,se){if(!(Y instanceof se))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var Y=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),se=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||se)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(Y,se){Y=Y||[],se=se||{};try{return new Blob(Y,se)}catch(ce){if(ce.name!=="TypeError")throw ce;for(var Z=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,he=new Z,ve=0;ve<Y.length;ve+=1)he.append(Y[ve]);return he.getBlob(se.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(Y,se){se&&Y.then(function(Z){se(null,Z)},function(Z){se(Z)})}function h(Y,se,Z){typeof se=="function"&&Y.then(se),typeof Z=="function"&&Y.catch(Z)}function p(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},b=Object.prototype.toString,w="readonly",E="readwrite";function x(Y){for(var se=Y.length,Z=new ArrayBuffer(se),he=new Uint8Array(Z),ve=0;ve<se;ve++)he[ve]=Y.charCodeAt(ve);return Z}function T(Y){return new f(function(se){var Z=Y.transaction(g,E),he=c([""]);Z.objectStore(g).put(he,"key"),Z.onabort=function(ve){ve.preventDefault(),ve.stopPropagation(),se(!1)},Z.oncomplete=function(){var ve=navigator.userAgent.match(/Chrome\/(\d+)/),ce=navigator.userAgent.match(/Edge\//);se(ce||!ve||parseInt(ve[1],10)>=43)}}).catch(function(){return!1})}function C(Y){return typeof y=="boolean"?f.resolve(y):T(Y).then(function(se){return y=se,y})}function A(Y){var se=v[Y.name],Z={};Z.promise=new f(function(he,ve){Z.resolve=he,Z.reject=ve}),se.deferredOperations.push(Z),se.dbReady?se.dbReady=se.dbReady.then(function(){return Z.promise}):se.dbReady=Z.promise}function k(Y){var se=v[Y.name],Z=se.deferredOperations.pop();if(Z)return Z.resolve(),Z.promise}function R(Y,se){var Z=v[Y.name],he=Z.deferredOperations.pop();if(he)return he.reject(se),he.promise}function O(Y,se){return new f(function(Z,he){if(v[Y.name]=v[Y.name]||W(),Y.db)if(se)A(Y),Y.db.close();else return Z(Y.db);var ve=[Y.name];se&&ve.push(Y.version);var ce=u.open.apply(u,ve);se&&(ce.onupgradeneeded=function(Oe){var Ve=ce.result;try{Ve.createObjectStore(Y.storeName),Oe.oldVersion<=1&&Ve.createObjectStore(g)}catch(We){if(We.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+Oe.oldVersion+" to version "+Oe.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw We}}),ce.onerror=function(Oe){Oe.preventDefault(),he(ce.error)},ce.onsuccess=function(){var Oe=ce.result;Oe.onversionchange=function(Ve){Ve.target.close()},Z(Oe),k(Y)}})}function D(Y){return O(Y,!1)}function $(Y){return O(Y,!0)}function F(Y,se){if(!Y.db)return!0;var Z=!Y.db.objectStoreNames.contains(Y.storeName),he=Y.version<Y.db.version,ve=Y.version>Y.db.version;if(he&&(Y.version!==se&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),ve||Z){if(Z){var ce=Y.db.version+1;ce>Y.version&&(Y.version=ce)}return!0}return!1}function L(Y){return new f(function(se,Z){var he=new FileReader;he.onerror=Z,he.onloadend=function(ve){var ce=btoa(ve.target.result||"");se({__local_forage_encoded_blob:!0,data:ce,type:Y.type})},he.readAsBinaryString(Y)})}function j(Y){var se=x(atob(Y.data));return c([se],{type:Y.type})}function z(Y){return Y&&Y.__local_forage_encoded_blob}function q(Y){var se=this,Z=se._initReady().then(function(){var he=v[se._dbInfo.name];if(he&&he.dbReady)return he.dbReady});return h(Z,Y,Y),Z}function P(Y){A(Y);for(var se=v[Y.name],Z=se.forages,he=0;he<Z.length;he++){var ve=Z[he];ve._dbInfo.db&&(ve._dbInfo.db.close(),ve._dbInfo.db=null)}return Y.db=null,D(Y).then(function(ce){return Y.db=ce,F(Y)?$(Y):ce}).then(function(ce){Y.db=se.db=ce;for(var Oe=0;Oe<Z.length;Oe++)Z[Oe]._dbInfo.db=ce}).catch(function(ce){throw R(Y,ce),ce})}function U(Y,se,Z,he){he===void 0&&(he=1);try{var ve=Y.db.transaction(Y.storeName,se);Z(null,ve)}catch(ce){if(he>0&&(!Y.db||ce.name==="InvalidStateError"||ce.name==="NotFoundError"))return f.resolve().then(function(){if(!Y.db||ce.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),$(Y)}).then(function(){return P(Y).then(function(){U(Y,se,Z,he-1)})}).catch(Z);Z(ce)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function B(Y){var se=this,Z={db:null};if(Y)for(var he in Y)Z[he]=Y[he];var ve=v[Z.name];ve||(ve=W(),v[Z.name]=ve),ve.forages.push(se),se._initReady||(se._initReady=se.ready,se.ready=q);var ce=[];function Oe(){return f.resolve()}for(var Ve=0;Ve<ve.forages.length;Ve++){var We=ve.forages[Ve];We!==se&&ce.push(We._initReady().catch(Oe))}var Ye=ve.forages.slice(0);return f.all(ce).then(function(){return Z.db=ve.db,D(Z)}).then(function(st){return Z.db=st,F(Z,se._defaultConfig.version)?$(Z):st}).then(function(st){Z.db=ve.db=st,se._dbInfo=Z;for(var xt=0;xt<Ye.length;xt++){var gn=Ye[xt];gn!==se&&(gn._dbInfo.db=Z.db,gn._dbInfo.version=Z.version)}})}function H(Y,se){var Z=this;Y=p(Y);var he=new f(function(ve,ce){Z.ready().then(function(){U(Z._dbInfo,w,function(Oe,Ve){if(Oe)return ce(Oe);try{var We=Ve.objectStore(Z._dbInfo.storeName),Ye=We.get(Y);Ye.onsuccess=function(){var st=Ye.result;st===void 0&&(st=null),z(st)&&(st=j(st)),ve(st)},Ye.onerror=function(){ce(Ye.error)}}catch(st){ce(st)}})}).catch(ce)});return d(he,se),he}function G(Y,se){var Z=this,he=new f(function(ve,ce){Z.ready().then(function(){U(Z._dbInfo,w,function(Oe,Ve){if(Oe)return ce(Oe);try{var We=Ve.objectStore(Z._dbInfo.storeName),Ye=We.openCursor(),st=1;Ye.onsuccess=function(){var xt=Ye.result;if(xt){var gn=xt.value;z(gn)&&(gn=j(gn));var Dt=Y(gn,xt.key,st++);Dt!==void 0?ve(Dt):xt.continue()}else ve()},Ye.onerror=function(){ce(Ye.error)}}catch(xt){ce(xt)}})}).catch(ce)});return d(he,se),he}function te(Y,se,Z){var he=this;Y=p(Y);var ve=new f(function(ce,Oe){var Ve;he.ready().then(function(){return Ve=he._dbInfo,b.call(se)==="[object Blob]"?C(Ve.db).then(function(We){return We?se:L(se)}):se}).then(function(We){U(he._dbInfo,E,function(Ye,st){if(Ye)return Oe(Ye);try{var xt=st.objectStore(he._dbInfo.storeName);We===null&&(We=void 0);var gn=xt.put(We,Y);st.oncomplete=function(){We===void 0&&(We=null),ce(We)},st.onabort=st.onerror=function(){var Dt=gn.error?gn.error:gn.transaction.error;Oe(Dt)}}catch(Dt){Oe(Dt)}})}).catch(Oe)});return d(ve,Z),ve}function le(Y,se){var Z=this;Y=p(Y);var he=new f(function(ve,ce){Z.ready().then(function(){U(Z._dbInfo,E,function(Oe,Ve){if(Oe)return ce(Oe);try{var We=Ve.objectStore(Z._dbInfo.storeName),Ye=We.delete(Y);Ve.oncomplete=function(){ve()},Ve.onerror=function(){ce(Ye.error)},Ve.onabort=function(){var st=Ye.error?Ye.error:Ye.transaction.error;ce(st)}}catch(st){ce(st)}})}).catch(ce)});return d(he,se),he}function fe(Y){var se=this,Z=new f(function(he,ve){se.ready().then(function(){U(se._dbInfo,E,function(ce,Oe){if(ce)return ve(ce);try{var Ve=Oe.objectStore(se._dbInfo.storeName),We=Ve.clear();Oe.oncomplete=function(){he()},Oe.onabort=Oe.onerror=function(){var Ye=We.error?We.error:We.transaction.error;ve(Ye)}}catch(Ye){ve(Ye)}})}).catch(ve)});return d(Z,Y),Z}function de(Y){var se=this,Z=new f(function(he,ve){se.ready().then(function(){U(se._dbInfo,w,function(ce,Oe){if(ce)return ve(ce);try{var Ve=Oe.objectStore(se._dbInfo.storeName),We=Ve.count();We.onsuccess=function(){he(We.result)},We.onerror=function(){ve(We.error)}}catch(Ye){ve(Ye)}})}).catch(ve)});return d(Z,Y),Z}function ge(Y,se){var Z=this,he=new f(function(ve,ce){if(Y<0){ve(null);return}Z.ready().then(function(){U(Z._dbInfo,w,function(Oe,Ve){if(Oe)return ce(Oe);try{var We=Ve.objectStore(Z._dbInfo.storeName),Ye=!1,st=We.openKeyCursor();st.onsuccess=function(){var xt=st.result;if(!xt){ve(null);return}Y===0||Ye?ve(xt.key):(Ye=!0,xt.advance(Y))},st.onerror=function(){ce(st.error)}}catch(xt){ce(xt)}})}).catch(ce)});return d(he,se),he}function Ie(Y){var se=this,Z=new f(function(he,ve){se.ready().then(function(){U(se._dbInfo,w,function(ce,Oe){if(ce)return ve(ce);try{var Ve=Oe.objectStore(se._dbInfo.storeName),We=Ve.openKeyCursor(),Ye=[];We.onsuccess=function(){var st=We.result;if(!st){he(Ye);return}Ye.push(st.key),st.continue()},We.onerror=function(){ve(We.error)}}catch(st){ve(st)}})}).catch(ve)});return d(Z,Y),Z}function pe(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var he=this,ve;if(!Y.name)ve=f.reject("Invalid arguments");else{var ce=Y.name===Z.name&&he._dbInfo.db,Oe=ce?f.resolve(he._dbInfo.db):D(Y).then(function(Ve){var We=v[Y.name],Ye=We.forages;We.db=Ve;for(var st=0;st<Ye.length;st++)Ye[st]._dbInfo.db=Ve;return Ve});Y.storeName?ve=Oe.then(function(Ve){if(Ve.objectStoreNames.contains(Y.storeName)){var We=Ve.version+1;A(Y);var Ye=v[Y.name],st=Ye.forages;Ve.close();for(var xt=0;xt<st.length;xt++){var gn=st[xt];gn._dbInfo.db=null,gn._dbInfo.version=We}var Dt=new f(function(zn,Nr){var Dr=u.open(Y.name,We);Dr.onerror=function(Zo){var Nd=Dr.result;Nd.close(),Nr(Zo)},Dr.onupgradeneeded=function(){var Zo=Dr.result;Zo.deleteObjectStore(Y.storeName)},Dr.onsuccess=function(){var Zo=Dr.result;Zo.close(),zn(Zo)}});return Dt.then(function(zn){Ye.db=zn;for(var Nr=0;Nr<st.length;Nr++){var Dr=st[Nr];Dr._dbInfo.db=zn,k(Dr._dbInfo)}}).catch(function(zn){throw(R(Y,zn)||f.resolve()).catch(function(){}),zn})}}):ve=Oe.then(function(Ve){A(Y);var We=v[Y.name],Ye=We.forages;Ve.close();for(var st=0;st<Ye.length;st++){var xt=Ye[st];xt._dbInfo.db=null}var gn=new f(function(Dt,zn){var Nr=u.deleteDatabase(Y.name);Nr.onerror=function(){var Dr=Nr.result;Dr&&Dr.close(),zn(Nr.error)},Nr.onblocked=function(){console.warn('dropInstance blocked for database "'+Y.name+'" until all open connections are closed')},Nr.onsuccess=function(){var Dr=Nr.result;Dr&&Dr.close(),Dt(Dr)}});return gn.then(function(Dt){We.db=Dt;for(var zn=0;zn<Ye.length;zn++){var Nr=Ye[zn];k(Nr._dbInfo)}}).catch(function(Dt){throw(R(Y,Dt)||f.resolve()).catch(function(){}),Dt})})}return d(ve,se),ve}var He={_driver:"asyncStorage",_initStorage:B,_support:l(),iterate:G,getItem:H,setItem:te,removeItem:le,clear:fe,length:de,key:ge,keys:Ie,dropInstance:pe};function Ue(){return typeof openDatabase=="function"}var yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",it="~~local_forage_type~",be=/^~~local_forage_type~([^~]+)~/,ke="__lfsc__:",ze=ke.length,ct="arbf",Ot="blob",Ge="si08",ye="ui08",ht="uic8",bt="si16",me="si32",Ae="ur16",qe="ui32",ut="fl32",wt="fl64",Bn=ze+ct.length,Ir=Object.prototype.toString;function jn(Y){var se=Y.length*.75,Z=Y.length,he,ve=0,ce,Oe,Ve,We;Y[Y.length-1]==="="&&(se--,Y[Y.length-2]==="="&&se--);var Ye=new ArrayBuffer(se),st=new Uint8Array(Ye);for(he=0;he<Z;he+=4)ce=yt.indexOf(Y[he]),Oe=yt.indexOf(Y[he+1]),Ve=yt.indexOf(Y[he+2]),We=yt.indexOf(Y[he+3]),st[ve++]=ce<<2|Oe>>4,st[ve++]=(Oe&15)<<4|Ve>>2,st[ve++]=(Ve&3)<<6|We&63;return Ye}function hr(Y){var se=new Uint8Array(Y),Z="",he;for(he=0;he<se.length;he+=3)Z+=yt[se[he]>>2],Z+=yt[(se[he]&3)<<4|se[he+1]>>4],Z+=yt[(se[he+1]&15)<<2|se[he+2]>>6],Z+=yt[se[he+2]&63];return se.length%3===2?Z=Z.substring(0,Z.length-1)+"=":se.length%3===1&&(Z=Z.substring(0,Z.length-2)+"=="),Z}function yn(Y,se){var Z="";if(Y&&(Z=Ir.call(Y)),Y&&(Z==="[object ArrayBuffer]"||Y.buffer&&Ir.call(Y.buffer)==="[object ArrayBuffer]")){var he,ve=ke;Y instanceof ArrayBuffer?(he=Y,ve+=ct):(he=Y.buffer,Z==="[object Int8Array]"?ve+=Ge:Z==="[object Uint8Array]"?ve+=ye:Z==="[object Uint8ClampedArray]"?ve+=ht:Z==="[object Int16Array]"?ve+=bt:Z==="[object Uint16Array]"?ve+=Ae:Z==="[object Int32Array]"?ve+=me:Z==="[object Uint32Array]"?ve+=qe:Z==="[object Float32Array]"?ve+=ut:Z==="[object Float64Array]"?ve+=wt:se(new Error("Failed to get type for BinaryArray"))),se(ve+hr(he))}else if(Z==="[object Blob]"){var ce=new FileReader;ce.onload=function(){var Oe=it+Y.type+"~"+hr(this.result);se(ke+Ot+Oe)},ce.readAsArrayBuffer(Y)}else try{se(JSON.stringify(Y))}catch(Oe){console.error("Couldn't convert value into a JSON string: ",Y),se(null,Oe)}}function An(Y){if(Y.substring(0,ze)!==ke)return JSON.parse(Y);var se=Y.substring(Bn),Z=Y.substring(ze,Bn),he;if(Z===Ot&&be.test(se)){var ve=se.match(be);he=ve[1],se=se.substring(ve[0].length)}var ce=jn(se);switch(Z){case ct:return ce;case Ot:return c([ce],{type:he});case Ge:return new Int8Array(ce);case ye:return new Uint8Array(ce);case ht:return new Uint8ClampedArray(ce);case bt:return new Int16Array(ce);case Ae:return new Uint16Array(ce);case me:return new Int32Array(ce);case qe:return new Uint32Array(ce);case ut:return new Float32Array(ce);case wt:return new Float64Array(ce);default:throw new Error("Unkown type: "+Z)}}var sr={serialize:yn,deserialize:An,stringToBuffer:jn,bufferToString:hr};function or(Y,se,Z,he){Y.executeSql("CREATE TABLE IF NOT EXISTS "+se.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Z,he)}function Qo(Y){var se=this,Z={db:null};if(Y)for(var he in Y)Z[he]=typeof Y[he]!="string"?Y[he].toString():Y[he];var ve=new f(function(ce,Oe){try{Z.db=openDatabase(Z.name,String(Z.version),Z.description,Z.size)}catch(Ve){return Oe(Ve)}Z.db.transaction(function(Ve){or(Ve,Z,function(){se._dbInfo=Z,ce()},function(We,Ye){Oe(Ye)})},Oe)});return Z.serializer=sr,ve}function Ui(Y,se,Z,he,ve,ce){Y.executeSql(Z,he,ve,function(Oe,Ve){Ve.code===Ve.SYNTAX_ERR?Oe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[se.storeName],function(We,Ye){Ye.rows.length?ce(We,Ve):or(We,se,function(){We.executeSql(Z,he,ve,ce)},ce)},ce):ce(Oe,Ve)},ce)}function In(Y,se){var Z=this;Y=p(Y);var he=new f(function(ve,ce){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){Ui(Ve,Oe,"SELECT * FROM "+Oe.storeName+" WHERE key = ? LIMIT 1",[Y],function(We,Ye){var st=Ye.rows.length?Ye.rows.item(0).value:null;st&&(st=Oe.serializer.deserialize(st)),ve(st)},function(We,Ye){ce(Ye)})})}).catch(ce)});return d(he,se),he}function zi(Y,se){var Z=this,he=new f(function(ve,ce){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){Ui(Ve,Oe,"SELECT * FROM "+Oe.storeName,[],function(We,Ye){for(var st=Ye.rows,xt=st.length,gn=0;gn<xt;gn++){var Dt=st.item(gn),zn=Dt.value;if(zn&&(zn=Oe.serializer.deserialize(zn)),zn=Y(zn,Dt.key,gn+1),zn!==void 0){ve(zn);return}}ve()},function(We,Ye){ce(Ye)})})}).catch(ce)});return d(he,se),he}function kr(Y,se,Z,he){var ve=this;Y=p(Y);var ce=new f(function(Oe,Ve){ve.ready().then(function(){se===void 0&&(se=null);var We=se,Ye=ve._dbInfo;Ye.serializer.serialize(se,function(st,xt){xt?Ve(xt):Ye.db.transaction(function(gn){Ui(gn,Ye,"INSERT OR REPLACE INTO "+Ye.storeName+" (key, value) VALUES (?, ?)",[Y,st],function(){Oe(We)},function(Dt,zn){Ve(zn)})},function(gn){if(gn.code===gn.QUOTA_ERR){if(he>0){Oe(kr.apply(ve,[Y,We,Z,he-1]));return}Ve(gn)}})})}).catch(Ve)});return d(ce,Z),ce}function ys(Y,se,Z){return kr.apply(this,[Y,se,Z,1])}function Sp(Y,se){var Z=this;Y=p(Y);var he=new f(function(ve,ce){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){Ui(Ve,Oe,"DELETE FROM "+Oe.storeName+" WHERE key = ?",[Y],function(){ve()},function(We,Ye){ce(Ye)})})}).catch(ce)});return d(he,se),he}function gl(Y){var se=this,Z=new f(function(he,ve){se.ready().then(function(){var ce=se._dbInfo;ce.db.transaction(function(Oe){Ui(Oe,ce,"DELETE FROM "+ce.storeName,[],function(){he()},function(Ve,We){ve(We)})})}).catch(ve)});return d(Z,Y),Z}function kd(Y){var se=this,Z=new f(function(he,ve){se.ready().then(function(){var ce=se._dbInfo;ce.db.transaction(function(Oe){Ui(Oe,ce,"SELECT COUNT(key) as c FROM "+ce.storeName,[],function(Ve,We){var Ye=We.rows.item(0).c;he(Ye)},function(Ve,We){ve(We)})})}).catch(ve)});return d(Z,Y),Z}function Tr(Y,se){var Z=this,he=new f(function(ve,ce){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){Ui(Ve,Oe,"SELECT key FROM "+Oe.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(We,Ye){var st=Ye.rows.length?Ye.rows.item(0).key:null;ve(st)},function(We,Ye){ce(Ye)})})}).catch(ce)});return d(he,se),he}function Ni(Y){var se=this,Z=new f(function(he,ve){se.ready().then(function(){var ce=se._dbInfo;ce.db.transaction(function(Oe){Ui(Oe,ce,"SELECT key FROM "+ce.storeName,[],function(Ve,We){for(var Ye=[],st=0;st<We.rows.length;st++)Ye.push(We.rows.item(st).key);he(Ye)},function(Ve,We){ve(We)})})}).catch(ve)});return d(Z,Y),Z}function ti(Y){return new f(function(se,Z){Y.transaction(function(he){he.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ve,ce){for(var Oe=[],Ve=0;Ve<ce.rows.length;Ve++)Oe.push(ce.rows.item(Ve).name);se({db:Y,storeNames:Oe})},function(ve,ce){Z(ce)})},function(he){Z(he)})})}function yu(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var he=this,ve;return Y.name?ve=new f(function(ce){var Oe;Y.name===Z.name?Oe=he._dbInfo.db:Oe=openDatabase(Y.name,"","",0),Y.storeName?ce({db:Oe,storeNames:[Y.storeName]}):ce(ti(Oe))}).then(function(ce){return new f(function(Oe,Ve){ce.db.transaction(function(We){function Ye(Dt){return new f(function(zn,Nr){We.executeSql("DROP TABLE IF EXISTS "+Dt,[],function(){zn()},function(Dr,Zo){Nr(Zo)})})}for(var st=[],xt=0,gn=ce.storeNames.length;xt<gn;xt++)st.push(Ye(ce.storeNames[xt]));f.all(st).then(function(){Oe()}).catch(function(Dt){Ve(Dt)})},function(We){Ve(We)})})}):ve=f.reject("Invalid arguments"),d(ve,se),ve}var $a={_driver:"webSQLStorage",_initStorage:Qo,_support:Ue(),iterate:zi,getItem:In,setItem:ys,removeItem:Sp,clear:gl,length:kd,key:Tr,keys:Ni,dropInstance:yu};function Ma(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function oe(Y,se){var Z=Y.name+"/";return Y.storeName!==se.storeName&&(Z+=Y.storeName+"/"),Z}function ee(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch{return!0}}function ae(){return!ee()||localStorage.length>0}function Te(Y){var se=this,Z={};if(Y)for(var he in Y)Z[he]=Y[he];return Z.keyPrefix=oe(Y,se._defaultConfig),ae()?(se._dbInfo=Z,Z.serializer=sr,f.resolve()):f.reject()}function Se(Y){var se=this,Z=se.ready().then(function(){for(var he=se._dbInfo.keyPrefix,ve=localStorage.length-1;ve>=0;ve--){var ce=localStorage.key(ve);ce.indexOf(he)===0&&localStorage.removeItem(ce)}});return d(Z,Y),Z}function ot(Y,se){var Z=this;Y=p(Y);var he=Z.ready().then(function(){var ve=Z._dbInfo,ce=localStorage.getItem(ve.keyPrefix+Y);return ce&&(ce=ve.serializer.deserialize(ce)),ce});return d(he,se),he}function Tt(Y,se){var Z=this,he=Z.ready().then(function(){for(var ve=Z._dbInfo,ce=ve.keyPrefix,Oe=ce.length,Ve=localStorage.length,We=1,Ye=0;Ye<Ve;Ye++){var st=localStorage.key(Ye);if(st.indexOf(ce)===0){var xt=localStorage.getItem(st);if(xt&&(xt=ve.serializer.deserialize(xt)),xt=Y(xt,st.substring(Oe),We++),xt!==void 0)return xt}}});return d(he,se),he}function Wt(Y,se){var Z=this,he=Z.ready().then(function(){var ve=Z._dbInfo,ce;try{ce=localStorage.key(Y)}catch{ce=null}return ce&&(ce=ce.substring(ve.keyPrefix.length)),ce});return d(he,se),he}function Mn(Y){var se=this,Z=se.ready().then(function(){for(var he=se._dbInfo,ve=localStorage.length,ce=[],Oe=0;Oe<ve;Oe++){var Ve=localStorage.key(Oe);Ve.indexOf(he.keyPrefix)===0&&ce.push(Ve.substring(he.keyPrefix.length))}return ce});return d(Z,Y),Z}function Un(Y){var se=this,Z=se.keys().then(function(he){return he.length});return d(Z,Y),Z}function mn(Y,se){var Z=this;Y=p(Y);var he=Z.ready().then(function(){var ve=Z._dbInfo;localStorage.removeItem(ve.keyPrefix+Y)});return d(he,se),he}function ar(Y,se,Z){var he=this;Y=p(Y);var ve=he.ready().then(function(){se===void 0&&(se=null);var ce=se;return new f(function(Oe,Ve){var We=he._dbInfo;We.serializer.serialize(se,function(Ye,st){if(st)Ve(st);else try{localStorage.setItem(We.keyPrefix+Y,Ye),Oe(ce)}catch(xt){(xt.name==="QuotaExceededError"||xt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ve(xt),Ve(xt)}})})});return d(ve,Z),ve}function Rr(Y,se){if(se=m.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var Z=this.config();Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName}var he=this,ve;return Y.name?ve=new f(function(ce){Y.storeName?ce(oe(Y,he._defaultConfig)):ce(Y.name+"/")}).then(function(ce){for(var Oe=localStorage.length-1;Oe>=0;Oe--){var Ve=localStorage.key(Oe);Ve.indexOf(ce)===0&&localStorage.removeItem(Ve)}}):ve=f.reject("Invalid arguments"),d(ve,se),ve}var Ht={_driver:"localStorageWrapper",_initStorage:Te,_support:Ma(),iterate:Tt,getItem:ot,setItem:ar,removeItem:mn,clear:Se,length:Un,key:Wt,keys:Mn,dropInstance:Rr},ur=function(se,Z){return se===Z||typeof se=="number"&&typeof Z=="number"&&isNaN(se)&&isNaN(Z)},Gr=function(se,Z){for(var he=se.length,ve=0;ve<he;){if(ur(se[ve],Z))return!0;ve++}return!1},tr=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},Di={},Ks={},ni={INDEXEDDB:He,WEBSQL:$a,LOCALSTORAGE:Ht},So=[ni.INDEXEDDB._driver,ni.WEBSQL._driver,ni.LOCALSTORAGE._driver],Vi=["dropInstance"],Hi=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Vi),Jo={description:"",driver:So.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function La(Y,se){Y[se]=function(){var Z=arguments;return Y.ready().then(function(){return Y[se].apply(Y,Z)})}}function Xs(){for(var Y=1;Y<arguments.length;Y++){var se=arguments[Y];if(se)for(var Z in se)se.hasOwnProperty(Z)&&(tr(se[Z])?arguments[0][Z]=se[Z].slice():arguments[0][Z]=se[Z])}return arguments[0]}var cc=function(){function Y(se){o(this,Y);for(var Z in ni)if(ni.hasOwnProperty(Z)){var he=ni[Z],ve=he._driver;this[Z]=ve,Di[ve]||this.defineDriver(he)}this._defaultConfig=Xs({},Jo),this._config=Xs({},this._defaultConfig,se),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(Z){if((typeof Z>"u"?"undefined":s(Z))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var he in Z){if(he==="storeName"&&(Z[he]=Z[he].replace(/\W/g,"_")),he==="version"&&typeof Z[he]!="number")return new Error("Database version must be a number.");this._config[he]=Z[he]}return"driver"in Z&&Z.driver?this.setDriver(this._config.driver):!0}else return typeof Z=="string"?this._config[Z]:this._config},Y.prototype.defineDriver=function(Z,he,ve){var ce=new f(function(Oe,Ve){try{var We=Z._driver,Ye=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Z._driver){Ve(Ye);return}for(var st=Hi.concat("_initStorage"),xt=0,gn=st.length;xt<gn;xt++){var Dt=st[xt],zn=!Gr(Vi,Dt);if((zn||Z[Dt])&&typeof Z[Dt]!="function"){Ve(Ye);return}}var Nr=function(){for(var Nd=function(fc){return function(){var vu=new Error("Method "+fc+" is not implemented by the current driver"),Cp=f.reject(vu);return d(Cp,arguments[arguments.length-1]),Cp}},Tp=0,wT=Vi.length;Tp<wT;Tp++){var vv=Vi[Tp];Z[vv]||(Z[vv]=Nd(vv))}};Nr();var Dr=function(Nd){Di[We]&&console.info("Redefining LocalForage driver: "+We),Di[We]=Z,Ks[We]=Nd,Oe()};"_support"in Z?Z._support&&typeof Z._support=="function"?Z._support().then(Dr,Ve):Dr(!!Z._support):Dr(!0)}catch(Zo){Ve(Zo)}});return h(ce,he,ve),ce},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(Z,he,ve){var ce=Di[Z]?f.resolve(Di[Z]):f.reject(new Error("Driver not found."));return h(ce,he,ve),ce},Y.prototype.getSerializer=function(Z){var he=f.resolve(sr);return h(he,Z),he},Y.prototype.ready=function(Z){var he=this,ve=he._driverSet.then(function(){return he._ready===null&&(he._ready=he._initDriver()),he._ready});return h(ve,Z,Z),ve},Y.prototype.setDriver=function(Z,he,ve){var ce=this;tr(Z)||(Z=[Z]);var Oe=this._getSupportedDrivers(Z);function Ve(){ce._config.driver=ce.driver()}function We(xt){return ce._extend(xt),Ve(),ce._ready=ce._initStorage(ce._config),ce._ready}function Ye(xt){return function(){var gn=0;function Dt(){for(;gn<xt.length;){var zn=xt[gn];return gn++,ce._dbInfo=null,ce._ready=null,ce.getDriver(zn).then(We).catch(Dt)}Ve();var Nr=new Error("No available storage method found.");return ce._driverSet=f.reject(Nr),ce._driverSet}return Dt()}}var st=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=st.then(function(){var xt=Oe[0];return ce._dbInfo=null,ce._ready=null,ce.getDriver(xt).then(function(gn){ce._driver=gn._driver,Ve(),ce._wrapLibraryMethodsWithReady(),ce._initDriver=Ye(Oe)})}).catch(function(){Ve();var xt=new Error("No available storage method found.");return ce._driverSet=f.reject(xt),ce._driverSet}),h(this._driverSet,he,ve),this._driverSet},Y.prototype.supports=function(Z){return!!Ks[Z]},Y.prototype._extend=function(Z){Xs(this,Z)},Y.prototype._getSupportedDrivers=function(Z){for(var he=[],ve=0,ce=Z.length;ve<ce;ve++){var Oe=Z[ve];this.supports(Oe)&&he.push(Oe)}return he},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var Z=0,he=Hi.length;Z<he;Z++)La(this,Hi[Z])},Y.prototype.createInstance=function(Z){return new Y(Z)},Y}(),Rd=new cc;r.exports=Rd},{3:3}]},{},[4])(4)})})(N3e);var n7t=N3e.exports;const gw=dl(n7t);var Io=[];for(var nU=0;nU<256;++nU)Io.push((nU+256).toString(16).slice(1));function r7t(e,t=0){return(Io[e[t+0]]+Io[e[t+1]]+Io[e[t+2]]+Io[e[t+3]]+"-"+Io[e[t+4]]+Io[e[t+5]]+"-"+Io[e[t+6]]+Io[e[t+7]]+"-"+Io[e[t+8]]+Io[e[t+9]]+"-"+Io[e[t+10]]+Io[e[t+11]]+Io[e[t+12]]+Io[e[t+13]]+Io[e[t+14]]+Io[e[t+15]]).toLowerCase()}var WD,i7t=new Uint8Array(16);function s7t(){if(!WD&&(WD=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!WD))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return WD(i7t)}var o7t=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Pge={randomUUID:o7t};function O3(e,t,n){if(Pge.randomUUID&&!t&&!e)return Pge.randomUUID();e=e||{};var r=e.random||(e.rng||s7t)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,r7t(r)}class D3e{constructor(t){_u(this,"engine");_u(this,"connected",!1);_u(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function $3(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function aC(e){return e.participantId!==void 0}class Ic extends D3e{constructor(){super("firebase");_u(this,"RECAPTCHAV3TOKEN","6LcoLeIpAAAAAFvL4FMjROebfEEYkWq4LyHHkA7O");_u(this,"firestore");_u(this,"collectionPrefix","prod-");_u(this,"studyCollection");_u(this,"storage");_u(this,"studyId","");_u(this,"localForage",gw.createInstance({name:"currentParticipantId"}));_u(this,"participantData",null);const n=RZ.parse(`
{
  apiKey: "AIzaSyDks0KPmUNFtOPDsOHFAuQY6XSMksNecWE",
  authDomain: "revisit-fb-db.firebaseapp.com",
  projectId: "revisit-fb-db",
  storageBucket: "revisit-fb-db.appspot.com",
  messagingSenderId: "329639127561",
  appId: "1:329639127561:web:346fc2d58229c9ba2ae6d8"
}
`),r=XOe(n);this.firestore=J9t(r,{}),this.storage=ajt();try{JUt(r,{provider:new Ete(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await Z9t(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=A3();if(!i.currentUser&&(await C4t(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await this.getCurrentConfigHash(),o=await $3(JSON.stringify(r));if(this.studyCollection=vf(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n,await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.localForage.setItem("currentConfigHash",o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(aC(a))return this.participantData=a,a;const l=await $3(JSON.stringify(i));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=gc(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=O3(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=Rs(this.studyCollection,"sequenceAssignment");await bl(i,{});const s=vf(i,"sequenceAssignment"),o=Rs(s,this.currentParticipantId),a=xge(s,aUt("participantId","==","")),u=await oC(a);if(u.docs.length>0){const m=u.docs[0],g=m.data().timestamp;r.dataCollectionEnabled&&(await hUt(m.ref),await bl(o,{participantId:this.currentParticipantId,timestamp:g}))}else r.dataCollectionEnabled&&await bl(o,{participantId:this.currentParticipantId,timestamp:gUt()});const l=xge(s,uUt("timestamp","asc")),d=(await oC(l)).docs.map(m=>m.data()).findIndex(m=>m.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");return p}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=gc(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await iC(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");aC(a)&&i.push(a)});return await Promise.all(s),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null)throw new Error("Participant not initialized");const n=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData");return aC(n)?n:null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=O3();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);return this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),!0}async getUserManagementData(n){const r=vf(this.firestore,"user-management"),i=await oC(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(u=>u.email===n.user.email);a&&(a.uid=n.user.uid),await bl(Rs(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await bl(Rs(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await bl(Rs(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await bl(Rs(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await bl(Rs(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=gc(this.storage,`${this.collectionPrefix}${n}/participants`),i=await iC(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");aC(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r){const i=vf(this.firestore,`${this.collectionPrefix}${n}`),s=gc(this.storage,`${this.collectionPrefix}${n}/participants/${r}`),o=await this._getFromFirebaseStorageByRef(s,"participantData");try{if(!o||!aC(o)||o.rejected)return;o.rejected=!0,await this._pushToFirebaseStorageByRef(s,"participantData",o);const a=Rs(i,"sequenceAssignment"),u=vf(a,"sequenceAssignment"),l=Rs(u,r);await dUt(l,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}async setMode(n,r,i){const s=Rs(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await bl(s,{[r]:i},{merge:!0})}async getModes(n){const r=Rs(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await Z9(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await bl(r,s),s}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),!1;const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;return await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h),r&&await this.removeSnapshotOrLive(i,!1),!0}async removeSnapshotOrLive(n,r){const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i)}async getSnapshots(n){try{const r=Rs(this.firestore,"metadata","collections"),i=await Z9(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(a=>a.startsWith(`${this.collectionPrefix}${n}-snapshot`)).sort().reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;await this.createSnapshot(n,!0),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i)}async _addDirectoryNameToMetadata(n){try{const r=Rs(this.firestore,"metadata","collections");await bl(r,{[n]:!0},{merge:!0})}catch(r){console.error("Error adding collection to metadata:",r)}}async _removeNameFromMetadata(n){try{const r=Rs(this.firestore,"metadata","collections"),i=await Z9(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await bl(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=gc(this.storage,n),s=(await iC(r)).items.map(o=>jme(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=gc(this.storage,n),o=(await iC(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=gc(this.storage,n),s=gc(this.storage,r),o=await Y9(i),u=await(await fetch(o)).blob();await G9(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=vf(this.firestore,n),s=Rs(i,"sequenceAssignment"),o=vf(s,"sequenceAssignment"),a=vf(this.firestore,r),u=Rs(a,"sequenceAssignment");await bl(u,{});const l=vf(u,"sequenceAssignment"),c=await oC(o),f=Cge(this.firestore);c.docs.forEach(d=>{const h=Rs(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=vf(this.firestore,n),i=Rs(r,"sequenceAssignment"),s=vf(i,"sequenceAssignment"),o=await oC(s),a=Cge(this.firestore);o.forEach(u=>{const l=Rs(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=gc(this.storage,n);return(await iC(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=gc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await Y9(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await Y9(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){if(Object.keys(i).length>0){const s=gc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`),o=new Blob([JSON.stringify(i)],{type:"application/json"});await G9(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await G9(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=gc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await jme(i)}}const P3e=I.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),f_=()=>I.useContext(P3e);function a7t({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=I.useState(t),[o,a]=I.useState(!1),{storageEngine:u}=Is(),l=async()=>{const h=A3();try{await P4t(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h):!1;I.useEffect(()=>{s(t);let h;if(u instanceof Ic)try{h=A3()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},b=await f(v);v.isAdmin=!!b,s(v)}else l()},g=(async()=>{if(u instanceof Ic){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=D4t(h,async b=>await p(b));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=I.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return _.jsx(P3e.Provider,{value:d,children:i.determiningStatus?_.jsx(Gl,{visible:!0}):e})}function c2({studyIds:e}){const t=dg(),{studyId:n}=nb(),r=Jb(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=Is(),{user:o,logout:a}=f_(),[u,l]=I.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:_.jsx(tet,{}),href:"/",needAdmin:!1},{name:"Analysis",leftIcon:_.jsx(XZe,{}),href:"/analysis/dashboard",needAdmin:!1},{name:"Settings",leftIcon:_.jsx(zxe,{}),href:"/settings",needAdmin:!0}];return _.jsx(yi.Header,{p:"md",children:_.jsxs(ao,{mt:-7,align:"center",children:[_.jsx(ao.Col,{span:6,children:_.jsxs(Gt,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),style:{cursor:"pointer"},children:[_.jsx(cg,{w:40,src:`${ip}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsx(Bc,{w:"md"}),_.jsx($i,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),_.jsx(ao.Col,{span:6,children:_.jsxs(Gt,{justify:"flex-end",direction:"row",children:[c&&_.jsx(Pk,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),_.jsx(iK,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),_.jsx(np,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:_.jsxs(Gt,{direction:"column",mt:20,children:[_.jsx(Je,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?_.jsx(Nn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`):null:_.jsx(Nn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`)),_.jsxs(_e,{ml:10,children:[_.jsx(aK,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?_.jsx(Je,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{a(),t("/login"),l(!1)},children:"Logout"}):_.jsx(Je,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function O3e({allParticipants:e,studyId:t}){const[n,{close:r,open:i}]=Jw(!1),[s,{close:o,open:a}]=Jw(!1),[u,{open:l,close:c}]=Jw(!1);return _.jsxs(_.Fragment,{children:[_.jsxs(Vs,{children:[_.jsxs(si,{opened:n,children:[_.jsx(si.Target,{children:_.jsx(Nn,{variant:"light",disabled:e.length===0,onClick:()=>{bee(JSON.stringify(e,null,2),`${t}_all.json`)},onMouseEnter:i,onMouseLeave:r,px:4,children:_.jsx(ZZe,{})})}),_.jsx(si.Dropdown,{children:_.jsx(Je,{children:"Download all participants data as JSON"})})]}),_.jsxs(si,{opened:s,children:[_.jsx(si.Target,{children:_.jsx(Nn,{variant:"light",disabled:e.length===0,onClick:l,onMouseEnter:a,onMouseLeave:o,px:4,children:_.jsx(Vxe,{})})}),_.jsx(si.Dropdown,{children:_.jsx(Je,{children:"Download all participants data as a tidy CSV"})})]})]}),u&&_.jsx(qLt,{opened:u,close:c,filename:`${t}_all_tidy.csv`,data:e,studyId:t})]})}function u7t({cellData:e}){return _.jsx(kn.Td,{children:_.jsx(fh,{miw:100,children:Object.entries(e.answer).map(([t,n])=>_.jsxs(_e,{children:[_.jsxs(Je,{fw:700,span:!0,children:[" ",`${t}: `]}),_.jsx(Je,{span:!0,children:`${n}`})]},`cell-${t}`))})})}function Oge({cellData:e}){const t=(e.endTime-e.startTime)/1e3;return _.jsxs(kn.Td,{children:[t.toFixed(1)," ","s"]})}function l7t(e){const{metaData:t}=e;return _.jsx(kn.Td,{children:_.jsx(DK,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:_.jsxs(fh,{gap:"xs",children:[_.jsxs(_e,{children:["IP:"," ",t.ip]}),_.jsxs(_e,{children:["Language:"," ",t.language]}),_.jsxs(_e,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),_.jsxs(_e,{children:["User Agent:"," ",t.userAgent]})]})})})}function c7t({completed:e,inProgress:t,studyConfig:n,refresh:r}){const{storageEngine:i}=Is(),{studyId:s}=nb(),{user:o}=f_(),a=async y=>{i&&s&&(o.isAdmin?(await i.rejectParticipant(s,y),await r()):console.warn("You are not authorized to perform this action."))},[u,l]=I.useState([]),[c,f]=I.useState(!1),d=()=>bz({title:"Confirm rejecting participants",children:_.jsxs(Je,{size:"sm",children:["Are you sure you want to reject the selected participants? This action is"," ",_.jsx(Je,{span:!0,fw:700,td:"underline",inherit:!0,children:"irreversible"}),", and will return the participants' sequences to the beginning of the sequence array."]}),labels:{confirm:"Reject Participants",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:async()=>{f(!0);const y=u.map(async v=>await a(v));await Promise.all(y),l([]),await r(),f(!1)}});function h(y){y==="all"?u.length===[...e,...t].length?l([]):l([...e,...t].map(v=>v.participantId)):u.includes(y)?l(u.filter(v=>v!==y)):l([...u,y])}const p=UTe(n.sequence),m=[_.jsx(kn.Th,{children:_.jsx(Gt,{justify:"center",children:_.jsx(Om,{mb:-4,checked:u.length===[...e,...t].length,onChange:()=>h("all")})})},"action"),_.jsx(kn.Th,{children:"ID"},"ID"),_.jsx(kn.Th,{children:"Status"},"status"),_.jsx(kn.Th,{children:"Meta"},"meta"),...p.flatMap(y=>[_.jsx(kn.Th,{children:y.componentName},`header-${y.componentName}-${y.timesSeenInBlock}`),_.jsxs(kn.Th,{children:[y.componentName," ","Duration"]},`header-${y.componentName}-${y.timesSeenInBlock}-duration`)]),_.jsx(kn.Th,{children:"Total Duration"},"total-duration")],g=[...e,...t].map(y=>_.jsxs(kn.Tr,{children:[_.jsx(kn.Td,{children:_.jsx(Gt,{justify:"center",children:_.jsx(Om,{mb:-4,checked:u.includes(y.participantId),onChange:()=>h(y.participantId)})})}),_.jsx(kn.Td,{style:{whiteSpace:"nowrap"},children:y.participantId}),_.jsx(kn.Td,{children:_.jsxs(Gt,{direction:"row",align:"center",children:[y.rejected?_.jsx(ls,{label:"Rejected",children:_.jsx(GK,{size:16,color:"red",style:{marginBottom:-3}})}):y.completed?_.jsx(ls,{label:"Completed",children:_.jsx(Bxe,{size:16,color:"teal",style:{marginBottom:-3}})}):_.jsx(ls,{label:"In Progress",children:_.jsx(Uxe,{size:16,color:"orange",style:{marginBottom:-3}})}),!y.completed&&_.jsxs(Je,{size:"sm",mb:-1,ml:4,children:[(Object.entries(y.answers).filter(([v,b])=>b.endTime!==void 0).length/(Lm(y.sequence).length-1)*100).toFixed(2),"%"]})]})}),y.metadata?_.jsx(l7t,{metaData:y.metadata}):_.jsx(kn.Td,{children:"N/A"}),p.map(v=>{const b=BTe(y.sequence,v.orderPath),w=b&&Object.entries(y.answers).sort((E,x)=>{const T=parseInt(E[0].slice(E[0].lastIndexOf("_")+1),10),C=parseInt(x[0].slice(x[0].lastIndexOf("_")+1),10);return T-C}).filter(([E])=>{const x=E.slice(0,E.lastIndexOf("_")),T=parseInt(E.slice(E.lastIndexOf("_")+1),10);return x===v.componentName&&T<=b[0].lastIndex&&T>=b[0].firstIndex});return w!==null&&w.length>=v.timesSeenInBlock+1?_.jsxs(qt.Fragment,{children:[_.jsx(u7t,{cellData:w[v.timesSeenInBlock][1]}),_.jsx(Oge,{cellData:w[v.timesSeenInBlock][1]})]},`cellgroup-${y.participantId}-${v.componentName}-${v.timesSeenInBlock}`):_.jsxs(qt.Fragment,{children:[_.jsx(kn.Td,{children:"N/A"}),_.jsx(kn.Td,{children:"N/A"})]},`cellgroup-${y.participantId}-${v.componentName}-${v.timesSeenInBlock}`)}),_.jsx(Oge,{cellData:{startTime:Math.min(...Object.values(y.answers).map(v=>v.startTime)),endTime:Math.max(...Object.values(y.answers).map(v=>v.endTime)),answer:{},windowEvents:[]}},`cell-${y.participantId}-total-duration`)]},y.participantId));return[...e,...t].length>0?_.jsxs(_.Fragment,{children:[_.jsx(Gl,{visible:c,overlayProps:{blur:2}}),_.jsxs(Gt,{justify:"space-between",mb:8,p:8,children:[_.jsx(Vs,{children:_.jsx(Pk,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...e,...t].map(y=>({value:y.participantId,label:y.participantId})),searchable:!0,value:null,leftSection:_.jsx(aet,{size:14}),onChange:y=>y&&h(y)})}),_.jsxs(Vs,{children:[_.jsx(O3e,{allParticipants:[...e,...t],studyId:s||""}),_.jsx(Nn,{disabled:u.length===0||!o.isAdmin,onClick:d,color:"red",children:"Reject Participants"})]})]}),_.jsx(Gt,{direction:"column",style:{width:"100%",overflow:"auto"},children:_.jsxs(kn,{striped:!0,withTableBorder:!0,children:[_.jsx(kn.Thead,{children:_.jsx(kn.Tr,{children:m})}),_.jsx(kn.Tbody,{children:g})]})})]}):_.jsx(Gt,{justify:"center",align:"center",style:{height:"100%"},children:_.jsx(Je,{children:"No data available"})})}const G_=14;function $3e({completed:e,inProgress:t,rejected:n,filteredCompleted:r}){return _.jsxs(Gt,{ml:4,gap:4,children:[_.jsx(ls,{label:"Completed",children:_.jsx(mm,{variant:"light",color:"green",leftSection:_.jsx(Bxe,{width:G_,height:G_,style:{paddingTop:1}}),pb:1,children:r&&r!==e?`${r}/${e}`:e})}),_.jsx(ls,{label:"In Progress",children:_.jsx(mm,{variant:"light",color:"orange",leftSection:_.jsx(Uxe,{width:G_,height:G_,style:{paddingTop:1}}),pb:1,children:t})}),_.jsx(ls,{label:"Rejected",children:_.jsx(mm,{variant:"light",color:"red",leftSection:_.jsx(GK,{width:G_,height:G_,style:{paddingTop:1}}),pb:1,children:n})})]})}function f7t({studyId:e,refresh:t}){const[n,r]=I.useState(!1),[i,s]=I.useState(!1),[o,a]=I.useState(!1),[u,l]=I.useState(""),[c,f]=I.useState([]),[d,h]=I.useState(""),[p,m]=I.useState(!1),[g,y]=I.useState(!1),{storageEngine:v}=Is(),b=v,w=I.useCallback(async()=>{y(!0);const O=await b.getSnapshots(e);f(O),y(!1)},[b,e]);I.useEffect(()=>{w()},[w]);const E=async()=>{m(!0),await b.createSnapshot(e,!1),w(),m(!1),await t()},x=async()=>{m(!0),h(""),r(!1),await b.createSnapshot(e,!0),w(),m(!1),await t()},T=async O=>{m(!0),await b.restoreSnapshot(e,O),w(),m(!1),await t()},C=async()=>{m(!0),h(""),s(!1),await b.removeSnapshotOrLive(u,!0),w(),m(!1),await t()},A=async()=>{m(!0),h(""),a(!1),await b.removeSnapshotOrLive(e,!0),w(),m(!1),await t()},k=()=>bz({title:"Create a Snapshot",children:_.jsx(Je,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>E()}),R=O=>bz({title:"Restore Snapshot",children:_.jsx(Je,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>T(O)});return _.jsxs(_.Fragment,{children:[_.jsx(Gl,{visible:p}),_.jsxs(Gt,{justify:"space-between",align:"center",children:[_.jsxs(_e,{style:{width:"70%"},children:[_.jsx($i,{order:5,children:"Create a Snapshot"}),_.jsxs(Je,{children:["This will create a snapshot of the live"," ",_.jsx(Je,{span:!0,fw:700,children:e})," ","database. It will"," ",_.jsx(Je,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(ls,{label:"Create a snapshot",children:_.jsx(Nn,{onClick:k,children:"Snapshot"})})]}),_.jsx(Bc,{h:"lg"}),_.jsxs(Gt,{justify:"space-between",align:"center",children:[_.jsxs(_e,{style:{width:"70%"},children:[_.jsx($i,{order:5,children:"Archive Data"}),_.jsxs(Je,{children:["This will create a snapshot of the live"," ",_.jsx(Je,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(ls,{label:"Snapshot and Delete Data",children:_.jsx(Nn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),_.jsx(Bc,{h:"lg"}),_.jsxs(Gt,{justify:"space-between",align:"center",children:[_.jsxs(_e,{style:{width:"70%"},children:[_.jsx($i,{order:5,children:"Delete Data"}),_.jsxs(Je,{children:["This will delete the live"," ",_.jsx(Je,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),_.jsx(ls,{label:"Delete Data",children:_.jsx(Nn,{color:"red",onClick:()=>a(!0),children:"Delete"})})]}),_.jsx(Bc,{h:"xl"}),_.jsxs(Gt,{direction:"column",children:[_.jsx(Gt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:_.jsx($i,{order:5,children:"Snapshots"})}),_.jsxs(_e,{style:{position:"relative"},children:[_.jsx(Gl,{visible:g}),c.length>0?c.map(O=>_.jsxs(Gt,{justify:"space-between",mb:"xs",children:[_.jsx(Je,{children:O}),_.jsxs(Gt,{direction:"row",gap:"xs",children:[_.jsx(ls,{label:"Restore Snapshot",children:_.jsx(ty,{color:"blue",variant:"subtle",onClick:()=>{R(O)},children:_.jsx(set,{})})}),_.jsx(ls,{label:"Delete Snapshot",children:_.jsx(ty,{color:"red",variant:"subtle",onClick:()=>{s(!0),l(O)},children:_.jsx(Hxe,{})})})]})]},O)):_.jsx(Je,{children:"No snapshots."})]})]}),_.jsxs(Ts,{opened:n,onClose:()=>{r(!1),h("")},title:_.jsx(Je,{children:"Archive Data"}),children:[_.jsx(Je,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),_.jsx($1,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:O=>h(O.target.value)}),_.jsxs(Gt,{mt:"sm",justify:"right",children:[_.jsx(Nn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),h("")},children:"Cancel"}),_.jsx(Nn,{color:"red",onClick:x,disabled:d!==e,children:"Archive"})]})]}),_.jsxs(Ts,{opened:i,onClose:()=>{s(!1),h("")},title:_.jsx(Je,{children:"Delete Snapshot"}),children:[_.jsxs(Je,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",_.jsx(Je,{span:!0,fw:700,children:"irreversible"}),"."]}),_.jsx($1,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:O=>h(O.target.value)}),_.jsxs(Gt,{mt:"sm",justify:"right",children:[_.jsx(Nn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),h("")},children:"Cancel"}),_.jsx(Nn,{color:"red",onClick:C,disabled:d!==e,children:"Delete"})]})]}),_.jsxs(Ts,{opened:o,onClose:()=>{a(!1),h("")},title:_.jsx(Je,{children:"Delete Live Data"}),children:[_.jsxs(Je,{mb:"sm",children:["This will permanently delete the live"," ",_.jsx(Je,{span:!0,fw:700,children:e})," ","data. This action is"," ",_.jsx(Je,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),_.jsx($1,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:O=>h(O.target.value)}),_.jsxs(Gt,{mt:"sm",justify:"right",children:[_.jsx(Nn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),h("")},children:"Cancel"}),_.jsx(Nn,{color:"red",onClick:A,disabled:d!==e,children:"Delete"})]})]})]})}function d7t({studyId:e}){const{storageEngine:t}=Is(),[n,r]=I.useState(!1),[i,s]=I.useState(!1),[o,a]=I.useState(!1),[u,l]=I.useState(!1);I.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&_.jsxs(fh,{children:[_.jsx(tE,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),_.jsx(tE,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),_.jsx(tE,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function h7t({studyId:e,refresh:t}){const{storageEngine:n}=Is();return _.jsx(Wc,{children:_.jsxs(Au,{multiple:!0,variant:"contained",children:[_.jsxs(Au.Item,{value:"ReVISit Modes",children:[_.jsx(Au.Control,{children:_.jsx($i,{order:5,children:"ReVISit Modes"})}),_.jsx(Au.Panel,{children:_.jsx(d7t,{studyId:e})})]},"modes"),_.jsxs(Au.Item,{value:"Data Management",children:[_.jsx(Au.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:_.jsx($i,{order:5,children:"Data Management"})}),_.jsx(Au.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&_.jsx(f7t,{studyId:e,refresh:t})})]},"dataManagement")]})})}function p7t(e){const{globalConfig:t}=e,{studyId:n}=nb(),[r,i]=I.useState([]),[s,o]=I.useState(void 0),[a,u]=I.useState(!1),{storageEngine:l}=Is(),c=dg(),{tab:f}=nb(),{user:d}=f_(),h=I.useCallback(async()=>{if(u(!0),n){const y=await C4(n,t);if(!y||!l)return;await l.initializeStudyDb(n,y);const v=await l.getAllParticipantsData();i(v),o(y),u(!1)}},[t,l,n]);I.useEffect(()=>{h()},[t,l,n,h]);const[p,m,g]=I.useMemo(()=>{const y=r.filter(w=>!w.rejected&&w.completed),v=r.filter(w=>!w.rejected&&!w.completed),b=r.filter(w=>w.rejected);return[y,v,b]},[r]);return _.jsxs(_.Fragment,{children:[_.jsx(c2,{studyIds:e.globalConfig.configsList}),_.jsx(yi.Main,{children:_.jsxs(Wc,{fluid:!0,style:{height:"100%"},children:[_.jsx(Gl,{visible:a}),_.jsxs(Gt,{direction:"row",align:"center",children:[_.jsx($i,{order:5,children:n}),_.jsx($3e,{completed:p.length,inProgress:m.length,rejected:g.length})]}),_.jsx(Bc,{h:"xs"}),_.jsxs(os,{variant:"outline",value:f,onChange:y=>c(`./../${y}`),style:{height:"100%"},children:[_.jsxs(os.List,{children:[_.jsx(os.Tab,{value:"table",leftSection:_.jsx(uet,{size:16}),children:"Table View"}),_.jsx(ls,{label:"Coming soon",position:"bottom",children:_.jsx(os.Tab,{value:"stats",leftSection:_.jsx(QZe,{size:16}),disabled:!0,children:"Trial Stats"})}),_.jsx(ls,{label:"Coming soon",position:"bottom",children:_.jsx(os.Tab,{value:"replay",leftSection:_.jsx(iet,{size:16}),disabled:!0,children:"Participant Replay"})}),_.jsx(os.Tab,{value:"manage",leftSection:_.jsx(zxe,{size:16}),disabled:!d.isAdmin,children:"Manage"})]}),_.jsx(os.Panel,{value:"table",pt:"xs",children:s&&_.jsx(c7t,{completed:p,inProgress:m,studyConfig:s,refresh:h})}),_.jsx(os.Panel,{value:"stats",pt:"xs",children:"statsboard"}),_.jsx(os.Panel,{value:"replay",pt:"xs",children:"Replay Tab Content"}),_.jsx(os.Panel,{value:"manage",pt:"xs",children:n&&d.isAdmin?_.jsx(h7t,{studyId:n,refresh:h}):_.jsx(Wc,{mt:20,children:_.jsx(Ak,{title:"Unauthorized Access",variant:"light",color:"red",icon:_.jsx(jxe,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function $ge({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=f_(),{storageEngine:o}=Is(),[a,u]=I.useState(!1),l=nb();return I.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?_.jsx(Gl,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?_.jsx(VK,{to:"/login"}):_.jsx(_.Fragment,{children:e})}async function M3e(e,t,n){if(e instanceof Ic){t(!0);const r=new em,i=A3();try{await e5t(i,r,R$e)}catch(s){n&&n(s.message)}finally{t(!1)}return i.currentUser}return null}function m7t(){const{user:e}=f_(),[t,n]=I.useState(null),[r,i]=I.useState(!1),{storageEngine:s}=Is();return I.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&n("You are not authorized to use this application.")},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?_.jsx(VK,{to:"/"}):_.jsx(Wc,{children:_.jsx(Kb,{padding:"lg",children:_.jsxs(Gt,{align:"center",direction:"column",justify:"center",children:[_.jsx(cg,{maw:200,mt:50,mb:100,src:`${ip}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsxs(_.Fragment,{children:[_.jsx(Je,{mb:20,children:"To access admin settings, please sign in using your Google account."}),_.jsx(Nn,{onClick:()=>M3e(s,i,n),leftSection:_.jsx(cet,{}),variant:"filled",children:"Sign In With Google"})]}),t?_.jsx(mm,{size:"lg",color:"red",mt:30,children:t}):null,_.jsx(Gl,{visible:r})]})})})}var L3e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(oo,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var F=["th","st","nd","rd"],L=$%100;return"["+$+(F[(L-20)%10]||F[L]||F[0])+"]"}},b=function($,F,L){var j=String($);return!j||j.length>=F?$:""+Array(F+1-j.length).join(L)+$},w={s:b,z:function($){var F=-$.utcOffset(),L=Math.abs(F),j=Math.floor(L/60),z=L%60;return(F<=0?"+":"-")+b(j,2,"0")+":"+b(z,2,"0")},m:function $(F,L){if(F.date()<L.date())return-$(L,F);var j=12*(L.year()-F.year())+(L.month()-F.month()),z=F.clone().add(j,f),q=L-z<0,P=F.clone().add(j+(q?-1:1),f);return+(-(j+(L-z)/(q?z-P:P-z))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},E="en",x={};x[E]=v;var T="$isDayjsObject",C=function($){return $ instanceof O||!(!$||!$[T])},A=function $(F,L,j){var z;if(!F)return E;if(typeof F=="string"){var q=F.toLowerCase();x[q]&&(z=q),L&&(x[q]=L,z=q);var P=F.split("-");if(!z&&P.length>1)return $(P[0])}else{var U=F.name;x[U]=F,z=U}return!j&&z&&(E=z),z||!j&&E},k=function($,F){if(C($))return $.clone();var L=typeof F=="object"?F:{};return L.date=$,L.args=arguments,new O(L)},R=w;R.l=A,R.i=C,R.w=function($,F){return k($,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var O=function(){function $(L){this.$L=A(L.locale,null,!0),this.parse(L),this.$x=this.$x||L.x||{},this[T]=!0}var F=$.prototype;return F.parse=function(L){this.$d=function(j){var z=j.date,q=j.utc;if(z===null)return new Date(NaN);if(R.u(z))return new Date;if(z instanceof Date)return new Date(z);if(typeof z=="string"&&!/Z$/i.test(z)){var P=z.match(g);if(P){var U=P[2]-1||0,W=(P[7]||"0").substring(0,3);return q?new Date(Date.UTC(P[1],U,P[3]||1,P[4]||0,P[5]||0,P[6]||0,W)):new Date(P[1],U,P[3]||1,P[4]||0,P[5]||0,P[6]||0,W)}}return new Date(z)}(L),this.init()},F.init=function(){var L=this.$d;this.$y=L.getFullYear(),this.$M=L.getMonth(),this.$D=L.getDate(),this.$W=L.getDay(),this.$H=L.getHours(),this.$m=L.getMinutes(),this.$s=L.getSeconds(),this.$ms=L.getMilliseconds()},F.$utils=function(){return R},F.isValid=function(){return this.$d.toString()!==m},F.isSame=function(L,j){var z=k(L);return this.startOf(j)<=z&&z<=this.endOf(j)},F.isAfter=function(L,j){return k(L)<this.startOf(j)},F.isBefore=function(L,j){return this.endOf(j)<k(L)},F.$g=function(L,j,z){return R.u(L)?this[j]:this.set(z,L)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(L,j){var z=this,q=!!R.u(j)||j,P=R.p(L),U=function(de,ge){var Ie=R.w(z.$u?Date.UTC(z.$y,ge,de):new Date(z.$y,ge,de),z);return q?Ie:Ie.endOf(l)},W=function(de,ge){return R.w(z.toDate()[de].apply(z.toDate("s"),(q?[0,0,0,0]:[23,59,59,999]).slice(ge)),z)},B=this.$W,H=this.$M,G=this.$D,te="set"+(this.$u?"UTC":"");switch(P){case h:return q?U(1,0):U(31,11);case f:return q?U(1,H):U(0,H+1);case c:var le=this.$locale().weekStart||0,fe=(B<le?B+7:B)-le;return U(q?G-fe:G+(6-fe),H);case l:case p:return W(te+"Hours",0);case u:return W(te+"Minutes",1);case a:return W(te+"Seconds",2);case o:return W(te+"Milliseconds",3);default:return this.clone()}},F.endOf=function(L){return this.startOf(L,!1)},F.$set=function(L,j){var z,q=R.p(L),P="set"+(this.$u?"UTC":""),U=(z={},z[l]=P+"Date",z[p]=P+"Date",z[f]=P+"Month",z[h]=P+"FullYear",z[u]=P+"Hours",z[a]=P+"Minutes",z[o]=P+"Seconds",z[s]=P+"Milliseconds",z)[q],W=q===l?this.$D+(j-this.$W):j;if(q===f||q===h){var B=this.clone().set(p,1);B.$d[U](W),B.init(),this.$d=B.set(p,Math.min(this.$D,B.daysInMonth())).$d}else U&&this.$d[U](W);return this.init(),this},F.set=function(L,j){return this.clone().$set(L,j)},F.get=function(L){return this[R.p(L)]()},F.add=function(L,j){var z,q=this;L=Number(L);var P=R.p(j),U=function(H){var G=k(q);return R.w(G.date(G.date()+Math.round(H*L)),q)};if(P===f)return this.set(f,this.$M+L);if(P===h)return this.set(h,this.$y+L);if(P===l)return U(1);if(P===c)return U(7);var W=(z={},z[a]=r,z[u]=i,z[o]=n,z)[P]||1,B=this.$d.getTime()+L*W;return R.w(B,this)},F.subtract=function(L,j){return this.add(-1*L,j)},F.format=function(L){var j=this,z=this.$locale();if(!this.isValid())return z.invalidDate||m;var q=L||"YYYY-MM-DDTHH:mm:ssZ",P=R.z(this),U=this.$H,W=this.$m,B=this.$M,H=z.weekdays,G=z.months,te=z.meridiem,le=function(ge,Ie,pe,He){return ge&&(ge[Ie]||ge(j,q))||pe[Ie].slice(0,He)},fe=function(ge){return R.s(U%12||12,ge,"0")},de=te||function(ge,Ie,pe){var He=ge<12?"AM":"PM";return pe?He.toLowerCase():He};return q.replace(y,function(ge,Ie){return Ie||function(pe){switch(pe){case"YY":return String(j.$y).slice(-2);case"YYYY":return R.s(j.$y,4,"0");case"M":return B+1;case"MM":return R.s(B+1,2,"0");case"MMM":return le(z.monthsShort,B,G,3);case"MMMM":return le(G,B);case"D":return j.$D;case"DD":return R.s(j.$D,2,"0");case"d":return String(j.$W);case"dd":return le(z.weekdaysMin,j.$W,H,2);case"ddd":return le(z.weekdaysShort,j.$W,H,3);case"dddd":return H[j.$W];case"H":return String(U);case"HH":return R.s(U,2,"0");case"h":return fe(1);case"hh":return fe(2);case"a":return de(U,W,!0);case"A":return de(U,W,!1);case"m":return String(W);case"mm":return R.s(W,2,"0");case"s":return String(j.$s);case"ss":return R.s(j.$s,2,"0");case"SSS":return R.s(j.$ms,3,"0");case"Z":return P}return null}(ge)||P.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(L,j,z){var q,P=this,U=R.p(j),W=k(L),B=(W.utcOffset()-this.utcOffset())*r,H=this-W,G=function(){return R.m(P,W)};switch(U){case h:q=G()/12;break;case f:q=G();break;case d:q=G()/3;break;case c:q=(H-B)/6048e5;break;case l:q=(H-B)/864e5;break;case u:q=H/i;break;case a:q=H/r;break;case o:q=H/n;break;default:q=H}return z?q:R.a(q)},F.daysInMonth=function(){return this.endOf(f).$D},F.$locale=function(){return x[this.$L]},F.locale=function(L,j){if(!L)return this.$L;var z=this.clone(),q=A(L,j,!0);return q&&(z.$L=q),z},F.clone=function(){return R.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},$}(),D=O.prototype;return k.prototype=D,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function($){D[$[1]]=function(F){return this.$g(F,$[0],$[1])}}),k.extend=function($,F){return $.$i||($(F,O,k),$.$i=!0),k},k.locale=A,k.isDayjs=C,k.unix=function($){return k(1e3*$)},k.en=x[E],k.Ls=x,k.p={},k})})(L3e);var g7t=L3e.exports;const Ct=dl(g7t);function y7t({type:e,date:t,locale:n,format:r,labelSeparator:i}){const s=o=>Ct(o).locale(n).format(r);return e==="default"?t===null?"":s(t):e==="multiple"?t.map(s).join(", "):e==="range"&&Array.isArray(t)?t[0]&&t[1]?`${s(t[0])} ${i} ${s(t[1])}`:t[0]?`${s(t[0])} ${i} `:"":""}function v7t({formatter:e,...t}){return(e||y7t)(t)}function b7t({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function F3e({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:s}){var u,l,c;const o=b7t({direction:t,size:s,rowIndex:r,cellIndex:i,levelIndex:n});if(!o)return;const a=(c=(l=(u=e.current)==null?void 0:u[o.levelIndex])==null?void 0:l[o.rowIndex])==null?void 0:c[o.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?F3e({controlsRef:e,direction:t,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:s}):a.focus())}function _7t(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function w7t(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function xte({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const s=_7t(i.key);if(s){i.preventDefault();const o=w7t(e);F3e({controlsRef:e,direction:s,levelIndex:t,rowIndex:n,cellIndex:r,size:o})}}var B3e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(oo,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,u=function(d,h,p){p===void 0&&(p={});var m=new Date(d),g=function(y,v){v===void 0&&(v={});var b=v.timeZoneName||"short",w=y+"|"+b,E=r[w];return E||(E=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),r[w]=E),E}(h,p);return g.formatToParts(m)},l=function(d,h){for(var p=u(d,h),m=[],g=0;g<p.length;g+=1){var y=p[g],v=y.type,b=y.value,w=n[v];w>=0&&(m[w]=parseInt(b,10))}var E=m[3],x=E===24?0:E,T=m[0]+"-"+m[1]+"-"+m[2]+" "+x+":"+m[4]+":"+m[5]+":000",C=+d;return(o.utc(T).valueOf()-(C-=C%1e3))/6e4},c=s.prototype;c.tz=function(d,h){d===void 0&&(d=a);var p=this.utcOffset(),m=this.toDate(),g=m.toLocaleString("en-US",{timeZone:d}),y=Math.round((m-new Date(g))/1e3/60),v=o(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-y,!0);if(h){var b=v.utcOffset();v=v.add(p-b,"minute")}return v.$x.$timezone=d,v},c.offsetName=function(d){var h=this.$x.$timezone||o.tz.guess(),p=u(this.valueOf(),h,{timeZoneName:d}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var f=c.startOf;c.startOf=function(d,h){if(!this.$x||!this.$x.$timezone)return f.call(this,d,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(p,d,h).tz(this.$x.$timezone,!0)},o.tz=function(d,h,p){var m=p&&h,g=p||h||a,y=l(+o(),g);if(typeof d!="string")return o(d).tz(g);var v=function(x,T,C){var A=x-60*T*1e3,k=l(A,C);if(T===k)return[A,T];var R=l(A-=60*(k-T)*1e3,C);return k===R?[A,k]:[x-60*Math.min(k,R)*1e3,Math.max(k,R)]}(o.utc(d,m).valueOf(),y,g),b=v[0],w=v[1],E=o(b).utcOffset(w);return E.$x.$timezone=g,E},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(d){a=d}}})})(B3e);var E7t=B3e.exports;const x7t=dl(E7t);var j3e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(oo,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var u=o.prototype;a.utc=function(m){var g={date:m,utc:!0,args:arguments};return new o(g)},u.utc=function(m){var g=a(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),n):g},u.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),l.call(this,m)};var c=u.init;u.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var f=u.utcOffset;u.utcOffset=function(m,g){var y=this.$utils().u;if(y(m))return this.$u?0:y(this.$offset)?f.call(this):this.$offset;if(typeof m=="string"&&(m=function(E){E===void 0&&(E="");var x=E.match(r);if(!x)return null;var T=(""+x[0]).match(i)||["-",0,0],C=T[0],A=60*+T[1]+ +T[2];return A===0?0:C==="+"?A:-A}(m),m===null))return this;var v=Math.abs(m)<=16?60*m:m,b=this;if(g)return b.$offset=v,b.$u=m===0,b;if(m!==0){var w=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(v+w,n)).$offset=v,b.$x.$localOffset=w}else b=this.utc();return b};var d=u.format;u.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,g)},u.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var h=u.toDate;u.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=u.diff;u.diff=function(m,g,y){if(m&&this.$u===m.$u)return p.call(this,m,g,y);var v=this.local(),b=a(m).local();return p.call(v,b,g,y)}}})})(j3e);var S7t=j3e.exports;const T7t=dl(S7t);Ct.extend(T7t);Ct.extend(x7t);function C7t(e,t){return t?Ct(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const Mge=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=C7t(e,t);return n==="remove"&&(r*=-1),Ct(e).add(r,"minutes").toDate()};function q0(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>Mge(i,n,e)):Mge(t,n,e)}function A7t({minDate:e,maxDate:t,timezone:n}){const r=q0("add",new Date,n);return!e&&!t?r:e&&Ct(r).isBefore(e)?e:t&&Ct(r).isAfter(t)?t:r}const I7t={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"",consistentWeeks:!1},k7t=I.createContext(I7t);function lc(){const e=I.useContext(k7t),t=I.useCallback(o=>o||e.locale,[e.locale]),n=I.useCallback(o=>o||e.timezone||void 0,[e.timezone]),r=I.useCallback(o=>typeof o=="number"?o:e.firstDayOfWeek,[e.firstDayOfWeek]),i=I.useCallback(o=>Array.isArray(o)?o:e.weekendDays,[e.weekendDays]),s=I.useCallback(o=>typeof o=="string"?o:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:s}}function R7t(e,t){if(t==="range"&&Array.isArray(e)){const[n,r]=e;return n?r?`${n.toISOString()}  ${r.toISOString()}`:`${n.toISOString()} `:""}return t==="multiple"&&Array.isArray(e)?e.map(n=>n==null?void 0:n.toISOString()).filter(Boolean).join(", "):!Array.isArray(e)&&e?e.toISOString():""}function U3e({value:e,type:t,name:n,form:r}){return _.jsx("input",{type:"hidden",value:R7t(e,t),name:n,form:r})}U3e.displayName="@mantine/dates/HiddenDatesInput";var z3e={day:"m_396ce5cb"};const N7t={},D7t=(e,{size:t})=>({day:{"--day-size":rn(t,"day-size")}}),Ste=Le((e,t)=>{const n=xe("Day",N7t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,date:l,disabled:c,__staticSelector:f,weekend:d,outside:h,selected:p,renderDay:m,inRange:g,firstInRange:y,lastInRange:v,hidden:b,static:w,...E}=n,x=vt({name:f||"Day",classes:z3e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:D7t,rootSelector:"day"}),T=lc();return _.jsx(Ss,{...x("day",{style:b?{display:"none"}:void 0}),component:w?"div":"button",ref:t,disabled:c,"data-today":Ct(l).isSame(q0("add",new Date,T.getTimezone()),"day")||void 0,"data-hidden":b||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&d||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":g&&!c||void 0,"data-first-in-range":y&&!c||void 0,"data-last-in-range":v&&!c||void 0,"data-static":w||void 0,unstyled:a,...E,children:(m==null?void 0:m(l))||l.getDate()})});Ste.classes=z3e;Ste.displayName="@mantine/dates/Day";function P7t({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=Ct().day(n),i=[];for(let s=0;s<7;s+=1)typeof t=="string"?i.push(Ct(r).add(s,"days").locale(e).format(t)):i.push(t(Ct(r).add(s,"days").toDate()));return i}var V3e={weekday:"m_18a3eca"};const O7t={},$7t=(e,{size:t})=>({weekdaysRow:{"--wr-fz":mo(t),"--wr-spacing":ql(t)}}),Tte=Le((e,t)=>{const n=xe("WeekdaysRow",O7t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,locale:l,firstDayOfWeek:c,weekdayFormat:f,cellComponent:d="th",__staticSelector:h,...p}=n,m=vt({name:h||"WeekdaysRow",classes:V3e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$7t,rootSelector:"weekdaysRow"}),g=lc(),y=P7t({locale:g.getLocale(l),format:f,firstDayOfWeek:g.getFirstDayOfWeek(c)}).map((v,b)=>_.jsx(d,{...m("weekday"),children:v},b));return _.jsx(_e,{component:"tr",ref:t,...m("weekdaysRow"),...p,children:y})});Tte.classes=V3e;Tte.displayName="@mantine/dates/WeekdaysRow";function M7t(e,t=1){const n=new Date(e),r=t===0?6:t-1;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function L7t(e,t=1){const n=new Date(e);for(;n.getDay()!==t;)n.setDate(n.getDate()-1);return n}function F7t({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=e.getMonth(),i=new Date(e.getFullYear(),r,1),s=new Date(e.getFullYear(),e.getMonth()+1,0),o=M7t(s,t),a=L7t(i,t),u=[];for(;a<=o;){const l=[];for(let c=0;c<7;c+=1)l.push(new Date(a)),a.setDate(a.getDate()+1);u.push(l)}if(n&&u.length<6){const l=u[u.length-1],c=l[l.length-1],f=new Date(c);for(f.setDate(f.getDate()+1);u.length<6;){const d=[];for(let h=0;h<7;h+=1)d.push(new Date(f)),f.setDate(f.getDate()+1);u.push(d)}}return u}function H3e(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function q3e(e,t){return t instanceof Date?Ct(e).isAfter(Ct(t).subtract(1,"day"),"day"):!0}function W3e(e,t){return t instanceof Date?Ct(e).isBefore(Ct(t).add(1,"day"),"day"):!0}function B7t(e,t,n,r,i,s,o){const a=e.flat().filter(c=>{var f;return W3e(c,n)&&q3e(c,t)&&!(i!=null&&i(c))&&!((f=r==null?void 0:r(c))!=null&&f.disabled)&&(!s||H3e(c,o))}),u=a.find(c=>{var f;return(f=r==null?void 0:r(c))==null?void 0:f.selected});if(u)return u;const l=a.find(c=>Ct().isSame(c,"date"));return l||a[0]}var G3e={month:"m_cc9820d3",monthCell:"m_8f457cd5"};const j7t={withCellSpacing:!0},J4=Le((e,t)=>{const n=xe("Month",j7t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,locale:c,firstDayOfWeek:f,weekdayFormat:d,month:h,weekendDays:p,getDayProps:m,excludeDate:g,minDate:y,maxDate:v,renderDay:b,hideOutsideDates:w,hideWeekdays:E,getDayAriaLabel:x,static:T,__getDayRef:C,__onDayKeyDown:A,__onDayClick:k,__onDayMouseEnter:R,__preventFocus:O,__stopPropagation:D,withCellSpacing:$,size:F,...L}=n,j=vt({name:l||"Month",classes:G3e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"month"}),z=lc(),q=F7t({month:h,firstDayOfWeek:z.getFirstDayOfWeek(f),consistentWeeks:z.consistentWeeks}),P=B7t(q,y,v,m,g,w,h),{resolvedClassNames:U,resolvedStyles:W}=ig({classNames:r,styles:o,props:n}),B=q.map((H,G)=>{const te=H.map((le,fe)=>{const de=!H3e(le,h),ge=(x==null?void 0:x(le))||Ct(le).locale(c||z.locale).format("D MMMM YYYY"),Ie=m==null?void 0:m(le),pe=Ct(le).isSame(P,"date");return _.jsx("td",{...j("monthCell"),"data-with-spacing":$||void 0,children:_.jsx(Ste,{__staticSelector:l||"Month",classNames:U,styles:W,unstyled:a,"data-mantine-stop-propagation":D||void 0,renderDay:b,date:le,size:F,weekend:z.getWeekendDays(p).includes(le.getDay()),outside:de,hidden:w?de:!1,"aria-label":ge,static:T,disabled:(g==null?void 0:g(le))||!W3e(le,v)||!q3e(le,y),ref:He=>C==null?void 0:C(G,fe,He),...Ie,onKeyDown:He=>{var Ue;(Ue=Ie==null?void 0:Ie.onKeyDown)==null||Ue.call(Ie,He),A==null||A(He,{rowIndex:G,cellIndex:fe,date:le})},onMouseEnter:He=>{var Ue;(Ue=Ie==null?void 0:Ie.onMouseEnter)==null||Ue.call(Ie,He),R==null||R(He,le)},onClick:He=>{var Ue;(Ue=Ie==null?void 0:Ie.onClick)==null||Ue.call(Ie,He),k==null||k(He,le)},onMouseDown:He=>{var Ue;(Ue=Ie==null?void 0:Ie.onMouseDown)==null||Ue.call(Ie,He),O&&He.preventDefault()},tabIndex:O||!pe?-1:0})},le.toString())});return _.jsx("tr",{...j("monthRow"),children:te},G)});return _.jsxs(_e,{component:"table",...j("month"),size:F,ref:t,...L,children:[!E&&_.jsx("thead",{...j("monthThead"),children:_.jsx(Tte,{__staticSelector:l||"Month",locale:c,firstDayOfWeek:f,weekdayFormat:d,size:F,classNames:U,styles:W,unstyled:a})}),_.jsx("tbody",{...j("monthTbody"),children:B})]})});J4.classes=G3e;J4.displayName="@mantine/dates/Month";var Y3e={pickerControl:"m_dc6a3c71"};const U7t={},z7t=(e,{size:t})=>({pickerControl:{"--dpc-fz":mo(t),"--dpc-size":rn(t,"dpc-size")}}),Z4=Le((e,t)=>{const n=xe("PickerControl",U7t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,firstInRange:l,lastInRange:c,inRange:f,__staticSelector:d,selected:h,disabled:p,...m}=n,g=vt({name:d||"PickerControl",classes:Y3e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:z7t,rootSelector:"pickerControl"});return _.jsx(Ss,{...g("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":f&&!p&&!h||void 0,"data-first-in-range":l&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...m})});Z4.classes=Y3e;Z4.displayName="@mantine/dates/PickerControl";function K3e(e,t,n){return!t&&!n?!1:!!(t&&Ct(e).isBefore(t,"year")||n&&Ct(e).isAfter(n,"year"))}function V7t(e,t,n,r){const i=e.flat().filter(a=>{var u;return!K3e(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Ct().isSame(a,"year"));return o||i[0]}function X3e(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let s=0;s<4;s+=1){const o=s===3?1:3;for(let a=0;a<o;a+=1)i[s].push(new Date(n+r,0)),r+=1}return i}var Q3e={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const H7t={yearsListFormat:"YYYY",withCellSpacing:!0},e5=Le((e,t)=>{const n=xe("YearsList",H7t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,decade:l,yearsListFormat:c,locale:f,minDate:d,maxDate:h,getYearControlProps:p,__staticSelector:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:E,withCellSpacing:x,size:T,...C}=n,A=vt({name:m||"YearsList",classes:Q3e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"yearsList"}),k=lc(),R=X3e(l),O=V7t(R,d,h,p),D=R.map(($,F)=>{const L=$.map((j,z)=>{const q=p==null?void 0:p(j),P=Ct(j).isSame(O,"year");return _.jsx("td",{...A("yearsListCell"),"data-with-spacing":x||void 0,children:_.jsx(Z4,{...A("yearsListControl"),size:T,unstyled:a,"data-mantine-stop-propagation":E||void 0,disabled:K3e(j,d,h),ref:U=>g==null?void 0:g(F,z,U),...q,onKeyDown:U=>{var W;(W=q==null?void 0:q.onKeyDown)==null||W.call(q,U),y==null||y(U,{rowIndex:F,cellIndex:z,date:j})},onClick:U=>{var W;(W=q==null?void 0:q.onClick)==null||W.call(q,U),v==null||v(U,j)},onMouseEnter:U=>{var W;(W=q==null?void 0:q.onMouseEnter)==null||W.call(q,U),b==null||b(U,j)},onMouseDown:U=>{var W;(W=q==null?void 0:q.onMouseDown)==null||W.call(q,U),w&&U.preventDefault()},tabIndex:w||!P?-1:0,children:Ct(j).locale(k.getLocale(f)).format(c)})},z)});return _.jsx("tr",{...A("yearsListRow"),children:L},F)});return _.jsx(_e,{component:"table",ref:t,size:T,...A("yearsList"),...C,children:_.jsx("tbody",{children:D})})});e5.classes=Q3e;e5.displayName="@mantine/dates/YearsList";function J3e(e,t,n){return!t&&!n?!1:!!(t&&Ct(e).isBefore(t,"month")||n&&Ct(e).isAfter(n,"month"))}function q7t(e,t,n,r){const i=e.flat().filter(a=>{var u;return!J3e(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Ct().isSame(a,"month"));return o||i[0]}function W7t(e){const t=Ct(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let s=0;s<3;s+=1)n[i].push(Ct(t).add(r,"months").toDate()),r+=1;return n}var Z3e={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const G7t={monthsListFormat:"MMM",withCellSpacing:!0},t5=Le((e,t)=>{const n=xe("MonthsList",G7t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,year:c,monthsListFormat:f,locale:d,minDate:h,maxDate:p,getMonthControlProps:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:E,withCellSpacing:x,size:T,...C}=n,A=vt({name:l||"MonthsList",classes:Z3e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"monthsList"}),k=lc(),R=W7t(c),O=q7t(R,h,p,m),D=R.map(($,F)=>{const L=$.map((j,z)=>{const q=m==null?void 0:m(j),P=Ct(j).isSame(O,"month");return _.jsx("td",{...A("monthsListCell"),"data-with-spacing":x||void 0,children:_.jsx(Z4,{...A("monthsListControl"),size:T,unstyled:a,__staticSelector:l||"MonthsList","data-mantine-stop-propagation":E||void 0,disabled:J3e(j,h,p),ref:U=>g==null?void 0:g(F,z,U),...q,onKeyDown:U=>{var W;(W=q==null?void 0:q.onKeyDown)==null||W.call(q,U),y==null||y(U,{rowIndex:F,cellIndex:z,date:j})},onClick:U=>{var W;(W=q==null?void 0:q.onClick)==null||W.call(q,U),v==null||v(U,j)},onMouseEnter:U=>{var W;(W=q==null?void 0:q.onMouseEnter)==null||W.call(q,U),b==null||b(U,j)},onMouseDown:U=>{var W;(W=q==null?void 0:q.onMouseDown)==null||W.call(q,U),w&&U.preventDefault()},tabIndex:w||!P?-1:0,children:Ct(j).locale(k.getLocale(d)).format(f)})},z)});return _.jsx("tr",{...A("monthsListRow"),children:L},F)});return _.jsx(_e,{component:"table",ref:t,size:T,...A("monthsList"),...C,children:_.jsx("tbody",{children:D})})});t5.classes=Z3e;t5.displayName="@mantine/dates/MonthsList";var eLe={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const Y7t={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},K7t=(e,{size:t})=>({calendarHeader:{"--dch-control-size":rn(t,"dch-control-size"),"--dch-fz":mo(t)}}),ov=Le((e,t)=>{const n=xe("CalendarHeader",Y7t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,nextIcon:l,previousIcon:c,nextLabel:f,previousLabel:d,onNext:h,onPrevious:p,onLevelClick:m,label:g,nextDisabled:y,previousDisabled:v,hasNextLevel:b,levelControlAriaLabel:w,withNext:E,withPrevious:x,__staticSelector:T,__preventFocus:C,__stopPropagation:A,...k}=n,R=vt({name:T||"CalendarHeader",classes:eLe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:K7t,rootSelector:"calendarHeader"}),O=C?D=>D.preventDefault():void 0;return _.jsxs(_e,{...R("calendarHeader"),ref:t,...k,children:[x&&_.jsx(Ss,{...R("calendarHeaderControl"),"data-direction":"previous","aria-label":d,onClick:p,unstyled:a,onMouseDown:O,disabled:v,"data-disabled":v||void 0,tabIndex:C||v?-1:0,"data-mantine-stop-propagation":A||void 0,children:c||_.jsx(UE,{...R("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),_.jsx(Ss,{component:b?"button":"div",...R("calendarHeaderLevel"),onClick:b?m:void 0,unstyled:a,onMouseDown:b?O:void 0,disabled:!b,"data-static":!b||void 0,"aria-label":w,tabIndex:C||!b?-1:0,"data-mantine-stop-propagation":A||void 0,children:g}),E&&_.jsx(Ss,{...R("calendarHeaderControl"),"data-direction":"next","aria-label":f,onClick:h,unstyled:a,onMouseDown:O,disabled:y,"data-disabled":y||void 0,tabIndex:C||y?-1:0,"data-mantine-stop-propagation":A||void 0,children:l||_.jsx(UE,{...R("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});ov.classes=eLe;ov.displayName="@mantine/dates/CalendarHeader";function X7t(e){const t=X3e(e);return[t[0][0],t[3][0]]}const Q7t={decadeLabelFormat:"YYYY"},n5=Le((e,t)=>{const n=xe("DecadeLevel",Q7t,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:E,previousDisabled:x,levelControlAriaLabel:T,withNext:C,withPrevious:A,decadeLabelFormat:k,classNames:R,styles:O,unstyled:D,__staticSelector:$,__stopPropagation:F,size:L,...j}=n,z=lc(),[q,P]=X7t(r),U={__staticSelector:$||"DecadeLevel",classNames:R,styles:O,unstyled:D,size:L},W=typeof E=="boolean"?E:o?!Ct(P).endOf("year").isBefore(o):!1,B=typeof x=="boolean"?x:s?!Ct(q).startOf("year").isAfter(s):!1,H=(G,te)=>Ct(G).locale(i||z.locale).format(te);return _.jsxs(_e,{"data-decade-level":!0,size:L,ref:t,...j,children:[_.jsx(ov,{label:typeof k=="function"?k(q,P):`${H(q,k)}  ${H(P,k)}`,__preventFocus:p,__stopPropagation:F,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:W,previousDisabled:B,hasNextLevel:!1,levelControlAriaLabel:T,withNext:C,withPrevious:A,...U}),_.jsx(e5,{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:F,withCellSpacing:h,...U})]})});n5.classes={...e5.classes,...ov.classes};n5.displayName="@mantine/dates/DecadeLevel";const J7t={yearLabelFormat:"YYYY"},r5=Le((e,t)=>{const n=xe("YearLevel",J7t,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:E,nextDisabled:x,previousDisabled:T,hasNextLevel:C,levelControlAriaLabel:A,withNext:k,withPrevious:R,yearLabelFormat:O,__staticSelector:D,__stopPropagation:$,size:F,classNames:L,styles:j,unstyled:z,...q}=n,P=lc(),U={__staticSelector:D||"YearLevel",classNames:L,styles:j,unstyled:z,size:F},W=typeof x=="boolean"?x:o?!Ct(r).endOf("year").isBefore(o):!1,B=typeof T=="boolean"?T:s?!Ct(r).startOf("year").isAfter(s):!1;return _.jsxs(_e,{"data-year-level":!0,size:F,ref:t,...q,children:[_.jsx(ov,{label:typeof O=="function"?O(r):Ct(r).locale(i||P.locale).format(O),__preventFocus:p,__stopPropagation:$,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:E,nextDisabled:W,previousDisabled:B,hasNextLevel:C,levelControlAriaLabel:A,withNext:k,withPrevious:R,...U}),_.jsx(t5,{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:$,withCellSpacing:h,...U})]})});r5.classes={...ov.classes,...t5.classes};r5.displayName="@mantine/dates/YearLevel";const Z7t={monthLabelFormat:"MMMM YYYY"},i5=Le((e,t)=>{const n=xe("MonthLevel",Z7t,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,withCellSpacing:w,__preventFocus:E,__stopPropagation:x,nextIcon:T,previousIcon:C,nextLabel:A,previousLabel:k,onNext:R,onPrevious:O,onLevelClick:D,nextDisabled:$,previousDisabled:F,hasNextLevel:L,levelControlAriaLabel:j,withNext:z,withPrevious:q,monthLabelFormat:P,classNames:U,styles:W,unstyled:B,__staticSelector:H,size:G,static:te,...le}=n,fe=lc(),de={__staticSelector:H||"MonthLevel",classNames:U,styles:W,unstyled:B,size:G},ge=typeof $=="boolean"?$:f?!Ct(r).endOf("month").isBefore(f):!1,Ie=typeof F=="boolean"?F:c?!Ct(r).startOf("month").isAfter(c):!1;return _.jsxs(_e,{"data-month-level":!0,size:G,ref:t,...le,children:[_.jsx(ov,{label:typeof P=="function"?P(r):Ct(r).locale(i||fe.locale).format(P),__preventFocus:E,__stopPropagation:x,nextIcon:T,previousIcon:C,nextLabel:A,previousLabel:k,onNext:R,onPrevious:O,onLevelClick:D,nextDisabled:ge,previousDisabled:Ie,hasNextLevel:L,levelControlAriaLabel:j,withNext:z,withPrevious:q,...de}),_.jsx(J4,{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,__preventFocus:E,__stopPropagation:x,static:te,withCellSpacing:w,...de})]})});i5.classes={...J4.classes,...ov.classes};i5.displayName="@mantine/dates/MonthLevel";var tLe={levelsGroup:"m_30b26e33"};const ezt={},av=Le((e,t)=>{const n=xe("LevelsGroup",ezt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,...c}=n,f=vt({name:l||"LevelsGroup",classes:tLe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"levelsGroup"});return _.jsx(_e,{ref:t,...f("levelsGroup"),...c})});av.classes=tLe;av.displayName="@mantine/dates/LevelsGroup";const tzt={numberOfColumns:1},s5=Le((e,t)=>{const n=xe("DecadeLevelGroup",tzt,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,classNames:E,styles:x,unstyled:T,__staticSelector:C,__stopPropagation:A,numberOfColumns:k,levelControlAriaLabel:R,decadeLabelFormat:O,size:D,vars:$,...F}=n,L=I.useRef([]),j=Array(k).fill(0).map((z,q)=>{const P=Ct(r).add(q*10,"years").toDate();return _.jsx(n5,{size:D,yearsListFormat:a,decade:P,withNext:q===k-1,withPrevious:q===0,decadeLabelFormat:O,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(U,W)=>xte({levelIndex:q,rowIndex:W.rowIndex,cellIndex:W.cellIndex,event:U,controlsRef:L}),__getControlRef:(U,W,B)=>{Array.isArray(L.current[q])||(L.current[q]=[]),Array.isArray(L.current[q][U])||(L.current[q][U]=[]),L.current[q][U][W]=B},levelControlAriaLabel:typeof R=="function"?R(P):R,locale:i,minDate:s,maxDate:o,__preventFocus:d,__stopPropagation:A,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,getYearControlProps:u,__staticSelector:C||"DecadeLevelGroup",classNames:E,styles:x,unstyled:T,withCellSpacing:f},q)});return _.jsx(av,{classNames:E,styles:x,__staticSelector:C||"DecadeLevelGroup",ref:t,size:D,unstyled:T,...F,children:j})});s5.classes={...av.classes,...n5.classes};s5.displayName="@mantine/dates/DecadeLevelGroup";const nzt={numberOfColumns:1},o5=Le((e,t)=>{const n=xe("YearLevelGroup",nzt,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:E,hasNextLevel:x,classNames:T,styles:C,unstyled:A,__staticSelector:k,__stopPropagation:R,numberOfColumns:O,levelControlAriaLabel:D,yearLabelFormat:$,size:F,vars:L,...j}=n,z=I.useRef([]),q=Array(O).fill(0).map((P,U)=>{const W=Ct(r).add(U,"years").toDate();return _.jsx(r5,{size:F,monthsListFormat:a,year:W,withNext:U===O-1,withPrevious:U===0,yearLabelFormat:$,__stopPropagation:R,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(B,H)=>xte({levelIndex:U,rowIndex:H.rowIndex,cellIndex:H.cellIndex,event:B,controlsRef:z}),__getControlRef:(B,H,G)=>{Array.isArray(z.current[U])||(z.current[U]=[]),Array.isArray(z.current[U][B])||(z.current[U][B]=[]),z.current[U][B][H]=G},levelControlAriaLabel:typeof D=="function"?D(W):D,locale:i,minDate:s,maxDate:o,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:E,hasNextLevel:x,getMonthControlProps:u,classNames:T,styles:C,unstyled:A,__staticSelector:k||"YearLevelGroup",withCellSpacing:f},U)});return _.jsx(av,{classNames:T,styles:C,__staticSelector:k||"YearLevelGroup",ref:t,size:F,unstyled:A,...j,children:q})});o5.classes={...r5.classes,...av.classes};o5.displayName="@mantine/dates/YearLevelGroup";const rzt={numberOfColumns:1},a5=Le((e,t)=>{const n=xe("MonthLevelGroup",rzt,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__onDayClick:g,__onDayMouseEnter:y,withCellSpacing:v,__preventFocus:b,nextIcon:w,previousIcon:E,nextLabel:x,previousLabel:T,onNext:C,onPrevious:A,onLevelClick:k,nextDisabled:R,previousDisabled:O,hasNextLevel:D,classNames:$,styles:F,unstyled:L,numberOfColumns:j,levelControlAriaLabel:z,monthLabelFormat:q,__staticSelector:P,__stopPropagation:U,size:W,static:B,vars:H,...G}=n,te=I.useRef([]),le=Array(j).fill(0).map((fe,de)=>{const ge=Ct(r).add(de,"months").toDate();return _.jsx(i5,{month:ge,withNext:de===j-1,withPrevious:de===0,monthLabelFormat:q,__stopPropagation:U,__onDayClick:g,__onDayMouseEnter:y,__onDayKeyDown:(Ie,pe)=>xte({levelIndex:de,rowIndex:pe.rowIndex,cellIndex:pe.cellIndex,event:Ie,controlsRef:te}),__getDayRef:(Ie,pe,He)=>{Array.isArray(te.current[de])||(te.current[de]=[]),Array.isArray(te.current[de][Ie])||(te.current[de][Ie]=[]),te.current[de][Ie][pe]=He},levelControlAriaLabel:typeof z=="function"?z(ge):z,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__preventFocus:b,nextIcon:w,previousIcon:E,nextLabel:x,previousLabel:T,onNext:C,onPrevious:A,onLevelClick:k,nextDisabled:R,previousDisabled:O,hasNextLevel:D,classNames:$,styles:F,unstyled:L,__staticSelector:P||"MonthLevelGroup",size:W,static:B,withCellSpacing:v},de)});return _.jsx(av,{classNames:$,styles:F,__staticSelector:P||"MonthLevelGroup",ref:t,size:W,...G,children:le})});a5.classes={...av.classes,...i5.classes};a5.displayName="@mantine/dates/MonthLevelGroup";var nLe={input:"m_6fa5e2aa"};const izt={},u5=Le((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:i,classNames:s,styles:o,unstyled:a,popoverProps:u,modalProps:l,dropdownType:c,children:f,formattedValue:d,dropdownHandlers:h,dropdownOpened:p,onClick:m,clearable:g,onClear:y,clearButtonProps:v,rightSection:b,shouldClear:w,readOnly:E,disabled:x,value:T,name:C,form:A,type:k,...R}=dEe("PickerInputBase",izt,e),O=b||(g&&w&&!E&&!x?_.jsx(Wy,{variant:"transparent",onClick:y,unstyled:a,size:n.size||"sm",...v}):null),D=()=>{k==="range"&&Array.isArray(T)&&T[0]&&!T[1]&&y(),h.close()};return _.jsxs(_.Fragment,{children:[c==="modal"&&!E&&_.jsx(Ts,{opened:p,onClose:D,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:a,...l,children:f}),_.jsx(vi.Wrapper,{...r,children:_.jsxs(si,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:a,...u,disabled:(u==null?void 0:u.disabled)||c==="modal"||E,onClose:()=>{var $;($=u==null?void 0:u.onClose)==null||$.call(u),D()},children:[_.jsx(si.Target,{children:_.jsx(vi,{"aria-label":d||i,"data-dates-input":!0,"data-read-only":E||void 0,disabled:x,component:"button",type:"button",multiline:!0,onClick:$=>{m==null||m($),h.toggle()},rightSection:O,...n,ref:t,classNames:{...s,input:Bi(nLe.input,s==null?void 0:s.input)},...R,children:d||_.jsx(vi.Placeholder,{error:n.error,unstyled:a,className:s==null?void 0:s.placeholder,style:o==null?void 0:o.placeholder,children:i})})}),_.jsx(si.Dropdown,{"data-dates-dropdown":!0,children:f})]})}),_.jsx(U3e,{value:T,name:C,form:A,type:k})]})});u5.classes=nLe;u5.displayName="@mantine/dates/PickerInputBase";const Lge=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function Cte({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const s=I.useRef(e),o=lc(),[a,u,l]=Cs({value:q0("add",t,o.getTimezone(),!i),defaultValue:q0("add",n,o.getTimezone(),!i),finalValue:Lge(e),onChange:f=>{r==null||r(q0("remove",f,o.getTimezone(),!i))}});let c=a;return s.current!==e&&(s.current=e,t===void 0&&(c=n!==void 0?n:Lge(e),u(c))),[c,u,l]}function rU(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function szt(e){return e===0?"month":e===1?"year":"decade"}function uC(e,t,n){return szt(ch(rU(e,0),rU(t,0),rU(n,2)))}const ozt={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},l5=Le((e,t)=>{const n=xe("Calendar",ozt,e),{vars:r,maxLevel:i,minLevel:s,defaultLevel:o,level:a,onLevelChange:u,date:l,defaultDate:c,onDateChange:f,numberOfColumns:d,columnsToScroll:h,ariaLabels:p,onYearSelect:m,onMonthSelect:g,onYearMouseEnter:y,onMonthMouseEnter:v,__updateDateOnYearSelect:b,__updateDateOnMonthSelect:w,firstDayOfWeek:E,weekdayFormat:x,weekendDays:T,getDayProps:C,excludeDate:A,renderDay:k,hideOutsideDates:R,hideWeekdays:O,getDayAriaLabel:D,monthLabelFormat:$,nextIcon:F,previousIcon:L,__onDayClick:j,__onDayMouseEnter:z,withCellSpacing:q,monthsListFormat:P,getMonthControlProps:U,yearLabelFormat:W,yearsListFormat:B,getYearControlProps:H,decadeLabelFormat:G,classNames:te,styles:le,unstyled:fe,minDate:de,maxDate:ge,locale:Ie,__staticSelector:pe,size:He,__preventFocus:Ue,__stopPropagation:yt,onNextDecade:it,onPreviousDecade:be,onNextYear:ke,onPreviousYear:ze,onNextMonth:ct,onPreviousMonth:Ot,static:Ge,__timezoneApplied:ye,...ht}=n,{resolvedClassNames:bt,resolvedStyles:me}=ig({classNames:te,styles:le,props:n}),[Ae,qe]=Cs({value:a?uC(a,s,i):void 0,defaultValue:o?uC(o,s,i):void 0,finalValue:uC(void 0,s,i),onChange:u}),[ut,wt]=Cte({type:"default",value:l,defaultValue:c,onChange:f,applyTimezone:!ye}),Bn={__staticSelector:pe||"Calendar",styles:me,classNames:bt,unstyled:fe,size:He},Ir=lc(),jn=h||d||1,hr=ut||q0("add",new Date,Ir.getTimezone()),yn=()=>{const In=Ct(hr).add(jn,"month").toDate();ct==null||ct(In),wt(In)},An=()=>{const In=Ct(hr).subtract(jn,"month").toDate();Ot==null||Ot(In),wt(In)},sr=()=>{const In=Ct(hr).add(jn,"year").toDate();ke==null||ke(In),wt(In)},or=()=>{const In=Ct(hr).subtract(jn,"year").toDate();ze==null||ze(In),wt(In)},Qo=()=>{const In=Ct(hr).add(10*jn,"year").toDate();it==null||it(In),wt(In)},Ui=()=>{const In=Ct(hr).subtract(10*jn,"year").toDate();be==null||be(In),wt(In)};return _.jsxs(_e,{ref:t,size:He,"data-calendar":!0,...ht,children:[Ae==="month"&&_.jsx(a5,{month:hr,minDate:de,maxDate:ge,firstDayOfWeek:E,weekdayFormat:x,weekendDays:T,getDayProps:C,excludeDate:A,renderDay:k,hideOutsideDates:R,hideWeekdays:O,getDayAriaLabel:D,onNext:yn,onPrevious:An,hasNextLevel:i!=="month",onLevelClick:()=>qe("year"),numberOfColumns:d,locale:Ie,levelControlAriaLabel:p==null?void 0:p.monthLevelControl,nextLabel:p==null?void 0:p.nextMonth,nextIcon:F,previousLabel:p==null?void 0:p.previousMonth,previousIcon:L,monthLabelFormat:$,__onDayClick:j,__onDayMouseEnter:z,__preventFocus:Ue,__stopPropagation:yt,static:Ge,withCellSpacing:q,...Bn}),Ae==="year"&&_.jsx(o5,{year:hr,numberOfColumns:d,minDate:de,maxDate:ge,monthsListFormat:P,getMonthControlProps:U,locale:Ie,onNext:sr,onPrevious:or,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>qe("decade"),levelControlAriaLabel:p==null?void 0:p.yearLevelControl,nextLabel:p==null?void 0:p.nextYear,nextIcon:F,previousLabel:p==null?void 0:p.previousYear,previousIcon:L,yearLabelFormat:W,__onControlMouseEnter:v,__onControlClick:(In,zi)=>{w&&wt(zi),qe(uC("month",s,i)),g==null||g(zi)},__preventFocus:Ue,__stopPropagation:yt,withCellSpacing:q,...Bn}),Ae==="decade"&&_.jsx(s5,{decade:hr,minDate:de,maxDate:ge,yearsListFormat:B,getYearControlProps:H,locale:Ie,onNext:Qo,onPrevious:Ui,numberOfColumns:d,nextLabel:p==null?void 0:p.nextDecade,nextIcon:F,previousLabel:p==null?void 0:p.previousDecade,previousIcon:L,decadeLabelFormat:G,__onControlMouseEnter:y,__onControlClick:(In,zi)=>{b&&wt(zi),qe(uC("year",s,i)),m==null||m(zi)},__preventFocus:Ue,__stopPropagation:yt,withCellSpacing:q,...Bn})]})});l5.classes={...s5.classes,...o5.classes,...a5.classes};l5.displayName="@mantine/dates/Calendar";function azt(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:E,onNextDecade:x,onPreviousDecade:T,withCellSpacing:C,__updateDateOnYearSelect:A,__updateDateOnMonthSelect:k,firstDayOfWeek:R,weekdayFormat:O,weekendDays:D,getDayProps:$,excludeDate:F,renderDay:L,hideOutsideDates:j,hideWeekdays:z,getDayAriaLabel:q,monthLabelFormat:P,monthsListFormat:U,getMonthControlProps:W,yearLabelFormat:B,yearsListFormat:H,getYearControlProps:G,decadeLabelFormat:te,allowSingleDateInRange:le,allowDeselect:fe,minDate:de,maxDate:ge,locale:Ie,...pe}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:E,onNextDecade:x,onPreviousDecade:T,withCellSpacing:C,__updateDateOnYearSelect:A,__updateDateOnMonthSelect:k,firstDayOfWeek:R,weekdayFormat:O,weekendDays:D,getDayProps:$,excludeDate:F,renderDay:L,hideOutsideDates:j,hideWeekdays:z,getDayAriaLabel:q,monthLabelFormat:P,monthsListFormat:U,getMonthControlProps:W,yearLabelFormat:B,yearsListFormat:H,getYearControlProps:G,decadeLabelFormat:te,allowSingleDateInRange:le,allowDeselect:fe,minDate:de,maxDate:ge,locale:Ie},others:pe}}function Fge(e,t){const n=[...t].sort((r,i)=>r.getTime()-i.getTime());return Ct(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&Ct(n[1]).endOf("day").add(1,"ms").isAfter(e)}function uzt({type:e,level:t,value:n,defaultValue:r,onChange:i,allowSingleDateInRange:s,allowDeselect:o,onMouseLeave:a,applyTimezone:u=!0}){const[l,c]=Cte({type:e,value:n,defaultValue:r,onChange:i,applyTimezone:u}),[f,d]=I.useState(e==="range"&&l[0]&&!l[1]?l[0]:null),[h,p]=I.useState(null),m=x=>{if(e==="range"){if(f instanceof Date&&!l[1]){if(Ct(x).isSame(f,t)&&!s){d(null),p(null),c([null,null]);return}const T=[x,f];T.sort((C,A)=>C.getTime()-A.getTime()),c(T),p(null),d(null);return}if(l[0]&&!l[1]&&Ct(x).isSame(l[0],t)&&!s){d(null),p(null),c([null,null]);return}c([x,null]),p(null),d(x);return}if(e==="multiple"){l.some(T=>Ct(T).isSame(x,t))?c(l.filter(T=>!Ct(T).isSame(x,t))):c([...l,x]);return}l&&o&&Ct(x).isSame(l,t)?c(null):c(x)},g=x=>f instanceof Date&&h instanceof Date?Fge(x,[h,f]):l[0]instanceof Date&&l[1]instanceof Date?Fge(x,l):!1,y=e==="range"?x=>{a==null||a(x),p(null)}:a,v=x=>l[0]instanceof Date&&Ct(x).isSame(l[0],t)?!(h&&Ct(h).isBefore(l[0])):!1,b=x=>l[1]instanceof Date?Ct(x).isSame(l[1],t):!(l[0]instanceof Date)||!h?!1:Ct(h).isBefore(l[0])&&Ct(x).isSame(l[0],t),w=x=>{if(e==="range")return{selected:l.some(C=>C&&Ct(C).isSame(x,t)),inRange:g(x),firstInRange:v(x),lastInRange:b(x),"data-autofocus":!!l[0]&&Ct(l[0]).isSame(x,t)||void 0};if(e==="multiple")return{selected:l.some(C=>C&&Ct(C).isSame(x,t)),"data-autofocus":!!l[0]&&Ct(l[0]).isSame(x,t)||void 0};const T=Ct(l).isSame(x,t);return{selected:T,"data-autofocus":T||void 0}},E=e==="range"&&f?p:()=>{};return I.useEffect(()=>{e==="range"&&!l[0]&&!l[1]&&d(null)},[n]),{onDateChange:m,onRootMouseLeave:y,onHoveredDateChange:E,getControlProps:w,_value:l,setValue:c}}const lzt={type:"default",defaultLevel:"month",numberOfColumns:1},c5=Le((e,t)=>{const n=xe("DatePicker",lzt,e),{classNames:r,styles:i,vars:s,type:o,defaultValue:a,value:u,onChange:l,__staticSelector:c,getDayProps:f,allowSingleDateInRange:d,allowDeselect:h,onMouseLeave:p,numberOfColumns:m,hideOutsideDates:g,__onDayMouseEnter:y,__onDayClick:v,__timezoneApplied:b,...w}=n,{onDateChange:E,onRootMouseLeave:x,onHoveredDateChange:T,getControlProps:C}=uzt({type:o,level:"day",allowDeselect:h,allowSingleDateInRange:d,value:u,defaultValue:a,onChange:l,onMouseLeave:p,applyTimezone:!b}),{resolvedClassNames:A,resolvedStyles:k}=ig({classNames:r,styles:i,props:n}),R=lc();return _.jsx(l5,{ref:t,minLevel:"month",classNames:A,styles:k,__staticSelector:c||"DatePicker",onMouseLeave:x,numberOfColumns:m,hideOutsideDates:g??m!==1,__onDayMouseEnter:(O,D)=>{T(D),y==null||y(O,D)},__onDayClick:(O,D)=>{E(D),v==null||v(O,D)},getDayProps:O=>({...C(O),...f==null?void 0:f(O)}),...w,date:q0("add",w.date,R.getTimezone(),b),__timezoneApplied:!0})});c5.classes=l5.classes;c5.displayName="@mantine/dates/DatePicker";function czt({type:e,value:t,defaultValue:n,onChange:r,locale:i,format:s,closeOnChange:o,sortDates:a,labelSeparator:u,valueFormatter:l}){const c=lc(),[f,d]=Jw(!1),[h,p]=Cte({type:e,value:t,defaultValue:n,onChange:r}),m=v7t({type:e,date:h,locale:c.getLocale(i),format:s,labelSeparator:c.getLabelSeparator(u),formatter:l}),g=b=>{o&&(e==="default"&&d.close(),e==="range"&&b[0]&&b[1]&&d.close()),p(a&&e==="multiple"?[...b].sort((w,E)=>w.getTime()-E.getTime()):b)},y=()=>g(e==="range"?[null,null]:e==="multiple"?[]:null),v=e==="range"?!!h[0]:e==="multiple"?h.length>0:h!==null;return{_value:h,setValue:g,onClear:y,shouldClear:v,formattedValue:m,dropdownOpened:f,dropdownHandlers:d}}const fzt={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},Ate=Le((e,t)=>{const n=xe("DatePickerInput",fzt,e),{type:r,value:i,defaultValue:s,onChange:o,valueFormat:a,labelSeparator:u,locale:l,classNames:c,styles:f,unstyled:d,closeOnChange:h,size:p,variant:m,dropdownType:g,sortDates:y,minDate:v,maxDate:b,vars:w,defaultDate:E,valueFormatter:x,...T}=n,{resolvedClassNames:C,resolvedStyles:A}=ig({classNames:c,styles:f,props:n}),{calendarProps:k,others:R}=azt(T),{_value:O,setValue:D,formattedValue:$,dropdownHandlers:F,dropdownOpened:L,onClear:j,shouldClear:z}=czt({type:r,value:i,defaultValue:s,onChange:o,locale:l,format:a,labelSeparator:u,closeOnChange:h,sortDates:y,valueFormatter:x}),q=Array.isArray(O)?O[0]||E:O||E,P=lc();return _.jsx(u5,{formattedValue:$,dropdownOpened:L,dropdownHandlers:F,classNames:C,styles:A,unstyled:d,ref:t,onClear:j,shouldClear:z,value:O,size:p,variant:m,dropdownType:g,...R,type:r,__staticSelector:"DatePickerInput",children:_.jsx(c5,{...k,size:p,variant:m,type:r,value:O,defaultDate:q||A7t({maxDate:b,minDate:v,timezone:P.getTimezone()}),onChange:D,locale:l,classNames:C,styles:A,unstyled:d,__staticSelector:"DatePickerInput",__stopPropagation:g==="popover",minDate:v,maxDate:b,date:q0("add",k.date,P.getTimezone()),__timezoneApplied:!0})})});Ate.classes={...u5.classes,...c5.classes};Ate.displayName="@mantine/dates/DatePickerInput";var rLe={exports:{}},dzt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",hzt=dzt,pzt=hzt;function iLe(){}function sLe(){}sLe.resetWarningCache=iLe;var mzt=function(){function e(r,i,s,o,a,u){if(u!==pzt){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:sLe,resetWarningCache:iLe};return n.PropTypes=n,n};rLe.exports=mzt();var gzt=rLe.exports;const Bge=dl(gzt),jge={};function vq(e,t){e===void 0&&(e=jge),t===void 0&&(t=jge);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var yzt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vzt=Object.prototype.hasOwnProperty;function bq(e,t){return vzt.call(e,t)}function _q(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)bq(e,i)&&r.push(i);return r}function Ml(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function wq(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Qv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function oLe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Eq(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Eq(e[t]))return!0}else if(typeof e=="object"){for(var r=_q(e),i=r.length,s=0;s<i;s++)if(Eq(e[r[s]]))return!0}}return!1}function Uge(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var aLe=function(e){yzt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Uge(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Uge(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Gi=aLe,bzt=Ml,Bw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=M3(n,this.path);r&&(r=Ml(r));var i=z1(n,{op:"remove",path:this.from}).removed;return z1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=M3(n,this.from);return z1(n,{op:"add",path:this.path,value:Ml(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:YI(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},_zt={add:function(e,t,n){return wq(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Bw.move,copy:Bw.copy,test:Bw.test,_get:Bw._get};function M3(e,t){if(t=="")return e;var n={op:"_get",path:t};return z1(e,n),n.value}function z1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):L3(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=M3(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=YI(e,t.value),o.test===!1)throw new Gi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Gi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Ml(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=L3;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=oLe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!wq(h))throw new Gi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);wq(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Gi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=_zt[t.op].call(t,l,h,e);if(o.test===!1)throw new Gi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=Bw[t.op].call(t,l,h,e);if(o.test===!1)throw new Gi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Gi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function f5(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Gi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Ml(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=z1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function wzt(e,t,n){var r=z1(e,t);if(r.test===!1)throw new Gi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function L3(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Gi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Bw[e.op]){if(typeof e.path!="string")throw new Gi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Gi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Gi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Gi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Eq(e.value))throw new Gi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Gi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Gi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=uLe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Gi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Gi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function uLe(e,t,n){try{if(!Array.isArray(e))throw new Gi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)f5(Ml(t),Ml(e),n||!0);else{n=n||L3;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Gi)return i;throw i}}function YI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!YI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!YI(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const Ezt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Gi,_areEquals:YI,applyOperation:z1,applyPatch:f5,applyReducer:wzt,deepClone:bzt,getValueByPointer:M3,validate:uLe,validator:L3},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Ite=new WeakMap,xzt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),Szt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function Tzt(e){return Ite.get(e)}function Czt(e,t){return e.observers.get(t)}function Azt(e,t){e.observers.delete(t.callback)}function Izt(e,t){t.unobserve()}function kzt(e,t){var n=[],r,i=Tzt(e);if(!i)i=new xzt(e),Ite.set(e,i);else{var s=Czt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Ml(e),t){r.callback=t,r.next=null;var o=function(){xq(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){xq(r),clearTimeout(r.next),Azt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new Szt(t,r)),r}function xq(e,t){t===void 0&&(t=!1);var n=Ite.get(e.object);kte(n.value,e.object,e.patches,"",t),e.patches.length&&f5(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function kte(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=_q(t),o=_q(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(bq(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?kte(c,f,n,r+"/"+Qv(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Qv(l),value:Ml(c)}),n.push({op:"replace",path:r+"/"+Qv(l),value:Ml(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Qv(l),value:Ml(c)}),n.push({op:"remove",path:r+"/"+Qv(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!bq(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Qv(l),value:Ml(t[l])})}}}function Rzt(e,t,n){n===void 0&&(n=!1);var r=[];return kte(e,t,r,"",n),r}const Nzt=Object.freeze(Object.defineProperty({__proto__:null,compare:Rzt,generate:xq,observe:kzt,unobserve:Izt},Symbol.toStringTag,{value:"Module"}));Object.assign({},Ezt,Nzt,{JsonPatchError:aLe,deepClone:Ml,escapePathComponent:Qv,unescapePathComponent:oLe});var Dzt=/("(?:[^\\"]|\\.)*")|[:,]/g,Pzt=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,b,w,E;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),w=JSON.stringify(a,s),w===void 0)return w;if(g=i-u.length-l,w.length<=g&&(v=w.replace(Dzt,function(x,T){return T||x+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(w),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(b="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",E=o(a[h],y,p.length+(f===g-1?0:1)),E!==void 0&&d.push(p+E);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+u)}return w}(t,"",0)};const iU=dl(Pzt);function pl(e,t,n){return e.fields=t||[],e.fname=n,e}function es(e){return e==null?null:e.fname}function xa(e){return e==null?null:e.fields}function lLe(e){return e.length===1?Ozt(e[0]):$zt(e)}const Ozt=e=>function(t){return t[e]},$zt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Me(e){throw Error(e)}function pp(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Me("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Me("Access path missing closing bracket: "+e),r&&Me("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function Kc(e,t,n){const r=pp(e);return e=r.length===1?r[0]:e,pl((n&&n.get||lLe)(r),[e],t||e)}const DR=Kc("id"),Ra=pl(e=>e,[],"identity"),u0=pl(()=>0,[],"zero"),eT=pl(()=>1,[],"one"),Xc=pl(()=>!0,[],"true"),Ug=pl(()=>!1,[],"false");function Mzt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const cLe=0,Rte=1,Nte=2,fLe=3,dLe=4;function Dte(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Mzt,r=e||cLe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=Rte&&n(t||"error","ERROR",arguments),this},warn(){return r>=Nte&&n(t||"warn","WARN",arguments),this},info(){return r>=fLe&&n(t||"log","INFO",arguments),this},debug(){return r>=dLe&&n(t||"log","DEBUG",arguments),this}}}var Be=Array.isArray;function gt(e){return e===Object(e)}const zge=e=>e!=="__proto__";function tT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=Lzt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;nT(r,s,i[s],o)}return r},{})}function nT(e,t,n,r){if(!zge(t))return;let i,s;if(gt(n)&&!Be(n)){s=gt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?nT(s,i,n[i]):zge(i)&&(s[i]=n[i])}else e[t]=n}function Lzt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function er(e){return e[e.length-1]}function _a(e){return e==null||e===""?null:+e}const hLe=e=>t=>e*Math.exp(t),pLe=e=>t=>Math.log(e*t),mLe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),gLe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,F3=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function d5(e,t,n,r){const i=n(e[0]),s=n(er(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function yLe(e,t){return d5(e,t,_a,Ra)}function vLe(e,t){var n=Math.sign(e[0]);return d5(e,t,pLe(n),hLe(n))}function bLe(e,t,n){return d5(e,t,F3(n),F3(1/n))}function _Le(e,t,n){return d5(e,t,mLe(n),gLe(n))}function h5(e,t,n,r,i){const s=r(e[0]),o=r(er(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function Pte(e,t,n){return h5(e,t,n,_a,Ra)}function Ote(e,t,n){const r=Math.sign(e[0]);return h5(e,t,n,pLe(r),hLe(r))}function B3(e,t,n,r){return h5(e,t,n,F3(r),F3(1/r))}function $te(e,t,n,r){return h5(e,t,n,mLe(r),gLe(r))}function wLe(e){return 1+~~(new Date(e).getMonth()/3)}function ELe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function pt(e){return e!=null?Be(e)?e:[e]:[]}function xLe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function wn(e){return typeof e=="function"}const Fzt="descending";function Mte(e,t,n){n=n||{},t=pt(t)||[];const r=[],i=[],s={},o=n.comparator||Bzt;return pt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===Fzt?-1:1),i.push(a=wn(a)?a:Kc(a,null,n)),(xa(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:pl(o(i,r),Object.keys(s))}const p5=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),Bzt=(e,t)=>e.length===1?jzt(e[0],t[0]):Uzt(e,t,e.length),jzt=(e,t)=>function(n,r){return p5(e(n),e(r))*t},Uzt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=p5(s(r),s(i));return o*t[a]});function Na(e){return wn(e)?e:()=>e}function Lte(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function _n(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Yh(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function SLe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const zzt=Object.prototype.hasOwnProperty;function jt(e,t){return zzt.call(e,t)}const GD={};function rT(e){let t={},n;function r(s){return jt(t,s)&&t[s]!==GD}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===GD&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=GD),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==GD&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function TLe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=er(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function lt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),_n(r,n)}function jw(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function uv(e){return typeof e=="boolean"}function W0(e){return Object.prototype.toString.call(e)==="[object Date]"}function CLe(e){return e&&wn(e[Symbol.iterator])}function dr(e){return typeof e=="number"}function ALe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function mt(e){return typeof e=="string"}function Fte(e,t,n){e&&(e=t?pt(e).map(a=>a.replace(/\\(.)/g,"$1")):pt(e));const r=e&&e.length,i=n&&n.get||lLe,s=a=>i(t?[a]:pp(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return pl(o,e,"key")}function ILe(e,t){const n=e[0],r=er(e),i=+t;return i?i===1?r:n+i*(r-n):n}const Vzt=1e4;function kLe(e){e=+e||Vzt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>jt(t,o)||jt(n,o),get:o=>jt(t,o)?t[o]:jt(n,o)?s(o,n[o]):void 0,set:(o,a)=>jt(t,o)?t[o]=a:s(o,a)}}function RLe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function rA(e,t){let n="";for(;--t>=0;)n+=e;return n}function NLe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?rA(i,o)+s:r==="center"?rA(i,~~(o/2))+s+rA(i,Math.ceil(o/2)):s+rA(i,o)}function PR(e){return e&&er(e)-e[0]||0}function rt(e){return Be(e)?"["+e.map(rt)+"]":gt(e)||mt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function Bte(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const Hzt=e=>dr(e)||W0(e)?e:Date.parse(e);function jte(e,t){return t=t||Hzt,e==null||e===""?null:t(e)}function Ute(e){return e==null||e===""?null:e+""}function fd(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function DLe(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Kg(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function qzt(e){return e}function Wzt(e){if(e==null)return qzt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function Gzt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function Yzt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Vge(e,n)})}:Vge(e,t)}function Vge(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=PLe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function PLe(e,t){var n=Wzt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&Gzt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function Kzt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function Xzt(e){return PLe(e,Qzt.apply(this,arguments))}function Qzt(e,t,n){var r,i,s;if(arguments.length>1)r=Jzt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:Kzt(e,r)}}function Jzt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const Ho="year",al="quarter",Sa="month",Fs="week",ul="date",ba="day",Kh="dayofyear",ec="hours",tc="minutes",Qc="seconds",dd="milliseconds",zte=[Ho,al,Sa,Fs,ul,ba,Kh,ec,tc,Qc,dd],sU=zte.reduce((e,t,n)=>(e[t]=1+n,e),{});function Vte(e){const t=pt(e).slice(),n={};return t.length||Me("Missing time unit."),t.forEach(i=>{jt(sU,i)?n[i]=1:Me(`Invalid time unit: ${i}.`)}),(n[Fs]||n[ba]?1:0)+(n[al]||n[Sa]||n[ul]?1:0)+(n[Kh]?1:0)>1&&Me(`Incompatible time units: ${e}`),t.sort((i,s)=>sU[i]-sU[s]),t}const Zzt={[Ho]:"%Y ",[al]:"Q%q ",[Sa]:"%b ",[ul]:"%d ",[Fs]:"W%U ",[ba]:"%a ",[Kh]:"%j ",[ec]:"%H:00",[tc]:"00:%M",[Qc]:":%S",[dd]:".%L",[`${Ho}-${Sa}`]:"%Y-%m ",[`${Ho}-${Sa}-${ul}`]:"%Y-%m-%d ",[`${ec}-${tc}`]:"%H:%M"};function OLe(e,t){const n=_n({},Zzt,t),r=Vte(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const a1=new Date;function Hte(e){return a1.setFullYear(e),a1.setMonth(0),a1.setDate(1),a1.setHours(0,0,0,0),a1}function $Le(e){return LLe(new Date(e))}function MLe(e){return Sq(new Date(e))}function LLe(e){return bm.count(Hte(e.getFullYear())-1,e)}function Sq(e){return kS.count(Hte(e.getFullYear())-1,e)}function Tq(e){return Hte(e).getDay()}function eVt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function FLe(e){return jLe(new Date(e))}function BLe(e){return Cq(new Date(e))}function jLe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return L0.count(t-1,e)}function Cq(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return RS.count(t-1,e)}function Aq(e){return a1.setTime(Date.UTC(e,0,1)),a1.getUTCDay()}function tVt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function ULe(e,t,n,r,i){const s=t||1,o=er(e),a=(y,v,b)=>(b=b||y,nVt(n[b],r[b],y===o&&s,v)),u=new Date,l=fd(e),c=l[Ho]?a(Ho):Na(2012),f=l[Sa]?a(Sa):l[al]?a(al):u0,d=l[Fs]&&l[ba]?a(ba,1,Fs+ba):l[Fs]?a(Fs,1):l[ba]?a(ba,1):l[ul]?a(ul,1):l[Kh]?a(Kh,1):eT,h=l[ec]?a(ec):u0,p=l[tc]?a(tc):u0,m=l[Qc]?a(Qc):u0,g=l[dd]?a(dd):u0;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function nVt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function kx(e,t,n){return t+e*7-(n+6)%7}const rVt={[Ho]:e=>e.getFullYear(),[al]:e=>Math.floor(e.getMonth()/3),[Sa]:e=>e.getMonth(),[ul]:e=>e.getDate(),[ec]:e=>e.getHours(),[tc]:e=>e.getMinutes(),[Qc]:e=>e.getSeconds(),[dd]:e=>e.getMilliseconds(),[Kh]:e=>LLe(e),[Fs]:e=>Sq(e),[Fs+ba]:(e,t)=>kx(Sq(e),e.getDay(),Tq(t)),[ba]:(e,t)=>kx(1,e.getDay(),Tq(t))},iVt={[al]:e=>3*e,[Fs]:(e,t)=>kx(e,0,Tq(t))};function zLe(e,t){return ULe(e,t||1,rVt,iVt,eVt)}const sVt={[Ho]:e=>e.getUTCFullYear(),[al]:e=>Math.floor(e.getUTCMonth()/3),[Sa]:e=>e.getUTCMonth(),[ul]:e=>e.getUTCDate(),[ec]:e=>e.getUTCHours(),[tc]:e=>e.getUTCMinutes(),[Qc]:e=>e.getUTCSeconds(),[dd]:e=>e.getUTCMilliseconds(),[Kh]:e=>jLe(e),[Fs]:e=>Cq(e),[ba]:(e,t)=>kx(1,e.getUTCDay(),Aq(t)),[Fs+ba]:(e,t)=>kx(Cq(e),e.getUTCDay(),Aq(t))},oVt={[al]:e=>3*e,[Fs]:(e,t)=>kx(e,0,Aq(t))};function VLe(e,t){return ULe(e,t||1,sVt,oVt,tVt)}const aVt={[Ho]:Lh,[al]:mI.every(3),[Sa]:mI,[Fs]:kS,[ul]:bm,[ba]:bm,[Kh]:bm,[ec]:FF,[tc]:MF,[Qc]:am,[dd]:ix},uVt={[Ho]:Fh,[al]:gI.every(3),[Sa]:gI,[Fs]:RS,[ul]:L0,[ba]:L0,[Kh]:L0,[ec]:BF,[tc]:LF,[Qc]:am,[dd]:ix};function iT(e){return aVt[e]}function sT(e){return uVt[e]}function HLe(e,t,n){return e?e.offset(t,n):void 0}function qLe(e,t,n){return HLe(iT(e),t,n)}function WLe(e,t,n){return HLe(sT(e),t,n)}function GLe(e,t,n,r){return e?e.range(t,n,r):void 0}function YLe(e,t,n,r){return GLe(iT(e),t,n,r)}function KLe(e,t,n,r){return GLe(sT(e),t,n,r)}const iA=1e3,sA=iA*60,oA=sA*60,m5=oA*24,lVt=m5*7,Hge=m5*30,Iq=m5*365,XLe=[Ho,Sa,ul,ec,tc,Qc,dd],aA=XLe.slice(0,-1),uA=aA.slice(0,-1),lA=uA.slice(0,-1),cVt=lA.slice(0,-1),fVt=[Ho,Fs],qge=[Ho,Sa],QLe=[Ho],lC=[[aA,1,iA],[aA,5,5*iA],[aA,15,15*iA],[aA,30,30*iA],[uA,1,sA],[uA,5,5*sA],[uA,15,15*sA],[uA,30,30*sA],[lA,1,oA],[lA,3,3*oA],[lA,6,6*oA],[lA,12,12*oA],[cVt,1,m5],[fVt,1,lVt],[qge,1,Hge],[qge,3,3*Hge],[QLe,1,Iq]];function JLe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(PR(t))/n;let i=SS(a=>a[2]).right(lC,r),s,o;return i===lC.length?(s=QLe,o=oy(t[0]/Iq,t[1]/Iq,n)):i?(i=lC[r/lC[i-1][2]<lC[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=XLe,o=Math.max(oy(t[0],t[1],n),1)),{units:s,step:o}}function cA(e){const t={};return n=>t[n]||(t[n]=e(n))}function dVt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=hVt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function hVt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function ZLe(e){const t=cA(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=lb(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return dVt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=lb(o??",f");const a=oy(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=x2e(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=S2e(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=E2e(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let kq;e6e();function e6e(){return kq=ZLe({format:CS,formatPrefix:yQ})}function t6e(e){return ZLe(w2e(e))}function j3(e){return arguments.length?kq=t6e(e):kq}function Wge(e,t,n){n=n||{},gt(n)||Me(`Invalid time multi-format specifier: ${n}`);const r=t(Qc),i=t(tc),s=t(ec),o=t(ul),a=t(Fs),u=t(Sa),l=t(al),c=t(Ho),f=e(n[dd]||".%L"),d=e(n[Qc]||":%S"),h=e(n[tc]||"%I:%M"),p=e(n[ec]||"%I %p"),m=e(n[ul]||n[ba]||"%a %d"),g=e(n[Fs]||"%b %d"),y=e(n[Sa]||"%B"),v=e(n[al]||"%B"),b=e(n[Ho]||"%Y");return w=>(r(w)<w?f:i(w)<w?d:s(w)<w?h:o(w)<w?p:u(w)<w?a(w)<w?m:g:c(w)<w?l(w)<w?y:v:b)(w)}function n6e(e){const t=cA(e.format),n=cA(e.utcFormat);return{timeFormat:r=>mt(r)?t(r):Wge(t,iT,r),utcFormat:r=>mt(r)?n(r):Wge(n,sT,r),timeParse:cA(e.parse),utcParse:cA(e.utcParse)}}let Rq;r6e();function r6e(){return Rq=n6e({format:RQ,parse:LIe,utcFormat:jF,utcParse:FIe})}function i6e(e){return n6e(DIe(e))}function KI(e){return arguments.length?Rq=i6e(e):Rq}const Nq=(e,t)=>_n({},e,t);function s6e(e,t){const n=e?t6e(e):j3(),r=t?i6e(t):KI();return Nq(n,r)}function qte(e,t){const n=arguments.length;return n&&n!==2&&Me("defaultLocale expects either zero or two arguments."),n?Nq(j3(e),KI(t)):Nq(j3(),KI())}function pVt(){return e6e(),r6e(),qte()}const mVt=/^(data:|([A-Za-z]+:)?\/\/)/,gVt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,yVt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Gge="file://";function vVt(e,t){return n=>({options:n||{},sanitize:_Vt,load:bVt,fileAccess:!!t,file:wVt(t),http:xVt(e)})}async function bVt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function _Vt(e,t){t=_n({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=gVt.test(e.replace(yVt,""));(e==null||typeof e!="string"||!a)&&Me("Sanitize failure, invalid URI: "+rt(e));const u=mVt.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(Gge))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(Gge.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function wVt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):EVt}async function EVt(){Me("No file system access.")}function xVt(e){return e?async function(t,n){const r=_n({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?wn(s[i])?s[i]():s.text():Me(s.status+""+s.statusText)}:SVt}async function SVt(){Me("No HTTP fetch method available.")}const TVt=e=>e!=null&&e===e,CVt=e=>e==="true"||e==="false"||e===!0||e===!1,AVt=e=>!Number.isNaN(Date.parse(e)),o6e=e=>!Number.isNaN(+e)&&!(e instanceof Date),IVt=e=>o6e(e)&&Number.isInteger(+e),Dq={boolean:Bte,integer:_a,number:_a,date:jte,string:Ute,unknown:Ra},YD=[CVt,IVt,o6e,AVt],kVt=["boolean","integer","number","date"];function a6e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=YD.length,i=YD.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&TVt(u)&&!YD[a](u)&&(i[a]=0,++o,o===YD.length))return"string";return kVt[i.reduce((s,o)=>s===0?o:s,0)-1]}function u6e(e,t){return t.reduce((n,r)=>(n[r]=a6e(e,r),n),{})}function Yge(e){const t=function(n,r){const i={delimiter:e};return Wte(n,r?_n(r,i):i)};return t.responseType="text",t}function Wte(e,t){return t.header&&(e=t.header.map(rt).join(t.delimiter)+`
`+e),v2e(t.delimiter).parse(e+"")}Wte.responseType="text";function RVt(e){return typeof Buffer=="function"&&wn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function Gte(e,t){const n=t&&t.property?Kc(t.property):Ra;return gt(e)&&!RVt(e)?NVt(n(e),t):n(JSON.parse(e))}Gte.responseType="json";function NVt(e,t){return!Be(e)&&CLe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const DVt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function l6e(e,t){let n,r,i,s;return e=Gte(e,t),t&&t.feature?(n=Yzt,i=t.feature):t&&t.mesh?(n=Xzt,i=t.mesh,s=DVt[t.filter]):Me("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Me("Invalid TopoJSON object: "+i),r&&r.features||[r]}l6e.responseType="json";const vO={dsv:Wte,csv:Yge(","),tsv:Yge("	"),json:Gte,topojson:l6e};function Yte(e,t){return arguments.length>1?(vO[e]=t,this):jt(vO,e)?vO[e]:null}function c6e(e){const t=Yte(e);return t&&t.responseType||"text"}function f6e(e,t,n,r){t=t||{};const i=Yte(t.type||"json");return i||Me("Unknown data format type: "+t.type),e=i(e,t),t.parse&&PVt(e,t.parse,n,r),jt(e,"columns")&&delete e.columns,e}function PVt(e,t,n,r){if(!e.length)return;const i=KI();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=u6e(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!Dq[p])throw Error("Illegal format pattern: "+h+":"+p);return Dq[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const g5=vVt(typeof fetch<"u"&&fetch,null);function y5(e){const t=e||Ra,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function bO(e,t){try{await t(e)}catch(n){e.error(n)}}const d6e=Symbol("vega_id");let OVt=1;function v5(e){return!!(e&&Ft(e))}function Ft(e){return e[d6e]}function h6e(e,t){return e[d6e]=t,e}function Sr(e){const t=e===Object(e)?e:{data:e};return Ft(t)?t:h6e(t,OVt++)}function Kte(e){return b5(e,Sr({}))}function b5(e,t){for(const n in e)t[n]=e[n];return t}function p6e(e,t){return h6e(t,Ft(e))}function d_(e,t){return e?t?(n,r)=>e(n,r)||Ft(t(n))-Ft(t(r)):(n,r)=>e(n,r)||Ft(n)-Ft(r):null}function m6e(e){return e&&e.constructor===h_}function h_(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:h_,insert(a){const u=pt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=wn(a)?r:t,l=pt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:Na(l)};return wn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return wn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Ft(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Ft(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[Ft(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Ft(m),l[g]?l[g]=1:a.add.push(Sr(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Ft(m)]<0&&a.rem.push(m);function y(v,b,w){w?v[b]=w(v):a.encode=b,o||(c[Ft(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Ft(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[Ft(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[Ft(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const _O="_:mod:_";function _5(){Object.defineProperty(this,_O,{writable:!0,value:{}})}_5.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[_O];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=Be(n)?1+n.length:-1),i},modified(e,t){const n=this[_O];if(arguments.length){if(Be(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[_O]={},this}};let $Vt=0;const MVt="pulse",LVt=new _5,FVt=1,BVt=2;function Jr(e,t,n,r){this.id=++$Vt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Kge(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Jr.prototype={targets(){return this._targets||(this._targets=y5(DR))},set(e){return this.value!==e?(this.value=e,1):0},skip:Kge(FVt),modified:Kge(BVt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new _5,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Jr?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===MVt)pt(a).forEach(f=>{f instanceof Jr?f!==this&&(f.targets().add(this),s.push(f)):Me("Pulse parameters must be operator instances.")}),this.source=a;else if(Be(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||LVt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function jVt(e,t,n,r){let i=1,s;return e instanceof Jr?s=e:e&&e.prototype instanceof Jr?s=new e:wn(e)?s=new Jr(null,e):(i=0,s=new Jr(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function UVt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let zVt=0;function w5(e,t,n){this.id=++zVt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function zg(e,t,n){return new w5(e,t,n)}w5.prototype={_filter:Xc,_apply:Ra,targets(){return this._targets||(this._targets=y5(DR))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=zg(e);return this.targets().add(t),t},apply(e){const t=zg(null,e);return this.targets().add(t),t},merge(){const e=zg();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=zg();return this.targets().add(zg(null,null,Lte(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(zg(null,null,()=>n=!0)),t.targets().add(zg(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Xc,this._targets=null}};function VVt(e,t,n,r){const i=this,s=zg(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=pt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function HVt(e,t){const n=this.locale();return f6e(e,t,n.timeParse,n.utcParse)}function qVt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function WVt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:c6e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function GVt(e,t,n){const r=this,i=r._pending||YVt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(Xc).insert(s.data||[])),i.done(),s}function YVt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const KVt={skip:!0};function XVt(e,t,n,r,i){return(e instanceof Jr?JVt:QVt)(this,e,t,n,r,i),this}function QVt(e,t,n,r,i,s){const o=_n({},s,KVt);let a,u;wn(n)||(n=Na(n)),r===void 0?a=l=>e.touch(n(l)):wn(r)?(u=new Jr(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;m6e(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function JVt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Jr(null,ZVt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function ZVt(e,t){return t=wn(t)?t:Na(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function eHt(e){e.rank=++this._rank}function tHt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Me("Cycle detected in dataflow graph.")}const U3={},Gd=1,Xg=2,Up=4,nHt=Gd|Xg,Xge=Gd|Up,Y_=Gd|Xg|Up,Qge=8,cC=16,Jge=32,Zge=64;function G0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function oU(e,t){const n=[];return Kg(e,t,r=>n.push(r)),n}function e0e(e,t){const n={};return e.visit(t,r=>{n[Ft(r)]=1}),r=>n[Ft(r)]?null:r}function KD(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}G0.prototype={StopPropagation:U3,ADD:Gd,REM:Xg,MOD:Up,ADD_REM:nHt,ADD_MOD:Xge,ALL:Y_,REFLOW:Qge,SOURCE:cC,NO_SOURCE:Jge,NO_FIELDS:Zge,fork(e){return new G0(this.dataflow).init(this,e)},clone(){const e=this.fork(Y_);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(Y_|cC)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new G0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Zge)&&(n.fields=e.fields),t&Gd?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Xg?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Up?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Jge?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||Y_;return t&Gd&&this.add.length||t&Xg&&this.rem.length||t&Up&&this.mod.length},reflow(e){if(e)return this.fork(Y_).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Up,e0e(this,Gd))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Be(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Be(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Gd&&(n.addF=KD(n.addF,t)),e&Xg&&(n.remF=KD(n.remF,t)),e&Up&&(n.modF=KD(n.modF,t)),e&cC&&(n.srcF=KD(n.srcF,t)),n},materialize(e){e=e||Y_;const t=this;return e&Gd&&t.addF&&(t.add=oU(t.add,t.addF),t.addF=null),e&Xg&&t.remF&&(t.rem=oU(t.rem,t.remF),t.remF=null),e&Up&&t.modF&&(t.mod=oU(t.mod,t.modF),t.modF=null),e&cC&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&cC)return Kg(n.source,n.srcF,r),n;e&Gd&&Kg(n.add,n.addF,r),e&Xg&&Kg(n.rem,n.remF,r),e&Up&&Kg(n.mod,n.modF,r);const i=n.source;if(e&Qge&&i){const s=n.add.length+n.mod.length;s===i.length||(s?Kg(i,e0e(n,Xge),r):Kg(i,n.srcF,r))}return n}};function Xte(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}lt(Xte,G0,{fork(e){const t=new G0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Be(e)?e.some(r=>n[r]):n[e]:0},filter(){Me("MultiPulse does not support filtering.")},materialize(){Me("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function rHt(e,t,n){const r=this,i=[];if(r._pulse)return g6e(r);if(r._pending&&await r._pending,t&&await bO(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new G0(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=y5(DR);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=U3),u!==U3&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await bO(r,c[f].callback)}return n&&await bO(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function iHt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function sHt(e,t,n){return this._pulse?g6e(this):(this.evaluate(e,t,n),this)}function oHt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function g6e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function aHt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function uHt(e,t){const n=e.source,r=this._clock;return n&&Be(n)?new Xte(this,r,n.map(i=>i.pulse),t):this._input[e.id]||lHt(this._pulse,n&&n.pulse)}function lHt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==U3&&(e.source=t.source),e)}const Qte={skip:!1,force:!1};function cHt(e,t){const n=t||Qte;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function fHt(e,t,n){const r=n||Qte;return(e.set(t)||r.force)&&this.touch(e,r),this}function dHt(e,t,n){this.touch(e,n||Qte);const r=new G0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function hHt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),y6e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,pHt(t,0,e)):r=n,r}}}function y6e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function pHt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,y6e(e,r,t,n)}function xE(){this.logger(Dte()),this.logLevel(Rte),this._clock=0,this._rank=0,this._locale=qte();try{this._loader=g5()}catch{}this._touched=y5(DR),this._input={},this._pulse=null,this._heap=hHt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function fC(e){return function(){return this._log[e].apply(this,arguments)}}xE.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:fC("error"),warn:fC("warn"),info:fC("info"),debug:fC("debug"),logLevel:fC("level"),cleanThreshold:1e4,add:jVt,connect:UVt,rank:eHt,rerank:tHt,pulse:dHt,touch:cHt,update:fHt,changeset:h_,ingest:qVt,parse:HVt,preload:GVt,request:WVt,events:VVt,on:XVt,evaluate:rHt,run:sHt,runAsync:iHt,runAfter:oHt,_enqueue:aHt,_getPulse:uHt};function De(e,t){Jr.call(this,e,null,t)}lt(De,Jr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Rx={};function v6e(e){const t=b6e(e);return t&&t.Definition||null}function b6e(e){return e=e&&e.toLowerCase(),jt(Rx,e)?Rx[e]:null}function*_6e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function Jte(e,t,n){const r=Float64Array.from(_6e(e,n));return r.sort(ym),t.map(i=>wAe(r,i))}function Zte(e,t){return Jte(e,[.25,.5,.75],t)}function ene(e,t){const n=e.length,r=pgt(e,t),i=Zte(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function w6e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var Jc=Math.random;function mHt(e){Jc=e}function E6e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(_6e(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(Jc()*s)];c[l]=a/s}return c.sort(ym),[tV(c,n/2),tV(c,1-n/2)]}function x6e(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?gHt(s,t+t/4):s}function gHt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function yHt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function vHt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*Jc())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const S6e=Math.sqrt(2*Math.PI),bHt=Math.SQRT2;let dC=NaN;function E5(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(dC===dC)n=dC,dC=NaN;else{do n=Jc()*2-1,r=Jc()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,dC=r*s}return e+n*t}function tne(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*S6e)}function x5(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function S5(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*bHt*_Ht(2*e-1)}function _Ht(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function nne(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>E5(n,r),pdf:s=>tne(s,n,r),cdf:s=>x5(s,n,r),icdf:s=>S5(s,n,r)};return i.mean(e).stdev(t)}function rne(e,t){const n=nne();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=ene(e)),i):t},sample(){return e[~~(Jc()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function ine(e,t){return e=e||0,t=t??1,Math.exp(e+E5()*t)}function sne(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*S6e*e)}function one(e,t,n){return x5(Math.log(e),t,n)}function ane(e,t,n){return Math.exp(S5(e,t,n))}function T6e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>ine(n,r),pdf:s=>sne(s,n,r),cdf:s=>one(s,n,r),icdf:s=>ane(s,n,r)};return i.mean(e).stdev(t)}function C6e(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=Jc();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function une(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Jc()}function lne(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function cne(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function fne(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function A6e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>une(n,r),pdf:s=>lne(s,n,r),cdf:s=>cne(s,n,r),icdf:s=>fne(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function dne(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function OR(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function T5(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function $R(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function oT(e,t,n,r,i){let s=0,o=0;return $R(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function hne(e,t,n){let r=0,i=0,s=0,o=0,a=0;$R(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=OR(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:oT(e,t,n,i,l)}}function I6e(e,t,n){let r=0,i=0,s=0,o=0,a=0;$R(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=OR(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:oT(e,t,n,i,l)}}function k6e(e,t,n){const[r,i,s,o]=T5(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;$R(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=OR(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:oT(e,t,n,o,y)}}function R6e(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;$R(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=OR(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:oT(e,t,n,a,c)}}function pne(e,t,n){const[r,i,s,o]=T5(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,b=(d*u-f*l)/v,w=(f*y-d*l)/v,E=-b*u,x=T=>(T=T-s,b*T*T+w*T+E+o);return{coef:[E-w*s+b*s*s+o,w-2*b*s,b],predict:x,rSquared:oT(e,t,n,o,x)}}function N6e(e,t,n,r){if(r===0)return dne(e,t,n);if(r===1)return hne(e,t,n);if(r===2)return pne(e,t,n);const[i,s,o,a]=T5(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=EHt(c),v=b=>{b-=o;let w=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)w+=y[d]*Math.pow(b,d);return w};return{coef:wHt(f,y,-o,a),predict:v,rSquared:oT(e,t,n,a,v)}}function wHt(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function EHt(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const t0e=2,n0e=1e-12;function D6e(e,t,n,r){const[i,s,o,a]=T5(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=t0e;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],b=p[1],w=y-i[v]>i[b]-y?v:b;let E=0,x=0,T=0,C=0,A=0;const k=1/Math.abs(i[w]-y||1);for(let D=v;D<=b;++D){const $=i[D],F=s[D],L=xHt(Math.abs(y-$)*k)*d[D],j=$*L;E+=L,x+=j,T+=F*L,C+=F*j,A+=$*j}const[R,O]=OR(x/E,T/E,C/E,A/E);c[g]=R+O*y,f[g]=Math.abs(s[g]-c[g]),SHt(i,g+1,p)}if(h===t0e)break;const m=EAe(f);if(Math.abs(m)<n0e)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?n0e:(v=1-y*y)*v}return THt(i,c,o,a)}function xHt(e){return(e=1-e*e*e)*e*e}function SHt(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function THt(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const CHt=.5*Math.PI/180;function C5(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=AHt(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&IHt(f,m,d,h,p)>CHt?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function AHt(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function IHt(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function kHt(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function Pq(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:kHt(e)}function P6e(e,t,n){return n||e+(t?"_"+t:"")}const aU=()=>{},RHt={init:aU,add:aU,rem:aU,idx:0},XI={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},MR=Object.keys(XI).filter(e=>e!=="__count__");function NHt(e,t){return(n,r)=>_n({name:e,aggregate_param:r,out:n||e},RHt,t)}[...MR,"__count__"].forEach(e=>{XI[e]=NHt(e,XI[e])});function O6e(e,t,n){return XI[e](n,t)}function $6e(e,t){return e.idx-t.idx}function DHt(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=XI[i]())})};return e.forEach(n),Object.values(t).sort($6e)}function PHt(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function OHt(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function $Ht(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function MHt(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function M6e(e,t){const n=t||Ra,r=DHt(e),i=e.slice().sort($6e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=PHt,s.prototype.add=OHt,s.prototype.rem=$Ht,s.prototype.set=MHt,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function mne(e){this._key=e?Kc(e):Ft,this.reset()}const Xo=mne.prototype;Xo.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Xo.add=function(e){this._add.push(e)};Xo.rem=function(e){this._rem.push(e)};Xo.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Xo.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",jt(n,s)||(n[s]=1,++i);return i};Xo.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=SLe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Xo.argmin=function(e){return this.extent(e)[0]||{}};Xo.argmax=function(e){return this.extent(e)[1]||{}};Xo.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Xo.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Xo.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=Zte(this.values(),e),this._get=e),this._q};Xo.q1=function(e){return this.quartile(e)[0]};Xo.q2=function(e){return this.quartile(e)[1]};Xo.q3=function(e){return this.quartile(e)[2]};Xo.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=E6e(this.values(),1e3,.05,e),this._get=e),this._ci};Xo.ci0=function(e){return this.ci(e)[0]};Xo.ci1=function(e){return this.ci(e)[1]};function Cy(e){De.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Cy.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:MR},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};lt(Cy,De,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=pt(xa(v)),w=b.length;let E=0,x;for(;E<w;++E)r[x=b[E]]||(r[x]=1,t.push(x))}this._dims=pt(e.groupby),this._dnames=this._dims.map(v=>{const b=es(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:Pq(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Me("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Me("Null aggregate field specified."),m=es(f),g=P6e(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(O6e(d,h,g))}return this._measures=this._measures.map(v=>M6e(v,v.field)),Object.create(null)},cellkey:Pq(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new mne),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?p6e(t.tuple,s):Sr(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const LHt=1e-14;function gne(e){De.call(this,null,e)}gne.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};lt(gne,De,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(xa(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=w6e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=_a(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(LHt+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=pl(u,xa(t),e.name||"bin_"+es(t))}});function L6e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?RLe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function yne(e){De.call(this,[],e)}yne.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};lt(yne,De,{transform(e,t){const n=t.fork(t.ALL),r=L6e(Ft,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(d_(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function F6e(e){Jr.call(this,null,FHt,e)}lt(F6e,Jr);function FHt(e){return this.value&&!e.modified()?this.value:Mte(e.fields,e.orders)}function vne(e){De.call(this,null,e)}vne.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function BHt(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}lt(vne,De,{transform(e,t){const n=f=>d=>{for(var h=BHt(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=Sr({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function bne(e){De.call(this,null,e)}bne.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};lt(bne,De,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=jHt(a,i,s,e.filter||Xc)):n.mod=a,n.source=this.value,n.modifies(r)}});function jHt(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(Sr(s)),s={},s[t]=l);return i}const r0e={kde:rne,mixture:C6e,normal:nne,lognormal:T6e,uniform:A6e},UHt="distributions",i0e="function",zHt="field";function B6e(e,t){const n=e[i0e];jt(r0e,n)||Me("Unknown distribution function: "+n);const r=r0e[n]();for(const i in e)i===zHt?r.data((e.from||t()).map(e[i])):i===UHt?r[i](e[i].map(s=>B6e(s,t))):typeof r[i]===i0e&&r[i](e[i]);return r}function _ne(e){De.call(this,null,e)}const j6e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],VHt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:j6e},{name:"weights",type:"number",array:!0}]};_ne.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:j6e.concat(VHt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(_ne,De,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=B6e(e.distribution,HHt(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Me("Invalid density method: "+o),!e.extent&&!r.data&&Me("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||Yh(r.data()),l=C5(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Sr(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function HHt(e){return()=>e.materialize(e.SOURCE).source}function U6e(e,t){return e?e.map((n,r)=>t[r]||es(n)):null}function wne(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const z6e="bin";function Ene(e){De.call(this,null,e)}Ene.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:z6e}]};const qHt=(e,t)=>PR(Yh(e,t))/30;lt(Ene,De,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=wne(t.source,e.groupby,Ra),i=e.smooth||!1,s=e.field,o=e.step||qHt(n,s),a=d_((p,m)=>s(p)-s(m)),u=e.as||z6e,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of x6e(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function V6e(e){Jr.call(this,null,WHt,e),this.modified(!0)}lt(V6e,Jr);function WHt(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:pl(n=>t(n,e),xa(t),es(t))}function xne(e){De.call(this,[void 0,void 0],e)}xne.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};lt(xne,De,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=_a(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=es(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function Sne(e,t){Jr.call(this,e),this.parent=t,this.count=0}lt(Sne,Jr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function A5(e){De.call(this,{},e),this._keys=rT();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}lt(A5,De,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=jt(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new Sne(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Ft(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Ft(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Ft(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Ft(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Ft(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function H6e(e){Jr.call(this,null,GHt,e)}lt(H6e,Jr);function GHt(e){return this.value&&!e.modified()?this.value:Be(e.name)?pt(e.name).map(t=>Kc(t)):Kc(e.name,e.as)}function Tne(e){De.call(this,rT(),e)}Tne.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};lt(Tne,De,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Ft(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(Ft(f),1)});function c(f){const d=Ft(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function Cne(e){De.call(this,[],e)}Cne.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};lt(Cne,De,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=U6e(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=Kte(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function Ane(e){De.call(this,[],e)}Ane.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};lt(Ane,De,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(es),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=Kte(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function Ine(e){De.call(this,null,e)}Ine.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};lt(Ine,De,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function q6e(e){De.call(this,[],e)}lt(q6e,De,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=Sr(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const XD={value:"value",median:EAe,mean:_gt,min:eV,max:M0},YHt=[];function kne(e){De.call(this,[],e)}kne.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function KHt(e){var t=e.method||XD.value,n;if(XD[t]==null)Me("Unrecognized imputation method: "+t);else return t===XD.value?(n=e.value!==void 0?e.value:0,()=>n):XD[t]}function XHt(e){const t=e.field;return n=>n?t(n):NaN}lt(kne,De,{transform(e,t){var n=t.fork(t.ALL),r=KHt(e),i=XHt(e),s=es(e.field),o=es(e.key),a=(e.groupby||[]).map(es),u=QHt(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,b,w,E;for(g=0,b=u.length;g<b;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],E={_impute:!0},y=0,w=p.length;y<w;++y)E[a[y]]=p[y];E[o]=m,E[s]=Number.isNaN(h)?h=r(d,i):h,l.push(Sr(E))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function QHt(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):YHt)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function Rne(e){Cy.call(this,e)}Rne.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:MR},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};lt(Rne,Cy,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{_n(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function Nne(e){De.call(this,null,e)}Nne.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(Nne,De,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=wne(r,e.groupby,e.field),s=(e.groupby||[]).map(es),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Me("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Yh(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=rne(h,o)[a],m=e.counts?h.length:1,g=c||Yh(h);C5(p,g,f,d).forEach(y=>{const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(Sr(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function W6e(e){Jr.call(this,null,JHt,e)}lt(W6e,Jr);function JHt(e){return this.value&&!e.modified()?this.value:Fte(e.fields,e.flat)}function G6e(e){De.call(this,[],e),this._pending=null}lt(G6e,De,{transform(e,t){const n=t.dataflow;return this._pending?uU(this,t,this._pending):ZHt(e)?t.StopPropagation:e.values?uU(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=pt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>uU(this,t,pt(r.data)))}});function ZHt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function uU(e,t,n){n.forEach(Sr);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function Dne(e){De.call(this,{},e)}Dne.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};lt(Dne,De,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Me('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Me('The "as" parameter has too few output field names.'),c=c||i.map(es),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||Me("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function Y6e(e){Jr.call(this,null,eqt,e)}lt(Y6e,Jr);function eqt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function K6e(e){Jr.call(this,null,tqt,e)}lt(K6e,Jr);function tqt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function X6e(e){De.call(this,null,e)}lt(X6e,De,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Pne(e){Cy.call(this,e)}Pne.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:MR,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};lt(Pne,Cy,{_transform:Cy.prototype.transform,transform(e,t){return this._transform(nqt(e,t),t)}});function nqt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=xa(n).concat(xa(r)),o=iqt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>rqt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function rqt(e,t,n,r){return pl(i=>t(i)===e?n(i):NaN,r,e+"")}function iqt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(p5),t?i.slice(0,t):i}function Q6e(e){A5.call(this,e)}lt(Q6e,A5,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Ft(s),n,t,s);return(e.modified("field")||r&&t.modified(xa(r)))&&Me("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(Sr(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function One(e){De.call(this,null,e)}One.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};lt(One,De,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=U6e(e.fields,e.as||[]),s=r?(a,u)=>sqt(a,u,r,i):b5;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Ft(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,Sr({}));o[Ft(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Ft(a)]))}),n}});function sqt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function J6e(e){De.call(this,null,e)}lt(J6e,De,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function $ne(e){De.call(this,null,e)}$ne.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const oqt=1e-14;lt($ne,De,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=wne(i,e.groupby,e.field),o=(e.groupby||[]).map(es),a=[],u=e.step||.01,l=e.probs||Uu(u/2,1-oqt,u),c=l.length;return s.forEach(f=>{const d=Jte(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(Sr(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function Z6e(e){De.call(this,null,e)}lt(Z6e,De,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Ft(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=Kte(i);r[Ft(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Ft(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function Mne(e){De.call(this,[],e),this.count=0}Mne.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};lt(Mne,De,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Ft(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*Jc()),d<o.length&&d>=u&&(f=o[d],s[Ft(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Ft(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Ft(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Ft(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Ft(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Ft(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Ft(c)])),this.count=a,this.value=n.source=o,n}});function Lne(e){De.call(this,null,e)}Lne.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};lt(Lne,De,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Uu(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,Sr(s)}),n.add=t.add.concat(this.value),n}});function eFe(e){De.call(this,null,e),this.modified(!0)}lt(eFe,De,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Fne(e){De.call(this,null,e)}const tFe=["unit0","unit1"];Fne.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:zte,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:tFe}]};lt(Fne,De,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?sT:iT)(s.unit).offset,a=e.as||tFe,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(xa(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:JLe({extent:e.extent||Yh(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=Vte(r),o=this.value||{},a=(n?VLe:zLe)(s,i);return a.unit=er(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function nFe(e){De.call(this,rT(),e)}lt(nFe,De,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function rFe(e){De.call(this,null,e)}lt(rFe,De,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(d_(e.sort)):t.source).map(e.field))}});function aqt(e,t,n,r){const i=QI[e](t,n);return{init:i.init||u0,update:function(s,o){o[r]=i.next(s)}}}const QI={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=QI.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Me("ntile num must be greater than zero.");const n=QI.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Me("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=uqt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function uqt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const lqt=Object.keys(QI);function iFe(e){const t=pt(e.ops),n=pt(e.fields),r=pt(e.params),i=pt(e.aggregate_params),s=pt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){pt(xa(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,b=es(g),w=P6e(p,b,s[m]);if(h(g),o.push(w),jt(QI,p))a.push(aqt(p,g,y,w));else{if(g==null&&p!=="count"&&Me("Null aggregate field specified."),p==="count"){c.push(w);return}d=!1;let E=l[b];E||(E=l[b]=[],E.field=g,f.push(E)),E.push(O6e(p,v,w))}}),(c.length||f.length)&&(this.cell=cqt(f,c,d)),this.inputs=Object.keys(u)}const sFe=iFe.prototype;sFe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};sFe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function cqt(e,t,n){e=e.map(u=>M6e(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new mne;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function Bne(e){De.call(this,{},e),this._mlen=0,this._mods=[]}Bne.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:lqt.concat(MR)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};lt(Bne,De,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=d_(e.sort),i=Pq(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new iFe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)fqt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=L6e(Ft),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function fqt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?SS(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Na(-1)};t.init();for(let f=0;f<u;++f)dqt(c,o,f,u),s&&hqt(c,l),t.update(c,a[f])}function dqt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function hqt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const pqt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Cy,bin:gne,collect:yne,compare:F6e,countpattern:vne,cross:bne,density:_ne,dotbin:Ene,expression:V6e,extent:xne,facet:A5,field:H6e,filter:Tne,flatten:Cne,fold:Ane,formula:Ine,generate:q6e,impute:kne,joinaggregate:Rne,kde:Nne,key:W6e,load:G6e,lookup:Dne,multiextent:Y6e,multivalues:K6e,params:X6e,pivot:Pne,prefacet:Q6e,project:One,proxy:J6e,quantile:$ne,relay:Z6e,sample:Mne,sequence:Lne,sieve:eFe,subflow:Sne,timeunit:Fne,tupleindex:nFe,values:rFe,window:Bne},Symbol.toStringTag,{value:"Module"}));function Y0(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const mqt=()=>typeof Image<"u"?Image:null;function jne(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const gqt="identity",Nx="linear",eg="log",LR="pow",FR="sqrt",I5="symlog",Tb="time",Cb="utc",Nh="sequential",aT="diverging",Dx="quantile",k5="quantize",R5="threshold",Une="ordinal",Oq="point",oFe="band",zne="bin-ordinal",Ys="continuous",BR="discrete",jR="discretizing",df="interpolating",Vne="temporal";function yqt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function vqt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function Hne(){const e=IS().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=jne(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Uu(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,b;if(!(m!==m||g!==g)&&(g<m&&(b=m,m=g,g=b),!(g<h[0]||m>r[1-d])))return y=Math.max(0,sy(h,m)-1),v=m===g?y:sy(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return Hne().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function aFe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return aFe(t())},e}function bqt(){return aFe(Hne().paddingInner(1))}var _qt=Array.prototype.map;function wqt(e){return _qt.call(e,_a)}const Eqt=Array.prototype.slice;function uFe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(sy(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=wqt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=Eqt.call(r),n):t.slice()},n.tickFormat=function(r,i){return EIe(e[0],er(e),r??10,i)},n.copy=function(){return uFe().domain(n.domain()).range(n.range())},n}const z3=new Map,lFe=Symbol("vega_scale");function cFe(e){return e[lFe]=!0,e}function xqt(e){return e&&e[lFe]===!0}function Sqt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?yqt(s):s.invertExtent?vqt(s):void 0),s.type=e,cFe(s)};return r.metadata=fd(pt(n)),r}function br(e,t,n){return arguments.length>1?(z3.set(e,Sqt(e,t,n)),this):fFe(e)?z3.get(e):void 0}br(gqt,xIe);br(Nx,Um,Ys);br(eg,TIe,[Ys,eg]);br(LR,IQ,Ys);br(FR,Jwt,Ys);br(I5,CIe,Ys);br(Tb,BIe,[Ys,Vne]);br(Cb,hxt,[Ys,Vne]);br(Nh,DQ,[Ys,df]);br(`${Nh}-${Nx}`,DQ,[Ys,df]);br(`${Nh}-${eg}`,jIe,[Ys,df,eg]);br(`${Nh}-${LR}`,PQ,[Ys,df]);br(`${Nh}-${FR}`,pxt,[Ys,df]);br(`${Nh}-${I5}`,UIe,[Ys,df]);br(`${aT}-${Nx}`,zIe,[Ys,df]);br(`${aT}-${eg}`,VIe,[Ys,df,eg]);br(`${aT}-${LR}`,OQ,[Ys,df]);br(`${aT}-${FR}`,mxt,[Ys,df]);br(`${aT}-${I5}`,HIe,[Ys,df]);br(Dx,AIe,[jR,Dx]);br(k5,IIe,jR);br(R5,kIe,jR);br(zne,uFe,[BR,jR]);br(Une,IS,BR);br(oFe,Hne,BR);br(Oq,bqt,BR);function fFe(e){return z3.has(e)}function p_(e,t){const n=z3.get(e);return n&&n.metadata[t]}function qne(e){return p_(e,Ys)}function Px(e){return p_(e,BR)}function $q(e){return p_(e,jR)}function dFe(e){return p_(e,eg)}function Tqt(e){return p_(e,Vne)}function hFe(e){return p_(e,df)}function pFe(e){return p_(e,Dx)}const Cqt=["clamp","base","constant","exponent"];function mFe(e,t){const n=t[0],r=er(t)-n;return function(i){return e(n+i*r)}}function N5(e,t,n){return aQ(Wne(t||"rgb",n),e)}function gFe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function yFe(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?Na(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=br(s)().domain([t,n]).range([0,1]),Cqt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function Wne(e,t){const n=qyt[Aqt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function Aqt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Iqt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},kqt={accent:yxt,category10:gxt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:vxt,observable10:bxt,paired:_xt,pastel1:wxt,pastel2:Ext,set1:xxt,set2:Sxt,set3:Txt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function vFe(e){if(Be(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function bFe(e,t){for(const n in e)Gne(n,t(e[n]))}const s0e={};bFe(kqt,vFe);bFe(Iqt,e=>N5(vFe(e)));function Gne(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(s0e[e]=t,this):s0e[e]}const wO="symbol",Rqt="discrete",Nqt="gradient",Dqt=e=>Be(e)?e.map(t=>String(t)):String(e),Pqt=(e,t)=>e[1]-t[1],Oqt=(e,t)=>t[1]-e[1];function Yne(e,t,n){let r;return dr(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(PR(e.domain())/n||1)+1))),gt(t)&&(r=t.step,t=t.interval),mt(t)&&(t=e.type===Tb?iT(t):e.type==Cb?sT(t):Me("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function _Fe(e,t,n){let r=e.range(),i=r[0],s=er(r),o=Pqt;if(i>s&&(r=s,s=i,i=r,o=Oqt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],er(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function Kne(e,t){return e.bins?_Fe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function wFe(e,t,n,r,i,s){const o=t.type;let a=Dqt;if(o===Tb||i===Tb)a=e.timeFormat(r);else if(o===Cb||i===Cb)a=e.utcFormat(r);else if(dFe(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=EFe(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function EFe(e,t,n){const r=Kne(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const Mq={[Dx]:"quantiles",[k5]:"thresholds",[R5]:"domain"},xFe={[Dx]:"quantiles",[k5]:"domain"};function SFe(e,t){return e.bins?Lqt(e.bins):e.type===eg?EFe(e,t,!0):Mq[e.type]?Mqt(e[Mq[e.type]]()):Kne(e,t)}function $qt(e,t,n){const r=t[xFe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function Mqt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Lqt(e){const t=e.slice(0,-1);return t.max=er(e),t}const Fqt=e=>Mq[e.type]||e.bins;function TFe(e,t,n,r,i,s,o){const a=xFe[t.type]&&s!==Tb&&s!==Cb?$qt(e,t,i):wFe(e,t,n,i,s,o);return r===wO&&Fqt(t)?Bqt(a):r===Rqt?jqt(a):Uqt(a)}const Bqt=e=>(t,n,r)=>{const i=o0e(r[n+1],o0e(r.max,1/0)),s=a0e(t,e),o=a0e(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},o0e=(e,t)=>e??t,jqt=e=>(t,n)=>n?e(t):null,Uqt=e=>t=>e(t),a0e=(e,t)=>Number.isFinite(e)?t(e):null;function zqt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+er(t),s=i-r;if(e.type===R5){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function Vqt(e,t,n,r){const i=r||t.type;return mt(n)&&Tqt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===Tb?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===Cb?e.utcFormat("%A, %d %B %Y, %X UTC"):TFe(e,t,5,null,n,r,!0)}function CFe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=Vqt(e,t,n.format,n.formatType);if($q(t.type)){const s=SFe(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(Px(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(er(s))}`}}let AFe=0;function Hqt(){AFe=0}const V3="p_";function Xne(e){return e&&e.gradient}function IFe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?V3:"";return i||(i=e.id="gradient_"+AFe++,r==="radial"?(e.x1=$d(e.x1,.5),e.y1=$d(e.y1,.5),e.r1=$d(e.r1,0),e.x2=$d(e.x2,.5),e.y2=$d(e.y2,.5),e.r2=$d(e.r2,.5),s=V3):(e.x1=$d(e.x1,0),e.y1=$d(e.y1,0),e.x2=$d(e.x2,1),e.y2=$d(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function $d(e,t){return e??t}function kFe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const u0e={basis:{curve:Bxt},"basis-closed":{curve:jxt},"basis-open":{curve:Uxt},bundle:{curve:zxt,tension:"beta",value:.85},cardinal:{curve:Vxt,tension:"tension",value:0},"cardinal-open":{curve:qxt,tension:"tension",value:0},"cardinal-closed":{curve:Hxt,tension:"tension",value:0},"catmull-rom":{curve:Wxt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Gxt,tension:"alpha",value:.5},"catmull-rom-open":{curve:Yxt,tension:"alpha",value:.5},linear:{curve:$Q},"linear-closed":{curve:Kxt},monotone:{horizontal:Qxt,vertical:Xxt},natural:{curve:Jxt},step:{curve:Zxt},"step-after":{curve:tSt},"step-before":{curve:eSt}};function Qne(e,t,n){var r=jt(u0e,e)&&u0e[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const qqt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Wqt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Gqt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Yqt=/^((\s+,?\s*)|(,\s*))/,Kqt=/^[01]/;function Ox(e){const t=[];return(e.match(Wqt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=qqt[s],a=Xqt(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function Xqt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?Kqt:Gqt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(Yqt);u!==null&&(i+=u[0].length)}return r}const Ay=Math.PI/180,Qqt=1e-14,u1=Math.PI/2,lh=Math.PI*2,K_=Math.sqrt(3)/2;var lU={},cU={},RFe=[].join;function Jqt(e,t,n,r,i,s,o,a,u){const l=RFe.call(arguments);if(lU[l])return lU[l];const c=o*Ay,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,b=d/r,w=g*a+y*u,E=v*a+b*u,x=g*e+y*t,T=v*e+b*t;let A=1/((x-w)*(x-w)+(T-E)*(T-E))-.25;A<0&&(A=0);let k=Math.sqrt(A);s==i&&(k=-k);const R=.5*(w+x)-k*(T-E),O=.5*(E+T)+k*(x-w),D=Math.atan2(E-O,w-R);let F=Math.atan2(T-O,x-R)-D;F<0&&s===1?F+=lh:F>0&&s===0&&(F-=lh);const L=Math.ceil(Math.abs(F/(u1+.001))),j=[];for(let z=0;z<L;++z){const q=D+z*F/L,P=D+(z+1)*F/L;j[z]=[R,O,q,P,n,r,f,d]}return lU[l]=j}function Zqt(e){const t=RFe.call(e);if(cU[t])return cU[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),b=Math.sin(v*.5),w=8/3*b*b/Math.sin(v),E=n+p-w*m,x=r+m+w*p,T=n+g,C=r+y,A=T+w*y,k=C-w*g;return cU[t]=[c*E+f*x,d*E+h*x,c*A+f*k,d*A+h*k,c*T+f*C,d*T+h*C]}const yc=["l",0,0,0,0,0,0,0];function eWt(e,t,n){const r=yc[0]=e[0];if(r==="a"||r==="A")yc[1]=t*e[1],yc[2]=n*e[2],yc[3]=e[3],yc[4]=e[4],yc[5]=e[5],yc[6]=t*e[6],yc[7]=n*e[7];else if(r==="h"||r==="H")yc[1]=t*e[1];else if(r==="v"||r==="V")yc[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)yc[i]=(i%2==1?t:n)*e[i];return yc}function JI(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(o=t[v],(i!==1||s!==1)&&(o=eWt(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":l0e(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":l0e(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function l0e(e,t,n,r){const i=Jqt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=Zqt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const c0e=.5773502691896257,f0e={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,lh)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=K_*n,i=r-n*c0e,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=K_*n,i=r-n*c0e;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=K_*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=K_*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=K_*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=K_*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function NFe(e){return jt(f0e,e)?f0e[e]:tWt(e)}var fU={};function tWt(e){if(!jt(fU,e)){const t=Ox(e);fU[e]={draw:function(n,r){JI(n,t,0,0,Math.sqrt(r)/2)}}}return fU[e]}const Lg=.448084975506;function nWt(e){return e.x}function rWt(e){return e.y}function iWt(e){return e.width}function sWt(e){return e.height}function Dp(e){return typeof e=="function"?e:()=>+e}function QD(e,t,n){return Math.max(t,Math.min(e,n))}function DFe(){var e=nWt,t=rWt,n=iWt,r=sWt,i=Dp(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,b=QD(+i.call(this,c),0,v),w=QD(+s.call(this,c),0,v),E=QD(+o.call(this,c),0,v),x=QD(+a.call(this,c),0,v);if(u||(u=h=kF()),b<=0&&w<=0&&E<=0&&x<=0)u.rect(p,m,g,y);else{var T=p+g,C=m+y;u.moveTo(p+b,m),u.lineTo(T-w,m),u.bezierCurveTo(T-Lg*w,m,T,m+Lg*w,T,m+w),u.lineTo(T,C-x),u.bezierCurveTo(T,C-Lg*x,T-Lg*x,C,T-x,C),u.lineTo(p+E,C),u.bezierCurveTo(p+Lg*E,C,p,C-Lg*E,p,C-E),u.lineTo(p,m+b),u.bezierCurveTo(p,m+Lg*b,p+Lg*b,m,p+b,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=Dp(c),l):e},l.y=function(c){return arguments.length?(t=Dp(c),l):t},l.width=function(c){return arguments.length?(n=Dp(c),l):n},l.height=function(c){return arguments.length?(r=Dp(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=Dp(c),s=f!=null?Dp(f):i,a=d!=null?Dp(d):i,o=h!=null?Dp(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function PFe(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,b=(g/=y)*u,w=Math.atan2(g,m);i.moveTo(o-v,a-b),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,w-Math.PI,w),i.lineTo(o+v,a+b),i.arc(o,a,u,w,w+Math.PI)}else i.arc(f,d,p,0,lh);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=kF()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function UR(e,t){return e??t}const zR=e=>e.x||0,VR=e=>e.y||0,oWt=e=>e.width||0,aWt=e=>e.height||0,uWt=e=>(e.x||0)+(e.width||0),lWt=e=>(e.y||0)+(e.height||0),cWt=e=>e.startAngle||0,fWt=e=>e.endAngle||0,dWt=e=>e.padAngle||0,hWt=e=>e.innerRadius||0,pWt=e=>e.outerRadius||0,mWt=e=>e.cornerRadius||0,gWt=e=>UR(e.cornerRadiusTopLeft,e.cornerRadius)||0,yWt=e=>UR(e.cornerRadiusTopRight,e.cornerRadius)||0,vWt=e=>UR(e.cornerRadiusBottomRight,e.cornerRadius)||0,bWt=e=>UR(e.cornerRadiusBottomLeft,e.cornerRadius)||0,_Wt=e=>UR(e.size,64),wWt=e=>e.size||1,D5=e=>e.defined!==!1,EWt=e=>NFe(e.shape||"circle"),xWt=UV().startAngle(cWt).endAngle(fWt).padAngle(dWt).innerRadius(hWt).outerRadius(pWt).cornerRadius(mWt),SWt=XIe().x(zR).y1(VR).y0(lWt).defined(D5),TWt=XIe().y(VR).x1(zR).x0(uWt).defined(D5),CWt=KIe().x(zR).y(VR).defined(D5),AWt=DFe().x(zR).y(VR).width(oWt).height(aWt).cornerRadius(gWt,yWt,vWt,bWt),IWt=Fxt().type(EWt).size(_Wt),kWt=PFe().x(zR).y(VR).defined(D5).size(wWt);function Jne(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function RWt(e,t){return xWt.context(e)(t)}function NWt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?TWt:SWt).curve(Qne(r,n.orient,n.tension)).context(e)(t)}function DWt(e,t){const n=t[0],r=n.interpolate||"linear";return CWt.curve(Qne(r,n.orient,n.tension)).context(e)(t)}function uT(e,t,n,r){return AWt.context(e)(t,n,r)}function PWt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function OWt(e,t){return IWt.context(e)(t)}function $Wt(e,t){return kWt.context(e)(t)}var OFe=1;function $Fe(){OFe=1}function Zne(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+OFe++),o=i.clipping[s]||(i.clipping[s]={id:s});return wn(r)?o.path=r(null):Jne(n)?o.path=uT(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function As(e){this.clear(),e&&this.union(e)}As.prototype={clone(){return new As(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function P5(e){this.mark=e,this.bounds=this.bounds||new As}function O5(e){P5.call(this,e),this.items=this.items||[]}lt(O5,P5);class MFe{constructor(t){this._pending=0,this._loader=t||g5()}pending(){return this._pending}sanitizeURL(t){const n=this;return d0e(n),n._loader.sanitize(t,{context:"href"}).then(r=>(hC(n),r)).catch(()=>(hC(n),null))}loadImage(t){const n=this,r=mqt();return d0e(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=jt(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>hC(n),o.onerror=()=>hC(n),o.src=s,o}).catch(i=>(hC(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function d0e(e){e._pending+=1}function hC(e){e._pending-=1}function wg(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?MWt(t,r):0))}return e}function MWt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const LWt=lh-1e-8;let $5,EO,xO,R1,Lq,SO,Fq,Bq;const g0=(e,t)=>$5.add(e,t),TO=(e,t)=>g0(EO=e,xO=t),h0e=e=>g0(e,$5.y1),p0e=e=>g0($5.x1,e),l1=(e,t)=>Lq*e+Fq*t,c1=(e,t)=>SO*e+Bq*t,dU=(e,t)=>g0(l1(e,t),c1(e,t)),hU=(e,t)=>TO(l1(e,t),c1(e,t));function HR(e,t){return $5=e,t?(R1=t*Ay,Lq=Bq=Math.cos(R1),SO=Math.sin(R1),Fq=-SO):(Lq=Bq=1,R1=SO=Fq=0),FWt}const FWt={beginPath(){},closePath(){},moveTo:hU,lineTo:hU,rect(e,t,n,r){R1?(dU(e+n,t),dU(e+n,t+r),dU(e,t+r),hU(e,t)):(g0(e+n,t+r),TO(e,t))},quadraticCurveTo(e,t,n,r){const i=l1(e,t),s=c1(e,t),o=l1(n,r),a=c1(n,r);m0e(EO,i,o,h0e),m0e(xO,s,a,p0e),TO(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=l1(e,t),a=c1(e,t),u=l1(n,r),l=c1(n,r),c=l1(i,s),f=c1(i,s);g0e(EO,o,u,c,h0e),g0e(xO,a,l,f,p0e),TO(c,f)},arc(e,t,n,r,i,s){if(r+=R1,i+=R1,EO=n*Math.cos(i)+e,xO=n*Math.sin(i)+t,Math.abs(i-r)>LWt)g0(e-n,t-n),g0(e+n,t+n);else{const o=l=>g0(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%lh,r<0&&(r+=lh),i=i%lh,i<0&&(i+=lh),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=lh,a=r-r%u1,u=0;u<4&&a>i;++u,a-=u1)o(a);else for(a=r-r%u1+u1,u=0;u<4&&a<i;++u,a=a+u1)o(a)}}};function m0e(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function g0e(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>Qqt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(y0e(u,e,t,n,r)),0<l&&l<1&&i(y0e(l,e,t,n,r))}function y0e(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var K0=(K0=Y0(1,1))?K0.getContext("2d"):null;const jq=new As;function ere(e){return function(t,n){if(!K0)return!0;e(K0,t),jq.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=jq;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(K0.isPointInPath(u,a))return!0;return!1}}function tre(e,t){return t.contains(e.x||0,e.y||0)}function LFe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(jq.set(n,r,n+i,r+s))}function FFe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return Uw(t,n,r,i,s)}function Uw(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function $x(e,t){e.globalCompositeOperation=t.blend||"source-over"}function xf(e,t){return e??t}function v0e(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function BWt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+xf(t.x1,.5)*r,n.y1+xf(t.y1,.5)*i,Math.max(r,i)*xf(t.r1,0),n.x1+xf(t.x2,.5)*r,n.y1+xf(t.y2,.5)*i,Math.max(r,i)*xf(t.r2,.5));else{const o=xf(t.x1,0),a=xf(t.y1,0),u=xf(t.x2,1),l=xf(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=Y0(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=v0e(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return v0e(s,t.stops)}function BFe(e,t,n){return Xne(n)?BWt(e,n,t.bounds):n}function H3(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=BFe(e,t,t.fill),!0):!1}var jWt=[];function Mx(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=BFe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||jWt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function UWt(e,t){return e.zindex-t.zindex||e.index-t.index}function nre(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(UWt)}function hd(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=nre(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function q3(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=nre(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function rre(e){return function(t,n,r){hd(n,i=>{(!r||r.intersects(i.bounds))&&jFe(e,t,i,i)})}}function zWt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&jFe(e,t,n.items[0],n.items)}}function jFe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||($x(t,n),n.fill&&H3(t,n,i)&&t.fill(),n.stroke&&Mx(t,n,i)&&t.stroke()))}function M5(e){return e=e||Xc,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,q3(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function qR(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function ire(e){return M5(qR(e))}function V1(e,t){return"translate("+e+","+t+")"}function sre(e){return"rotate("+e+")"}function VWt(e,t){return"scale("+e+","+t+")"}function UFe(e){return V1(e.x||0,e.y||0)}function HWt(e){return V1(e.x||0,e.y||0)+(e.angle?" "+sre(e.angle):"")}function qWt(e){return V1(e.x||0,e.y||0)+(e.angle?" "+sre(e.angle):"")+(e.scaleX||e.scaleY?" "+VWt(e.scaleX||1,e.scaleY||1):"")}function ore(e,t,n){function r(o,a){o("transform",HWt(a)),o("d",t(null,a))}function i(o,a){return t(HR(o,a.angle),a),wg(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=Ay),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:rre(s),pick:ire(s),isect:n||ere(s)}}var WWt=ore("arc",RWt);function GWt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function YWt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function KWt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function are(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(HR(u),c),wg(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=qR(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:zWt(s),pick:a,isect:tre,tip:n}}var XWt=are("area",NWt,GWt);function QWt(e,t){var n=t.clip;e.save(),wn(n)?(e.beginPath(),n(e),e.clip()):zFe(e,t.group)}function zFe(e,t){e.beginPath(),Jne(t)?uT(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function VFe(e){const t=xf(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function JWt(e,t){e("transform",UFe(t))}function HFe(e,t){const n=VFe(t);e("d",uT(null,t,n,n))}function ZWt(e,t){e("class","background"),e("aria-hidden",!0),HFe(e,t)}function eGt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?HFe(e,t):e("d","")}function tGt(e,t,n){const r=t.clip?Zne(n,t,t):null;e("clip-path",r)}function nGt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),wg(e,t),e.translate(t.x||0,t.y||0)}function ZI(e,t,n,r){const i=VFe(t);e.beginPath(),uT(e,t,(n||0)+i,(r||0)+i)}const rGt=qR(ZI),iGt=qR(ZI,!1),sGt=qR(ZI,!0);function oGt(e,t,n,r){hd(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(ZI(e,i,s,o),$x(e,i),i.fill&&H3(e,i,u)&&e.fill(),i.stroke&&!a&&Mx(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&zFe(e,i),n&&n.translate(-s,-o),hd(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(ZI(e,i,s,o),$x(e,i),Mx(e,i,u)&&e.stroke())})}function aGt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return q3(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&Jne(u)&&!sGt(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&iGt(e,u,o,a)?(e.restore(),u):(l=q3(u,v=>uGt(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&rGt(e,u,o,a)&&(l=u),e.restore(),l||null)})}function uGt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var lGt={type:"group",tag:"g",nested:!1,attr:JWt,bound:nGt,draw:oGt,pick:aGt,isect:LFe,content:tGt,background:ZWt,foreground:eGt},ek={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function ure(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function lre(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function cre(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function L5(e,t){return e==="center"?t/2:e==="right"?t:0}function F5(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function cGt(e,t,n){const r=ure(t,n),i=lre(t,r),s=cre(t,r),o=(t.x||0)-L5(t.align,i),a=(t.y||0)-F5(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,ek["xmlns:xlink"],"xlink:href"),e("transform",V1(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function fGt(e,t){const n=t.image,r=lre(t,n),i=cre(t,n),s=(t.x||0)-L5(t.align,r),o=(t.y||0)-F5(t.baseline,i);return e.set(s,o,s+r,o+i)}function dGt(e,t,n){hd(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=ure(r,this);let s=lre(r,i),o=cre(r,i);if(s===0||o===0)return;let a=(r.x||0)-L5(r.align,s),u=(r.y||0)-F5(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&($x(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var hGt={type:"image",tag:"image",nested:!1,attr:cGt,bound:fGt,draw:dGt,pick:M5(),isect:Xc,get:ure,xOffset:L5,yOffset:F5},pGt=are("line",DWt,YWt);function mGt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",qWt(t)),e("d",t.path)}function CO(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*Ay,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=Ox(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),JI(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):JI(e,u,r,i,s,o)}function gGt(e,t){return CO(HR(e,t.angle),t)?e.set(0,0,0,0):wg(e,t,!0)}var yGt={type:"path",tag:"path",nested:!1,attr:mGt,bound:gGt,draw:rre(CO),pick:ire(CO),isect:ere(CO)};function vGt(e,t){e("d",uT(null,t))}function bGt(e,t){var n,r;return wg(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function b0e(e,t){e.beginPath(),uT(e,t)}var _Gt={type:"rect",tag:"path",nested:!1,attr:vGt,bound:bGt,draw:rre(b0e),pick:ire(b0e),isect:LFe};function wGt(e,t){e("transform",UFe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function EGt(e,t){var n,r;return wg(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function qFe(e,t,n){var r,i,s,o;return t.stroke&&Mx(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function xGt(e,t,n){hd(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&qFe(e,r,i)&&($x(e,r),e.stroke())}})}function SGt(e,t,n,r){return e.isPointInStroke?qFe(e,t,1)&&e.isPointInStroke(n,r):!1}var TGt={type:"rule",tag:"line",nested:!1,attr:wGt,bound:EGt,draw:xGt,pick:M5(SGt),isect:FFe},CGt=ore("shape",PWt),AGt=ore("symbol",OWt,tre);const _0e=kLe();var Ul={height:mp,measureWidth:fre,estimateWidth:W3,width:W3,canvas:WFe};WFe(!0);function WFe(e){Ul.width=e&&K0?fre:W3}function W3(e,t){return GFe(ky(e,t),mp(e))}function GFe(e,t){return~~(.8*e.length*t)}function fre(e,t){return mp(e)<=0||!(t=ky(e,t))?0:YFe(t,B5(e))}function YFe(e,t){const n=`(${t}) ${e}`;let r=_0e.get(n);return r===void 0&&(K0.font=t,r=K0.measureText(e).width,_0e.set(n,r)),r}function mp(e){return e.fontSize!=null?+e.fontSize||0:11}function Iy(e){return e.lineHeight!=null?e.lineHeight:mp(e)+2}function IGt(e){return Be(e)?e.length>1?e:e[0]:e}function WR(e){return IGt(e.lineBreak&&e.text&&!Be(e.text)?e.text.split(e.lineBreak):e.text)}function dre(e){const t=WR(e);return(Be(t)?t.length-1:0)*Iy(e)}function ky(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?RGt(e,n):n}function kGt(e){if(Ul.width===fre){const t=B5(e);return n=>YFe(n,t)}else if(Ul.width===W3){const t=mp(e);return n=>GFe(n,t)}else return t=>Ul.width(e,t)}function RGt(e,t){var n=+e.limit,r=kGt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function GR(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function B5(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+mp(e)+"px "+GR(e,t)}function hre(e){var t=e.baseline,n=mp(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Iy(e):t==="line-bottom"?.29*n-.5*Iy(e):0)}const NGt={left:"start",center:"middle",right:"end"},f2=new As;function j5(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-u1,t+=r*Math.cos(i),n+=r*Math.sin(i)),f2.x1=t,f2.y1=n,f2}function DGt(e,t){var n=t.dx||0,r=(t.dy||0)+hre(t),i=j5(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",NGt[t.align]||"start"),a?(u=V1(s,o)+" "+sre(a),(n||r)&&(u+=" "+V1(n,r))):u=V1(s+n,o+r),e("transform",u)}function pre(e,t,n){var r=Ul.height(t),i=t.align,s=j5(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+hre(t)-Math.round(.8*r),c=WR(t),f;if(Be(c)?(r+=Iy(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Ul.width(t,h)),0)):f=Ul.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*Ay,o,a);else if(n===2)return e.rotatedPoints(t.angle*Ay,o,a);return e}function PGt(e,t,n){hd(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=B5(r),e.textAlign=r.align||"left",s=j5(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*Ay),o=a=0),o+=r.dx||0,a+=(r.dy||0)+hre(r),c=WR(r),$x(e,r),Be(c))for(l=Iy(r),u=0;u<c.length;++u)f=ky(r,c[u]),r.fill&&H3(e,r,i)&&e.fillText(f,o,a),r.stroke&&Mx(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=ky(r,c),r.fill&&H3(e,r,i)&&e.fillText(f,o,a),r.stroke&&Mx(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function OGt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=j5(t),a=o.x1,u=o.y1,l=pre(f2,t,1),c=-t.angle*Ay,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function $Gt(e,t){const n=pre(f2,e,2);return Uw(t,n[0],n[1],n[2],n[3])||Uw(t,n[0],n[1],n[4],n[5])||Uw(t,n[4],n[5],n[6],n[7])||Uw(t,n[2],n[3],n[6],n[7])}var MGt={type:"text",tag:"text",nested:!1,attr:DGt,bound:pre,draw:PGt,pick:M5(OGt),isect:$Gt},LGt=are("trail",$Wt,KWt),nc={arc:WWt,area:XWt,group:lGt,image:hGt,line:pGt,path:yGt,rect:_Gt,rule:TGt,shape:CGt,symbol:AGt,text:MGt,trail:LGt};function Uq(e,t,n){var r=nc[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new As),e,n)}var w0e={mark:null};function KFe(e,t,n){var r=nc[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(w0e.mark=e,l=w0e),c=Uq(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new As,o)for(a=0,u=s.length;a<u;++a)t.union(Uq(s[a],i,n));return e.bounds=t}const FGt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function XFe(e,t){return JSON.stringify(e,FGt,t)}function QFe(e){const t=typeof e=="string"?JSON.parse(e):e;return JFe(t)}function JFe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&JFe(n[i]);return t&&KFe(e),e}class ZFe{constructor(t){arguments.length?this.root=QFe(t):(this.root=E0e({marktype:"group",name:"root",role:"frame"}),this.root.items=[new O5(this.root)])}toJSON(t){return XFe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=E0e(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function E0e(e,t){const n={bounds:new As,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function y0(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function mre(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Ms(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=y0(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function kc(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function e4e(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function U5(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function BGt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=nc[i.marktype]).tip){for(o=U5(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let gre=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||g5(),this._tooltip=n||jGt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=y0(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=BGt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function jGt(e,t,n,r){e.element().setAttribute("title",r||"")}class YR{constructor(t){this._el=null,this._bgcolor=null,this._loader=new MFe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const UGt="keydown",zGt="keypress",VGt="keyup",t4e="dragenter",AO="dragleave",n4e="dragover",zq="pointerdown",HGt="pointerup",G3="pointermove",IO="pointerout",r4e="pointerover",Vq="mousedown",qGt="mouseup",i4e="mousemove",Y3="mouseout",s4e="mouseover",K3="click",WGt="dblclick",GGt="wheel",o4e="mousewheel",X3="touchstart",Q3="touchmove",J3="touchend",YGt=[UGt,zGt,VGt,t4e,AO,n4e,zq,HGt,G3,IO,r4e,Vq,qGt,i4e,Y3,s4e,K3,WGt,GGt,o4e,X3,Q3,J3],Hq=G3,d2=Y3,qq=K3;class KR extends gre{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=YGt,this.pointermove=S0e([G3,i4e],[r4e,s4e],[IO,Y3]),this.dragover=S0e([n4e],[t4e],[AO]),this.pointerout=T0e([IO,Y3]),this.dragleave=T0e([AO])}initialize(t,n,r){return this._canvas=t&&mre(t,"canvas"),[K3,Vq,zq,G3,IO,AO].forEach(i=>x0e(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(o4e,t)}pointerdown(t){this._down=this._active,this.fire(zq,t)}mousedown(t){this._down=this._active,this.fire(Vq,t)}click(t){this._down===this._active&&(this.fire(K3,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(X3,t,!0)}touchmove(t){this.fire(Q3,t,!0)}touchend(t){this.fire(J3,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===qq&&i&&i.href?this.handleHref(n,i,i.href):(t===Hq||t===d2)&&this.handleTooltip(n,i,t!==d2),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(x0e(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=U5(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return nc[t.marktype].pick.call(this,o,t,n,r,i,s)}}const KGt=e=>e===X3||e===Q3||e===J3?[X3,Q3,J3]:[e];function x0e(e,t){KGt(t).forEach(n=>XGt(e,n))}function XGt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function fA(e,t,n){t.forEach(r=>e.fire(r,n))}function S0e(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?fA(this,e,r):((!i||!i.exit)&&fA(this,n,r),this._active=s,fA(this,t,r),fA(this,e,r))}}function T0e(e){return function(t){fA(this,e,t),this._active=null}}function QGt(){return typeof window<"u"&&window.devicePixelRatio||1}function JGt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?QGt():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class Z3 extends YR{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new As,this._tempb=new As}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:Y0(1,1,this._options.type),t&&this._canvas&&(kc(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)JGt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||Me("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=ZGt(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):eYt(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=nc[n.marktype];n.clip&&QWt(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const ZGt=(e,t,n)=>new As().set(0,0,t,n).translate(-e[0],-e[1]);function eYt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class a4e extends gre{constructor(t,n){super(t,n);const r=this;r._hrefHandler=pU(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=pU(r,(i,s)=>{r.handleTooltip(i,s,i.type!==d2)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(qq,this._hrefHandler),i.removeEventListener(Hq,this._tooltipHandler),i.removeEventListener(d2,this._tooltipHandler)),this._svg=i=t&&mre(t,"svg"),i&&(i.addEventListener(qq,this._hrefHandler),i.addEventListener(Hq,this._tooltipHandler),i.addEventListener(d2,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:pU(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const pU=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},u4e="aria-hidden",yre="aria-label",vre="role",bre="aria-roledescription",l4e="graphics-object",_re="graphics-symbol",c4e=(e,t,n)=>({[vre]:e,[bre]:t,[yre]:n||void 0}),tYt=fd(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),C0e={axis:{desc:"axis",caption:iYt},legend:{desc:"legend",caption:sYt},"title-text":{desc:"title",caption:e=>`Title text '${I0e(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${I0e(e)}'`}},A0e={ariaRole:vre,ariaRoleDescription:bre,description:yre};function f4e(e,t){const n=t.aria===!1;if(e(u4e,n||void 0),n||t.description==null)for(const r in A0e)e(A0e[r],void 0);else{const r=t.mark.marktype;e(yre,t.description),e(vre,t.ariaRole||(r==="group"?l4e:_re)),e(bre,t.ariaRoleDescription||`${r} mark`)}}function d4e(e){return e.aria===!1?{[u4e]:!0}:tYt[e.role]?null:C0e[e.role]?rYt(e,C0e[e.role]):nYt(e)}function nYt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return c4e(n?l4e:_re,`${t} mark container`,e.description)}function rYt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return c4e(t.role||_re,t.desc,n.description||r(n))}catch{return null}}function I0e(e){return pt(e.text).join(" ")}function iYt(e){const t=e.datum,n=e.orient,r=t.title?h4e(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${Px(a)?"discrete":a} scale with ${CFe(o,s,e)}`}function sYt(e){const t=e.datum,n=t.title?h4e(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return aYt(r)+(n?` titled '${n}'`:"")+` for ${oYt(s)} with ${CFe(u,a,e)}`}function h4e(e){try{return pt(er(e.items).items[0].text).join(" ")}catch{return null}}function oYt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+er(e)}function aYt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const p4e=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),uYt=e=>p4e(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function wre(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${uYt(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=p4e(u),a),toString:()=>e};return a}const m4e=e=>g4e(wre(),e)+"";function g4e(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):g4e(e,r)}return e.close()}const eL={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},tL={blend:"mix-blend-mode"},y4e={fill:"none","stroke-miterlimit":10},pC=0,k0e="http://www.w3.org/2000/xmlns/",Os=ek.xmlns;class Ere extends YR{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=Ms(t,0,"svg",Os),this._svg.setAttributeNS(k0e,"xmlns",Os),this._svg.setAttributeNS(k0e,"xmlns:xlink",ek["xmlns:xlink"]),this._svg.setAttribute("version",ek.version),this._svg.setAttribute("class","marks"),kc(t,1),this._root=Ms(this._svg,pC,"g",Os),v0(this._root,y4e),kc(this._svg,pC+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(v0(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=Ms(t,pC,"rect",Os),v0(r,{width:this._width,height:this._height,fill:n}));const i=m4e(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),kc(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=nc[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,R0e(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,R0e(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=nc[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=N0e(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return kc(c,0),n._svg;c.setAttribute("class",e4e(n));const f=d4e(n);for(const m in f)Va(c,m,f[m]);l||Va(c,"pointer-events",u),Va(c,"clip-path",n.clip?Zne(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=N0e(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&fYt(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):hd(n,p),kc(c,h),c}_update(t,n,r){fm=n,ha=n.__values__,f4e(h2,r),t.attr(h2,r,this);const i=hYt[t.type];i&&i.call(this,t,n,r),fm&&this.style(fm,r)}style(t,n){if(n!=null){for(const r in eL){let i=r==="font"?GR(n):n[r];if(i===ha[r])continue;const s=eL[r];i==null?t.removeAttribute(s):(Xne(i)&&(i=IFe(i,this._defs.gradient,v4e())),t.setAttribute(s,i+"")),ha[r]=i}for(const r in tL)kO(t,tL[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=Ms(t,pC+1,"defs",Os)),i=lYt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=Ms(t,pC+1,"defs",Os)),i=cYt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):kc(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function R0e(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function lYt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=Ms(e,n++,"pattern",Os);v0(o,{id:V3+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=Ms(o,0,"rect",Os),v0(o,{width:1,height:1,fill:`url(${v4e()}#${t.id})`}),e=Ms(e,n++,"radialGradient",Os),v0(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Ms(e,n++,"linearGradient",Os),v0(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=Ms(e,r,"stop",Os),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return kc(e,r),n}function cYt(e,t,n){let r;return e=Ms(e,n,"clipPath",Os),e.setAttribute("id",t.id),t.path?(r=Ms(e,0,"path",Os),r.setAttribute("d",t.path)):(r=Ms(e,0,"rect",Os),v0(r,{x:0,y:0,width:t.width,height:t.height})),kc(e,1),n+1}function fYt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;hd(n,o=>{i=e.mark(t,o,i,r),++s}),kc(t,1+s)}function N0e(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=y0(o,r,Os),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=y0(o,"path",Os);s.appendChild(a),a.__data__=e;const u=y0(o,"g",Os);s.appendChild(u),u.__data__=e;const l=y0(o,"path",Os);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||dYt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function dYt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let fm=null,ha=null;const hYt={group(e,t,n){const r=fm=t.childNodes[2];ha=r.__values__,e.foreground(h2,n,this),ha=t.__values__,fm=t.childNodes[1],e.content(h2,n,this);const i=fm=t.childNodes[0];e.background(h2,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==ha.events&&(Va(r,"pointer-events",s),Va(i,"pointer-events",s),ha.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Va(r,"display",null),this.style(i,n),Va(i,"stroke",null),o&&(n.fill=null),ha=r.__values__,this.style(r,n),o&&(n.fill=o),fm=null}else Va(r,"display","none")},image(e,t,n){n.smooth===!1?(kO(t,"image-rendering","optimizeSpeed"),kO(t,"image-rendering","pixelated")):kO(t,"image-rendering",null)},text(e,t,n){const r=WR(n);let i,s,o,a;Be(r)?(s=r.map(u=>ky(n,u)),i=s.join(`
`),i!==ha.text&&(kc(t,0),o=t.ownerDocument,a=Iy(n),s.forEach((u,l)=>{const c=y0(o,"tspan",Os);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),ha.text=i)):(s=ky(n,r),s!==ha.text&&(t.textContent=s,ha.text=s)),Va(t,"font-family",GR(n)),Va(t,"font-size",mp(n)+"px"),Va(t,"font-style",n.fontStyle),Va(t,"font-variant",n.fontVariant),Va(t,"font-weight",n.fontWeight)}};function h2(e,t,n){t!==ha[e]&&(n?pYt(fm,e,t,n):Va(fm,e,t),ha[e]=t)}function kO(e,t,n){n!==ha[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),ha[t]=n)}function v0(e,t){for(const n in t)Va(e,n,t[n])}function Va(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function pYt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function v4e(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class b4e extends YR{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=wre();n.open("svg",_n({},ek,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",y4e,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=nc[n.marktype],i=r.tag,s=[f4e,r.attr];t.open("g",{class:e4e(n),"clip-path":n.clip?Zne(this,n,n.group):null},d4e(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=WR(a);if(Be(l)){const c={x:0,dy:Iy(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(ky(a,l[f])).close()}else t.text(ky(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),hd(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):hd(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&mYt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:V3+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function mYt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=GR(t),e["font-size"]=mp(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in eL){let a=t[o];const u=eL[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(Xne(a)&&(a=IFe(a,i.gradient,"")),e[u]=a)}for(const o in tL){const a=t[o];a!=null&&(s=s||[],s.push(`${tL[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const Rf={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function gYt(e){Rf.svgMarkTypes=e.svgMarkTypes??["text"],Rf.svgOnTop=e.svgOnTop??!0,Rf.debug=e.debug??!1}class Wq extends YR{constructor(t){super(t),this._svgRenderer=new Ere(t),this._canvasRenderer=new Z3(t)}initialize(t,n,r,i,s){this._root_el=Ms(t,0,"div");const o=Ms(this._root_el,0,"div"),a=Ms(this._root_el,1,"div");return this._root_el.style.position="relative",Rf.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=Rf.svgOnTop?a:o,this._canvasEl=Rf.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return Rf.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!Rf.svgMarkTypes.includes(s));this._svgRenderer.render(t,Rf.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return Rf.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class _4e extends KR{constructor(t,n){super(t,n)}initialize(t,n,r){const i=Ms(Ms(t,0,"div"),Rf.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const w4e="canvas",E4e="hybrid",x4e="png",S4e="svg",T4e="none",b0={Canvas:w4e,PNG:x4e,SVG:S4e,Hybrid:E4e,None:T4e},Ab={};Ab[w4e]=Ab[x4e]={renderer:Z3,headless:Z3,handler:KR};Ab[S4e]={renderer:Ere,headless:b4e,handler:a4e};Ab[E4e]={renderer:Wq,headless:Wq,handler:_4e};Ab[T4e]={};function z5(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Ab[e]=t,this):Ab[e]}function C4e(e,t,n){const r=[],i=new As().union(t),s=e.marktype;return s?A4e(e,i,n,r):s==="group"?I4e(e,i,n,r):Me("Intersect scene must be mark node or group item.")}function A4e(e,t,n,r){if(yYt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)I4e(i[a],t,n,r);else for(const u=nc[s].isect;a<o;++a){const l=i[a];k4e(l,t,u)&&r.push(l)}}return r}function yYt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function I4e(e,t,n,r){n&&n(e.mark)&&k4e(e,t,nc.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)A4e(i[u],t,n,r);t.translate(o,a)}return r}function k4e(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const mU=new As;function R4e(e){const t=e.clip;if(wn(t))t(HR(mU.clear()));else if(t)mU.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(mU)}const vYt=1e-9;function xre(e,t,n){return e===t?!0:n==="path"?N4e(e,t):e instanceof Date&&t instanceof Date?+e==+t:dr(e)&&dr(t)?Math.abs(e-t)<=vYt:!e||!t||!gt(e)&&!gt(t)?e==t:bYt(e,t)}function N4e(e,t){return xre(Ox(e),Ox(t))}function bYt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!xre(e[i],t[i],i))return!1;return typeof e==typeof t}function _Yt(){$Fe(),Hqt()}const Lx="top",jf="left",qf="right",Ry="bottom",wYt="top-left",EYt="top-right",xYt="bottom-left",SYt="bottom-right",Sre="start",Gq="middle",Wa="end",TYt="x",CYt="y",V5="group",Tre="axis",Cre="title",AYt="frame",IYt="scope",Are="legend",D4e="row-header",P4e="row-footer",O4e="row-title",$4e="column-header",M4e="column-footer",L4e="column-title",kYt="padding",RYt="symbol",F4e="fit",B4e="fit-x",j4e="fit-y",NYt="pad",Ire="none",JD="all",Yq="each",kre="flush",_0="column",w0="row";function U4e(e){De.call(this,null,e)}lt(U4e,De,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=nc[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=ZD(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===V5||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(ZD(l,o))),r.role){case Tre:case Are:case Cre:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(ZD(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(ZD(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return R4e(r),t.modifies("bounds")}});function ZD(e,t,n){return t(e.bounds.clear(),e,n)}const D0e=":vega_identifier:";function Rre(e){De.call(this,0,e)}Rre.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};lt(Rre,De,{transform(e,t){const n=DYt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function DYt(e){return e._signals[D0e]||(e._signals[D0e]=e.add(0))}function z4e(e){De.call(this,null,e)}lt(z4e,De,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,PYt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===V5?O5:P5;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function PYt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function V4e(e){De.call(this,null,e)}const P0e={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!H4e(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},H4e=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),O0e=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(H4e(i,s=e[n].bounds,t))return!0},OYt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},$Yt=(e,t,n)=>{var r=e.range(),i=new As;return t===Lx||t===Ry?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},$0e=e=>(e.forEach(t=>t.opacity=1),e),M0e=(e,t)=>e.reflow(t.modified()).modifies("opacity");lt(V4e,De,{transform(e,t){const n=P0e[e.method]||P0e.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&($0e(i),t=M0e(t,e)),t;if(i=i.filter(OYt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=$0e(i),t=M0e(t,e),s.length>=3&&O0e(s,r)){do s=n(s,r);while(s.length>=3&&O0e(s,r));s.length<3&&!er(i).opacity&&(s.length>1&&(er(s).opacity=0),er(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=$Yt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function q4e(e){De.call(this,null,e)}lt(q4e,De,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const da=new As;function zw(e,t,n){return e[t]===n?0:(e[t]=n,1)}function MYt(e){var t=e.items[0].orient;return t===jf||t===qf}function LYt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function FYt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=LYt(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&dre(p),v=0,b=0,w,E;switch(da.clear().union(g),g.clear(),(w=u[0])>-1&&g.union(i.items[w].bounds),(w=u[1])>-1&&g.union(i.items[w].bounds),a){case Lx:v=f||0,b=-c,E=Math.max(d,Math.min(h,-g.y1)),g.add(0,-E).add(l,0),p&&eP(e,p,E,m,y,0,-1,g);break;case jf:v=-c,b=f||0,E=Math.max(d,Math.min(h,-g.x1)),g.add(-E,0).add(0,l),p&&eP(e,p,E,m,y,1,-1,g);break;case qf:v=n+c,b=f||0,E=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(E,l),p&&eP(e,p,E,m,y,1,1,g);break;case Ry:v=f||0,b=r+c,E=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,E),p&&eP(e,p,E,m,0,0,1,g);break;default:v=i.x,b=i.y}return wg(g.translate(v,b),i),zw(i,"x",v+o)|zw(i,"y",b+o)&&(i.bounds=da,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function eP(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const L0e=(e,t)=>Math.floor(Math.min(e,t)),F0e=(e,t)=>Math.ceil(Math.max(e,t));function BYt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===V5)switch(i.role){case Tre:case Are:case Cre:break;case D4e:o.rowheaders.push(...s);break;case P4e:o.rowfooters.push(...s);break;case $4e:o.colheaders.push(...s);break;case M4e:o.colfooters.push(...s);break;case O4e:o.rowtitle=s[0];break;case L4e:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function jYt(e){return new As().set(0,0,e.width||0,e.height||0)}function UYt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function xi(e,t,n){const r=gt(e)?e[t]:e;return r??(n!==void 0?n:0)}function B0e(e){return e<0?Math.ceil(-e):0}function W4e(e,t,n){var r=!n.nodirty,i=n.bounds===kre?jYt:UYt,s=da.set(0,0,0,0),o=xi(n.align,_0),a=xi(n.align,w0),u=xi(n.padding,_0),l=xi(n.padding,w0),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,b=Array(d),w=Array(d),E=Array(d),x,T,C,A,k,R,O,D,$,F,L;for(T=0;T<c;++T)p[T]=0;for(T=0;T<f;++T)y[T]=0;for(T=0;T<d;++T)R=t[T],k=E[T]=i(R),R.x=R.x||0,b[T]=0,R.y=R.y||0,w[T]=0,C=T%c,A=~~(T/c),m=Math.max(m,O=Math.ceil(k.x2)),v=Math.max(v,D=Math.ceil(k.y2)),p[C]=Math.max(p[C],O),y[A]=Math.max(y[A],D),h[T]=u+B0e(k.x1),g[T]=l+B0e(k.y1),r&&e.dirty(t[T]);for(T=0;T<d;++T)T%c===0&&(h[T]=0),T<c&&(g[T]=0);if(o===Yq)for(C=1;C<c;++C){for(L=0,T=C;T<d;T+=c)L<h[T]&&(L=h[T]);for(T=C;T<d;T+=c)h[T]=L+p[C-1]}else if(o===JD){for(L=0,T=0;T<d;++T)T%c&&L<h[T]&&(L=h[T]);for(T=0;T<d;++T)T%c&&(h[T]=L+m)}else for(o=!1,C=1;C<c;++C)for(T=C;T<d;T+=c)h[T]+=p[C-1];if(a===Yq)for(A=1;A<f;++A){for(L=0,T=A*c,x=T+c;T<x;++T)L<g[T]&&(L=g[T]);for(T=A*c;T<x;++T)g[T]=L+y[A-1]}else if(a===JD){for(L=0,T=c;T<d;++T)L<g[T]&&(L=g[T]);for(T=c;T<d;++T)g[T]=L+v}else for(a=!1,A=1;A<f;++A)for(T=A*c,x=T+c;T<x;++T)g[T]+=y[A-1];for($=0,T=0;T<d;++T)$=h[T]+(T%c?$:0),b[T]+=$-t[T].x;for(C=0;C<c;++C)for(F=0,T=C;T<d;T+=c)F+=g[T],w[T]+=F-t[T].y;if(o&&xi(n.center,_0)&&f>1)for(T=0;T<d;++T)k=o===JD?m:p[T%c],$=k-E[T].x2-t[T].x-b[T],$>0&&(b[T]+=$/2);if(a&&xi(n.center,w0)&&c!==1)for(T=0;T<d;++T)k=a===JD?v:y[~~(T/c)],F=k-E[T].y2-t[T].y-w[T],F>0&&(w[T]+=F/2);for(T=0;T<d;++T)s.union(E[T].translate(b[T],w[T]));switch($=xi(n.anchor,TYt),F=xi(n.anchor,CYt),xi(n.anchor,_0)){case Wa:$-=s.width();break;case Gq:$-=s.width()/2}switch(xi(n.anchor,w0)){case Wa:F-=s.height();break;case Gq:F-=s.height()/2}for($=Math.round($),F=Math.round(F),s.clear(),T=0;T<d;++T)t[T].mark.bounds.clear();for(T=0;T<d;++T)R=t[T],R.x+=b[T]+=$,R.y+=w[T]+=F,s.union(R.mark.bounds.union(R.bounds.translate(b[T],w[T]))),r&&e.dirty(R);return s}function zYt(e,t,n){var r=BYt(t),i=r.marks,s=n.bounds===kre?VYt:HYt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=W4e(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=xi(n.headerBand,w0,null),c=tP(e,r.rowheaders,i,a,u,-xi(o,"rowHeader"),L0e,0,s,"x1",0,a,1,m)),r.colheaders&&(m=xi(n.headerBand,_0,null),f=tP(e,r.colheaders,i,a,a,-xi(o,"columnHeader"),L0e,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=xi(n.footerBand,w0,null),d=tP(e,r.rowfooters,i,a,u,xi(o,"rowFooter"),F0e,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=xi(n.footerBand,_0,null),h=tP(e,r.colfooters,i,a,a,xi(o,"columnFooter"),F0e,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=xi(n.titleAnchor,w0),g=xi(o,"rowTitle"),g=p===Wa?d+g:c-g,m=xi(n.titleBand,w0,.5),j0e(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=xi(n.titleAnchor,_0),g=xi(o,"columnTitle"),g=p===Wa?h+g:f-g,m=xi(n.titleBand,_0,.5),j0e(e,r.coltitle,g,1,y,m))}function VYt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function HYt(e,t){return e.bounds[t]}function tP(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,b,w,E,x,T,C,A;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,w=t.length;v<w;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,w=t.length;v<w;++v,y+=f){for(x=t[v],E=x.mark.bounds,b=y;b>=0&&(T=n[b])==null;b-=d);a?(C=h==null?T.x:Math.round(T.bounds.x1+h*T.bounds.width()),A=m):(C=m,A=h==null?T.y:Math.round(T.bounds.y1+h*T.bounds.height())),E.union(x.bounds.translate(C-(x.x||0),A-(x.y||0))),x.x=C,x.y=A,e.dirty(x),g=o(g,E[l])}return g}function j0e(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function qYt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function WYt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function GYt(e,t,n,r,i,s,o){const a=qYt(n,t),u=WYt(e,a("offset",0)),l=a("anchor",Sre),c=l===Wa?1:l===Gq?.5:0,f={align:Yq,bounds:a("bounds",kre),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case jf:f.anchor={x:Math.floor(r.x1)-u,column:Wa,y:c*(o||r.height()+2*r.y1),row:l};break;case qf:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case Lx:f.anchor={y:Math.floor(i.y1)-u,row:Wa,x:c*(s||i.width()+2*i.x1),column:l};break;case Ry:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case wYt:f.anchor={x:u,y:u};break;case EYt:f.anchor={x:s-u,y:u,column:Wa};break;case xYt:f.anchor={x:u,y:o-u,row:Wa};break;case SYt:f.anchor={x:s-u,y:o-u,column:Wa,row:Wa};break}return f}function YYt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),XYt(e,n,n.items[0].items[0]),s=KYt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===RYt&&QYt(n.items[0].items[0].items[0].items),i!==Ire&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,wg(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function KYt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function XYt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&mC(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case jf:i+=Math.ceil(o.bounds.width())+u;break;case qf:case Ry:break;default:s+=o.bounds.height()+u}switch((i||s)&&mC(e,n,i,s),o.orient){case jf:c+=X_(t,n,o,a,1,1);break;case qf:l+=X_(t,n,o,Wa,0,0)+u,c+=X_(t,n,o,a,1,1);break;case Ry:l+=X_(t,n,o,a,0,0),c+=X_(t,n,o,Wa,-1,0,1)+u;break;default:l+=X_(t,n,o,a,0,0)}(l||c)&&mC(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(mC(e,n,-l,0),mC(e,o,-l,0))}}function X_(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:dre(n);return Math.round(r===Sre?f:r===Wa?d-h:.5*(c-h))}function mC(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function QYt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function JYt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===jf||a===qf?r:n,p=0,m=0,g=0,y=0,v=0,b;if(o!==V5?a===jf?(p=i.y2,h=i.y1):a===qf?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===jf&&(p=r,h=0),b=u===Sre?p:u===Wa?h:(p+h)/2,d&&d.text){switch(a){case Lx:case Ry:v=f.bounds.height()+c;break;case jf:y=f.bounds.width()+c;break;case qf:y=-f.bounds.width()-c;break}da.clear().union(d.bounds),da.translate(y-(d.x||0),v-(d.y||0)),zw(d,"x",y)|zw(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(da),d.mark.bounds.clear().union(da),e.dirty(d)),da.clear().union(d.bounds)}else da.clear();switch(da.union(f.bounds),a){case Lx:m=b,g=i.y1-da.height()-l;break;case jf:m=i.x1-da.width()-l,g=b;break;case qf:m=i.x2+da.width()+l,g=b;break;case Ry:m=b,g=i.y2+l;break;default:m=s.x,g=s.y}return zw(s,"x",m)|zw(s,"y",g)&&(da.translate(m,g),e.dirty(s),s.bounds.clear().union(da),t.bounds.clear().union(da),e.dirty(s)),s.bounds}function G4e(e){De.call(this,null,e)}lt(G4e,De,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&zYt(n,r,e.layout),eKt(n,r,e)}),ZYt(e.mark.group)?t.reflow():t}});function ZYt(e){return e&&e.mark.role!=="legend-entry"}function eKt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new As().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case Tre:h=MYt(f)?a:u,h.union(FYt(e,f,i,s));break;case Cre:c=f;break;case Are:l.push(YYt(e,f));break;case AYt:case IYt:case D4e:case P4e:case O4e:case $4e:case M4e:case L4e:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||qf,d!==Ire&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];W4e(e,v,GYt(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===F4e||n.autosize.type===B4e||n.autosize.type===j4e))switch(y.orient){case jf:case qf:o.add(v.x1,0).add(v.x2,0);break;case Lx:case Ry:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(JYt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),tKt(e,t,o,n)}function tKt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===kYt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===Ire?(l=0,f=0,u=o,c=a):s===F4e?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===B4e?(u=Math.max(0,o-l-d),a=c+f+h):s===j4e?(o=u+l+d,c=Math.max(0,a-f-h)):s===NYt&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const nKt=Object.freeze(Object.defineProperty({__proto__:null,bound:U4e,identifier:Rre,mark:z4e,overlap:V4e,render:q4e,viewlayout:G4e},Symbol.toStringTag,{value:"Module"}));function Y4e(e){De.call(this,null,e)}lt(Y4e,De,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=Yne(s,o,e.minstep),u=e.format||wFe(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?_Fe(s,e.values,a):Kne(s,a);return i&&(r.rem=i),i=l.map((c,f)=>Sr({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(Sr({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function K4e(e){De.call(this,null,e)}function rKt(){return Sr({})}function iKt(e){const t=rT().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}lt(K4e,De,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||rKt,s=e.key||Ft,o=this.value;return Be(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Me("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=iKt(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function X4e(e){De.call(this,null,e)}lt(X4e,De,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(Be(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||Ug,u=i.enter||Ug,l=i.exit||Ug,c=(s&&!o?i[s]:a)||Ug;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==Ug&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==Ug&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==Ug){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function Q4e(e){De.call(this,[],e)}lt(Q4e,De,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||wO,o=e.scale,a=+e.limit,u=Yne(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===wO,c=e.format||TFe(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||SFe(o,u),d,h,p,m,g;return i&&(r.rem=i),s===wO?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,wn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=Na(m=p||8),i=i.map((y,v)=>Sr({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(Sr({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===Nqt?(d=o.domain(),h=yFe(o,d[0],er(d)),f.length<3&&!e.values&&d[0]!==er(d)&&(f=[d[0],er(d)]),i=f.map((y,v)=>Sr({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=zqt(o),i=f.map((y,v)=>Sr({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const sKt=e=>e.source.x,oKt=e=>e.source.y,aKt=e=>e.target.x,uKt=e=>e.target.y;function Nre(e){De.call(this,{},e)}Nre.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};lt(Nre,De,{transform(e,t){var n=e.sourceX||sKt,r=e.sourceY||oKt,i=e.targetX||aKt,s=e.targetY||uKt,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=U0e.get(u+"-"+a)||U0e.get(u);return l||Me("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const J4e=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,lKt=(e,t,n,r)=>J4e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Z4e=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},cKt=(e,t,n,r)=>Z4e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),e5e=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},fKt=(e,t,n,r)=>e5e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),dKt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,hKt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,pKt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},mKt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},gKt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},yKt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},U0e=rT({line:J4e,"line-radial":lKt,arc:Z4e,"arc-radial":cKt,curve:e5e,"curve-radial":fKt,"orthogonal-horizontal":dKt,"orthogonal-vertical":hKt,"orthogonal-radial":pKt,"diagonal-horizontal":mKt,"diagonal-vertical":gKt,"diagonal-radial":yKt});function Dre(e){De.call(this,null,e)}Dre.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};lt(Dre,De,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||eT,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/SAe(l),h=Uu(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const vKt=5;function bKt(e){const t=e.type;return!e.bins&&(t===Nx||t===LR||t===FR)}function t5e(e){return qne(e)&&e!==Nh}const _Kt=fd(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function n5e(e){De.call(this,null,e),this.modified(!0)}lt(n5e,De,{transform(e,t){var n=t.dataflow,r=this.value,i=wKt(e);(!r||i!==r.type)&&(this.value=r=br(i)());for(i in e)if(!_Kt[i]){if(i==="padding"&&t5e(r.type))continue;wn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return AKt(r,e,CKt(r,e,xKt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function wKt(e){var t=e.type,n="",r;return t===Nh?Nh+"-"+Nx:(EKt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Nh+"-":r===3?aT+"-":""),(n+t||Nx).toLowerCase())}function EKt(e){const t=e.type;return qne(t)&&t!==Tb&&t!==Cb&&(e.scheme||e.range&&e.range.length&&e.range.every(mt))}function xKt(e,t,n){const r=SKt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&bKt(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return t5e(s)&&t.padding&&i[0]!==er(i)&&(i=TKt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(r5e(s,i,n)),s===Une&&e.unknown(t.domainImplicit?FV:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&Yne(e,t.nice)||null),i.length}function SKt(e,t,n){return t?(e.domain(r5e(e.type,t,n)),t.length):-1}function TKt(e,t,n,r,i,s){var o=Math.abs(er(n)-n[0]),a=o/(o-2*r),u=e===eg?Ote(t,null,a):e===FR?B3(t,null,a,.5):e===LR?B3(t,null,a,i||1):e===I5?$te(t,null,a,s||1):Pte(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function r5e(e,t,n){if(dFe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+rt(t))}return t}function CKt(e,t,n){let r=t.bins;if(r&&!Be(r)){const i=e.domain(),s=i[0],o=er(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Me("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Uu(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===zne&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function AKt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=IKt(r,t,n);else if(t.scheme&&(s=kKt(r,t,n),wn(s))){if(e.interpolator)return e.interpolator(s);Me(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&hFe(r))return e.interpolator(N5(Kq(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(Wne(t.interpolate,t.interpolateGamma)):wn(e.round)?e.round(i):wn(e.rangeRound)&&e.interpolate(i?Wk:pg),s&&e.range(Kq(s,t.reverse))}function IKt(e,t,n){e!==oFe&&e!==Oq&&Me("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===Oq?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*jne(n,i,r)]}function kKt(e,t,n){var r=t.schemeExtent,i,s;return Be(t.scheme)?s=N5(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=Gne(i),s||Me(`Unrecognized scheme name: ${t.scheme}`)),n=e===R5?n+1:e===zne?n-1:e===Dx||e===k5?+t.schemeCount||vKt:n,hFe(e)?z0e(s,r,t.reverse):wn(s)?gFe(z0e(s,r),n):e===Une?s:s.slice(0,n)}function z0e(e,t,n){return wn(e)&&(t||n)?mFe(e,Kq(t||[0,1],n)):e}function Kq(e,t){return t?e.slice().reverse():e}function i5e(e){De.call(this,null,e)}lt(i5e,De,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(d_(e.sort)),this.modified(n),t}});const V0e="zero",s5e="center",o5e="normalize",a5e=["y0","y1"];function Pre(e){De.call(this,null,e)}Pre.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:V0e,values:[V0e,s5e,o5e]},{name:"as",type:"string",array:!0,length:2,default:a5e}]};lt(Pre,De,{transform(e,t){var n=e.as||a5e,r=n[0],i=n[1],s=d_(e.sort),o=e.field||eT,a=e.offset===s5e?RKt:e.offset===o5e?NKt:DKt,u,l,c,f;for(u=PKt(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function RKt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function NKt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function DKt(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function PKt(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const OKt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:Y4e,datajoin:K4e,encode:X4e,legendentries:Q4e,linkpath:Nre,pie:Dre,scale:n5e,sortitems:i5e,stack:Pre},Symbol.toStringTag,{value:"Module"}));var $Kt=Math.abs,Xq=Math.cos,nL=Math.sin,MKt=1e-6,u5e=Math.PI,Qq=u5e/2,H0e=LKt(2);function q0e(e){return e>1?Qq:e<-1?-Qq:Math.asin(e)}function LKt(e){return e>0?Math.sqrt(e):0}function FKt(e,t){var n=e*nL(t),r=30,i;do t-=i=(t+nL(t)-n)/(1+Xq(t));while($Kt(i)>MKt&&--r>0);return t/2}function BKt(e,t,n){function r(i,s){return[e*i*Xq(s=FKt(n,s)),t*nL(s)]}return r.invert=function(i,s){return s=q0e(s/t),[i/(e*Xq(s)),q0e((2*s+nL(2*s))/n)]},r}var jKt=BKt(H0e/Qq,H0e,u5e);function UKt(){return lp(jKt).scale(169.529)}const zKt=Z2e(),Jq=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function VKt(e,t){return function n(){const r=t();return r.type=e,r.path=Z2e().projection(r),r.copy=r.copy||function(){const i=n();return Jq.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},cFe(r)}}function Ore(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(rL[e]=VKt(e,t),this):rL[e]||null}function l5e(e){return e&&e.path||zKt}const rL={albers:tIe,albersusa:T_t,azimuthalequalarea:C_t,azimuthalequidistant:A_t,conicconformal:R_t,conicequalarea:xM,conicequidistant:P_t,equalEarth:$_t,equirectangular:N_t,gnomonic:M_t,identity:L_t,mercator:I_t,mollweide:UKt,naturalEarth1:F_t,orthographic:B_t,stereographic:j_t,transversemercator:U_t};for(const e in rL)Ore(e,rL[e]);function HKt(){}const Pp=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function c5e(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),qKt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(WKt((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,Pp[g<<1].forEach(b);++h<e-1;)m=g,g=u[h+1]>=l,Pp[m|g<<1].forEach(b);for(Pp[g<<0].forEach(b);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,Pp[g<<1|y<<2].forEach(b);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,Pp[m|g<<1|y<<2|v<<3].forEach(b);Pp[g|y<<3].forEach(b)}for(h=-1,y=u[p*e]>=l,Pp[y<<2].forEach(b);++h<e-1;)v=y,y=u[p*e+h+1]>=l,Pp[y<<2|v<<3].forEach(b);Pp[y<<3].forEach(b);function b(w){var E=[w[0][0]+h,w[0][1]+p],x=[w[1][0]+h,w[1][1]+p],T=o(E),C=o(x),A,k;(A=d[T])?(k=f[C])?(delete d[A.end],delete f[k.start],A===k?(A.ring.push(x),c(A.ring)):f[A.start]=d[k.end]={start:A.start,end:k.end,ring:A.ring.concat(k.ring)}):(delete d[A.end],A.ring.push(x),d[A.end=C]=A):(A=f[C])?(k=d[T])?(delete f[A.start],delete d[k.end],A===k?(A.ring.push(x),c(A.ring)):f[k.start]=d[A.end]={start:k.start,end:A.end,ring:k.ring.concat(A.ring)}):(delete f[A.start],A.ring.unshift(E),f[A.start=T]=A):f[T]=d[C]={start:T,end:C,ring:[E,x]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Me("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:HKt,r):n===a},r}function qKt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function WKt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=GKt(e,t[n]))return i;return 0}function GKt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(YKt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function YKt(e,t,n){var r;return KKt(e,t,n)&&XKt(e[r=+(e[0]===t[0])],n[r],t[r])}function KKt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function XKt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function f5e(e,t,n){return function(r){var i=Yh(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?oy(s,o,e):a/(e+1);return Uu(s+u,o,u)}}function $re(e){De.call(this,null,e)}$re.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};lt($re,De,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Ra,s=c5e().smooth(e.smooth!==!1),o=e.thresholds||QKt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,Be(o)?o:o(c.values));JKt(f,c,l,e),f.forEach(d=>{u.push(b5(l,Sr(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function QKt(e,t,n){const r=f5e(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>M0(t(i).values)))}function JKt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(wn(i)&&(i=i(n,r)),wn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(dr(i)?i:i[0])||1,a=(dr(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(d5e(t,o,a,u,l))}function d5e(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function W0e(e,t,n){const r=e>=0?e:ene(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function gU(e){return wn(e)?e:Na(+e)}function h5e(){var e=u=>u[0],t=u=>u[1],n=eT,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=W0e(r[0],u,e)>>o,f=W0e(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(w=>{const E=d+(+e(w)>>o),x=h+(+t(w)>>o);E>=0&&E<p&&x>=0&&x<m&&(g[E+x*p]+=+n(w))}),c>0&&f>0?(Q_(p,m,g,y,c),J_(p,m,y,g,f),Q_(p,m,g,y,c),J_(p,m,y,g,f),Q_(p,m,g,y,c),J_(p,m,y,g,f)):c>0?(Q_(p,m,g,y,c),Q_(p,m,y,g,c),Q_(p,m,g,y,c),v=y):f>0&&(J_(p,m,g,y,f),J_(p,m,y,g,f),J_(p,m,g,y,f),v=y);const b=l?Math.pow(2,-2*o):1/SAe(v);for(let w=0,E=p*m;w<E;++w)v[w]*=b;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=gU(u),a):e},a.y=function(u){return arguments.length?(t=gU(u),a):t},a.weight=function(u){return arguments.length?(n=gU(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Me("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Me("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=pt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Me("invalid bandwidth"),r=u,a):r},a}function Q_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function J_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function Mre(e){De.call(this,null,e)}Mre.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const ZKt=["x","y","weight","size","cellSize","bandwidth"];function p5e(e,t){return ZKt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}lt(Mre,De,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=eXt(r,e.groupby),s=(e.groupby||[]).map(es),o=p5e(h5e(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>Sr(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function eXt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Lre(e){De.call(this,null,e)}Lre.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};lt(Lre,De,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=c5e().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||f5e(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=p5e(h5e(),e)(i,!0),u=d5e(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=Be(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Sr),n}});const Zq="Feature",Fre="FeatureCollection",tXt="MultiPoint";function Bre(e){De.call(this,null,e)}Bre.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};lt(Bre,De,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&Ra,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(xa(a))||s&&t.modified(xa(s))||o&&t.modified(xa(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:Zq,geometry:{type:tXt,coordinates:r}})),this.value={type:Fre,features:n}}});function jre(e){De.call(this,null,e)}jre.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};lt(jre,De,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Ra,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=l5e(e.projection),n.materialize().reflow()):o=i===Ra||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=nXt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function nXt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function Ure(e){De.call(this,null,e)}Ure.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};lt(Ure,De,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function zre(e){De.call(this,null,e)}zre.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};lt(zre,De,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=rXt(l5e(e.projection),e.field||Kc("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function rXt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function Vre(e){De.call(this,[],e),this.generator=i_t()}Vre.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};lt(Vre,De,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)wn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(p6e(n[0],i)):t.add.push(Sr(i)),n[0]=i,t}});function Hre(e){De.call(this,null,e)}Hre.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};lt(Hre,De,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Ra,s=sXt(e.opacity,e),o=iXt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?M0(n.map(l=>M0(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=_n({},l,u);r||(f.$max=M0(c.values||[])),l[a]=oXt(c,f,o.dep?o:Na(o(f)),s.dep?s:Na(s(f)))}),t.reflow(!0).modifies(a)}});function iXt(e,t){let n;return wn(e)?(n=r=>ay(e(r,t)),n.dep=m5e(e)):n=Na(ay(e||"#888")),n}function sXt(e,t){let n;return wn(e)?(n=r=>e(r,t),n.dep=m5e(e)):e?n=Na(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function m5e(e){if(!wn(e))return!1;const t=fd(xa(e));return t.$x||t.$y||t.$value||t.$max}function oXt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:u0,d=Y0(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,b=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+b);const w=n(t);m[y+0]=w.r,m[y+1]=w.g,m[y+2]=w.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function g5e(e){De.call(this,null,e),this.modified(!0)}lt(g5e,De,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=uXt(e.type),Jq.forEach(r=>{e[r]!=null&&G0e(n,r,e[r])})):Jq.forEach(r=>{e.modified(r)&&G0e(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&aXt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function aXt(e,t){const n=lXt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function uXt(e){const t=Ore((e||"mercator").toLowerCase());return t||Me("Unrecognized projection type: "+e),t()}function G0e(e,t,n){wn(e[t])&&e[t](n)}function lXt(e){return e=pt(e),e.length===1?e[0]:{type:Fre,features:e.reduce((t,n)=>t.concat(cXt(n)),[])}}function cXt(e){return e.type===Fre?e.features:pt(e).filter(t=>t!=null).map(t=>t.type===Zq?t:{type:Zq,geometry:t})}const fXt=Object.freeze(Object.defineProperty({__proto__:null,contour:Lre,geojson:Bre,geopath:jre,geopoint:Ure,geoshape:zre,graticule:Vre,heatmap:Hre,isocontour:$re,kde2d:Mre,projection:g5e},Symbol.toStringTag,{value:"Module"})),Y0e={center:Y1t,collide:hbt,nbody:Sbt,link:mbt,x:Tbt,y:Cbt},dA="forces",eW=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],dXt=["static","iterations"],y5e=["x","y","vx","vy"];function qre(e){De.call(this,null,e)}qre.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:y5e}]};lt(qre,De,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(eW),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&v5e(n,e,0,t)):(this.value=n=pXt(t.source,e),n.on("tick",hXt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(dXt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==dA||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(y5e)}});function hXt(e,t){return()=>e.touch(t).run()}function pXt(e,t){const n=xbt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),v5e(n,t,!0).on("end",()=>s=!0)}function v5e(e,t,n,r){var i=pt(t.forces),s,o,a,u;for(s=0,o=eW.length;s<o;++s)a=eW[s],a!==dA&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=dA+s,a=n||t.modified(dA,s)?gXt(i[s]):r&&mXt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(dA+s,null);return e.numForces=i.length,e}function mXt(e,t){var n,r;for(n in e)if(wn(r=e[n])&&t.modified(xa(r)))return 1;return 0}function gXt(e){var t,n;jt(Y0e,e.force)||Me("Unrecognized force: "+e.force),t=Y0e[e.force]();for(n in e)wn(t[n])&&yXt(t[n],e[n],e);return t}function yXt(e,t,n){e(wn(t)?r=>t(r,n):t)}const vXt=Object.freeze(Object.defineProperty({__proto__:null,force:qre},Symbol.toStringTag,{value:"Module"}));function tW(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function Wre(e){De.call(this,null,e)}Wre.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const bXt=e=>e.values;lt(Wre,De,{transform(e,t){t.source||Me("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&v5(o.data)&&i.rem.push(o.data)}),this.value=s=PF({values:pt(e.keys).reduce((o,a)=>(o.key(a),o),_Xt()).entries(i.source)},bXt),n&&s.each(o=>{o.children&&(o=Sr(o.data),i.add.push(o),i.source.push(o))}),tW(s,Ft,Ft)),i.source.root=s,i}});function _Xt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function Eg(e){De.call(this,null,e)}const wXt=(e,t)=>e.parent===t.parent?1:2;lt(Eg,De,{transform(e,t){(!t.source||!t.source.root)&&Me(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(d_(e.sort,o=>o.data)),EXt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?wXt:eT);try{this.value=n(i)}catch(o){Me(o)}return i.each(o=>xXt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function EXt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function xXt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const nW=["x","y","r","depth","children"];function Gre(e){Eg.call(this,e)}Gre.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:nW.length,default:nW}]};lt(Gre,Eg,{layout:gIe,params:["radius","size","padding"],fields:nW});const rW=["x0","y0","x1","y1","depth","children"];function Yre(e){Eg.call(this,e)}Yre.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:rW.length,default:rW}]};lt(Yre,Eg,{layout:Cwt,params:["size","round","padding"],fields:rW});function Kre(e){De.call(this,null,e)}Kre.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};lt(Kre,De,{transform(e,t){t.source||Me("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?tW(kde().id(e.key).parentId(e.parentKey)(i.source),e.key,Xc):tW(kde()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const K0e={tidy:Mwt,cluster:K_t},iW=["x","y","depth","children"];function Xre(e){Eg.call(this,e)}Xre.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:iW.length,default:iW}]};lt(Xre,Eg,{layout(e){const t=e||"tidy";if(jt(K0e,t))return K0e[t]();Me("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:iW});function Qre(e){De.call(this,[],e)}Qre.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};lt(Qre,De,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Me("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Ft(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Ft(a)]&&s[Ft(u)]&&i.add.push(Sr({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Ft(o)]=1),n.forEach(o=>{(s[Ft(o.source)]||s[Ft(o.target)])&&i.mod.push(o)})),i}});const X0e={binary:Fwt,dice:Xk,slice:OF,slicedice:Bwt,squarify:_Ie,resquarify:jwt},sW=["x0","y0","x1","y1","depth","children"];function Jre(e){Eg.call(this,e)}Jre.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:sW.length,default:sW}]};lt(Jre,Eg,{layout(){const e=Lwt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{jt(X0e,t)?e.tile(X0e[t]):Me("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:sW});const SXt=Object.freeze(Object.defineProperty({__proto__:null,nest:Wre,pack:Gre,partition:Yre,stratify:Kre,tree:Xre,treelinks:Qre,treemap:Jre},Symbol.toStringTag,{value:"Module"})),yU=4278190080;function TXt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function CXt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=Y0(s,o).getContext("2d"),l=Y0(s,o).getContext("2d"),c=a&&Y0(s,o).getContext("2d");n.forEach(C=>RO(u,C,!1)),RO(l,t,!1),a&&RO(c,t,!0);const f=vU(u,s,o),d=vU(l,s,o),h=a&&vU(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,b,w,E,x,T;for(y=0;y<o;++y)for(g=0;g<s;++g)w=y*s+g,E=f[w]&yU,T=d[w]&yU,x=a&&h[w]&yU,(E||x||T)&&(v=e(g),b=e(y),!i&&(E||T)&&p.set(v,b),a&&(E||x)&&m.set(v,b));return[p,m]}function vU(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function RO(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>RO(e,s.items,n))}):nc[r].draw(e,{items:n?t.map(AXt):t})}function AXt(e){const t=b5(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Op=5,za=31,tk=32,Qg=new Uint32Array(tk+1),Of=new Uint32Array(tk+1);Of[0]=0;Qg[0]=~Of[0];for(let e=1;e<=tk;++e)Of[e]=Of[e-1]<<1|1,Qg[e]=~Of[e];function IXt(e,t){const n=new Uint32Array(~~((e*t+tk)/tk));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>Op]&1<<(a&za)},set:(s,o)=>{const a=o*e+s;r(a>>>Op,1<<(a&za))},clear:(s,o)=>{const a=o*e+s;i(a>>>Op,~(1<<(a&za)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>Op,h=f>>>Op,d===h){if(n[d]&Qg[c&za]&Of[(f&za)+1])return!0}else{if(n[d]&Qg[c&za]||n[h]&Of[(f&za)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Op,d=c>>>Op,f===d)r(f,Qg[l&za]&Of[(c&za)+1]);else for(r(f,Qg[l&za]),r(d,Of[(c&za)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Op,d=c>>>Op,f===d)i(f,Of[l&za]|Qg[(c&za)+1]);else for(i(f,Of[l&za]),i(d,Qg[(c&za)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function kXt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>IXt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function RXt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=Ul.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let b=0;b<u;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,m=a[b].y2===void 0?p:a[b].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function iL(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function E0(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function NXt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!iL(p,m,d,h,i,s)&&!E0(e,p,m,h,d,g,o,a)&&!E0(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,E0(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Ul.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,b,w,E,x,T,C,A,k,R,O,D,$,F,L,j,z;for(let q=0;q<f;++q){for(v=c[q].x,w=c[q].y,b=c[q].x2===void 0?v:c[q].x2,E=c[q].y2===void 0?w:c[q].y2,v>b&&(z=v,v=b,b=z),w>E&&(z=w,w=E,E=z),k=e(v),O=e(b),R=~~((k+O)/2),D=e(w),F=e(E),$=~~((D+F)/2),C=R;C>=k;--C)for(A=$;A>=D;--A)j=u(C,A,p,h,d),j&&([l.x,l.y,p,m]=j);for(C=R;C<=O;++C)for(A=$;A<=F;++A)j=u(C,A,p,h,d),j&&([l.x,l.y,p,m]=j);!m&&!n&&(L=Math.abs(b-v+E-w),x=(v+b)/2,T=(w+E)/2,L>=y&&!iL(x,T,h,d,i,s)&&!E0(e,x,T,d,h,d,o,null)&&(y=L,l.x=x,l.y=T,g=!0))}return m||g?(x=h/2,T=d/2,o.setRange(e(l.x-x),e(l.y-T),e(l.x+x),e(l.y+T)),l.align="center",l.baseline="middle",!0):!1}}const DXt=[-1,-1,1,1],PXt=[-1,1,-1,1];function OXt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Ul.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,b,w,E,x,T,C,A,k,R,O,D,$;for(let F=0;F<f;++F){for(b=c[F].x,E=c[F].y,w=c[F].x2===void 0?b:c[F].x2,x=c[F].y2===void 0?E:c[F].y2,p.push([e((b+w)/2),e((E+x)/2)]);p.length;)if([A,k]=p.pop(),!(o.get(A,k)||a.get(A,k)||u.get(A,k))){u.set(A,k);for(let L=0;L<4;++L)T=A+DXt[L],C=k+PXt[L],u.outOfBounds(T,C,T,C)||p.push([T,C]);if(T=e.invert(A),C=e.invert(k),R=m,O=s,!iL(T,C,h,d,i,s)&&!E0(e,T,C,d,h,R,o,a)&&!E0(e,T,C,d,h,d,o,null)){for(;O-R>=1;)D=(R+O)/2,E0(e,T,C,d,h,D,o,a)?O=D:R=D;R>m&&(l.x=T,l.y=C,m=R,g=!0)}}!g&&!n&&($=Math.abs(w-b+x-E),T=(b+w)/2,C=(E+x)/2,$>=v&&!iL(T,C,h,d,i,s)&&!E0(e,T,C,d,h,d,o,null)&&(v=$,l.x=T,l.y=C,y=!0))}return g||y?(T=h/2,C=d/2,o.setRange(e(l.x-T),e(l.y-C),e(l.x+T),e(l.y+C)),l.align="center",l.baseline="middle",!0):!1}}const $Xt=["right","center","left"],MXt=["bottom","middle","top"];function LXt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,b,w,E,x,T,C,A,k,R;for(let O=0;O<u;++O){if(h=(n[O]&3)-1,p=(n[O]>>>2&3)-1,m=h===0&&p===0||r[O]<0,g=h&&p?Math.SQRT1_2:1,y=r[O]<0?-1:1,v=c[1+h]+r[O]*h*g,T=c[4+p]+y*f*p/2+r[O]*p*g,w=T-f/2,E=T+f/2,C=e(v),k=e(w),R=e(E),!d)if(Q0e(C,C,k,R,o,a,v,v,w,E,c,m))d=Ul.width(l.datum,l.datum.text);else continue;if(x=v+y*d*h/2,v=x-d/2,b=x+d/2,C=e(v),A=e(b),Q0e(C,A,k,R,o,a,v,b,w,E,c,m))return l.x=h?h*y<0?b:v:x,l.y=p?p*y<0?E:w:T,l.align=$Xt[h*y+1],l.baseline=MXt[p*y+1],o.setRange(C,k,A,R),!0}return!1}}function Q0e(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const bU=0,_U=4,wU=8,EU=0,xU=1,SU=2,FXt={"top-left":bU+EU,top:bU+xU,"top-right":bU+SU,left:_U+EU,middle:_U+xU,right:_U+SU,"bottom-left":wU+EU,bottom:wU+xU,"bottom-right":wU+SU},BXt={naive:RXt,"reduced-search":NXt,floodfill:OXt};function jXt(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=UXt(r,f),h=zXt(i,f),p=VXt(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=HXt(p,m,a,u),v=l===null||l===1/0,b=g&&c==="naive";let w=-1,E=-1;const x=e.map(k=>{const R=v?Ul.width(k,k.text):void 0;return w=Math.max(w,R),E=Math.max(E,k.fontSize),{datum:k,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(k),textWidth:R}});l=l===null||l===1/0?Math.max(w,E)+Math.max(...r):l;const T=kXt(t[0],t[1],l);let C;if(!b){n&&x.sort((O,D)=>n(O.datum,D.datum));let k=!1;for(let O=0;O<h.length&&!k;++O)k=h[O]===5||d[O]<0;const R=(p&&o||g)&&e.map(O=>O.datum);C=s.length||R?CXt(T,R||[],s,k,g):TXt(T,o&&x)}const A=g?BXt[c](T,C,o,u):LXt(T,C,h,d);return x.forEach(k=>k.opacity=+A(k)),x}function UXt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function zXt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=FXt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function VXt(e){return e&&e.mark&&e.mark.marktype}function HXt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const oW=["x","y","opacity","align","baseline"],b5e=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Zre(e){De.call(this,null,e)}Zre.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:b5e},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:oW.length,default:oW}]};lt(Zre,De,{transform(e,t){function n(s){const o=e[s];return wn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Me("Size parameter should be specified as a [width, height] array.");const i=e.as||oW;return jXt(t.materialize(t.SOURCE).source||[],e.size,e.sort,pt(e.offset==null?1:e.offset),pt(e.anchor||b5e),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const qXt=Object.freeze(Object.defineProperty({__proto__:null,label:Zre},Symbol.toStringTag,{value:"Module"}));function _5e(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function eie(e){De.call(this,null,e)}eie.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};lt(eie,De,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=_5e(r,e.groupby),s=(e.groupby||[]).map(es),o=s.length,a=e.as||[es(e.x),es(e.y)],u=[];i.forEach(l=>{D6e(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(Sr(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const aW={constant:dne,linear:hne,log:I6e,exp:k6e,pow:R6e,quad:pne,poly:N6e},WXt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function tie(e){De.call(this,null,e)}tie.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(aW)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};lt(tie,De,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=_5e(r,e.groupby),s=(e.groupby||[]).map(es),o=e.method||"linear",a=e.order==null?3:e.order,u=WXt(o,a),l=e.as||[es(e.x),es(e.y)],c=aW[o],f=[];let d=e.extent;jt(aW,o)||Me("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(Sr({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||Yh(h,e.x),y=v=>{const b={};for(let w=0;w<s.length;++w)b[s[w]]=h.dims[w];b[l[0]]=v[0],b[l[1]]=v[1],f.push(Sr(b))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):C5(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const GXt=Object.freeze(Object.defineProperty({__proto__:null,loess:eie,regression:tie},Symbol.toStringTag,{value:"Module"}));function nie(e){De.call(this,null,e)}nie.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const YXt=[-1e5,-1e5,1e5,1e5];lt(nie,De,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:YXt;const s=this.value=hQ.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!XXt(u)?KXt(u):null}return t.reflow(e.modified()).modifies(n)}});function KXt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function XXt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const QXt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:nie},Symbol.toStringTag,{value:"Module"}));var TU=Math.PI/180,hA=64,NO=2048;function JXt(){var e=[256,256],t,n,r,i,s,o,a,u=w5e,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(Y0()),m=iQt((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,b=[],w=l.map(x=>({text:t(x),font:n(x),style:i(x),weight:s(x),rotate:o(x),size:~~(r(x)+1e-14),padding:a(x),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:x})).sort((x,T)=>T.size-x.size);++v<y;){var E=w[v];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,ZXt(p,E,w,v),E.hasText&&h(m,E,g)&&(b.push(E),g?tQt(g,E):g=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(hA<<5)/m,p.height=NO/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,b=Math.sqrt(e[0]*e[0]+e[1]*e[1]),w=u(e),E=c()<.5?1:-1,x=-E,T,C,A;(T=w(x+=E))&&(C=~~T[0],A=~~T[1],!(Math.min(Math.abs(C),Math.abs(A))>=b));)if(m.x=y+C,m.y=v+A,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!eQt(m,p,e[0]))&&(!g||nQt(m,g))){for(var k=m.sprite,R=m.width>>5,O=e[0]>>5,D=m.x-(R<<4),$=D&127,F=32-$,L=m.y1-m.y0,j=(m.y+m.y0)*O+(D>>5),z,q=0;q<L;q++){z=0;for(var P=0;P<=R;P++)p[j+P]|=z<<F|(P<R?(z=k[q*R+P])>>>$:0);j+=O}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=Av(p),f):n},f.fontStyle=function(p){return arguments.length?(i=Av(p),f):i},f.fontWeight=function(p){return arguments.length?(s=Av(p),f):s},f.rotate=function(p){return arguments.length?(o=Av(p),f):o},f.text=function(p){return arguments.length?(t=Av(p),f):t},f.spiral=function(p){return arguments.length?(u=sQt[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=Av(p),f):r},f.padding=function(p){return arguments.length?(a=Av(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function ZXt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(hA<<5)/s,NO/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*TU),g=Math.cos(t.rotate*TU),y=c*g,v=c*m,b=d*g,w=d*m;c=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=hA<<5&&(o=0,a+=u,u=0),a+d>=NO)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*TU),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var E=i.getImageData(0,0,(hA<<5)/s,NO/s).data,x=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)x[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var T=0,C=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var A=f*p+(h>>5),k=E[(a+p)*(hA<<5)+(o+h)<<2]?1<<31-h%32:0;x[A]|=k,T|=k}T?C=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+C,t.sprite=x.slice(0,(t.y1-t.y0)*f)}}}function eQt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function tQt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function nQt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function w5e(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function rQt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function iQt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Av(e){return typeof e=="function"?e:function(){return e}}var sQt={archimedean:w5e,rectangular:rQt};const E5e=["x","y","font","fontSize","fontStyle","fontWeight","angle"],oQt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function rie(e){De.call(this,JXt(),e)}rie.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:E5e}]};lt(rie,De,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Me("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return wn(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||oQt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||E5e;let a=e.fontSize||14,u;if(wn(a)?u=e.fontSizeRange:a=Na(a),u){const p=a,m=br("sqrt")().domain(Yh(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Jc).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const aQt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:rie},Symbol.toStringTag,{value:"Module"})),uQt=e=>new Uint8Array(e),lQt=e=>new Uint16Array(e),p2=e=>new Uint32Array(e);function cQt(){let e=8,t=[],n=p2(0),r=nP(0,e),i=nP(0,e);return{data:()=>t,seen:()=>n=fQt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=nP(s,e,r),i=nP(s,e))}}}function fQt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function nP(e,t,n){const r=(t<257?uQt:t<65537?lQt:p2)(e);return n&&r.set(n),r}function J0e(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function Z0e(){let e=p2(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=p2(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=dQt(h,d),c)p=t,m=e,t=Array(c+f),e=p2(c+f),hQt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[dgt(u,a[0],0,l),sy(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function dQt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),mgt(e,t)}function hQt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function iie(e){De.call(this,cQt(),e),this._indices=null,this._dims=null}iie.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};lt(iie,De,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=Z0e()),s.push(J0e(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,b,w,E,x,T;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},v=t.mod,E=0,x=v.length;E<x;++E)w[v[E]._index]=1;for(E=0;E<h;++E)T=r[E],(!o[E]||e.modified("fields",E)||t.modified(T.fields))&&(y=T.fname,(m=p[y])||(s[y]=g=Z0e(),p[y]=m=g.insert(T,t.source,0)),o[E]=J0e(g,E,i[E]).onAdd(m,u));for(E=0,x=a.data().length;E<x;++E)b[E]||(l[E]!==u[E]?f.push(E):w[E]&&u[E]!==c&&d.push(E));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function sie(e){De.call(this,null,e)}sie.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};lt(sie,De,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const pQt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:iie,resolvefilter:sie},Symbol.toStringTag,{value:"Module"})),mQt="RawCode",Ib="Literal",gQt="Property",yQt="Identifier",vQt="ArrayExpression",bQt="BinaryExpression",x5e="CallExpression",_Qt="ConditionalExpression",wQt="LogicalExpression",EQt="MemberExpression",xQt="ObjectExpression",SQt="UnaryExpression";function wd(e){this.type=e}wd.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=TQt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function TQt(e){switch(e.type){case vQt:return e.elements;case bQt:case wQt:return[e.left,e.right];case x5e:return[e.callee].concat(e.arguments);case _Qt:return[e.test,e.consequent,e.alternate];case EQt:return[e.object,e.property];case xQt:return e.properties;case gQt:return[e.key,e.value];case SQt:return[e.argument];case yQt:case Ib:case mQt:default:return[]}}var gp,Rt,$e,Ta,$r,H5=1,XR=2,kb=3,lv=4,q5=5,m_=6,Ru=7,QR=8,CQt=9;gp={};gp[H5]="Boolean";gp[XR]="<end>";gp[kb]="Identifier";gp[lv]="Keyword";gp[q5]="Null";gp[m_]="Numeric";gp[Ru]="Punctuator";gp[QR]="String";gp[CQt]="RegularExpression";var AQt="ArrayExpression",IQt="BinaryExpression",kQt="CallExpression",RQt="ConditionalExpression",S5e="Identifier",NQt="Literal",DQt="LogicalExpression",PQt="MemberExpression",OQt="ObjectExpression",$Qt="Property",MQt="UnaryExpression",co="Unexpected token %0",LQt="Unexpected number",FQt="Unexpected string",BQt="Unexpected identifier",jQt="Unexpected reserved word",UQt="Unexpected end of input",uW="Invalid regular expression",CU="Invalid regular expression: missing /",T5e="Octal literals are not allowed in strict mode.",zQt="Duplicate data property in object literal not allowed in strict mode",jo="ILLEGAL",nk="Disabled.",VQt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),HQt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function W5(e,t){if(!e)throw new Error("ASSERT: "+t)}function Wp(e){return e>=48&&e<=57}function oie(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function m2(e){return"01234567".indexOf(e)>=0}function qQt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function rk(e){return e===10||e===13||e===8232||e===8233}function JR(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&VQt.test(String.fromCharCode(e))}function sL(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&HQt.test(String.fromCharCode(e))}const WQt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function C5e(){for(;$e<Ta;){const e=Rt.charCodeAt($e);if(qQt(e)||rk(e))++$e;else break}}function lW(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)$e<Ta&&oie(Rt[$e])?(r=Rt[$e++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):yr({},co,jo);return String.fromCharCode(i)}function GQt(){var e,t,n,r;for(e=Rt[$e],t=0,e==="}"&&yr({},co,jo);$e<Ta&&(e=Rt[$e++],!!oie(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&yr({},co,jo),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function A5e(){var e,t;for(e=Rt.charCodeAt($e++),t=String.fromCharCode(e),e===92&&(Rt.charCodeAt($e)!==117&&yr({},co,jo),++$e,e=lW("u"),(!e||e==="\\"||!JR(e.charCodeAt(0)))&&yr({},co,jo),t=e);$e<Ta&&(e=Rt.charCodeAt($e),!!sL(e));)++$e,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Rt.charCodeAt($e)!==117&&yr({},co,jo),++$e,e=lW("u"),(!e||e==="\\"||!sL(e.charCodeAt(0)))&&yr({},co,jo),t+=e);return t}function YQt(){var e,t;for(e=$e++;$e<Ta;){if(t=Rt.charCodeAt($e),t===92)return $e=e,A5e();if(sL(t))++$e;else break}return Rt.slice(e,$e)}function KQt(){var e,t,n;return e=$e,t=Rt.charCodeAt($e)===92?A5e():YQt(),t.length===1?n=kb:WQt.hasOwnProperty(t)?n=lv:t==="null"?n=q5:t==="true"||t==="false"?n=H5:n=kb,{type:n,value:t,start:e,end:$e}}function AU(){var e=$e,t=Rt.charCodeAt($e),n,r=Rt[$e],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++$e,{type:Ru,value:String.fromCharCode(t),start:e,end:$e};default:if(n=Rt.charCodeAt($e+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return $e+=2,{type:Ru,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:$e};case 33:case 61:return $e+=2,Rt.charCodeAt($e)===61&&++$e,{type:Ru,value:Rt.slice(e,$e),start:e,end:$e}}}if(o=Rt.substr($e,4),o===">>>=")return $e+=4,{type:Ru,value:o,start:e,end:$e};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return $e+=3,{type:Ru,value:s,start:e,end:$e};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return $e+=2,{type:Ru,value:i,start:e,end:$e};if(i==="//"&&yr({},co,jo),"<>=!+-*%&|^/".indexOf(r)>=0)return++$e,{type:Ru,value:r,start:e,end:$e};yr({},co,jo)}function XQt(e){let t="";for(;$e<Ta&&oie(Rt[$e]);)t+=Rt[$e++];return t.length===0&&yr({},co,jo),JR(Rt.charCodeAt($e))&&yr({},co,jo),{type:m_,value:parseInt("0x"+t,16),start:e,end:$e}}function QQt(e){let t="0"+Rt[$e++];for(;$e<Ta&&m2(Rt[$e]);)t+=Rt[$e++];return(JR(Rt.charCodeAt($e))||Wp(Rt.charCodeAt($e)))&&yr({},co,jo),{type:m_,value:parseInt(t,8),octal:!0,start:e,end:$e}}function eye(){var e,t,n;if(n=Rt[$e],W5(Wp(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=$e,e="",n!=="."){if(e=Rt[$e++],n=Rt[$e],e==="0"){if(n==="x"||n==="X")return++$e,XQt(t);if(m2(n))return QQt(t);n&&Wp(n.charCodeAt(0))&&yr({},co,jo)}for(;Wp(Rt.charCodeAt($e));)e+=Rt[$e++];n=Rt[$e]}if(n==="."){for(e+=Rt[$e++];Wp(Rt.charCodeAt($e));)e+=Rt[$e++];n=Rt[$e]}if(n==="e"||n==="E")if(e+=Rt[$e++],n=Rt[$e],(n==="+"||n==="-")&&(e+=Rt[$e++]),Wp(Rt.charCodeAt($e)))for(;Wp(Rt.charCodeAt($e));)e+=Rt[$e++];else yr({},co,jo);return JR(Rt.charCodeAt($e))&&yr({},co,jo),{type:m_,value:parseFloat(e),start:t,end:$e}}function JQt(){var e="",t,n,r,i,s=!1;for(t=Rt[$e],W5(t==="'"||t==='"',"String literal must starts with a quote"),n=$e,++$e;$e<Ta;)if(r=Rt[$e++],r===t){t="";break}else if(r==="\\")if(r=Rt[$e++],!r||!rk(r.charCodeAt(0)))switch(r){case"u":case"x":Rt[$e]==="{"?(++$e,e+=GQt()):e+=lW(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:m2(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),$e<Ta&&m2(Rt[$e])&&(s=!0,i=i*8+"01234567".indexOf(Rt[$e++]),"0123".indexOf(r)>=0&&$e<Ta&&m2(Rt[$e])&&(i=i*8+"01234567".indexOf(Rt[$e++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Rt[$e]===`
`&&++$e;else{if(rk(r.charCodeAt(0)))break;e+=r}return t!==""&&yr({},co,jo),{type:QR,value:e,octal:s,start:n,end:$e}}function ZQt(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";yr({},uW)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{yr({},uW)}try{return new RegExp(e,t)}catch{return null}}function eJt(){var e,t,n,r,i;for(e=Rt[$e],W5(e==="/","Regular expression literal must start with a slash"),t=Rt[$e++],n=!1,r=!1;$e<Ta;)if(e=Rt[$e++],t+=e,e==="\\")e=Rt[$e++],rk(e.charCodeAt(0))&&yr({},CU),t+=e;else if(rk(e.charCodeAt(0)))yr({},CU);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||yr({},CU),i=t.substr(1,t.length-2),{value:i,literal:t}}function tJt(){var e,t,n;for(t="",n="";$e<Ta&&(e=Rt[$e],!!sL(e.charCodeAt(0)));)++$e,e==="\\"&&$e<Ta?yr({},co,jo):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&yr({},uW,n),{value:n,literal:t}}function nJt(){var e,t,n,r;return $r=null,C5e(),e=$e,t=eJt(),n=tJt(),r=ZQt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:$e}}function rJt(e){return e.type===kb||e.type===lv||e.type===H5||e.type===q5}function I5e(){if(C5e(),$e>=Ta)return{type:XR,start:$e,end:$e};const e=Rt.charCodeAt($e);return JR(e)?KQt():e===40||e===41||e===59?AU():e===39||e===34?JQt():e===46?Wp(Rt.charCodeAt($e+1))?eye():AU():Wp(e)?eye():AU()}function Fu(){const e=$r;return $e=e.end,$r=I5e(),$e=e.end,e}function k5e(){const e=$e;$r=I5e(),$e=e}function iJt(e){const t=new wd(AQt);return t.elements=e,t}function tye(e,t,n){const r=new wd(e==="||"||e==="&&"?DQt:IQt);return r.operator=e,r.left=t,r.right=n,r}function sJt(e,t){const n=new wd(kQt);return n.callee=e,n.arguments=t,n}function oJt(e,t,n){const r=new wd(RQt);return r.test=e,r.consequent=t,r.alternate=n,r}function aie(e){const t=new wd(S5e);return t.name=e,t}function pA(e){const t=new wd(NQt);return t.value=e.value,t.raw=Rt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function nye(e,t,n){const r=new wd(PQt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function aJt(e){const t=new wd(OQt);return t.properties=e,t}function rye(e,t,n){const r=new wd($Qt);return r.key=t,r.value=n,r.kind=e,r}function uJt(e,t){const n=new wd(MQt);return n.operator=e,n.argument=t,n.prefix=!0,n}function yr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(W5(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=$e,n.description=i,n}function G5(e){e.type===XR&&yr(e,UQt),e.type===m_&&yr(e,LQt),e.type===QR&&yr(e,FQt),e.type===kb&&yr(e,BQt),e.type===lv&&yr(e,jQt),yr(e,co,e.value)}function Ca(e){const t=Fu();(t.type!==Ru||t.value!==e)&&G5(t)}function pi(e){return $r.type===Ru&&$r.value===e}function IU(e){return $r.type===lv&&$r.value===e}function lJt(){const e=[];for($e=$r.start,Ca("[");!pi("]");)pi(",")?(Fu(),e.push(null)):(e.push(Rb()),pi("]")||Ca(","));return Fu(),iJt(e)}function iye(){$e=$r.start;const e=Fu();return e.type===QR||e.type===m_?(e.octal&&yr(e,T5e),pA(e)):aie(e.value)}function cJt(){var e,t,n,r;if($e=$r.start,e=$r,e.type===kb)return n=iye(),Ca(":"),r=Rb(),rye("init",n,r);if(e.type===XR||e.type===Ru)G5(e);else return t=iye(),Ca(":"),r=Rb(),rye("init",t,r)}function fJt(){var e=[],t,n,r,i={},s=String;for($e=$r.start,Ca("{");!pi("}");)t=cJt(),t.key.type===S5e?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?yr({},zQt):i[r]=!0,e.push(t),pi("}")||Ca(",");return Ca("}"),aJt(e)}function dJt(){Ca("(");const e=uie();return Ca(")"),e}const hJt={if:1};function pJt(){var e,t,n;if(pi("("))return dJt();if(pi("["))return lJt();if(pi("{"))return fJt();if(e=$r.type,$e=$r.start,e===kb||hJt[$r.value])n=aie(Fu().value);else if(e===QR||e===m_)$r.octal&&yr($r,T5e),n=pA(Fu());else{if(e===lv)throw new Error(nk);e===H5?(t=Fu(),t.value=t.value==="true",n=pA(t)):e===q5?(t=Fu(),t.value=null,n=pA(t)):pi("/")||pi("/=")?(n=pA(nJt()),k5e()):G5(Fu())}return n}function mJt(){const e=[];if(Ca("("),!pi(")"))for(;$e<Ta&&(e.push(Rb()),!pi(")"));)Ca(",");return Ca(")"),e}function gJt(){$e=$r.start;const e=Fu();return rJt(e)||G5(e),aie(e.value)}function yJt(){return Ca("."),gJt()}function vJt(){Ca("[");const e=uie();return Ca("]"),e}function bJt(){var e,t,n;for(e=pJt();;)if(pi("."))n=yJt(),e=nye(".",e,n);else if(pi("("))t=mJt(),e=sJt(e,t);else if(pi("["))n=vJt(),e=nye("[",e,n);else break;return e}function sye(){const e=bJt();if($r.type===Ru&&(pi("++")||pi("--")))throw new Error(nk);return e}function DO(){var e,t;if($r.type!==Ru&&$r.type!==lv)t=sye();else{if(pi("++")||pi("--"))throw new Error(nk);if(pi("+")||pi("-")||pi("~")||pi("!"))e=Fu(),t=DO(),t=uJt(e.value,t);else{if(IU("delete")||IU("void")||IU("typeof"))throw new Error(nk);t=sye()}}return t}function oye(e){let t=0;if(e.type!==Ru&&e.type!==lv)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function _Jt(){var e,t,n,r,i,s,o,a,u,l;if(e=$r,u=DO(),r=$r,i=oye(r),i===0)return u;for(r.prec=i,Fu(),t=[e,$r],o=DO(),s=[u,r,o];(i=oye($r))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=tye(a,u,o),s.push(n);r=Fu(),r.prec=i,s.push(r),t.push($r),n=DO(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=tye(s[l-1].value,s[l-2],n),l-=2;return n}function Rb(){var e,t,n;return e=_Jt(),pi("?")&&(Fu(),t=Rb(),Ca(":"),n=Rb(),e=oJt(e,t,n)),e}function uie(){const e=Rb();if(pi(","))throw new Error(nk);return e}function lie(e){Rt=e,$e=0,Ta=Rt.length,$r=null,k5e();const t=uie();if($r.type!==XR)throw new Error("Unexpect token after expression.");return t}var R5e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function N5e(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Me("Missing arguments to clamp function."),o.length>3&&Me("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Me("Missing arguments to if function."),o.length>3&&Me("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function wJt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function D5e(e){e=e||{};const t=e.allowed?fd(e.allowed):{},n=e.forbidden?fd(e.forbidden):{},r=e.constants||R5e,i=(e.functions||N5e)(f),s=e.globalvar,o=e.fieldvar,a=wn(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(mt(p))return p;const m=d[p.type];return m==null&&Me("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:jt(n,m)?Me("Illegal identifier: "+m):jt(r,m)?r[m]:jt(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[wJt(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Me("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=jt(i,m)&&i[m];return y||Me("Unrecognized function: "+m),wn(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const aye=Symbol("vega_selection_getter");function P5e(e){return(!e.getter||!e.getter[aye])&&(e.getter=Kc(e.field),e.getter[aye]=!0),e.getter}const cie="intersect",uye="union",EJt="vlMulti",xJt="vlPoint",lye="or",SJt="and",Kd="_vgsid_",ik=Kc(Kd),TJt="E",CJt="R",AJt="R-E",IJt="R-LE",kJt="R-RE",oL="index:unit";function cye(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=P5e(a)(e),W0(o)&&(o=_a(o)),W0(r[s])&&(r[s]=_a(r[s])),Be(r[s])&&W0(r[s][0])&&(r[s]=r[s].map(_a)),a.type===TJt){if(Be(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===CJt){if(!jw(o,r[s]))return!1}else if(a.type===kJt){if(!jw(o,r[s],!0,!1))return!1}else if(a.type===AJt){if(!jw(o,r[s],!1,!1))return!1}else if(a.type===IJt&&!jw(o,r[s],!1,!0))return!1;return!0}function RJt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[oL]&&r[oL].value:void 0,o=n===cie,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=cye(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=cye(t,l),o^h)return h;return a&&o}const O5e=SS(ik),NJt=O5e.left,DJt=O5e.right;function PJt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[oL]&&r[oL].value:void 0,o=n===cie,a=ik(t),u=NJt(i,a);if(u===i.length||ik(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(DJt(i,a)-u<s.size)return!1}return!0}function OJt(e,t){return e.map(n=>_n(t.fields?{values:t.fields.map(r=>P5e(r)(n.datum))}:{[Kd]:ik(n.datum)},t))}function $Jt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,b=s.length,w=0,E,x;w<b;++w)if(l=s[w],d=l.unit,c=l.fields,f=l.values,c&&f){for(E=0,x=c.length;E<x;++E)h=c[E],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=kU[`${y}_union`],m[d]=v(g,pt(f[E]));n&&(g=a[d]||(a[d]=[]),g.push(pt(f).reduce((T,C,A)=>(T[c[A].field]=C,T),{})))}else h=Kd,p=ik(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[Kd]:p}));if(t=t||uye,o[Kd]?o[Kd]=kU[`${Kd}_${t}`](...Object.values(o[Kd])):Object.keys(o).forEach(T=>{o[T]=Object.keys(o[T]).map(C=>o[T][C]).reduce((C,A)=>C===void 0?A:kU[`${u[T]}_${t}`](C,A))}),s=Object.keys(a),n&&s.length){const T=r?xJt:EJt;o[T]=t===uye?{[lye]:s.reduce((C,A)=>(C.push(...a[A]),C),[])}:{[SJt]:s.map(C=>({[lye]:a[C]}))}}return o}var kU={[`${Kd}_union`]:Sgt,[`${Kd}_intersect`]:Egt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=_a(t[0]),r=_a(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=_a(t[0]),r=_a(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const MJt=":",LJt="@";function fie(e,t,n,r){t[0].type!==Ib&&Me("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&er(t).value,o="unit",a=LJt+o,u=MJt+i;s===cie&&!jt(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),jt(r,u)||(r[u]=n.getData(i).tuplesRef())}function $5e(e){const t=this.context.data[e];return t?t.values.value:[]}function FJt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function BJt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Xc).insert(t)),1}function jJt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const ZR=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},UJt=ZR("format"),M5e=ZR("timeFormat"),zJt=ZR("utcFormat"),VJt=ZR("timeParse"),HJt=ZR("utcParse"),rP=new Date(2e3,0,1);function Y5(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(rP.setYear(2e3),rP.setMonth(e),rP.setDate(t),M5e.call(this,rP,n))}function qJt(e){return Y5.call(this,e,1,"%B")}function WJt(e){return Y5.call(this,e,1,"%b")}function GJt(e){return Y5.call(this,0,2+e,"%A")}function YJt(e){return Y5.call(this,0,2+e,"%a")}const KJt=":",XJt="@",cW="%",L5e="$";function die(e,t,n,r){t[0].type!==Ib&&Me("First argument to data functions must be a string literal.");const i=t[0].value,s=KJt+i;if(!jt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function QJt(e,t,n,r){t[0].type!==Ib&&Me("First argument to indata must be a string literal."),t[1].type!==Ib&&Me("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=XJt+s;jt(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function ru(e,t,n,r){if(t[0].type===Ib)fye(n,r,t[0].value);else for(e in n.scales)fye(n,r,e)}function fye(e,t,n){const r=cW+n;if(!jt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function yp(e,t){if(wn(e))return e;if(mt(e)){const n=t.scales[e];return n&&xqt(n.value)?n.value:void 0}}function JJt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=ru,n._range=ru,n._scale=ru;const r=i=>"_["+(i.type===Ib?rt(cW+i.value):rt(cW)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function hie(e,t){return function(n,r,i){if(n){const s=yp(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const ZJt=hie("area",Lbt),eZt=hie("bounds",Ubt),tZt=hie("centroid",Gbt);function nZt(e,t){const n=yp(e,(t||this).context);return n&&n.scale()}function rZt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function pie(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function iZt(){return pie(this.context.dataflow,"warn",arguments)}function sZt(){return pie(this.context.dataflow,"info",arguments)}function oZt(){return pie(this.context.dataflow,"debug",arguments)}function RU(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function fW(e){const t=ay(e),n=RU(t.r),r=RU(t.g),i=RU(t.b);return .2126*n+.7152*r+.0722*i}function aZt(e,t){const n=fW(e),r=fW(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function uZt(){const e=[].slice.call(arguments);return e.unshift({}),_n(...e)}function F5e(e,t){return e===t||e!==e&&t!==t?!0:Be(e)?Be(t)&&e.length===t.length?lZt(e,t):!1:gt(e)&&gt(t)?B5e(e,t):!1}function lZt(e,t){for(let n=0,r=e.length;n<r;++n)if(!F5e(e[n],t[n]))return!1;return!0}function B5e(e,t){for(const n in e)if(!F5e(e[n],t[n]))return!1;return!0}function dye(e){return t=>B5e(e,t)}function cZt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?Xc:Be(n)||v5(n)?n:dye(n),c.remove(f)),t&&c.insert(t),r&&(f=dye(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function fZt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function dZt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const hye={};function hZt(e,t){const n=hye[t]||(hye[t]=Kc(t));return Be(e)?e.map(n):n(e)}function mie(e){return Be(e)||ArrayBuffer.isView(e)?e:null}function gie(e){return mie(e)||(mt(e)?e:null)}function pZt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return mie(e).join(...n)}function mZt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return gie(e).indexOf(...n)}function gZt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return gie(e).lastIndexOf(...n)}function yZt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return gie(e).slice(...n)}function vZt(e,t,n){return wn(n)&&Me("Function argument passed to replace."),String(e).replace(t,n)}function bZt(e){return mie(e).slice().reverse()}function _Zt(e,t,n){return jne(e||0,t||0,n||0)}function wZt(e,t){const n=yp(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function EZt(e,t){const n=yp(e,(t||this).context);return n?n.copy():void 0}function xZt(e,t){const n=yp(e,(t||this).context);return n?n.domain():[]}function SZt(e,t,n){const r=yp(e,(n||this).context);return r?Be(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function TZt(e,t){const n=yp(e,(t||this).context);return n&&n.range?n.range():[]}function CZt(e,t,n){const r=yp(e,(n||this).context);return r?r(t):void 0}function AZt(e,t,n,r,i){e=yp(e,(i||this).context);const s=kFe(t,n);let o=e.domain(),a=o[0],u=er(o),l=Ra;return u-a?l=yFe(e,a,u):e=(e.interpolator?br("sequential")().interpolator(e.interpolator()):br("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==er(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function IZt(e,t,n){const r=yp(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function kZt(e){let t=null;return function(n){return n?JI(n,t=t||Ox(e)):e}}const j5e=e=>e.data;function U5e(e,t){const n=$5e.call(t,e);return n.root&&n.root.lookup||{}}function RZt(e,t,n){const r=U5e(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(j5e):void 0}function NZt(e,t){const n=U5e(e,this)[t];return n?n.ancestors().map(j5e):void 0}const z5e=()=>typeof window<"u"&&window||null;function DZt(){const e=z5e();return e?e.screen:{}}function PZt(){const e=z5e();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function OZt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function V5e(e,t,n){if(!e)return[];const[r,i]=e,s=new As().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return C4e(o,s,$Zt(t))}function $Zt(e){let t=null;if(e){const n=pt(e.marktype),r=pt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function MZt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=pt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function LZt(e){return pt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function FZt(e,t,n){const{x:r,y:i,mark:s}=n,o=new As().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),V5e([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>BZt(u.x,u.y,t))}function BZt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const sk={random(){return Jc()},cumulativeNormal:x5,cumulativeLogNormal:one,cumulativeUniform:cne,densityNormal:tne,densityLogNormal:sne,densityUniform:lne,quantileNormal:S5,quantileLogNormal:ane,quantileUniform:fne,sampleNormal:E5,sampleLogNormal:ine,sampleUniform:une,isArray:Be,isBoolean:uv,isDate:W0,isDefined(e){return e!==void 0},isNumber:dr,isObject:gt,isRegExp:ALe,isString:mt,isTuple:v5,isValid(e){return e!=null&&e===e},toBoolean:Bte,toDate(e){return jte(e)},toNumber:_a,toString:Ute,indexof:mZt,join:pZt,lastindexof:gZt,replace:vZt,reverse:bZt,slice:yZt,flush:TLe,lerp:ILe,merge:uZt,pad:NLe,peek:er,pluck:hZt,span:PR,inrange:jw,truncate:DLe,rgb:ay,lab:X$,hcl:Q$,hsl:Y$,luminance:fW,contrast:aZt,sequence:Uu,format:UJt,utcFormat:zJt,utcParse:HJt,utcOffset:WLe,utcSequence:KLe,timeFormat:M5e,timeParse:VJt,timeOffset:qLe,timeSequence:YLe,timeUnitSpecifier:OLe,monthFormat:qJt,monthAbbrevFormat:WJt,dayFormat:GJt,dayAbbrevFormat:YJt,quarter:wLe,utcquarter:ELe,week:MLe,utcweek:BLe,dayofyear:$Le,utcdayofyear:FLe,warn:iZt,info:sZt,debug:oZt,extent(e){return Yh(e)},inScope:rZt,intersect:V5e,clampRange:xLe,pinchDistance:fZt,pinchAngle:dZt,screen:DZt,containerSize:OZt,windowSize:PZt,bandspace:_Zt,setdata:BJt,pathShape:kZt,panLinear:yLe,panLog:vLe,panPow:bLe,panSymlog:_Le,zoomLinear:Pte,zoomLog:Ote,zoomPow:B3,zoomSymlog:$te,encode:jJt,modify:cZt,lassoAppend:MZt,lassoPath:LZt,intersectLasso:FZt},jZt=["view","item","group","xy","x","y"],UZt="event.vega.",H5e="this.",yie={},q5e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${rt(L5e+e)}]`,functions:zZt,constants:R5e,visitors:yie},dW=D5e(q5e);function zZt(e){const t=N5e(e);jZt.forEach(n=>t[n]=UZt+n);for(const n in sk)t[n]=H5e+n;return _n(t,JJt(e,sk,yie)),t}function gs(e,t,n){return arguments.length===1?sk[e]:(sk[e]=t,n&&(yie[e]=n),dW&&(dW.functions[e]=H5e+e),this)}gs("bandwidth",wZt,ru);gs("copy",EZt,ru);gs("domain",xZt,ru);gs("range",TZt,ru);gs("invert",SZt,ru);gs("scale",CZt,ru);gs("gradient",AZt,ru);gs("geoArea",ZJt,ru);gs("geoBounds",eZt,ru);gs("geoCentroid",tZt,ru);gs("geoShape",IZt,ru);gs("geoScale",nZt,ru);gs("indata",FJt,QJt);gs("data",$5e,die);gs("treePath",RZt,die);gs("treeAncestors",NZt,die);gs("vlSelectionTest",RJt,fie);gs("vlSelectionIdTest",PJt,fie);gs("vlSelectionResolve",$Jt,fie);gs("vlSelectionTuples",OJt);function Xh(e,t){const n={};let r;try{e=mt(e)?e:rt(e)+"",r=lie(e)}catch{Me("Expression parse error: "+e)}r.visit(s=>{if(s.type!==x5e)return;const o=s.callee.name,a=q5e.visitors[o];a&&a(o,s.arguments,t,n)});const i=dW(r);return i.globals.forEach(s=>{const o=L5e+s;!jt(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:_n({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function VZt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const HZt=fd(["rule"]),pye=fd(["group","image","rect"]);function qZt(e,t){let n="";return HZt[t]||(e.x2&&(e.x?(pye[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(pye[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function vie(e){return(e+"").toLowerCase()}function WZt(e){return vie(e)==="operator"}function GZt(e){return vie(e)==="collect"}function gC(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function YZt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var KZt={operator:(e,t)=>gC(e,["_"],t.code),parameter:(e,t)=>gC(e,["datum","_"],t.code),event:(e,t)=>gC(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return gC(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+rt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=qZt(r,n),i+="return m;",gC(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(rt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),YZt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function XZt(e){const t=this;WZt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function QZt(e){const t=this;if(e.params){const n=t.get(e.id);n||Me("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function JZt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Be(i)?i.map(s=>mye(s,n,t)):mye(i,n,t)}return t}function mye(e,t,n){if(!e||!gt(e))return e;for(let r=0,i=gye.length,s;r<i;++r)if(s=gye[r],jt(e,s.key))return s.parse(e,t,n);return e}var gye=[{key:"$ref",parse:ZZt},{key:"$key",parse:ten},{key:"$expr",parse:een},{key:"$field",parse:nen},{key:"$encode",parse:ien},{key:"$compare",parse:ren},{key:"$context",parse:sen},{key:"$subflow",parse:oen},{key:"$tupleid",parse:aen}];function ZZt(e,t){return t.get(e.$ref)||Me("Operator not defined: "+e.$ref)}function een(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=pl(t.parameterExpression(e.$expr),e.$fields))}function ten(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=Fte(e.$key,e.$flat,t.expr.codegen))}function nen(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Kc(e.$field,e.$name,t.expr.codegen))}function ren(e,t){const n="c:"+e.$compare+"_"+e.$order,r=pt(e.$compare).map(i=>i&&i.$tupleid?Ft:i);return t.fn[n]||(t.fn[n]=Mte(r,e.$order,t.expr.codegen))}function ien(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=pl(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function sen(e,t){return t}function oen(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function aen(){return Ft}function uen(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Me("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function len(e){var t=this,n=gt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Me("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const cen={skip:!0};function fen(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function den(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],cen)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(Xc).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function W5e(e,t,n,r){return new G5e(e,t,n,r)}function G5e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||KZt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function yye(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}G5e.prototype=yye.prototype={fork(){const e=new yye(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),GZt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[vie(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:VZt,parseOperator:XZt,parseOperatorParameters:QZt,parseParameters:JZt,parseStream:uen,parseUpdate:len,getState:fen,setState:den};function hen(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),Y5e(t,e.description()))}function Y5e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function pen(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const NU="default";function men(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:NU,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?mt(i)?i:i.user:NU,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return mt(r)||(i=r.item,r=r.user),hW(e,r&&r!==NU?r:i||r),i},{cursor:t})}function hW(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function aL(e,t){var n=e._runtime.data;return jt(n,t)||Me("Unrecognized data set: "+t),n[t]}function gen(e,t){return arguments.length<2?aL(this,e).values.value:K5.call(this,e,h_().remove(Xc).insert(t))}function K5(e,t){m6e(t)||Me("Second argument to changes must be a changeset.");const n=aL(this,e);return n.modified=!0,this.pulse(n.input,t)}function yen(e,t){return K5.call(this,e,h_().insert(t))}function ven(e,t){return K5.call(this,e,h_().remove(t))}function K5e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function X5e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function X5(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function ben(e){var t=X5(e),n=K5e(e),r=X5e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function _en(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=X5(e),o=t.changedTouches?t.changedTouches[0]:t,s=U5(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=wen(e,n,s),t}function wen(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;mt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Na(e),item:Na(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const vye="view",Een="timer",xen="window",Sen={trap:!1};function Ten(e){const t=_n({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{Be(r[s])&&(r[s]=fd(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function Q5e(e,t,n,r){e._eventListeners.push({type:n,sources:pt(t),handler:r})}function Cen(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function iP(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||gt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function Aen(e,t,n){var r=this,i=new w5(n),s=function(l,c){r.runAsync(null,()=>{e===vye&&Cen(r,t)&&l.preventDefault(),i.receive(_en(r,l,c))})},o;if(e===Een)iP(r,"timer",t)&&r.timer(s,t);else if(e===vye)iP(r,"view",t)&&r.addEventListener(t,s,Sen);else if(e===xen?iP(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&iP(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);Q5e(r,o,t,s)}return i}function bye(e){return e.item}function _ye(e){return e.item.mark.source}function wye(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Ien(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",bye),_ye,wye(e)),this.on(this.events("view","pointerout",bye),_ye,wye(t)),this}function ken(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function zl(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const Ren="vega-bind",Nen="vega-bind-name",Den="vega-bind-radio";function Pen(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=Lte(r.debounce,i.update))),(r.input==null&&r.element?Oen:Men)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function Oen(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),Q5e(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent($en(i))}}function $en(e){return typeof Event<"u"?new Event(e):{type:e}}function Men(e,t,n,r){const i=r.signal(n.signal),s=zl("div",{class:Ren}),o=n.input==="radio"?s:s.appendChild(zl("label"));o.appendChild(zl("span",{class:Nen},n.name||n.signal)),t.appendChild(s);let a=Len;switch(n.input){case"checkbox":a=Fen;break;case"select":a=Ben;break;case"radio":a=jen;break;case"range":a=Uen;break}a(e,o,n,i)}function Len(e,t,n,r){const i=zl("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function Fen(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=zl("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function Ben(e,t,n,r){const i=zl("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};uL(o,r)&&(u.selected=!0),i.appendChild(zl("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(uL(n.options[a],o)){i.selectedIndex=a;return}}}function jen(e,t,n,r){const i=zl("span",{class:Den}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};uL(o,r)&&(u.checked=!0);const l=zl("input",u);l.addEventListener("change",()=>e.update(o));const c=zl("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)uL(a[l].value,o)&&(a[l].checked=!0)}}function Uen(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||oy(s,i,100),a=zl("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=zl("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function uL(e,t){return e===t||e+""==t+""}function J5e(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,K5e(e),X5e(e),X5(e),i,s).background(e.background())}function bie(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function zen(e,t,n,r){const i=new r(e.loader(),bie(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,X5(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function Ven(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=z5(r);e=n._el=e?DU(n,e,!0):null,hen(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||KR,a=e?s.renderer:s.headless;return n._renderer=a?J5e(n,n._renderer,e,a):null,n._handler=zen(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=DU(n,t,!0):e.appendChild(zl("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=DU(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{Pen(n,u.element||t,u)})),n}function DU(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const yC=e=>+e||0,Hen=e=>({top:e,bottom:e,left:e,right:e});function Eye(e){return gt(e)?{top:yC(e.top),bottom:yC(e.bottom),left:yC(e.left),right:yC(e.right)}:Hen(yC(e))}async function _ie(e,t,n,r){const i=z5(t),s=i&&i.headless;return s||Me("Unrecognized renderer type: "+t),await e.runAsync(),J5e(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function qen(e,t){e!==b0.Canvas&&e!==b0.SVG&&e!==b0.PNG&&Me("Unrecognized image type: "+e);const n=await _ie(this,e,t);return e===b0.SVG?Wen(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Wen(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function Gen(e,t){return(await _ie(this,b0.Canvas,e,t)).canvas()}async function Yen(e){return(await _ie(this,b0.SVG,e)).svg()}function Ken(e,t,n){return W5e(e,Rx,sk,n).parse(t)}function Xen(e){var t=this._runtime.scales;return jt(t,e)||Me("Unrecognized scale or projection: "+e),t[e].value}var Z5e="width",eBe="height",wie="padding",xye={skip:!0};function tBe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===wie?r.left+r.right:0)}function nBe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===wie?r.top+r.bottom:0)}function Qen(e){var t=e._signals,n=t[Z5e],r=t[eBe],i=t[wie];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=tBe(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=nBe(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function Jen(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(Z5e,n,xye),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(eBe,r,xye),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function Zen(e){return this._runtime.getState(e||{data:etn,signals:ttn,recurse:!0})}function etn(e,t){return t.modified&&Be(t.input.value)&&!e.startsWith("_:vega:_")}function ttn(e,t){return!(e==="parent"||t instanceof Rx.proxy)}function ntn(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function rtn(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(Xyt(n,t))}function itn(e,t,n,r){const i=e.element();i&&i.setAttribute("title",stn(r))}function stn(e){return e==null?"":Be(e)?rBe(e):gt(e)&&!W0(e)?otn(e):e+""}function otn(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Be(n)?rBe(n):iBe(n))}).join(`
`)}function rBe(e){return"["+e.map(iBe).join(", ")+"]"}function iBe(e){return Be(e)?"[]":gt(e)&&!W0(e)?"{}":e}function atn(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function sBe(e,t){const n=this;if(t=t||{},xE.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=_n({},e.locale,t.locale);n.locale(s6e(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||b0.Canvas,n._scenegraph=new ZFe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||itn,n._redraw=!0,n._handler=new KR().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Ten(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=Ken(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:_n({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=tBe(n,n._width),n._viewHeight=nBe(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Qen(n),pen(n),men(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function sP(e,t){return jt(e._signals,t)?e._signals[t]:Me("Unrecognized signal name: "+rt(t))}function oBe(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Sye(e,t,n,r){let i=oBe(n,r);return i||(i=bie(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function Tye(e,t,n){const r=oBe(t,n);return r&&t._targets.remove(r),e}lt(sBe,xE,{async evaluate(e,t,n){if(await xE.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,ben(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&bO(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&Y5e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=sP(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Eye(e)):Eye(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(z5(e)||Me("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(xE.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(sP(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Jen,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=bie(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Sye(this,e,sP(this,e),t)},removeSignalListener(e,t){return Tye(this,sP(this,e),t)},addDataListener(e,t){return Sye(this,e,aL(this,e).values,t)},removeDataListener(e,t){return Tye(this,aL(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=hW(this,null);this._globalCursor=!!e,t&&hW(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:rtn,events:Aen,finalize:ken,hover:Ien,data:gen,change:K5,insert:yen,remove:ven,scale:Xen,initialize:Ven,toImageURL:qen,toCanvas:Gen,toSVG:Yen,getState:Zen,setState:ntn,_watchPixelRatio:atn});const utn="view",lL="[",cL="]",aBe="{",uBe="}",ltn=":",lBe=",",ctn="@",ftn=">",dtn=/[[\]{}]/,htn={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let cBe,fBe;function cv(e,t,n){return cBe=t||utn,fBe=n||htn,dBe(e.trim()).map(pW)}function ptn(e){return fBe[e]}function g2(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function dBe(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=g2(e,i,lBe,lL+aBe,cL+uBe),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function pW(e){return e[0]==="["?mtn(e):gtn(e)}function mtn(e){const t=e.length;let n=1,r;if(n=g2(e,n,cL,lL,cL),n===t)throw"Empty between selector: "+e;if(r=dBe(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==ftn)throw"Expected '>' after between selector: "+e;r=r.map(pW);const i=pW(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function gtn(e){const t={source:cBe},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===uBe){if(a=e.lastIndexOf(aBe),a>=0){try{r=ytn(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===ctn&&(i=++a),u=g2(e,a,ltn),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=g2(e,a,lL),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=g2(e,a,cL),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==lL)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||dtn.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):ptn(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function ytn(e){const t=e.split(lBe);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function vtn(e){return gt(e)?e:{type:e||"pad"}}const vC=e=>+e||0,btn=e=>({top:e,bottom:e,left:e,right:e});function _tn(e){return gt(e)?e.signal?e:{top:vC(e.top),bottom:vC(e.bottom),left:vC(e.left),right:vC(e.right)}:btn(vC(e))}const fo=e=>gt(e)&&!Be(e)?_n({},e):{value:e};function Cye(e,t,n,r){return n!=null?(gt(n)&&!Be(n)||Be(n)&&n.length&&gt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Yo(e,t,n){for(const r in t)Cye(e,r,t[r]);for(const r in n)Cye(e,r,n[r],"update")}function lT(e,t,n){for(const r in t)n&&jt(n,r)||(e[r]=_n(e[r]||{},t[r]));return e}function yw(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const Eie="mark",xie="frame",Sie="scope",wtn="axis",Etn="axis-domain",xtn="axis-grid",Stn="axis-label",Ttn="axis-tick",Ctn="axis-title",Atn="legend",Itn="legend-band",ktn="legend-entry",Rtn="legend-gradient",hBe="legend-label",Ntn="legend-symbol",Dtn="legend-title",Ptn="title",Otn="title-text",$tn="title-subtitle";function Mtn(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!yw(u,e)&&PU(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===xie?i.group:n===Eie?_n({},i.mark,i[t]):null;for(u in c)l=yw(u,e)||(u==="fill"||u==="stroke")&&(yw("fill",e)||yw("stroke",e)),l||PU(s,u,c[u]);pt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)yw(h,e)||PU(s,h,d[h])}),e=_n({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=_n(o,e.enter),a&&(e.update=_n(a,e.update)),e}function PU(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const pBe=e=>mt(e)?rt(e):e.signal?`(${e.signal})`:mBe(e);function Q5(e){if(e.gradient!=null)return Ftn(e);let t=e.signal?`(${e.signal})`:e.color?Ltn(e.color):e.field!=null?mBe(e.field):e.value!==void 0?rt(e.value):void 0;return e.scale!=null&&(t=Btn(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${PO(e.exponent)})`),e.mult!=null&&(t+=`*${PO(e.mult)}`),e.offset!=null&&(t+=`+${PO(e.offset)}`),e.round&&(t=`round(${t})`),t}const oP=(e,t,n,r)=>`(${e}(${[t,n,r].map(Q5).join(",")})+'')`;function Ltn(e){return e.c?oP("hcl",e.h,e.c,e.l):e.h||e.s?oP("hsl",e.h,e.s,e.l):e.l||e.a?oP("lab",e.l,e.a,e.b):e.r||e.g||e.b?oP("rgb",e.r,e.g,e.b):null}function Ftn(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:rt(n));for(;t.length&&er(t)==null;)t.pop();return t.unshift(pBe(e.gradient)),`gradient(${t.join(",")})`}function PO(e){return gt(e)?"("+Q5(e)+")":e}function mBe(e){return gBe(gt(e)?e:{datum:e})}function gBe(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Me("Invalid field reference: "+rt(e));return e.signal||(r=mt(r)?pp(r).map(rt).join("]["):gBe(r)),t+"["+r+"]"}function Btn(e,t){const n=pBe(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+PO(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function jtn(e){let t="";return e.forEach(n=>{const r=Q5(n);t+=n.test?`(${n.test})?${r}:`:r}),er(t)===":"&&(t+="null"),t}function yBe(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=Mtn(e,t,n,r,i.config);for(const a in e)o[a]=Utn(e[a],t,s,i);return s}function Utn(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=Vtn(ztn(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function ztn(e){return Be(e)?jtn(e):Q5(e)}function Vtn(e,t,n,r){const i=Xh(e,t);return i.$fields.forEach(s=>r[s]=1),_n(n,i.$params),i.$expr}const Htn="outer",qtn=["value","update","init","react","bind"];function Aye(e,t){Me(e+' for "outer" push: '+rt(t))}function vBe(e,t){const n=e.name;if(e.push===Htn)t.signals[n]||Aye("No prior signal definition",n),qtn.forEach(r=>{e[r]!==void 0&&Aye("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function mW(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function J5(e,t,n,r){return new mW(e,t,n,r)}function fL(e,t){return J5("operator",e,t)}function Lt(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function ok(e,t){return t?{$field:e,$name:t}:{$field:e}}const gW=ok("key");function Iye(e,t){return{$compare:e,$order:t}}function Wtn(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const Gtn="ascending",Ytn="descending";function Ktn(e){return gt(e)?(e.order===Ytn?"-":"+")+Z5(e.op,e.field):""}function Z5(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const Tie="scope",yW="view";function zs(e){return e&&e.signal}function Xtn(e){return e&&e.expr}function OO(e){if(zs(e))return!0;if(gt(e)){for(const t in e)if(OO(e[t]))return!0}return!1}function Nf(e,t){return e??t}function H1(e){return e&&e.signal||e}const kye="timer";function ak(e,t){return(e.merge?Jtn:e.stream?Ztn:e.type?enn:Me("Invalid stream specification: "+rt(e)))(e,t)}function Qtn(e){return e===Tie?yW:e||yW}function Jtn(e,t){const n=e.merge.map(i=>ak(i,t)),r=Cie({merge:n},e,t);return t.addStream(r).id}function Ztn(e,t){const n=ak(e.stream,t),r=Cie({stream:n},e,t);return t.addStream(r).id}function enn(e,t){let n;e.type===kye?(n=t.event(kye,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(Qtn(e.source),e.type);const r=Cie({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function Cie(e,t,n){let r=t.between;return r&&(r.length!==2&&Me('Stream "between" parameter must have 2 entries: '+rt(t)),e.between=[ak(r[0],n),ak(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(tnn(t.marktype,t.markname,t.markrole)),t.source===Tie&&r.push("inScope(event.item)"),r.length&&(e.filter=Xh("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function tnn(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const nnn={code:"_.$value",ast:{type:"Identifier",value:"value"}};function rnn(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Me("Signal update missing events specification."),mt(s)&&(s=cv(s,t.isSubscope()?Tie:yW)),s=pt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[snn(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Me("Signal encode and update are mutually exclusive."),o="encode(item(),"+rt(r)+")"),i.update=mt(o)?Xh(o,t):o.expr!=null?Xh(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:nnn,$params:{$value:t.signalRef(o.signal)}}:Me("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(_n(inn(u,t),i)))}function inn(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):ak(e,t)}}function snn(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function onn(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Me("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Xh(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>rnn(i,t,n.id))}const Wr=e=>(t,n,r)=>J5(e,n,t||void 0,r),bBe=Wr("aggregate"),ann=Wr("axisticks"),_Be=Wr("bound"),Ed=Wr("collect"),Rye=Wr("compare"),unn=Wr("datajoin"),wBe=Wr("encode"),lnn=Wr("expression"),cnn=Wr("facet"),fnn=Wr("field"),dnn=Wr("key"),hnn=Wr("legendentries"),pnn=Wr("load"),mnn=Wr("mark"),gnn=Wr("multiextent"),ynn=Wr("multivalues"),vnn=Wr("overlap"),bnn=Wr("params"),EBe=Wr("prefacet"),_nn=Wr("projection"),wnn=Wr("proxy"),Enn=Wr("relay"),xBe=Wr("render"),xnn=Wr("scale"),g_=Wr("sieve"),Snn=Wr("sortitems"),SBe=Wr("viewlayout"),Tnn=Wr("values");let Cnn=0;const TBe={min:"min",max:"max",count:"sum"};function Ann(e,t){const n=e.type||"linear";fFe(n)||Me("Unrecognized scale type: "+rt(n)),t.addScale(e.name,{type:n,domain:void 0})}function Inn(e,t){const n=t.getScale(e.name).params;let r;n.domain=CBe(e.domain,e,t),e.range!=null&&(n.range=IBe(e,t,n)),e.interpolate!=null&&Fnn(e.interpolate,n),e.nice!=null&&(n.nice=Lnn(e.nice,t)),e.bins!=null&&(n.bins=Mnn(e.bins,t));for(r in e)jt(n,r)||r==="name"||(n[r]=Mc(e[r],t))}function Mc(e,t){return gt(e)?e.signal?t.signalRef(e.signal):Me("Unsupported object: "+rt(e)):e}function $O(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Mc(n,t))}function eB(e){Me("Can not find data set: "+rt(e))}function CBe(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Me("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Be(e)?knn:e.fields?Nnn:Rnn)(e,t,n)}function knn(e,t,n){return e.map(r=>Mc(r,n))}function Rnn(e,t,n){const r=n.getData(e.data);return r||eB(e.data),Px(t.type)?r.valuesRef(n,e.field,ABe(e.sort,!1)):pFe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function Nnn(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=mt(o)?{data:r,field:o}:Be(o)||o.signal?Dnn(o,n):o,s.push(o),s),[]);return(Px(t.type)?Pnn:pFe(t.type)?Onn:$nn)(e,n,i)}function Dnn(e,t){const n="_:vega:_"+Cnn++,r=Ed({});if(Be(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+rt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,g_({})]),{data:n,field:"data"}}function Pnn(e,t,n){const r=ABe(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||eB(l.data),c.countsRef(t,l.field,r)}),a={groupby:gW,pulse:o};r&&(i=r.op||"count",s=r.field?Z5(i,r.field):"count",a.ops=[TBe[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(bBe(a));const u=t.add(Ed({pulse:Lt(i)}));return s=t.add(Tnn({field:gW,sort:t.sortRef(r),pulse:Lt(u)})),Lt(s)}function ABe(e,t){return e&&(!e.field&&!e.op?gt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Me("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!TBe[e.op]&&Me("Multiple domain scales can not be sorted using "+e.op)),e}function Onn(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||eB(i.data),s.domainRef(t,i.field)});return Lt(t.add(ynn({values:r})))}function $nn(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||eB(i.data),s.extentRef(t,i.field)});return Lt(t.add(gnn({extents:r})))}function Mnn(e,t){return e.signal||Be(e)?$O(e,t):t.objectProperty(e)}function Lnn(e,t){return e.signal?t.signalRef(e.signal):gt(e)?{interval:Mc(e.interval),step:Mc(e.step)}:Mc(e)}function Fnn(e,t){t.interpolate=Mc(e.type||e),e.gamma!=null&&(t.interpolateGamma=Mc(e.gamma))}function IBe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(mt(i)){if(r&&jt(r,i))return e=_n({},e,{range:r[i]}),IBe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=Px(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Me("Unrecognized scale range value: "+rt(i))}else if(i.scheme){n.scheme=Be(i.scheme)?$O(i.scheme,t):Mc(i.scheme,t),i.extent&&(n.schemeExtent=$O(i.extent,t)),i.count&&(n.schemeCount=Mc(i.count,t));return}else if(i.step){n.rangeStep=Mc(i.step,t);return}else{if(Px(e.type)&&!Be(i))return CBe(i,e,t);Be(i)||Me("Unsupported range type: "+rt(i))}return i.map(s=>(Be(s)?$O:Mc)(s,t))}function Bnn(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=vW(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=vW(n[i],i,t));t.addProjection(e.name,r)}function vW(e,t,n){return Be(e)?e.map(r=>vW(r,t,n)):gt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Me("Unsupported parameter object: "+rt(e)):e}const xd="top",cT="left",fT="right",Ny="bottom",kBe="center",jnn="vertical",Unn="start",znn="middle",Vnn="end",bW="index",Aie="label",Hnn="offset",Fx="perc",qnn="perc2",Uc="value",eN="guide-label",Iie="guide-title",Wnn="group-title",Gnn="group-subtitle",Nye="symbol",MO="gradient",_W="discrete",wW="size",Ynn="shape",Knn="fill",Xnn="stroke",Qnn="strokeWidth",Jnn="strokeDash",Znn="opacity",kie=[wW,Ynn,Knn,Xnn,Qnn,Jnn,Znn],tN={name:1,style:1,interactive:1},ir={value:0},zc={value:1},tB="group",RBe="rect",Rie="rule",ern="symbol",y_="text";function uk(e){return e.type=tB,e.interactive=e.interactive||!1,e}function ml(e,t){const n=(r,i)=>Nf(e[r],Nf(t[r],i));return n.isVertical=r=>jnn===Nf(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Nf(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Nf(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Nf(e.columns,Nf(t.columns,+n.isVertical(!0))),n}function NBe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function trn(e,t,n){const r=t.config.style[n];return r&&r[e]}function nB(e,t,n){return`item.anchor === '${Unn}' ? ${e} : item.anchor === '${Vnn}' ? ${t} : ${n}`}const Nie=nB(rt(cT),rt(fT),rt(kBe));function nrn(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},gt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function DBe(e,t){return t?e?gt(e)?Object.assign({},e,{offset:DBe(e.offset,t)}):{value:e,offset:t}:t:e}function rc(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=lT(e.encode,t,tN)):e.interactive=!1,e}function rrn(e,t,n,r){const i=ml(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:ir,x:ir,y:ir,width:fo(f),height:fo(d)},update:_n({},u,{opacity:zc,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:ir}};return Yo(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),rc({type:RBe,role:Rtn,encode:h},r)}function irn(e,t,n,r,i){const s=ml(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:ir,fill:{scale:t,field:Uc}};p[l]={signal:h+"datum."+Fx,mult:u},p[c]=ir,p[f]={signal:h+"datum."+qnn,mult:u},p[d]=fo(a);const m={enter:p,update:_n({},p,{opacity:zc}),exit:{opacity:ir}};return Yo(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),rc({type:RBe,role:Itn,key:Uc,from:i,encode:m},r)}const srn=`datum.${Fx}<=0?"${cT}":datum.${Fx}>=1?"${fT}":"${kBe}"`,orn=`datum.${Fx}<=0?"${Ny}":datum.${Fx}>=1?"${xd}":"${znn}"`;function Dye(e,t,n,r){const i=ml(e,t),s=i.isVertical(),o=fo(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:ir},update:c={opacity:zc,text:{field:Aie}},exit:{opacity:ir}};return Yo(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Nf(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:orn},f="y",d="x",h="1-"):(l.align=c.align={signal:srn},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+Fx,mult:a},l[d]=c[d]=o,o.offset=Nf(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+bW}:void 0,rc({type:y_,role:hBe,style:eN,key:Uc,from:r,encode:p,overlap:u},n)}function arn(e,t,n,r,i){const s=ml(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${Hnn} : datum.${wW}`,h=l?fo(l):{field:wW},p=`datum.${bW}`,m=`max(1, ${i})`;let g,y,v,b,w;h.mult=.5,g={enter:y={opacity:ir,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:zc,x:y.x,y:y.y},exit:{opacity:ir}};let E=null,x=null;e.fill||(E=t.symbolBaseFillColor,x=t.symbolBaseStrokeColor),Yo(g,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",x),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),kie.forEach(k=>{e[k]&&(v[k]=y[k]={scale:e[k],field:Uc})});const T=rc({type:ern,role:Ntn,key:Uc,from:f,clip:l?!0:void 0,encode:g},n.symbols),C=fo(c);C.offset=s("labelOffset"),g={enter:y={opacity:ir,x:{signal:d,offset:C},y:h},update:v={opacity:zc,text:{field:Aie},x:y.x,y:y.y},exit:{opacity:ir}},Yo(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const A=rc({type:y_,role:hBe,style:eN,key:Uc,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:ir,height:l?fo(l):ir,opacity:ir},exit:{opacity:ir},update:v={opacity:zc,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(b=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,w={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,w={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:bW}},uk({role:Sie,from:r,encode:lT(g,o,tN),marks:[T,A],name:u,interactive:a,sort:w})}function urn(e,t){const n=ml(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const Die='item.orient === "left"',Pie='item.orient === "right"',rB=`(${Die} || ${Pie})`,lrn=`datum.vgrad && ${rB}`,crn=nB('"top"','"bottom"','"middle"'),frn=nB('"right"','"left"','"center"'),drn=`datum.vgrad && ${Pie} ? (${frn}) : (${rB} && !(datum.vgrad && ${Die})) ? "left" : ${Nie}`,hrn=`item._anchor || (${rB} ? "middle" : "start")`,prn=`${lrn} ? (${Die} ? -90 : 90) : 0`,mrn=`${rB} ? (datum.vgrad ? (${Pie} ? "bottom" : "top") : ${crn}) : "top"`;function grn(e,t,n,r){const i=ml(e,t),s={enter:{opacity:ir},update:{opacity:zc,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:ir}};return Yo(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:hrn},angle:{signal:prn},align:{signal:drn},baseline:{signal:mrn},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),rc({type:y_,role:Dtn,style:Iie,from:r,encode:s},n)}function yrn(e,t){let n;return gt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Pye(e.path)+")":e.sphere&&(n="geoShape("+Pye(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Pye(e){return gt(e)&&e.signal?e.signal:rt(e)}function PBe(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===tB?Sie:t||Eie}function vrn(e){return{marktype:e.type,name:e.name||void 0,role:e.role||PBe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function brn(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function Oie(e,t){const n=v6e(e.type);n||Me("Unrecognized transform type: "+rt(e.type));const r=J5(n.type.toLowerCase(),null,OBe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function OBe(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=_rn(o,t,n)}return r}function _rn(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return wrn(e,t,n);if(i===void 0){e.required&&Me("Missing required "+rt(t.type)+" parameter: "+rt(e.name));return}else{if(r==="param")return Ern(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!zs(i)?i.map(s=>Oye(e,s,n)):Oye(e,i,n)}function Oye(e,t,n){const r=e.type;if(zs(t))return Mye(r)?Me("Expression references can not be signals."):OU(r)?n.fieldRef(t):Lye(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||OU(r);return i&&xrn(t)?n.exprRef(t.expr,t.as):i&&Srn(t)?ok(t.field,t.as):Mye(r)?Xh(t,n):Trn(r)?Lt(n.getData(t).values):OU(r)?ok(t):Lye(r)?n.compareRef(t):t}}function wrn(e,t,n){return mt(t.from)||Me('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function Ern(e,t,n){const r=t[e.name];return e.array?(Be(r)||Me("Expected an array of sub-parameters. Instead: "+rt(r)),r.map(i=>$ye(e,i,n))):$ye(e,r,n)}function $ye(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Me("Unsupported parameter: "+rt(t));const s=_n(OBe(i,t,n),i.key);return Lt(n.add(bnn(s)))}const xrn=e=>e&&e.expr,Srn=e=>e&&e.field,Trn=e=>e==="data",Mye=e=>e==="expr",OU=e=>e==="field",Lye=e=>e==="compare";function Crn(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Me("Only group marks can be faceted."),r.field!=null?o=a=LO(r,n):(e.data?a=Lt(n.getData(e.data).aggregate):(s=Oie(_n({type:"aggregate",groupby:pt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=LO(r,n),o=a=Lt(n.add(s))),i=n.keyRef(r.groupby,!0))):o=Lt(n.add(Ed(null,[{}]))),o||(o=LO(e,n)),{key:i,pulse:o,parent:a}}function LO(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Lt(t.getData(e.data).output)}function Nb(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}Nb.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Lt(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new Nb(e,s,i,r,o)};function $Be(e){return mt(e)?e:null}function Fye(e,t,n){const r=Z5(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function bC(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=Ktn(s);let l=$Be(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:gW,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:Lt(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(J5(r,void 0,d)),o&&(t.index[i]=f),c=Lt(f),l!=null&&(a[l]=c)}return c}Nb.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=$Be(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&Fye(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:Lt(r.output)},n&&n.field&&Fye(e,u,n),a=e.add(bBe(u)),o=e.add(Ed({pulse:Lt(a)})),o={agg:a,ref:Lt(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return Lt(this.values)},extentRef(e,t){return bC(e,this,"extent","extent",t,!1)},domainRef(e,t){return bC(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return bC(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return bC(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return bC(e,this,"indata","tupleindex",t,!0,!0)}};function Arn(e,t,n){const r=e.from.facet,i=r.name,s=LO(r,t);let o;r.name||Me("Facet must have a name: "+rt(r)),r.data||Me("Facet must reference a data set: "+rt(r)),r.field?o=t.add(EBe({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(cnn({key:t.keyRef(r.groupby),group:Lt(t.proxy(n.parent)),pulse:s})):Me("Facet must specify groupby or field: "+rt(r));const a=t.fork(),u=a.add(Ed()),l=a.add(g_({pulse:Lt(u)}));a.addData(i,new Nb(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function Irn(e,t,n){const r=t.add(EBe({pulse:n.pulse})),i=t.fork();i.add(g_()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function MBe(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(fL()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=Xh(l,t);u.update=c.$expr,u.params=c.$params}function iB(e,t){const n=PBe(e),r=e.type===tB,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===Sie||n===xie,a,u,l,c,f,d,h;const p=n===Eie||o||i,m=Crn(e.from,r,t);u=t.add(unn({key:m.key||(e.key?ok(e.key):void 0),pulse:m.pulse,clean:!r}));const g=Lt(u);u=l=t.add(Ed({pulse:g})),u=t.add(mnn({markdef:vrn(e),interactive:brn(e.interactive,t),clip:yrn(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Lt(u)}));const y=Lt(u);u=c=t.add(wBe(yBe(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(x=>{const T=Oie(x,t),C=T.metadata;(C.generates||C.changes)&&Me("Mark transforms should not generate new data."),C.nomod||(c.params.mod=!0),T.params.pulse=Lt(u),t.add(u=T)}),e.sort&&(u=t.add(Snn({sort:t.compareRef(e.sort),pulse:Lt(u)})));const v=Lt(u);(i||o)&&(o=t.add(SBe({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=Lt(o));const b=t.add(_Be({mark:y,pulse:d||v}));h=Lt(b),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?Arn(e,t,m):p?Irn(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(b))),s&&(h=krn(s,h,t));const w=t.add(xBe({pulse:h})),E=t.add(g_({pulse:Lt(w)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new Nb(t,l,w,E)),e.on&&e.on.forEach(x=>{(x.insert||x.remove||x.toggle)&&Me("Marks only support modify triggers."),MBe(x,t,f)}))}function krn(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:zs(s)?n.signalRef(s.signal):s,method:zs(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=zs(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return Lt(n.add(vnn(o)))}function Rrn(e,t){const n=t.config.legend,r=e.encode||{},i=ml(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;kie.forEach(b=>e[b]?(l[b]=e[b],c=c||e[b]):0),c||Me("Missing valid scale for legend.");const p=Nrn(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=Lt(t.add(Ed(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=Lt(t.add(hnn(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===MO?(h=[rrn(e,c,n,r.gradient),Dye(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${H1(i.gradientLength())})/100))`)):p===_W?h=[irn(e,c,n,r.gradient,v),Dye(e,n,r.labels,v)]:(f=urn(e,n),h=[arn(e,n,r,v,H1(f.columns))],d.size=Orn(e,t,h[0].marks)),h=[uk({role:ktn,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(grn(e,n,r.title,g)),iB(uk({role:Atn,from:g,encode:lT(Prn(i,e,n),s,tN),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function Nrn(e,t){let n=e.type||Nye;return!e.type&&Drn(e)===1&&(e.fill||e.stroke)&&(n=qne(t)?MO:$q(t)?_W:Nye),n!==MO?n:$q(t)?_W:MO}function Drn(e){return kie.reduce((t,n)=>t+(e[n]?1:0),0)}function Prn(e,t,n){const r={enter:{},update:{}};return Yo(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function Orn(e,t,n){const r=H1(Bye("size",e,n)),i=H1(Bye("strokeWidth",e,n)),s=H1($rn(n[1].encode,t,eN));return Xh(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function Bye(e,t,n){return t[e]?`scale("${t[e]}",datum)`:NBe(e,n[0].encode)}function $rn(e,t,n){return NBe("fontSize",e)||trn("fontSize",t,n)}const Mrn=`item.orient==="${cT}"?-90:item.orient==="${fT}"?90:0`;function Lrn(e,t){e=mt(e)?{text:e}:e;const n=ml(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=Lt(t.add(Ed(null,[l])));return u.push(jrn(e,n,Frn(e),c)),e.subtitle&&u.push(Urn(e,n,r.subtitle,c)),iB(uk({role:Ptn,from:c,encode:Brn(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function Frn(e){const t=e.encode;return t&&t.title||_n({name:e.name,interactive:e.interactive,style:e.style},t)}function Brn(e,t){const n={enter:{},update:{}};return Yo(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:Nie},angle:{signal:Mrn},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),lT(n,t,tN)}function jrn(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Yo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),rc({type:y_,role:Otn,style:Wnn,from:r,encode:o},n)}function Urn(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Yo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),rc({type:y_,role:$tn,style:Gnn,from:r,encode:o},n)}function zrn(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(Oie(r,t))}),e.on&&e.on.forEach(r=>{MBe(r,t,e.name)}),t.addDataPipeline(e.name,Vrn(e,t,n))}function Vrn(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?zs(e.values)||OO(e.format)?(r.push(jye(t,e)),r.push(i=Iv())):r.push(i=Iv({$ingest:e.values,$format:e.format})):e.url?OO(e.url)||OO(e.format)?(r.push(jye(t,e)),r.push(i=Iv())):r.push(i=Iv({$request:e.url,$format:e.format})):e.source&&(i=a=pt(e.source).map(d=>Lt(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=Iv()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=Enn({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,Iv())),i||r.push(Iv()),r.push(g_({})),r}function Iv(e){const t=Ed({},e);return t.metadata={source:!0},t}function jye(e,t){return pnn({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const LBe=e=>e===Ny||e===xd,sB=(e,t,n)=>zs(e)?Grn(e.signal,t,n):e===cT||e===xd?t:n,ho=(e,t,n)=>zs(e)?qrn(e.signal,t,n):LBe(e)?t:n,nd=(e,t,n)=>zs(e)?Wrn(e.signal,t,n):LBe(e)?n:t,FBe=(e,t,n)=>zs(e)?Yrn(e.signal,t,n):e===xd?{value:t}:{value:n},Hrn=(e,t,n)=>zs(e)?Krn(e.signal,t,n):e===fT?{value:t}:{value:n},qrn=(e,t,n)=>BBe(`${e} === '${xd}' || ${e} === '${Ny}'`,t,n),Wrn=(e,t,n)=>BBe(`${e} !== '${xd}' && ${e} !== '${Ny}'`,t,n),Grn=(e,t,n)=>$ie(`${e} === '${cT}' || ${e} === '${xd}'`,t,n),Yrn=(e,t,n)=>$ie(`${e} === '${xd}'`,t,n),Krn=(e,t,n)=>$ie(`${e} === '${fT}'`,t,n),BBe=(e,t,n)=>(t=t!=null?fo(t):t,n=n!=null?fo(n):n,Uye(t)&&Uye(n)?(t=t?t.signal||rt(t.value):null,n=n?n.signal||rt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[_n({test:e},t)].concat(n||[])),Uye=e=>e==null||Object.keys(e).length===1,$ie=(e,t,n)=>({signal:`${e} ? (${Vw(t)}) : (${Vw(n)})`}),Xrn=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${cT}' ? (${Vw(r)}) : `:"")+(n!=null?`${e} === '${Ny}' ? (${Vw(n)}) : `:"")+(i!=null?`${e} === '${fT}' ? (${Vw(i)}) : `:"")+(t!=null?`${e} === '${xd}' ? (${Vw(t)}) : `:"")+"(null)"}),Vw=e=>zs(e)?e.signal:e==null?null:rt(e),Qrn=(e,t)=>t===0?0:zs(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},SE=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Z_(e,t,n,r){let i;if(t&&jt(t,e))return t[e];if(jt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[Iie][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[eN][i]}return null}function zye(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function Jrn(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(zs(o)){const f=zye([n.axisX,n.axisY]),d=zye([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=ho(o,Z_(l,n.axisX,i,r),Z_(l,n.axisY,i,r));u={};for(l of d)u[l]=Xrn(o.signal,Z_(l,n.axisTop,i,r),Z_(l,n.axisBottom,i,r),Z_(l,n.axisLeft,i,r),Z_(l,n.axisRight,i,r))}else a=o===xd||o===Ny?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?_n({},i,a,u,s):i}function Zrn(e,t,n,r){const i=ml(e,t),s=e.orient;let o,a;const u={enter:o={opacity:ir},update:a={opacity:zc},exit:{opacity:ir}};Yo(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=Vye(e,0),c=Vye(e,1);return o.x=a.x=ho(s,l,ir),o.x2=a.x2=ho(s,c),o.y=a.y=nd(s,l,ir),o.y2=a.y2=nd(s,c),rc({type:Rie,role:Etn,from:r,encode:u},n)}function Vye(e,t){return{scale:e.scale,range:t}}function ein(e,t,n,r,i){const s=ml(e,t),o=e.orient,a=e.gridScale,u=sB(o,1,-1),l=tin(e.offset,u);let c,f,d;const h={enter:c={opacity:ir},update:d={opacity:zc},exit:f={opacity:ir}};Yo(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Uc,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=ho(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:_n(m,{mult:u,offset:l});return c.x=d.x=ho(o,p,g),c.y=d.y=nd(o,p,g),c.x2=d.x2=nd(o,y),c.y2=d.y2=ho(o,y),f.x=ho(o,p),f.y=nd(o,p),rc({type:Rie,role:xtn,key:Uc,from:r,encode:h},n)}function tin(e,t){if(t!==1)if(!gt(e))e=zs(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=_n({},e);for(;n.mult!=null;)if(gt(n.mult))n=n.mult=_n({},n.mult);else return n.mult=zs(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function nin(e,t,n,r,i,s){const o=ml(e,t),a=e.orient,u=sB(a,-1,1);let l,c,f;const d={enter:l={opacity:ir},update:f={opacity:zc},exit:c={opacity:ir}};Yo(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=fo(i);h.mult=u;const p={scale:e.scale,field:Uc,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=ho(a,ir,p),f.y2=l.y2=ho(a,h),c.x=ho(a,p),f.x=l.x=nd(a,ir,p),f.x2=l.x2=nd(a,h),c.y=nd(a,p),rc({type:Rie,role:Ttn,key:Uc,from:r,encode:d},n)}function $U(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function rin(e,t,n,r,i,s){const o=ml(e,t),a=e.orient,u=e.scale,l=sB(a,-1,1),c=H1(o("labelFlush")),f=H1(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=fo(i);g.mult=l,g.offset=fo(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:Uc,band:.5,offset:DBe(s.offset,o("labelOffset"))},v=ho(a,p?$U(u,c,'"left"','"right"','"center"'):{value:"center"},Hrn(a,"left","right")),b=ho(a,FBe(a,"bottom","top"),p?$U(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=$U(u,c,`-(${f})`,f,0);p=p&&f;const E={opacity:ir,x:ho(a,y,g),y:nd(a,y,g)},x={enter:E,update:m={opacity:zc,text:{field:Aie},x:E.x,y:E.y,align:v,baseline:b},exit:{opacity:ir,x:E.x,y:E.y}};Yo(x,{dx:!d&&p?ho(a,w):null,dy:!h&&p?nd(a,w):null}),Yo(x,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const T=o("labelBound");let C=o("labelOverlap");return C=C||T?{separation:o("labelSeparation"),method:C,order:"datum.index",bound:T?{scale:u,orient:a,tolerance:T}:null}:void 0,m.align!==v&&(m.align=SE(m.align,v)),m.baseline!==b&&(m.baseline=SE(m.baseline,b)),rc({type:y_,role:Stn,style:eN,key:Uc,from:r,encode:x,overlap:C},n)}function iin(e,t,n,r){const i=ml(e,t),s=e.orient,o=sB(s,-1,1);let a,u;const l={enter:a={opacity:ir,anchor:fo(i("titleAnchor",null)),align:{signal:Nie}},update:u=_n({},a,{opacity:zc,text:fo(e.title)}),exit:{opacity:ir}},c={signal:`lerp(range("${e.scale}"), ${nB(0,1,.5)})`};return u.x=ho(s,c),u.y=nd(s,c),a.angle=ho(s,ir,Qrn(o,90)),a.baseline=ho(s,FBe(s,Ny,xd),{value:Ny}),u.angle=a.angle,u.baseline=a.baseline,Yo(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),sin(i,s,l,n),l.update.align=SE(l.update.align,a.align),l.update.angle=SE(l.update.angle,a.angle),l.update.baseline=SE(l.update.baseline,a.baseline),rc({type:y_,role:Ctn,style:Iie,from:r,encode:l},n)}function sin(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=SE(fo(a),n.update[u]),!1):!yw(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?fo(o):ho(t,fo(o),fo(s))}function oin(e,t){const n=Jrn(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=ml(e,n),l=nrn(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=Lt(t.add(Ed({},[c]))),d=Lt(t.add(ann({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(ein(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(nin(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(rin(e,n,r.labels,d,p,l))),c.domain&&h.push(Zrn(e,n,r.domain,f)),c.title&&h.push(iin(e,n,r.title,f)),iB(uk({role:wtn,from:f,encode:lT(ain(u,e),i,tN),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function ain(e,t){const n={enter:{},update:{}};return Yo(n,{orient:e("orient"),offset:e("offset")||0,position:Nf(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function jBe(e,t,n){const r=pt(e.signals),i=pt(e.scales);return n||r.forEach(s=>vBe(s,t)),pt(e.projections).forEach(s=>Bnn(s,t)),i.forEach(s=>Ann(s,t)),pt(e.data).forEach(s=>zrn(s,t)),i.forEach(s=>Inn(s,t)),(n||r).forEach(s=>onn(s,t)),pt(e.axes).forEach(s=>oin(s,t)),pt(e.marks).forEach(s=>iB(s,t)),pt(e.legends).forEach(s=>Rrn(s,t)),e.title&&Lrn(e.title,t),t.parseLambdas(),t}const uin=e=>lT({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function lin(e,t){const n=t.config,r=Lt(t.root=t.add(fL())),i=cin(e,n);i.forEach(l=>vBe(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(Ed()),o=t.add(wBe(yBe(uin(e.encode),tB,xie,e.style,t,{pulse:Lt(s)}))),a=t.add(SBe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Lt(o)}));t.operators.pop(),t.pushState(Lt(o),Lt(a),null),jBe(e,t,i),t.operators.push(a);let u=t.add(_Be({mark:r,pulse:Lt(a)}));return u=t.add(xBe({pulse:Lt(u)})),u=t.add(g_({pulse:Lt(u)})),t.addData("root",new Nb(t,s,s,u)),t}function _C(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function cin(e,t){const n=o=>Nf(e[o],t[o]),r=[_C("background",n("background")),_C("autosize",vtn(n("autosize"))),_C("padding",_tn(n("padding"))),_C("width",n("width")||0),_C("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return pt(e.signals).forEach(o=>{jt(i,o.name)?o=_n(i[o.name],o):r.push(o),s[o.name]=o}),pt(t.signals).forEach(o=>{!jt(s,o.name)&&!jt(i,o.name)&&r.push(o)}),r}function UBe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Hye(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}UBe.prototype=Hye.prototype={parse(e){return jBe(e,this)},fork(){return new Hye(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof mW?Lt(e):e;return this.add(wnn({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Lt(this.add(g_({pulse:e})))),this._parent.push(t),this._lookup.push(n?Lt(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return er(this._parent)},encode(){return er(this._encode)},lookup(){return er(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(mt(e))return ok(e,t);e.signal||Me("Unsupported field reference: "+rt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Lt(this.add(fnn(i)))}return r},compareRef(e){let t=!1;const n=s=>zs(s)?(t=!0,this.signalRef(s.signal)):Xtn(s)?(t=!0,this.exprRef(s.expr)):s,r=pt(e.field).map(n),i=pt(e.order).map(n);return t?Lt(this.add(Rye({fields:r,orders:i}))):Iye(r,i)},keyRef(e,t){let n=!1;const r=s=>zs(s)?(n=!0,Lt(i[s.signal])):s,i=this.signals;return e=pt(e).map(r),n?Lt(this.add(dnn({fields:e,flat:t}))):Wtn(e,t)},sortRef(e){if(!e)return e;const t=Z5(e.op,e.field),n=e.order||Gtn;return n.signal?Lt(this.add(Rye({fields:t,orders:this.signalRef(n.signal)}))):Iye(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return jt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Me("Duplicate signal name: "+rt(e));const n=t instanceof mW?t:this.add(fL(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Me("Unrecognized signal name: "+rt(e)),this.signals[e]},signalRef(e){return this.signals[e]?Lt(this.signals[e]):(jt(this.lambdas,e)||(this.lambdas[e]=this.add(fL(null))),Lt(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Xh(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!gt(e)?e:this.signalRef(e.signal||Mie(e))},exprRef(e,t){const n={expr:Xh(e,this)};return t&&(n.expr.$name=t),Lt(this.add(lnn(n)))},addBinding(e,t){this.bindings||Me("Nested signals do not support binding: "+rt(e)),this.bindings.push(_n({signal:e},t))},addScaleProj(e,t){jt(this.scales,e)&&Me("Duplicate scale or projection name: "+rt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,xnn(t))},addProjection(e,t){this.addScaleProj(e,_nn(t))},getScale(e){return this.scales[e]||Me("Unrecognized scale name: "+rt(e)),this.scales[e]},scaleRef(e){return Lt(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return jt(this.data,e)&&Me("Duplicate data set name: "+rt(e)),this.data[e]=t},getData(e){return this.data[e]||Me("Undefined data set name: "+rt(e)),this.data[e]},addDataPipeline(e,t){return jt(this.data,e)&&Me("Duplicate data set name: "+rt(e)),this.addData(e,Nb.fromEntries(this,t))}};function Mie(e){return(Be(e)?fin:din)(e)}function fin(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(gt(i)?i.signal||Mie(i):rt(i))}return n+"]"}function din(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+rt(r)+":"+(gt(i)?i.signal||Mie(i):rt(i));return t+"}"}function hin(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function pin(e,t,n){return gt(e)||Me("Input Vega specification must be an object."),t=tT(hin(),t,e.config),lin(e,new UBe(t,n)).toRuntime()}var min="5.29.0";_n(Rx,pqt,nKt,OKt,fXt,vXt,qXt,SXt,GXt,QXt,aQt,pQt);const gin=Object.freeze(Object.defineProperty({__proto__:null,Bounds:As,CanvasHandler:KR,CanvasRenderer:Z3,DATE:ul,DAY:ba,DAYOFYEAR:Kh,Dataflow:xE,Debug:dLe,Error:Rte,EventStream:w5,Gradient:kFe,GroupItem:O5,HOURS:ec,Handler:gre,HybridHandler:_4e,HybridRenderer:Wq,Info:fLe,Item:P5,MILLISECONDS:dd,MINUTES:tc,MONTH:Sa,Marks:nc,MultiPulse:Xte,None:cLe,Operator:Jr,Parameters:_5,Pulse:G0,QUARTER:al,RenderType:b0,Renderer:YR,ResourceLoader:MFe,SECONDS:Qc,SVGHandler:a4e,SVGRenderer:Ere,SVGStringRenderer:b4e,Scenegraph:ZFe,TIME_UNITS:zte,Transform:De,View:sBe,WEEK:Fs,Warn:Nte,YEAR:Ho,accessor:pl,accessorFields:xa,accessorName:es,array:pt,ascending:p5,bandwidthNRD:ene,bin:w6e,bootstrapCI:E6e,boundClip:R4e,boundContext:HR,boundItem:Uq,boundMark:KFe,boundStroke:wg,changeset:h_,clampRange:xLe,codegenExpression:D5e,compare:Mte,constant:Na,cumulativeLogNormal:one,cumulativeNormal:x5,cumulativeUniform:cne,dayofyear:$Le,debounce:Lte,defaultLocale:qte,definition:v6e,densityLogNormal:sne,densityNormal:tne,densityUniform:lne,domChild:Ms,domClear:kc,domCreate:y0,domFind:mre,dotbin:x6e,error:Me,expressionFunction:gs,extend:_n,extent:Yh,extentIndex:SLe,falsy:Ug,fastmap:rT,field:Kc,flush:TLe,font:B5,fontFamily:GR,fontSize:mp,format:vO,formatLocale:j3,formats:Yte,hasOwnProperty:jt,id:DR,identity:Ra,inferType:a6e,inferTypes:u6e,ingest:Sr,inherits:lt,inrange:jw,interpolate:Wne,interpolateColors:N5,interpolateRange:mFe,intersect:C4e,intersectBoxLine:Uw,intersectPath:ere,intersectPoint:tre,intersectRule:FFe,isArray:Be,isBoolean:uv,isDate:W0,isFunction:wn,isIterable:CLe,isNumber:dr,isObject:gt,isRegExp:ALe,isString:mt,isTuple:v5,key:Fte,lerp:ILe,lineHeight:Iy,loader:g5,locale:s6e,logger:Dte,lruCache:kLe,markup:wre,merge:RLe,mergeConfig:tT,multiLineOffset:dre,one:eT,pad:NLe,panLinear:yLe,panLog:vLe,panPow:bLe,panSymlog:_Le,parse:pin,parseExpression:lie,parseSelector:cv,path:kF,pathCurves:Qne,pathEqual:N4e,pathParse:Ox,pathRectangle:DFe,pathRender:JI,pathSymbols:NFe,pathTrail:PFe,peek:er,point:U5,projection:Ore,quantileLogNormal:ane,quantileNormal:S5,quantileUniform:fne,quantiles:Jte,quantizeInterpolator:gFe,quarter:wLe,quartiles:Zte,get random(){return Jc},randomInteger:vHt,randomKDE:rne,randomLCG:yHt,randomLogNormal:T6e,randomMixture:C6e,randomNormal:nne,randomUniform:A6e,read:f6e,regressionConstant:dne,regressionExp:k6e,regressionLinear:hne,regressionLoess:D6e,regressionLog:I6e,regressionPoly:N6e,regressionPow:R6e,regressionQuad:pne,renderModule:z5,repeat:rA,resetDefaultLocale:pVt,resetSVGClipId:$Fe,resetSVGDefIds:_Yt,responseType:c6e,runtimeContext:W5e,sampleCurve:C5,sampleLogNormal:ine,sampleNormal:E5,sampleUniform:une,scale:br,sceneEqual:xre,sceneFromJSON:QFe,scenePickVisit:q3,sceneToJSON:XFe,sceneVisit:hd,sceneZOrder:nre,scheme:Gne,serializeXML:m4e,setHybridRendererOptions:gYt,setRandom:mHt,span:PR,splitAccessPath:pp,stringValue:rt,textMetrics:Ul,timeBin:JLe,timeFloor:zLe,timeFormatLocale:KI,timeInterval:iT,timeOffset:qLe,timeSequence:YLe,timeUnitSpecifier:OLe,timeUnits:Vte,toBoolean:Bte,toDate:jte,toNumber:_a,toSet:fd,toString:Ute,transform:b6e,transforms:Rx,truncate:DLe,truthy:Xc,tupleid:Ft,typeParsers:Dq,utcFloor:VLe,utcInterval:sT,utcOffset:WLe,utcSequence:KLe,utcdayofyear:FLe,utcquarter:ELe,utcweek:BLe,version:min,visitArray:Kg,week:MLe,writeConfig:nT,zero:u0,zoomLinear:Pte,zoomLog:Ote,zoomPow:B3,zoomSymlog:$te},Symbol.toStringTag,{value:"Module"}));function yin(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var vin={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},bin={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},_in={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const win=Array.prototype.slice,kv=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,win.call(t,1))},Ein=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var xin={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:Ein,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return kv("join",arguments)},indexof:function(){return kv("indexOf",arguments)},lastindexof:function(){return kv("lastIndexOf",arguments)},slice:function(){return kv("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return kv("substring",arguments,String)},split:function(){return kv("split",arguments,String)},replace:function(){return kv("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const Sin=["view","item","group","xy","x","y"],EW=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&EW.add(setImmediate);const Tin={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:vin[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),EW.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||xin[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>bin[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>_in[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,EW.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function wC(e,t,n,r,i,s){const o=a=>Tin[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,Sin.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var Cin={operator(e,t){const n=t.ast,r=e.functions;return i=>wC(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>wC(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>wC(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return wC(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=wC(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&yin(o,r,s),l}}};const Ain="vega-lite",Iin='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',kin="5.18.1",Rin=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],Nin="https://vega.github.io/vega-lite/",Din="Vega-Lite is a concise high-level language for interactive visualization.",Pin=["vega","chart","visualization"],Oin="build/vega-lite.js",$in="build/vega-lite.min.js",Min="build/vega-lite.min.js",Lin="build/src/index",Fin="build/src/index.d.ts",Bin={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},jin=["bin","build","src","vega-lite*","tsconfig.json"],Uin={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},zin={type:"git",url:"https://github.com/vega/vega-lite.git"},Vin="BSD-3-Clause",Hin={url:"https://github.com/vega/vega-lite/issues"},qin={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},Win={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},Gin={vega:"^5.24.0"},Yin={node:">=18"},Kin="yarn@1.22.19",Xin={name:Ain,author:Iin,version:kin,collaborators:Rin,homepage:Nin,description:Din,keywords:Pin,main:Oin,unpkg:$in,jsdelivr:Min,module:Lin,types:Fin,bin:Bin,files:jin,scripts:Uin,repository:zin,license:Vin,bugs:Hin,devDependencies:qin,dependencies:Win,peerDependencies:Gin,engines:Yin,packageManager:Kin};function Lie(e){return!!e.or}function Fie(e){return!!e.and}function Bie(e){return!!e.not}function FO(e,t){if(Bie(e))FO(e.not,t);else if(Fie(e))for(const n of e.and)FO(n,t);else if(Lie(e))for(const n of e.or)FO(n,t);else t(e)}function TE(e,t){return Bie(e)?{not:TE(e.not,t)}:Fie(e)?{and:e.and.map(n=>TE(n,t))}:Lie(e)?{or:e.or.map(n=>TE(n,t))}:t(e)}const sn=structuredClone;function zBe(e){throw new Error(e)}function Bx(e,t){const n={};for(const r of t)jt(e,r)&&(n[r]=e[r]);return n}function Ju(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Vr(e)).join(",")})`};function qn(e){if(dr(e))return e;const t=mt(e)?e:Vr(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function xW(e){return e===!1||e===null}function Wn(e,t){return e.includes(t)}function Db(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function jie(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function VBe(e,...t){for(const n of t)Qin(e,n??{});return e}function Qin(e,t){for(const n of Ke(t))nT(e,n,t[n],!0)}function yh(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function Jin(e,t){const n=Ke(e),r=Ke(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function HBe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Uie(e,t){for(const n of e)if(t.has(n))return!0;return!1}function SW(e){const t=new Set;for(const n of e){const i=pp(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function zie(e,t){return e===void 0||t===void 0?!0:Uie(SW(e),SW(t))}function zr(e){return Ke(e).length===0}const Ke=Object.keys,qo=Object.values,Dy=Object.entries;function lk(e){return e===!0||e===!1}function ki(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function y2(e,t){return Bie(e)?`!(${y2(e.not,t)})`:Fie(e)?`(${e.and.map(n=>y2(n,t)).join(") && (")})`:Lie(e)?`(${e.or.map(n=>y2(n,t)).join(") || (")})`:t(e)}function dL(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&dL(e[n],t)&&delete e[n],zr(e)}function nN(e){return e.charAt(0).toUpperCase()+e.substr(1)}function Vie(e,t="datum"){const n=pp(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(rt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function qBe(e,t="datum"){return`${t}[${rt(pp(e).join("."))}]`}function Zin(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Zc(e){return`${pp(e).map(Zin).join("\\.")}`}function Pb(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function dT(e){return`${pp(e).join(".")}`}function jx(e){return e?pp(e).length:0}function hs(...e){for(const t of e)if(t!==void 0)return t}let WBe=42;function GBe(e){const t=++WBe;return e?String(e)+t:t}function esn(){WBe=42}function YBe(e){return KBe(e)?e:`__${e}`}function KBe(e){return e.startsWith("__")}function ck(e){if(e!==void 0)return(e%360+360)%360}function oB(e){return dr(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const qye=Object.getPrototypeOf(structuredClone({}));function Ll(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Ll(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!Ll(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==qye.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==qye.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Ll(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Vr(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const xm="row",Sm="column",aB="facet",Ri="x",xo="y",Sd="x2",vp="y2",fv="xOffset",hT="yOffset",Td="radius",xg="radius2",hf="theta",Sg="theta2",Cd="latitude",Ad="longitude",Id="latitude2",ef="longitude2",ll="color",bp="fill",_p="stroke",cl="shape",Tg="size",v_="angle",Cg="opacity",dv="fillOpacity",hv="strokeOpacity",pv="strokeWidth",mv="strokeDash",rN="text",Ux="order",iN="detail",uB="key",Ob="tooltip",lB="href",cB="url",fB="description",tsn={x:1,y:1,x2:1,y2:1},XBe={theta:1,theta2:1,radius:1,radius2:1};function QBe(e){return e in XBe}const Hie={longitude:1,longitude2:1,latitude:1,latitude2:1};function JBe(e){switch(e){case Cd:return"y";case Id:return"y2";case Ad:return"x";case ef:return"x2"}}function ZBe(e){return e in Hie}const nsn=Ke(Hie),qie={...tsn,...XBe,...Hie,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function CE(e){return e===ll||e===bp||e===_p}const eje={row:1,column:1,facet:1},Lc=Ke(eje),Wie={...qie,...eje},rsn=Ke(Wie),{order:$gn,detail:Mgn,tooltip:Lgn,...isn}=Wie,{row:Fgn,column:Bgn,facet:jgn,...ssn}=isn;function osn(e){return!!ssn[e]}function tje(e){return!!Wie[e]}const asn=[Sd,vp,Id,ef,Sg,xg];function nje(e){return b_(e)!==e}function b_(e){switch(e){case Sd:return Ri;case vp:return xo;case Id:return Cd;case ef:return Ad;case Sg:return hf;case xg:return Td}return e}function Py(e){if(QBe(e))switch(e){case hf:return"startAngle";case Sg:return"endAngle";case Td:return"outerRadius";case xg:return"innerRadius"}return e}function wp(e){switch(e){case Ri:return Sd;case xo:return vp;case Cd:return Id;case Ad:return ef;case hf:return Sg;case Td:return xg}}function fl(e){switch(e){case Ri:case Sd:return"width";case xo:case vp:return"height"}}function rje(e){switch(e){case Ri:return"xOffset";case xo:return"yOffset";case Sd:return"x2Offset";case vp:return"y2Offset";case hf:return"thetaOffset";case Td:return"radiusOffset";case Sg:return"theta2Offset";case xg:return"radius2Offset"}}function Gie(e){switch(e){case Ri:return"xOffset";case xo:return"yOffset"}}function usn(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const lsn=Ke(qie),{x:Ugn,y:zgn,x2:Vgn,y2:Hgn,xOffset:qgn,yOffset:Wgn,latitude:Ggn,longitude:Ygn,latitude2:Kgn,longitude2:Xgn,theta:Qgn,theta2:Jgn,radius:Zgn,radius2:e0n,...Yie}=qie,csn=Ke(Yie),Kie={x:1,y:1},Ep=Ke(Kie);function ps(e){return e in Kie}const Xie={theta:1,radius:1},fsn=Ke(Xie);function dB(e){return e==="width"?Ri:xo}const ije={xOffset:1,yOffset:1};function sN(e){return e in ije}const{text:t0n,tooltip:n0n,href:r0n,url:i0n,description:s0n,detail:o0n,key:a0n,order:u0n,...sje}=Yie,dsn=Ke(sje);function hsn(e){return!!Yie[e]}function psn(e){switch(e){case ll:case bp:case _p:case Tg:case cl:case Cg:case pv:case mv:return!0;case dv:case hv:case v_:return!1}}const oje={...Kie,...Xie,...ije,...sje},hB=Ke(oje);function Ag(e){return!!oje[e]}function msn(e,t){return ysn(e)[t]}const aje={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:l0n,...gsn}=aje;function ysn(e){switch(e){case ll:case bp:case _p:case fB:case iN:case uB:case Ob:case lB:case Ux:case Cg:case dv:case hv:case pv:case aB:case xm:case Sm:return aje;case Ri:case xo:case fv:case hT:case Cd:case Ad:return gsn;case Sd:case vp:case Id:case ef:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Tg:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case mv:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case cl:return{point:"always",geoshape:"always"};case rN:return{text:"always"};case v_:return{point:"always",square:"always",text:"always"};case cB:return{image:"always"};case hf:return{text:"always",arc:"always"};case Td:return{text:"always",arc:"always"};case Sg:case xg:return{arc:"always"}}}function MU(e){switch(e){case Ri:case xo:case hf:case Td:case fv:case hT:case Tg:case v_:case pv:case Cg:case dv:case hv:case Sd:case vp:case Sg:case xg:return;case aB:case xm:case Sm:case cl:case mv:case rN:case Ob:case lB:case cB:case fB:return"discrete";case ll:case bp:case _p:return"flexible";case Cd:case Ad:case Id:case ef:case iN:case uB:case Ux:return}}const vsn={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},bsn={count:1,min:1,max:1};function tg(e){return!!e&&!!e.argmin}function gv(e){return!!e&&!!e.argmax}function Qie(e){return mt(e)&&!!vsn[e]}const _sn=new Set(["count","valid","missing","distinct"]);function uje(e){return mt(e)&&_sn.has(e)}function wsn(e){return mt(e)&&Wn(["min","max"],e)}const Esn=new Set(["count","sum","distinct","valid","missing"]),xsn=new Set(["mean","average","median","q1","q3","min","max"]);function lje(e){return uv(e)&&(e=TB(e,void 0)),"bin"+Ke(e).map(t=>pB(e[t])?ki(`_${t}_${Dy(e[t])}`):ki(`_${t}_${e[t]}`)).join("")}function ci(e){return e===!0||__(e)&&!e.binned}function $o(e){return e==="binned"||__(e)&&e.binned===!0}function __(e){return gt(e)}function pB(e){return e==null?void 0:e.param}function Wye(e){switch(e){case xm:case Sm:case Tg:case ll:case bp:case _p:case pv:case Cg:case dv:case hv:case cl:return 6;case mv:return 4;default:return 10}}function oN(e){return!!(e!=null&&e.expr)}function $u(e){const t=Ke(e||{}),n={};for(const r of t)n[r]=kl(e[r]);return n}function cje(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=Bx(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function Jg(e){return mt(e)||Be(e)&&mt(e[0])}function Nt(e){return!!(e!=null&&e.signal)}function yv(e){return!!e.step}function Ssn(e){return Be(e)?!1:"fields"in e&&!("data"in e)}function Tsn(e){return Be(e)?!1:"fields"in e&&"data"in e}function dm(e){return Be(e)?!1:"field"in e&&"data"in e}const Csn={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},Asn=Ke(Csn),Isn={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},TW=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function fje(e){const t=Be(e.condition)?e.condition.map(Gye):Gye(e.condition);return{...kl(e),condition:t}}function kl(e){if(oN(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Gye(e){if(oN(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function mi(e){if(oN(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Nt(e)?e:e!==void 0?{value:e}:void 0}function ksn(e){return Nt(e)?e.signal:rt(e)}function Yye(e){return Nt(e)?e.signal:rt(e.value)}function Wf(e){return Nt(e)?e.signal:e==null?null:rt(e)}function Rsn(e,t,n){for(const r of n){const i=ng(r,t.markDef,t.config);i!==void 0&&(e[r]=mi(i))}return e}function dje(e){return[].concat(e.type,e.style??[])}function xr(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:ng(e,t,n,r)}function ng(e,t,n,{vgChannel:r}={}){return hs(r?hL(e,t,n.style):void 0,hL(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function hL(e,t,n){return hje(e,dje(t),n)}function hje(e,t,n){t=pt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function pje(e,t){return pt(e).reduce((n,r)=>(n.field.push(at(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function mje(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Ll(i,r))return;n.push(r)}),n}function gje(e,t){return Ll(e,t)||!t?e:e?[...pt(e),...pt(t)].join(", "):t}function yje(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Jg(n)||Nt(n))&&(Jg(r)||Nt(r)))return{explicit:e.explicit,value:gje(n,r)};if(Jg(n)||Nt(n))return{explicit:e.explicit,value:n};if(Jg(r)||Nt(r))return{explicit:e.explicit,value:r};if(!Jg(n)&&!Nt(n)&&!Jg(r)&&!Nt(r))return{explicit:e.explicit,value:mje(n,r)};throw new Error("It should never reach here")}function Jie(e){return`Invalid specification ${Vr(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const Nsn='Autosize "fit" only works for single views and layered views.';function Kye(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function Xye(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function Qye(e){return e?`Dropping "fit-${e}" because spec has discrete ${fl(e)}.`:'Dropping "fit" because spec has discrete size.'}function Zie(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Jye(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function Dsn(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function Psn(e){return`The "nearest" transform is not supported for ${e} marks.`}function vje(e){return`Selection not supported for ${e} yet.`}function Osn(e){return`Cannot find a selection named "${e}".`}const $sn="Scale bindings are currently only supported for scales with unbinned, continuous domains.",Msn="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",Lsn="Legend bindings are only supported for selections over an individual field or encoding channel.";function Fsn(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function Bsn(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const jsn="The same selection must be used to override scale domains in a layered view.",Usn='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function zsn(e){return`Unknown repeated value "${e}".`}function Zye(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const Vsn="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function Hsn(e){return`Unrecognized parse "${e}".`}function eve(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const qsn="Attempt to add the same child twice.";function Wsn(e){return`Ignoring an invalid transform: ${Vr(e)}.`}const Gsn='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function tve(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function Ysn(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Vr(t)} is overridden by a child projection ${Vr(n)}.`}const Ksn="Arc marks uses theta channel rather than angle, replacing angle with theta.";function Xsn(e){return`${e}Offset dropped because ${e} is continuous`}function Qsn(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Vr(n)}}.`}function bje(e){return`Invalid field type "${e}".`}function Jsn(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function Zsn(e){return`Invalid aggregation operator "${e}".`}function _je(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function eon(e){return`Position range does not support relative band size for ${e}.`}function CW(e,t){return`Dropping ${Vr(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const ton="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function mB(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function non(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function ron(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function ion(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function son(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function LU(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function oon(e){return`The ${e} for range marks cannot be an expression`}function aon(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function uon(e,t){return`Specified orient "${e}" overridden with "${t}".`}function lon(e){return`Cannot use the scale property "${e}" with non-color channel.`}function con(e){return`Cannot use the relative band size with ${e} scale.`}function fon(e){return`Using unaggregated domain with raw field has no effect (${Vr(e)}).`}function don(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function hon(e){return`Unaggregated domain is currently unsupported for log scale (${Vr(e)}).`}function pon(e){return`Cannot apply size to non-oriented mark "${e}".`}function mon(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function gon(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function wje(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function Eje(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function yon(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Vr(n)} and ${Vr(r)}). Using ${Vr(n)}.`}function von(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Vr(n)} and ${Vr(r)}). Using the union of the two domains.`}function bon(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function _on(e){return`Dropping sort property ${Vr(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const nve="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",won="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",Eon="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",xon="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function Son(e){return`Cannot stack "${e}" if there is already "${e}2".`}function Ton(e){return`Stack is applied to a non-linear scale (${e}).`}function Con(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function pL(e,t){return`Invalid ${e}: ${Vr(t)}.`}function Aon(e){return`Dropping day from datetime ${Vr(e)} as day cannot be combined with other units.`}function Ion(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function kon(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function Ron(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function rve(e){return`1D error band does not support ${e}.`}function xje(e){return`Channel ${e} is required for "binned" bin.`}function Non(e){return`Channel ${e} should not be used with "binned" bin.`}function Don(e){return`Domain for ${e} is required for threshold scale.`}const Sje=Dte(Nte);let zx=Sje;function Pon(e){return zx=e,zx}function Oon(){return zx=Sje,zx}function Ze(...e){zx.warn(...e)}function $on(...e){zx.debug(...e)}function w_(e){if(e&&gt(e)){for(const t of tse)if(t in e)return!0}return!1}const Tje=["january","february","march","april","may","june","july","august","september","october","november","december"],Mon=Tje.map(e=>e.substr(0,3)),Cje=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Lon=Cje.map(e=>e.substr(0,3));function Fon(e){if(oB(e)&&(e=+e),dr(e))return e>4&&Ze(pL("quarter",e)),e-1;throw new Error(pL("quarter",e))}function Bon(e){if(oB(e)&&(e=+e),dr(e))return e-1;{const t=e.toLowerCase(),n=Tje.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Mon.indexOf(r);if(i!==-1)return i;throw new Error(pL("month",e))}}function jon(e){if(oB(e)&&(e=+e),dr(e))return e%7;{const t=e.toLowerCase(),n=Cje.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Lon.indexOf(r);if(i!==-1)return i;throw new Error(pL("day",e))}}function ese(e,t){const n=[];if(t&&e.day!==void 0&&Ke(e).length>1&&(Ze(Aon(e)),e=sn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?Bon(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?Fon(e.quarter):e.quarter;n.push(dr(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?jon(e.day):e.day;n.push(dr(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function $b(e){const n=ese(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Uon(e){const n=ese(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function zon(e){const t=ese(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const Aje={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},tse=Ke(Aje);function Von(e){return!!Aje[e]}function E_(e){return gt(e)?e.binned:Ije(e)}function Ije(e){return e&&e.startsWith("binned")}function nse(e){return e.startsWith("utc")}function Hon(e){return e.substring(3)}const qon={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function gB(e){return tse.filter(t=>Rje(e,t))}function kje(e){const t=gB(e);return t[t.length-1]}function Rje(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Won(e,t,{end:n}={end:!1}){const r=Vie(t),i=nse(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of tse)Rje(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),Uon(a)}function Nje(e){if(!e)return;const t=gB(e);return`timeUnitSpecifier(${Vr(t)}, ${Vr(qon)})`}function Gon(e,t,n){if(!e)return;const r=Nje(e);return`${n||nse(e)?"utc":"time"}Format(${t}, ${r})`}function yo(e){if(!e)return;let t;return mt(e)?Ije(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:gt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),nse(t.unit)&&(t.utc=!0,t.unit=Hon(t.unit)),t}function Yon(e){const{utc:t,...n}=yo(e);return n.unit?(t?"utc":"")+Ke(n).map(r=>ki(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+Ke(n).map(r=>ki(`_${r}_${n[r]}`)).join("")}function Dje(e,t=n=>n){const n=yo(e),r=kje(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=Pje(r,n.step),a={...i,[o]:+i[o]+s};return`${t($b(a))} - ${t($b(i))}`}}const Kon={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function Xon(e){return!!Kon[e]}function Pje(e,t=1){if(Xon(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function Qon(e){return e==null?void 0:e.param}function rse(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function ise(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function sse(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function ose(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function ase(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function use(e){if(e!=null&&e.field){if(Be(e.range)&&e.range.length===2)return!0;if(Nt(e.range))return!0}return!1}function lse(e){return!!(e!=null&&e.field)&&(Be(e.oneOf)||Be(e.in))}function Jon(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function Oje(e){return lse(e)||rse(e)||use(e)||ise(e)||ose(e)||sse(e)||ase(e)}function Fd(e,t){return CB(e,{timeUnit:t,wrapTime:!0})}function Zon(e,t){return e.map(n=>Fd(n,t))}function $je(e,t=!0){const{field:n}=e,r=yo(e.timeUnit),{unit:i,binned:s}=r||{},o=at(e,{expr:"datum"}),a=i?`time(${s?o:Won(i,n)})`:o;if(rse(e))return`${a}===${Fd(e.equal,i)}`;if(ise(e)){const u=e.lt;return`${a}<${Fd(u,i)}`}else if(ose(e)){const u=e.gt;return`${a}>${Fd(u,i)}`}else if(sse(e)){const u=e.lte;return`${a}<=${Fd(u,i)}`}else if(ase(e)){const u=e.gte;return`${a}>=${Fd(u,i)}`}else{if(lse(e))return`indexof([${Zon(e.oneOf,i).join(",")}], ${a}) !== -1`;if(Jon(e))return cse(a,e.valid);if(use(e)){const{range:u}=e,l=Nt(u)?{signal:`${u.signal}[0]`}:u[0],c=Nt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+Fd(l,i)+", "+Fd(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${Fd(l,i)}`),c!==null&&f.push(`${a} <= ${Fd(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Vr(e)}`)}function cse(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function ean(e){return Oje(e)&&e.timeUnit?{...e,timeUnit:yo(e.timeUnit)}:e}const aN={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function tan(e){return e==="quantitative"||e==="temporal"}function Mje(e){return e==="ordinal"||e==="nominal"}const Mb=aN.quantitative,fse=aN.ordinal,Vx=aN.temporal,dse=aN.nominal,pT=aN.geojson;function nan(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Mb:return"quantitative";case"t":case Vx:return"temporal";case"o":case fse:return"ordinal";case"n":case dse:return"nominal";case pT:return"geojson"}}const Zu={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},AW={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function ran(e,t){const n=AW[e],r=AW[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const ian={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function ive(e){return ian[e]}const Lje=new Set(["linear","log","pow","sqrt","symlog"]),Fje=new Set([...Lje,"time","utc"]);function Bje(e){return Lje.has(e)}const jje=new Set(["quantile","quantize","threshold"]),san=new Set([...Fje,...jje,"sequential","identity"]),oan=new Set(["ordinal","bin-ordinal","point","band"]);function bo(e){return oan.has(e)}function ic(e){return san.has(e)}function Gf(e){return Fje.has(e)}function Hx(e){return jje.has(e)}const aan={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function uan(e){return!mt(e)&&!!e.name}function Uje(e){return e==null?void 0:e.param}function lan(e){return e==null?void 0:e.unionWith}function can(e){return gt(e)&&"field"in e}const fan={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:c0n,domain:f0n,range:d0n,rangeMax:h0n,rangeMin:p0n,scheme:m0n,...dan}=fan,han=Ke(dan);function IW(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Gf(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Gf(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Gf(e);case"nice":return Gf(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return ic(e)&&!Wn(["log","time","utc","threshold","quantile"],e)}}function zje(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return CE(e)?void 0:lon(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function pan(e,t){return Wn([fse,dse],t)?e===void 0||bo(e):t===Vx?Wn([Zu.TIME,Zu.UTC,void 0],e):t===Mb?Bje(e)||Hx(e)||e===void 0:!0}function man(e,t,n=!1){if(!Ag(e))return!1;switch(e){case Ri:case xo:case fv:case hT:case hf:case Td:return Gf(t)||t==="band"?!0:t==="point"?!n:!1;case Tg:case pv:case Cg:case dv:case hv:case v_:return Gf(t)||Hx(t)||Wn(["band","point","ordinal"],t);case ll:case bp:case _p:return t!=="band";case mv:case cl:return t==="ordinal"||Hx(t)}}function hse(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=mse(e);return et(n)&&!uje(n.aggregate)&&i&&Gf(i.get("type"))?gan({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function gan({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return xr("invalid",n,i)===null?[yan(e,t),r]:r}function yan(e,t){const n=pse(e,!0),i=b_(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function pse(e,t=!0){return cse(mt(e)?e:at(e,{expr:"datum"}),!t)}function van(e){const{datum:t}=e;return w_(t)?$b(t):`${Vr(t)}`}function q1(e,t,n,r){const i={};if(t&&(i.scale=t),xp(e)){const{datum:s}=e;w_(s)?i.signal=$b(s):Nt(s)?i.signal=s.signal:oN(s)?i.signal=s.expr:i.value=s}else i.field=at(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function mL({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Nt(o)&&0<o&&o<1?"datum":void 0,u=at(t,{expr:a,suffix:i}),l=n!==void 0?at(n,{expr:a}):at(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Nt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function ban({scaleName:e,fieldDef:t}){const n=at(t,{expr:"datum"}),r=at(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function mse({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(fn(t)){const f=o==null?void 0:o.get("type");if(cu(t)){c??(c=Oy({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(ci(d)||c&&h&&p===Vx)return a!=null&&a.impute?q1(t,s,{binSuffix:"mid"},{offset:u}):c&&!bo(f)?mL({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):q1(t,s,fN(t,e)?{binSuffix:"range"}:{},{offset:u});if($o(d)){if(et(n))return mL({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Ze(xje(e===Ri?Sd:vp))}}return q1(t,s,bo(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(pd(t)){const f=t.value,d=u?{offset:u}:{};return{...v2(e,f),...d}}}return wn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function v2(e,t){return Wn(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Wn(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:mi(t)}function Lb(e){return e&&e!=="number"&&e!=="time"}function Vje(e,t,n){return`${e}(${t}${n?`, ${Vr(n)}`:""})`}const _an="  ";function gse({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(Lb(n))return Yf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=Hje(e,r,i),a=qx(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return Yf({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Yf({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&et(e)&&e.timeUnit===void 0)return Yf({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(Gx(e)){const c=Ean({field:o,timeUnit:et(e)?(u=yo(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:S_(e)&&((l=e.scale)==null?void 0:l.type)===Zu.UTC});return c?{signal:c}:void 0}if(t=kW({type:a,specifiedFormat:t,config:s,normalizeStack:i}),et(e)&&ci(e.bin)){const c=at(e,{expr:r,binSuffix:"end"});return{signal:uN(o,c,t,n,s)}}else return t||qx(e)==="quantitative"?{signal:`${Gje(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function Hje(e,t,n){return et(e)?n?`${at(e,{expr:t,suffix:"end"})}-${at(e,{expr:t,suffix:"start"})}`:at(e,{expr:t}):van(e)}function Yf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=Hje(e,r,i)),o!=="datum.value"&&et(e)&&ci(e.bin)){const a=at(e,{expr:r,binSuffix:"end"});return{signal:uN(o,a,t,n,s)}}return{signal:Vje(n,o,t)}}function qje(e,t,n,r,i,s){var o;if(!(mt(r)&&Lb(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&qx(e)==="quantitative"&&(i.normalizedNumberFormatType&&Wx(e)&&e.stack==="normalize"||i.numberFormatType))){if(Wx(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return kW({type:"quantitative",config:i,normalizeStack:!0});if(Gx(e)){const a=et(e)?(o=yo(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:wan({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return kW({type:t,specifiedFormat:n,config:i})}}function Wje(e,t,n){var r;if(e&&(Nt(e)||e==="number"||e==="time"))return e;if(Gx(t)&&n!=="time"&&n!=="utc")return et(t)&&((r=yo(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function kW({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(mt(t))return t;if(e===Mb)return r?n.normalizedNumberFormat:n.numberFormat}function wan({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:Nje(t)}:r?void 0:n.timeFormat)}function Gje(e,t){return`format(${e}, "${t||""}")`}function sve(e,t,n,r){return Lb(n)?Vje(n,e,t):Gje(e,(mt(t)?t:void 0)??r.numberFormat)}function uN(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return uN(e,t,i.numberFormat,i.numberFormatType,i);const s=sve(e,n,r,i),o=sve(t,n,r,i);return`${cse(e,!1)} ? "null" : ${s} + "${_an}" + ${o}`}function Ean({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=mt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):Gon(t,e,s)}const gu={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Yje=gu.arc,yB=gu.area,vB=gu.bar,xan=gu.image,bB=gu.line,_B=gu.point,San=gu.rect,gL=gu.rule,Kje=gu.text,yse=gu.tick,Tan=gu.trail,vse=gu.circle,bse=gu.square,Xje=gu.geoshape;function x_(e){return["line","area","trail"].includes(e)}function fk(e){return["rect","bar","image","arc"].includes(e)}const Can=new Set(Ke(gu));function Qh(e){return e.type}const Aan=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],Ian=["fill","fillOpacity"],kan=[...Aan,...Ian],Ran={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},ove=Ke(Ran),Nan={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},Dan={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},Pan={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},Qje=Ke(Pan);function Fb(e){return e&&e.band!=null}const Oan={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Jje=5,$an={binSpacing:1,continuousBandSize:Jje,minBandSize:.25,timeUnitBandPosition:.5},Man={binSpacing:0,continuousBandSize:Jje,minBandSize:.25,timeUnitBandPosition:.5},Lan={thickness:1};function Fan(e){return Qh(e)?e.type:e}const wB="min",Ban={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function ave(e){return e in Ban}function Zje(e){return!!(e!=null&&e.encoding)}function Dh(e){return e&&(e.op==="count"||!!e.field)}function e8e(e){return e&&Be(e)}function lN(e){return"row"in e||"column"in e}function _se(e){return!!e&&"header"in e}function EB(e){return"facet"in e}function jan(e){return e.param}function Uan(e){return e&&!mt(e)&&"repeat"in e}function uve(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function wse(e){return"sort"in e}function Oy({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(fn(e)&&e.bandPosition!==void 0)return e.bandPosition;if(et(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return ng("timeUnitBandPosition",n,r);if(ci(s))return .5}}function t8e({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=fl(e),u=xr(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(et(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:ng("timeUnitBandSize",r,i)};if(ci(h)&&!bo(s))return{band:1}}if(fk(r.type))return s?bo(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function n8e(e,t,n,r){return ci(e.bin)||e.timeUnit&&cu(e)&&e.type==="temporal"?Oy({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function r8e(e){return e&&!!e.sort&&!e.field}function xB(e){return e&&"condition"in e}function SB(e){const t=e==null?void 0:e.condition;return!!t&&!Be(t)&&et(t)}function cN(e){const t=e==null?void 0:e.condition;return!!t&&!Be(t)&&fn(t)}function zan(e){const t=e==null?void 0:e.condition;return!!t&&(Be(t)||pd(t))}function et(e){return e&&(!!e.field||e.aggregate==="count")}function qx(e){return e==null?void 0:e.type}function xp(e){return e&&"datum"in e}function x0(e){return cu(e)&&!vL(e)||yL(e)}function lve(e){return cu(e)&&e.type==="quantitative"&&!e.bin||yL(e)}function yL(e){return xp(e)&&dr(e.datum)}function fn(e){return et(e)||xp(e)}function cu(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function pd(e){return e&&"value"in e&&"value"in e}function S_(e){return e&&("scale"in e||"sort"in e)}function Wx(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function i8e(e){return e&&"legend"in e}function s8e(e){return e&&("format"in e||"formatType"in e)}function Van(e){return Ju(e,["legend","axis","header","scale"])}function Han(e){return"op"in e}function at(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(Wan(e))n=YBe("count");else{let o;if(!t.nofn)if(Han(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;ci(a)?(o=lje(a),i=(t.binSuffix??"")+(t.suffix??"")):u?gv(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):tg(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!E_(l)&&(o=Yon(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?dT(n):t.expr?qBe(n,t.expr)+s:Zc(n)+s}function vL(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return et(e)&&!!e.bin;case"temporal":return!1}throw new Error(bje(e.type))}function qan(e){var t;return S_(e)&&Hx((t=e.scale)==null?void 0:t.type)}function Wan(e){return e.aggregate==="count"}function Gan(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(ci(r))return`${n} (binned)`;if(i&&!E_(i)){const a=(o=yo(i))==null?void 0:o.unit;if(a)return`${n} (${gB(a).join("-")})`}else if(s)return gv(s)?`${n} for max ${s.argmax}`:tg(s)?`${n} for min ${s.argmin}`:`${nN(s)} of ${n}`;return n}function Yan(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(gv(t))return`${i} for argmax(${t.argmax})`;if(tg(t))return`${i} for argmin(${t.argmin})`;const s=r&&!E_(r)?yo(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||ci(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const o8e=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return Yan(e);default:return Gan(e,t)}};let a8e=o8e;function u8e(e){a8e=e}function Kan(){u8e(o8e)}function AE(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=Ese(e))==null?void 0:a.title;if(!et(e))return i??e.title;const s=e,o=r?xse(s,t):void 0;return n?hs(i,s.title,o):i??s.title??o}function Ese(e){if(Wx(e)&&e.axis)return e.axis;if(i8e(e)&&e.legend)return e.legend;if(_se(e)&&e.header)return e.header}function xse(e,t){return a8e(e,t)}function bL(e){if(s8e(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=Ese(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function Xan(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(wse(e)&&Be(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!gv(n)&&!tg(n))return"quantitative";if(S_(e)&&((s=e.scale)!=null&&s.type))switch(AW[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Jh(e){if(et(e))return e;if(SB(e))return e.condition}function Bs(e){if(fn(e))return e;if(cN(e))return e.condition}function l8e(e,t,n,r={}){if(mt(e)||dr(e)||uv(e)){const i=mt(e)?"string":dr(e)?"number":"boolean";return Ze(Qsn(t,i,e)),{value:e}}return fn(e)?_L(e,t,n,r):cN(e)?{...e,condition:_L(e.condition,t,n,r)}:e}function _L(e,t,n,r){if(s8e(e)){const{format:i,formatType:s,...o}=e;if(Lb(s)&&!n.customFormatTypes)return Ze(tve(t)),_L(o,t,n,r)}else{const i=Wx(e)?"axis":i8e(e)?"legend":_se(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(Lb(o)&&!n.customFormatTypes)return Ze(tve(t)),_L({...e,[i]:a},t,n,r)}}return et(e)?Sse(e,t,r):Qan(e)}function Qan(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=dr(n)?"quantitative":mt(n)?"nominal":w_(n)?"temporal":void 0,{...e,type:t}}function Sse(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!Qie(r)&&!gv(r)&&!tg(r)&&(Ze(Zsn(r)),delete a.aggregate),i&&(a.timeUnit=yo(i)),o&&(a.field=`${o}`),ci(s)&&(a.bin=TB(s,t)),$o(s)&&!ps(t)&&Ze(Non(t)),cu(a)){const{type:u}=a,l=nan(u);u!==l&&(a.type=l),u!=="quantitative"&&uje(r)&&(Ze(Jsn(u,r)),a.type="quantitative")}else if(!nje(t)){const u=Xan(a,t);a.type=u}if(cu(a)){const{compatible:u,warning:l}=Jan(a,t)||{};u===!1&&Ze(l)}if(wse(a)&&mt(a.sort)){const{sort:u}=a;if(ave(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&ave(l))return{...a,sort:{encoding:l,order:"descending"}}}if(_se(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function TB(e,t){return uv(e)?{maxbins:Wye(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:Wye(t)}:e}const ew={compatible:!0};function Jan(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case xm:case Sm:case aB:return vL(e)?ew:{compatible:!1,warning:ron(t)};case Ri:case xo:case fv:case hT:case ll:case bp:case _p:case rN:case iN:case uB:case Ob:case lB:case cB:case v_:case hf:case Td:case fB:return ew;case Ad:case ef:case Cd:case Id:return n!==Mb?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:ew;case Cg:case dv:case hv:case pv:case Tg:case Sg:case xg:case Sd:case vp:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:ew;case cl:case mv:return!vL(e)&&!qan(e)?{compatible:!1,warning:ion(t)}:ew;case Ux:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:ew}}function Gx(e){const{formatType:t}=bL(e);return t==="time"||!t&&Zan(e)}function Zan(e){return e&&(e.type==="temporal"||et(e)&&!!e.timeUnit)}function CB(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=yo(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return oN(e)?a=e.expr:Nt(e)?a=e.signal:w_(e)?(o=!0,a=$b(e)):(mt(e)||dr(e))&&o&&(a=`datetime(${Vr(e)})`,Von(s)&&(dr(e)&&e<1e4||mt(e)&&isNaN(Date.parse(e)))&&(a=$b({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Vr(e)}function c8e(e,t){const{type:n}=e;return t.map(r=>{const i=et(e)&&!E_(e.timeUnit)?e.timeUnit:void 0,s=CB(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function fN(e,t){return ci(e.bin)?Ag(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const cve={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function dN(e){return e==null?void 0:e.condition}const f8e=["domain","grid","labels","ticks","title"],eun={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},d8e={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},tun={...d8e,style:1,labelExpr:1,encoding:1};function fve(e){return!!tun[e]}const nun={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},h8e=Ke(nun);function Ig(e){return"mark"in e}class AB{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Ig(t)?Fan(t.mark)===this.name:!1}}function W1(e,t){const n=e&&e[t];return n?Be(n)?Db(n,r=>!!r.field):et(n)||SB(n):!1}function p8e(e,t){const n=e&&e[t];return n?Be(n)?Db(n,r=>!!r.field):et(n)||xp(n)||cN(n):!1}function m8e(e,t){if(ps(t)){const n=e[t];if((et(n)||xp(n))&&(Mje(n.type)||et(n)&&n.timeUnit)){const r=Gie(t);return p8e(e,r)}}return!1}function Tse(e){return Db(rsn,t=>{if(W1(e,t)){const n=e[t];if(Be(n))return Db(n,r=>!!r.aggregate);{const r=Jh(n);return r&&!!r.aggregate}}return!1})}function g8e(e,t){const n=[],r=[],i=[],s=[],o={};return Cse(e,(a,u)=>{if(et(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=Ese(a),m=p==null?void 0:p.title;let g=at(a,{forAs:!0});const y={...m?[]:{title:AE(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(gv(c)?(v="argmax",g=at({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):tg(c)?(v="argmin",g=at({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:g};l&&(b.field=l),s.push(b)}}else if(n.push(g),cu(a)&&ci(f)){if(r.push({bin:f,field:l,as:g}),n.push(at(a,{binSuffix:"end"})),fN(a,u)&&n.push(at(a,{binSuffix:"range"})),ps(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",nje(u)||(y.type=Mb)}else if(d&&!E_(d)){i.push({timeUnit:d,field:l,as:g});const v=cu(a)&&a.type!==Vx&&"time";v&&(u===rN||u===Ob?y.formatType=v:hsn(u)?y.legend={formatType:v,...y.legend}:ps(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function run(e,t,n){const r=msn(t,n);if(r){if(r==="binned"){const i=e[t===Sd?Ri:xo];return!!(et(i)&&et(e[t])&&$o(i.bin))}}else return!1;return!0}function iun(e,t,n,r){const i={};for(const s of Ke(e))tje(s)||Ze(non(s));for(let s of lsn){if(!e[s])continue;const o=e[s];if(sN(s)){const a=usn(s),u=i[a];if(et(u)&&tan(u.type)&&et(o)&&!u.timeUnit){Ze(Xsn(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Ze(Ksn),s=hf),!run(e,s,t)){Ze(mB(s,t));continue}if(s===Tg&&t==="line"){const a=Jh(e[s]);if(a!=null&&a.aggregate){Ze(ton);continue}}if(s===ll&&(n?"fill"in e:"stroke"in e)){Ze(_je("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===iN||s===Ux&&!Be(o)&&!pd(o)||s===Ob&&Be(o)){if(o){if(s===Ux){const a=e[s];if(r8e(a)){i[s]=a;continue}}i[s]=pt(o).reduce((a,u)=>(et(u)?a.push(Sse(u,s)):Ze(CW(u,s)),a),[])}}else{if(s===Ob&&o===null)i[s]=null;else if(!et(o)&&!xp(o)&&!pd(o)&&!xB(o)&&!Nt(o)){Ze(CW(o,s));continue}i[s]=l8e(o,s,r)}}return i}function IB(e,t){const n={};for(const r of Ke(e)){const i=l8e(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function sun(e){const t=[];for(const n of Ke(e))if(W1(e,n)){const r=e[n],i=pt(r);for(const s of i)et(s)?t.push(s):SB(s)&&t.push(s.condition)}return t}function Cse(e,t,n){if(e)for(const r of Ke(e)){const i=e[r];if(Be(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function oun(e,t,n,r){return e?Ke(e).reduce((i,s)=>{const o=e[s];return Be(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function y8e(e,t){return Ke(t).reduce((n,r)=>{switch(r){case Ri:case xo:case lB:case fB:case cB:case Sd:case vp:case fv:case hT:case hf:case Sg:case Td:case xg:case Cd:case Ad:case Id:case ef:case rN:case cl:case v_:case Ob:return n;case Ux:if(e==="line"||e==="trail")return n;case iN:case uB:{const i=t[r];if(Be(i)||et(i))for(const s of pt(i))s.aggregate||n.push(at(s,{}));return n}case Tg:if(e==="trail")return n;case ll:case bp:case _p:case Cg:case dv:case hv:case mv:case pv:{const i=Jh(t[r]);return i&&!i.aggregate&&n.push(at(i,{})),n}}},[])}function aun(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Be(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Be(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function RW(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${Ase(t)}`:"";return{field:o+t.field,type:t.type,title:Nt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=sun(n).map(Van);return{tooltip:[...i,...yh(s,qn)]}}function Ase(e){const{title:t,field:n}=e;return hs(t,n)}function Ise(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=Ase(n);return v8e(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...mt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function v8e(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...Qh(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...uv(e[t])?{}:e[t]}}]:[]}function b8e(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:aP(s,n),continuousAxisChannelDef2:aP(o,n),continuousAxisChannelDefError:aP(a,n),continuousAxisChannelDefError2:aP(u,n),continuousAxis:i}}function aP(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Ze(Ron(n,t)),r}else return e}function _8e(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(Qh(n)&&n.orient)return n.orient;if(x0(i)){if(x0(s)){const o=et(i)&&i.aggregate,a=et(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return Gx(s)&&!Gx(i)?"horizontal":"vertical"}return"horizontal"}else{if(x0(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const wL="boxplot",uun=["box","median","outliers","rule","ticks"],lun=new AB(wL,E8e);function w8e(e){return dr(e)?"tukey":e}function E8e(e,{config:t}){e={...e,encoding:IB(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=Qh(n)?n:{type:n};i&&Ze(vje("boxplot"));const u=a.extent??t.boxplot.extent,l=xr("size",a,t),c=a.invalid,f=w8e(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:x}=cun(e,u,t),T=dT(m.field),{color:C,size:A,...k}=b,R=ke=>Ise(a,g,m,ke,t.boxplot),O=R(k),D=R(b),$=(gt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",F=R({...k,...A?{size:A}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...C||{value:$}}}}),L=RW([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,b),j={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},z=f==="min-max"?L:RW([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,b),q=[...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:z}),...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:z}),...O({partName:"ticks",mark:j,positionPrefix:"lower_whisker",extraEncoding:z}),...O({partName:"ticks",mark:j,positionPrefix:"upper_whisker",extraEncoding:z})],P=[...f!=="tukey"?q:[],...D({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:L}),...F({partName:"median",mark:{type:"tick",invalid:c,...gt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:L})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:P};const U=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,B=`(${W} - ${U})`,H=`${U} - ${u} * ${B}`,G=`${W} + ${u} * ${B}`,te=`datum["${m.field}"]`,le={joinaggregate:x8e(m.field),groupby:y},fe={transform:[{filter:`(${H} <= ${te}) && (${te} <= ${G})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${T}`},{op:"max",field:m.field,as:`upper_whisker_${T}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${T}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${T}`},...v],groupby:y}],layer:q},{tooltip:de,...ge}=k,{scale:Ie,axis:pe}=m,He=Ase(m),Ue=Ju(pe,["title"]),yt=v8e(a,"outliers",t.boxplot,{transform:[{filter:`(${te} < ${H}) || (${te} > ${G})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...He!==void 0?{title:He}:{},...Ie!==void 0?{scale:Ie}:{},...zr(Ue)?{}:{axis:Ue}},...ge,...C?{color:C}:{},...x?{tooltip:x}:{}}})[0];let it;const be=[...d,...h,le];return yt?it={transform:be,layer:[yt,fe]}:(it=fe,it.transform.unshift(...be)),{...o,layer:[it,{transform:p,layer:P}]}}function x8e(e){const t=dT(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function cun(e,t,n){const r=_8e(e,wL),{continuousAxisChannelDef:i,continuousAxis:s}=b8e(e,r,wL),o=i.field,a=dT(o),u=w8e(t),l=[...x8e(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=aun(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:b}=g8e(p,n),w=r==="vertical"?"horizontal":"vertical",E=r,x=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:x,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:h}}const kse="errorbar",fun=["ticks","rule"],dun=new AB(kse,S8e);function S8e(e,{config:t}){e={...e,encoding:IB(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=T8e(e,kse,t);delete s.size;const c=Ise(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function hun(e,t){const{encoding:n}=e;if(pun(n))return{orient:_8e(e,t),inputType:"raw"};const r=mun(n),i=gun(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(fn(a)&&fn(u))throw new Error(`${t} cannot have both x2 and y2`);if(fn(a)){if(x0(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(fn(u)){if(x0(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(fn(u)&&!fn(a))throw new Error(`${t} cannot have xError2 without xError`);if(fn(c)&&!fn(l))throw new Error(`${t} cannot have yError2 without yError`);if(fn(a)&&fn(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(fn(a)){if(x0(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(fn(l)){if(x0(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function pun(e){return(fn(e.x)||fn(e.y))&&!fn(e.x2)&&!fn(e.y2)&&!fn(e.xError)&&!fn(e.xError2)&&!fn(e.yError)&&!fn(e.yError2)}function mun(e){return fn(e.x2)||fn(e.y2)}function gun(e){return fn(e.xError)||fn(e.xError2)||fn(e.yError)||fn(e.yError2)}function T8e(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=Qh(r)?r:{type:r};s&&Ze(vje(t));const{orient:l,inputType:c}=hun(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=b8e(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=yun(u,f,d,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:E,[m==="x"?"xError":"yError"]:x,[m==="x"?"xError2":"yError2"]:T,...C}=i,{bins:A,timeUnits:k,aggregate:R,groupby:O,encoding:D}=g8e(C,n),$=[...R,...g],F=c!=="raw"?[]:O,L=RW(v,f,D,b);return{transform:[...a.transform??[],...A,...k,...$.length===0?[]:[{aggregate:$,groupby:F}],...y],groupby:F,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:D,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:L}}function yun(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Ze(kon(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:nN(h)},{fieldPrefix:"upper_",titlePrefix:dve(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:dve(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:AE({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:AE({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:AE({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Ze(Ion(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:Pb(Pb(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function dve(e,t,n){return`${nN(e)} ${n} ${t}`}const Rse="errorband",vun=["band","borders"],bun=new AB(Rse,C8e);function C8e(e,{config:t}){e={...e,encoding:IB(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=T8e(e,Rse,t),l=o,c=Ise(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Ze(rve("interpolate")):l.tension&&Ze(rve("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const A8e={};function Nse(e,t,n){const r=new AB(e,t);A8e[e]={normalizer:r,parts:n}}function _un(){return Ke(A8e)}Nse(wL,E8e,uun);Nse(kse,S8e,fun);Nse(Rse,C8e,vun);const wun=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],I8e={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},k8e={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Eun=Ke(I8e),xun=Ke(k8e),Sun={header:1,headerRow:1,headerColumn:1,headerFacet:1},R8e=Ke(Sun),N8e=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Tun={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},Cun={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},md="_vgsid_",Aun={point:{on:"click",fields:[md],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Dse(e){return e==="legend"||!!(e!=null&&e.legend)}function FU(e){return Dse(e)&&gt(e)}function Pse(e){return!!(e!=null&&e.select)}function D8e(e){const t=[];for(const n of e||[]){if(Pse(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function Iun(e){return kB(e)||$se(e)||Ose(e)}function Ose(e){return"concat"in e}function kB(e){return"vconcat"in e}function $se(e){return"hconcat"in e}function P8e({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Zh(e){return gt(e)&&e.step!==void 0}function hve(e){return e.view||e.width||e.height}const pve=20,kun={align:1,bounds:1,center:1,columns:1,spacing:1},Run=Ke(kun);function Nun(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(EB(e)&&!lN(e.facet)||Ose(e))&&(i.columns=o),kB(e)&&(i.columns=1);for(const a of Run)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=dr(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function NW(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function EL(e,t){const n=xL(e,t);return Zh(n)?n.step:O8e}function xL(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return hs(n,{step:e.step})}const O8e=20,Dun={continuousWidth:200,continuousHeight:200,step:O8e},Pun={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:Dun,mark:Dan,arc:{},area:{},bar:$an,circle:{},geoshape:{},image:{},line:{},point:{},rect:Man,rule:{color:"black"},square:{},text:{color:"black"},tick:Lan,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:aan,projection:{},legend:Tun,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Aun,style:{},title:{},facet:{spacing:pve},concat:{spacing:pve},normalizedNumberFormat:".0%"},$p=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],mve={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},gve={blue:$p[0],orange:$p[1],red:$p[2],teal:$p[3],green:$p[4],yellow:$p[5],purple:$p[6],pink:$p[7],brown:$p[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Oun(e={}){return{signals:[{name:"color",value:gt(e)?{...gve,...e}:gve}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function $un(e){return{signals:[{name:"fontSize",value:gt(e)?{...mve,...e}:mve}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function Mun(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function $8e(e){const t=Ke(e||{}),n={};for(const r of t){const i=e[r];n[r]=dN(i)?fje(i):kl(i)}return n}function Lun(e){const t=Ke(e),n={};for(const r of t)n[r]=$8e(e[r]);return n}const Fun=[...Qje,...h8e,...R8e,"background","padding","legend","lineBreak","scale","style","title","view"];function M8e(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=tT({},sn(Pun),n?Mun(n):{},t?Oun(t):{},r?$un(r):{},s||{});i&&nT(o,"selection",i,!0);const a=Ju(o,Fun);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=kl(o[u]));for(const u of Qje)o[u]&&(a[u]=$u(o[u]));for(const u of h8e)o[u]&&(a[u]=$8e(o[u]));for(const u of R8e)o[u]&&(a[u]=$u(o[u]));return o.legend&&(a.legend=$u(o.legend)),o.scale&&(a.scale=$u(o.scale)),o.style&&(a.style=Lun(o.style)),o.title&&(a.title=$u(o.title)),o.view&&(a.view=$u(o.view)),a}const Bun=new Set(["view",...Can]),jun=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Uun={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...Nan};function zun(e){e=sn(e);for(const t of jun)delete e[t];if(e.axis)for(const t in e.axis)dN(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of wun)delete e.legend[t];if(e.mark){for(const t of ove)delete e.mark[t];e.mark.tooltip&&gt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(D8e(e.params)),delete e.params);for(const t of Bun){for(const r of ove)delete e[t][r];const n=Uun[t];if(n)for(const r of n)delete e[t][r];Hun(e,t)}for(const t of _un())delete e[t];Vun(e);for(const t in e)gt(e[t])&&zr(e[t])&&delete e[t];return zr(e)?void 0:e}function Vun(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=cje(e.title);zr(t)||(e.style["group-title"]={...e.style["group-title"],...t}),zr(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),zr(r)?delete e.title:e.title=r}function Hun(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};zr(s)||(e.style[n??t]=s),delete e[t]}function RB(e){return"layer"in e}function qun(e){return"repeat"in e}function Wun(e){return!Be(e.repeat)&&e.repeat.layer}class Mse{map(t,n){return EB(t)?this.mapFacet(t,n):qun(t)?this.mapRepeat(t,n):$se(t)?this.mapHConcat(t,n):kB(t)?this.mapVConcat(t,n):Ose(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(RB(t))return this.mapLayer(t,n);if(Ig(t))return this.mapUnit(t,n);throw new Error(Jie(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const Gun={zero:1,center:1,normalize:1};function Yun(e){return e in Gun}const Kun=new Set([Yje,vB,yB,gL,_B,vse,bse,bB,Kje,yse]),Xun=new Set([vB,yB,Yje]);function tw(e){return et(e)&&qx(e)==="quantitative"&&!e.bin}function yve(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(et(o)&&et(a))if(tw(o)&&tw(a)){if(o.stack)return t;if(a.stack)return i;const u=et(o)&&!!o.aggregate,l=et(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(tw(o))return t;if(tw(a))return i}else{if(tw(o))return s&&n==="vertical"?void 0:t;if(tw(a))return s&&n==="horizontal"?void 0:i}}function Qun(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function L8e(e,t){var m,g;const n=Qh(e)?e:{type:e},r=n.type;if(!Kun.has(r))return null;const i=yve(t,"x",n)||yve(t,"theta",n);if(!i)return null;const s=t[i],o=et(s)?at(s,{}):void 0,a=Qun(i),u=[],l=new Set;if(t[a]){const y=t[a],v=et(y)?at(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=et(f)?at(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=csn.reduce((y,v)=>{if(v!=="tooltip"&&W1(t,v)){const b=t[v];for(const w of pt(b)){const E=Jh(w);if(E.aggregate)continue;const x=at(E,{});(!x||!l.has(x))&&y.push({channel:v,fieldDef:E})}}return y},[]);let p;return s.stack!==void 0?uv(s.stack)?p=s.stack?"zero":null:p=s.stack:Xun.has(r)&&(p="zero"),!p||!Yun(p)||Tse(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==Zu.LINEAR&&s!=null&&s.stack&&Ze(Ton(s.scale.type)),fn(t[wp(i)])?(s.stack!==void 0&&Ze(Son(i)),null):(et(s)&&s.aggregate&&!Esn.has(s.aggregate)&&Ze(Con(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:x_(r),stackBy:h,offset:p}))}function F8e(e,t,n){const r=$u(e),i=xr("orient",r,n);if(r.orient=tln(r.type,t,i),i!==void 0&&i!==r.orient&&Ze(uon(r.orient,i)),r.type==="bar"&&r.orient){const u=xr("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:Oan[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=xr("opacity",r,n),o=xr("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=Zun(r.type,t)),xr("cursor",r,n)===void 0&&(r.cursor=Jun(r,t,n)),r}function Jun(e,t,n){return t.href||e.href||xr("href",e,n)?"pointer":e.cursor}function Zun(e,t){if(Wn([_B,yse,vse,bse],e)&&!Tse(t))return .7}function eln(e,t,{graticule:n}){if(n)return!1;const r=ng("filled",e,t),i=e.type;return hs(r,i!==_B&&i!==bB&&i!==gL)}function tln(e,t,n){switch(e){case _B:case vse:case bse:case Kje:case San:case xan:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case vB:if(et(r)&&($o(r.bin)||et(i)&&i.aggregate&&!r.aggregate))return"vertical";if(et(i)&&($o(i.bin)||et(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(et(r)&&r.type===Mb&&!ci(r.bin)||yL(r))&&et(i)&&$o(i.bin)?"horizontal":"vertical";if(!o)return(et(i)&&i.type===Mb&&!ci(i.bin)||yL(i))&&et(r)&&$o(r.bin)?"vertical":"horizontal"}case gL:if(s&&!(et(r)&&$o(r.bin))&&o&&!(et(i)&&$o(i.bin)))return;case yB:if(o)return et(i)&&$o(i.bin)?"horizontal":"vertical";if(s)return et(r)&&$o(r.bin)?"vertical":"horizontal";if(e===gL){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case bB:case yse:{const a=lve(r),u=lve(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=cu(r)&&r.type===Vx,c=cu(i)&&i.type===Vx;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function nln(e){const{point:t,line:n,...r}=e;return Ke(r).length>1?r:r.type}function rln(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Ju(e[t],["point","line"])});return e}function BU(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?gt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?gt(t.point)?t.point:{}:void 0}function vve(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class iln{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Ig(t)){const{mark:r,encoding:i}=t,s=Qh(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!BU(s,n[s.type],i);case"area":return!!BU(s,n[s.type],i)||!!vve(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=IB(l,i),d=Qh(a)?a:{type:a},h=BU(d,i[d.type],f),p=d.type==="area"&&vve(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:nln({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Ju(f,["shape"])}],g=L8e(F8e(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:b}=g;y={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return y=Ju(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...Bx(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...Bx(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:rln(i)})}}function sln(e,t){return t?lN(e)?j8e(e,t):B8e(e,t):e}function jU(e,t){return t?j8e(e,t):e}function DW(e,t,n){const r=t[e];if(Uan(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Ze(zsn(r.repeat));return}return t}function B8e(e,t){if(e=DW("field",e,t),e!==void 0){if(e===null)return null;if(wse(e)&&Dh(e.sort)){const n=DW("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function bve(e,t){if(et(e))return B8e(e,t);{const n=DW("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function _ve(e,t){if(fn(e)){const n=bve(e,t);if(n)return n;if(xB(e))return{condition:e.condition}}else{if(cN(e)){const n=bve(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function j8e(e,t){const n={};for(const r in e)if(jt(e,r)){const i=e[r];if(Be(i))n[r]=i.map(s=>_ve(s,t)).filter(s=>s);else{const s=_ve(i,t);s!==void 0&&(n[r]=s)}}return n}class oln{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Ig(t)){const{encoding:n,mark:r}=t;if(r==="line"||Qh(r)&&r.type==="line")for(const i of asn){const s=b_(i),o=n[s];if(n[i]&&(et(o)&&!$o(o.bin)||xp(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Ze(aon(!!i.x2,!!i.y2)),r({...t,mark:gt(s)?{...s,type:"rule"}:"rule"},n)}}class aln extends Mse{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[lun,dun,bun,new iln,new oln]}map(t,n){if(Ig(t)){const r=W1(t.encoding,xm),i=W1(t.encoding,Sm),s=W1(t.encoding,aB);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=jU(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return Wun(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${ki(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!Be(r)&&t.columns&&(t=Ju(t,["columns"]),Ze(Zye("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!Be(r)&&r.row||[u?u.row:null],f=!Be(r)&&r.column||[u?u.column:null],d=Be(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(Be(r)?`${ki(p)}`:(r.row?`row_${ki(m)}`:"")+(r.column?`column_${ki(g)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push(Ju(b,["data"]))}const h=Be(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return lN(r)&&t.columns&&(t=Ju(t,["columns"]),Ze(Zye("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=Eve({parentProjection:o,projection:i}),l=wve({parentEncoding:s,encoding:jU(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=jU(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Ze(son([...r?[xm]:[],...i?[Sm]:[]]));const o={},a={};for(const u of[xm,Sm]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:sln(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:wve({parentEncoding:n,encoding:s,layer:!0}),parentProjection:Eve({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function wve({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Ke(e),...Ke(t)]);for(const s of i){const o=t[s],a=e[s];if(fn(o)){const u={...a,...o};r[s]=u}else cN(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||pd(a)||Nt(a)||fn(a)||Be(a))&&(r[s]=a)}}else r=t;return!r||zr(r)?void 0:r}function Eve(e){const{parentProjection:t,projection:n}=e;return t&&n&&Ze(Ysn({parentProjection:t,projection:n})),n??t}function Lse(e){return"filter"in e}function uln(e){return(e==null?void 0:e.stop)!==void 0}function U8e(e){return"lookup"in e}function lln(e){return"data"in e}function cln(e){return"param"in e}function fln(e){return"pivot"in e}function dln(e){return"density"in e}function hln(e){return"quantile"in e}function pln(e){return"regression"in e}function mln(e){return"loess"in e}function gln(e){return"sample"in e}function yln(e){return"window"in e}function vln(e){return"joinaggregate"in e}function bln(e){return"flatten"in e}function _ln(e){return"calculate"in e}function z8e(e){return"bin"in e}function wln(e){return"impute"in e}function Eln(e){return"timeUnit"in e}function xln(e){return"aggregate"in e}function Sln(e){return"stack"in e}function Tln(e){return"fold"in e}function Cln(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function Aln(e){return e.map(t=>Lse(t)?{filter:TE(t.filter,ean)}:t)}class Iln extends Mse{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=xve(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=xve(t,n),t.encoding){const r={};for(const[i,s]of Dy(t.encoding))r[i]=V8e(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:Dy(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of qo(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function xve(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(Lse(s))return{filter:PW(s,t)};if(z8e(s)&&__(s.bin))return{...s,bin:H8e(s.bin)};if(U8e(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function V8e(e,t){var r,i;const n=sn(e);if(et(n)&&__(n.bin)&&(n.bin=H8e(n.bin)),S_(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(xB(n))if(Be(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:PW(s,t)}});else{const{selection:s,param:o,test:a,...u}=V8e(n.condition,t);n.condition=o?n.condition:{...u,test:PW(n.condition,t)}}return n}function H8e(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function PW(e,t){const n=r=>TE(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):TE(e.test||e.filter,r=>r.selection?n(r.selection):r)}class OW extends Mse{map(t,n){const r=n.selections??[];if(t.params&&!Ig(t)){const i=[];for(const s of t.params)Pse(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(mt(a)&&(a===t.name||i.includes(a))||Be(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=OW.prototype[e];OW.prototype[e]=function(n,r){return t.call(this,n,kln(n,r))}}function kln(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function q8e(e,t){t===void 0&&(t=M8e(e.config));const n=Pln(e,t),{width:r,height:i}=e,s=Oln(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const Rln=new aln,Nln=new Iln,Dln=new OW;function Pln(e,t={}){const n={config:t};return Dln.map(Rln.map(Nln.map(e,n),n),n)}function Sve(e){return mt(e)?{type:e}:e??{}}function Oln(e,t,n){let{width:r,height:i}=t;const s=Ig(e)||RB(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Ze(Kye("width")),r=void 0),i=="container"&&(Ze(Kye("height")),i=void 0));const a={type:"pad",...o,...n?Sve(n.autosize):{},...Sve(e.autosize)};if(a.type==="fit"&&!s&&(Ze(Nsn),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Ze(Xye("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Ze(Xye("height")),!Ll(a,{type:"pad"}))return a}function $ln(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function Mln(e){return e?`fit-${dB(e)}`:"fit"}const Lln=["background","padding"];function Tve(e,t){const n={};for(const r of Lln)e&&e[r]!==void 0&&(n[r]=kl(e[r]));return t&&(n.params=e.params),n}class kg{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new kg(sn(this.explicit),sn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return hs(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Ke(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Yd(e){return{explicit:!0,value:e}}function wl(e){return{explicit:!1,value:e}}function W8e(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:NB(t,n,r,i)}}function NB(e,t,n,r){return e.explicit&&t.explicit&&Ze(yon(n,r,e.value,t.value)),e}function $y(e,t,n,r,i=NB){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Ll(e.value,t.value)?e:i(e,t,n,r)}class Fln extends kg{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Yx(e){return"url"in e}function dk(e){return"values"in e}function G8e(e){return"name"in e&&!Yx(e)&&!dk(e)&&!X0(e)}function X0(e){return e&&(Y8e(e)||K8e(e)||Fse(e))}function Y8e(e){return"sequence"in e}function K8e(e){return"sphere"in e}function Fse(e){return"graticule"in e}var Ti;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(Ti||(Ti={}));function X8e(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Zc(i.field),i}function Bb(e,t=!0,n=Ra){if(Be(e)){const r=e.map(i=>Bb(i,t,n));return t?`[${r.join(", ")}]`:r}else if(w_(e))return n(t?$b(e):zon(e));return t?n(Vr(e)):e}function Bln(e,t){for(const n of qo(e.component.selection??{})){const r=n.name;let i=`${r}${Ly}, ${n.resolve==="global"?"true":`{unit: ${G1(e)}}`}`;for(const s of $B)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+ycn,on:[{events:{signal:n.name+Ly},update:`modify(${rt(n.name+jb)}, ${i})`}]})}return Bse(t)}function jln(e,t){if(e.component.selection&&Ke(e.component.selection).length){const n=rt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:cv("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Bse(t)}function Uln(e,t){let n=!1;for(const r of qo(e.component.selection??{})){const i=r.name,s=rt(i+jb);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${p9e}(${s}, ${rt(a)}${u}`})}n=!0;for(const a of $B)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),Bse(t)}function zln(e,t){const n=[...t],r=G1(e,{escape:!1});for(const i of qo(e.component.selection??{})){const s={name:i.name+jb};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:md}}]),i.init){const a=i.project.items.map(X8e);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[md]:Bb(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:Bb(u,!1)}))}n.filter(a=>a.name===i.name+jb).length||n.push(s)}return n}function Q8e(e,t){for(const n of qo(e.component.selection??{}))for(const r of $B)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function Vln(e,t){for(const n of e.children)Ji(n)&&(t=Q8e(n,t));return t}function Hln(e,t,n,r){const i=b9e(e,t.param,t);return{signal:ic(n.get("type"))&&Be(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function Bse(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Br{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Ze(qsn);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class el extends Br{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${GBe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function UU(e){return e.as!==void 0}function Cve(e){return`${e}_end`}class Ph extends Br{clone(){return new Ph(null,sn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(E_(u)){if(Ji(n)){const{mark:c,markDef:f,config:d}=n,h=Oy({fieldDef:s,markDef:f,config:d});(fk(c)||h)&&(l={timeUnit:yo(u),field:a})}}else l={as:at(s,{forAs:!0}),field:a,timeUnit:u};if(Ji(n)){const{mark:c,markDef:f,config:d}=n,h=Oy({fieldDef:s,markDef:f,config:d});fk(c)&&ps(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[qn(l)]=l)}return i},{});return zr(r)?null:new Ph(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=yo(r),o={...i,timeUnit:s};return new Ph(t,{[qn(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of Dy(this.timeUnits)){const s=UU(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(qo(this.timeUnits).map(t=>UU(t)?t.as:Cve(t.field)))}dependentFields(){return new Set(qo(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${qn(this.timeUnits)}`}assemble(){const t=[];for(const n of qo(this.timeUnits)){const{rectBandPosition:r}=n,i=yo(n.timeUnit);if(UU(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:Zc(s),type:"timeunit",...a?{units:gB(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...Ave(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=J8e({timeUnit:i,field:o}),u=Cve(o);t.push({type:"formula",expr:a,as:u}),t.push(...Ave([o,u],r,i))}}return t}}const DB="offsetted_rect_start",PB="offsetted_rect_end";function J8e({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=kje(r),{part:o,step:a}=Pje(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function Ave([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:Ive([J8e({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${DB}`},{type:"formula",expr:Ive([i,s],n+.5),as:`${e}_${PB}`}]}return[]}function Ive([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const hN="_tuple_fields";class qln{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Wln={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new qln),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=ki(`${r}_${g}`);for(let v=1;a.has(y);v++)y=ki(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?pt(n.value):null;let{fields:d,encodings:h}=gt(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(gt(p))for(const m of Ke(p))osn(m)?(h||(h=[])).push(m):l==="interval"?(Ze(Usn),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Ze(Dsn(p,m.aggregate));continue}else if(!g){Ze(Jye(p));continue}if(m.timeUnit&&!E_(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[qn(y)]=y}if(!s[g]){const y=l==="interval"&&Ag(p)&&ic(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===md,ZBe(p)?(v.geoChannel=p,v.channel=JBe(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else Ze(Jye(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===md}f&&(t.init=f.map(p=>i.items.map(m=>gt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),zr(o)||(i.timeUnit=new Ph(null,o))},signals:(e,t,n)=>{const r=t.name+hN;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(X8e)})}},Tm={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Ag(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Ze(Msn),!s||!ic(o)){Ze($sn);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||kve(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(p9e)>=0)i.update=`{${r.map(o=>`${rt(Zc(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${rt(Zc(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!kve(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function $W(e,t){return`domain(${rt(e.scaleName(t))})`}function kve(e){return e.parent&&bT(e.parent)&&!e.parent.parent}const IE="_brush",Z8e="_scale_trigger",EC="geo_interval_init_tick",e9e="_init",Gln="_center",Yln={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...gt(n.select)?n.select:{}};i.fields=[md],i.encodings||(i.encodings=n.value?Ke(n.value):[Ad,Cd]),n.select={type:"interval",...i}}if(t.translate&&!Tm.defined(t)){const i=`!event.item || event.item.mark.name !== ${rt(t.name+IE)}`;for(const s of t.events){if(!s.between){Ze(`${s} is not an ordered event stream for interval selections.`);continue}const o=pt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+Ly,s=qo(t.project.hasChannel).filter(a=>a.channel===Ri||a.channel===xo),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(Kln(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=rt(e.projectionName()),u=e.projectionName()+Gln,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=E=>e.getSizeSignalRef(E).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+e9e,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(x=>x.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${rt(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${G1(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,w=s.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:EC}]:[]],update:b}]})}else{if(!Tm.defined(t)){const l=r+Z8e,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=rt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=ic(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${G1(e)}, fields: ${r+hN}, values`;return n.concat({name:i,...o?{init:`{${u}: ${Bb(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Ji(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===EC).length||n.unshift({name:EC,value:null,on:[{events:"timer{1}",update:`${EC} === null ? {} : ${EC}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${rt(t.name+jb)})`;if(Tm.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of Ke(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${G1(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=Ke(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+IE}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+IE,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function Kln(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=rt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===Ri?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=Tm.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:Bb(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+Z8e},update:ic(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:Bb(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===Ri?0:1,h=t.name+e9e,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const Xln={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+hN,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=qo(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+IE):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${G1(e)}, `;if(t.project.hasSelectionId)l+=`${md}: ${o}[${rt(md)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${rt(e.vgField(d.channel,{}))}], ${o}[${rt(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${rt(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+Ly,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function mT(e,t,n,r){const i=xB(t)&&t.condition,s=r(t);if(i){const a=pt(i).map(u=>{const l=r(u);if(jan(u)){const{param:c,empty:f}=u;return{test:v9e(e,{param:c,empty:f}),...l}}else return{test:CL(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function jse(e,t="text"){const n=e.encoding[t];return mT(e,n,t,r=>OB(r,e.config))}function OB(e,t,n="datum"){if(e){if(pd(e))return mi(e.value);if(fn(e)){const{format:r,formatType:i}=bL(e);return gse({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function t9e(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(Be(o))return{tooltip:Rve({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return mT(e,o,"tooltip",u=>{const l=OB(u,i,a);if(l)return l;if(u===null)return;let c=xr("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),mt(c))return{value:c};if(gt(c))return Nt(c)?c:c.content==="encoding"?Rve(n,s,i,t):{signal:a}})}}function n9e(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=b_(f),h=cu(c)?c:{...c,type:e[d].type},p=h.title||xse(h,i),m=pt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(ps(f)){const y=f==="x"?"x2":"y2",v=Jh(e[y]);if($o(h.bin)&&v){const b=at(h,{expr:o}),w=at(v,{expr:o}),{format:E,formatType:x}=bL(h);g=uN(b,w,E,x,i),s[y]=!0}}if((ps(f)||f===hf||f===Td)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=bL(h);g=gse({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=OB(h,i,o).signal),a.push({channel:f,key:m,value:g})}Cse(e,(c,f)=>{et(c)?u(c,f):SB(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function Rve(e,t,n,{reactiveGeom:r}={}){const i=n9e(e,t,n,{reactiveGeom:r}),s=Dy(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function Qln(e){const{markDef:t,config:n}=e,r=xr("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...Jln(e),...Zln(e)}}function Jln(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=xr("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in Isn?{}:{ariaRoleDescription:{value:t}}}function Zln(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return mT(e,s,"description",u=>OB(u,e.config));const o=xr("description",n,r);if(o!=null)return{description:mi(o)};if(r.aria===!1)return{};const a=n9e(t,i,r);if(!zr(a))return{description:{signal:Dy(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function so(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=xr(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=mi(u)));const l=i[e];return mT(t,l,o??e,c=>mse({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function r9e(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??xr("filled",n,i),a=Wn(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=xr(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=xr(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:mi(u)}:{},...l?{stroke:mi(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Ze(_je("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...so("color",e,{vgChannel:c,defaultValue:o?u:l}),...so("fill",e,{defaultValue:r.fill?u:void 0}),...so("stroke",e,{defaultValue:r.stroke?l:void 0})}}function ecn(e){const{encoding:t,mark:n}=e,r=t.order;return!x_(n)&&pd(r)?mT(e,r,"zindex",i=>mi(i.value)):{}}function Kx({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:mse({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:mi(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function wa(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[wp(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=Kx({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=Use({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&ps(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:tcn({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function tcn(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(fn(n)&&i&&t===i.fieldChannel){if(et(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return mL({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return q1(n,r,{suffix:"end"},{offset:s})}return hse(e)}function Use({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=b_(n),u=Py(n),l=xr(n,s,o,{vgChannel:u});if(l!==void 0)return v2(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!Wn([Zu.LOG,Zu.TIME,Zu.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[fl(n)],mult:.5}}}}const ncn={left:"x",center:"xc",right:"x2"},rcn={top:"y",middle:"yc",bottom:"y2"};function i9e(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Py(e);const i=e==="x"?"align":"baseline",s=xr(i,t,n);let o;return Nt(s)?(Ze(oon(i)),o=void 0):o=s,e==="x"?ncn[o||(r==="top"?"left":"center")]:rcn[o||r]}function SL(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?s9e(e,t,{defaultPos:n,defaultPos2:r}):wa(e,t,{defaultPos:n})}function s9e(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=wp(e),a=fl(e),u=icn(t,r,o),l=u[a]?i9e(e,i,s):Py(e);return{...wa(e,t,{defaultPos:n,vgChannel:l}),...u}}function icn(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=b_(n),l=fl(n),c=Py(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?Kx({channel:n,markDef:s,encoding:r,model:e}):Kx({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=fl(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=scn({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:uP(n,s)||uP(n,{[n]:hL(n,s,a.style),[l]:hL(l,s,a.style)})||uP(n,a[i])||uP(n,a.mark)||{[c]:Use({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function scn({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return fn(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?q1(t,s,{suffix:"start"},{offset:u}):hse({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function uP(e,t){const n=fl(e),r=Py(e);if(t[r]!==void 0)return{[r]:v2(e,t[r])};if(t[e]!==void 0)return{[r]:v2(e,t[e])};if(t[n]){const i=t[n];if(Fb(i))Ze(eon(n));else return{[n]:v2(e,i)}}}function My(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=wp(t),a=fl(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??xr("size",i,n,{vgChannel:a}),p=rje(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return et(u)&&(ci(u.bin)||$o(u.bin)||u.timeUnit&&!l)&&!(h&&!Fb(h))&&!r[p]&&!bo(f)?ucn({fieldDef:u,fieldDef2:l,channel:t,model:e}):(fn(u)&&bo(f)||m)&&!l?acn(u,t,e):s9e(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function ocn(e,t,n,r,i,s,o){if(Fb(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=ng("minBandSize",{type:o},r);return{signal:c?`max(${Wf(c)}, ${l})`:l}}else i.band!==1&&(Ze(con(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Nt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(yv(u)&&dr(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=hs(u,o==="bar"?l:c);if(Nt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(dr(f))return{signal:`${1-f} * ${e}`}}return{value:EL(r.view,e)-2}}function acn(e,t,n){var A,k;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=fl(t),f=wp(t),d=rje(t),h=n.scaleName(d),p=n.getScaleComponent(Gie(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=so("size",n,{vgChannel:c,defaultRef:mi(r.size)}):Ze(pon(r.type)));const y=!!g,v=t8e({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(A=l||p)==null?void 0:A.get("type"),useVlSizeChannel:m});g=g||{[c]:ocn(c,h||u,p||l,s,v,!!e,r.type)};const b=((k=l||p)==null?void 0:k.get("type"))==="band"&&Fb(v)&&!y?"top":"middle",w=i9e(t,r,s,b),E=w==="xc"||w==="yc",{offset:x,offsetType:T}=Kx({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),C=hse({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:x,defaultRef:Use({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:E?T==="encoding"?0:.5:Nt(v)?{signal:`(1-${v})/2`}:Fb(v)?(1-v.band)/2:0});if(c)return{[w]:C,...g};{const R=Py(f),O=g[c],D=x?{...O,offset:x}:O;return{[w]:C,[R]:Be(C)?[C[0],{...C[1],offset:D}]:{...C,offset:D}}}}function Nve(e,t,n,r,i,s,o){if(QBe(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Nt(n)||Nt(i)||Nt(r)||s){const l=Wf(n),c=Wf(i),f=Wf(r),d=Wf(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function ucn({fieldDef:e,fieldDef2:t,channel:n,model:r}){var k;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=t8e({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(k=r.component.axes[n])==null?void 0:k[0],h=(d==null?void 0:d.get("translate"))??.5,p=ps(n)?xr("binSpacing",s,i)??0:0,m=wp(n),g=Py(n),y=Py(m),v=ng("minBandSize",s,i),{offset:b}=Kx({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=Kx({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),E=ban({fieldDef:e,scaleName:u}),x=Nve(n,p,c,h,b,v,E),T=Nve(m,p,c,h,w??b,v,E),C=Nt(f)?{signal:`(1-${f.signal})/2`}:Fb(f)?(1-f.band)/2:.5,A=Oy({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(ci(e.bin)||e.timeUnit){const R=e.timeUnit&&A!==.5;return{[y]:Dve({fieldDef:e,scaleName:u,bandPosition:C,offset:T,useRectOffsetField:R}),[g]:Dve({fieldDef:e,scaleName:u,bandPosition:Nt(C)?{signal:`1-${C.signal}`}:1-C,offset:x,useRectOffsetField:R})}}else if($o(e.bin)){const R=q1(e,u,{},{offset:T});if(et(t))return{[y]:R,[g]:q1(t,u,{},{offset:x})};if(__(e.bin)&&e.bin.step)return{[y]:R,[g]:{signal:`scale("${u}", ${at(e,{expr:"datum"})} + ${e.bin.step})`,offset:x}}}Ze(xje(m))}function Dve({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return mL({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:DB,endSuffix:PB}:{}})}const lcn=new Set(["aria","width","height"]);function pf(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?r9e(e):{};return{...ccn(e.markDef,t),...Pve(e,"fill",n),...Pve(e,"stroke",r),...so("opacity",e),...so("fillOpacity",e),...so("strokeOpacity",e),...so("strokeWidth",e),...so("strokeDash",e),...ecn(e),...t9e(e),...jse(e,"href"),...Qln(e)}}function Pve(e,t,n){const{config:r,mark:i,markDef:s}=e;if(xr("invalid",s,r)==="hide"&&n&&!x_(i)){const a=fcn(e,{invalid:!0,channels:hB});if(a)return{[t]:[{test:a,value:null},...pt(n)]}}return n?{[t]:n}:{}}function ccn(e,t){return Asn.reduce((n,r)=>(!lcn.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=mi(e[r])),n),{})}function fcn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&ic(u)&&(s[l]=!0)}return s},{}),i=Ke(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>pse(o,t)).join(` ${s} `)}}function zse(e){const{config:t,markDef:n}=e;if(xr("invalid",n,t)){const i=dcn(e,{channels:Ep});if(i)return{defined:{signal:i}}}return{}}function dcn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&ic(l)&&(s[c]=!0)}return s},{}),i=Ke(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>pse(o,t)).join(` ${s} `)}}function Ove(e,t){if(t!==void 0)return{[e]:mi(t)}}const zU="voronoi",o9e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(zU)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(x_(s))return Ze(Psn(s)),n;const o={name:e.getName(zU),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...t9e(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(zU)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},a9e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Dse(e.bind),parse:(e,t,n)=>m9e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=o9e.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=ki(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:Bb(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${rt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+Ly)[0],o=r+hN,a=i.items.map(l=>ki(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},TL="_toggle",u9e={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+TL,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Ly,r=t.name+TL;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${G1(e)}}, `)+`${r} ? ${n} : null`}},hcn={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=mt(t.clear)?cv(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(a9e.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===ki(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+Ly);r(i,"null"),u9e.defined(t)&&(i=n.findIndex(s=>s.name===t.name+TL),r(i,"false"))}return n}},l9e={defined:e=>{const t=e.resolve==="global"&&e.bind&&Dse(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==md;return t&&!n&&Ze(Lsn),t&&n},parse:(e,t,n)=>{const r=sn(n);if(r.select=mt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},m9e(t,r),gt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=pt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=FU(t.bind)?t.bind.legend:"click",s=mt(i)?cv(i,"view"):pt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=FU(t.bind)&&t.bind.legend,s=o=>a=>{const u=sn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${ki(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+Ly),o=r+hN,a=i.items.filter(d=>d.hasLegend).map(d=>ki(`${r}_${ki(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+TL),f=FU(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function pcn(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of qo(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&l9e.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const c9e="_translate_anchor",f9e="_translate_delta",mcn={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Tm.defined(t),s=r+c9e,{x:o,y:a}=t.project.hasChannel;let u=cv(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+IE,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?$W(e,Ri):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?$W(e,xo):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+f9e,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&$ve(e,t,o,"width",n),a!==void 0&&$ve(e,t,a,"height",n),n}};function $ve(e,t,n,r,i){const s=t.name,o=s+c9e,a=s+f9e,u=n.channel,l=Tm.defined(t),c=i.filter(E=>E.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===Ri?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${v}(${g}, ${y}${b})`;c.on.push({events:{signal:a},update:l?w:`clampRange(${w}, 0, ${f})`})}const d9e="_zoom_anchor",h9e="_zoom_delta",gcn={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Tm.defined(t),s=r+h9e,{x:o,y:a}=t.project.hasChannel,u=rt(e.scaleName(Ri)),l=rt(e.scaleName(xo));let c=cv(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+IE,f))),n.push({name:r+d9e,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&Mve(e,t,o,"width",n),a!==void 0&&Mve(e,t,a,"height",n),n}};function Mve(e,t,n,r,i){const s=t.name,o=n.channel,a=Tm.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?$W(e,o):u.name,h=s+h9e,p=`${s}${d9e}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const jb="_store",Ly="_tuple",ycn="_modify",p9e="vlSelectionResolve",$B=[Xln,Yln,Wln,u9e,a9e,Tm,l9e,hcn,mcn,gcn,o9e];function vcn(e){let t=e.parent;for(;t&&!Vl(t);)t=t.parent;return t}function G1(e,{escape:t}={escape:!0}){let n=t?rt(e.name):e.name;const r=vcn(e);if(r){const{facet:i}=r;for(const s of Lc)i[s]&&(n+=` + '__facet_${s}_' + (facet[${rt(r.vgField(s))}])`)}return n}function Vse(e){return qo(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function m9e(e,t){(mt(t.select)||!t.select.on)&&delete e.events,(mt(t.select)||!t.select.clear)&&delete e.clear,(mt(t.select)||!t.select.toggle)&&delete e.toggle}function MW(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...MW(e.object)),t.push(...MW(e.property))),t)}function g9e(e){return e.object.type==="MemberExpression"?g9e(e.object):e.object.name==="datum"}function y9e(e){const t=lie(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&g9e(r)&&n.add(MW(r).slice(1).join("."))}),n}class gT extends Br{clone(){return new gT(null,this.model,sn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=CL(this.model,this.filter,this),this._dependentFields=y9e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function bcn(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=ki(i.name),o=i.select,a=mt(o)?o:o.type,u=gt(o)?sn(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=sn(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:mt(u.on)?cv(u.on,"scope"):pt(sn(u.on))},f=sn(i);for(const d of $B)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function v9e(e,t,n,r="datum"){const i=mt(t)?t:t.param,s=ki(i),o=rt(s+jb);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${rt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function b9e(e,t,n){const r=ki(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Ze(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${rt(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Ze((a.length?"Multiple ":"No ")+`matching ${rt(i)} encoding found for selection ${rt(n.param)}. Using "field": ${rt(s)}.`)):s=a[0].field}return`${o.name}[${rt(Zc(s))}]`}function _cn(e,t){for(const[n,r]of Dy(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new el(new gT(t,e,{param:n}),i,Ti.Lookup,e.component.data.outputNodeRefCounts)}}function CL(e,t,n){return y2(t,r=>mt(r)?r:Qon(r)?v9e(e,r,n):$je(r))}function wcn(e,t){if(e)return Be(e)&&!Jg(e)?e.map(n=>xse(n,t)).join(", "):e}function VU(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function mA(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=eun[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(dN(m)){const{condition:g,...y}=m,v=pt(g),b=cve[h];if(b){const{vgProp:w,part:E}=b,x=[...v.map(T=>{const{test:C,...A}=T;return{test:CL(null,C),...A}}),y];VU(c,E,w,x),delete c[h]}else if(b===null){const w={signal:v.map(E=>{const{test:x,...T}=E;return`${CL(null,x)} ? ${Yye(T)} : `}).join("")+Yye(y)};c[h]=w}}else if(Nt(m)){const g=cve[h];if(g){const{vgProp:y,part:v}=g;VU(c,v,y,m),delete c[h]}}Wn(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},zr(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:hs(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Nt(c.encode.labels.update.text)&&(p=Pb(a,"datum.label",c.encode.labels.update.text.signal)),VU(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of f8e)e.hasAxisPart(p)||delete c.encode[p];zr(c.encode)&&delete c.encode}const h=wcn(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:hs(l,0)}}}}function _9e(e){const{axes:t}=e.component,n=[];for(const r of Ep)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function Ecn(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>mA(i,"grid",t)),...r.map(i=>mA(i,"grid",t)),...n.map(i=>mA(i,"main",t)),...r.map(i=>mA(i,"main",t))].filter(i=>i)}function Lve(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...Ke(o),...Ke(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${Wf(o[c])} : ${Wf(a[c])}`};return l}return t[i]})])}function xcn(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:Bje(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Nt(n)?"axisOrient":`axis${nN(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:Lve(a,r,e,n),vgAxisConfig:Lve(u,r,e,n),axisConfigStyle:Scn([...u,...a],r)}}function Scn(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=pt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function LW(e,t,n,r={}){var s;const i=hje(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const Fve={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??Tcn(n,e),gridScale:({model:e,channel:t})=>Ccn(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||E9e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||w9e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??Icn(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??kcn(t.type,n,et(t)&&!!t.timeUnit,et(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??Ncn({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:Dcn,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=x9e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return mje(i?[uve(i)]:[],et(o)?[uve(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>Pcn(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??Ocn(n,t)};function Tcn(e,t){return!bo(e)&&et(t)&&!ci(t==null?void 0:t.bin)&&!$o(t==null?void 0:t.bin)}function Ccn(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function Acn(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Nt(s)?s:ck(s);{const{configValue:o}=LW("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?ck(o):n===Ri&&Wn([dse,fse],e.type)&&!(et(e)&&e.timeUnit)?270:void 0}}function FW(e){return`(((${e.signal} % 360) + 360) % 360)`}function w9e(e,t,n,r){if(e!==void 0)if(n==="x"){if(Nt(e)){const i=FW(e),s=Nt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Nt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Nt(e)){const i=FW(e),s=Nt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Nt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function E9e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Nt(e)){const o=FW(e),a=Nt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Nt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function Icn(e,t){if(t==="x"&&Wn(["quantitative","temporal"],e))return!0}function kcn(e,t,n,r){if(n&&!gt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function Rcn(e){return e==="x"?"bottom":"left"}function Ncn({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!bo(t)&&t!=="log"){if(et(e)){if(ci(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Wn(["month","hours","day","quarter"],(i=yo(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function Dcn({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(et(t)){const{timeUnit:n}=t;if(n){const r=Dje(n);if(r)return{signal:r}}}}function x9e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return gje(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function Pcn(e,t){const n=e.values;if(Be(n))return c8e(t,n);if(Nt(n))return n}function Ocn(e,t){return e==="rect"&&vL(t)?1:0}class Xx extends Br{clone(){return new Xx(null,sn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=y9e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(S_(r)&&e8e(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${$je({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new Xx(t,{calculate:u,as:Qx(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${qn(this.transform)}`}}function Qx(e,t,n){return at(e,{prefix:t,suffix:"sort_index",...n})}function MB(e,t){return Wn(["top","bottom"],t)?"column":Wn(["left","right"],t)||e==="row"?"row":"column"}function Jx(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return hs((t||{})[e],i[e],n.header[e])}function LB(e,t,n,r){const i={};for(const s of e){const o=Jx(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const Hse=["row","column"],qse=["header","footer"];function $cn(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=LB(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=MB(t,a),l=ck(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...T9e(l,u),...S9e(u,l,s),...C9e(r,i,t,Eun,I8e)}}}function S9e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=E9e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function T9e(e,t){const n=w9e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Mcn(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of qse)if(n[i])for(const s of n[i]){const o=Fcn(e,t,i,n,s);o!=null&&r.push(o)}return r}function Lcn(e,t){const{sort:n}=e;return Dh(n)?{field:at(n,{expr:"datum"}),order:n.order??"ascending"}:Be(n)?{field:Qx(e,t,{expr:"datum"}),order:"ascending"}:{field:at(e,{expr:"datum"}),order:n??"ascending"}}function BW(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=LB(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=gse({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=MB(t,a);return{text:{signal:u?Pb(Pb(u,"datum.label",l),"datum.value",at(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...T9e(s,c),...S9e(c,s,o),...C9e(n,e,t,xun,k8e)}}function Fcn(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=LB(["labelOrient"],o.header,a,t);(t==="row"&&!Wn(["top","bottom"],f)||t==="column"&&!Wn(["left","right"],f))&&(s=BW(o,t,a))}const u=Vl(e)&&!lN(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:Lcn(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const Bcn={column:{start:0,end:1},row:{start:1,end:0}};function jcn(e,t){return Bcn[t][e]}function Ucn(e,t){const n={};for(const r of Lc){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=LB(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=MB(r,o),u=jcn(s,a);u!==void 0&&(n[a]=u)}}return zr(n)?void 0:n}function C9e(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=Jx(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function Wse(e){return[...lP(e,"width"),...lP(e,"height"),...lP(e,"childWidth"),...lP(e,"childHeight")]}function lP(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(bo(o)&&yv(a)){const u=e.scaleName(n);return Vl(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[Bve(u,a)]:[Bve(u,a),{name:i,update:A9e(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=NW(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function Bve(e,t){const n=`${e}_step`;return Nt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function A9e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=hs(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${Wf(o)}, ${Wf(s)}) * ${e}_step`}function I9e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function k9e(e,t){return Ke(e).reduce((n,r)=>{const i=e[r];return{...n,...mT(t,i,r,s=>mi(s.value))}},{})}function R9e(e,t){if(Vl(t))return e==="theta"?"independent":"shared";if(bT(t))return"shared";if(Zse(t))return ps(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Gse(e,t){const n=e.scale[t],r=ps(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Ze(bon(t)),"independent"):e[r][t]||"shared"}const zcn={...Cun,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},N9e=Ke(zcn);class Vcn extends kg{}const jve={symbols:Hcn,gradient:qcn,labels:Wcn,entries:Gcn};function Hcn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...Rsn({},n,kan),...r9e(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?D9e(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===ll)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=mi(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=mi(m??1));else if(Be(f.fill)){const g=jW(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=mi(g))}}if(f.stroke){if(r==="stroke"||!c&&r===ll)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(Be(f.stroke)){const g=hs(jW(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==Cg){const g=et(t)&&O9e(n,i,t);g?f.opacity=[{test:g,...mi(m??1)},mi(u.legend.unselectedOpacity)]:m&&(f.opacity=mi(m))}return f={...f,...e},zr(f)?void 0:f}function qcn(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?D9e(o.opacity)||s.opacity:void 0;return l&&(a.opacity=mi(l)),a={...a,...e},zr(a)?void 0:a}function Wcn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=et(t)?O9e(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;Lb(c)?f=Yf({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=Yf({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&et(t)&&t.timeUnit===void 0&&(f=Yf({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return zr(d)?void 0:d}function Gcn(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function D9e(e){return P9e(e,(t,n)=>Math.max(t,n.value))}function jW(e){return P9e(e,(t,n)=>hs(t,n.value))}function P9e(e,t){if(zan(e))return pt(e.condition).reduce(t,e.value);if(pd(e))return e.value}function O9e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=rt(n.field);return r.map(s=>`(!length(data(${rt(ki(s)+jb)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const Uve={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return qje(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return Wje(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??efn(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??tfn(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??Kcn(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>AE(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(CE(n)&&Gf(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Ycn(t,e)};function Ycn(e,t){const n=e.values;if(Be(n))return c8e(t,n);if(Nt(n))return n}function Kcn(e,t,n,r){if(t!=="shape"){const i=jW(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Xcn(e){const{legend:t}=e;return hs(t.type,Qcn(e))}function Qcn({channel:e,timeUnit:t,scaleType:n}){if(CE(e)){if(Wn(["quarter","month","day"],t))return"symbol";if(Gf(n))return"gradient"}return"symbol"}function Jcn({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??Zcn(n,t)}function Zcn(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function efn({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(Gf(i))return n==="horizontal"?r==="top"||r==="bottom"?zve(t,"width",o,s):o:zve(t,"height",u,a)}function zve(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function tfn(e){if(Wn(["quantile","threshold","log","symlog"],e))return"greedy"}function $9e(e){const t=Ji(e)?nfn(e):ofn(e);return e.component.legends=t,t}function nfn(e){const{encoding:t}=e,n={};for(const r of[ll,...N8e]){const i=Bs(t[r]);!i||!e.getScaleComponent(r)||r===cl&&et(i)&&i.type===pT||(n[r]=sfn(e,r))}return n}function rfn(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function ifn(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function sfn(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new Vcn({},rfn(e,t));pcn(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=Bs(i[t]),f=et(c)?(w=yo(c.timeUnit))==null?void 0:w.unit:void 0,d=n.orient||s.legend.orient||"right",h=Xcn({legend:n,channel:t,timeUnit:f,scaleType:l}),p=Jcn({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const E of N9e){if(h==="gradient"&&E.startsWith("symbol")||h==="symbol"&&E.startsWith("gradient"))continue;const x=E in Uve?Uve[E](m):n[E];if(x!==void 0){const T=ifn(x,E,n,e.fieldDef(t));(T||s.legend[E]===void 0)&&a.set(E,x,T)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const E of["labels","legend","title","symbols","gradient","entries"]){const x=k9e(g[E]??{},e),T=E in jve?jve[E](x,b):x;T!==void 0&&!zr(T)&&(v[E]={...y!=null&&y.length&&et(c)?{name:`${ki(c.field)}_legend_${E}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:T})}return zr(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function ofn(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){$9e(r);for(const i of Ke(r.component.legends))n.legend[i]=Gse(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=M9e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Ke(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function M9e(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of N9e){const c=$y(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return afn(f,d);case"title":return yje(f,d);case"type":return i=!0,wl("symbol")}return NB(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&dL(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&dL(e.explicit,["encode","gradient"])),e}function afn(e,t){return t.value==="circle"?t:e}function ufn(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function L9e(e){const t=e.component.legends,n={};for(const i of Ke(t)){const s=e.getScaleComponent(i),o=Vr(s.get("domains"));if(n[o])for(const a of n[o])M9e(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return qo(n).flat().map(i=>lfn(i,e.config)).filter(i=>i!==void 0)}function lfn(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of N8e)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Nt(s.encode.labels.update.text)&&(l=Pb(r,"datum.label",s.encode.labels.update.text.signal)),ufn(s,"labels","text",{signal:l})}return s}}function cfn(e){return bT(e)||Zse(e)?ffn(e):F9e(e)}function ffn(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),F9e(e))}function F9e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Nt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Wn(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const dfn=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class B9e extends kg{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function j9e(e){e.component.projection=Ji(e)?hfn(e):gfn(e)}function hfn(e){if(e.hasProjection){const t=$u(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?pfn(e):void 0,s=new B9e(e.projectionName(!0),{...$u(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function pfn(e){const t=[],{encoding:n}=e;for(const r of[[Ad,Cd],[ef,Id]])(Bs(n[r[0]])||Bs(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(cl)&&e.typedFieldDef(cl).type===pT&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Ti.Main)),t}function mfn(e,t){const n=jie(dfn,i=>!!(!jt(e.explicit,i)&&!jt(t.explicit,i)||jt(e.explicit,i)&&jt(t.explicit,i)&&Ll(e.get(i),t.get(i))));if(Ll(e.size,t.size)){if(n)return e;if(Ll(e.explicit,{}))return t;if(Ll(t.explicit,{}))return e}return null}function gfn(e){if(e.children.length===0)return;let t;for(const r of e.children)j9e(r);const n=jie(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=mfn(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new B9e(r,t.specifiedProjection,t.size,sn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function yfn(e,t,n,r){if(fN(t,n)){const i=Ji(e)?e.axis(n)??e.legend(n)??{}:{},s=at(t,{expr:"datum"}),o=at(t,{expr:"datum",binSuffix:"end"});return{formulaAs:at(t,{binSuffix:"range",forAs:!0}),formula:uN(s,o,i.format,i.formatType,r)}}return{}}function U9e(e,t){return`${lje(e)}_${t}`}function vfn(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function Yse(e,t,n){const r=TB(n,void 0)??{},i=U9e(r,t);return e.getName(`${i}_bins`)}function bfn(e){return"as"in e}function Vve(e,t,n){let r,i;bfn(e)?r=mt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[at(e,{forAs:!0}),at(e,{binSuffix:"end",forAs:!0})];const s={...TB(t,void 0)},o=U9e(s,e.field),{signal:a,extentSignal:u}=vfn(n,o);if(pB(s.extent)){const c=s.extent;i=b9e(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class Oh extends Br{clone(){return new Oh(null,sn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(cu(s)&&ci(s.bin)){const{key:a,binComponent:u}=Vve(s,s.bin,n);i[a]={...u,...i[a],...yfn(n,s,o,n.config)}}return i},{});return zr(r)?null:new Oh(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=Vve(n,n.bin,r);return new Oh(t,{[i]:s})}merge(t,n){for(const r of Ke(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=yh([...this.bins[r].as,...t.bins[r].as],qn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(qo(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(qo(this.bins).map(t=>t.field))}hash(){return`Bin ${qn(this.bins)}`}assemble(){return qo(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:Zc(t.field),as:r,signal:t.signal,...pB(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:Zc(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:at({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function _fn(e,t,n,r){var s;const i=Ji(r)?r.encoding[wp(t)]:void 0;if(cu(n)&&Ji(r)&&n8e(n,i,r.markDef,r.config)){e.add(at(n,{})),e.add(at(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=Oy({fieldDef:n,markDef:a,config:u});fk(o)&&l!==.5&&ps(t)&&(e.add(at(n,{suffix:DB})),e.add(at(n,{suffix:PB}))),n.bin&&fN(n,t)&&e.add(at(n,{binSuffix:"range"}))}else if(ZBe(t)){const o=JBe(t);e.add(r.getName(o))}else e.add(at(n));return S_(n)&&can((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function wfn(e,t){for(const n of Ke(t)){const r=t[n];for(const i of Ke(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class rd extends Br{clone(){return new rd(null,new Set(this.dimensions),sn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([at(o,{forAs:!0})]);else{if(tg(u)||gv(u)){const c=tg(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([at({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([at(o,{forAs:!0})]);Ag(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([at({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([at({field:l,aggregate:"max"},{forAs:!0})]))}else _fn(s,a,o,n)}),s.size+Ke(i).length===0)?null:new rd(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||at(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||at(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+Ke(i).length===0?null:new rd(t,r,i)}merge(t){return HBe(this.dimensions,t.dimensions)?(wfn(this.measures,t.measures),!0):($on("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Ke(this.measures)])}producedFields(){const t=new Set;for(const n of Ke(this.measures))for(const r of Ke(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${qn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of Ke(this.measures))for(const o of Ke(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:Zc(s));return{type:"aggregate",groupby:[...this.dimensions].map(Zc),ops:t,fields:n,as:r}}}class yT extends Br{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Lc){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[at(o),...ci(a)?[at(o,{binSuffix:"end"})]:[]],...Dh(u)?{sortField:u}:Be(u)?{sortIndexField:Qx(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Lc)this[n]&&(t+=` ${n.charAt(0)}:${qn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Lc)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Lc)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Ep){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(bo(i)&&yv(s)){const o=FB(this.childModel,n),a=Jse(o);a?t[n]=a:Ze(Zie(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=wB,field:f}=u;s.push(f),o.push(c),a.push(at(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of Hse){for(const c of qse){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[Sm,xm])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function Hve(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function Efn(e,t){const n=Vie(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=Hve(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=Hve(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Ze(Hsn(t)),null}function xfn(e){const t={};return FO(e.filter,n=>{if(Oje(n)){let r=null;rse(n)?r=kl(n.equal):sse(n)?r=kl(n.lte):ise(n)?r=kl(n.lt):ose(n)?r=kl(n.gt):ase(n)?r=kl(n.gte):use(n)?r=n.range[0]:lse(n)&&(r=(n.oneOf??n.in)[0]),r&&(w_(r)?t[n.field]="date":dr(r)?t[n.field]="number":mt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function Sfn(e){const t={};function n(r){Gx(r)?t[r.field]="date":r.type==="quantitative"&&wsn(r.aggregate)?t[r.field]="number":jx(r.field)>1?r.field in t||(t[r.field]="flatten"):S_(r)&&Dh(r.sort)&&jx(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Ji(e)||Vl(e))&&e.forEachFieldDef((r,i)=>{if(cu(r))n(r);else{const s=b_(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Ji(e)){const{mark:r,markDef:i,encoding:s}=e;if(x_(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];et(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function Tfn(e){const t={};if(Ji(e)&&e.component.selection)for(const n of Ke(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&jx(i.field)>1&&(t[i.field]="flatten")}return t}class Ea extends Br{clone(){return new Ea(null,sn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${qn(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!X0(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of Ke(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Ze(eve(a,r[a],u.value)))}for(const a of Ke(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Ze(eve(a,n[a],u)))}const s=new kg(n,r);i.copyAll(s);const o={};for(const a of Ke(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return Ke(o).length===0||i.parseNothing?null:new Ea(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Ke(this._parse)){const r=this._parse[n];jx(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Ke(this._parse))}dependentFields(){return new Set(Ke(this._parse))}assembleTransforms(t=!1){return Ke(this._parse).filter(n=>t?jx(n)>1:!0).map(n=>{const r=Efn(n,this._parse[n]);return r?{type:"formula",expr:r,as:dT(n)}:null}).filter(n=>n!==null)}}class Fy extends Br{clone(){return new Fy(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([md])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:md}}}class pN extends Br{clone(){return new pN(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${qn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class mN extends Br{clone(){return new mN(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${qn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Ub extends Br{constructor(t){super(null),t??(t={name:"source"});let n;if(X0(t)||(n=t.format?{...Ju(t.format,["parse"])}:{}),dk(t))this._data={values:t.values};else if(Yx(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Wn(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else K8e(t)?this._data={values:[{type:"Sphere"}]}:(G8e(t)||X0(t))&&(this._data={});this._generator=X0(t),t.name&&(this._name=t.name),n&&!zr(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var qve=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Cfn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},gA;function Kse(e){return e instanceof Ub||e instanceof pN||e instanceof mN}class Xse{constructor(){gA.set(this,void 0),qve(this,gA,!1,"f")}setModified(){qve(this,gA,!0,"f")}get modifiedFlag(){return Cfn(this,gA,"f")}}gA=new WeakMap;class T_ extends Xse{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class Qse extends Xse{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class Afn extends Qse{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Ke(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class Ifn extends Qse{constructor(t){super(),this.requiresSelectionId=t&&Vse(t)}run(t){t instanceof Fy&&(this.requiresSelectionId&&(Kse(t.parent)||t.parent instanceof rd||t.parent instanceof Ea)||(this.setModified(),t.remove()))}}class kfn extends Xse{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Ph&&(r=t.producedFields(),Uie(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class Rfn extends Qse{constructor(){super()}run(t){t instanceof el&&!t.isRequired()&&(this.setModified(),t.remove())}}class Nfn extends T_{run(t){if(!Kse(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Ea)if(t instanceof Ea)this.setModified(),t.merge(n);else{if(zie(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class Dfn extends T_{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Ea);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of Ke(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!zr(i)){this.setModified();const o=new Ea(t,i);for(const a of n){if(a instanceof Ea)for(const u of Ke(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof Ea&&Ke(a.parse).length===0&&a.remove()}}}}}class Pfn extends T_{run(t){t instanceof el||t.numChildren()>0||t instanceof yT||t instanceof Ub||(this.setModified(),t.remove())}}class Ofn extends T_{run(t){const n=t.children.filter(i=>i instanceof Ph),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class $fn extends T_{run(t){const n=t.children.filter(i=>i instanceof rd),r={};for(const i of n){const s=qn(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of Ke(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class Mfn extends T_{constructor(t){super(),this.model=t}run(t){const n=!(Kse(t)||t instanceof gT||t instanceof Ea||t instanceof Fy),r=[],i=[];for(const s of t.children)s instanceof Oh&&(n&&!zie(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Oh?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class Lfn extends T_{run(t){const n=[...t.children];if(!Db(n,o=>o instanceof el)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof el){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof el)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class C_ extends Br{clone(){return new C_(null,sn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=yh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`JoinAggregateTransform ${qn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function Ffn(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=at(r);return i&&t.push(i),t},[])}function Bfn(e){return Be(e)&&e.every(t=>mt(t))&&e.length>1}class Cm extends Br{clone(){return new Cm(null,sn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(hs(f.order,"ascending"));const l={field:a,order:u};let c;return Bfn(s)?c=s:mt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new Cm(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return Jh(p)}).filter(h=>!!h),c=Ffn(n),f=n.encoding.order;let d;if(Be(f)||et(f))d=pje(f);else{const h=r8e(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new Cm(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${qn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[at(i,{binSuffix:"mid"})]:[at(i,{}),at(i,{binSuffix:"end"})]:[at(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=at(c,{expr:"datum"}),p=at(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:at(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:at(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class vT extends Br{clone(){return new vT(null,sn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=yh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`WindowTransform ${qn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>Qie(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function jfn(e){function t(n){if(!(n instanceof yT)){const r=n.clone();if(r instanceof el){const i=zW+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof rd||r instanceof Cm||r instanceof vT||r instanceof C_)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function UW(e){if(e instanceof yT)if(e.numChildren()===1&&!(e.children[0]instanceof el)){const t=e.children[0];(t instanceof rd||t instanceof Cm||t instanceof vT||t instanceof C_)&&t.addDimensions(e.fields),t.swapWithParent(),UW(e)}else{const t=e.model.component.data.main;z9e(t);const n=jfn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(UW)}function z9e(e){if(e instanceof el&&e.type===Ti.Main&&e.numChildren()===1){const t=e.children[0];t instanceof yT||(t.swapWithParent(),z9e(e))}}const zW="scale_",cP=5;function VW(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!VW(t.children))return!1}return!0}function bf(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function Wve(e,t,n){let r=e.sources,i=!1;return i=bf(new Rfn,r)||i,i=bf(new Ifn(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=bf(new Pfn,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=bf(new Nfn,r)||i,i=bf(new Mfn(t),r)||i,i=bf(new kfn,r)||i,i=bf(new Dfn,r)||i,i=bf(new $fn,r)||i,i=bf(new Ofn,r)||i,i=bf(new Afn,r)||i,i=bf(new Lfn,r)||i),e.sources=r,i}function Ufn(e,t){VW(e.sources);let n=0,r=0;for(let i=0;i<cP&&Wve(e,t,!0);i++)n++;e.sources.map(UW);for(let i=0;i<cP&&Wve(e,t,!1);i++)r++;VW(e.sources),Math.max(n,r)===cP&&Ze(`Maximum optimization runs(${cP}) reached.`)}class ro{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new ro(()=>t(n))}}function V9e(e){Ji(e)?zfn(e):Vfn(e)}function zfn(e){const t=e.component.scales;for(const n of Ke(t)){const r=qfn(e,n);if(t[n].setWithExplicit("domains",r),Gfn(e,n),e.component.data.isFaceted){let s=e;for(;!Vl(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)dm(a)&&(a.data=zW+a.data.replace(zW,""))}}}function Vfn(e){for(const n of e.children)V9e(n);const t=e.component.scales;for(const n of Ke(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=$y(r,o.getWithExplicit("domains"),"domains","scale",HW);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Ze(jsn),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function Hfn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=Gve(t,n);if(!i){Ze(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=Gve(t,n);if(i)return"unaggregated"}return e}function qfn(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=Hfn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&Bs(r.x2)?Bs(r.x)?$y(Vg(n,i,e,"x"),Vg(n,i,e,"x2"),"domain","scale",HW):Vg(n,i,e,"x2"):t==="y"&&Bs(r.y2)?Bs(r.y)?$y(Vg(n,i,e,"y"),Vg(n,i,e,"y2"),"domain","scale",HW):Vg(n,i,e,"y2"):Vg(n,i,e,t)}function Wfn(e,t,n){return e.map(r=>({signal:`{data: ${CB(r,{timeUnit:n,type:t})}}`}))}function HU(e,t,n){var i;const r=(i=yo(n))==null?void 0:i.unit;return t==="temporal"||r?Wfn(e,t,r):[e]}function Vg(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=Bs(i[r]),{type:c}=l,f=l.timeUnit;if(lan(t)){const p=Vg(e,void 0,n,r),m=HU(t.unionWith,c,f);return Yd([...m,...p.value])}else{if(Nt(t))return Yd([t]);if(t&&t!=="unaggregated"&&!Uje(t))return Yd(HU(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return wl([[0,1]]);const p=n.requestDataName(Ti.Main);return wl([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=Ag(r)&&et(l)?Yfn(n,r,e):void 0;if(xp(l)){const p=HU([l.datum],c,f);return wl(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(Ti.Main),{field:m}=l;return wl([{data:p,field:at({field:m,aggregate:"min"})},{data:p,field:at({field:m,aggregate:"max"})}])}else if(ci(h.bin)){if(bo(e))return wl(e==="bin-ordinal"?[]:[{data:lk(d)?n.requestDataName(Ti.Main):n.requestDataName(Ti.Raw),field:n.vgField(r,fN(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!gt(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(ci(p)){const m=Yse(n,h.field,p);return wl([new ro(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return wl([{data:n.requestDataName(Ti.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&Wn(["time","utc"],e)){const p=i[wp(r)];if(n8e(h,p,s,a)){const m=n.requestDataName(Ti.Main),g=Oy({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=fk(o)&&g!==.5&&ps(r);return wl([{data:m,field:n.vgField(r,y?{suffix:DB}:{})},{data:m,field:n.vgField(r,{suffix:y?PB:"end"})}])}}return wl(d?[{data:lk(d)?n.requestDataName(Ti.Main):n.requestDataName(Ti.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(Ti.Main),field:n.vgField(r)}])}function qU(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":wB),...r?{field:Zc(r)}:{},...i?{order:i}:{}}}function Gfn(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=Uje(r)&&r,o=__(i)&&pB(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function Yfn(e,t,n){if(!bo(n))return;const r=e.fieldDef(t),i=r.sort;if(e8e(i))return{op:"min",field:Qx(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Dh(i)){const a=s&&!o.has(i.field);return qU(i,a)}else if(Zje(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(tg(c)||gv(c))return qU({field:at(l),order:u},d);if(Qie(c)||!c)return qU({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Wn(["ascending",void 0],i))return!0}}function Gve(e,t){const{aggregate:n,type:r}=e;return n?mt(n)&&!xsn.has(n)?{valid:!1,reason:don(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:hon(e)}:{valid:!0}:{valid:!1,reason:fon(e)}}function HW(e,t,n,r){return e.explicit&&t.explicit&&Ze(von(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Kfn(e){const t=yh(e.map(o=>{if(dm(o)){const{sort:a,...u}=o;return u}return o}),qn),n=yh(e.map(o=>{if(dm(o)){const a=o.sort;return a!==void 0&&!lk(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),qn);if(t.length===0)return;if(t.length===1){const o=e[0];if(dm(o)&&n.length>0){let a=n[0];if(n.length>1){Ze(nve);const u=n.filter(l=>gt(l)&&"op"in l&&l.op!=="min");n.every(l=>gt(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(gt(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=yh(n.map(o=>lk(o)||!("op"in o)||mt(o.op)&&o.op in bsn?o:(Ze(_on(o)),!0)),qn);let i;r.length===1?i=r[0]:r.length>1&&(Ze(nve),i=!0);const s=yh(e.map(o=>dm(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function Jse(e){if(dm(e)&&mt(e.field))return e.field;if(Ssn(e)){let t;for(const n of e.fields)if(dm(n)&&mt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Ze(won),t}return Ze(Eon),t}else if(Tsn(e)){Ze(xon);const t=e.fields[0];return mt(t)?t:void 0}}function FB(e,t){const r=e.component.scales[t].get("domains").map(i=>(dm(i)&&(i.data=e.lookupDataSource(i.data)),i));return Kfn(r)}function H9e(e){return bT(e)||Zse(e)?e.children.reduce((t,n)=>t.concat(H9e(n)),Yve(e)):Yve(e)}function Yve(e){return Ke(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=Xfn(i.range,s,n,e),h=FB(e,n),p=a?Hln(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function Xfn(e,t,n,r){if(ps(n)){if(yv(e))return{step:{signal:`${t}_step`}}}else if(gt(e)&&dm(e))return{...e,data:r.lookupDataSource(e.data)};return e}class q9e extends kg{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:Db(this.get("domains"),t=>Be(t)&&t.length===2&&dr(t[0])&&t[0]<=0&&dr(t[1])&&t[1]>=0)}}const Qfn=["range","scheme"];function Jfn(e){const t=e.component.scales;for(const n of hB){const r=t[n];if(!r)continue;const i=Zfn(n,e);r.setWithExplicit("range",i)}}function Kve(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=fl(t),o=e.getName(s);if(gt(r)&&r.binned&&r.step!==void 0)return new ro(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(ci(r)){const a=Yse(e,i,r);return new ro(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function Zfn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of Qfn)if(n[f]!==void 0){const d=IW(s,f),h=zje(e,f);if(!d)Ze(wje(s,f,e));else if(h)Ze(h);else switch(f){case"range":{const p=n.range;if(Be(p)){if(ps(e))return Yd(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return ro.fromName(y,g)}return m}))}else if(gt(p))return Yd({data:t.requestDataName(Ti.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Yd(p)}case"scheme":return Yd(edn(n[f]))}}const o=e===Ri||e==="xOffset"?"width":"height",a=r[o];if(Zh(a)){if(ps(e))if(bo(s)){const f=G9e(a,t,e);if(f)return Yd({step:f})}else Ze(Eje(o));else if(sN(e)){const f=e===fv?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=Y9e(a,s);if(p)return Yd(p)}}}const{rangeMin:u,rangeMax:l}=n,c=tdn(e,t);return(u!==void 0||l!==void 0)&&IW(s,"rangeMin")&&Be(c)&&c.length===2?Yd([u??c[0],l??c[1]]):wl(c)}function edn(e){return uan(e)?{scheme:e.name,...Ju(e,["name"])}:{scheme:e}}function W9e(e,t,n,{center:r}={}){const i=fl(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===xo&&ic(n)?r?[ro.fromName(a=>`${o(a)}/2`,s),ro.fromName(a=>`-${o(a)}/2`,s)]:[ro.fromName(o,s),0]:r?[ro.fromName(a=>`-${o(a)}/2`,s),ro.fromName(a=>`${o(a)}/2`,s)]:[0,ro.fromName(o,s)]}function tdn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=Bs(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Ri:case xo:{if(Wn(["point","band"],u)){const f=K9e(e,n,r.view);if(Zh(f))return{step:G9e(f,t,e)}}return W9e(e,t,u)}case fv:case hT:return ndn(e,t,u);case Tg:{const f=t.component.scales[e].get("zero"),d=X9e(i,f,r),h=sdn(i,n,t,r);return Hx(u)?idn(d,h,rdn(u,r,l,e)):[d,h]}case hf:return[0,Math.PI*2];case v_:return[0,360];case Td:return[0,new ro(()=>{const f=t.getSignalName(Vl(t.parent)?"child_width":"width"),d=t.getSignalName(Vl(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case pv:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case mv:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case cl:return"symbol";case ll:case bp:case _p:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case Cg:case dv:case hv:return[r.scale.minOpacity,r.scale.maxOpacity]}}function G9e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=Gie(n),o=r[s];if(P8e({step:e,offsetIsDiscrete:fn(o)&&Mje(o.type)})==="offset"&&p8e(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${ksn(f)})`}}else return e.step}function Y9e(e,t){if(P8e({step:e,offsetIsDiscrete:bo(t)})==="offset")return{step:e.step}}function ndn(e,t,n){const r=e===fv?"x":"y",i=t.getScaleComponent(r);if(!i)return W9e(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=K9e(r,t.size,t.config.view);if(Zh(l)){const c=Y9e(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(et(l)&&l.timeUnit){const c=Dje(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=Oy({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Nt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Nt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return zBe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function K9e(e,t,n){const r=e===Ri?"width":"height",i=t[r];return i||xL(n,r)}function rdn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Be(n)?n.length+1:(Ze(Don(r)),3)}}function idn(e,t,n){const r=()=>{const i=Wf(t),s=Wf(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Nt(t)?new ro(r):{signal:r()}}function X9e(e,t,n){if(t)return Nt(t)?{signal:`${t.signal} ? 0 : ${X9e(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(mB("size",e))}const Xve=.95;function sdn(e,t,n,r){const i={x:Kve(n,"x"),y:Kve(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=Qve(t,i,r.view);return dr(s)?s-1:new ro(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=Qve(t,i,r.view);return dr(s)?Math.pow(Xve*s,2):new ro(()=>`pow(${Xve} * ${s.signal}, 2)`)}}throw new Error(mB("size",e))}function Qve(e,t,n){const r=Zh(e.width)?e.width.step:EL(n,"width"),i=Zh(e.height)?e.height.step:EL(n,"height");return t.x||t.y?new ro(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function Q9e(e,t){Ji(e)?odn(e,t):Z9e(e,t)}function odn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of Ke(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=Bs(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=IW(h,t),y=zje(a,t);if(d!==void 0&&(g?y&&Ze(y):Ze(wje(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":w_(u[t])||b==="temporal"||v?l.set(t,{signal:CB(u[t],{type:b,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in Jve?Jve[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:m8e(i,a),hasSecondaryRangeChannel:!!i[wp(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const Jve={bins:({model:e,fieldOrDatumDef:t})=>et(t)?adn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>udn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>ldn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>cdn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>fdn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>ddn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=et(e)?e.sort:void 0;return hdn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>pdn(e,t,n,r,i,s.scale,o)};function J9e(e){Ji(e)?Jfn(e):Z9e(e,"range")}function Z9e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?J9e(r):Q9e(r,t);for(const r of Ke(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=$y(i,a,t,"scale",W8e((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function adn(e,t){const n=t.bin;if(ci(n)){const r=Yse(e,t.field,n);return new ro(()=>e.getSignalName(r))}else if($o(n)&&__(n)&&n.step!==void 0)return{step:n.step}}function udn(e,t){if(Wn([ll,bp,_p],e)&&t!=="nominal")return"hcl"}function ldn(e,t,n,r,i,s){var o;if(!((o=Jh(s))!=null&&o.bin||Be(n)||i!=null||r!=null||Wn([Zu.TIME,Zu.UTC],e)))return ps(t)?!0:void 0}function cdn(e,t,n,r,i,s){if(ps(e)){if(Gf(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(et(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Zu.POINT)return n.pointPadding}}function fdn(e,t,n,r,i,s=!1){if(e===void 0){if(ps(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:hs(o,n==="bar"?a:u)}else if(sN(t)&&r===Zu.BAND)return i.offsetBandPaddingInner}}function ddn(e,t,n,r,i,s=!1){if(e===void 0){if(ps(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===Zu.BAND)return hs(o,Nt(r)?{signal:`${r.signal}/2`}:r/2)}else if(sN(t)){if(n===Zu.POINT)return .5;if(n===Zu.BAND)return i.offsetBandPaddingOuter}}}function hdn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return ic(e)&&t==="descending"?Nt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(ic(e)&&t==="descending")return!0}function pdn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&ic(i)){if(Be(n)){const u=n[0],l=n[n.length-1];if(dr(u)&&u<=0&&dr(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Hx(i))return!0;if(!(et(t)&&t.bin)&&Wn([...Ep,...fsn],e)){const{orient:u,type:l}=r;return Wn(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Wn(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function mdn(e,t,n,r,i=!1){const s=gdn(t,n,r,i),{type:o}=e;return Ag(t)?o!==void 0?man(t,o)?et(n)&&!pan(o,n.type)?(Ze(gon(o,s)),s):o:(Ze(mon(t,o,s)),s):s:null}function gdn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(CE(e)||MU(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Ze(LU(e,"ordinal")),"ordinal";if(ps(e)||sN(e)){if(Wn(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in Xie)return"band";const s=n[fl(e)];return Fb(s)||Wx(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return CE(e)?"time":MU(e)==="discrete"?(Ze(LU(e,"temporal")),"ordinal"):et(t)&&t.timeUnit&&yo(t.timeUnit).utc?"utc":"time";case"quantitative":return CE(e)?et(t)&&ci(t.bin)?"bin-ordinal":"linear":MU(e)==="discrete"?(Ze(LU(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(bje(t.type))}function ydn(e,{ignoreRange:t}={}){eUe(e),V9e(e);for(const n of han)Q9e(e,n);t||J9e(e)}function eUe(e){Ji(e)?e.component.scales=vdn(e):e.component.scales=_dn(e)}function vdn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of hB){const o=Bs(t[s]);if(o&&n===Xje&&s===cl&&o.type===pT)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=m8e(t,s),l=mdn(a,s,o,r,u);i[s]=new q9e(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const bdn=W8e((e,t)=>ive(e)-ive(t));function _dn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){eUe(s);for(const o of Ke(s.component.scales))if((t=i.scale)[o]??(t[o]=R9e(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?ran(a.value,u.value)?r[o]=$y(a,u,"type","scale",bdn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of Ke(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new q9e(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class WU{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Ji(e){return(e==null?void 0:e.type)==="unit"}function Vl(e){return(e==null?void 0:e.type)==="facet"}function Zse(e){return(e==null?void 0:e.type)==="concat"}function bT(e){return(e==null?void 0:e.type)==="layer"}class eoe{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=$u(a),this.name=t.name??i,this.title=Jg(t.title)?{text:t.title}:t.title?$u(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new WU,this.projectionNameMap=r?r.projectionNameMap:new WU,this.signalNameMap=r?r.signalNameMap:new WU,this.data=t.data,this.description=t.description,this.transforms=Aln(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:Nun(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:EB(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new kg,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?sn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){ydn(this)}parseProjection(){j9e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){$9e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of Ke(r)){const o=r[s];o!==void 0&&(i[s]=mi(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=mi(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:zr(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=Ucn(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Lc)t[r].title&&n.push($cn(this,r));for(const r of Hse)n=n.concat(Mcn(this,r));return n}assembleAxes(){return Ecn(this.component.axes,this.config)}assembleLegends(){return L9e(this)}assembleProjections(){return cfn(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...cje(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Wn(["unit","layer"],this.type)?Wn(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),zr(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Vl(this.parent)?H9e(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return ki((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Ti[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Vl(this.parent)){const n=I9e(t),r=dB(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(bo(s)&&yv(o)){const a=i.get("name"),u=FB(this,r),l=Jse(u);if(l){const c=at({aggregate:"distinct",field:l},{expr:"datum"});return{signal:A9e(a,i,c)}}else return Ze(Zie(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(tje(t)&&Ag(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(Osn(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class tUe extends eoe{vgField(t,n={}){const r=this.fieldDef(t);if(r)return at(r,n)}reduceFieldDef(t,n){return oun(this.getMapping(),(r,i,s)=>{const o=Jh(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){Cse(this.getMapping(),(r,i)=>{const s=Jh(r);s&&t(s,i)},n)}}class BB extends Br{clone(){return new BB(null,sn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=sn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${qn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class jB extends Br{clone(){return new jB(null,sn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=sn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${qn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class hk extends Br{clone(){return new hk(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(xr("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=Ag(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");ic(d)&&l.aggregate!=="count"&&!x_(i)&&(u[l.field]=l)}return u},{});return Ke(a).length?new hk(t,a):null}dependentFields(){return new Set(Ke(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${qn(this.filter)}`}assemble(){const t=Ke(this.filter).reduce((n,r)=>{const i=this.filter[r],s=at(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class UB extends Br{clone(){return new UB(this.parent,sn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=sn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${qn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class zB extends Br{clone(){return new zB(null,sn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=sn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${qn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class kE extends Br{clone(){return new kE(null,sn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Ad,Cd],[ef,Id]]){const s=i.map(o=>{const a=Bs(n.encoding[o]);return et(a)?a.field:xp(a)?{expr:`${a.datum}`}:pd(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new kE(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(cl)){const i=n.typedFieldDef(cl);i.type===pT&&(t=new kE(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(mt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${qn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class pk extends Br{clone(){return new pk(null,this.projection,sn(this.fields),sn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Ad,Cd],[ef,Id]]){const i=r.map(o=>{const a=Bs(n.encoding[o]);return et(a)?a.field:xp(a)?{expr:`${a.datum}`}:pd(a)?{expr:`${a.value}`}:void 0}),s=r[0]===ef?"2":"";(i[0]||i[1])&&(t=new pk(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(mt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${qn(this.fields)} ${qn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Y1 extends Br{clone(){return new Y1(null,sn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Y1(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(et(i)&&et(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=y8e(n.mark,r);return new Y1(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${qn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:uln(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class VB extends Br{clone(){return new VB(null,sn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=sn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${qn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class mk extends Br{clone(){return new mk(null,sn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(lln(o)){let u=iUe(o.data,s);u||(u=new Ub(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new el(u,l,Ti.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(cln(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(ki(u),u)}catch{throw new Error(Fsn(u))}if(a=l.materialized,!a)throw new Error(Bsn(u))}return new mk(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?pt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${qn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:pt(this.transform.as)}:{}};else{let n=this.transform.as;mt(n)||(Ze(Gsn),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class HB extends Br{clone(){return new HB(null,sn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=sn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${qn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class qB extends Br{clone(){return new qB(null,sn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=sn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${qn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class WB extends Br{clone(){return new WB(null,sn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=yh((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${qn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class GB extends Br{clone(){return new GB(null,sn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${qn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function nUe(e){let t=0;function n(r,i){if(r instanceof Ub&&!r.isGenerator&&!Yx(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Ea&&(r.parent instanceof Ub&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof yT){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof pN||r instanceof mN||r instanceof hk||r instanceof gT||r instanceof Xx||r instanceof pk||r instanceof rd||r instanceof mk||r instanceof vT||r instanceof C_||r instanceof zB||r instanceof UB||r instanceof BB||r instanceof VB||r instanceof HB||r instanceof qB||r instanceof Fy||r instanceof GB||r instanceof WB||r instanceof jB)&&i.transform.push(r.assemble()),(r instanceof Oh||r instanceof Ph||r instanceof Y1||r instanceof Cm||r instanceof kE)&&i.transform.push(...r.assemble()),r instanceof el&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof el?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof el&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function wdn(e){const t=[],n=nUe(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function Edn(e,t){const n=[],r=nUe(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function xdn(e){return e==="top"||e==="left"||Nt(e)?"header":"footer"}function Sdn(e){for(const t of Lc)Tdn(e,t);Zve(e,"x"),Zve(e,"y")}function Tdn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=Jx("title",null,r,t);let l=AE(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=Be(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=Jx("labelOrient",a.header,r,t),f=a.header!==null?hs((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Wn(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[rUe(e,t,f)]}}}function rUe(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Zve(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=Gse(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=xdn(a.get("orient"));o[u]??(o[u]=[rUe(e,s,!1)]);const l=mA(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function Cdn(e){toe(e),AL(e,"width"),AL(e,"height")}function Adn(e){toe(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";AL(e,t),AL(e,n)}function toe(e){for(const t of e.children)t.parseLayoutSize()}function AL(e,t){const n=I9e(t),r=dB(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??R9e(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=$y(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function Idn(e){const{size:t,component:n}=e;for(const r of Ep){const i=fl(r);if(t[i]){const s=t[i];n.layoutSize.set(i,Zh(s)?"step":s,!0)}else{const s=kdn(e,i);n.layoutSize.set(i,s,!1)}}}function kdn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(bo(s)){const a=xL(r.view,t);return yv(o)||Zh(a)?"step":a}else return NW(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return NW(r.view,t);{const s=xL(r.view,t);return Zh(s)?s.step:s}}}function qW(e,t,n){return at(t,{suffix:`by_${at(e)}`,...n})}class b2 extends tUe{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=ooe(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!lN(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Ke(t),r={};for(const i of n){if(![xm,Sm].includes(i)){Ze(mB(i,"facet"));break}const s=t[i];if(s.field===void 0){Ze(CW(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=Sse(t,n);return r.header?r.header=$u(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=YB(this),this.child.parseData()}parseLayoutSize(){toe(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Sdn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Lc)for(const r of qse){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=Jx("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=MB(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof b2))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof b2?{...this.channelHasField("column")?{encode:{update:{columns:{field:at(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof b2){if(this.child.channelHasField("column")){const i=at(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Ep){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(bo(o)&&yv(a)){const u=FB(this.child,i),l=Jse(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Ze(Zie(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of Lc){const f=this.facet[c];if(f){u.push(at(f));const{bin:d,sort:h}=f;if(ci(d)&&u.push(at(f,{binSuffix:"end"})),Dh(h)){const{field:p,op:m=wB}=h,g=qW(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(Be(h)){const p=Qx(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Dh(r.sort)?[qW(r,r.sort,{expr:"datum"})]:Be(r.sort)?[Qx(r,t,{expr:"datum"})]:[at(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Dh(i)?i.order:!Be(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return BW(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of Hse)if(t[s]){const o=Jx("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return BW(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=wdn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Lc.map(u=>this.facetSortFields(u)).flat(),order:Lc.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(jln(this,[]))}]}getMapping(){return this.facet}}function Rdn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Dh(s.sort)){const{field:o,op:a=wB}=s.sort;e=i=new C_(e,{joinaggregate:[{op:a,field:o,as:qW(s,s.sort,{forAs:!0})}],groupby:[at(s)]})}return i}return null}function iUe(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(dk(e)&&dk(a)){if(Ll(e.values,a.values))return o}else if(Yx(e)&&Yx(a)){if(e.url===a.url)return o}else if(G8e(e)&&e.name===o.dataName)return o}}return null}function Ndn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new Ub({values:[]});return t.push(r),r}const n=iUe(e.data,t);if(n)return X0(e.data)||(n.data.format=VBe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new Ub(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Ddn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(_ln(i))o=e=new Xx(e,i),s="derived";else if(Lse(i)){const a=xfn(i);o=e=Ea.makeWithAncestors(e,{},a,n)??e,e=new gT(e,t,i.filter)}else if(z8e(i))o=e=Oh.makeFromTransform(e,i,t),s="number";else if(Eln(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new Ea(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=Ph.makeFromTransform(e,i);else if(xln(i))o=e=rd.makeFromTransform(e,i),s="number",Vse(t)&&(e=new Fy(e));else if(U8e(i))o=e=mk.make(e,t,i,r++),s="derived";else if(yln(i))o=e=new vT(e,i),s="number";else if(vln(i))o=e=new C_(e,i),s="number";else if(Sln(i))o=e=Cm.makeFromTransform(e,i),s="derived";else if(Tln(i))o=e=new zB(e,i),s="derived";else if(Cln(i))o=e=new jB(e,i),s="derived";else if(bln(i))o=e=new UB(e,i),s="derived";else if(fln(i))o=e=new WB(e,i),s="derived";else if(gln(i))e=new GB(e,i);else if(wln(i))o=e=Y1.makeFromTransform(e,i),s="derived";else if(dln(i))o=e=new BB(e,i),s="derived";else if(hln(i))o=e=new HB(e,i),s="derived";else if(pln(i))o=e=new qB(e,i),s="derived";else if(mln(i))o=e=new VB(e,i),s="derived";else{Ze(Wsn(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function YB(e){var h;let t=Ndn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(X0(i)||Yx(i)||dk(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new Fln;X0(i)?(Y8e(i)?t=new mN(t,i.sequence):Fse(i)&&(t=new pN(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=Ea.makeExplicit(t,e,o)??t,t=new Fy(t);const a=e.parent&&bT(e.parent);(Ji(e)||Vl(e))&&a&&(t=Oh.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=Ddn(t,e,o));const u=Tfn(e),l=Sfn(e);t=Ea.makeWithAncestors(t,{},{...u,...l},o)??t,Ji(e)&&(t=kE.parseAll(t,e),t=pk.parseAll(t,e)),(Ji(e)||Vl(e))&&(a||(t=Oh.makeFromEncoding(t,e)??t),t=Ph.makeFromEncoding(t,e)??t,t=Xx.parseAllForSortIndex(t,e));const c=t=e1e(Ti.Raw,e,t);if(Ji(e)){const p=rd.makeFromEncoding(t,e);p&&(t=p,Vse(e)&&(t=new Fy(t))),t=Y1.makeFromEncoding(t,e)??t,t=Cm.makeFromEncoding(t,e)??t}Ji(e)&&(t=hk.make(t,e)??t);const f=t=e1e(Ti.Main,e,t);Ji(e)&&_cn(e,f);let d=null;if(Vl(e)){const p=e.getName("facet");t=Rdn(t,e.facet)??t,d=new yT(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function e1e(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new el(n,s,e,i);return r[s]=o,o}class Pdn extends eoe{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Ze(Vsn),this.children=this.getChildren(t).map((l,c)=>ooe(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=YB(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ke(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return kB(t)?t.vconcat:$se(t)?t.hconcat:t.concat}parseLayoutSize(){Adn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Wse(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function Odn(e){return e===!1||e===null}const $dn={disable:1,gridScale:1,scale:1,...d8e,labelExpr:1,encode:1},sUe=Ke($dn);class noe extends kg{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new noe(sn(this.explicit),sn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Odn(this.get(t))}hasOrientSignalRef(){return Nt(this.explicit.orient)}}function Mdn(e,t,n){const{encoding:r,config:i}=e,s=Bs(r[t])??Bs(r[wp(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(Lb(u))return{text:Yf({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(qx(s)==="quantitative"){if(Wx(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Yf({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Yf({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(qx(s)==="temporal"&&i.timeFormatType&&et(s)&&!s.timeUnit)return{text:Yf({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function Ldn(e){return Ep.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Hdn(n,e)]),t),{})}const Fdn={bottom:"top",top:"bottom",left:"right",right:"left"};function Bdn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of Ke(i.component.axes))n.axis[s]=Gse(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=jdn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of Ep){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Nt(a)){if(r[a]>0&&!u){const l=Fdn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function jdn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=Udn(i,s)}}}else return t.map(n=>n.clone());return e}function Udn(e,t){for(const n of sUe){const r=$y(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return yje(i,s);case"gridScale":return{explicit:i.explicit,value:hs(i.value,s.value)}}return NB(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function zdn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Nt(n.labelAngle)?n.labelAngle:ck(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===x9e(r,i))return!0}return e===n[t]}const Vdn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Hdn(e,t){var y,v;let n=t.axis(e);const r=new noe,i=Bs(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||Rcn(e),u=t.getScaleComponent(e).get("type"),l=xcn(e,u,a,t.config),c=n!==void 0?!n:LW("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=Acn(i,n,e,o.style,l),d=Wje(n.formatType,i,u),h=qje(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const b of sUe){const w=b in Fve?Fve[b](p):fve(b)?n[b]:void 0,E=w!==void 0,x=zdn(w,b,n,t,e);if(E&&x)r.set(b,w,x);else{const{configValue:T=void 0,configFrom:C=void 0}=fve(b)&&b!=="values"?LW(b,o.style,n.style,l):{},A=T!==void 0;E&&!A?r.set(b,w,x):(C!=="vgAxisConfig"||Vdn.has(b)&&A||dN(T)||Nt(T))&&r.set(b,T,!1)}}const m=n.encoding??{},g=f8e.reduce((b,w)=>{if(!r.hasAxisPart(w))return b;const E=k9e(m[w]??{},t),x=w==="labels"?Mdn(t,e,E):E;return x!==void 0&&!zr(x)&&(b[w]={update:x}),b},{});return zr(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function qdn({encoding:e,size:t}){for(const n of Ep){const r=fl(n);Zh(t[r])&&x0(e[n])&&(delete t[r],Ze(Eje(r)))}return t}const Wdn={vgMark:"arc",encodeEntry:e=>({...pf(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...wa("x",e,{defaultPos:"mid"}),...wa("y",e,{defaultPos:"mid"}),...My(e,"radius"),...My(e,"theta")})},Gdn={vgMark:"area",encodeEntry:e=>({...pf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...SL("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...SL("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...zse(e)})},Ydn={vgMark:"rect",encodeEntry:e=>({...pf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...My(e,"x"),...My(e,"y")})},Kdn={vgMark:"shape",encodeEntry:e=>({...pf(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&et(n)&&n.type===pT?{field:at(n,{expr:"datum"})}:{}}]}},Xdn={vgMark:"image",encodeEntry:e=>({...pf(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...My(e,"x"),...My(e,"y"),...jse(e,"url")})},Qdn={vgMark:"line",encodeEntry:e=>({...pf(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...wa("x",e,{defaultPos:"mid"}),...wa("y",e,{defaultPos:"mid"}),...so("size",e,{vgChannel:"strokeWidth"}),...zse(e)})},Jdn={vgMark:"trail",encodeEntry:e=>({...pf(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...wa("x",e,{defaultPos:"mid"}),...wa("y",e,{defaultPos:"mid"}),...so("size",e),...zse(e)})};function roe(e,t){const{config:n}=e;return{...pf(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...wa("x",e,{defaultPos:"mid"}),...wa("y",e,{defaultPos:"mid"}),...so("size",e),...so("angle",e),...Zdn(e,n,t)}}function Zdn(e,t,n){return n?{shape:{value:n}}:so("shape",e)}const ehn={vgMark:"symbol",encodeEntry:e=>roe(e)},thn={vgMark:"symbol",encodeEntry:e=>roe(e,"circle")},nhn={vgMark:"symbol",encodeEntry:e=>roe(e,"square")},rhn={vgMark:"rect",encodeEntry:e=>({...pf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...My(e,"x"),...My(e,"y")})},ihn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...pf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...SL("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...SL("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...so("size",e,{vgChannel:"strokeWidth"})}}},shn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...pf(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...wa("x",e,{defaultPos:"mid"}),...wa("y",e,{defaultPos:"mid"}),...jse(e),...so("size",e,{vgChannel:"fontSize"}),...so("angle",e),...Ove("align",ohn(e.markDef,n,t)),...Ove("baseline",ahn(e.markDef,n,t)),...wa("radius",e,{defaultPos:null}),...wa("theta",e,{defaultPos:null})}}};function ohn(e,t,n){if(xr("align",e,n)===void 0)return"center"}function ahn(e,t,n){if(xr("baseline",e,n)===void 0)return"middle"}const uhn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...pf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...wa("x",e,{defaultPos:"mid",vgChannel:"xc"}),...wa("y",e,{defaultPos:"mid",vgChannel:"yc"}),...so("size",e,{defaultValue:lhn(e),vgChannel:i}),[s]:mi(xr("thickness",n,t))}}};function lhn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=xr("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&yv(a)&&dr(a.step)?a.step*3/4:EL(t.view,i)*3/4}}const fP={arc:Wdn,area:Gdn,bar:Ydn,circle:thn,geoshape:Kdn,image:Xdn,line:Qdn,point:ehn,rect:rhn,rule:ihn,square:nhn,text:shn,tick:uhn,trail:Jdn};function chn(e){if(Wn([bB,yB,Tan],e.mark)){const t=y8e(e.mark,e.encoding);if(t.length>0)return fhn(e,t)}else if(e.mark===vB){const t=TW.some(n=>xr(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return dhn(e)}return ioe(e)}const t1e="faceted_path_";function fhn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:t1e+e.requestDataName(Ti.Main),data:e.requestDataName(Ti.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:ioe(e,{fromPrefix:t1e})}]}const n1e="stack_group_";function dhn(e){var l;const[t]=ioe(e,{fromPrefix:n1e}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...Bx(t.encode.update,["y","yc","y2","height",...TW]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Ju(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...Bx(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Ju(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of TW){const f=ng(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=mi(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=at(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(at(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=ng(f,e.markDef,e.config);return d!==void 0?{...c,[f]:mi(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Ti.Main),name:n1e+e.requestDataName(Ti.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function hhn(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!Be(o)&&pd(o)&&xW(o.value)||!o&&xW(xr("order",i,s)))){if((Be(o)||et(o))&&!n)return pje(o,{expr:"datum"});if(x_(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(et(l)){const c=l.sort;if(Be(c))return{field:at(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(Dh(c))return{field:at({aggregate:Tse(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(Zje(c)){const f=e.fieldDef(c.encoding);return{field:at(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:at(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function ioe(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=hs(r.clip,phn(e),mhn(e)),a=dje(r),u=i.key,l=hhn(e),c=ghn(e),f=xr("aria",r,s),d=fP[n].postEncodingTransform?fP[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:fP[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Ti.Main)},encode:{update:fP[n].encodeEntry(e)},...d?{transform:d}:{}}]}function phn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function mhn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function ghn(e){if(!e.component.selection)return null;const t=Ke(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Ke(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class oUe extends tUe{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,hve(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=Qh(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=eln(o,s,{graticule:t.data&&Fse(t.data)}));const u=this.encoding=iun(t.encoding||{},a,o.filled,s);this.markDef=F8e(o,u,s),this.size=qdn({encoding:u,size:hve(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=L8e(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>Pse(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===Xje,r=t&&nsn.some(i=>fn(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return hB.reduce((r,i)=>{const s=Bs(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=$u(t);return Be(n)&&(i.domain=n.map(kl)),Be(r)&&(i.range=r.map(kl)),i}initAxes(t){return Ep.reduce((n,r)=>{const i=t[r];if(fn(i)||r===Ri&&fn(t.x2)||r===xo&&fn(t.y2)){const s=fn(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=Ke(t),r={};for(const i of n){const s=t[i];r[i]=dN(s)?fje(s):kl(s)}return r}initLegends(t){return dsn.reduce((n,r)=>{const i=Bs(t[r]);if(i&&psn(r)){const s=i.legend;n[r]=s&&$u(s)}return n},{})}parseData(){this.component.data=YB(this)}parseLayoutSize(){Idn(this)}parseSelections(){this.component.selection=bcn(this,this.selection)}parseMarkGroup(){this.component.mark=chn(this)}parseAxesAndHeaders(){this.component.axes=Ldn(this)}assembleSelectionTopLevelSignals(t){return Uln(this,t)}assembleSignals(){return[..._9e(this),...Bln(this,[])]}assembleSelectionData(t){return zln(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Wse(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!bT(this.parent))&&(t=Q8e(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return W1(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Jh(n)}typedFieldDef(t){const n=this.fieldDef(t);return cu(n)?n:null}}class soe extends eoe{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(RB(a))return new soe(a,this,this.getName(`layer_${u}`),o,s);if(Ig(a))return new oUe(a,this,this.getName(`layer_${u}`),o,s);throw new Error(Jie(a))})}parseData(){this.component.data=YB(this);for(const t of this.children)t.parseData()}parseLayoutSize(){Cdn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ke(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Bdn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),_9e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),Wse(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of pt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Vln(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),L9e(this))}}function ooe(e,t,n,r,i){if(EB(e))return new b2(e,t,n,i);if(RB(e))return new soe(e,t,n,r,i);if(Ig(e))return new oUe(e,t,n,r,i);if(Iun(e))return new Pdn(e,t,n,i);throw new Error(Jie(e))}function yhn(e,t={}){t.logger&&Pon(t.logger),t.fieldTitle&&u8e(t.fieldTitle);try{const n=M8e(tT(t.config,e.config)),r=q8e(e,n),i=ooe(r,null,"",void 0,n);return i.parse(),Ufn(i.component.data,i),{spec:bhn(i,vhn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&Oon(),t.fieldTitle&&Kan()}}function vhn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):mt(t)&&(t={type:t}),i&&s&&$ln(t.type)){if(i==="step"&&s==="step")Ze(Qye()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Ze(Qye(dB(o)));const a=o==="width"?"height":"width";t.type=Mln(a)}}return{...Ke(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...Tve(n,!1),...Tve(e,!0)}}function bhn(e,t,n={},r){const i=e.config?zun(e.config):void 0,s=[].concat(e.assembleSelectionData([]),Edn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...D8e(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const _hn=Xin.version,whn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:jx,accessPathWithDatum:Vie,compile:yhn,contains:Wn,deepEqual:Ll,deleteNestedProperty:dL,duplicate:sn,entries:Dy,every:jie,fieldIntersection:zie,flatAccessWithDatum:qBe,getFirstDefined:hs,hasIntersection:Uie,hash:qn,internalField:YBe,isBoolean:lk,isEmpty:zr,isEqual:Jin,isInternalField:KBe,isNullOrFalse:xW,isNumeric:oB,keys:Ke,logicalExpr:y2,mergeDeep:VBe,never:zBe,normalize:q8e,normalizeAngle:ck,omit:Ju,pick:Bx,prefixGenerator:SW,removePathFromField:dT,replaceAll:Pb,replacePathInField:Zc,resetIdCounter:esn,setEqual:HBe,some:Db,stringify:Vr,titleCase:nN,unique:yh,uniqueId:GBe,vals:qo,varName:ki,version:_hn},Symbol.toStringTag,{value:"Module"}));function aUe(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var Ehn="vega-themes",xhn="2.15.0",Shn="Themes for stylized Vega and Vega-Lite visualizations.",Thn=["vega","vega-lite","themes","style"],Chn="BSD-3-Clause",Ahn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},Ihn=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],khn="build/vega-themes.js",aoe="build/vega-themes.module.js",Rhn="build/vega-themes.min.js",Nhn="build/vega-themes.min.js",Dhn="build/vega-themes.module.d.ts",Phn={type:"git",url:"https://github.com/vega/vega-themes.git"},Ohn=["src","build"],$hn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},Mhn={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},Lhn={vega:"*","vega-lite":"*"},Fhn={},Bhn={name:Ehn,version:xhn,description:Shn,keywords:Thn,license:Chn,author:Ahn,contributors:Ihn,main:khn,module:aoe,unpkg:Rhn,jsdelivr:Nhn,types:Dhn,repository:Phn,files:Ohn,scripts:$hn,devDependencies:Mhn,peerDependencies:Lhn,dependencies:Fhn};const nw="#fff",r1e="#888",jhn={background:"#333",view:{stroke:r1e},title:{color:nw,subtitleColor:nw},style:{"guide-label":{fill:nw},"guide-title":{fill:nw}},axis:{domainColor:nw,gridColor:r1e,tickColor:nw}},Rv="#4572a7",Uhn={background:"#fff",arc:{fill:Rv},area:{fill:Rv},line:{stroke:Rv,strokeWidth:2},path:{stroke:Rv},rect:{fill:Rv},shape:{stroke:Rv},symbol:{fill:Rv,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Nv="#30a2da",GU="#cbcbcb",zhn="#999",Vhn="#333",i1e="#f0f0f0",s1e="#333",Hhn={arc:{fill:Nv},area:{fill:Nv},axis:{domainColor:GU,grid:!0,gridColor:GU,gridWidth:1,labelColor:zhn,labelFontSize:10,titleColor:Vhn,tickColor:GU,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:i1e,group:{fill:i1e},legend:{labelColor:s1e,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:s1e,titleFontSize:14,titlePadding:10},line:{stroke:Nv,strokeWidth:2},path:{stroke:Nv,strokeWidth:.5},rect:{fill:Nv},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Nv},bar:{binSpacing:2,fill:Nv,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Dv="#000",qhn={group:{fill:"#e5e5e5"},arc:{fill:Dv},area:{fill:Dv},line:{stroke:Dv},path:{stroke:Dv},rect:{fill:Dv},shape:{stroke:Dv},symbol:{fill:Dv,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Whn=22,Ghn="normal",o1e="Benton Gothic, sans-serif",a1e=11.5,Yhn="normal",Pv="#82c6df",YU="Benton Gothic Bold, sans-serif",u1e="normal",l1e=13,xC={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Khn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:YU,fontSize:Whn,fontWeight:Ghn},arc:{fill:Pv},area:{fill:Pv},line:{stroke:Pv,strokeWidth:2},path:{stroke:Pv},rect:{fill:Pv},shape:{stroke:Pv},symbol:{fill:Pv,size:30},axis:{labelFont:o1e,labelFontSize:a1e,labelFontWeight:Yhn,titleFont:YU,titleFontSize:l1e,titleFontWeight:u1e},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:o1e,labelFontSize:a1e,symbolType:"square",titleFont:YU,titleFontSize:l1e,titleFontWeight:u1e},range:{category:xC["category-6"],diverging:xC["fireandice-6"],heatmap:xC["fire-7"],ordinal:xC["fire-7"],ramp:xC["fire-7"]}},Ov="#ab5787",dP="#979797",Xhn={background:"#f9f9f9",arc:{fill:Ov},area:{fill:Ov},line:{stroke:Ov},path:{stroke:Ov},rect:{fill:Ov},shape:{stroke:Ov},symbol:{fill:Ov,size:30},axis:{domainColor:dP,domainWidth:.5,gridWidth:.2,labelColor:dP,tickColor:dP,tickWidth:.2,titleColor:dP},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},$v="#3e5c69",Qhn={background:"#fff",arc:{fill:$v},area:{fill:$v},line:{stroke:$v},path:{stroke:$v},rect:{fill:$v},shape:{stroke:$v},symbol:{fill:$v},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},vc="#1696d2",c1e="#000000",Jhn="#FFFFFF",hP="Lato",KU="Lato",Zhn="Lato",epn="#DEDDDD",tpn=18,SC={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},npn={background:Jhn,title:{anchor:"start",fontSize:tpn,font:hP},axisX:{domain:!0,domainColor:c1e,domainWidth:1,grid:!1,labelFontSize:12,labelFont:KU,labelAngle:0,tickColor:c1e,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:hP},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:epn,gridWidth:1,labelFontSize:12,labelFont:KU,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:hP,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:KU,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:hP,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:SC["six-groups-cat-1"],diverging:SC["diverging-colors"],heatmap:SC["diverging-colors"],ordinal:SC["six-groups-seq"],ramp:SC["shades-blue"]},area:{fill:vc},rect:{fill:vc},line:{color:vc,stroke:vc,strokeWidth:5},trail:{color:vc,stroke:vc,strokeWidth:0,size:1},path:{stroke:vc,strokeWidth:.5},point:{filled:!0},text:{font:Zhn,color:vc,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:vc,stroke:null}},arc:{fill:vc},shape:{stroke:vc},symbol:{fill:vc,size:30}},Mv="#3366CC",f1e="#ccc",pP="Arial, sans-serif",rpn={arc:{fill:Mv},area:{fill:Mv},path:{stroke:Mv},rect:{fill:Mv},shape:{stroke:Mv},symbol:{stroke:Mv},circle:{fill:Mv},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:pP,fontSize:12},"guide-title":{font:pP,fontSize:12},"group-title":{font:pP,fontSize:12}},title:{font:pP,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:f1e,tickColor:f1e,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},uoe=e=>e*(1/3+1),d1e=uoe(9),h1e=uoe(10),p1e=uoe(12),TC="Segoe UI",m1e="wf_standard-font, helvetica, arial, sans-serif",g1e="#252423",CC="#605E5C",y1e="transparent",ipn="#C8C6C4",Sf="#118DFF",spn="#12239E",opn="#E66C37",apn="#6B007B",upn="#E044A7",lpn="#744EC2",cpn="#D9B300",fpn="#D64550",uUe=Sf,lUe="#DEEFFF",v1e=[lUe,uUe],dpn=[lUe,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",uUe],hpn={view:{stroke:y1e},background:y1e,font:TC,header:{titleFont:m1e,titleFontSize:p1e,titleColor:g1e,labelFont:TC,labelFontSize:h1e,labelColor:CC},axis:{ticks:!1,grid:!1,domain:!1,labelColor:CC,labelFontSize:d1e,titleFont:m1e,titleColor:g1e,titleFontSize:p1e,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:ipn,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Sf},line:{stroke:Sf,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:TC,fontSize:d1e,fill:CC},arc:{fill:Sf},area:{fill:Sf,line:!0,opacity:.6},path:{stroke:Sf},rect:{fill:Sf},point:{fill:Sf,filled:!0,size:75},shape:{stroke:Sf},symbol:{fill:Sf,strokeWidth:1.5,size:50},legend:{titleFont:TC,titleFontWeight:"bold",titleColor:CC,labelFont:TC,labelFontSize:h1e,labelColor:CC,symbolType:"circle",symbolSize:75},range:{category:[Sf,spn,opn,apn,upn,lpn,cpn,fpn],diverging:v1e,heatmap:v1e,ordinal:dpn}},XU='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',ppn='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',QU=400,mP={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},mpn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],gpn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function KB({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=mP.gridBg[e],i=mP.textPrimary[e],s=mP.textSecondary[e],o=n==="dark"?mpn:gpn,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:XU,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:ppn,labelFontWeight:QU,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:mP.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:XU,fill:s,fontWeight:QU},"guide-title":{font:XU,fill:s,fontWeight:QU}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const ypn=KB({theme:"white",background:"#ffffff"}),vpn=KB({theme:"g10",background:"#f4f4f4"}),bpn=KB({theme:"g90",background:"#262626"}),_pn=KB({theme:"g100",background:"#161616"}),wpn=Bhn.version,Epn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:vpn,carbong100:_pn,carbong90:bpn,carbonwhite:ypn,dark:jhn,excel:Uhn,fivethirtyeight:Hhn,ggplot2:qhn,googlecharts:rpn,latimes:Khn,powerbi:hpn,quartz:Xhn,urbaninstitute:npn,version:wpn,vox:Qhn},Symbol.toStringTag,{value:"Module"}));function xpn(e,t,n,r){if(Be(e))return`[${e.map(i=>t(mt(i)?i:b1e(i,n))).join(", ")}]`;if(gt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(gt(c)&&(c=b1e(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function Spn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function b1e(e,t){return JSON.stringify(e,Spn(t))}var Tpn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const cUe="vg-tooltip-element",Cpn={offsetX:10,offsetY:10,id:cUe,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:Apn,maxDepth:2,formatTooltip:xpn,baseURL:""};function Apn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function Ipn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Tpn.toString().replace(cUe,e)}function kpn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class Rpn{constructor(t){this.options={...Cpn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=Ipn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=kpn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var JU={};function Npn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ZU,_1e;function Dpn(){return _1e||(_1e=1,ZU=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),ZU}var Ppn=_r;_r.Node=zb;_r.create=_r;function _r(e){var t=this;if(t instanceof _r||(t=new _r),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}_r.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};_r.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};_r.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};_r.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)$pn(this,arguments[e]);return this.length};_r.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Mpn(this,arguments[e]);return this.length};_r.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};_r.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};_r.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};_r.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};_r.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};_r.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};_r.prototype.map=function(e,t){t=t||this;for(var n=new _r,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};_r.prototype.mapReverse=function(e,t){t=t||this;for(var n=new _r,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};_r.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};_r.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};_r.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};_r.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};_r.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new _r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};_r.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new _r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};_r.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=Opn(this,i,n[r]);return s};_r.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function Opn(e,t,n){var r=t===e.head?new zb(n,null,t,e):new zb(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function $pn(e,t){e.tail=new zb(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Mpn(e,t){e.head=new zb(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function zb(e,t,n,r){if(!(this instanceof zb))return new zb(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{Dpn()(_r)}catch{}const Lpn=Ppn,f1=Symbol("max"),Gp=Symbol("length"),rw=Symbol("lengthCalculator"),_2=Symbol("allowStale"),N1=Symbol("maxAge"),zp=Symbol("dispose"),w1e=Symbol("noDisposeOnSet"),Js=Symbol("lruList"),Tf=Symbol("cache"),fUe=Symbol("updateAgeOnGet"),e7=()=>1;class Fpn{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[f1]=t.max||1/0;const n=t.length||e7;if(this[rw]=typeof n!="function"?e7:n,this[_2]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[N1]=t.maxAge||0,this[zp]=t.dispose,this[w1e]=t.noDisposeOnSet||!1,this[fUe]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[f1]=t||1/0,AC(this)}get max(){return this[f1]}set allowStale(t){this[_2]=!!t}get allowStale(){return this[_2]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[N1]=t,AC(this)}get maxAge(){return this[N1]}set lengthCalculator(t){typeof t!="function"&&(t=e7),t!==this[rw]&&(this[rw]=t,this[Gp]=0,this[Js].forEach(n=>{n.length=this[rw](n.value,n.key),this[Gp]+=n.length})),AC(this)}get lengthCalculator(){return this[rw]}get length(){return this[Gp]}get itemCount(){return this[Js].length}rforEach(t,n){n=n||this;for(let r=this[Js].tail;r!==null;){const i=r.prev;E1e(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Js].head;r!==null;){const i=r.next;E1e(this,t,r,n),r=i}}keys(){return this[Js].toArray().map(t=>t.key)}values(){return this[Js].toArray().map(t=>t.value)}reset(){this[zp]&&this[Js]&&this[Js].length&&this[Js].forEach(t=>this[zp](t.key,t.value)),this[Tf]=new Map,this[Js]=new Lpn,this[Gp]=0}dump(){return this[Js].map(t=>IL(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Js]}set(t,n,r){if(r=r||this[N1],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[rw](n,t);if(this[Tf].has(t)){if(s>this[f1])return RE(this,this[Tf].get(t)),!1;const u=this[Tf].get(t).value;return this[zp]&&(this[w1e]||this[zp](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Gp]+=s-u.length,u.length=s,this.get(t),AC(this),!0}const o=new Bpn(t,n,s,i,r);return o.length>this[f1]?(this[zp]&&this[zp](t,n),!1):(this[Gp]+=o.length,this[Js].unshift(o),this[Tf].set(t,this[Js].head),AC(this),!0)}has(t){if(!this[Tf].has(t))return!1;const n=this[Tf].get(t).value;return!IL(this,n)}get(t){return t7(this,t,!0)}peek(t){return t7(this,t,!1)}pop(){const t=this[Js].tail;return t?(RE(this,t),t.value):null}del(t){RE(this,this[Tf].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[Tf].forEach((t,n)=>t7(this,n,!1))}}const t7=(e,t,n)=>{const r=e[Tf].get(t);if(r){const i=r.value;if(IL(e,i)){if(RE(e,r),!e[_2])return}else n&&(e[fUe]&&(r.value.now=Date.now()),e[Js].unshiftNode(r));return i.value}},IL=(e,t)=>{if(!t||!t.maxAge&&!e[N1])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[N1]&&n>e[N1]},AC=e=>{if(e[Gp]>e[f1])for(let t=e[Js].tail;e[Gp]>e[f1]&&t!==null;){const n=t.prev;RE(e,t),t=n}},RE=(e,t)=>{if(t){const n=t.value;e[zp]&&e[zp](n.key,n.value),e[Gp]-=n.length,e[Tf].delete(n.key),e[Js].removeNode(t)}};class Bpn{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const E1e=(e,t,n,r)=>{let i=n.value;IL(e,i)&&(RE(e,n),e[_2]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var jpn=Fpn;const Upn=Object.freeze({loose:!0}),zpn=Object.freeze({}),Vpn=e=>e?typeof e!="object"?Upn:e:zpn;var loe=Vpn,WW={exports:{}};const Hpn="2.0.0",dUe=256,qpn=Number.MAX_SAFE_INTEGER||9007199254740991,Wpn=16,Gpn=dUe-6,Ypn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var coe={MAX_LENGTH:dUe,MAX_SAFE_COMPONENT_LENGTH:Wpn,MAX_SAFE_BUILD_LENGTH:Gpn,MAX_SAFE_INTEGER:qpn,RELEASE_TYPES:Ypn,SEMVER_SPEC_VERSION:Hpn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Kpn=typeof process=="object"&&JU&&JU.NODE_DEBUG&&/\bsemver\b/i.test(JU.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var XB=Kpn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=coe,s=XB;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),b=c++;s(m,b,g),l[m]=b,u[b]=g,o[b]=new RegExp(g,y?"g":void 0),a[b]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(WW,WW.exports);var foe=WW.exports;const x1e=/^[0-9]+$/,hUe=(e,t)=>{const n=x1e.test(e),r=x1e.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},Xpn=(e,t)=>hUe(t,e);var Qpn={compareIdentifiers:hUe,rcompareIdentifiers:Xpn};const gP=XB,{MAX_LENGTH:S1e,MAX_SAFE_INTEGER:yP}=coe,{safeRe:T1e,t:C1e}=foe,Jpn=loe,{compareIdentifiers:iw}=Qpn;let Zpn=class Bd{constructor(t,n){if(n=Jpn(n),t instanceof Bd){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>S1e)throw new TypeError(`version is longer than ${S1e} characters`);gP("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?T1e[C1e.LOOSE]:T1e[C1e.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>yP||this.major<0)throw new TypeError("Invalid major version");if(this.minor>yP||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>yP||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<yP)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(gP("SemVer.compare",this.version,this.options,t),!(t instanceof Bd)){if(typeof t=="string"&&t===this.version)return 0;t=new Bd(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Bd||(t=new Bd(t,this.options)),iw(this.major,t.major)||iw(this.minor,t.minor)||iw(this.patch,t.patch)}comparePre(t){if(t instanceof Bd||(t=new Bd(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(gP("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return iw(r,i)}while(++n)}compareBuild(t){t instanceof Bd||(t=new Bd(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(gP("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return iw(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),iw(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var doe=Zpn;const A1e=doe,emn=(e,t,n)=>new A1e(e,n).compare(new A1e(t,n));var _T=emn;const tmn=_T,nmn=(e,t,n)=>tmn(e,t,n)===0;var rmn=nmn;const imn=_T,smn=(e,t,n)=>imn(e,t,n)!==0;var omn=smn;const amn=_T,umn=(e,t,n)=>amn(e,t,n)>0;var lmn=umn;const cmn=_T,fmn=(e,t,n)=>cmn(e,t,n)>=0;var dmn=fmn;const hmn=_T,pmn=(e,t,n)=>hmn(e,t,n)<0;var mmn=pmn;const gmn=_T,ymn=(e,t,n)=>gmn(e,t,n)<=0;var vmn=ymn;const bmn=rmn,_mn=omn,wmn=lmn,Emn=dmn,xmn=mmn,Smn=vmn,Tmn=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return bmn(e,n,r);case"!=":return _mn(e,n,r);case">":return wmn(e,n,r);case">=":return Emn(e,n,r);case"<":return xmn(e,n,r);case"<=":return Smn(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var Cmn=Tmn,n7,I1e;function Amn(){if(I1e)return n7;I1e=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}n7=t;const n=loe,{safeRe:r,t:i}=foe,s=Cmn,o=XB,a=doe,u=pUe();return n7}var r7,k1e;function pUe(){if(k1e)return r7;k1e=1;class e{constructor($,F){if(F=r(F),$ instanceof e)return $.loose===!!F.loose&&$.includePrerelease===!!F.includePrerelease?$:new e($.raw,F);if($ instanceof i)return this.raw=$.value,this.set=[[$]],this.format(),this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=$.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(L=>this.parseRange(L.trim())).filter(L=>L.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const L=this.set[0];if(this.set=this.set.filter(j=>!p(j[0])),this.set.length===0)this.set=[L];else if(this.set.length>1){for(const j of this.set)if(j.length===1&&m(j[0])){this.set=[j];break}}}this.format()}format(){return this.range=this.set.map($=>$.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange($){const L=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+$,j=n.get(L);if(j)return j;const z=this.options.loose,q=z?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];$=$.replace(q,R(this.options.includePrerelease)),s("hyphen replace",$),$=$.replace(a[u.COMPARATORTRIM],l),s("comparator trim",$),$=$.replace(a[u.TILDETRIM],c),s("tilde trim",$),$=$.replace(a[u.CARETTRIM],f),s("caret trim",$);let P=$.split(" ").map(H=>y(H,this.options)).join(" ").split(/\s+/).map(H=>k(H,this.options));z&&(P=P.filter(H=>(s("loose invalid filter",H,this.options),!!H.match(a[u.COMPARATORLOOSE])))),s("range list",P);const U=new Map,W=P.map(H=>new i(H,this.options));for(const H of W){if(p(H))return[H];U.set(H.value,H)}U.size>1&&U.has("")&&U.delete("");const B=[...U.values()];return n.set(L,B),B}intersects($,F){if(!($ instanceof e))throw new TypeError("a Range is required");return this.set.some(L=>g(L,F)&&$.set.some(j=>g(j,F)&&L.every(z=>j.every(q=>z.intersects(q,F)))))}test($){if(!$)return!1;if(typeof $=="string")try{$=new o($,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(O(this.set[F],$,this.options))return!0;return!1}}r7=e;const t=jpn,n=new t({max:1e3}),r=loe,i=Amn(),s=XB,o=doe,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=foe,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=coe,p=D=>D.value==="<0.0.0-0",m=D=>D.value==="",g=(D,$)=>{let F=!0;const L=D.slice();let j=L.pop();for(;F&&L.length;)F=L.every(z=>j.intersects(z,$)),j=L.pop();return F},y=(D,$)=>(s("comp",D,$),D=E(D,$),s("caret",D),D=b(D,$),s("tildes",D),D=T(D,$),s("xrange",D),D=A(D,$),s("stars",D),D),v=D=>!D||D.toLowerCase()==="x"||D==="*",b=(D,$)=>D.trim().split(/\s+/).map(F=>w(F,$)).join(" "),w=(D,$)=>{const F=$.loose?a[u.TILDELOOSE]:a[u.TILDE];return D.replace(F,(L,j,z,q,P)=>{s("tilde",D,L,j,z,q,P);let U;return v(j)?U="":v(z)?U=`>=${j}.0.0 <${+j+1}.0.0-0`:v(q)?U=`>=${j}.${z}.0 <${j}.${+z+1}.0-0`:P?(s("replaceTilde pr",P),U=`>=${j}.${z}.${q}-${P} <${j}.${+z+1}.0-0`):U=`>=${j}.${z}.${q} <${j}.${+z+1}.0-0`,s("tilde return",U),U})},E=(D,$)=>D.trim().split(/\s+/).map(F=>x(F,$)).join(" "),x=(D,$)=>{s("caret",D,$);const F=$.loose?a[u.CARETLOOSE]:a[u.CARET],L=$.includePrerelease?"-0":"";return D.replace(F,(j,z,q,P,U)=>{s("caret",D,j,z,q,P,U);let W;return v(z)?W="":v(q)?W=`>=${z}.0.0${L} <${+z+1}.0.0-0`:v(P)?z==="0"?W=`>=${z}.${q}.0${L} <${z}.${+q+1}.0-0`:W=`>=${z}.${q}.0${L} <${+z+1}.0.0-0`:U?(s("replaceCaret pr",U),z==="0"?q==="0"?W=`>=${z}.${q}.${P}-${U} <${z}.${q}.${+P+1}-0`:W=`>=${z}.${q}.${P}-${U} <${z}.${+q+1}.0-0`:W=`>=${z}.${q}.${P}-${U} <${+z+1}.0.0-0`):(s("no pr"),z==="0"?q==="0"?W=`>=${z}.${q}.${P}${L} <${z}.${q}.${+P+1}-0`:W=`>=${z}.${q}.${P}${L} <${z}.${+q+1}.0-0`:W=`>=${z}.${q}.${P} <${+z+1}.0.0-0`),s("caret return",W),W})},T=(D,$)=>(s("replaceXRanges",D,$),D.split(/\s+/).map(F=>C(F,$)).join(" ")),C=(D,$)=>{D=D.trim();const F=$.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return D.replace(F,(L,j,z,q,P,U)=>{s("xRange",D,L,j,z,q,P,U);const W=v(z),B=W||v(q),H=B||v(P),G=H;return j==="="&&G&&(j=""),U=$.includePrerelease?"-0":"",W?j===">"||j==="<"?L="<0.0.0-0":L="*":j&&G?(B&&(q=0),P=0,j===">"?(j=">=",B?(z=+z+1,q=0,P=0):(q=+q+1,P=0)):j==="<="&&(j="<",B?z=+z+1:q=+q+1),j==="<"&&(U="-0"),L=`${j+z}.${q}.${P}${U}`):B?L=`>=${z}.0.0${U} <${+z+1}.0.0-0`:H&&(L=`>=${z}.${q}.0${U} <${z}.${+q+1}.0-0`),s("xRange return",L),L})},A=(D,$)=>(s("replaceStars",D,$),D.trim().replace(a[u.STAR],"")),k=(D,$)=>(s("replaceGTE0",D,$),D.trim().replace(a[$.includePrerelease?u.GTE0PRE:u.GTE0],"")),R=D=>($,F,L,j,z,q,P,U,W,B,H,G,te)=>(v(L)?F="":v(j)?F=`>=${L}.0.0${D?"-0":""}`:v(z)?F=`>=${L}.${j}.0${D?"-0":""}`:q?F=`>=${F}`:F=`>=${F}${D?"-0":""}`,v(W)?U="":v(B)?U=`<${+W+1}.0.0-0`:v(H)?U=`<${W}.${+B+1}.0-0`:G?U=`<=${W}.${B}.${H}-${G}`:D?U=`<${W}.${B}.${+H+1}-0`:U=`<=${U}`,`${F} ${U}`.trim()),O=(D,$,F)=>{for(let L=0;L<D.length;L++)if(!D[L].test($))return!1;if($.prerelease.length&&!F.includePrerelease){for(let L=0;L<D.length;L++)if(s(D[L].semver),D[L].semver!==i.ANY&&D[L].semver.prerelease.length>0){const j=D[L].semver;if(j.major===$.major&&j.minor===$.minor&&j.patch===$.patch)return!0}return!1}return!0};return r7}const Imn=pUe(),kmn=(e,t,n)=>{try{t=new Imn(t,n)}catch{return!1}return t.test(e)};var Rmn=kmn,mUe=Npn(Rmn);function Nmn(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var Dmn=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function gUe(e,...t){for(const n of t)Pmn(e,n);return e}function Pmn(e,t){for(const n of Object.keys(t))nT(e,n,t[n],!0)}const Af=gin;let gk=whn;const vP=typeof window<"u"?window:void 0;var O1e;gk===void 0&&((O1e=vP==null?void 0:vP.vl)!=null&&O1e.compile)&&(gk=vP.vl);const Omn={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},$mn={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},yA={vega:"Vega","vega-lite":"Vega-Lite"},kL={vega:Af.version,"vega-lite":gk?gk.version:"not available"},Mmn={vega:e=>e,"vega-lite":(e,t)=>gk.compile(e,{config:t}).spec},Lmn=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Fmn="chart-wrapper";function Bmn(e){return typeof e=="function"}function R1e(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${yA[r]} JSON Source`}function jmn(e,t){if(e.$schema){const n=aUe(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${yA[n.library]}, but mode argument sets ${yA[t]??t}.`);const r=n.library;return mUe(kL[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${yA[r]} ${n.version}, but the current version of ${yA[r]} is v${kL[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function yUe(e){return!!(e&&"load"in e)}function N1e(e){return yUe(e)?e:Af.loader(e)}function Umn(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return mt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function zmn(e,t,n={}){let r,i;mt(t)?(i=N1e(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=Umn(r),o=s.loader;(!i||o)&&(i=N1e(n.loader??o));const a=await D1e(s,i),u=await D1e(n,i),l={...gUe(u,a),config:tT(u.config??{},a.config??{})};return await Hmn(e,r,l,i)}async function D1e(e,t){const n=mt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=mt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function Vmn(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Hmn(e,t,n={},r){const i=n.theme?tT(Epn[n.theme],n.config??{}):n.config,s=uv(n.actions)?n.actions:gUe({},Omn,n.actions??{}),o={...$mn,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??Af.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:x,rootContainer:T}=Vmn(c);if(!x.getElementById(E)){const C=document.createElement("style");C.id=E,C.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?Dmn.toString():n.defaultStyle,T.appendChild(C)}}const f=jmn(t,n.mode);let d=Mmn[f](t,i);if(f==="vega-lite"&&d.$schema){const E=aUe(d.$schema);mUe(kL.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${kL.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const E=document.createElement("div");E.classList.add(Fmn),c.appendChild(E),h=E}const p=n.patch;if(p&&(d=p instanceof Function?p(d):f5(d,p,!0,!1).newDocument),n.formatLocale&&Af.formatLocale(n.formatLocale),n.timeFormatLocale&&Af.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const x=n.expressionFunctions[E];"fn"in x?Af.expressionFunction(E,x.fn,x.visitor):x instanceof Function&&Af.expressionFunction(E,x)}const{ast:m}=n,g=Af.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||Af.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:Af.expressionInterpreter??n.expr??Cin}:{}});if(y.addSignalListener("autosize",(E,x)=>{const{type:T}=x;T=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):T=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):T=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:E,tooltip:x}=n,T=E&&!yUe(E)?E==null?void 0:E.baseURL:void 0,C=Bmn(x)?x:new Rpn({baseURL:T,...x===!0?{}:x}).call;y.tooltip(C)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:E,updateSet:x}=typeof v=="boolean"?{}:v;y.hover(E,x)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let b;if(s!==!1){let E=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const T=document.createElement("details");T.title=o.CLICK_TO_VIEW_ACTIONS,c.append(T),E=T;const C=document.createElement("summary");C.innerHTML=Lmn,T.append(C),b=A=>{T.contains(A.target)||T.removeAttribute("open")},document.addEventListener("click",b)}const x=document.createElement("div");if(E.append(x),x.classList.add("vega-actions"),s===!0||s.export!==!1){for(const T of["svg","png"])if(s===!0||s.export===!0||s.export[T]){const C=o[`${T.toUpperCase()}_ACTION`],A=document.createElement("a"),k=gt(n.scaleFactor)?n.scaleFactor[T]:n.scaleFactor;A.text=C,A.href="#",A.target="_blank",A.download=`${l}.${T}`,A.addEventListener("mousedown",async function(R){R.preventDefault();const O=await y.toImageURL(T,k);this.href=O}),x.append(A)}}if(s===!0||s.source!==!1){const T=document.createElement("a");T.text=o.SOURCE_ACTION,T.href="#",T.addEventListener("click",function(C){R1e(iU(t),n.sourceHeader??"",n.sourceFooter??"",f),C.preventDefault()}),x.append(T)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const T=document.createElement("a");T.text=o.COMPILED_ACTION,T.href="#",T.addEventListener("click",function(C){R1e(iU(d),n.sourceHeader??"",n.sourceFooter??"","vega"),C.preventDefault()}),x.append(T)}if(s===!0||s.editor!==!1){const T=n.editorUrl??"https://vega.github.io/editor/",C=document.createElement("a");C.text=o.EDITOR_ACTION,C.href="#",C.addEventListener("click",function(A){Nmn(window,T,{config:i,mode:f,renderer:a,spec:iU(t)}),A.preventDefault()}),x.append(C)}}function w(){b&&document.removeEventListener("click",b),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:w,embedOptions:n}}function qmn(e){return!!e&&{}.toString.call(e)==="[object Function]"}function Wmn(e,t,n){n&&(qmn(n)?n(e.data(t)):e.change(t,Af.changeset().remove(()=>!0).insert(n)))}function Gmn(e,t){Object.keys(t).forEach(n=>{Wmn(e,n,t[n])})}function vUe(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const bUe=()=>{};function i7(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function Ymn(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=vUe([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!jP(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function P1e(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function s7(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function vA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class _Ue extends qt.PureComponent{constructor(){super(...arguments),vA(this,"containerRef",qt.createRef()),vA(this,"resultPromise",void 0),vA(this,"handleError",t=>{const{onError:n=bUe}=this.props;n(t,this.containerRef.current),console.warn(t)}),vA(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=vUe([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=Ymn(s7(this.props),s7(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!vq(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&P1e(a,s),i&&i7(a,i)),a.run()})}else vq(i,s)||this.modifyView(o=>{s&&P1e(o,s),i&&i7(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=s7(this.props);this.resultPromise=zmn(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;i7(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return qt.createElement("div",{ref:this.containerRef,className:t,style:n})}}vA(_Ue,"propTypes",{className:Bge.string,onError:Bge.func});function GW(){return GW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GW.apply(this,arguments)}function YW(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Kmn={};class wUe extends qt.PureComponent{constructor(){super(...arguments),YW(this,"vegaEmbed",qt.createRef()),YW(this,"handleNewView",t=>{this.update();const{onNewView:n=bUe}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){vq(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{Gmn(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return qt.createElement(_Ue,GW({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}YW(wUe,"defaultProps",{data:Kmn});function KW(){return KW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KW.apply(this,arguments)}function Xmn(e){return qt.createElement(wUe,KW({},e,{mode:"vega-lite"}))}function Qmn(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function Jmn(e){const{studyId:t,allParticipants:n,config:r}=e,i=dg(),[s,o]=Qw(),a=n.filter(b=>b.completed).map(b=>Math.max(...Object.values(b.answers).map(w=>w.endTime).filter(w=>w!==void 0))).filter(b=>Number.isFinite(b)),[u,l]=I.useState([new Date(new Date(Math.min(...a.length>0?a:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...a.length>0?a:[new Date().getTime()])).setHours(24,0,0,0))]),[c,f,d,h]=I.useMemo(()=>{const b=n.filter(x=>!x.rejected&&x.completed),w=n.filter(x=>!x.rejected&&!x.completed),E=n.filter(x=>x.rejected);return[b,w,E,b.filter(x=>Qmn(x.answers,u))]},[n,u]),p=I.useMemo(()=>{var b,w;return h.length>0?[{Date:(b=u[0])==null?void 0:b.getTime(),Participants:0},...h.map(E=>Math.max(...Object.values(E.answers).map(x=>x.endTime).flat())).sort((E,x)=>E-x).map((E,x)=>({Date:E,Participants:x})),{Date:(w=u[1])==null?void 0:w.getTime(),Participants:h.length}]:[]},[h,u]),m=I.useMemo(()=>{var b,w;return{width:o.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(b=u[0])==null?void 0:b.getTime(),(w=u[1])==null?void 0:w.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:p}}},[o.width,u,p]),[g,{close:y,open:v}]=Jw(!1);return _.jsx(Wc,{children:_.jsxs(Kb,{ref:s,padding:"lg",shadow:"md",withBorder:!0,children:[_.jsxs(Gt,{align:"center",mb:"xs",justify:"space-between",children:[_.jsxs(Gt,{direction:"row",align:"center",children:[_.jsx($i,{order:5,children:t}),_.jsx($3e,{completed:c.length,inProgress:f.length,rejected:d.length,filteredCompleted:h.length})]}),_.jsxs(Vs,{children:[_.jsx(O3e,{allParticipants:n,studyId:t}),_.jsxs(si,{opened:g,children:[_.jsx(si.Target,{children:_.jsx(Nn,{onClick:()=>i(`/analysis/stats/${t}`),onMouseEnter:v,onMouseLeave:y,px:4,children:_.jsx(JZe,{})})}),_.jsx(si.Dropdown,{children:_.jsx(Je,{children:"Analyze and manage study data"})})]})]})]}),_.jsx(Ate,{type:"range",label:"Time Filter",placeholder:"Select a date range",value:u,onChange:l}),p.length>0?_.jsxs(_.Fragment,{children:[_.jsx(Je,{mt:16,children:"Finished Participants"}),_.jsx(Xmn,{spec:m,actions:!1})]}):_.jsx(_e,{h:293.4,children:_.jsx($h,{style:{height:"100%"},children:_.jsx(Je,{children:"Not enough participants for chart"})})})]})})}function Zmn(e){const{globalConfig:t}=e,[n,r]=I.useState(!1),[i,s]=I.useState({}),[o,a]=I.useState({}),[u,l]=I.useState({}),{storageEngine:c}=Is(),{user:f}=f_();I.useEffect(()=>{(async()=>{r(!0);const p={},m={},g={},y=async b=>{const w=await C4(b,t);if(c){if(p[b]=await c.getAllParticipantsDataByStudy(b),w===null)return;if(m[b]=w,c instanceof Ic){const E=await c.getModes(b);g[b]=E.analyticsInterfacePubliclyAccessible}}};await(async()=>{const b=t.configsList.map(w=>y(w));try{await Promise.all(b),s(p),a(m),l(g)}catch(w){console.error("Error fetching data:",w)}finally{r(!1)}})()})()},[t,c]);const d=t.configsList.map(h=>i[h]&&(u[h]||f.isAdmin?_.jsx(ao.Col,{span:{md:12,xl:6},children:_.jsx(Jmn,{studyId:h,allParticipants:i[h],config:o[h]})},`${h}-panel`):null));return _.jsxs(_e,{children:[_.jsx($i,{mb:20,order:4,children:"Your Studies:"}),_.jsxs(ao,{children:[d.length>0?d:_.jsx(Wc,{mt:100,children:_.jsx(Je,{children:"No studies to show. If you believe that this is in error, make sure that you are logged in."})}),_.jsx(Gl,{visible:n})]})]})}function egn({globalConfig:e}){return _.jsxs(_.Fragment,{children:[_.jsx(c2,{studyIds:e.configsList}),_.jsx(yi.Main,{children:_.jsx(Wc,{fluid:!0,children:_.jsx(Zmn,{globalConfig:e})})})]})}function tgn(){const{user:e,triggerAuth:t}=f_(),{storageEngine:n}=Is(),[r,i]=I.useState(!1),[s,o]=I.useState([]),[a,u]=I.useState(!1),[l,c]=I.useState(!1),[f,d]=I.useState(!1),[h,p]=I.useState(!1),[m,g]=I.useState(""),[y,v]=I.useState(null),b=GTe({initialValues:{email:""},validate:{email:Vlt("Invalid email")}});I.useEffect(()=>{(async()=>{if(u(!0),n instanceof Ic){const R=await(n==null?void 0:n.getUserManagementData("authentication"));i(R==null?void 0:R.isEnabled);const O=await(n==null?void 0:n.getUserManagementData("adminUsers"));O&&O.adminUsersList&&o(O==null?void 0:O.adminUsersList.map(D=>D.email))}else i(!1);u(!1)})()},[n]);const w=async()=>{if(u(!0),n instanceof Ic){const k=await M3e(n,u);k&&k.email&&v({email:k.email,uid:k.uid}),p(!0)}u(!1)},E=async k=>{u(!0),n instanceof Ic&&k&&(await n.changeAuth(!0),await n.addAdminUser(k),o([k.email]),i(!0),t()),p(!1),u(!1)},x=async()=>{if(u(!0),n instanceof Ic){await n.addAdminUser({email:b.values.email,uid:null});const k=await n.getUserManagementData("adminUsers");o(k==null?void 0:k.adminUsersList.map(R=>R.email))}u(!1),c(!1),b.setValues({email:""})},T=k=>{d(!0),g(k)},C=async()=>{if(u(!0),n instanceof Ic){await n.removeAdminUser(m);const k=await n.getUserManagementData("adminUsers");o(k==null?void 0:k.adminUsersList.map(R=>R.email))}d(!1),u(!1)},A=I.useMemo(()=>n instanceof Ic,[n]);return _.jsxs(_.Fragment,{children:[_.jsx(Wc,{children:_.jsxs(Kb,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[_.jsx($i,{mb:20,order:3,children:"Authentication"}),r?_.jsx(Gt,{children:_.jsx(Je,{children:"Authentication is enabled."})}):_.jsxs(Gt,{justify:"space-between",children:[_.jsx(_e,{children:_.jsx(Je,{children:"Authentication is currently disabled."})}),_.jsx(ls,{label:"You can only enable auth when using Firebase",disabled:A,children:_.jsx(Nn,{onClick:k=>A?w():k.preventDefault(),color:"green","data-disabled":A?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?_.jsxs(Gt,{mt:40,direction:"column",children:[_.jsxs(Gt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[_.jsx($i,{order:6,children:"Enabled Users"}),_.jsx(WK,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(k=>{var R;return _.jsxs(Gt,{justify:"space-between",mb:10,children:[_.jsx(Je,{children:k}),k===((R=e.user)==null?void 0:R.email)?_.jsx(Je,{color:"blue",size:"xs",children:"You"}):_.jsx(ty,{variant:"subtle",onClick:()=>T(k),children:_.jsx(Hxe,{color:"red"})})]},k)}):null]}):null]})}),_.jsx(Ts,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:_.jsxs(_e,{component:"form",onSubmit:b.onSubmit(()=>x()),children:[_.jsx($1,{leftSection:_.jsx(YZe,{}),placeholder:"User Gmail Account",...b.getInputProps("email")}),_.jsxs(Gt,{mt:30,justify:"right",children:[_.jsx(Nn,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),_.jsx(Nn,{type:"submit",children:"Save"})]})]})}),_.jsxs(Ts,{opened:f,size:"large",onClose:()=>d(!1),title:_.jsxs(Je,{fw:700,children:["Remove",m,"?"]}),children:[_.jsxs(Je,{mt:40,children:["Are you sure you want to remove",_.jsx("b",{children:m})," ","as an administrator?"]}),_.jsxs(Gt,{mt:40,justify:"right",children:[_.jsx(Nn,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),_.jsx(Nn,{onClick:()=>C(),children:"Yes, I'm sure."})]})]}),_.jsxs(Ts,{opened:h,size:"md",onClose:()=>d(!1),title:_.jsx(Je,{fw:700,children:"Enable Authentication?"}),children:[_.jsxs(Je,{mt:40,children:["User"," ",_.jsx("b",{children:y==null?void 0:y.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),_.jsxs(Gt,{mt:40,justify:"right",children:[_.jsx(Nn,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),_.jsx(Nn,{onClick:()=>E(y),children:"Yes, I'm sure."})]})]}),_.jsx(Gl,{visible:a})]})}class ngn extends D3e{constructor(){super("localStorage");_u(this,"studyDatabase");_u(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await gw.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await $3(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s,o){var f;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await $3(JSON.stringify(i)),c={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1};return u.dataCollectionEnabled&&await((f=this.studyDatabase)==null?void 0:f.setItem(this.currentParticipantId,c)),c}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await gw.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=O3();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),i}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=gw.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=O3();this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(i.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,i)}async setMode(n,r,i){this.studyDatabase=await gw.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await gw.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}_verifyStudyDatabase(n){return n!==void 0}}async function rgn(){let e,t=!1;{const n=new Ic;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new ngn;await n.connect(),e=n}return e}async function ign(){const t=await(await fetch(`${ip}global.json`)).text();return LLt(t)}function sgn(){const[e,t]=I.useState(null),[n,r]=I.useState({});I.useEffect(()=>{async function a(){e&&r(await u6t(e))}a()},[e]),I.useEffect(()=>{e||ign().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=Is();I.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await rgn();s(u)}a()},[s,i]);const o=async a=>i instanceof Ic?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?_.jsx(FZe,{basename:ip,children:_.jsx(a7t,{children:_.jsx(HZe,{children:_.jsx(yi,{padding:"md",header:{height:70},children:_.jsxs(OZe,{children:[_.jsx(Mp,{path:"/",element:_.jsxs(_.Fragment,{children:[_.jsx(c2,{studyIds:e.configsList}),_.jsx(Kat,{globalConfig:e,studyConfigs:n})]})}),_.jsx(Mp,{path:"/:studyId/*",element:_.jsx(l6t,{globalConfig:e})}),_.jsx(Mp,{path:"/analysis/dashboard",element:_.jsx(egn,{globalConfig:e})}),_.jsx(Mp,{path:"/analysis",element:_.jsx(VH,{to:"/analysis/dashboard"})}),_.jsx(Mp,{path:"/analysis/stats/:studyId/:tab",element:_.jsx($ge,{paramToCheck:"studyId",paramCallback:o,children:_.jsx(p7t,{globalConfig:e})})}),_.jsx(Mp,{path:"/analysis/stats/:studyId",element:_.jsx(VH,{to:"./table",replace:!0})}),_.jsx(Mp,{path:"/settings",element:_.jsxs($ge,{children:[_.jsx(c2,{studyIds:e.configsList}),_.jsx(yi.Main,{children:_.jsx(tgn,{})})]})}),_.jsx(Mp,{path:"/login",element:_.jsxs(_.Fragment,{children:[_.jsx(c2,{studyIds:e.configsList}),_.jsx(yi.Main,{children:_.jsx(m7t,{})})]})})]})})})})}):null}o7.createRoot(document.getElementById("root")).render(_.jsx(qt.StrictMode,{children:_.jsx(HJe,{children:_.jsx(gwe,{children:_.jsx(sgn,{})})})}))});export default ogn();
