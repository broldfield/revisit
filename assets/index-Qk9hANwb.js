var a7e=Object.defineProperty;var u7e=(e,t,n)=>t in e?a7e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var l7e=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var wu=(e,t,n)=>(u7e(e,typeof t!="symbol"?t+"":t,n),n);var G0n=l7e((rvn,koe)=>{function c7e(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ao=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ml(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function f7e(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var cbe={exports:{}},QL={},fbe={exports:{}},jn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fk=Symbol.for("react.element"),d7e=Symbol.for("react.portal"),h7e=Symbol.for("react.fragment"),p7e=Symbol.for("react.strict_mode"),m7e=Symbol.for("react.profiler"),g7e=Symbol.for("react.provider"),y7e=Symbol.for("react.context"),v7e=Symbol.for("react.forward_ref"),b7e=Symbol.for("react.suspense"),_7e=Symbol.for("react.memo"),w7e=Symbol.for("react.lazy"),Zoe=Symbol.iterator;function E7e(e){return e===null||typeof e!="object"?null:(e=Zoe&&e[Zoe]||e["@@iterator"],typeof e=="function"?e:null)}var dbe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hbe=Object.assign,pbe={};function gS(e,t,n){this.props=e,this.context=t,this.refs=pbe,this.updater=n||dbe}gS.prototype.isReactComponent={};gS.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};gS.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function mbe(){}mbe.prototype=gS.prototype;function EG(e,t,n){this.props=e,this.context=t,this.refs=pbe,this.updater=n||dbe}var xG=EG.prototype=new mbe;xG.constructor=EG;hbe(xG,gS.prototype);xG.isPureReactComponent=!0;var eae=Array.isArray,gbe=Object.prototype.hasOwnProperty,SG={current:null},ybe={key:!0,ref:!0,__self:!0,__source:!0};function vbe(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)gbe.call(t,r)&&!ybe.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Fk,type:e,key:s,ref:o,props:i,_owner:SG.current}}function x7e(e,t){return{$$typeof:Fk,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function TG(e){return typeof e=="object"&&e!==null&&e.$$typeof===Fk}function S7e(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var tae=/\/+/g;function xB(e,t){return typeof e=="object"&&e!==null&&e.key!=null?S7e(""+e.key):t.toString(36)}function FP(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Fk:case d7e:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+xB(o,0):r,eae(i)?(n="",e!=null&&(n=e.replace(tae,"$&/")+"/"),FP(i,t,n,"",function(l){return l})):i!=null&&(TG(i)&&(i=x7e(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(tae,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",eae(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+xB(s,a);o+=FP(s,t,n,u,i)}else if(u=E7e(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+xB(s,a++),o+=FP(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function WN(e,t,n){if(e==null)return e;var r=[],i=0;return FP(e,r,"","",function(s){return t.call(n,s,i++)}),r}function T7e(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var du={current:null},jP={transition:null},C7e={ReactCurrentDispatcher:du,ReactCurrentBatchConfig:jP,ReactCurrentOwner:SG};function bbe(){throw Error("act(...) is not supported in production builds of React.")}jn.Children={map:WN,forEach:function(e,t,n){WN(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return WN(e,function(){t++}),t},toArray:function(e){return WN(e,function(t){return t})||[]},only:function(e){if(!TG(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};jn.Component=gS;jn.Fragment=h7e;jn.Profiler=m7e;jn.PureComponent=EG;jn.StrictMode=p7e;jn.Suspense=b7e;jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C7e;jn.act=bbe;jn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=hbe({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=SG.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)gbe.call(t,u)&&!ybe.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:Fk,type:e.type,key:i,ref:s,props:r,_owner:o}};jn.createContext=function(e){return e={$$typeof:y7e,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:g7e,_context:e},e.Consumer=e};jn.createElement=vbe;jn.createFactory=function(e){var t=vbe.bind(null,e);return t.type=e,t};jn.createRef=function(){return{current:null}};jn.forwardRef=function(e){return{$$typeof:v7e,render:e}};jn.isValidElement=TG;jn.lazy=function(e){return{$$typeof:w7e,_payload:{_status:-1,_result:e},_init:T7e}};jn.memo=function(e,t){return{$$typeof:_7e,type:e,compare:t===void 0?null:t}};jn.startTransition=function(e){var t=jP.transition;jP.transition={};try{e()}finally{jP.transition=t}};jn.unstable_act=bbe;jn.useCallback=function(e,t){return du.current.useCallback(e,t)};jn.useContext=function(e){return du.current.useContext(e)};jn.useDebugValue=function(){};jn.useDeferredValue=function(e){return du.current.useDeferredValue(e)};jn.useEffect=function(e,t){return du.current.useEffect(e,t)};jn.useId=function(){return du.current.useId()};jn.useImperativeHandle=function(e,t,n){return du.current.useImperativeHandle(e,t,n)};jn.useInsertionEffect=function(e,t){return du.current.useInsertionEffect(e,t)};jn.useLayoutEffect=function(e,t){return du.current.useLayoutEffect(e,t)};jn.useMemo=function(e,t){return du.current.useMemo(e,t)};jn.useReducer=function(e,t,n){return du.current.useReducer(e,t,n)};jn.useRef=function(e){return du.current.useRef(e)};jn.useState=function(e){return du.current.useState(e)};jn.useSyncExternalStore=function(e,t,n){return du.current.useSyncExternalStore(e,t,n)};jn.useTransition=function(){return du.current.useTransition()};jn.version="18.3.1";fbe.exports=jn;var A=fbe.exports;const Pt=ml(A),i$=c7e({__proto__:null,default:Pt},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A7e=A,I7e=Symbol.for("react.element"),k7e=Symbol.for("react.fragment"),R7e=Object.prototype.hasOwnProperty,N7e=A7e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,D7e={key:!0,ref:!0,__self:!0,__source:!0};function _be(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)R7e.call(t,r)&&!D7e.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:I7e,type:e,key:s,ref:o,props:i,_owner:N7e.current}}QL.Fragment=k7e;QL.jsx=_be;QL.jsxs=_be;cbe.exports=QL;var _=cbe.exports,k7={},wbe={exports:{}},uc={},Ebe={exports:{}},xbe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,V){var D=U.length;U.push(V);e:for(;0<D;){var z=D-1>>>1,W=U[z];if(0<i(W,V))U[z]=V,U[D]=W,D=z;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var V=U[0],D=U.pop();if(D!==V){U[0]=D;e:for(var z=0,W=U.length,j=W>>>1;z<j;){var q=2*(z+1)-1,G=U[q],te=q+1,le=U[te];if(0>i(G,D))te<W&&0>i(le,G)?(U[z]=le,U[te]=D,z=te):(U[z]=G,U[q]=D,z=q);else if(te<W&&0>i(le,D))U[z]=le,U[te]=D,z=te;else break e}}return V}function i(U,V){var D=U.sortIndex-V.sortIndex;return D!==0?D:U.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var V=n(l);V!==null;){if(V.callback===null)r(l);else if(V.startTime<=U)r(l),V.sortIndex=V.expirationTime,t(u,V);else break;V=n(l)}}function w(U){if(m=!1,b(U),!p)if(n(u)!==null)p=!0,M(E);else{var V=n(l);V!==null&&B(w,V.startTime-U)}}function E(U,V){p=!1,m&&(m=!1,y(C),C=-1),h=!0;var D=d;try{for(b(V),f=n(u);f!==null&&(!(f.expirationTime>V)||U&&!R());){var z=f.callback;if(typeof z=="function"){f.callback=null,d=f.priorityLevel;var W=z(f.expirationTime<=V);V=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(u)&&r(u),b(V)}else r(u);f=n(u)}if(f!==null)var j=!0;else{var q=n(l);q!==null&&B(w,q.startTime-V),j=!1}return j}finally{f=null,d=D,h=!1}}var x=!1,S=null,C=-1,I=5,k=-1;function R(){return!(e.unstable_now()-k<I)}function O(){if(S!==null){var U=e.unstable_now();k=U;var V=!0;try{V=S(!0,U)}finally{V?P():(x=!1,S=null)}}else x=!1}var P;if(typeof v=="function")P=function(){v(O)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,L=$.port2;$.port1.onmessage=O,P=function(){L.postMessage(null)}}else P=function(){g(O,0)};function M(U){S=U,x||(x=!0,P())}function B(U,V){C=g(function(){U(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,M(E))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(U){switch(d){case 1:case 2:case 3:var V=3;break;default:V=d}var D=d;d=V;try{return U()}finally{d=D}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,V){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var D=d;d=U;try{return V()}finally{d=D}},e.unstable_scheduleCallback=function(U,V,D){var z=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?z+D:z):D=z,U){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=D+W,U={id:c++,callback:V,priorityLevel:U,startTime:D,expirationTime:W,sortIndex:-1},D>z?(U.sortIndex=D,t(l,U),n(u)===null&&U===n(l)&&(m?(y(C),C=-1):m=!0,B(w,D-z))):(U.sortIndex=W,t(u,U),p||h||(p=!0,M(E))),U},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(U){var V=d;return function(){var D=d;d=V;try{return U.apply(this,arguments)}finally{d=D}}}})(xbe);Ebe.exports=xbe;var P7e=Ebe.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O7e=A,Yl=P7e;function tt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Sbe=new Set,B2={};function Zb(e,t){GE(e,t),GE(e+"Capture",t)}function GE(e,t){for(B2[e]=t,e=0;e<t.length;e++)Sbe.add(t[e])}var Rm=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),R7=Object.prototype.hasOwnProperty,$7e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nae={},rae={};function M7e(e){return R7.call(rae,e)?!0:R7.call(nae,e)?!1:$7e.test(e)?rae[e]=!0:(nae[e]=!0,!1)}function L7e(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function F7e(e,t,n,r){if(t===null||typeof t>"u"||L7e(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function hu(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Go={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Go[e]=new hu(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Go[t]=new hu(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Go[e]=new hu(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Go[e]=new hu(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Go[e]=new hu(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Go[e]=new hu(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Go[e]=new hu(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Go[e]=new hu(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Go[e]=new hu(e,5,!1,e.toLowerCase(),null,!1,!1)});var CG=/[\-:]([a-z])/g;function AG(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(CG,AG);Go[t]=new hu(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(CG,AG);Go[t]=new hu(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(CG,AG);Go[t]=new hu(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Go[e]=new hu(e,1,!1,e.toLowerCase(),null,!1,!1)});Go.xlinkHref=new hu("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Go[e]=new hu(e,1,!1,e.toLowerCase(),null,!0,!0)});function IG(e,t,n,r){var i=Go.hasOwnProperty(t)?Go[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(F7e(t,n,i,r)&&(n=null),r||i===null?M7e(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var sg=O7e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,GN=Symbol.for("react.element"),Ow=Symbol.for("react.portal"),$w=Symbol.for("react.fragment"),kG=Symbol.for("react.strict_mode"),N7=Symbol.for("react.profiler"),Tbe=Symbol.for("react.provider"),Cbe=Symbol.for("react.context"),RG=Symbol.for("react.forward_ref"),D7=Symbol.for("react.suspense"),P7=Symbol.for("react.suspense_list"),NG=Symbol.for("react.memo"),Gg=Symbol.for("react.lazy"),Abe=Symbol.for("react.offscreen"),iae=Symbol.iterator;function VT(e){return e===null||typeof e!="object"?null:(e=iae&&e[iae]||e["@@iterator"],typeof e=="function"?e:null)}var Fi=Object.assign,SB;function GC(e){if(SB===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);SB=t&&t[1]||""}return`
`+SB+e}var TB=!1;function CB(e,t){if(!e||TB)return"";TB=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{TB=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?GC(e):""}function j7e(e){switch(e.tag){case 5:return GC(e.type);case 16:return GC("Lazy");case 13:return GC("Suspense");case 19:return GC("SuspenseList");case 0:case 2:case 15:return e=CB(e.type,!1),e;case 11:return e=CB(e.type.render,!1),e;case 1:return e=CB(e.type,!0),e;default:return""}}function O7(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $w:return"Fragment";case Ow:return"Portal";case N7:return"Profiler";case kG:return"StrictMode";case D7:return"Suspense";case P7:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Cbe:return(e.displayName||"Context")+".Consumer";case Tbe:return(e._context.displayName||"Context")+".Provider";case RG:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case NG:return t=e.displayName||null,t!==null?t:O7(e.type)||"Memo";case Gg:t=e._payload,e=e._init;try{return O7(e(t))}catch{}}return null}function B7e(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return O7(t);case 8:return t===kG?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function sy(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ibe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function U7e(e){var t=Ibe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function YN(e){e._valueTracker||(e._valueTracker=U7e(e))}function kbe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ibe(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function s$(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function $7(e,t){var n=t.checked;return Fi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function sae(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=sy(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Rbe(e,t){t=t.checked,t!=null&&IG(e,"checked",t,!1)}function M7(e,t){Rbe(e,t);var n=sy(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?L7(e,t.type,n):t.hasOwnProperty("defaultValue")&&L7(e,t.type,sy(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function oae(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function L7(e,t,n){(t!=="number"||s$(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var YC=Array.isArray;function aE(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+sy(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function F7(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(tt(91));return Fi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function aae(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(tt(92));if(YC(n)){if(1<n.length)throw Error(tt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:sy(n)}}function Nbe(e,t){var n=sy(t.value),r=sy(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function uae(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Dbe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function j7(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Dbe(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var KN,Pbe=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(KN=KN||document.createElement("div"),KN.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=KN.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function U2(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var FA={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},z7e=["Webkit","ms","Moz","O"];Object.keys(FA).forEach(function(e){z7e.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),FA[t]=FA[e]})});function Obe(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||FA.hasOwnProperty(e)&&FA[e]?(""+t).trim():t+"px"}function $be(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Obe(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var V7e=Fi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function B7(e,t){if(t){if(V7e[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(tt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(tt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(tt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(tt(62))}}function U7(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var z7=null;function DG(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var V7=null,uE=null,lE=null;function lae(e){if(e=Uk(e)){if(typeof V7!="function")throw Error(tt(280));var t=e.stateNode;t&&(t=n6(t),V7(e.stateNode,e.type,t))}}function Mbe(e){uE?lE?lE.push(e):lE=[e]:uE=e}function Lbe(){if(uE){var e=uE,t=lE;if(lE=uE=null,lae(e),t)for(e=0;e<t.length;e++)lae(t[e])}}function Fbe(e,t){return e(t)}function jbe(){}var AB=!1;function Bbe(e,t,n){if(AB)return e(t,n);AB=!0;try{return Fbe(e,t,n)}finally{AB=!1,(uE!==null||lE!==null)&&(jbe(),Lbe())}}function z2(e,t){var n=e.stateNode;if(n===null)return null;var r=n6(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(tt(231,t,typeof n));return n}var H7=!1;if(Rm)try{var HT={};Object.defineProperty(HT,"passive",{get:function(){H7=!0}}),window.addEventListener("test",HT,HT),window.removeEventListener("test",HT,HT)}catch{H7=!1}function H7e(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var jA=!1,o$=null,a$=!1,q7=null,q7e={onError:function(e){jA=!0,o$=e}};function W7e(e,t,n,r,i,s,o,a,u){jA=!1,o$=null,H7e.apply(q7e,arguments)}function G7e(e,t,n,r,i,s,o,a,u){if(W7e.apply(this,arguments),jA){if(jA){var l=o$;jA=!1,o$=null}else throw Error(tt(198));a$||(a$=!0,q7=l)}}function e_(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ube(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function cae(e){if(e_(e)!==e)throw Error(tt(188))}function Y7e(e){var t=e.alternate;if(!t){if(t=e_(e),t===null)throw Error(tt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return cae(i),e;if(s===r)return cae(i),t;s=s.sibling}throw Error(tt(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(tt(189))}}if(n.alternate!==r)throw Error(tt(190))}if(n.tag!==3)throw Error(tt(188));return n.stateNode.current===n?e:t}function zbe(e){return e=Y7e(e),e!==null?Vbe(e):null}function Vbe(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Vbe(e);if(t!==null)return t;e=e.sibling}return null}var Hbe=Yl.unstable_scheduleCallback,fae=Yl.unstable_cancelCallback,K7e=Yl.unstable_shouldYield,X7e=Yl.unstable_requestPaint,ls=Yl.unstable_now,Q7e=Yl.unstable_getCurrentPriorityLevel,PG=Yl.unstable_ImmediatePriority,qbe=Yl.unstable_UserBlockingPriority,u$=Yl.unstable_NormalPriority,J7e=Yl.unstable_LowPriority,Wbe=Yl.unstable_IdlePriority,JL=null,Eh=null;function Z7e(e){if(Eh&&typeof Eh.onCommitFiberRoot=="function")try{Eh.onCommitFiberRoot(JL,e,void 0,(e.current.flags&128)===128)}catch{}}var Zf=Math.clz32?Math.clz32:nze,eze=Math.log,tze=Math.LN2;function nze(e){return e>>>=0,e===0?32:31-(eze(e)/tze|0)|0}var XN=64,QN=4194304;function KC(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function l$(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=KC(a):(s&=o,s!==0&&(r=KC(s)))}else o=n&~i,o!==0?r=KC(o):s!==0&&(r=KC(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Zf(t),i=1<<n,r|=e[n],t&=~i;return r}function rze(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ize(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Zf(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=rze(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function W7(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Gbe(){var e=XN;return XN<<=1,!(XN&4194240)&&(XN=64),e}function IB(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function jk(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Zf(t),e[t]=n}function sze(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Zf(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function OG(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Zf(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Lr=0;function Ybe(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Kbe,$G,Xbe,Qbe,Jbe,G7=!1,JN=[],k0=null,R0=null,N0=null,V2=new Map,H2=new Map,r0=[],oze="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dae(e,t){switch(e){case"focusin":case"focusout":k0=null;break;case"dragenter":case"dragleave":R0=null;break;case"mouseover":case"mouseout":N0=null;break;case"pointerover":case"pointerout":V2.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":H2.delete(t.pointerId)}}function qT(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Uk(t),t!==null&&$G(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function aze(e,t,n,r,i){switch(t){case"focusin":return k0=qT(k0,e,t,n,r,i),!0;case"dragenter":return R0=qT(R0,e,t,n,r,i),!0;case"mouseover":return N0=qT(N0,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return V2.set(s,qT(V2.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,H2.set(s,qT(H2.get(s)||null,e,t,n,r,i)),!0}return!1}function Zbe(e){var t=x1(e.target);if(t!==null){var n=e_(t);if(n!==null){if(t=n.tag,t===13){if(t=Ube(n),t!==null){e.blockedOn=t,Jbe(e.priority,function(){Xbe(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function BP(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Y7(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);z7=r,n.target.dispatchEvent(r),z7=null}else return t=Uk(n),t!==null&&$G(t),e.blockedOn=n,!1;t.shift()}return!0}function hae(e,t,n){BP(e)&&n.delete(t)}function uze(){G7=!1,k0!==null&&BP(k0)&&(k0=null),R0!==null&&BP(R0)&&(R0=null),N0!==null&&BP(N0)&&(N0=null),V2.forEach(hae),H2.forEach(hae)}function WT(e,t){e.blockedOn===t&&(e.blockedOn=null,G7||(G7=!0,Yl.unstable_scheduleCallback(Yl.unstable_NormalPriority,uze)))}function q2(e){function t(i){return WT(i,e)}if(0<JN.length){WT(JN[0],e);for(var n=1;n<JN.length;n++){var r=JN[n];r.blockedOn===e&&(r.blockedOn=null)}}for(k0!==null&&WT(k0,e),R0!==null&&WT(R0,e),N0!==null&&WT(N0,e),V2.forEach(t),H2.forEach(t),n=0;n<r0.length;n++)r=r0[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<r0.length&&(n=r0[0],n.blockedOn===null);)Zbe(n),n.blockedOn===null&&r0.shift()}var cE=sg.ReactCurrentBatchConfig,c$=!0;function lze(e,t,n,r){var i=Lr,s=cE.transition;cE.transition=null;try{Lr=1,MG(e,t,n,r)}finally{Lr=i,cE.transition=s}}function cze(e,t,n,r){var i=Lr,s=cE.transition;cE.transition=null;try{Lr=4,MG(e,t,n,r)}finally{Lr=i,cE.transition=s}}function MG(e,t,n,r){if(c$){var i=Y7(e,t,n,r);if(i===null)FB(e,t,r,f$,n),dae(e,r);else if(aze(i,e,t,n,r))r.stopPropagation();else if(dae(e,r),t&4&&-1<oze.indexOf(e)){for(;i!==null;){var s=Uk(i);if(s!==null&&Kbe(s),s=Y7(e,t,n,r),s===null&&FB(e,t,r,f$,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else FB(e,t,r,null,n)}}var f$=null;function Y7(e,t,n,r){if(f$=null,e=DG(r),e=x1(e),e!==null)if(t=e_(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ube(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return f$=e,null}function e_e(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Q7e()){case PG:return 1;case qbe:return 4;case u$:case J7e:return 16;case Wbe:return 536870912;default:return 16}default:return 16}}var h0=null,LG=null,UP=null;function t_e(){if(UP)return UP;var e,t=LG,n=t.length,r,i="value"in h0?h0.value:h0.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return UP=i.slice(e,1<r?1-r:void 0)}function zP(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ZN(){return!0}function pae(){return!1}function lc(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ZN:pae,this.isPropagationStopped=pae,this}return Fi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ZN)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ZN)},persist:function(){},isPersistent:ZN}),t}var yS={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},FG=lc(yS),Bk=Fi({},yS,{view:0,detail:0}),fze=lc(Bk),kB,RB,GT,ZL=Fi({},Bk,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jG,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==GT&&(GT&&e.type==="mousemove"?(kB=e.screenX-GT.screenX,RB=e.screenY-GT.screenY):RB=kB=0,GT=e),kB)},movementY:function(e){return"movementY"in e?e.movementY:RB}}),mae=lc(ZL),dze=Fi({},ZL,{dataTransfer:0}),hze=lc(dze),pze=Fi({},Bk,{relatedTarget:0}),NB=lc(pze),mze=Fi({},yS,{animationName:0,elapsedTime:0,pseudoElement:0}),gze=lc(mze),yze=Fi({},yS,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vze=lc(yze),bze=Fi({},yS,{data:0}),gae=lc(bze),_ze={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wze={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eze={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xze(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Eze[e])?!!t[e]:!1}function jG(){return xze}var Sze=Fi({},Bk,{key:function(e){if(e.key){var t=_ze[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=zP(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?wze[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jG,charCode:function(e){return e.type==="keypress"?zP(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?zP(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Tze=lc(Sze),Cze=Fi({},ZL,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yae=lc(Cze),Aze=Fi({},Bk,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jG}),Ize=lc(Aze),kze=Fi({},yS,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rze=lc(kze),Nze=Fi({},ZL,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dze=lc(Nze),Pze=[9,13,27,32],BG=Rm&&"CompositionEvent"in window,BA=null;Rm&&"documentMode"in document&&(BA=document.documentMode);var Oze=Rm&&"TextEvent"in window&&!BA,n_e=Rm&&(!BG||BA&&8<BA&&11>=BA),vae=" ",bae=!1;function r_e(e,t){switch(e){case"keyup":return Pze.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function i_e(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Mw=!1;function $ze(e,t){switch(e){case"compositionend":return i_e(t);case"keypress":return t.which!==32?null:(bae=!0,vae);case"textInput":return e=t.data,e===vae&&bae?null:e;default:return null}}function Mze(e,t){if(Mw)return e==="compositionend"||!BG&&r_e(e,t)?(e=t_e(),UP=LG=h0=null,Mw=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return n_e&&t.locale!=="ko"?null:t.data;default:return null}}var Lze={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _ae(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Lze[e.type]:t==="textarea"}function s_e(e,t,n,r){Mbe(r),t=d$(t,"onChange"),0<t.length&&(n=new FG("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var UA=null,W2=null;function Fze(e){g_e(e,0)}function e6(e){var t=jw(e);if(kbe(t))return e}function jze(e,t){if(e==="change")return t}var o_e=!1;if(Rm){var DB;if(Rm){var PB="oninput"in document;if(!PB){var wae=document.createElement("div");wae.setAttribute("oninput","return;"),PB=typeof wae.oninput=="function"}DB=PB}else DB=!1;o_e=DB&&(!document.documentMode||9<document.documentMode)}function Eae(){UA&&(UA.detachEvent("onpropertychange",a_e),W2=UA=null)}function a_e(e){if(e.propertyName==="value"&&e6(W2)){var t=[];s_e(t,W2,e,DG(e)),Bbe(Fze,t)}}function Bze(e,t,n){e==="focusin"?(Eae(),UA=t,W2=n,UA.attachEvent("onpropertychange",a_e)):e==="focusout"&&Eae()}function Uze(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return e6(W2)}function zze(e,t){if(e==="click")return e6(t)}function Vze(e,t){if(e==="input"||e==="change")return e6(t)}function Hze(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ud=typeof Object.is=="function"?Object.is:Hze;function G2(e,t){if(ud(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!R7.call(t,i)||!ud(e[i],t[i]))return!1}return!0}function xae(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Sae(e,t){var n=xae(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xae(n)}}function u_e(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?u_e(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function l_e(){for(var e=window,t=s$();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=s$(e.document)}return t}function UG(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function qze(e){var t=l_e(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&u_e(n.ownerDocument.documentElement,n)){if(r!==null&&UG(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Sae(n,s);var o=Sae(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Wze=Rm&&"documentMode"in document&&11>=document.documentMode,Lw=null,K7=null,zA=null,X7=!1;function Tae(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;X7||Lw==null||Lw!==s$(r)||(r=Lw,"selectionStart"in r&&UG(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),zA&&G2(zA,r)||(zA=r,r=d$(K7,"onSelect"),0<r.length&&(t=new FG("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Lw)))}function eD(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Fw={animationend:eD("Animation","AnimationEnd"),animationiteration:eD("Animation","AnimationIteration"),animationstart:eD("Animation","AnimationStart"),transitionend:eD("Transition","TransitionEnd")},OB={},c_e={};Rm&&(c_e=document.createElement("div").style,"AnimationEvent"in window||(delete Fw.animationend.animation,delete Fw.animationiteration.animation,delete Fw.animationstart.animation),"TransitionEvent"in window||delete Fw.transitionend.transition);function t6(e){if(OB[e])return OB[e];if(!Fw[e])return e;var t=Fw[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in c_e)return OB[e]=t[n];return e}var f_e=t6("animationend"),d_e=t6("animationiteration"),h_e=t6("animationstart"),p_e=t6("transitionend"),m_e=new Map,Cae="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gy(e,t){m_e.set(e,t),Zb(t,[e])}for(var $B=0;$B<Cae.length;$B++){var MB=Cae[$B],Gze=MB.toLowerCase(),Yze=MB[0].toUpperCase()+MB.slice(1);Gy(Gze,"on"+Yze)}Gy(f_e,"onAnimationEnd");Gy(d_e,"onAnimationIteration");Gy(h_e,"onAnimationStart");Gy("dblclick","onDoubleClick");Gy("focusin","onFocus");Gy("focusout","onBlur");Gy(p_e,"onTransitionEnd");GE("onMouseEnter",["mouseout","mouseover"]);GE("onMouseLeave",["mouseout","mouseover"]);GE("onPointerEnter",["pointerout","pointerover"]);GE("onPointerLeave",["pointerout","pointerover"]);Zb("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zb("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zb("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zb("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zb("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zb("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var XC="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kze=new Set("cancel close invalid load scroll toggle".split(" ").concat(XC));function Aae(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,G7e(r,t,void 0,e),e.currentTarget=null}function g_e(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Aae(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Aae(i,a,l),s=u}}}if(a$)throw e=q7,a$=!1,q7=null,e}function fi(e,t){var n=t[tz];n===void 0&&(n=t[tz]=new Set);var r=e+"__bubble";n.has(r)||(y_e(t,e,2,!1),n.add(r))}function LB(e,t,n){var r=0;t&&(r|=4),y_e(n,e,r,t)}var tD="_reactListening"+Math.random().toString(36).slice(2);function Y2(e){if(!e[tD]){e[tD]=!0,Sbe.forEach(function(n){n!=="selectionchange"&&(Kze.has(n)||LB(n,!1,e),LB(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[tD]||(t[tD]=!0,LB("selectionchange",!1,t))}}function y_e(e,t,n,r){switch(e_e(t)){case 1:var i=lze;break;case 4:i=cze;break;default:i=MG}n=i.bind(null,t,n,e),i=void 0,!H7||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function FB(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=x1(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Bbe(function(){var l=s,c=DG(n),f=[];e:{var d=m_e.get(e);if(d!==void 0){var h=FG,p=e;switch(e){case"keypress":if(zP(n)===0)break e;case"keydown":case"keyup":h=Tze;break;case"focusin":p="focus",h=NB;break;case"focusout":p="blur",h=NB;break;case"beforeblur":case"afterblur":h=NB;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=mae;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=hze;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Ize;break;case f_e:case d_e:case h_e:h=gze;break;case p_e:h=Rze;break;case"scroll":h=fze;break;case"wheel":h=Dze;break;case"copy":case"cut":case"paste":h=vze;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=yae}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,b;v!==null;){b=v;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,y!==null&&(w=z2(v,y),w!=null&&m.push(K2(v,w,b)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==z7&&(p=n.relatedTarget||n.fromElement)&&(x1(p)||p[Nm]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?x1(p):null,p!==null&&(g=e_(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=mae,w="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=yae,w="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:jw(h),b=p==null?d:jw(p),d=new m(w,v+"leave",h,n,c),d.target=g,d.relatedTarget=b,w=null,x1(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=b,m.relatedTarget=g,w=m),g=w,h&&p)t:{for(m=h,y=p,v=0,b=m;b;b=q_(b))v++;for(b=0,w=y;w;w=q_(w))b++;for(;0<v-b;)m=q_(m),v--;for(;0<b-v;)y=q_(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=q_(m),y=q_(y)}m=null}else m=null;h!==null&&Iae(f,d,h,m,!1),p!==null&&g!==null&&Iae(f,g,p,m,!0)}}e:{if(d=l?jw(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var E=jze;else if(_ae(d))if(o_e)E=Vze;else{E=Uze;var x=Bze}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=zze);if(E&&(E=E(e,l))){s_e(f,E,n,c);break e}x&&x(e,d,l),e==="focusout"&&(x=d._wrapperState)&&x.controlled&&d.type==="number"&&L7(d,"number",d.value)}switch(x=l?jw(l):window,e){case"focusin":(_ae(x)||x.contentEditable==="true")&&(Lw=x,K7=l,zA=null);break;case"focusout":zA=K7=Lw=null;break;case"mousedown":X7=!0;break;case"contextmenu":case"mouseup":case"dragend":X7=!1,Tae(f,n,c);break;case"selectionchange":if(Wze)break;case"keydown":case"keyup":Tae(f,n,c)}var S;if(BG)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Mw?r_e(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(n_e&&n.locale!=="ko"&&(Mw||C!=="onCompositionStart"?C==="onCompositionEnd"&&Mw&&(S=t_e()):(h0=c,LG="value"in h0?h0.value:h0.textContent,Mw=!0)),x=d$(l,C),0<x.length&&(C=new gae(C,e,null,n,c),f.push({event:C,listeners:x}),S?C.data=S:(S=i_e(n),S!==null&&(C.data=S)))),(S=Oze?$ze(e,n):Mze(e,n))&&(l=d$(l,"onBeforeInput"),0<l.length&&(c=new gae("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=S))}g_e(f,t)})}function K2(e,t,n){return{instance:e,listener:t,currentTarget:n}}function d$(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=z2(e,n),s!=null&&r.unshift(K2(e,s,i)),s=z2(e,t),s!=null&&r.push(K2(e,s,i))),e=e.return}return r}function q_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Iae(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=z2(n,s),u!=null&&o.unshift(K2(n,u,a))):i||(u=z2(n,s),u!=null&&o.push(K2(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Xze=/\r\n?/g,Qze=/\u0000|\uFFFD/g;function kae(e){return(typeof e=="string"?e:""+e).replace(Xze,`
`).replace(Qze,"")}function nD(e,t,n){if(t=kae(t),kae(e)!==t&&n)throw Error(tt(425))}function h$(){}var Q7=null,J7=null;function Z7(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ez=typeof setTimeout=="function"?setTimeout:void 0,Jze=typeof clearTimeout=="function"?clearTimeout:void 0,Rae=typeof Promise=="function"?Promise:void 0,Zze=typeof queueMicrotask=="function"?queueMicrotask:typeof Rae<"u"?function(e){return Rae.resolve(null).then(e).catch(eVe)}:ez;function eVe(e){setTimeout(function(){throw e})}function jB(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),q2(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);q2(t)}function D0(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Nae(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var vS=Math.random().toString(36).slice(2),eh="__reactFiber$"+vS,X2="__reactProps$"+vS,Nm="__reactContainer$"+vS,tz="__reactEvents$"+vS,tVe="__reactListeners$"+vS,nVe="__reactHandles$"+vS;function x1(e){var t=e[eh];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Nm]||n[eh]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Nae(e);e!==null;){if(n=e[eh])return n;e=Nae(e)}return t}e=n,n=e.parentNode}return null}function Uk(e){return e=e[eh]||e[Nm],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function jw(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(tt(33))}function n6(e){return e[X2]||null}var nz=[],Bw=-1;function Yy(e){return{current:e}}function gi(e){0>Bw||(e.current=nz[Bw],nz[Bw]=null,Bw--)}function oi(e,t){Bw++,nz[Bw]=e.current,e.current=t}var oy={},Ia=Yy(oy),Gu=Yy(!1),ob=oy;function YE(e,t){var n=e.type.contextTypes;if(!n)return oy;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Yu(e){return e=e.childContextTypes,e!=null}function p$(){gi(Gu),gi(Ia)}function Dae(e,t,n){if(Ia.current!==oy)throw Error(tt(168));oi(Ia,t),oi(Gu,n)}function v_e(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(tt(108,B7e(e)||"Unknown",i));return Fi({},n,r)}function m$(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||oy,ob=Ia.current,oi(Ia,e),oi(Gu,Gu.current),!0}function Pae(e,t,n){var r=e.stateNode;if(!r)throw Error(tt(169));n?(e=v_e(e,t,ob),r.__reactInternalMemoizedMergedChildContext=e,gi(Gu),gi(Ia),oi(Ia,e)):gi(Gu),oi(Gu,n)}var Yp=null,r6=!1,BB=!1;function b_e(e){Yp===null?Yp=[e]:Yp.push(e)}function rVe(e){r6=!0,b_e(e)}function Ky(){if(!BB&&Yp!==null){BB=!0;var e=0,t=Lr;try{var n=Yp;for(Lr=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Yp=null,r6=!1}catch(i){throw Yp!==null&&(Yp=Yp.slice(e+1)),Hbe(PG,Ky),i}finally{Lr=t,BB=!1}}return null}var Uw=[],zw=0,g$=null,y$=0,Ac=[],Ic=0,ab=null,om=1,am="";function Wv(e,t){Uw[zw++]=y$,Uw[zw++]=g$,g$=e,y$=t}function __e(e,t,n){Ac[Ic++]=om,Ac[Ic++]=am,Ac[Ic++]=ab,ab=e;var r=om;e=am;var i=32-Zf(r)-1;r&=~(1<<i),n+=1;var s=32-Zf(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,om=1<<32-Zf(t)+i|n<<i|r,am=s+e}else om=1<<s|n<<i|r,am=e}function zG(e){e.return!==null&&(Wv(e,1),__e(e,1,0))}function VG(e){for(;e===g$;)g$=Uw[--zw],Uw[zw]=null,y$=Uw[--zw],Uw[zw]=null;for(;e===ab;)ab=Ac[--Ic],Ac[Ic]=null,am=Ac[--Ic],Ac[Ic]=null,om=Ac[--Ic],Ac[Ic]=null}var Ul=null,Dl=null,Ci=!1,$f=null;function w_e(e,t){var n=Mc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Oae(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ul=e,Dl=D0(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ul=e,Dl=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ab!==null?{id:om,overflow:am}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Mc(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ul=e,Dl=null,!0):!1;default:return!1}}function rz(e){return(e.mode&1)!==0&&(e.flags&128)===0}function iz(e){if(Ci){var t=Dl;if(t){var n=t;if(!Oae(e,t)){if(rz(e))throw Error(tt(418));t=D0(n.nextSibling);var r=Ul;t&&Oae(e,t)?w_e(r,n):(e.flags=e.flags&-4097|2,Ci=!1,Ul=e)}}else{if(rz(e))throw Error(tt(418));e.flags=e.flags&-4097|2,Ci=!1,Ul=e}}}function $ae(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ul=e}function rD(e){if(e!==Ul)return!1;if(!Ci)return $ae(e),Ci=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Z7(e.type,e.memoizedProps)),t&&(t=Dl)){if(rz(e))throw E_e(),Error(tt(418));for(;t;)w_e(e,t),t=D0(t.nextSibling)}if($ae(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(tt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Dl=D0(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Dl=null}}else Dl=Ul?D0(e.stateNode.nextSibling):null;return!0}function E_e(){for(var e=Dl;e;)e=D0(e.nextSibling)}function KE(){Dl=Ul=null,Ci=!1}function HG(e){$f===null?$f=[e]:$f.push(e)}var iVe=sg.ReactCurrentBatchConfig;function YT(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(tt(309));var r=n.stateNode}if(!r)throw Error(tt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(tt(284));if(!n._owner)throw Error(tt(290,e))}return e}function iD(e,t){throw e=Object.prototype.toString.call(t),Error(tt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Mae(e){var t=e._init;return t(e._payload)}function x_e(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=M0(y,v),y.index=0,y.sibling=null,y}function s(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,w){return v===null||v.tag!==6?(v=GB(b,y.mode,w),v.return=y,v):(v=i(v,b),v.return=y,v)}function u(y,v,b,w){var E=b.type;return E===$w?c(y,v,b.props.children,w,b.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Gg&&Mae(E)===v.type)?(w=i(v,b.props),w.ref=YT(y,v,b),w.return=y,w):(w=KP(b.type,b.key,b.props,null,y.mode,w),w.ref=YT(y,v,b),w.return=y,w)}function l(y,v,b,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=YB(b,y.mode,w),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function c(y,v,b,w,E){return v===null||v.tag!==7?(v=q1(b,y.mode,w,E),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=GB(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case GN:return b=KP(v.type,v.key,v.props,null,y.mode,b),b.ref=YT(y,null,v),b.return=y,b;case Ow:return v=YB(v,y.mode,b),v.return=y,v;case Gg:var w=v._init;return f(y,w(v._payload),b)}if(YC(v)||VT(v))return v=q1(v,y.mode,b,null),v.return=y,v;iD(y,v)}return null}function d(y,v,b,w){var E=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return E!==null?null:a(y,v,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case GN:return b.key===E?u(y,v,b,w):null;case Ow:return b.key===E?l(y,v,b,w):null;case Gg:return E=b._init,d(y,v,E(b._payload),w)}if(YC(b)||VT(b))return E!==null?null:c(y,v,b,w,null);iD(y,b)}return null}function h(y,v,b,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(b)||null,a(v,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case GN:return y=y.get(w.key===null?b:w.key)||null,u(v,y,w,E);case Ow:return y=y.get(w.key===null?b:w.key)||null,l(v,y,w,E);case Gg:var x=w._init;return h(y,v,b,x(w._payload),E)}if(YC(w)||VT(w))return y=y.get(b)||null,c(v,y,w,E,null);iD(v,w)}return null}function p(y,v,b,w){for(var E=null,x=null,S=v,C=v=0,I=null;S!==null&&C<b.length;C++){S.index>C?(I=S,S=null):I=S.sibling;var k=d(y,S,b[C],w);if(k===null){S===null&&(S=I);break}e&&S&&k.alternate===null&&t(y,S),v=s(k,v,C),x===null?E=k:x.sibling=k,x=k,S=I}if(C===b.length)return n(y,S),Ci&&Wv(y,C),E;if(S===null){for(;C<b.length;C++)S=f(y,b[C],w),S!==null&&(v=s(S,v,C),x===null?E=S:x.sibling=S,x=S);return Ci&&Wv(y,C),E}for(S=r(y,S);C<b.length;C++)I=h(S,y,C,b[C],w),I!==null&&(e&&I.alternate!==null&&S.delete(I.key===null?C:I.key),v=s(I,v,C),x===null?E=I:x.sibling=I,x=I);return e&&S.forEach(function(R){return t(y,R)}),Ci&&Wv(y,C),E}function m(y,v,b,w){var E=VT(b);if(typeof E!="function")throw Error(tt(150));if(b=E.call(b),b==null)throw Error(tt(151));for(var x=E=null,S=v,C=v=0,I=null,k=b.next();S!==null&&!k.done;C++,k=b.next()){S.index>C?(I=S,S=null):I=S.sibling;var R=d(y,S,k.value,w);if(R===null){S===null&&(S=I);break}e&&S&&R.alternate===null&&t(y,S),v=s(R,v,C),x===null?E=R:x.sibling=R,x=R,S=I}if(k.done)return n(y,S),Ci&&Wv(y,C),E;if(S===null){for(;!k.done;C++,k=b.next())k=f(y,k.value,w),k!==null&&(v=s(k,v,C),x===null?E=k:x.sibling=k,x=k);return Ci&&Wv(y,C),E}for(S=r(y,S);!k.done;C++,k=b.next())k=h(S,y,C,k.value,w),k!==null&&(e&&k.alternate!==null&&S.delete(k.key===null?C:k.key),v=s(k,v,C),x===null?E=k:x.sibling=k,x=k);return e&&S.forEach(function(O){return t(y,O)}),Ci&&Wv(y,C),E}function g(y,v,b,w){if(typeof b=="object"&&b!==null&&b.type===$w&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case GN:e:{for(var E=b.key,x=v;x!==null;){if(x.key===E){if(E=b.type,E===$w){if(x.tag===7){n(y,x.sibling),v=i(x,b.props.children),v.return=y,y=v;break e}}else if(x.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Gg&&Mae(E)===x.type){n(y,x.sibling),v=i(x,b.props),v.ref=YT(y,x,b),v.return=y,y=v;break e}n(y,x);break}else t(y,x);x=x.sibling}b.type===$w?(v=q1(b.props.children,y.mode,w,b.key),v.return=y,y=v):(w=KP(b.type,b.key,b.props,null,y.mode,w),w.ref=YT(y,v,b),w.return=y,y=w)}return o(y);case Ow:e:{for(x=b.key;v!==null;){if(v.key===x)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=YB(b,y.mode,w),v.return=y,y=v}return o(y);case Gg:return x=b._init,g(y,v,x(b._payload),w)}if(YC(b))return p(y,v,b,w);if(VT(b))return m(y,v,b,w);iD(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=GB(b,y.mode,w),v.return=y,y=v),o(y)):n(y,v)}return g}var XE=x_e(!0),S_e=x_e(!1),v$=Yy(null),b$=null,Vw=null,qG=null;function WG(){qG=Vw=b$=null}function GG(e){var t=v$.current;gi(v$),e._currentValue=t}function sz(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function fE(e,t){b$=e,qG=Vw=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Uu=!0),e.firstContext=null)}function Wc(e){var t=e._currentValue;if(qG!==e)if(e={context:e,memoizedValue:t,next:null},Vw===null){if(b$===null)throw Error(tt(308));Vw=e,b$.dependencies={lanes:0,firstContext:e}}else Vw=Vw.next=e;return t}var S1=null;function YG(e){S1===null?S1=[e]:S1.push(e)}function T_e(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,YG(t)):(n.next=i.next,i.next=n),t.interleaved=n,Dm(e,r)}function Dm(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Yg=!1;function KG(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function C_e(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function vm(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function P0(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,dr&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Dm(e,n)}return i=r.interleaved,i===null?(t.next=t,YG(r)):(t.next=i.next,i.next=t),r.interleaved=t,Dm(e,n)}function VP(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,OG(e,n)}}function Lae(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function _$(e,t,n,r){var i=e.updateQueue;Yg=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Fi({},f,d);break e;case 2:Yg=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);lb|=o,e.lanes=o,e.memoizedState=f}}function Fae(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(tt(191,i));i.call(r)}}}var zk={},xh=Yy(zk),Q2=Yy(zk),J2=Yy(zk);function T1(e){if(e===zk)throw Error(tt(174));return e}function XG(e,t){switch(oi(J2,t),oi(Q2,e),oi(xh,zk),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:j7(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=j7(t,e)}gi(xh),oi(xh,t)}function QE(){gi(xh),gi(Q2),gi(J2)}function A_e(e){T1(J2.current);var t=T1(xh.current),n=j7(t,e.type);t!==n&&(oi(Q2,e),oi(xh,n))}function QG(e){Q2.current===e&&(gi(xh),gi(Q2))}var Mi=Yy(0);function w$(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var UB=[];function JG(){for(var e=0;e<UB.length;e++)UB[e]._workInProgressVersionPrimary=null;UB.length=0}var HP=sg.ReactCurrentDispatcher,zB=sg.ReactCurrentBatchConfig,ub=0,Li=null,Os=null,no=null,E$=!1,VA=!1,Z2=0,sVe=0;function ia(){throw Error(tt(321))}function ZG(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ud(e[n],t[n]))return!1;return!0}function eY(e,t,n,r,i,s){if(ub=s,Li=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,HP.current=e===null||e.memoizedState===null?lVe:cVe,e=n(r,i),VA){s=0;do{if(VA=!1,Z2=0,25<=s)throw Error(tt(301));s+=1,no=Os=null,t.updateQueue=null,HP.current=fVe,e=n(r,i)}while(VA)}if(HP.current=x$,t=Os!==null&&Os.next!==null,ub=0,no=Os=Li=null,E$=!1,t)throw Error(tt(300));return e}function tY(){var e=Z2!==0;return Z2=0,e}function Hd(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return no===null?Li.memoizedState=no=e:no=no.next=e,no}function Gc(){if(Os===null){var e=Li.alternate;e=e!==null?e.memoizedState:null}else e=Os.next;var t=no===null?Li.memoizedState:no.next;if(t!==null)no=t,Os=e;else{if(e===null)throw Error(tt(310));Os=e,e={memoizedState:Os.memoizedState,baseState:Os.baseState,baseQueue:Os.baseQueue,queue:Os.queue,next:null},no===null?Li.memoizedState=no=e:no=no.next=e}return no}function eI(e,t){return typeof t=="function"?t(e):t}function VB(e){var t=Gc(),n=t.queue;if(n===null)throw Error(tt(311));n.lastRenderedReducer=e;var r=Os,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((ub&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Li.lanes|=c,lb|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,ud(r,t.memoizedState)||(Uu=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Li.lanes|=s,lb|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function HB(e){var t=Gc(),n=t.queue;if(n===null)throw Error(tt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);ud(s,t.memoizedState)||(Uu=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function I_e(){}function k_e(e,t){var n=Li,r=Gc(),i=t(),s=!ud(r.memoizedState,i);if(s&&(r.memoizedState=i,Uu=!0),r=r.queue,nY(D_e.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||no!==null&&no.memoizedState.tag&1){if(n.flags|=2048,tI(9,N_e.bind(null,n,r,i,t),void 0,null),po===null)throw Error(tt(349));ub&30||R_e(n,t,i)}return i}function R_e(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Li.updateQueue,t===null?(t={lastEffect:null,stores:null},Li.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function N_e(e,t,n,r){t.value=n,t.getSnapshot=r,P_e(t)&&O_e(e)}function D_e(e,t,n){return n(function(){P_e(t)&&O_e(e)})}function P_e(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ud(e,n)}catch{return!0}}function O_e(e){var t=Dm(e,1);t!==null&&ed(t,e,1,-1)}function jae(e){var t=Hd();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:eI,lastRenderedState:e},t.queue=e,e=e.dispatch=uVe.bind(null,Li,e),[t.memoizedState,e]}function tI(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Li.updateQueue,t===null?(t={lastEffect:null,stores:null},Li.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function $_e(){return Gc().memoizedState}function qP(e,t,n,r){var i=Hd();Li.flags|=e,i.memoizedState=tI(1|t,n,void 0,r===void 0?null:r)}function i6(e,t,n,r){var i=Gc();r=r===void 0?null:r;var s=void 0;if(Os!==null){var o=Os.memoizedState;if(s=o.destroy,r!==null&&ZG(r,o.deps)){i.memoizedState=tI(t,n,s,r);return}}Li.flags|=e,i.memoizedState=tI(1|t,n,s,r)}function Bae(e,t){return qP(8390656,8,e,t)}function nY(e,t){return i6(2048,8,e,t)}function M_e(e,t){return i6(4,2,e,t)}function L_e(e,t){return i6(4,4,e,t)}function F_e(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function j_e(e,t,n){return n=n!=null?n.concat([e]):null,i6(4,4,F_e.bind(null,t,e),n)}function rY(){}function B_e(e,t){var n=Gc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ZG(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function U_e(e,t){var n=Gc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ZG(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function z_e(e,t,n){return ub&21?(ud(n,t)||(n=Gbe(),Li.lanes|=n,lb|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Uu=!0),e.memoizedState=n)}function oVe(e,t){var n=Lr;Lr=n!==0&&4>n?n:4,e(!0);var r=zB.transition;zB.transition={};try{e(!1),t()}finally{Lr=n,zB.transition=r}}function V_e(){return Gc().memoizedState}function aVe(e,t,n){var r=$0(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},H_e(e))q_e(t,n);else if(n=T_e(e,t,n,r),n!==null){var i=tu();ed(n,e,r,i),W_e(n,t,r)}}function uVe(e,t,n){var r=$0(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(H_e(e))q_e(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ud(a,o)){var u=t.interleaved;u===null?(i.next=i,YG(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=T_e(e,t,i,r),n!==null&&(i=tu(),ed(n,e,r,i),W_e(n,t,r))}}function H_e(e){var t=e.alternate;return e===Li||t!==null&&t===Li}function q_e(e,t){VA=E$=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function W_e(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,OG(e,n)}}var x$={readContext:Wc,useCallback:ia,useContext:ia,useEffect:ia,useImperativeHandle:ia,useInsertionEffect:ia,useLayoutEffect:ia,useMemo:ia,useReducer:ia,useRef:ia,useState:ia,useDebugValue:ia,useDeferredValue:ia,useTransition:ia,useMutableSource:ia,useSyncExternalStore:ia,useId:ia,unstable_isNewReconciler:!1},lVe={readContext:Wc,useCallback:function(e,t){return Hd().memoizedState=[e,t===void 0?null:t],e},useContext:Wc,useEffect:Bae,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,qP(4194308,4,F_e.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qP(4194308,4,e,t)},useInsertionEffect:function(e,t){return qP(4,2,e,t)},useMemo:function(e,t){var n=Hd();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Hd();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=aVe.bind(null,Li,e),[r.memoizedState,e]},useRef:function(e){var t=Hd();return e={current:e},t.memoizedState=e},useState:jae,useDebugValue:rY,useDeferredValue:function(e){return Hd().memoizedState=e},useTransition:function(){var e=jae(!1),t=e[0];return e=oVe.bind(null,e[1]),Hd().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Li,i=Hd();if(Ci){if(n===void 0)throw Error(tt(407));n=n()}else{if(n=t(),po===null)throw Error(tt(349));ub&30||R_e(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Bae(D_e.bind(null,r,s,e),[e]),r.flags|=2048,tI(9,N_e.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Hd(),t=po.identifierPrefix;if(Ci){var n=am,r=om;n=(r&~(1<<32-Zf(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Z2++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=sVe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},cVe={readContext:Wc,useCallback:B_e,useContext:Wc,useEffect:nY,useImperativeHandle:j_e,useInsertionEffect:M_e,useLayoutEffect:L_e,useMemo:U_e,useReducer:VB,useRef:$_e,useState:function(){return VB(eI)},useDebugValue:rY,useDeferredValue:function(e){var t=Gc();return z_e(t,Os.memoizedState,e)},useTransition:function(){var e=VB(eI)[0],t=Gc().memoizedState;return[e,t]},useMutableSource:I_e,useSyncExternalStore:k_e,useId:V_e,unstable_isNewReconciler:!1},fVe={readContext:Wc,useCallback:B_e,useContext:Wc,useEffect:nY,useImperativeHandle:j_e,useInsertionEffect:M_e,useLayoutEffect:L_e,useMemo:U_e,useReducer:HB,useRef:$_e,useState:function(){return HB(eI)},useDebugValue:rY,useDeferredValue:function(e){var t=Gc();return Os===null?t.memoizedState=e:z_e(t,Os.memoizedState,e)},useTransition:function(){var e=HB(eI)[0],t=Gc().memoizedState;return[e,t]},useMutableSource:I_e,useSyncExternalStore:k_e,useId:V_e,unstable_isNewReconciler:!1};function kf(e,t){if(e&&e.defaultProps){t=Fi({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function oz(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Fi({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var s6={isMounted:function(e){return(e=e._reactInternals)?e_(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tu(),i=$0(e),s=vm(r,i);s.payload=t,n!=null&&(s.callback=n),t=P0(e,s,i),t!==null&&(ed(t,e,i,r),VP(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tu(),i=$0(e),s=vm(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=P0(e,s,i),t!==null&&(ed(t,e,i,r),VP(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tu(),r=$0(e),i=vm(n,r);i.tag=2,t!=null&&(i.callback=t),t=P0(e,i,r),t!==null&&(ed(t,e,r,n),VP(t,e,r))}};function Uae(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!G2(n,r)||!G2(i,s):!0}function G_e(e,t,n){var r=!1,i=oy,s=t.contextType;return typeof s=="object"&&s!==null?s=Wc(s):(i=Yu(t)?ob:Ia.current,r=t.contextTypes,s=(r=r!=null)?YE(e,i):oy),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=s6,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function zae(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&s6.enqueueReplaceState(t,t.state,null)}function az(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},KG(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Wc(s):(s=Yu(t)?ob:Ia.current,i.context=YE(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(oz(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&s6.enqueueReplaceState(i,i.state,null),_$(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function JE(e,t){try{var n="",r=t;do n+=j7e(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function qB(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function uz(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var dVe=typeof WeakMap=="function"?WeakMap:Map;function Y_e(e,t,n){n=vm(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){T$||(T$=!0,vz=r),uz(e,t)},n}function K_e(e,t,n){n=vm(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uz(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){uz(e,t),typeof r!="function"&&(O0===null?O0=new Set([this]):O0.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Vae(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new dVe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=CVe.bind(null,e,t,n),t.then(e,e))}function Hae(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function qae(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=vm(-1,1),t.tag=2,P0(n,t,1))),n.lanes|=1),e)}var hVe=sg.ReactCurrentOwner,Uu=!1;function qa(e,t,n,r){t.child=e===null?S_e(t,null,n,r):XE(t,e.child,n,r)}function Wae(e,t,n,r,i){n=n.render;var s=t.ref;return fE(t,i),r=eY(e,t,n,r,s,i),n=tY(),e!==null&&!Uu?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Pm(e,t,i)):(Ci&&n&&zG(t),t.flags|=1,qa(e,t,r,i),t.child)}function Gae(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!fY(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,X_e(e,t,s,r,i)):(e=KP(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:G2,n(o,r)&&e.ref===t.ref)return Pm(e,t,i)}return t.flags|=1,e=M0(s,r),e.ref=t.ref,e.return=t,t.child=e}function X_e(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(G2(s,r)&&e.ref===t.ref)if(Uu=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Uu=!0);else return t.lanes=e.lanes,Pm(e,t,i)}return lz(e,t,n,r,i)}function Q_e(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},oi(qw,Tl),Tl|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,oi(qw,Tl),Tl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,oi(qw,Tl),Tl|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,oi(qw,Tl),Tl|=r;return qa(e,t,i,n),t.child}function J_e(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function lz(e,t,n,r,i){var s=Yu(n)?ob:Ia.current;return s=YE(t,s),fE(t,i),n=eY(e,t,n,r,s,i),r=tY(),e!==null&&!Uu?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Pm(e,t,i)):(Ci&&r&&zG(t),t.flags|=1,qa(e,t,n,i),t.child)}function Yae(e,t,n,r,i){if(Yu(n)){var s=!0;m$(t)}else s=!1;if(fE(t,i),t.stateNode===null)WP(e,t),G_e(t,n,r),az(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Wc(l):(l=Yu(n)?ob:Ia.current,l=YE(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&zae(t,o,r,l),Yg=!1;var d=t.memoizedState;o.state=d,_$(t,r,o,i),u=t.memoizedState,a!==r||d!==u||Gu.current||Yg?(typeof c=="function"&&(oz(t,n,c,r),u=t.memoizedState),(a=Yg||Uae(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,C_e(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:kf(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Wc(u):(u=Yu(n)?ob:Ia.current,u=YE(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&zae(t,o,r,u),Yg=!1,d=t.memoizedState,o.state=d,_$(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||Gu.current||Yg?(typeof h=="function"&&(oz(t,n,h,r),p=t.memoizedState),(l=Yg||Uae(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return cz(e,t,n,r,s,i)}function cz(e,t,n,r,i,s){J_e(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Pae(t,n,!1),Pm(e,t,s);r=t.stateNode,hVe.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=XE(t,e.child,null,s),t.child=XE(t,null,a,s)):qa(e,t,a,s),t.memoizedState=r.state,i&&Pae(t,n,!0),t.child}function Z_e(e){var t=e.stateNode;t.pendingContext?Dae(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Dae(e,t.context,!1),XG(e,t.containerInfo)}function Kae(e,t,n,r,i){return KE(),HG(i),t.flags|=256,qa(e,t,n,r),t.child}var fz={dehydrated:null,treeContext:null,retryLane:0};function dz(e){return{baseLanes:e,cachePool:null,transitions:null}}function ewe(e,t,n){var r=t.pendingProps,i=Mi.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),oi(Mi,i&1),e===null)return iz(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=u6(o,r,0,null),e=q1(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=dz(n),t.memoizedState=fz,e):iY(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return pVe(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=M0(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=M0(a,s):(s=q1(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?dz(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=fz,r}return s=e.child,e=s.sibling,r=M0(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function iY(e,t){return t=u6({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function sD(e,t,n,r){return r!==null&&HG(r),XE(t,e.child,null,n),e=iY(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function pVe(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=qB(Error(tt(422))),sD(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=u6({mode:"visible",children:r.children},i,0,null),s=q1(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&XE(t,e.child,null,o),t.child.memoizedState=dz(o),t.memoizedState=fz,s);if(!(t.mode&1))return sD(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(tt(419)),r=qB(s,r,void 0),sD(e,t,o,r)}if(a=(o&e.childLanes)!==0,Uu||a){if(r=po,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Dm(e,i),ed(r,e,i,-1))}return cY(),r=qB(Error(tt(421))),sD(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=AVe.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Dl=D0(i.nextSibling),Ul=t,Ci=!0,$f=null,e!==null&&(Ac[Ic++]=om,Ac[Ic++]=am,Ac[Ic++]=ab,om=e.id,am=e.overflow,ab=t),t=iY(t,r.children),t.flags|=4096,t)}function Xae(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),sz(e.return,t,n)}function WB(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function twe(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(qa(e,t,r.children,n),r=Mi.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Xae(e,n,t);else if(e.tag===19)Xae(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(oi(Mi,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&w$(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),WB(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&w$(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}WB(t,!0,n,null,s);break;case"together":WB(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function WP(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Pm(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),lb|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(tt(153));if(t.child!==null){for(e=t.child,n=M0(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=M0(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function mVe(e,t,n){switch(t.tag){case 3:Z_e(t),KE();break;case 5:A_e(t);break;case 1:Yu(t.type)&&m$(t);break;case 4:XG(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;oi(v$,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(oi(Mi,Mi.current&1),t.flags|=128,null):n&t.child.childLanes?ewe(e,t,n):(oi(Mi,Mi.current&1),e=Pm(e,t,n),e!==null?e.sibling:null);oi(Mi,Mi.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return twe(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),oi(Mi,Mi.current),r)break;return null;case 22:case 23:return t.lanes=0,Q_e(e,t,n)}return Pm(e,t,n)}var nwe,hz,rwe,iwe;nwe=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hz=function(){};rwe=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,T1(xh.current);var s=null;switch(n){case"input":i=$7(e,i),r=$7(e,r),s=[];break;case"select":i=Fi({},i,{value:void 0}),r=Fi({},r,{value:void 0}),s=[];break;case"textarea":i=F7(e,i),r=F7(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=h$)}B7(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(B2.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(B2.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&fi("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};iwe=function(e,t,n,r){n!==r&&(t.flags|=4)};function KT(e,t){if(!Ci)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function sa(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function gVe(e,t,n){var r=t.pendingProps;switch(VG(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sa(t),null;case 1:return Yu(t.type)&&p$(),sa(t),null;case 3:return r=t.stateNode,QE(),gi(Gu),gi(Ia),JG(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(rD(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,$f!==null&&(wz($f),$f=null))),hz(e,t),sa(t),null;case 5:QG(t);var i=T1(J2.current);if(n=t.type,e!==null&&t.stateNode!=null)rwe(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(tt(166));return sa(t),null}if(e=T1(xh.current),rD(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[eh]=t,r[X2]=s,e=(t.mode&1)!==0,n){case"dialog":fi("cancel",r),fi("close",r);break;case"iframe":case"object":case"embed":fi("load",r);break;case"video":case"audio":for(i=0;i<XC.length;i++)fi(XC[i],r);break;case"source":fi("error",r);break;case"img":case"image":case"link":fi("error",r),fi("load",r);break;case"details":fi("toggle",r);break;case"input":sae(r,s),fi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},fi("invalid",r);break;case"textarea":aae(r,s),fi("invalid",r)}B7(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&nD(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&nD(r.textContent,a,e),i=["children",""+a]):B2.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&fi("scroll",r)}switch(n){case"input":YN(r),oae(r,s,!0);break;case"textarea":YN(r),uae(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=h$)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Dbe(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[eh]=t,e[X2]=r,nwe(e,t,!1,!1),t.stateNode=e;e:{switch(o=U7(n,r),n){case"dialog":fi("cancel",e),fi("close",e),i=r;break;case"iframe":case"object":case"embed":fi("load",e),i=r;break;case"video":case"audio":for(i=0;i<XC.length;i++)fi(XC[i],e);i=r;break;case"source":fi("error",e),i=r;break;case"img":case"image":case"link":fi("error",e),fi("load",e),i=r;break;case"details":fi("toggle",e),i=r;break;case"input":sae(e,r),i=$7(e,r),fi("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Fi({},r,{value:void 0}),fi("invalid",e);break;case"textarea":aae(e,r),i=F7(e,r),fi("invalid",e);break;default:i=r}B7(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?$be(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Pbe(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&U2(e,u):typeof u=="number"&&U2(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(B2.hasOwnProperty(s)?u!=null&&s==="onScroll"&&fi("scroll",e):u!=null&&IG(e,s,u,o))}switch(n){case"input":YN(e),oae(e,r,!1);break;case"textarea":YN(e),uae(e);break;case"option":r.value!=null&&e.setAttribute("value",""+sy(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?aE(e,!!r.multiple,s,!1):r.defaultValue!=null&&aE(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=h$)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return sa(t),null;case 6:if(e&&t.stateNode!=null)iwe(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(tt(166));if(n=T1(J2.current),T1(xh.current),rD(t)){if(r=t.stateNode,n=t.memoizedProps,r[eh]=t,(s=r.nodeValue!==n)&&(e=Ul,e!==null))switch(e.tag){case 3:nD(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&nD(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[eh]=t,t.stateNode=r}return sa(t),null;case 13:if(gi(Mi),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ci&&Dl!==null&&t.mode&1&&!(t.flags&128))E_e(),KE(),t.flags|=98560,s=!1;else if(s=rD(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(tt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(tt(317));s[eh]=t}else KE(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;sa(t),s=!1}else $f!==null&&(wz($f),$f=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Mi.current&1?Bs===0&&(Bs=3):cY())),t.updateQueue!==null&&(t.flags|=4),sa(t),null);case 4:return QE(),hz(e,t),e===null&&Y2(t.stateNode.containerInfo),sa(t),null;case 10:return GG(t.type._context),sa(t),null;case 17:return Yu(t.type)&&p$(),sa(t),null;case 19:if(gi(Mi),s=t.memoizedState,s===null)return sa(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)KT(s,!1);else{if(Bs!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=w$(e),o!==null){for(t.flags|=128,KT(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return oi(Mi,Mi.current&1|2),t.child}e=e.sibling}s.tail!==null&&ls()>ZE&&(t.flags|=128,r=!0,KT(s,!1),t.lanes=4194304)}else{if(!r)if(e=w$(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),KT(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ci)return sa(t),null}else 2*ls()-s.renderingStartTime>ZE&&n!==1073741824&&(t.flags|=128,r=!0,KT(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ls(),t.sibling=null,n=Mi.current,oi(Mi,r?n&1|2:n&1),t):(sa(t),null);case 22:case 23:return lY(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Tl&1073741824&&(sa(t),t.subtreeFlags&6&&(t.flags|=8192)):sa(t),null;case 24:return null;case 25:return null}throw Error(tt(156,t.tag))}function yVe(e,t){switch(VG(t),t.tag){case 1:return Yu(t.type)&&p$(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return QE(),gi(Gu),gi(Ia),JG(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return QG(t),null;case 13:if(gi(Mi),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(tt(340));KE()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return gi(Mi),null;case 4:return QE(),null;case 10:return GG(t.type._context),null;case 22:case 23:return lY(),null;case 24:return null;default:return null}}var oD=!1,ga=!1,vVe=typeof WeakSet=="function"?WeakSet:Set,St=null;function Hw(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Yi(e,t,r)}else n.current=null}function pz(e,t,n){try{n()}catch(r){Yi(e,t,r)}}var Qae=!1;function bVe(e,t){if(Q7=c$,e=l_e(),UG(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(J7={focusedElem:e,selectionRange:n},c$=!1,St=t;St!==null;)if(t=St,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,St=e;else for(;St!==null;){t=St;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:kf(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(tt(163))}}catch(w){Yi(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,St=e;break}St=t.return}return p=Qae,Qae=!1,p}function HA(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&pz(t,n,s)}i=i.next}while(i!==r)}}function o6(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function mz(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function swe(e){var t=e.alternate;t!==null&&(e.alternate=null,swe(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[eh],delete t[X2],delete t[tz],delete t[tVe],delete t[nVe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function owe(e){return e.tag===5||e.tag===3||e.tag===4}function Jae(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||owe(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gz(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=h$));else if(r!==4&&(e=e.child,e!==null))for(gz(e,t,n),e=e.sibling;e!==null;)gz(e,t,n),e=e.sibling}function yz(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(yz(e,t,n),e=e.sibling;e!==null;)yz(e,t,n),e=e.sibling}var No=null,Nf=!1;function Og(e,t,n){for(n=n.child;n!==null;)awe(e,t,n),n=n.sibling}function awe(e,t,n){if(Eh&&typeof Eh.onCommitFiberUnmount=="function")try{Eh.onCommitFiberUnmount(JL,n)}catch{}switch(n.tag){case 5:ga||Hw(n,t);case 6:var r=No,i=Nf;No=null,Og(e,t,n),No=r,Nf=i,No!==null&&(Nf?(e=No,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):No.removeChild(n.stateNode));break;case 18:No!==null&&(Nf?(e=No,n=n.stateNode,e.nodeType===8?jB(e.parentNode,n):e.nodeType===1&&jB(e,n),q2(e)):jB(No,n.stateNode));break;case 4:r=No,i=Nf,No=n.stateNode.containerInfo,Nf=!0,Og(e,t,n),No=r,Nf=i;break;case 0:case 11:case 14:case 15:if(!ga&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&pz(n,t,o),i=i.next}while(i!==r)}Og(e,t,n);break;case 1:if(!ga&&(Hw(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Yi(n,t,a)}Og(e,t,n);break;case 21:Og(e,t,n);break;case 22:n.mode&1?(ga=(r=ga)||n.memoizedState!==null,Og(e,t,n),ga=r):Og(e,t,n);break;default:Og(e,t,n)}}function Zae(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new vVe),t.forEach(function(r){var i=IVe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function bf(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:No=a.stateNode,Nf=!1;break e;case 3:No=a.stateNode.containerInfo,Nf=!0;break e;case 4:No=a.stateNode.containerInfo,Nf=!0;break e}a=a.return}if(No===null)throw Error(tt(160));awe(s,o,i),No=null,Nf=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Yi(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)uwe(t,e),t=t.sibling}function uwe(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(bf(t,e),Md(e),r&4){try{HA(3,e,e.return),o6(3,e)}catch(m){Yi(e,e.return,m)}try{HA(5,e,e.return)}catch(m){Yi(e,e.return,m)}}break;case 1:bf(t,e),Md(e),r&512&&n!==null&&Hw(n,n.return);break;case 5:if(bf(t,e),Md(e),r&512&&n!==null&&Hw(n,n.return),e.flags&32){var i=e.stateNode;try{U2(i,"")}catch(m){Yi(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Rbe(i,s),U7(a,o);var l=U7(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?$be(i,f):c==="dangerouslySetInnerHTML"?Pbe(i,f):c==="children"?U2(i,f):IG(i,c,f,l)}switch(a){case"input":M7(i,s);break;case"textarea":Nbe(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?aE(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?aE(i,!!s.multiple,s.defaultValue,!0):aE(i,!!s.multiple,s.multiple?[]:"",!1))}i[X2]=s}catch(m){Yi(e,e.return,m)}}break;case 6:if(bf(t,e),Md(e),r&4){if(e.stateNode===null)throw Error(tt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Yi(e,e.return,m)}}break;case 3:if(bf(t,e),Md(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{q2(t.containerInfo)}catch(m){Yi(e,e.return,m)}break;case 4:bf(t,e),Md(e);break;case 13:bf(t,e),Md(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(aY=ls())),r&4&&Zae(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(ga=(l=ga)||c,bf(t,e),ga=l):bf(t,e),Md(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(St=e,c=e.child;c!==null;){for(f=St=c;St!==null;){switch(d=St,h=d.child,d.tag){case 0:case 11:case 14:case 15:HA(4,d,d.return);break;case 1:Hw(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Yi(r,n,m)}}break;case 5:Hw(d,d.return);break;case 22:if(d.memoizedState!==null){tue(f);continue}}h!==null?(h.return=d,St=h):tue(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Obe("display",o))}catch(m){Yi(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Yi(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:bf(t,e),Md(e),r&4&&Zae(e);break;case 21:break;default:bf(t,e),Md(e)}}function Md(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(owe(n)){var r=n;break e}n=n.return}throw Error(tt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(U2(i,""),r.flags&=-33);var s=Jae(e);yz(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Jae(e);gz(e,a,o);break;default:throw Error(tt(161))}}catch(u){Yi(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _Ve(e,t,n){St=e,lwe(e)}function lwe(e,t,n){for(var r=(e.mode&1)!==0;St!==null;){var i=St,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||oD;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||ga;a=oD;var l=ga;if(oD=o,(ga=u)&&!l)for(St=i;St!==null;)o=St,u=o.child,o.tag===22&&o.memoizedState!==null?nue(i):u!==null?(u.return=o,St=u):nue(i);for(;s!==null;)St=s,lwe(s),s=s.sibling;St=i,oD=a,ga=l}eue(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,St=s):eue(e)}}function eue(e){for(;St!==null;){var t=St;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ga||o6(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ga)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:kf(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Fae(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Fae(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&q2(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(tt(163))}ga||t.flags&512&&mz(t)}catch(d){Yi(t,t.return,d)}}if(t===e){St=null;break}if(n=t.sibling,n!==null){n.return=t.return,St=n;break}St=t.return}}function tue(e){for(;St!==null;){var t=St;if(t===e){St=null;break}var n=t.sibling;if(n!==null){n.return=t.return,St=n;break}St=t.return}}function nue(e){for(;St!==null;){var t=St;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{o6(4,t)}catch(u){Yi(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Yi(t,i,u)}}var s=t.return;try{mz(t)}catch(u){Yi(t,s,u)}break;case 5:var o=t.return;try{mz(t)}catch(u){Yi(t,o,u)}}}catch(u){Yi(t,t.return,u)}if(t===e){St=null;break}var a=t.sibling;if(a!==null){a.return=t.return,St=a;break}St=t.return}}var wVe=Math.ceil,S$=sg.ReactCurrentDispatcher,sY=sg.ReactCurrentOwner,zc=sg.ReactCurrentBatchConfig,dr=0,po=null,Cs=null,Uo=0,Tl=0,qw=Yy(0),Bs=0,nI=null,lb=0,a6=0,oY=0,qA=null,Pu=null,aY=0,ZE=1/0,Vp=null,T$=!1,vz=null,O0=null,aD=!1,p0=null,C$=0,WA=0,bz=null,GP=-1,YP=0;function tu(){return dr&6?ls():GP!==-1?GP:GP=ls()}function $0(e){return e.mode&1?dr&2&&Uo!==0?Uo&-Uo:iVe.transition!==null?(YP===0&&(YP=Gbe()),YP):(e=Lr,e!==0||(e=window.event,e=e===void 0?16:e_e(e.type)),e):1}function ed(e,t,n,r){if(50<WA)throw WA=0,bz=null,Error(tt(185));jk(e,n,r),(!(dr&2)||e!==po)&&(e===po&&(!(dr&2)&&(a6|=n),Bs===4&&i0(e,Uo)),Ku(e,r),n===1&&dr===0&&!(t.mode&1)&&(ZE=ls()+500,r6&&Ky()))}function Ku(e,t){var n=e.callbackNode;ize(e,t);var r=l$(e,e===po?Uo:0);if(r===0)n!==null&&fae(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&fae(n),t===1)e.tag===0?rVe(rue.bind(null,e)):b_e(rue.bind(null,e)),Zze(function(){!(dr&6)&&Ky()}),n=null;else{switch(Ybe(r)){case 1:n=PG;break;case 4:n=qbe;break;case 16:n=u$;break;case 536870912:n=Wbe;break;default:n=u$}n=ywe(n,cwe.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function cwe(e,t){if(GP=-1,YP=0,dr&6)throw Error(tt(327));var n=e.callbackNode;if(dE()&&e.callbackNode!==n)return null;var r=l$(e,e===po?Uo:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=A$(e,r);else{t=r;var i=dr;dr|=2;var s=dwe();(po!==e||Uo!==t)&&(Vp=null,ZE=ls()+500,H1(e,t));do try{SVe();break}catch(a){fwe(e,a)}while(!0);WG(),S$.current=s,dr=i,Cs!==null?t=0:(po=null,Uo=0,t=Bs)}if(t!==0){if(t===2&&(i=W7(e),i!==0&&(r=i,t=_z(e,i))),t===1)throw n=nI,H1(e,0),i0(e,r),Ku(e,ls()),n;if(t===6)i0(e,r);else{if(i=e.current.alternate,!(r&30)&&!EVe(i)&&(t=A$(e,r),t===2&&(s=W7(e),s!==0&&(r=s,t=_z(e,s))),t===1))throw n=nI,H1(e,0),i0(e,r),Ku(e,ls()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(tt(345));case 2:Gv(e,Pu,Vp);break;case 3:if(i0(e,r),(r&130023424)===r&&(t=aY+500-ls(),10<t)){if(l$(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){tu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ez(Gv.bind(null,e,Pu,Vp),t);break}Gv(e,Pu,Vp);break;case 4:if(i0(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Zf(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=ls()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wVe(r/1960))-r,10<r){e.timeoutHandle=ez(Gv.bind(null,e,Pu,Vp),r);break}Gv(e,Pu,Vp);break;case 5:Gv(e,Pu,Vp);break;default:throw Error(tt(329))}}}return Ku(e,ls()),e.callbackNode===n?cwe.bind(null,e):null}function _z(e,t){var n=qA;return e.current.memoizedState.isDehydrated&&(H1(e,t).flags|=256),e=A$(e,t),e!==2&&(t=Pu,Pu=n,t!==null&&wz(t)),e}function wz(e){Pu===null?Pu=e:Pu.push.apply(Pu,e)}function EVe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ud(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function i0(e,t){for(t&=~oY,t&=~a6,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Zf(t),r=1<<n;e[n]=-1,t&=~r}}function rue(e){if(dr&6)throw Error(tt(327));dE();var t=l$(e,0);if(!(t&1))return Ku(e,ls()),null;var n=A$(e,t);if(e.tag!==0&&n===2){var r=W7(e);r!==0&&(t=r,n=_z(e,r))}if(n===1)throw n=nI,H1(e,0),i0(e,t),Ku(e,ls()),n;if(n===6)throw Error(tt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Gv(e,Pu,Vp),Ku(e,ls()),null}function uY(e,t){var n=dr;dr|=1;try{return e(t)}finally{dr=n,dr===0&&(ZE=ls()+500,r6&&Ky())}}function cb(e){p0!==null&&p0.tag===0&&!(dr&6)&&dE();var t=dr;dr|=1;var n=zc.transition,r=Lr;try{if(zc.transition=null,Lr=1,e)return e()}finally{Lr=r,zc.transition=n,dr=t,!(dr&6)&&Ky()}}function lY(){Tl=qw.current,gi(qw)}function H1(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Jze(n)),Cs!==null)for(n=Cs.return;n!==null;){var r=n;switch(VG(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&p$();break;case 3:QE(),gi(Gu),gi(Ia),JG();break;case 5:QG(r);break;case 4:QE();break;case 13:gi(Mi);break;case 19:gi(Mi);break;case 10:GG(r.type._context);break;case 22:case 23:lY()}n=n.return}if(po=e,Cs=e=M0(e.current,null),Uo=Tl=t,Bs=0,nI=null,oY=a6=lb=0,Pu=qA=null,S1!==null){for(t=0;t<S1.length;t++)if(n=S1[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}S1=null}return e}function fwe(e,t){do{var n=Cs;try{if(WG(),HP.current=x$,E$){for(var r=Li.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}E$=!1}if(ub=0,no=Os=Li=null,VA=!1,Z2=0,sY.current=null,n===null||n.return===null){Bs=1,nI=t,Cs=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=Uo,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=Hae(o);if(h!==null){h.flags&=-257,qae(h,o,a,s,t),h.mode&1&&Vae(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){Vae(s,l,t),cY();break e}u=Error(tt(426))}}else if(Ci&&a.mode&1){var g=Hae(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),qae(g,o,a,s,t),HG(JE(u,a));break e}}s=u=JE(u,a),Bs!==4&&(Bs=2),qA===null?qA=[s]:qA.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=Y_e(s,u,t);Lae(s,y);break e;case 1:a=u;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(O0===null||!O0.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=K_e(s,a,t);Lae(s,w);break e}}s=s.return}while(s!==null)}pwe(n)}catch(E){t=E,Cs===n&&n!==null&&(Cs=n=n.return);continue}break}while(!0)}function dwe(){var e=S$.current;return S$.current=x$,e===null?x$:e}function cY(){(Bs===0||Bs===3||Bs===2)&&(Bs=4),po===null||!(lb&268435455)&&!(a6&268435455)||i0(po,Uo)}function A$(e,t){var n=dr;dr|=2;var r=dwe();(po!==e||Uo!==t)&&(Vp=null,H1(e,t));do try{xVe();break}catch(i){fwe(e,i)}while(!0);if(WG(),dr=n,S$.current=r,Cs!==null)throw Error(tt(261));return po=null,Uo=0,Bs}function xVe(){for(;Cs!==null;)hwe(Cs)}function SVe(){for(;Cs!==null&&!K7e();)hwe(Cs)}function hwe(e){var t=gwe(e.alternate,e,Tl);e.memoizedProps=e.pendingProps,t===null?pwe(e):Cs=t,sY.current=null}function pwe(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=yVe(n,t),n!==null){n.flags&=32767,Cs=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Bs=6,Cs=null;return}}else if(n=gVe(n,t,Tl),n!==null){Cs=n;return}if(t=t.sibling,t!==null){Cs=t;return}Cs=t=e}while(t!==null);Bs===0&&(Bs=5)}function Gv(e,t,n){var r=Lr,i=zc.transition;try{zc.transition=null,Lr=1,TVe(e,t,n,r)}finally{zc.transition=i,Lr=r}return null}function TVe(e,t,n,r){do dE();while(p0!==null);if(dr&6)throw Error(tt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(tt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(sze(e,s),e===po&&(Cs=po=null,Uo=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||aD||(aD=!0,ywe(u$,function(){return dE(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=zc.transition,zc.transition=null;var o=Lr;Lr=1;var a=dr;dr|=4,sY.current=null,bVe(e,n),uwe(n,e),qze(J7),c$=!!Q7,J7=Q7=null,e.current=n,_Ve(n),X7e(),dr=a,Lr=o,zc.transition=s}else e.current=n;if(aD&&(aD=!1,p0=e,C$=i),s=e.pendingLanes,s===0&&(O0=null),Z7e(n.stateNode),Ku(e,ls()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(T$)throw T$=!1,e=vz,vz=null,e;return C$&1&&e.tag!==0&&dE(),s=e.pendingLanes,s&1?e===bz?WA++:(WA=0,bz=e):WA=0,Ky(),null}function dE(){if(p0!==null){var e=Ybe(C$),t=zc.transition,n=Lr;try{if(zc.transition=null,Lr=16>e?16:e,p0===null)var r=!1;else{if(e=p0,p0=null,C$=0,dr&6)throw Error(tt(331));var i=dr;for(dr|=4,St=e.current;St!==null;){var s=St,o=s.child;if(St.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(St=l;St!==null;){var c=St;switch(c.tag){case 0:case 11:case 15:HA(8,c,s)}var f=c.child;if(f!==null)f.return=c,St=f;else for(;St!==null;){c=St;var d=c.sibling,h=c.return;if(swe(c),c===l){St=null;break}if(d!==null){d.return=h,St=d;break}St=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}St=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,St=o;else e:for(;St!==null;){if(s=St,s.flags&2048)switch(s.tag){case 0:case 11:case 15:HA(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,St=y;break e}St=s.return}}var v=e.current;for(St=v;St!==null;){o=St;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,St=b;else e:for(o=v;St!==null;){if(a=St,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:o6(9,a)}}catch(E){Yi(a,a.return,E)}if(a===o){St=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,St=w;break e}St=a.return}}if(dr=i,Ky(),Eh&&typeof Eh.onPostCommitFiberRoot=="function")try{Eh.onPostCommitFiberRoot(JL,e)}catch{}r=!0}return r}finally{Lr=n,zc.transition=t}}return!1}function iue(e,t,n){t=JE(n,t),t=Y_e(e,t,1),e=P0(e,t,1),t=tu(),e!==null&&(jk(e,1,t),Ku(e,t))}function Yi(e,t,n){if(e.tag===3)iue(e,e,n);else for(;t!==null;){if(t.tag===3){iue(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(O0===null||!O0.has(r))){e=JE(n,e),e=K_e(t,e,1),t=P0(t,e,1),e=tu(),t!==null&&(jk(t,1,e),Ku(t,e));break}}t=t.return}}function CVe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&n,po===e&&(Uo&n)===n&&(Bs===4||Bs===3&&(Uo&130023424)===Uo&&500>ls()-aY?H1(e,0):oY|=n),Ku(e,t)}function mwe(e,t){t===0&&(e.mode&1?(t=QN,QN<<=1,!(QN&130023424)&&(QN=4194304)):t=1);var n=tu();e=Dm(e,t),e!==null&&(jk(e,t,n),Ku(e,n))}function AVe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),mwe(e,n)}function IVe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(tt(314))}r!==null&&r.delete(t),mwe(e,n)}var gwe;gwe=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Gu.current)Uu=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Uu=!1,mVe(e,t,n);Uu=!!(e.flags&131072)}else Uu=!1,Ci&&t.flags&1048576&&__e(t,y$,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;WP(e,t),e=t.pendingProps;var i=YE(t,Ia.current);fE(t,n),i=eY(null,t,r,e,i,n);var s=tY();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Yu(r)?(s=!0,m$(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,KG(t),i.updater=s6,t.stateNode=i,i._reactInternals=t,az(t,r,e,n),t=cz(null,t,r,!0,s,n)):(t.tag=0,Ci&&s&&zG(t),qa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(WP(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=RVe(r),e=kf(r,e),i){case 0:t=lz(null,t,r,e,n);break e;case 1:t=Yae(null,t,r,e,n);break e;case 11:t=Wae(null,t,r,e,n);break e;case 14:t=Gae(null,t,r,kf(r.type,e),n);break e}throw Error(tt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:kf(r,i),lz(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:kf(r,i),Yae(e,t,r,i,n);case 3:e:{if(Z_e(t),e===null)throw Error(tt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,C_e(e,t),_$(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=JE(Error(tt(423)),t),t=Kae(e,t,r,n,i);break e}else if(r!==i){i=JE(Error(tt(424)),t),t=Kae(e,t,r,n,i);break e}else for(Dl=D0(t.stateNode.containerInfo.firstChild),Ul=t,Ci=!0,$f=null,n=S_e(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(KE(),r===i){t=Pm(e,t,n);break e}qa(e,t,r,n)}t=t.child}return t;case 5:return A_e(t),e===null&&iz(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,Z7(r,i)?o=null:s!==null&&Z7(r,s)&&(t.flags|=32),J_e(e,t),qa(e,t,o,n),t.child;case 6:return e===null&&iz(t),null;case 13:return ewe(e,t,n);case 4:return XG(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=XE(t,null,r,n):qa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:kf(r,i),Wae(e,t,r,i,n);case 7:return qa(e,t,t.pendingProps,n),t.child;case 8:return qa(e,t,t.pendingProps.children,n),t.child;case 12:return qa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,oi(v$,r._currentValue),r._currentValue=o,s!==null)if(ud(s.value,o)){if(s.children===i.children&&!Gu.current){t=Pm(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=vm(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),sz(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(tt(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),sz(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}qa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,fE(t,n),i=Wc(i),r=r(i),t.flags|=1,qa(e,t,r,n),t.child;case 14:return r=t.type,i=kf(r,t.pendingProps),i=kf(r.type,i),Gae(e,t,r,i,n);case 15:return X_e(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:kf(r,i),WP(e,t),t.tag=1,Yu(r)?(e=!0,m$(t)):e=!1,fE(t,n),G_e(t,r,i),az(t,r,i,n),cz(null,t,r,!0,e,n);case 19:return twe(e,t,n);case 22:return Q_e(e,t,n)}throw Error(tt(156,t.tag))};function ywe(e,t){return Hbe(e,t)}function kVe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mc(e,t,n,r){return new kVe(e,t,n,r)}function fY(e){return e=e.prototype,!(!e||!e.isReactComponent)}function RVe(e){if(typeof e=="function")return fY(e)?1:0;if(e!=null){if(e=e.$$typeof,e===RG)return 11;if(e===NG)return 14}return 2}function M0(e,t){var n=e.alternate;return n===null?(n=Mc(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function KP(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")fY(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case $w:return q1(n.children,i,s,t);case kG:o=8,i|=8;break;case N7:return e=Mc(12,n,t,i|2),e.elementType=N7,e.lanes=s,e;case D7:return e=Mc(13,n,t,i),e.elementType=D7,e.lanes=s,e;case P7:return e=Mc(19,n,t,i),e.elementType=P7,e.lanes=s,e;case Abe:return u6(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Tbe:o=10;break e;case Cbe:o=9;break e;case RG:o=11;break e;case NG:o=14;break e;case Gg:o=16,r=null;break e}throw Error(tt(130,e==null?e:typeof e,""))}return t=Mc(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function q1(e,t,n,r){return e=Mc(7,e,r,t),e.lanes=n,e}function u6(e,t,n,r){return e=Mc(22,e,r,t),e.elementType=Abe,e.lanes=n,e.stateNode={isHidden:!1},e}function GB(e,t,n){return e=Mc(6,e,null,t),e.lanes=n,e}function YB(e,t,n){return t=Mc(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function NVe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=IB(0),this.expirationTimes=IB(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=IB(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function dY(e,t,n,r,i,s,o,a,u){return e=new NVe(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Mc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},KG(s),e}function DVe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ow,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function vwe(e){if(!e)return oy;e=e._reactInternals;e:{if(e_(e)!==e||e.tag!==1)throw Error(tt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Yu(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(tt(171))}if(e.tag===1){var n=e.type;if(Yu(n))return v_e(e,n,t)}return t}function bwe(e,t,n,r,i,s,o,a,u){return e=dY(n,r,!0,e,i,s,o,a,u),e.context=vwe(null),n=e.current,r=tu(),i=$0(n),s=vm(r,i),s.callback=t??null,P0(n,s,i),e.current.lanes=i,jk(e,i,r),Ku(e,r),e}function l6(e,t,n,r){var i=t.current,s=tu(),o=$0(i);return n=vwe(n),t.context===null?t.context=n:t.pendingContext=n,t=vm(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=P0(i,t,o),e!==null&&(ed(e,i,o,s),VP(e,i,o)),o}function I$(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function sue(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function hY(e,t){sue(e,t),(e=e.alternate)&&sue(e,t)}function PVe(){return null}var _we=typeof reportError=="function"?reportError:function(e){console.error(e)};function pY(e){this._internalRoot=e}c6.prototype.render=pY.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(tt(409));l6(e,t,null,null)};c6.prototype.unmount=pY.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;cb(function(){l6(null,e,null,null)}),t[Nm]=null}};function c6(e){this._internalRoot=e}c6.prototype.unstable_scheduleHydration=function(e){if(e){var t=Qbe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<r0.length&&t!==0&&t<r0[n].priority;n++);r0.splice(n,0,e),n===0&&Zbe(e)}};function mY(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f6(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function oue(){}function OVe(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=I$(o);s.call(l)}}var o=bwe(t,r,e,0,null,!1,!1,"",oue);return e._reactRootContainer=o,e[Nm]=o.current,Y2(e.nodeType===8?e.parentNode:e),cb(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=I$(u);a.call(l)}}var u=dY(e,0,!1,null,null,!1,!1,"",oue);return e._reactRootContainer=u,e[Nm]=u.current,Y2(e.nodeType===8?e.parentNode:e),cb(function(){l6(t,u,n,r)}),u}function d6(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=I$(o);a.call(u)}}l6(t,o,e,i)}else o=OVe(n,t,e,i,r);return I$(o)}Kbe=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=KC(t.pendingLanes);n!==0&&(OG(t,n|1),Ku(t,ls()),!(dr&6)&&(ZE=ls()+500,Ky()))}break;case 13:cb(function(){var r=Dm(e,1);if(r!==null){var i=tu();ed(r,e,1,i)}}),hY(e,1)}};$G=function(e){if(e.tag===13){var t=Dm(e,134217728);if(t!==null){var n=tu();ed(t,e,134217728,n)}hY(e,134217728)}};Xbe=function(e){if(e.tag===13){var t=$0(e),n=Dm(e,t);if(n!==null){var r=tu();ed(n,e,t,r)}hY(e,t)}};Qbe=function(){return Lr};Jbe=function(e,t){var n=Lr;try{return Lr=e,t()}finally{Lr=n}};V7=function(e,t,n){switch(t){case"input":if(M7(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=n6(r);if(!i)throw Error(tt(90));kbe(r),M7(r,i)}}}break;case"textarea":Nbe(e,n);break;case"select":t=n.value,t!=null&&aE(e,!!n.multiple,t,!1)}};Fbe=uY;jbe=cb;var $Ve={usingClientEntryPoint:!1,Events:[Uk,jw,n6,Mbe,Lbe,uY]},XT={findFiberByHostInstance:x1,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},MVe={bundleType:XT.bundleType,version:XT.version,rendererPackageName:XT.rendererPackageName,rendererConfig:XT.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sg.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=zbe(e),e===null?null:e.stateNode},findFiberByHostInstance:XT.findFiberByHostInstance||PVe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uD=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uD.isDisabled&&uD.supportsFiber)try{JL=uD.inject(MVe),Eh=uD}catch{}}uc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$Ve;uc.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mY(t))throw Error(tt(200));return DVe(e,t,null,n)};uc.createRoot=function(e,t){if(!mY(e))throw Error(tt(299));var n=!1,r="",i=_we;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=dY(e,1,!1,null,null,n,!1,r,i),e[Nm]=t.current,Y2(e.nodeType===8?e.parentNode:e),new pY(t)};uc.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(tt(188)):(e=Object.keys(e).join(","),Error(tt(268,e)));return e=zbe(t),e=e===null?null:e.stateNode,e};uc.flushSync=function(e){return cb(e)};uc.hydrate=function(e,t,n){if(!f6(t))throw Error(tt(200));return d6(null,e,t,!0,n)};uc.hydrateRoot=function(e,t,n){if(!mY(e))throw Error(tt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=_we;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=bwe(t,null,e,1,n??null,i,!1,s,o),e[Nm]=t.current,Y2(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new c6(t)};uc.render=function(e,t,n){if(!f6(t))throw Error(tt(200));return d6(null,e,t,!1,n)};uc.unmountComponentAtNode=function(e){if(!f6(e))throw Error(tt(40));return e._reactRootContainer?(cb(function(){d6(null,null,e,!1,function(){e._reactRootContainer=null,e[Nm]=null})}),!0):!1};uc.unstable_batchedUpdates=uY;uc.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!f6(n))throw Error(tt(200));if(e==null||e._reactInternals===void 0)throw Error(tt(38));return d6(e,t,n,!1,r)};uc.version="18.3.1-next-f1338f8080-20240426";function wwe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wwe)}catch(e){console.error(e)}}wwe(),wbe.exports=uc;var Xy=wbe.exports;const Ww=ml(Xy);var aue=Xy;k7.createRoot=aue.createRoot,k7.hydrateRoot=aue.hydrateRoot;var th=function(){return th=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},th.apply(this,arguments)};function Vk(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Zp(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function uue(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function LVe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Qn(e){return this instanceof Qn?(this.v=e,this):new Qn(e)}function C1(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Qn?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function KB(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Qn(e[i](o)),done:!1}:s?s(o):o}:s}}function GA(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof uue=="function"?uue(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var XP="right-scroll-bar-position",QP="width-before-scroll-bar",FVe="with-scroll-bars-hidden",jVe="--removed-body-scroll-bar-size";function XB(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function BVe(e,t){var n=A.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var UVe=typeof window<"u"?A.useLayoutEffect:A.useEffect,lue=new WeakMap;function zVe(e,t){var n=BVe(null,function(r){return e.forEach(function(i){return XB(i,r)})});return UVe(function(){var r=lue.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||XB(a,null)}),s.forEach(function(a){i.has(a)||XB(a,o)})}lue.set(n,e)},[e]),n}function VVe(e){return e}function HVe(e,t){t===void 0&&(t=VVe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function qVe(e){e===void 0&&(e={});var t=HVe(null);return t.options=th({async:!0,ssr:!1},e),t}var Ewe=function(e){var t=e.sideCar,n=Vk(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return A.createElement(r,th({},n))};Ewe.isSideCarExport=!0;function WVe(e,t){return e.useMedium(t),Ewe}var xwe=qVe(),QB=function(){},h6=A.forwardRef(function(e,t){var n=A.useRef(null),r=A.useState({onScrollCapture:QB,onWheelCapture:QB,onTouchMoveCapture:QB}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,b=Vk(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=d,E=zVe([n,t]),x=th(th({},b),i);return A.createElement(A.Fragment,null,c&&A.createElement(w,{sideCar:xwe,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?A.cloneElement(A.Children.only(a),th(th({},x),{ref:E})):A.createElement(y,th({},x,{className:u,ref:E}),a))});h6.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};h6.classNames={fullWidth:QP,zeroRight:XP};var GVe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function YVe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=GVe();return t&&e.setAttribute("nonce",t),e}function KVe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function XVe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var QVe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=YVe())&&(KVe(t,n),XVe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},JVe=function(){var e=QVe();return function(t,n){A.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Swe=function(){var e=JVe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},ZVe={left:0,top:0,right:0,gap:0},JB=function(e){return parseInt(e||"",10)||0},eHe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[JB(n),JB(r),JB(i)]},tHe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return ZVe;var t=eHe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},nHe=Swe(),hE="data-scroll-locked",rHe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(FVe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(hE,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(XP,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(QP,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(XP," .").concat(XP,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(QP," .").concat(QP,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(hE,`] {
    `).concat(jVe,": ").concat(a,`px;
  }
`)},cue=function(){var e=parseInt(document.body.getAttribute(hE)||"0",10);return isFinite(e)?e:0},iHe=function(){A.useEffect(function(){return document.body.setAttribute(hE,(cue()+1).toString()),function(){var e=cue()-1;e<=0?document.body.removeAttribute(hE):document.body.setAttribute(hE,e.toString())}},[])},sHe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;iHe();var s=A.useMemo(function(){return tHe(i)},[i]);return A.createElement(nHe,{styles:rHe(s,!t,i,n?"":"!important")})},Ez=!1;if(typeof window<"u")try{var lD=Object.defineProperty({},"passive",{get:function(){return Ez=!0,!0}});window.addEventListener("test",lD,lD),window.removeEventListener("test",lD,lD)}catch{Ez=!1}var W_=Ez?{passive:!1}:!1,oHe=function(e){return e.tagName==="TEXTAREA"},Twe=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!oHe(e)&&n[t]==="visible")},aHe=function(e){return Twe(e,"overflowY")},uHe=function(e){return Twe(e,"overflowX")},fue=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Cwe(e,r);if(i){var s=Awe(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},lHe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},cHe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Cwe=function(e,t){return e==="v"?aHe(t):uHe(t)},Awe=function(e,t){return e==="v"?lHe(t):cHe(t)},fHe=function(e,t){return e==="h"&&t==="rtl"?-1:1},dHe=function(e,t,n,r,i){var s=fHe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=Awe(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&Cwe(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&(Math.abs(f)<1||!i)||!c&&(Math.abs(d)<1||!i))&&(l=!0),l},cD=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},due=function(e){return[e.deltaX,e.deltaY]},hue=function(e){return e&&"current"in e?e.current:e},hHe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},pHe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},mHe=0,G_=[];function gHe(e){var t=A.useRef([]),n=A.useRef([0,0]),r=A.useRef(),i=A.useState(mHe++)[0],s=A.useState(Swe)[0],o=A.useRef(e);A.useEffect(function(){o.current=e},[e]),A.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=LVe([e.lockRef.current],(e.shards||[]).map(hue),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=A.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=cD(m),v=n.current,b="deltaX"in m?m.deltaX:v[0]-y[0],w="deltaY"in m?m.deltaY:v[1]-y[1],E,x=m.target,S=Math.abs(b)>Math.abs(w)?"h":"v";if("touches"in m&&S==="h"&&x.type==="range")return!1;var C=fue(S,x);if(!C)return!0;if(C?E=S:(E=S==="v"?"h":"v",C=fue(S,x)),!C)return!1;if(!r.current&&"changedTouches"in m&&(b||w)&&(r.current=E),!E)return!0;var I=r.current||E;return dHe(I,g,m,I==="h"?b:w,!0)},[]),u=A.useCallback(function(m){var g=m;if(!(!G_.length||G_[G_.length-1]!==s)){var y="deltaY"in g?due(g):cD(g),v=t.current.filter(function(E){return E.name===g.type&&(E.target===g.target||g.target===E.shadowParent)&&hHe(E.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(hue).filter(Boolean).filter(function(E){return E.contains(g.target)}),w=b.length>0?a(g,b[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),l=A.useCallback(function(m,g,y,v){var b={name:m,delta:g,target:y,should:v,shadowParent:yHe(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(w){return w!==b})},1)},[]),c=A.useCallback(function(m){n.current=cD(m),r.current=void 0},[]),f=A.useCallback(function(m){l(m.type,due(m),m.target,a(m,e.lockRef.current))},[]),d=A.useCallback(function(m){l(m.type,cD(m),m.target,a(m,e.lockRef.current))},[]);A.useEffect(function(){return G_.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,W_),document.addEventListener("touchmove",u,W_),document.addEventListener("touchstart",c,W_),function(){G_=G_.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,W_),document.removeEventListener("touchmove",u,W_),document.removeEventListener("touchstart",c,W_)}},[]);var h=e.removeScrollBar,p=e.inert;return A.createElement(A.Fragment,null,p?A.createElement(s,{styles:pHe(i)}):null,h?A.createElement(sHe,{gapMode:e.gapMode}):null)}function yHe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const vHe=WVe(xwe,gHe);var p6=A.forwardRef(function(e,t){return A.createElement(h6,th({},e,{ref:t,sideCar:vHe}))});p6.classNames=h6.classNames;function ti(e){return Object.keys(e)}function ZB(e){return e&&typeof e=="object"&&!Array.isArray(e)}function gY(e,t){const n={...e},r=t;return ZB(e)&&ZB(t)&&Object.keys(t).forEach(i=>{ZB(r[i])&&i in e?n[i]=gY(n[i],r[i]):n[i]=r[i]}),n}function bHe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function _He(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function rI(e){const t=_He(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function e8(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function Iwe(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?e8(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?e8(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?e8(s):s}}return r}return n}const Te=Iwe("rem",{shouldScale:!0}),k$=Iwe("em");function Qy(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function kwe(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function Jy(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==A.Fragment:!1}function _o(e){const t=A.createContext(null);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>{const i=A.useContext(t);if(i===null)throw new Error(e);return i}]}function bS(e=null){const t=A.createContext(e);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>A.useContext(t)]}function R$(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function N$(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function wHe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function EHe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function xHe(e,t,n){return N$(e,n)===N$(t,n)}function yY({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=N$(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>xHe(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=EHe(l,u,r),f=wHe(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const SHe={app:100,modal:200,popover:300,overlay:400,max:9999};function cc(e){return SHe[e]}const THe=()=>{};function CHe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||THe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function sn(e,t="size",n=!0){if(e!==void 0)return kwe(e)?n?Te(e):e:`var(--${t}-${e})`}function fs(e){return sn(e,"mantine-spacing")}function Wr(e){return e===void 0?"var(--mantine-radius-default)":sn(e,"mantine-radius")}function mo(e){return sn(e,"mantine-font-size")}function Rwe(e){return sn(e,"mantine-line-height",!1)}function vY(e){if(e)return sn(e,"mantine-shadow",!1)}function um(e,t){return n=>{e==null||e(n),t==null||t(n)}}function bY(e,t){return e in t.breakpoints?rI(t.breakpoints[e]):rI(e)}function iI(e,t){const n=e.map(r=>({value:r,px:bY(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function Hf(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function AHe(e,t,n){var r;return n?Array.from(((r=N$(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function IHe(){const[e,t]=A.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function ph(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function pE(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function l1(e){const t=A.useRef(e);return A.useEffect(()=>{t.current=e}),A.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function m6(e,t){const n=l1(e),r=A.useRef(0);return A.useEffect(()=>()=>window.clearTimeout(r.current),[]),A.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const pue=["mousedown","touchstart"];function kHe(e,t,n){const r=A.useRef();return A.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||pue).forEach(s=>document.addEventListener(s,i)),()=>{(t||pue).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function RHe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function NHe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function DHe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=A.useState(n?t:NHe(e)),s=A.useRef();return A.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),RHe(s.current,o=>i(o.matches))},[e]),r}const t_=typeof document<"u"?A.useLayoutEffect:A.useEffect;function jh(e,t){const n=A.useRef(!1);A.useEffect(()=>()=>{n.current=!1},[]),A.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function Nwe({opened:e,shouldReturnFocus:t=!0}){const n=A.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return jh(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function PHe(e,t="body > :not(script)"){const n=pE(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const OHe=/input|select|textarea|button|object/,Dwe="a, input, select, textarea, button, object, [tabindex]";function $He(e){return e.style.display==="none"}function MHe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if($He(n))return!1;n=n.parentNode}return!0}function Pwe(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function xz(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(Pwe(e));return(OHe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&MHe(e)}function Owe(e){const t=Pwe(e);return(Number.isNaN(t)||t>=0)&&xz(e)}function LHe(e){return Array.from(e.querySelectorAll(Dwe)).filter(Owe)}function FHe(e,t){const n=LHe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function jHe(e=!0){const t=A.useRef(),n=A.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(Dwe));o=a.find(Owe)||a.find(xz)||null,!o&&xz(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=A.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=PHe(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return A.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&FHe(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const BHe=e=>(e+1)%1e6;function UHe(){const[,e]=A.useReducer(BHe,0);return e}const zHe=Pt.useId||(()=>{});function VHe(){const e=zHe();return e?`mantine-${e.replace(/:/g,"")}`:""}function Pa(e){const t=VHe(),[n,r]=A.useState(t);return t_(()=>{r(pE())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function HHe(e=[]){const[t,n]=A.useState(e);return[t,{setState:n,append:(...g)=>n(y=>[...y,...g]),prepend:(...g)=>n(y=>[...g,...y]),insert:(g,...y)=>n(v=>[...v.slice(0,g),...y,...v.slice(g)]),pop:()=>n(g=>{const y=[...g];return y.pop(),y}),shift:()=>n(g=>{const y=[...g];return y.shift(),y}),apply:g=>n(y=>y.map((v,b)=>g(v,b))),applyWhere:(g,y)=>n(v=>v.map((b,w)=>g(b,w)?y(b,w):b)),remove:(...g)=>n(y=>y.filter((v,b)=>!g.includes(b))),reorder:({from:g,to:y})=>n(v=>{const b=[...v],w=v[g];return b.splice(g,1),b.splice(y,0,w),b}),swap:({from:g,to:y})=>n(v=>{const b=[...v],w=b[g],E=b[y];return b.splice(y,1,w),b.splice(g,1,E),b}),setItem:(g,y)=>n(v=>{const b=[...v];return b[g]=y,b}),setItemProp:(g,y,v)=>n(b=>{const w=[...b];return w[g]={...w[g],[y]:v},w}),filter:g=>{n(y=>y.filter(g))}}]}function $we(e,t,n){A.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function _Y(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function Mwe(...e){return t=>{e.forEach(n=>_Y(n,t))}}function ys(...e){return A.useCallback(Mwe(...e),e)}function Lwe(e,t,n="ltr"){const r=A.useRef(null),i=A.useRef(!1),s=A.useRef(!1),o=A.useRef(0),[a,u]=A.useState(!1);return A.useEffect(()=>{i.current=!0},[]),A.useEffect(()=>{var v,b;const l=({x:w,y:E})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const x=r.current.getBoundingClientRect();if(x.width&&x.height){const S=ph((w-x.left)/x.width,0,1);e({x:n==="ltr"?S:1-S,y:ph((E-x.top)/x.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=w=>{d(),w.preventDefault(),m(w)},m=w=>l({x:w.clientX,y:w.clientY}),g=w=>{w.cancelable&&w.preventDefault(),d(),y(w)},y=w=>{w.cancelable&&w.preventDefault(),l({x:w.changedTouches[0].clientX,y:w.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(b=r.current)==null||b.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function ks({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=A.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function g6(e,t){return DHe("(prefers-reduced-motion: reduce)",e,t)}const qHe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function W1(e){const t=A.useRef(0),n=A.useRef(null),[r,i]=A.useState(qHe),s=A.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return A.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function WHe(e){const[t,{width:n,height:r}]=W1(e);return{ref:t,width:n,height:r}}function GHe(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return{...n,key:i}}function YHe(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function KHe(e){return t=>YHe(GHe(e),t)}function XHe(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i,s={preventDefault:!0}])=>{KHe(r)(n)&&(s.preventDefault&&t.preventDefault(),i(n))})}}function y6(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=A.useState(e),o=A.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=A.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=A.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function QHe(e,t,n={autoInvoke:!1}){const r=A.useRef(null),i=A.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=A.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return A.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function JHe(e,t,n){const r=A.useRef(),i=A.useRef(null);return A.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function ZHe(){const[e,t]=A.useState(!1);return A.useEffect(()=>t(!0),[]),e}function eqe(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function tqe(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});t_(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>eqe(`${e}:${String(r)}`,i[0])}return[t,n]}var nqe={};function Fwe(){return typeof process<"u"&&nqe?"production":"development"}function jwe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=jwe(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ji(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=jwe(e))&&(r&&(r+=" "),r+=t);return r}const rqe={};function iqe(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=ji(t[r],i):t[r]=i})}),t}function v6({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||rqe);return iqe(s)}function D$({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const Bwe=A.createContext(null);function Zy(){const e=A.useContext(Bwe);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function sqe(){return Zy().cssVariablesResolver}function oqe(){return Zy().classNamesPrefix}function wY(){return Zy().getStyleNonce}function aqe(){return Zy().withStaticClasses}function uqe(){return Zy().headless}function lqe(){var e;return(e=Zy().stylesTransform)==null?void 0:e.sx}function cqe(){var e;return(e=Zy().stylesTransform)==null?void 0:e.styles}function fqe(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function dqe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function hqe(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function pqe(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function EY(e){return fqe(e)?dqe(e):e.startsWith("rgb")?hqe(e):e.startsWith("hsl")?pqe(e):{r:0,g:0,b:0,a:1}}function fD(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=EY(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function sI(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function t8(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function mqe(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function gqe(e){if(e.startsWith("oklch("))return(mqe(e)||0)/100;const{r:t,g:n,b:r}=EY(e),i=t/255,s=n/255,o=r/255,a=t8(i),u=t8(s),l=t8(o);return .2126*a+.7152*u+.0722*l}function QT(e,t=.179){return e.startsWith("var(")?!1:gqe(e)>t}function ip({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:QT(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:QT(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:QT(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][sI(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:QT(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:QT(e,t.luminanceThreshold),shade:s,variable:void 0}}function Fr(e,t){const n=ip({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function Sz(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=Fr(n.from,t),i=Fr(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function qd(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=EY(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const Y_=qd,yqe=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=ip({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Te(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Te(1)} solid transparent`}:{background:e,hover:fD(e,.1),color:a,border:`${Te(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:qd(a,.1),hover:qd(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}}return{background:qd(e,.1),hover:qd(e,.12),color:e,border:`${Te(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Te(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:qd(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Te(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:qd(e,.05),color:e,border:`${Te(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:qd(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}}return{background:"transparent",hover:qd(e,.12),color:e,border:`${Te(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Te(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:fD(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Te(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:fD(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Te(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:fD(t.white,.01),color:e,border:`${Te(1)} solid transparent`}:n==="gradient"?{background:Sz(r,t),hover:Sz(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Te(1)} solid var(--mantine-color-default-border)`}:{}},vqe={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},mue="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",xY={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:vqe,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:yqe,autoContrast:!1,luminanceThreshold:.3,fontFamily:mue,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:mue,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Te(34),lineHeight:"1.3"},h2:{fontSize:Te(26),lineHeight:"1.35"},h3:{fontSize:Te(22),lineHeight:"1.4"},h4:{fontSize:Te(18),lineHeight:"1.45"},h5:{fontSize:Te(16),lineHeight:"1.5"},h6:{fontSize:Te(14),lineHeight:"1.5"}}},fontSizes:{xs:Te(12),sm:Te(14),md:Te(16),lg:Te(18),xl:Te(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Te(2),sm:Te(4),md:Te(8),lg:Te(16),xl:Te(32)},spacing:{xs:Te(10),sm:Te(12),md:Te(16),lg:Te(20),xl:Te(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), 0 ${Te(1)} ${Te(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(10)} ${Te(15)} ${Te(-5)}, rgba(0, 0, 0, 0.04) 0 ${Te(7)} ${Te(7)} ${Te(-5)}`,md:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(20)} ${Te(25)} ${Te(-5)}, rgba(0, 0, 0, 0.04) 0 ${Te(10)} ${Te(10)} ${Te(-5)}`,lg:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(28)} ${Te(23)} ${Te(-7)}, rgba(0, 0, 0, 0.04) 0 ${Te(12)} ${Te(12)} ${Te(-7)}`,xl:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(36)} ${Te(28)} ${Te(-7)}, rgba(0, 0, 0, 0.04) 0 ${Te(17)} ${Te(17)} ${Te(-7)}`},other:{},components:{}};function gue(e){return e==="auto"||e==="dark"||e==="light"}function bqe({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return gue(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&gue(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const _qe="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",yue="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function n8(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function vue(e){if(!(e.primaryColor in e.colors))throw new Error(_qe);if(typeof e.primaryShade=="object"&&(!n8(e.primaryShade.dark)||!n8(e.primaryShade.light)))throw new Error(yue);if(typeof e.primaryShade=="number"&&!n8(e.primaryShade))throw new Error(yue)}function wqe(e,t){var r;if(!t)return vue(e),e;const n=gY(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),vue(n),n}const SY=A.createContext(null),Eqe=()=>A.useContext(SY)||xY;function vs(){const e=A.useContext(SY);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function Uwe({theme:e,children:t,inherit:n=!0}){const r=Eqe(),i=A.useMemo(()=>wqe(n?r:xY,e),[e,r,n]);return _.jsx(SY.Provider,{value:i,children:t})}Uwe.displayName="@mantine/core/MantineThemeProvider";function xqe(){const e=vs(),t=wY(),n=ti(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=rI(e.breakpoints[i]),a=s?`${o-.1}px`:k$(o-.1),u=s?`${o}px`:k$(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return _.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function r8(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function i8(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function Sqe(e,t){const n=r8(e.variables),r=n?i8(t,n):"",i=r8(e.dark),s=i?i8(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=r8(e.light),a=o?i8(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function ev({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&ip({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function bue(e,t){return ev({color:e.colors[e.primaryColor][sI(e,t)],theme:e,autoContrast:null})}function dD({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=sI(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:Y_(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:Y_(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:Y_(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=sI(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:Y_(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:Y_(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:Y_(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function Tqe(e){return Array.isArray(e)?e:Array(10).fill(e)}function Cqe(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function K_(e,t,n){ti(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const zwe=e=>{const t=sI(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Te(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":bue(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":bue(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};K_(r.variables,e.breakpoints,"breakpoint"),K_(r.variables,e.spacing,"spacing"),K_(r.variables,e.fontSizes,"font-size"),K_(r.variables,e.lineHeights,"line-height"),K_(r.variables,e.shadows,"shadow"),K_(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),ti(e.colors).forEach(s=>{const o=e.colors[s];if(Cqe(o)){Object.assign(r.light,dD({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,dD({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,dD({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,dD({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return ti(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function Aqe({theme:e,generator:t}){const n=zwe(e),r=t==null?void 0:t(e);return r?gY(n,r):n}const s8=zwe(xY);function Iqe(e){const t={variables:{},light:{},dark:{}};return ti(e.variables).forEach(n=>{s8.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),ti(e.light).forEach(n=>{s8.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),ti(e.dark).forEach(n=>{s8.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function kqe(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function Vwe({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=vs(),r=wY(),i=sqe(),s=Aqe({theme:n,generator:i}),o=e===":root"&&t,a=o?Iqe(s):s,u=Sqe(a,e);return u?_.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":kqe(e)}`}}):null}Vwe.displayName="@mantine/CssVariables";function Rqe(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function X_(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function Nqe({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=A.useRef(),[s,o]=A.useState(()=>e.get(t)),a=r||s,u=A.useCallback(c=>{r||(X_(c,n),o(c),e.set(c))},[e.set,a,r]),l=A.useCallback(()=>{o(t),X_(t,n),e.clear()},[e.clear,t]);return A.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),t_(()=>{X_(e.get(t),n)},[]),A.useEffect(()=>{var f;if(r)return X_(r,n),()=>{};r===void 0&&X_(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&X_(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function Dqe({respectReducedMotion:e,getRootElement:t}){t_(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}Rqe();function Hwe({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=bqe(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=Nqe({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return Dqe({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),_.jsx(Bwe.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:_.jsxs(Uwe,{theme:e,children:[o&&_.jsx(Vwe,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&_.jsx(xqe,{}),t]})})}Hwe.displayName="@mantine/core/MantineProvider";function og({classNames:e,styles:t,props:n,stylesCtx:r}){const i=vs();return{resolvedClassNames:v6({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:D$({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const Pqe={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function Oqe({theme:e,options:t,unstyled:n}){return ji((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||Pqe[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function $qe({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return v6({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function _ue({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return v6({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function Mqe({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function Lqe({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function Fqe({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function jqe({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=v6({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function Bqe({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function Uqe({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return ji(Oqe({theme:e,options:t,unstyled:a||h}),jqe({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),Bqe({options:t,classes:o,selector:r,unstyled:a}),_ue({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),_ue({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),$qe({selector:r,stylesCtx:f,options:t,props:c,theme:e}),Mqe({rootSelector:l,selector:r,className:u}),Lqe({selector:r,classes:o,unstyled:a||h}),d&&!h&&Fqe({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function zqe({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return D$({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function Tz({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...Tz({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function Vqe(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...Qy(n[r])}}),t),{})}function Hqe({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=Vqe([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function qqe({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&zqe({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&D$({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&D$({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...Hqe({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?Tz({style:u,theme:e}):null,...Tz({style:r==null?void 0:r.style,theme:e})}}function Wqe({props:e,stylesCtx:t,themeName:n}){var o;const r=vs(),i=(o=cqe())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function ht({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=vs(),h=oqe(),p=aqe(),m=uqe(),g=(Array.isArray(e)?e:[e]).filter(b=>b),{withStylesTransform:y,getTransformedStyles:v}=Wqe({props:n,stylesCtx:r,themeName:g});return(b,w)=>({className:Uqe({theme:d,options:w,themeName:g,selector:b,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([w==null?void 0:w.styles,l])}),style:qqe({theme:d,themeName:g,selector:b,options:w,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function _S(e,t){return typeof e=="boolean"?e:t.autoContrast}function xe(e,t,n){var o;const r=vs(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...Qy(n)}}function o8(e){return ti(e).reduce((t,n)=>e[n]!==void 0?`${t}${bHe(n)}:${e[n]};`:t,"").trim()}function Gqe({selector:e,styles:t,media:n,container:r}){const i=t?o8(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${o8(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${o8(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function n_(e){const t=wY();return _.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:Gqe(e)}})}function r_(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:E,opacity:x,ff:S,fz:C,fw:I,lts:k,ta:R,lh:O,fs:P,tt:$,td:L,w:M,miw:B,maw:U,h:V,mih:D,mah:z,bgsz:W,bgp:j,bgr:q,bga:G,pos:te,top:le,left:fe,bottom:de,right:ye,inset:Ie,display:pe,flex:qe,hiddenFrom:Ue,visibleFrom:vt,lightHidden:it,darkHidden:_e,sx:ke,...Ve}=e;return{styleProps:Qy({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:E,opacity:x,ff:S,fz:C,fw:I,lts:k,ta:R,lh:O,fs:P,tt:$,td:L,w:M,miw:B,maw:U,h:V,mih:D,mah:z,bgsz:W,bgp:j,bgr:q,bga:G,pos:te,top:le,left:fe,bottom:de,right:ye,inset:Ie,display:pe,flex:qe,hiddenFrom:Ue,visibleFrom:vt,lightHidden:it,darkHidden:_e,sx:ke}),rest:Ve}}const Yqe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function TY(e,t){const n=ip({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function Kqe(e,t){const n=ip({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:TY(e,t)}function Xqe(e,t){if(typeof e=="number")return Te(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Te(n)}`;return r&&(s+=` ${r}`),Tqe.length>0&&(s+=` ${TY(i.join(" "),t)}`),s.trim()}return e}const wue={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function Qqe(e){return typeof e=="string"&&e in wue?wue[e]:e}const Jqe=["h1","h2","h3","h4","h5","h6"];function Zqe(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&Jqe.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Te(e):e}function eWe(e){return e}const tWe=["h1","h2","h3","h4","h5","h6"];function nWe(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&tWe.includes(e)?`var(--mantine-${e}-line-height)`:e}function rWe(e){return typeof e=="number"?Te(e):e}function iWe(e,t){if(typeof e=="number")return Te(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Te(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const a8={color:TY,textColor:Kqe,fontSize:Zqe,spacing:iWe,identity:eWe,size:rWe,lineHeight:nWe,fontFamily:Qqe,border:Xqe};function Eue(e){return e.replace("(min-width: ","").replace("em)","")}function sWe({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(Eue(i))-Number(Eue(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function oWe(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function aWe(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function uWe(e){return typeof e=="object"&&e!==null?ti(e).filter(t=>t!=="base"):[]}function lWe(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function qwe({styleProps:e,data:t,theme:n}){return sWe(ti(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=aWe(e[i]);if(!oWe(e[i]))return o.forEach(l=>{r.inlineStyles[l]=a8[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=uWe(e[i]);return o.forEach(l=>{a&&(r.styles[l]=a8[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:a8[s.type](lWe(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function Hk(){return`__m__-${A.useId().replace(/:/g,"")}`}function CY(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...CY(r,t)}),{}):typeof e=="function"?e(t):e??{}}function Wwe(e){return e.startsWith("data-")?e:`data-${e}`}function cWe(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[Wwe(n)]=e[n]),t},{})}function Gwe(e){return e?typeof e=="string"?{[Wwe(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...Gwe(n)}),{}):cWe(e):null}function Cz(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...Cz(r,t)}),{}):typeof e=="function"?e(t):e??{}}function fWe({theme:e,style:t,vars:n,styleProps:r}){const i=Cz(t,e),s=Cz(n,e);return{...i,...s,...r}}const Ywe=A.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var C;const m=vs(),g=e||"div",{styleProps:y,rest:v}=r_(h),b=lqe(),w=(C=b==null?void 0:b())==null?void 0:C(y.sx),E=Hk(),x=qwe({styleProps:y,theme:m,data:Yqe}),S={ref:p,style:fWe({theme:m,style:t,vars:n,styleProps:x.inlineStyles}),className:ji(r,w,{[E]:x.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":kwe(o)?void 0:o||void 0,size:d,...Gwe(s),...v};return _.jsxs(_.Fragment,{children:[x.hasResponsiveStyles&&_.jsx(n_,{selector:`.${E}`,styles:x.styles,media:x.media}),typeof f=="function"?f(S):_.jsx(g,{...S})]})});Ywe.displayName="@mantine/core/Box";const me=Ywe;function Kwe(e){return e}function Me(e){const t=A.forwardRef(e);return t.extend=Kwe,t}function Gs(e){const t=A.forwardRef(e);return t.extend=Kwe,t}const dWe=A.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function sp(){return A.useContext(dWe)}function hWe(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function u8(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const JT=typeof window<"u"&&window.requestAnimationFrame;function pWe({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=A.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=A.useState(r?{}:o),l=p=>{Xy.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||hWe(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}jh(()=>{typeof JT=="function"&&JT(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),JT(()=>{const p=u8(i);c({...f(p),height:p})})}:()=>{const p=u8(i);c({...f(p),willChange:"height",height:p}),JT(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=u8(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:Mwe(i,y),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const mWe={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},b6=Me((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=xe("Collapse",mWe,e),c=vs(),f=g6(),h=(c.respectReducedMotion?f:!1)?0:i,p=pWe({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?_.jsx(me,{...l,children:n}):null:_.jsx(me,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...CY(o,c)},ref:t,...l}),children:n})});b6.displayName="@mantine/core/Collapse";const[gWe,of]=_o("ScrollArea.Root component was not found in tree");function ex(e,t){const n=l1(t);t_(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const yWe=A.forwardRef((e,t)=>{const{style:n,...r}=e,i=of(),[s,o]=A.useState(0),[a,u]=A.useState(0),l=!!(s&&a);return ex(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),ex(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?_.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),vWe=A.forwardRef((e,t)=>{const n=of(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?_.jsx(yWe,{...e,ref:t}):null}),bWe={scrollHideDelay:1e3,type:"hover"},Xwe=A.forwardRef((e,t)=>{const n=xe("ScrollAreaRoot",bWe,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=A.useState(null),[l,c]=A.useState(null),[f,d]=A.useState(null),[h,p]=A.useState(null),[m,g]=A.useState(null),[y,v]=A.useState(0),[b,w]=A.useState(0),[E,x]=A.useState(!1),[S,C]=A.useState(!1),I=ys(t,k=>u(k));return _.jsx(gWe,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:x,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:S,onScrollbarYEnabledChange:C,onCornerWidthChange:v,onCornerHeightChange:w},children:_.jsx(me,{...o,ref:I,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${b}px`}})})});Xwe.displayName="@mantine/core/ScrollAreaRoot";function Qwe(e,t){const n=e/t;return Number.isNaN(n)?0:n}function _6(e){const t=Qwe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Jwe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function _We(e,[t,n]){return Math.min(n,Math.max(t,e))}function xue(e,t,n="ltr"){const r=_6(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=_We(e,u);return Jwe([0,o],[0,a])(l)}function wWe(e,t,n,r="ltr"){const i=_6(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return Jwe([u,l],f)(e)}function Zwe(e,t){return e>0&&e<t}function P$(e){return e?parseInt(e,10):0}function G1(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[EWe,eEe]=_o("ScrollAreaScrollbar was not found in tree"),tEe=A.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=of(),[h,p]=A.useState(null),m=ys(t,C=>p(C)),g=A.useRef(null),y=A.useRef(""),{viewport:v}=d,b=n.content-n.viewport,w=l1(l),E=l1(a),x=m6(c,10),S=C=>{if(g.current){const I=C.clientX-g.current.left,k=C.clientY-g.current.top;u({x:I,y:k})}};return A.useEffect(()=>{const C=I=>{const k=I.target;(h==null?void 0:h.contains(k))&&w(I,b)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[v,h,b,w]),A.useEffect(E,[n,E]),ex(h,x),ex(d.content,x),_.jsx(EWe,{value:{scrollbar:h,hasThumb:r,onThumbChange:l1(i),onThumbPointerUp:l1(s),onThumbPositionChange:E,onThumbPointerDown:l1(o)},children:_.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:G1(e.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",S(C))}),onPointerMove:G1(e.onPointerMove,S),onPointerUp:G1(e.onPointerUp,C=>{const I=C.target;I.hasPointerCapture(C.pointerId)&&I.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=y.current,g.current=null})})})}),xWe=A.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=of(),[a,u]=A.useState(),l=A.useRef(null),c=ys(t,l,o.onScrollbarXChange);return A.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),_.jsx(tEe,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${_6(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),Zwe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:P$(a.paddingLeft),paddingEnd:P$(a.paddingRight)}})}})}),SWe=A.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=of(),[a,u]=A.useState(),l=A.useRef(null),c=ys(t,l,o.onScrollbarYChange);return A.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),_.jsx(tEe,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${_6(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),Zwe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:P$(a.paddingTop),paddingEnd:P$(a.paddingBottom)}})}})}),AY=A.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=sp(),s=of(),o=A.useRef(null),a=A.useRef(0),[u,l]=A.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=Qwe(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>wWe(h,a.current,u,p);return n==="horizontal"?_.jsx(xWe,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=xue(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?_.jsx(SWe,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=xue(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),nEe=A.forwardRef((e,t)=>{const n=of(),{forceMount:r,...i}=e,[s,o]=A.useState(!1),a=e.orientation==="horizontal",u=m6(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return ex(n.viewport,u),ex(n.content,u),r||s?_.jsx(AY,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),TWe=A.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=of(),[s,o]=A.useState(!1);return A.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?_.jsx(nEe,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),CWe=A.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=of(),s=e.orientation==="horizontal",[o,a]=A.useState("hidden"),u=m6(()=>a("idle"),100);return A.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),A.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?_.jsx(AY,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:G1(e.onPointerEnter,()=>a("interacting")),onPointerLeave:G1(e.onPointerLeave,()=>a("idle"))}):null}),Sue=A.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=of(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return A.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?_.jsx(TWe,{...r,ref:t,forceMount:n}):i.type==="scroll"?_.jsx(CWe,{...r,ref:t,forceMount:n}):i.type==="auto"?_.jsx(nEe,{...r,ref:t,forceMount:n}):i.type==="always"?_.jsx(AY,{...r,ref:t}):null});function AWe(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const IWe=A.forwardRef((e,t)=>{const{style:n,...r}=e,i=of(),s=eEe(),{onThumbPositionChange:o}=s,a=ys(t,c=>s.onThumbChange(c)),u=A.useRef(),l=m6(()=>{u.current&&(u.current(),u.current=void 0)},100);return A.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=AWe(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),_.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:G1(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:G1(e.onPointerUp,s.onThumbPointerUp)})}),Tue=A.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=eEe();return n||i.hasThumb?_.jsx(IWe,{ref:t,...r}):null}),rEe=A.forwardRef(({children:e,style:t,...n},r)=>{const i=of(),s=ys(r,i.onViewportChange);return _.jsx(me,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:_.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});rEe.displayName="@mantine/core/ScrollAreaViewport";var IY={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const iEe={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},kWe=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Te(t)}}),Om=Me((e,t)=>{const n=xe("ScrollArea",iEe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...v}=n,[b,w]=A.useState(!1),E=ht({name:"ScrollArea",props:n,classes:IY,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:kWe});return _.jsxs(Xwe,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,...E("root"),...v,children:[_.jsx(rEe,{...d,...E("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:x=>{var S;(S=d==null?void 0:d.onScroll)==null||S.call(d,x),p==null||p({x:x.currentTarget.scrollLeft,y:x.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&_.jsx(Sue,{...E("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(Tue,{...E("thumb")})}),(y==="xy"||y==="y")&&_.jsx(Sue,{...E("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(Tue,{...E("thumb")})}),_.jsx(vWe,{...E("corner"),"data-hovered":b||void 0,"data-hidden":c==="never"||void 0})]})});Om.displayName="@mantine/core/ScrollArea";const kY=Me((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=xe("ScrollAreaAutosize",iEe,e);return _.jsx(me,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:_.jsx(me,{style:{display:"flex",flexDirection:"column",flex:1},children:_.jsx(Om,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});Om.classes=IY;kY.displayName="@mantine/core/ScrollAreaAutosize";kY.classes=IY;Om.Autosize=kY;var sEe={root:"m_87cf2631"};const RWe={__staticSelector:"UnstyledButton"},Is=Gs((e,t)=>{const n=xe("UnstyledButton",RWe,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=ht({name:s,props:n,classes:sEe,className:r,style:l,classNames:a,styles:u,unstyled:o});return _.jsx(me,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});Is.classes=sEe;Is.displayName="@mantine/core/UnstyledButton";var oEe={root:"m_515a97f8"};const NWe={},RY=Me((e,t)=>{const n=xe("VisuallyHidden",NWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=ht({name:"VisuallyHidden",classes:oEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return _.jsx(me,{component:"span",ref:t,...c("root"),...l})});RY.classes=oEe;RY.displayName="@mantine/core/VisuallyHidden";var aEe={root:"m_1b7284a3"};const DWe={},PWe=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Wr(t),"--paper-shadow":vY(n)}}),wS=Gs((e,t)=>{const n=xe("Paper",DWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=ht({name:"Paper",props:n,classes:aEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:PWe});return _.jsx(me,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});wS.classes=aEe;wS.displayName="@mantine/core/Paper";function ES(e){return uEe(e)?(e.nodeName||"").toLowerCase():"#document"}function Xu(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ag(e){var t;return(t=(uEe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function uEe(e){return e instanceof Node||e instanceof Xu(e).Node}function Ai(e){return e instanceof Element||e instanceof Xu(e).Element}function Kl(e){return e instanceof HTMLElement||e instanceof Xu(e).HTMLElement}function Az(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Xu(e).ShadowRoot}function qk(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Yc(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function OWe(e){return["table","td","th"].includes(ES(e))}function NY(e){const t=DY(),n=Yc(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function $We(e){let t=$m(e);for(;Kl(t)&&!ay(t);){if(NY(t))return t;t=$m(t)}return null}function DY(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ay(e){return["html","body","#document"].includes(ES(e))}function Yc(e){return Xu(e).getComputedStyle(e)}function w6(e){return Ai(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function $m(e){if(ES(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Az(e)&&e.host||ag(e);return Az(t)?t.host:t}function lEe(e){const t=$m(e);return ay(t)?e.ownerDocument?e.ownerDocument.body:e.body:Kl(t)&&qk(t)?t:lEe(t)}function bm(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=lEe(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Xu(i);return s?t.concat(o,o.visualViewport||[],qk(i)?i:[],o.frameElement&&n?bm(o.frameElement):[]):t.concat(i,bm(i,[],n))}function Cue(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function oI(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&Az(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function cEe(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function fEe(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function MWe(e){return jWe()?!1:!Aue()&&e.width===0&&e.height===0||Aue()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function LWe(){return/apple/i.test(navigator.vendor)}function Aue(){const e=/android/i;return e.test(cEe())||e.test(fEe())}function FWe(){return cEe().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function jWe(){return fEe().includes("jsdom/")}function Iz(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function BWe(e){return"nativeEvent"in e}function UWe(e){return e.matches("html,body")}function A1(e){return(e==null?void 0:e.ownerDocument)||document}function l8(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function _w(e){return"composedPath"in e?e.composedPath()[0]:e.target}const zWe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function VWe(e){return Kl(e)&&e.matches(zWe)}const Pl=Math.min,ya=Math.max,O$=Math.round,hD=Math.floor,uy=e=>({x:e,y:e}),HWe={left:"right",right:"left",bottom:"top",top:"bottom"},qWe={start:"end",end:"start"};function kz(e,t,n){return ya(e,Pl(t,n))}function Mm(e,t){return typeof e=="function"?e(t):e}function ld(e){return e.split("-")[0]}function xS(e){return e.split("-")[1]}function PY(e){return e==="x"?"y":"x"}function OY(e){return e==="y"?"height":"width"}function i_(e){return["top","bottom"].includes(ld(e))?"y":"x"}function $Y(e){return PY(i_(e))}function WWe(e,t,n){n===void 0&&(n=!1);const r=xS(e),i=$Y(e),s=OY(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=$$(o)),[o,$$(o)]}function GWe(e){const t=$$(e);return[Rz(e),t,Rz(t)]}function Rz(e){return e.replace(/start|end/g,t=>qWe[t])}function YWe(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function KWe(e,t,n,r){const i=xS(e);let s=YWe(ld(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(Rz)))),s}function $$(e){return e.replace(/left|right|bottom|top/g,t=>HWe[t])}function XWe(e){return{top:0,right:0,bottom:0,left:0,...e}}function MY(e){return typeof e!="number"?XWe(e):{top:e,right:e,bottom:e,left:e}}function tx(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Iue(e,t,n){let{reference:r,floating:i}=e;const s=i_(t),o=$Y(t),a=OY(o),u=ld(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(xS(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const QWe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=Iue(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:b,data:w,reset:E}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=b??f,h={...h,[g]:{...h[g],...w}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(l=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:f}=Iue(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function LY(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=Mm(t,e),p=MY(h),g=a[d?f==="floating"?"reference":"floating":f],y=tx(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},E=tx(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:u}):v);return{top:(y.top-E.top+p.top)/w.y,bottom:(E.bottom-y.bottom+p.bottom)/w.y,left:(y.left-E.left+p.left)/w.x,right:(E.right-y.right+p.right)/w.x}}const JWe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=Mm(e,t)||{};if(l==null)return{};const f=MY(c),d={x:n,y:r},h=$Y(i),p=OY(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-d[h]-s.floating[p],E=d[h]-s.reference[h],x=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let S=x?x[b]:0;(!S||!await(o.isElement==null?void 0:o.isElement(x)))&&(S=a.floating[b]||s.floating[p]);const C=w/2-E/2,I=S/2-m[p]/2-1,k=Pl(f[y],I),R=Pl(f[v],I),O=k,P=S-m[p]-R,$=S/2-m[p]/2+C,L=kz(O,$,P),M=!u.arrow&&xS(i)!=null&&$!==L&&s.reference[p]/2-($<O?k:R)-m[p]/2<0,B=M?$<O?$-O:$-P:0;return{[h]:d[h]+B,data:{[h]:L,centerOffset:$-L-B,...M&&{alignmentOffset:B}},reset:M}}}),ZWe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Mm(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=ld(i),v=ld(a)===a,b=await(u.isRTL==null?void 0:u.isRTL(l.floating)),w=d||(v||!m?[$$(a)]:GWe(a));!d&&p!=="none"&&w.push(...KWe(a,m,p,b));const E=[a,...w],x=await LY(t,g),S=[];let C=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&S.push(x[y]),f){const O=WWe(i,o,b);S.push(x[O[0]],x[O[1]])}if(C=[...C,{placement:i,overflows:S}],!S.every(O=>O<=0)){var I,k;const O=(((I=s.flip)==null?void 0:I.index)||0)+1,P=E[O];if(P)return{data:{index:O,overflows:C},reset:{placement:P}};let $=(k=C.filter(L=>L.overflows[0]<=0).sort((L,M)=>L.overflows[1]-M.overflows[1])[0])==null?void 0:k.placement;if(!$)switch(h){case"bestFit":{var R;const L=(R=C.map(M=>[M.placement,M.overflows.filter(B=>B>0).reduce((B,U)=>B+U,0)]).sort((M,B)=>M[1]-B[1])[0])==null?void 0:R[0];L&&($=L);break}case"initialPlacement":$=a;break}if(i!==$)return{reset:{placement:$}}}return{}}}};function dEe(e){const t=Pl(...e.map(s=>s.left)),n=Pl(...e.map(s=>s.top)),r=ya(...e.map(s=>s.right)),i=ya(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function eGe(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>tx(dEe(i)))}const tGe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=Mm(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=eGe(c),d=tx(dEe(c)),h=MY(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(i_(n)==="y"){const k=f[0],R=f[f.length-1],O=ld(n)==="top",P=k.top,$=R.bottom,L=O?k.left:R.left,M=O?k.right:R.right,B=M-L,U=$-P;return{top:P,bottom:$,left:L,right:M,width:B,height:U,x:L,y:P}}const g=ld(n)==="left",y=ya(...f.map(k=>k.right)),v=Pl(...f.map(k=>k.left)),b=f.filter(k=>g?k.left===v:k.right===y),w=b[0].top,E=b[b.length-1].bottom,x=v,S=y,C=S-x,I=E-w;return{top:w,bottom:E,left:x,right:S,width:C,height:I,x,y:w}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function nGe(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=ld(n),a=xS(n),u=i_(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=Mm(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const rGe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await nGe(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},iGe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=Mm(e,t),l={x:n,y:r},c=await LY(t,u),f=i_(ld(i)),d=PY(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],b=h-c[y];h=kz(v,h,b)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],b=p-c[y];p=kz(v,p,b)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},sGe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=Mm(e,t),c={x:n,y:r},f=i_(i),d=PY(f);let h=c[d],p=c[f];const m=Mm(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const b=d==="y"?"height":"width",w=s.reference[d]-s.floating[b]+g.mainAxis,E=s.reference[d]+s.reference[b]-g.mainAxis;h<w?h=w:h>E&&(h=E)}if(l){var y,v;const b=d==="y"?"width":"height",w=["top","left"].includes(ld(i)),E=s.reference[f]-s.floating[b]+(w&&((y=o.offset)==null?void 0:y[f])||0)+(w?0:g.crossAxis),x=s.reference[f]+s.reference[b]+(w?0:((v=o.offset)==null?void 0:v[f])||0)-(w?g.crossAxis:0);p<E?p=E:p>x&&(p=x)}return{[d]:h,[f]:p}}}},oGe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=Mm(e,t),u=await LY(t,a),l=ld(n),c=xS(n),f=i_(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=Pl(h-u[p],g),b=Pl(d-u[m],y),w=!t.middlewareData.shift;let E=v,x=b;if(f?x=c||w?Pl(b,y):y:E=c||w?Pl(v,g):g,w&&!c){const C=ya(u.left,0),I=ya(u.right,0),k=ya(u.top,0),R=ya(u.bottom,0);f?x=d-2*(C!==0||I!==0?C+I:ya(u.left,u.right)):E=h-2*(k!==0||R!==0?k+R:ya(u.top,u.bottom))}await o({...t,availableWidth:x,availableHeight:E});const S=await i.getDimensions(s.floating);return d!==S.width||h!==S.height?{reset:{rects:!0}}:{}}}};function hEe(e){const t=Yc(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Kl(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=O$(n)!==s||O$(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function FY(e){return Ai(e)?e:e.contextElement}function mE(e){const t=FY(e);if(!Kl(t))return uy(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=hEe(t);let o=(s?O$(n.width):n.width)/r,a=(s?O$(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const aGe=uy(0);function pEe(e){const t=Xu(e);return!DY()||!t.visualViewport?aGe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function uGe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Xu(e)?!1:t}function fb(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=FY(e);let o=uy(1);t&&(r?Ai(r)&&(o=mE(r)):o=mE(e));const a=uGe(s,n,r)?pEe(s):uy(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=Xu(s),h=r&&Ai(r)?Xu(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=mE(m),y=m.getBoundingClientRect(),v=Yc(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=b,l+=w,p=Xu(m),m=p.frameElement}}return tx({width:c,height:f,x:u,y:l})}const lGe=[":popover-open",":modal"];function jY(e){return lGe.some(t=>{try{return e.matches(t)}catch{return!1}})}function cGe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=ag(r),a=t?jY(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=uy(1);const c=uy(0),f=Kl(r);if((f||!f&&!s)&&((ES(r)!=="body"||qk(o))&&(u=w6(r)),Kl(r))){const d=fb(r);l=mE(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function fGe(e){return Array.from(e.getClientRects())}function mEe(e){return fb(ag(e)).left+w6(e).scrollLeft}function dGe(e){const t=ag(e),n=w6(e),r=e.ownerDocument.body,i=ya(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=ya(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+mEe(e);const a=-n.scrollTop;return Yc(r).direction==="rtl"&&(o+=ya(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function hGe(e,t){const n=Xu(e),r=ag(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=DY();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function pGe(e,t){const n=fb(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Kl(e)?mE(e):uy(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function kue(e,t,n){let r;if(t==="viewport")r=hGe(e,n);else if(t==="document")r=dGe(ag(e));else if(Ai(t))r=pGe(t,n);else{const i=pEe(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return tx(r)}function gEe(e,t){const n=$m(e);return n===t||!Ai(n)||ay(n)?!1:Yc(n).position==="fixed"||gEe(n,t)}function mGe(e,t){const n=t.get(e);if(n)return n;let r=bm(e,[],!1).filter(a=>Ai(a)&&ES(a)!=="body"),i=null;const s=Yc(e).position==="fixed";let o=s?$m(e):e;for(;Ai(o)&&!ay(o);){const a=Yc(o),u=NY(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||qk(o)&&!u&&gEe(e,o))?r=r.filter(c=>c!==o):i=a,o=$m(o)}return t.set(e,r),r}function gGe(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?jY(t)?[]:mGe(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=kue(t,c,i);return l.top=ya(f.top,l.top),l.right=Pl(f.right,l.right),l.bottom=Pl(f.bottom,l.bottom),l.left=ya(f.left,l.left),l},kue(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function yGe(e){const{width:t,height:n}=hEe(e);return{width:t,height:n}}function vGe(e,t,n){const r=Kl(t),i=ag(t),s=n==="fixed",o=fb(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=uy(0);if(r||!r&&!s)if((ES(t)!=="body"||qk(i))&&(a=w6(t)),r){const f=fb(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=mEe(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function c8(e){return Yc(e).position==="static"}function Rue(e,t){return!Kl(e)||Yc(e).position==="fixed"?null:t?t(e):e.offsetParent}function yEe(e,t){const n=Xu(e);if(jY(e))return n;if(!Kl(e)){let i=$m(e);for(;i&&!ay(i);){if(Ai(i)&&!c8(i))return i;i=$m(i)}return n}let r=Rue(e,t);for(;r&&OWe(r)&&c8(r);)r=Rue(r,t);return r&&ay(r)&&c8(r)&&!NY(r)?n:r||$We(e)||n}const bGe=async function(e){const t=this.getOffsetParent||yEe,n=this.getDimensions,r=await n(e.floating);return{reference:vGe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function _Ge(e){return Yc(e).direction==="rtl"}const wGe={convertOffsetParentRelativeRectToViewportRelativeRect:cGe,getDocumentElement:ag,getClippingRect:gGe,getOffsetParent:yEe,getElementRects:bGe,getClientRects:fGe,getDimensions:yGe,getScale:mE,isElement:Ai,isRTL:_Ge};function EGe(e,t){let n=null,r;const i=ag(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=hD(c),p=hD(i.clientWidth-(l+f)),m=hD(i.clientHeight-(c+d)),g=hD(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:ya(0,Pl(1,u))||1};let b=!0;function w(E){const x=E[0].intersectionRatio;if(x!==u){if(!b)return o();x?o(!1,x):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(w,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,v)}n.observe(e)}return o(!0),s}function xGe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=FY(e),c=i||s?[...l?bm(l):[],...bm(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?EGe(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?fb(e):null;u&&g();function g(){const y=fb(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const SGe=rGe,TGe=iGe,CGe=ZWe,AGe=oGe,Nue=JWe,IGe=tGe,kGe=sGe,RGe=(e,t,n)=>{const r=new Map,i={platform:wGe,...n},s={...i.platform,_c:r};return QWe(e,t,{...i,platform:s})};var JP=typeof document<"u"?A.useLayoutEffect:A.useEffect;function M$(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!M$(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!M$(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function vEe(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Due(e,t){const n=vEe(e);return Math.round(t*n)/n}function Pue(e){const t=A.useRef(e);return JP(()=>{t.current=e}),t}function NGe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=A.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=A.useState(r);M$(d,r)||h(r);const[p,m]=A.useState(null),[g,y]=A.useState(null),v=A.useCallback(B=>{B!==x.current&&(x.current=B,m(B))},[]),b=A.useCallback(B=>{B!==S.current&&(S.current=B,y(B))},[]),w=s||p,E=o||g,x=A.useRef(null),S=A.useRef(null),C=A.useRef(c),I=u!=null,k=Pue(u),R=Pue(i),O=A.useCallback(()=>{if(!x.current||!S.current)return;const B={placement:t,strategy:n,middleware:d};R.current&&(B.platform=R.current),RGe(x.current,S.current,B).then(U=>{const V={...U,isPositioned:!0};P.current&&!M$(C.current,V)&&(C.current=V,Xy.flushSync(()=>{f(V)}))})},[d,t,n,R]);JP(()=>{l===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(B=>({...B,isPositioned:!1})))},[l]);const P=A.useRef(!1);JP(()=>(P.current=!0,()=>{P.current=!1}),[]),JP(()=>{if(w&&(x.current=w),E&&(S.current=E),w&&E){if(k.current)return k.current(w,E,O);O()}},[w,E,O,k,I]);const $=A.useMemo(()=>({reference:x,floating:S,setReference:v,setFloating:b}),[v,b]),L=A.useMemo(()=>({reference:w,floating:E}),[w,E]),M=A.useMemo(()=>{const B={position:n,left:0,top:0};if(!L.floating)return B;const U=Due(L.floating,c.x),V=Due(L.floating,c.y);return a?{...B,transform:"translate("+U+"px, "+V+"px)",...vEe(L.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:V}},[n,a,L.floating,c.x,c.y]);return A.useMemo(()=>({...c,update:O,refs:$,elements:L,floatingStyles:M}),[c,O,$,L,M])}const DGe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Nue({element:r.current,padding:i}).fn(n):{}:r?Nue({element:r,padding:i}).fn(n):{}}}},bEe=(e,t)=>({...SGe(e),options:[e,t]}),BY=(e,t)=>({...TGe(e),options:[e,t]}),Oue=(e,t)=>({...kGe(e),options:[e,t]}),Nz=(e,t)=>({...CGe(e),options:[e,t]}),PGe=(e,t)=>({...AGe(e),options:[e,t]}),Dz=(e,t)=>({...IGe(e),options:[e,t]}),_Ee=(e,t)=>({...DGe(e),options:[e,t]}),wEe={...i$},OGe=wEe.useInsertionEffect,$Ge=OGe||(e=>e());function s0(e){const t=A.useRef(()=>{});return $Ge(()=>{t.current=e}),A.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Sh=typeof document<"u"?A.useLayoutEffect:A.useEffect;let $ue=!1,MGe=0;const Mue=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+MGe++;function LGe(){const[e,t]=A.useState(()=>$ue?Mue():void 0);return Sh(()=>{e==null&&t(Mue())},[]),A.useEffect(()=>{$ue=!0},[]),e}const FGe=wEe.useId,EEe=FGe||LGe;function jGe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const BGe=A.createContext(null),UGe=A.createContext(null),UY=()=>{var e;return((e=A.useContext(BGe))==null?void 0:e.id)||null},zY=()=>A.useContext(UGe);function VY(e){return"data-floating-ui-"+e}function Lue(e){const t=A.useRef(e);return Sh(()=>{t.current=e}),t}const Fue=VY("safe-polygon");function ZP(e,t,n){return n&&!Iz(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function zGe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=zY(),m=UY(),g=Lue(c),y=Lue(l),v=A.useRef(),b=A.useRef(-1),w=A.useRef(),E=A.useRef(-1),x=A.useRef(!0),S=A.useRef(!1),C=A.useRef(()=>{}),I=A.useCallback(()=>{var P;const $=(P=i.current.openEvent)==null?void 0:P.type;return($==null?void 0:$.includes("mouse"))&&$!=="mousedown"},[i]);A.useEffect(()=>{if(!u)return;function P($){let{open:L}=$;L||(clearTimeout(b.current),clearTimeout(E.current),x.current=!0)}return s.on("openchange",P),()=>{s.off("openchange",P)}},[u,s]),A.useEffect(()=>{if(!u||!g.current||!n)return;function P(L){I()&&r(!1,L,"hover")}const $=A1(a).documentElement;return $.addEventListener("mouseleave",P),()=>{$.removeEventListener("mouseleave",P)}},[a,n,r,u,g,I]);const k=A.useCallback(function(P,$,L){$===void 0&&($=!0),L===void 0&&(L="hover");const M=ZP(y.current,"close",v.current);M&&!w.current?(clearTimeout(b.current),b.current=window.setTimeout(()=>r(!1,P,L),M)):$&&(clearTimeout(b.current),r(!1,P,L))},[y,r]),R=s0(()=>{C.current(),w.current=void 0}),O=s0(()=>{if(S.current){const P=A1(a).body;P.style.pointerEvents="",P.removeAttribute(Fue),S.current=!1}});return A.useEffect(()=>{if(!u)return;function P(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function $(B){if(clearTimeout(b.current),x.current=!1,f&&!Iz(v.current)||d>0&&!ZP(y.current,"open"))return;const U=ZP(y.current,"open",v.current);U?b.current=window.setTimeout(()=>{r(!0,B,"hover")},U):r(!0,B,"hover")}function L(B){if(P())return;C.current();const U=A1(a);if(clearTimeout(E.current),g.current&&i.current.floatingContext){n||clearTimeout(b.current),w.current=g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){O(),R(),k(B,!0,"safe-polygon")}});const D=w.current;U.addEventListener("mousemove",D),C.current=()=>{U.removeEventListener("mousemove",D)};return}(v.current==="touch"?!oI(a,B.relatedTarget):!0)&&k(B)}function M(B){P()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){O(),R(),k(B)}})(B))}if(Ai(o)){const B=o;return n&&B.addEventListener("mouseleave",M),a==null||a.addEventListener("mouseleave",M),h&&B.addEventListener("mousemove",$,{once:!0}),B.addEventListener("mouseenter",$),B.addEventListener("mouseleave",L),()=>{n&&B.removeEventListener("mouseleave",M),a==null||a.removeEventListener("mouseleave",M),h&&B.removeEventListener("mousemove",$),B.removeEventListener("mouseenter",$),B.removeEventListener("mouseleave",L)}}},[o,a,u,e,f,d,h,k,R,O,r,n,p,y,g,i]),Sh(()=>{var P;if(u&&n&&(P=g.current)!=null&&P.__options.blockPointerEvents&&I()){const L=A1(a).body;if(L.setAttribute(Fue,""),L.style.pointerEvents="none",S.current=!0,Ai(o)&&a){var $;const M=o,B=p==null||($=p.nodesRef.current.find(U=>U.id===m))==null||($=$.context)==null?void 0:$.elements.floating;return B&&(B.style.pointerEvents=""),M.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{M.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,m,a,o,p,g,I]),Sh(()=>{n||(v.current=void 0,R(),O())},[n,R,O]),A.useEffect(()=>()=>{R(),clearTimeout(b.current),clearTimeout(E.current),O()},[u,o,R,O]),A.useMemo(()=>{if(!u)return{};function P($){v.current=$.pointerType}return{reference:{onPointerDown:P,onPointerEnter:P,onMouseMove($){function L(){x.current||r(!0,$.nativeEvent,"hover")}f&&!Iz(v.current)||n||d===0||(clearTimeout(E.current),v.current==="touch"?L():E.current=window.setTimeout(L,d))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave($){k($.nativeEvent,!1)}}}},[u,f,n,d,r,k])}const Pz=()=>{},xEe=A.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:Pz,setState:Pz,isInstantPhase:!1}),SEe=()=>A.useContext(xEe);function VGe(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=A.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=A.useRef(null),a=A.useCallback(u=>{s({currentId:u})},[]);return Sh(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),A.createElement(xEe.Provider,{value:A.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function HGe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=SEe(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return Sh(()=>{u&&(f({delay:{open:1,close:ZP(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),Sh(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),Sh(()=>{l===Pz||!n||l(o)},[n,l,o]),a}function f8(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const qGe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},WGe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},jue=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function GGe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:s,floating:o},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=t,y=zY(),v=s0(typeof c=="function"?c:()=>!1),b=typeof c=="function"?v:c,w=A.useRef(!1),E=A.useRef(!1),{escapeKey:x,outsidePress:S}=jue(m),{escapeKey:C,outsidePress:I}=jue(g),k=s0($=>{var L;if(!n||!u||!l||$.key!=="Escape")return;const M=(L=a.current.floatingContext)==null?void 0:L.nodeId,B=y?f8(y.nodesRef.current,M):[];if(!x&&($.stopPropagation(),B.length>0)){let U=!0;if(B.forEach(V=>{var D;if((D=V.context)!=null&&D.open&&!V.context.dataRef.current.__escapeKeyBubbles){U=!1;return}}),!U)return}r(!1,BWe($)?$.nativeEvent:$,"escape-key")}),R=s0($=>{var L;const M=()=>{var B;k($),(B=_w($))==null||B.removeEventListener("keydown",M)};(L=_w($))==null||L.addEventListener("keydown",M)}),O=s0($=>{var L;const M=w.current;w.current=!1;const B=E.current;if(E.current=!1,f==="click"&&B||M||typeof b=="function"&&!b($))return;const U=_w($),V="["+VY("inert")+"]",D=A1(o).querySelectorAll(V);let z=Ai(U)?U:null;for(;z&&!ay(z);){const G=$m(z);if(ay(G)||!Ai(G))break;z=G}if(D.length&&Ai(U)&&!UWe(U)&&!oI(U,o)&&Array.from(D).every(G=>!oI(z,G)))return;if(Kl(U)&&o){const G=U.clientWidth>0&&U.scrollWidth>U.clientWidth,te=U.clientHeight>0&&U.scrollHeight>U.clientHeight;let le=te&&$.offsetX>U.clientWidth;if(te&&Yc(U).direction==="rtl"&&(le=$.offsetX<=U.offsetWidth-U.clientWidth),le||G&&$.offsetY>U.clientHeight)return}const W=(L=a.current.floatingContext)==null?void 0:L.nodeId,j=y&&f8(y.nodesRef.current,W).some(G=>{var te;return l8($,(te=G.context)==null?void 0:te.elements.floating)});if(l8($,o)||l8($,s)||j)return;const q=y?f8(y.nodesRef.current,W):[];if(q.length>0){let G=!0;if(q.forEach(te=>{var le;if((le=te.context)!=null&&le.open&&!te.context.dataRef.current.__outsidePressBubbles){G=!1;return}}),!G)return}r(!1,$,"outside-press")}),P=s0($=>{var L;const M=()=>{var B;O($),(B=_w($))==null||B.removeEventListener(f,M)};(L=_w($))==null||L.addEventListener(f,M)});return A.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=x,a.current.__outsidePressBubbles=S;function $(B){r(!1,B,"ancestor-scroll")}const L=A1(o);l&&L.addEventListener("keydown",C?R:k,C),b&&L.addEventListener(f,I?P:O,I);let M=[];return p&&(Ai(s)&&(M=bm(s)),Ai(o)&&(M=M.concat(bm(o))),!Ai(i)&&i&&i.contextElement&&(M=M.concat(bm(i.contextElement)))),M=M.filter(B=>{var U;return B!==((U=L.defaultView)==null?void 0:U.visualViewport)}),M.forEach(B=>{B.addEventListener("scroll",$,{passive:!0})}),()=>{l&&L.removeEventListener("keydown",C?R:k,C),b&&L.removeEventListener(f,I?P:O,I),M.forEach(B=>{B.removeEventListener("scroll",$)})}},[a,o,s,i,l,b,f,n,r,p,u,x,S,k,C,R,O,I,P]),A.useEffect(()=>{w.current=!1},[b,f]),A.useMemo(()=>u?{reference:{onKeyDown:k,[qGe[h]]:$=>{d&&r(!1,$.nativeEvent,"reference-press")}},floating:{onKeyDown:k,onMouseDown(){E.current=!0},onMouseUp(){E.current=!0},[WGe[f]]:()=>{w.current=!0}}}:{},[u,d,f,h,r,k])}function YGe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=EEe(),s=A.useRef({}),[o]=A.useState(()=>jGe()),a=UY()!=null,[u,l]=A.useState(r.reference),c=s0((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=A.useMemo(()=>({setPositionReference:l}),[]),d=A.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return A.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function HY(e){e===void 0&&(e={});const{nodeId:t}=e,n=YGe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=A.useState(null),[a,u]=A.useState(null),c=(i==null?void 0:i.reference)||s,f=A.useRef(null),d=zY();Sh(()=>{c&&(f.current=c)},[c]);const h=NGe({...e,elements:{...i,...a&&{reference:a}}}),p=A.useCallback(b=>{const w=Ai(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;u(w),h.refs.setReference(w)},[h.refs]),m=A.useCallback(b=>{(Ai(b)||b===null)&&(f.current=b,o(b)),(Ai(h.refs.reference.current)||h.refs.reference.current===null||b!==null&&!Ai(b))&&h.refs.setReference(b)},[h.refs]),g=A.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=A.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=A.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return Sh(()=>{r.dataRef.current.floatingContext=v;const b=d==null?void 0:d.nodesRef.current.find(w=>w.id===t);b&&(b.context=v)}),A.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function KGe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=A.useRef(!1),c=A.useRef(),f=A.useRef(!0);return A.useEffect(()=>{if(!a)return;const d=Xu(o);function h(){!n&&Kl(o)&&o===Cue(A1(o))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[o,n,a]),A.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),A.useEffect(()=>()=>{clearTimeout(c.current)},[]),A.useMemo(()=>a?{reference:{onPointerDown(d){MWe(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=_w(d.nativeEvent);if(u&&Ai(h))try{if(LWe()&&FWe())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!VWe(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=Ai(h)&&h.hasAttribute(VY("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var m;const g=Cue(o?o.ownerDocument:document);!h&&g===o||oI((m=s.current.floatingContext)==null?void 0:m.refs.floating.current,g)||oI(o,g)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,s,o,r])}const Bue="active",Uue="selected";function d8(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[Bue]:o,[Uue]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[Bue,Uue].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function XGe(e){e===void 0&&(e=[]);const t=e,n=A.useCallback(s=>d8(s,e,"reference"),t),r=A.useCallback(s=>d8(s,e,"floating"),t),i=A.useCallback(s=>d8(s,e,"item"),e.map(s=>s==null?void 0:s.item));return A.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const QGe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function JGe(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=QGe.get(o))!=null?n:o,u=EEe(),c=UY()!=null;return A.useMemo(()=>{if(!s)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?{reference:{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const m={role:"option",...h&&{id:i+"-option"}};switch(o){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[s,o,a,r,i,u,c])}function TEe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function zue(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Vue(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const ZGe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function eYe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:Te(t),height:Te(t),transform:"rotate(45deg)",position:"absolute",[ZGe[u]]:Te(r)},f=Te(-t/2);return u==="left"?{...c,...zue(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...zue(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...Vue(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...Vue(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const qY=A.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=sp();return s?_.jsx("div",{...l,ref:c,style:{...u,...eYe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});qY.displayName="@mantine/core/FloatingArrow";const[tYe,CEe]=_o("Popover component was not found in the tree");function E6({children:e,active:t=!0,refProp:n="ref"}){const r=jHe(t),i=ys(r,e==null?void 0:e.ref);return Jy(e)?A.cloneElement(e,{[n]:i}):e}function AEe(e){return _.jsx(RY,{tabIndex:-1,"data-autofocus":!0,...e})}E6.displayName="@mantine/core/FocusTrap";AEe.displayName="@mantine/core/FocusTrapInitialFocus";E6.InitialFocus=AEe;function nYe(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const rYe={},IEe=A.forwardRef((e,t)=>{const{children:n,target:r,...i}=xe("Portal",rYe,e),[s,o]=A.useState(!1),a=A.useRef(null);return t_(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:nYe(i),_Y(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:Xy.createPortal(_.jsx(_.Fragment,{children:n}),a.current)});IEe.displayName="@mantine/core/Portal";function SS({withinPortal:e=!0,children:t,...n}){return e?_.jsx(IEe,{...n,children:t}):_.jsx(_.Fragment,{children:t})}SS.displayName="@mantine/core/OptionalPortal";const ZT=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${Te(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),pD={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Te(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Te(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Te(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Te(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Te(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...ZT("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...ZT("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...ZT("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...ZT("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...ZT("top"),common:{transformOrigin:"top right"}}},Hue={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function iYe({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in pD?{transitionProperty:pD[e].transitionProperty,...i,...pD[e].common,...pD[e][Hue[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[Hue[t]]}}function sYe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=vs(),l=g6(),c=u.respectReducedMotion?l:!1,[f,d]=A.useState(c?0:e),[h,p]=A.useState(r?"entered":"exited"),m=A.useRef(-1),g=A.useRef(-1),y=v=>{const b=v?i:s,w=v?o:a;window.clearTimeout(m.current);const E=c?0:v?e:t;d(E),E===0?(typeof b=="function"&&b(),typeof w=="function"&&w(),p(v?"entered":"exited")):g.current=requestAnimationFrame(()=>{Ww.flushSync(()=>{p(v?"pre-entering":"pre-exiting")}),g.current=requestAnimationFrame(()=>{typeof b=="function"&&b(),p(v?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof w=="function"&&w(),p(v?"entered":"exited")},E)})})};return jh(()=>{y(r)},[r]),A.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(g.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function ug({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=sYe({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?_.jsx(_.Fragment,{children:s({})}):e?s({display:"none"}):null:d==="exited"?e?s({display:"none"}):null:_.jsx(_.Fragment,{children:s(iYe({transition:t,duration:f,state:d,timingFunction:h}))})}ug.displayName="@mantine/core/Transition";var kEe={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const oYe={},WY=Me((e,t)=>{var g,y,v,b;const n=xe("PopoverDropdown",oYe,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=CEe(),h=Nwe({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=ys(t,d.floating);return d.disabled?null:_.jsx(SS,{...d.portalProps,withinPortal:d.withinPortal,children:_.jsx(ug,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((v=d.transitionProps)==null?void 0:v.exitDuration)=="number"?d.transitionProps.exitDuration:(b=d.transitionProps)==null?void 0:b.duration,children:w=>_.jsx(E6,{active:d.trapFocus,children:_.jsxs(me,{...p,...f,variant:u,ref:m,onKeyDownCapture:CHe(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...w,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:Te(d.width)},i]}),children:[o,_.jsx(qY,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});WY.classes=kEe;WY.displayName="@mantine/core/PopoverDropdown";const aYe={refProp:"ref",popupType:"dialog"},REe=Me((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=xe("PopoverTarget",aYe,e);if(!Jy(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=CEe(),u=ys(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return A.cloneElement(n,{...o,...l,...a.targetProps,className:ji(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});REe.displayName="@mantine/core/PopoverTarget";function NEe({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=A.useState(0);A.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return xGe(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),jh(()=>{t.update()},r),jh(()=>{s(o=>o+1)},[e])}function uYe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function lYe(e,t){const n=uYe(e.middlewares),r=[bEe(e.offset)];return n.shift&&r.push(BY(typeof n.shift=="boolean"?{limiter:Oue(),padding:5}:{limiter:Oue(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?Nz():Nz(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?Dz():Dz(n.inline)),r.push(_Ee({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(PGe({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function cYe(e){const[t,n]=ks({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=HY({strategy:e.strategy,placement:e.position,middleware:lYe(e,()=>s)});return NEe({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),jh(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),jh(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const fYe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:cc("popover"),__staticSelector:"Popover",width:"max-content"},dYe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Wr(t),"--popover-shadow":vY(n)}});function zo(e){var _e,ke,Ve,ct,Mt,Ye;const t=xe("Popover",fYe,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:b,withinPortal:w,portalProps:E,closeOnEscape:x,clickOutsideEvents:S,trapFocus:C,onClose:I,onOpen:k,onChange:R,zIndex:O,radius:P,shadow:$,id:L,defaultOpened:M,__staticSelector:B,withRoles:U,disabled:V,returnFocus:D,variant:z,keepMounted:W,vars:j,floatingStrategy:q,...G}=t,te=ht({name:B,props:t,classes:kEe,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:j,varsResolver:dYe}),le=A.useRef(null),[fe,de]=A.useState(null),[ye,Ie]=A.useState(null),{dir:pe}=sp(),qe=Pa(L),Ue=cYe({middlewares:c,width:l,position:TEe(pe,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:le,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:M,onChange:R,onOpen:k,onClose:I,strategy:q});kHe(()=>b&&Ue.onClose(),S,[fe,ye]);const vt=A.useCallback(ve=>{de(ve),Ue.floating.refs.setReference(ve)},[Ue.floating.refs.setReference]),it=A.useCallback(ve=>{Ie(ve),Ue.floating.refs.setFloating(ve)},[Ue.floating.refs.setFloating]);return _.jsx(tYe,{value:{returnFocus:D,disabled:V,controlled:Ue.controlled,reference:vt,floating:it,x:Ue.floating.x,y:Ue.floating.y,arrowX:(Ve=(ke=(_e=Ue.floating)==null?void 0:_e.middlewareData)==null?void 0:ke.arrow)==null?void 0:Ve.x,arrowY:(Ye=(Mt=(ct=Ue.floating)==null?void 0:ct.middlewareData)==null?void 0:Mt.arrow)==null?void 0:Ye.y,opened:Ue.opened,arrowRef:le,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:Ue.floating.placement,trapFocus:C,withinPortal:w,portalProps:E,zIndex:O,radius:P,shadow:$,closeOnEscape:x,onClose:Ue.onClose,onToggle:Ue.onToggle,getTargetId:()=>`${qe}-target`,getDropdownId:()=>`${qe}-dropdown`,withRoles:U,targetProps:G,__staticSelector:B,classNames:y,styles:v,unstyled:g,variant:z,keepMounted:W,getStyles:te},children:n})}zo.Target=REe;zo.Dropdown=WY;zo.displayName="@mantine/core/Popover";zo.extend=e=>e;var qf={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const hYe=A.forwardRef(({className:e,...t},n)=>_.jsxs(me,{component:"span",className:ji(qf.barsLoader,e),...t,ref:n,children:[_.jsx("span",{className:qf.bar}),_.jsx("span",{className:qf.bar}),_.jsx("span",{className:qf.bar})]})),pYe=A.forwardRef(({className:e,...t},n)=>_.jsxs(me,{component:"span",className:ji(qf.dotsLoader,e),...t,ref:n,children:[_.jsx("span",{className:qf.dot}),_.jsx("span",{className:qf.dot}),_.jsx("span",{className:qf.dot})]})),mYe=A.forwardRef(({className:e,...t},n)=>_.jsx(me,{component:"span",className:ji(qf.ovalLoader,e),...t,ref:n})),DEe={bars:hYe,oval:mYe,dots:pYe},gYe={loaders:DEe,type:"oval"},yYe=(e,{size:t,color:n})=>({root:{"--loader-size":sn(t,"loader-size"),"--loader-color":n?Fr(n,e):void 0}}),op=Me((e,t)=>{const n=xe("Loader",gYe,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=ht({name:"Loader",props:n,classes:qf,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:yYe});return p?_.jsx(me,{...g("root"),ref:t,...m,children:p}):_.jsx(me,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});op.defaultLoaders=DEe;op.classes=qf;op.displayName="@mantine/core/Loader";var x6={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const que={orientation:"horizontal"},vYe=(e,{borderWidth:t})=>({group:{"--ai-border-width":Te(t)}}),GY=Me((e,t)=>{const n=xe("ActionIconGroup",que,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=xe("ActionIconGroup",que,e),p=ht({name:"ActionIconGroup",props:n,classes:x6,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:vYe,rootSelector:"group"});return _.jsx(me,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});GY.classes=x6;GY.displayName="@mantine/core/ActionIconGroup";const bYe={},_Ye=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":sn(t,"ai-size"),"--ai-radius":n===void 0?void 0:Wr(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},s_=Gs((e,t)=>{const n=xe("ActionIcon",bYe,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":b,autoContrast:w,mod:E,...x}=n,S=ht({name:["ActionIcon",p],props:n,className:r,style:u,classes:x6,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:_Ye});return _.jsxs(Is,{...S("root",{active:!v&&!l&&!b}),...x,unstyled:i,variant:s,size:f,disabled:v||l,ref:t,mod:[{loading:l,disabled:v||b},E],children:[_.jsx(ug,{mounted:!!l,transition:"slide-down",duration:150,children:C=>_.jsx(me,{component:"span",...S("loader",{style:C}),"aria-hidden":!0,children:_.jsx(op,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),_.jsx(me,{component:"span",mod:{loading:l},...S("icon"),children:y})]})});s_.classes=x6;s_.displayName="@mantine/core/ActionIcon";s_.Group=GY;const PEe=A.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>_.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:_.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));PEe.displayName="@mantine/core/CloseIcon";var OEe={root:"m_86a44da5","root--subtle":"m_220c80f2"};const wYe={variant:"subtle"},EYe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":sn(t,"cb-size"),"--cb-radius":n===void 0?void 0:Wr(n),"--cb-icon-size":Te(r)}}),lg=Gs((e,t)=>{const n=xe("CloseButton",wYe,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=ht({name:"CloseButton",props:n,className:a,style:l,classes:OEe,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:EYe});return _.jsxs(Is,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...v("root",{variant:p,active:!h&&!d}),children:[m||_.jsx(PEe,{}),i]})});lg.classes=OEe;lg.displayName="@mantine/core/CloseButton";function xYe(e){return A.Children.toArray(e).filter(Boolean)}var $Ee={root:"m_4081bf90"};const SYe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},TYe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":fs(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),Rs=Me((e,t)=>{const n=xe("Group",SYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,...b}=n,w=xYe(u),E=w.length,x=fs(l??"md"),C={childWidth:`calc(${100/E}% - (${x} - ${x} / ${E}))`},I=ht({name:"Group",props:n,stylesCtx:C,className:i,style:s,classes:$Ee,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:TYe});return _.jsx(me,{...I("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,...b,children:w})});Rs.classes=$Ee;Rs.displayName="@mantine/core/Group";var MEe={root:"m_9814e45f"};const CYe={zIndex:cc("modal")},AYe=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&qd(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Te(i)})`:void 0,"--overlay-radius":s===void 0?void 0:Wr(s),"--overlay-z-index":o==null?void 0:o.toString()}}),aI=Gs((e,t)=>{const n=xe("Overlay",CYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,...b}=n,w=ht({name:"Overlay",props:n,classes:MEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:AYe});return _.jsx(me,{ref:t,...w("root"),mod:[{center:c,fixed:l},v],...b,children:f})});aI.classes=MEe;aI.displayName="@mantine/core/Overlay";const[IYe,cg]=_o("ModalBase component was not found in tree");function kYe({opened:e,transitionDuration:t}){const[n,r]=A.useState(e),i=A.useRef(),o=g6()?0:t;return A.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function RYe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=Pa(e),[u,l]=A.useState(!1),[c,f]=A.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=kYe({opened:n,transitionDuration:d});return $we("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),Nwe({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const LEe=A.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,...b},w)=>{const{_id:E,titleMounted:x,bodyMounted:S,shouldLockScroll:C,setTitleMounted:I,setBodyMounted:k}=RYe({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a});return _.jsx(SS,{...c,withinPortal:l,children:_.jsx(IYe,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${E}-title`,getBodyId:()=>`${E}-body`,titleMounted:x,bodyMounted:S,setTitleMounted:I,setBodyMounted:k,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:_.jsx(p6,{enabled:C&&f,...v,children:_.jsx(me,{ref:w,...b,__vars:{...g,"--mb-z-index":(h||cc("modal")).toString(),"--mb-shadow":vY(p),"--mb-padding":fs(m)},children:d})})})})});function NYe(){const e=cg();return A.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var nx={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const YY=A.forwardRef(({className:e,...t},n)=>{const r=NYe(),i=cg();return _.jsx(me,{ref:n,...t,id:r,className:ji({[nx.body]:!i.unstyled},e)})});YY.displayName="@mantine/core/ModalBaseBody";const KY=A.forwardRef(({className:e,onClick:t,...n},r)=>{const i=cg();return _.jsx(lg,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:ji({[nx.close]:!i.unstyled},e),unstyled:i.unstyled})});KY.displayName="@mantine/core/ModalBaseCloseButton";const FEe=A.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=cg();return _.jsx(ug,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>_.jsx("div",{...n,className:ji({[nx.inner]:!a.unstyled},n.className),children:_.jsx(E6,{active:a.opened&&a.trapFocus,children:_.jsx(wS,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:ji({[nx.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),XY=A.forwardRef(({className:e,...t},n)=>{const r=cg();return _.jsx(me,{component:"header",ref:n,className:ji({[nx.header]:!r.unstyled},e),...t})});XY.displayName="@mantine/core/ModalBaseHeader";const DYe={duration:200,timingFunction:"ease",transition:"fade"};function PYe(e){const t=cg();return{...DYe,...t.transitionProps,...e}}const QY=A.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=cg(),o=PYe(t);return _.jsx(ug,{mounted:s.opened,...o,transition:"fade",children:a=>_.jsx(aI,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});QY.displayName="@mantine/core/ModalBaseOverlay";function OYe(){const e=cg();return A.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const JY=A.forwardRef(({className:e,...t},n)=>{const r=OYe(),i=cg();return _.jsx(me,{component:"h2",ref:n,className:ji({[nx.title]:!i.unstyled},e),...t,id:r})});JY.displayName="@mantine/core/ModalBaseTitle";function jEe({children:e}){return _.jsx(_.Fragment,{children:e})}const[$Ye,TS]=bS({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var af={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const Wue={},MYe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${mo(t)} - ${Te(2)})`}}),S6=Me((e,t)=>{const n=xe("InputDescription",Wue,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=xe("InputDescription",Wue,n),p=TS(),m=ht({name:["InputWrapper",c],props:n,classes:af,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:MYe}),g=f&&(p==null?void 0:p.getStyles)||m;return _.jsx(me,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});S6.classes=af;S6.displayName="@mantine/core/InputDescription";const LYe={},FYe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${mo(t)} - ${Te(2)})`}}),T6=Me((e,t)=>{const n=xe("InputError",LYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=ht({name:["InputWrapper",c],props:n,classes:af,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:FYe}),m=TS(),g=f&&(m==null?void 0:m.getStyles)||p;return _.jsx(me,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});T6.classes=af;T6.displayName="@mantine/core/InputError";const Gue={labelElement:"label"},jYe=(e,{size:t})=>({label:{"--input-label-size":mo(t),"--input-asterisk-color":void 0}}),C6=Me((e,t)=>{const n=xe("InputLabel",Gue,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=xe("InputLabel",Gue,n),b=ht({name:["InputWrapper",m],props:n,classes:af,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:jYe}),w=TS(),E=(w==null?void 0:w.getStyles)||b;return _.jsxs(me,{...E("label",w!=null&&w.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:x=>{h==null||h(x),!x.defaultPrevented&&x.detail>1&&x.preventDefault()},...v,children:[p,f&&_.jsx("span",{...E("required"),"aria-hidden":!0,children:" *"})]})});C6.classes=af;C6.displayName="@mantine/core/InputLabel";const Yue={},ZY=Me((e,t)=>{const n=xe("InputPlaceholder",Yue,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=xe("InputPlaceholder",Yue,n),p=ht({name:["InputPlaceholder",l],props:n,classes:af,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return _.jsx(me,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});ZY.classes=af;ZY.displayName="@mantine/core/InputPlaceholder";function BYe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const UYe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},zYe=(e,{size:t})=>({label:{"--input-label-size":mo(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${mo(t)} - ${Te(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${mo(t)} - ${Te(2)})`}}),eK=Me((e,t)=>{const n=xe("InputWrapper",UYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:b,labelElement:w,children:E,withAsterisk:x,id:S,required:C,__stylesApiProps:I,mod:k,...R}=n,O=ht({name:["InputWrapper",f],props:I||n,classes:af,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:zYe}),P={size:l,variant:c,__staticSelector:f},$=Pa(S),L=typeof x=="boolean"?x:C,M=(b==null?void 0:b.id)||`${$}-error`,B=(v==null?void 0:v.id)||`${$}-description`,U=$,V=!!m&&typeof m!="boolean",D=!!g,z=`${V?M:""} ${D?B:""}`,W=z.trim().length>0?z.trim():void 0,j=(y==null?void 0:y.id)||`${$}-label`,q=p&&_.jsx(C6,{labelElement:w,id:j,htmlFor:U,required:L,...P,...y,children:p},"label"),G=D&&_.jsx(S6,{...v,...P,size:(v==null?void 0:v.size)||P.size,id:(v==null?void 0:v.id)||B,children:g},"description"),te=_.jsx(A.Fragment,{children:d(E)},"input"),le=V&&A.createElement(T6,{...b,...P,size:(b==null?void 0:b.size)||P.size,key:"error",id:(b==null?void 0:b.id)||M},m),fe=h.map(de=>{switch(de){case"label":return q;case"input":return te;case"description":return G;case"error":return le;default:return null}});return _.jsx($Ye,{value:{getStyles:O,describedBy:W,inputId:U,labelId:j,...BYe(h,{hasDescription:D,hasError:V})},children:_.jsx(me,{ref:t,variant:c,size:l,mod:[{error:!!m},k],...O("root"),...R,children:fe})})});eK.classes=af;eK.displayName="@mantine/core/InputWrapper";const VYe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},HYe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":sn(t.size,"input-height"),"--input-fz":mo(t.size),"--input-radius":t.radius===void 0?void 0:Wr(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Te(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Te(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?sn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),vi=Gs((e,t)=>{const n=xe("Input",VYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:b,rightSectionWidth:w,rightSectionPointerEvents:E,leftSectionPointerEvents:x,variant:S,vars:C,pointer:I,multiline:k,radius:R,id:O,withAria:P,withErrorStyles:$,mod:L,inputSize:M,...B}=n,{styleProps:U,rest:V}=r_(B),D=TS(),z={offsetBottom:D==null?void 0:D.offsetBottom,offsetTop:D==null?void 0:D.offsetTop},W=ht({name:["Input",l],props:c||n,classes:af,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:z,rootSelector:"wrapper",vars:C,varsResolver:HYe}),j=P?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":D==null?void 0:D.describedBy,id:(D==null?void 0:D.inputId)||O}:{};return _.jsxs(me,{...W("wrapper"),...U,...d,mod:[{error:!!h&&$,pointer:I,disabled:p,multiline:k,"data-with-right-section":!!v,"data-with-left-section":!!m},L],variant:S,size:f,children:[m&&_.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),_.jsx(me,{component:"input",...V,...j,ref:t,required:u,mod:{disabled:p,error:!!h&&$},variant:S,__size:M,...W("input")}),v&&_.jsx("div",{...b,"data-position":"right",...W("section",{className:b==null?void 0:b.className,style:b==null?void 0:b.style}),children:v})]})});vi.classes=af;vi.Wrapper=eK;vi.Label=C6;vi.Error=T6;vi.Description=S6;vi.Placeholder=ZY;vi.displayName="@mantine/core/Input";function BEe(e,t,n){const r=xe(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:b,style:w,inputContainer:E,inputWrapperOrder:x,withAsterisk:S,variant:C,vars:I,mod:k,...R}=r,{styleProps:O,rest:P}=r_(R),$={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:b,style:w,inputContainer:E,inputWrapperOrder:x,withAsterisk:S,variant:C,id:v,mod:k,...y};return{...P,classNames:u,styles:l,unstyled:f,wrapperProps:{...$,...O},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:b,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:C,id:v}}}const qYe={__staticSelector:"InputBase",withAria:!0},uf=Gs((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=BEe("InputBase",qYe,e);return _.jsx(vi.Wrapper,{...r,children:_.jsx(vi,{...n,...i,ref:t})})});uf.classes={...vi.classes,...vi.Wrapper.classes};uf.displayName="@mantine/core/InputBase";const WYe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var UEe={root:"m_8bffd616"};const GYe={},Nt=Gs((e,t)=>{const n=xe("Flex",GYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=ht({name:"Flex",classes:UEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),v=vs(),b=Hk(),w=qwe({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:v,data:WYe});return _.jsxs(_.Fragment,{children:[w.hasResponsiveStyles&&_.jsx(n_,{selector:`.${b}`,styles:w.styles,media:w.media}),_.jsx(me,{ref:t,...y("root",{className:b,style:Qy(w.inlineStyles)}),...g})]})});Nt.classes=UEe;Nt.displayName="@mantine/core/Flex";function YYe(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function KYe({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=A.useRef(),[s,o]=A.useState(!1),[a,u]=A.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=A.useRef(),d=A.useRef();return A.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),A.useEffect(()=>{if(t){const h=p=>{YYe(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),QHe(()=>{Fwe()!=="test"&&o(!0)},20,{autoInvoke:!0}),JHe(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var zEe={root:"m_96b553a6"};const XYe={},QYe=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),tK=Me((e,t)=>{const n=xe("FloatingIndicator",XYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=ht({name:"FloatingIndicator",classes:zEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:QYe}),g=A.useRef(null),{initialized:y,hidden:v}=KYe({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),b=ys(t,g);return!l||!c?null:_.jsx(me,{ref:b,mod:[{initialized:y,hidden:v},d],...m("root"),...p})});tK.displayName="@mantine/core/FloatingIndicator";tK.classes=zEe;const[JYe,nK]=_o("Accordion component was not found in the tree");function rx({style:e,size:t=16,...n}){return _.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Te(t),height:Te(t),display:"block"},...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}rx.displayName="@mantine/core/AccordionChevron";const[ZYe,VEe]=_o("Accordion.Item component was not found in the tree");var Wk={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const eKe={},rK=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=xe("AccordionControl",eKe,e),{value:m}=VEe(),g=nK(),y=g.isItemActive(m),v=typeof g.order=="number",b=`h${g.order}`,w=_.jsxs(Is,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:y,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:E=>{l==null||l(E),g.onChange(m)},type:"button",disabled:d,"aria-expanded":y,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:yY({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[_.jsx(me,{component:"span",mod:{rotate:!g.disableChevronRotation&&y,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),_.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:f}),u&&_.jsx(me,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:u})]});return v?_.jsx(b,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:w}):w});rK.displayName="@mantine/core/AccordionControl";rK.classes=Wk;const tKe={},iK=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=xe("AccordionItem",tKe,e),c=nK();return _.jsx(ZYe,{value:{value:a},children:_.jsx(me,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});iK.displayName="@mantine/core/AccordionItem";iK.classes=Wk;const nKe={},sK=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=xe("AccordionPanel",nKe,e),{value:l}=VEe(),c=nK();return _.jsx(b6,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:_.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});sK.displayName="@mantine/core/AccordionPanel";sK.classes=Wk;const rKe={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:_.jsx(rx,{})},iKe=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:Te(n),"--accordion-radius":r===void 0?void 0:Wr(r)}});function ku(e){const t=xe("Accordion",rKe,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:y,chevronSize:v,order:b,chevron:w,variant:E,radius:x,...S}=t,C=Pa(h),[I,k]=ks({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),R=$=>Array.isArray(I)?I.includes($):$===I,O=$=>{const L=Array.isArray(I)?I.includes($)?I.filter(M=>M!==$):[...I,$]:$===I?null:$;k(L)},P=ht({name:"Accordion",classes:Wk,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:iKe});return _.jsx(JYe,{value:{isItemActive:R,onChange:O,getControlId:R$(`${C}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:R$(`${C}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:y,order:b,chevron:w,loop:p,getStyles:P,variant:E,unstyled:o},children:_.jsx(me,{...P("root"),id:C,...S,variant:E,"data-accordion":!0,children:u})})}const sKe=e=>e;ku.extend=sKe;ku.classes=Wk;ku.displayName="@mantine/core/Accordion";ku.Item=iK;ku.Panel=sK;ku.Control=rK;ku.Chevron=rx;var HEe={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const oKe={},aKe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:Wr(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},CS=Me((e,t)=>{const n=xe("Alert",oKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:b,...w}=n,E=ht({name:"Alert",classes:HEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:aKe}),x=Pa(h),S=f&&`${x}-title`||void 0,C=`${x}-body`;return _.jsx(me,{id:x,...E("root",{variant:v}),variant:v,ref:t,...w,role:"alert","aria-describedby":C,"aria-labelledby":S,children:_.jsxs("div",{...E("wrapper"),children:[p&&_.jsx("div",{...E("icon"),children:p}),_.jsxs("div",{...E("body"),children:[f&&_.jsx("div",{...E("title"),"data-with-close-button":m||void 0,children:_.jsx("span",{id:S,...E("label"),children:f})}),d&&_.jsx("div",{id:C,...E("message"),"data-variant":v,children:d})]}),m&&_.jsx(lg,{...E("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});CS.classes=HEe;CS.displayName="@mantine/core/Alert";var qEe={root:"m_b6d8b162"};function uKe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const lKe={inherit:!1},cKe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":mo(i),"--text-lh":Rwe(i),"--text-gradient":t==="gradient"?Sz(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?Fr(s,e):void 0}}),ze=Gs((e,t)=>{const n=xe("Text",lKe,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,...b}=n,w=ht({name:["Text",l],props:n,classes:qEe,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:cKe});return _.jsx(me,{...w("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":uKe(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,...b})});ze.classes=qEe;ze.displayName="@mantine/core/Text";var WEe={root:"m_849cf0da"};const fKe={underline:"hover"},o_=Gs((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=xe("Anchor",fKe,e);return _.jsx(ze,{component:"a",ref:t,className:ji({[WEe.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});o_.classes=WEe;o_.displayName="@mantine/core/Anchor";const[dKe,AS]=_o("AppShell was not found in tree");var tv={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const hKe={},oK=Me((e,t)=>{const n=xe("AppShellAside",hKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=AS();return h.disabled?null:_.jsx(me,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});oK.classes=tv;oK.displayName="@mantine/core/AppShellAside";const pKe={},aK=Me((e,t)=>{var p;const n=xe("AppShellFooter",pKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=AS();return h.disabled?null:_.jsx(me,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:ji({[p6.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});aK.classes=tv;aK.displayName="@mantine/core/AppShellFooter";const mKe={},uK=Me((e,t)=>{var p;const n=xe("AppShellHeader",mKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=AS();return h.disabled?null:_.jsx(me,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:ji({[p6.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});uK.classes=tv;uK.displayName="@mantine/core/AppShellHeader";const gKe={},lK=Me((e,t)=>{const n=xe("AppShellMain",gKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=AS();return _.jsx(me,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});lK.classes=tv;lK.displayName="@mantine/core/AppShellMain";function Gk(e){return typeof e=="object"?e.base:e}function Yk(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function Kk(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function yKe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),Yk(s)){const f=Te(Gk(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(Kk(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Te(s.base),e["--app-shell-aside-offset"]=Te(s.base)),ti(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=Te(s[f]),t[f]["--app-shell-aside-offset"]=Te(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=bY(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function vKe({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(Yk(r)){const o=Te(Gk(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}Kk(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Te(r.base),s&&(e["--app-shell-footer-offset"]=Te(r.base))),ti(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Te(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Te(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function bKe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(Yk(r)){const o=Te(Gk(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}Kk(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Te(r.base),s&&(e["--app-shell-header-offset"]=Te(r.base))),ti(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Te(r[o]),s&&(t[o]["--app-shell-header-offset"]=Te(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function _Ke({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),Yk(s)){const f=Te(Gk(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(Kk(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Te(s.base),e["--app-shell-navbar-offset"]=Te(s.base)),ti(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=Te(s[f]),t[f]["--app-shell-navbar-offset"]=Te(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=bY(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function h8(e){return Number(e)===0?"0px":fs(e)}function wKe({padding:e,baseStyles:t,minMediaStyles:n}){Yk(e)&&(t["--app-shell-padding"]=h8(Gk(e))),Kk(e)&&(e.base&&(t["--app-shell-padding"]=h8(e.base)),ti(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=h8(e[r]))}))}function EKe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};_Ke({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),yKe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),bKe({baseStyles:u,minMediaStyles:o,header:t}),vKe({baseStyles:u,minMediaStyles:o,footer:n}),wKe({baseStyles:u,minMediaStyles:o,padding:i});const l=iI(ti(o),s).map(d=>({query:`(min-width: ${k$(d.px)})`,styles:o[d.value]})),c=iI(ti(a),s).map(d=>({query:`(max-width: ${k$(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function xKe({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=vs(),o=Zy(),{media:a,baseStyles:u}=EKe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return _.jsx(n_,{media:a,styles:u,selector:o.cssVariablesSelector})}const SKe={},cK=Me((e,t)=>{const n=xe("AppShellNavbar",SKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=AS();return h.disabled?null:_.jsx(me,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});cK.classes=tv;cK.displayName="@mantine/core/AppShellNavbar";const TKe={},fK=Gs((e,t)=>{const n=xe("AppShellSection",TKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=AS();return _.jsx(me,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});fK.classes=tv;fK.displayName="@mantine/core/AppShellSection";function CKe({transitionDuration:e,disabled:t}){const[n,r]=A.useState(!0),i=A.useRef(),s=A.useRef();return $we("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),t_(()=>{A.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const AKe={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:cc("app")},IKe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),yi=Me((e,t)=>{const n=xe("AppShell",AKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:b,offsetScrollbars:w,mod:E,...x}=n,S=ht({name:"AppShell",classes:tv,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:IKe}),C=CKe({disabled:y,transitionDuration:d});return _.jsxs(dKe,{value:{getStyles:S,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:w},children:[_.jsx(xKe,{navbar:l,header:p,aside:v,footer:b,padding:f}),_.jsx(me,{ref:t,...S("root"),mod:[{resizing:C,layout:g,disabled:y},E],...x})]})});yi.classes=tv;yi.displayName="@mantine/core/AppShell";yi.Navbar=cK;yi.Header=uK;yi.Main=lK;yi.Aside=oK;yi.Footer=aK;yi.Section=fK;function GEe(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>GEe(t))}:e}function YEe(e){return e?e.map(t=>GEe(t)):[]}function dK(e){return e.reduce((t,n)=>"group"in n?{...t,...dK(n.items)}:(t[n.value]=n,t),{})}var il={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const kKe={error:null},RKe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":sn(t,"combobox-chevron-size")}}),hK=Me((e,t)=>{const n=xe("ComboboxChevron",kKe,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=ht({name:"ComboboxChevron",classes:il,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:RKe,rootSelector:"chevron"});return _.jsx(me,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:_.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});hK.classes=il;hK.displayName="@mantine/core/ComboboxChevron";const[NKe,lf]=_o("Combobox component was not found in tree"),KEe=A.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>_.jsx(lg,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));KEe.displayName="@mantine/core/ComboboxClearButton";const DKe={},pK=Me((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=xe("ComboboxDropdown",DKe,e),u=lf();return _.jsx(zo.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});pK.classes=il;pK.displayName="@mantine/core/ComboboxDropdown";const PKe={refProp:"ref"},XEe=Me((e,t)=>{const{children:n,refProp:r}=xe("ComboboxDropdownTarget",PKe,e);if(lf(),!Jy(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return _.jsx(zo.Target,{ref:t,refProp:r,children:n})});XEe.displayName="@mantine/core/ComboboxDropdownTarget";const OKe={},mK=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxEmpty",OKe,e),u=lf();return _.jsx(me,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});mK.classes=il;mK.displayName="@mantine/core/ComboboxEmpty";function gK({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=lf(),[a,u]=A.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const $Ke={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},QEe=Me((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=xe("ComboboxEventsTarget",$Ke,e);if(!Jy(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=lf(),f=gK({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return A.cloneElement(n,{...f,...l,[r]:ys(t,c.store.targetRef,n==null?void 0:n.ref)})});QEe.displayName="@mantine/core/ComboboxEventsTarget";const MKe={},yK=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxFooter",MKe,e),u=lf();return _.jsx(me,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a})});yK.classes=il;yK.displayName="@mantine/core/ComboboxFooter";const LKe={},vK=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=xe("ComboboxGroup",LKe,e),c=lf();return _.jsxs(me,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&_.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});vK.classes=il;vK.displayName="@mantine/core/ComboboxGroup";const FKe={},bK=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxHeader",FKe,e),u=lf();return _.jsx(me,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a})});bK.classes=il;bK.displayName="@mantine/core/ComboboxHeader";function JEe({value:e,valuesDivider:t=",",...n}){return _.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}JEe.displayName="@mantine/core/ComboboxHiddenInput";const jKe={},_K=Me((e,t)=>{const n=xe("ComboboxOption",jKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=lf(),v=A.useId(),b=l||v;return _.jsx(me,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:b,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:w=>{var E;h?w.preventDefault():((E=y.onOptionSubmit)==null||E.call(y,n.value,n),u==null||u(w))},onMouseDown:w=>{w.preventDefault(),f==null||f(w)},onMouseOver:w=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(w)}})});_K.classes=il;_K.displayName="@mantine/core/ComboboxOption";const BKe={},wK=Me((e,t)=>{const n=xe("ComboboxOptions",BKe,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=lf(),d=Pa(a);return A.useEffect(()=>{f.store.setListId(d)},[d]),_.jsx(me,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});wK.classes=il;wK.displayName="@mantine/core/ComboboxOptions";const UKe={withAriaAttributes:!0,withKeyboardNavigation:!0},EK=Me((e,t)=>{const n=xe("ComboboxSearch",UKe,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=lf(),h=d.getStyles("search"),p=gK({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return _.jsx(vi,{ref:ys(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});EK.classes=il;EK.displayName="@mantine/core/ComboboxSearch";const zKe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},ZEe=Me((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=xe("ComboboxTarget",zKe,e);if(!Jy(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=lf(),f=gK({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=A.cloneElement(n,{...f,...l});return _.jsx(zo.Target,{ref:ys(t,c.store.targetRef),children:d})});ZEe.displayName="@mantine/core/ComboboxTarget";function VKe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function HKe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function qKe(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function xK({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=ks({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=A.useRef(null),c=A.useRef(-1),f=A.useRef(null),d=A.useRef(null),h=A.useRef(-1),p=A.useRef(-1),m=A.useRef(-1),g=A.useCallback((M="unknown")=>{a||(u(!0),i==null||i(M))},[u,i,a]),y=A.useCallback((M="unknown")=>{a&&(u(!1),r==null||r(M))},[u,r,a]),v=A.useCallback((M="unknown")=>{a?y(M):g(M)},[y,g,a]),b=A.useCallback(()=>{const M=document.querySelector(`#${l.current} [data-combobox-selected]`);M==null||M.removeAttribute("data-combobox-selected"),M==null||M.removeAttribute("aria-selected")},[]),w=A.useCallback(M=>{const B=document.getElementById(l.current),U=B==null?void 0:B.querySelectorAll("[data-combobox-option]");if(!U)return null;const V=M>=U.length?0:M<0?U.length-1:M;return c.current=V,U!=null&&U[V]&&!U[V].hasAttribute("data-combobox-disabled")?(b(),U[V].setAttribute("data-combobox-selected","true"),U[V].setAttribute("aria-selected","true"),U[V].scrollIntoView({block:"nearest",behavior:o}),U[V].id):null},[o,b]),E=A.useCallback(()=>{const M=document.querySelector(`#${l.current} [data-combobox-active]`);if(M){const B=document.querySelectorAll(`#${l.current} [data-combobox-option]`),U=Array.from(B).findIndex(V=>V===M);return w(U)}return w(0)},[w]),x=A.useCallback(()=>w(HKe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),S=A.useCallback(()=>w(VKe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),C=A.useCallback(()=>w(qKe(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[w]),I=A.useCallback((M="selected",B)=>{m.current=window.setTimeout(()=>{var D;const U=document.querySelectorAll(`#${l.current} [data-combobox-option]`),V=Array.from(U).findIndex(z=>z.hasAttribute(`data-combobox-${M}`));c.current=V,B!=null&&B.scrollIntoView&&((D=U[V])==null||D.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),k=A.useCallback(()=>{c.current=-1,b()},[b]),R=A.useCallback(()=>{const M=document.querySelectorAll(`#${l.current} [data-combobox-option]`),B=M==null?void 0:M[c.current];B==null||B.click()},[]),O=A.useCallback(M=>{l.current=M},[]),P=A.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),$=A.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),L=A.useCallback(()=>c.current,[]);return A.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:L,selectOption:w,selectFirstOption:C,selectActiveOption:E,selectNextOption:x,selectPreviousOption:S,resetSelectedOption:k,updateSelectedOptionIndex:I,listId:l.current,setListId:O,clickSelectedOption:R,searchRef:f,focusSearchInput:P,targetRef:d,focusTarget:$}}const WKe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},GKe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":mo(t),"--combobox-option-padding":sn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Te(n),"--combobox-option-fz":mo(t),"--combobox-option-padding":sn(t,"combobox-option-padding")}});function Jn(e){const t=xe("Combobox",WKe,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=xK(),y=o||g,v=ht({name:h||"Combobox",classes:il,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:GKe}),b=()=>{l==null||l(),y.closeDropdown()};return _.jsx(NKe,{value:{getStyles:v,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:_.jsx(zo,{opened:y.dropdownOpened,...m,onClose:b,withRoles:!1,unstyled:i,children:s})})}const YKe=e=>e;Jn.extend=YKe;Jn.classes=il;Jn.displayName="@mantine/core/Combobox";Jn.Target=ZEe;Jn.Dropdown=pK;Jn.Options=wK;Jn.Option=_K;Jn.Search=EK;Jn.Empty=mK;Jn.Chevron=hK;Jn.Footer=yK;Jn.Header=bK;Jn.EventsTarget=QEe;Jn.DropdownTarget=XEe;Jn.Group=vK;Jn.ClearButton=KEe;Jn.HiddenInput=JEe;var exe={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const txe=exe,A6=A.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:b,...w},E)=>{const x=ht({name:e,props:t,className:n,style:y,classes:exe,classNames:r,styles:i,unstyled:s});return _.jsx(me,{...x("root"),ref:E,__vars:{"--label-fz":mo(d),"--label-lh":sn(d,"label-lh")},mod:[{"label-position":h},b],variant:g,size:d,...w,children:_.jsxs(me,{component:p,htmlFor:p==="label"?l:void 0,...x("body"),children:[o,_.jsxs("div",{...x("labelWrapper"),"data-disabled":c||void 0,children:[a&&_.jsx(me,{component:m,htmlFor:m==="label"?l:void 0,...x("label"),"data-disabled":c||void 0,children:a}),u&&_.jsx(vi.Description,{size:d,__inheritStyles:!1,...x("description"),children:u}),f&&typeof f!="boolean"&&_.jsx(vi.Error,{size:d,__inheritStyles:!1,...x("error"),children:f})]})]})})});A6.displayName="@mantine/core/InlineInput";const nxe=A.createContext(null),KKe=nxe.Provider,rxe=()=>A.useContext(nxe),[XKe,QKe]=bS();var ixe={card:"m_26775b0a"};const JKe={withBorder:!0},ZKe=(e,{radius:t})=>({card:{"--card-radius":Wr(t)}}),SK=Me((e,t)=>{const n=xe("CheckboxCard",JKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=ht({name:"CheckboxCard",classes:ixe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:ZKe,rootSelector:"card"}),g=rxe(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return _.jsx(XKe,{value:{checked:y},children:_.jsx(Is,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(d||"")}})})});SK.displayName="@mantine/core/CheckboxCard";SK.classes=ixe;function TK({children:e,role:t}){const n=TS();return n?_.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):_.jsx(_.Fragment,{children:e})}const eXe={},CK=Me((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=xe("CheckboxGroup",eXe,e),[c,f]=ks({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(KKe,{value:{value:c,onChange:d,size:s},children:_.jsx(vi.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:_.jsx(TK,{role:"group",children:a})})})});CK.classes=vi.Wrapper.classes;CK.displayName="@mantine/core/CheckboxGroup";function sxe({size:e,style:t,...n}){const r=e!==void 0?{width:Te(e),height:Te(e),...t}:t;return _.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:_.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function oxe({indeterminate:e,...t}){return e?_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:_.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):_.jsx(sxe,{...t})}var axe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const tXe={icon:oxe},nXe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=ip({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":sn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Wr(t),"--checkbox-color":s==="outline"?u:Fr(n,e),"--checkbox-icon-color":i?Fr(i,e):_S(o,e)?ev({color:n,theme:e,autoContrast:o}):void 0}}},AK=Me((e,t)=>{const n=xe("CheckboxIndicator",tXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,...b}=n,w=l,E=ht({name:"CheckboxIndicator",classes:axe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:nXe,rootSelector:"indicator"}),x=QKe(),S=typeof m=="boolean"||typeof c=="boolean"?m||c:(x==null?void 0:x.checked)||!1;return _.jsx(me,{ref:t,...E("indicator",{variant:y}),variant:y,mod:[{checked:S,disabled:v},g],...b,children:_.jsx(w,{indeterminate:c,...E("icon")})})});AK.displayName="@mantine/core/CheckboxIndicator";AK.classes=axe;var uxe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const rXe={labelPosition:"right",icon:oxe},iXe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=ip({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":sn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Wr(t),"--checkbox-color":s==="outline"?u:Fr(n,e),"--checkbox-icon-color":i?Fr(i,e):_S(o,e)?ev({color:n,theme:e,autoContrast:o}):void 0}}},Ol=Me((e,t)=>{const n=xe("Checkbox",rXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:b,disabled:w,variant:E,indeterminate:x,icon:S,rootRef:C,iconColor:I,onChange:k,autoContrast:R,mod:O,...P}=n,$=rxe(),L=d||($==null?void 0:$.size),M=S,B=ht({name:"Checkbox",props:n,classes:uxe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:iXe}),{styleProps:U,rest:V}=r_(P),D=Pa(f),z=$?{checked:$.value.includes(V.value),onChange:W=>{$.onChange(W),k==null||k(W)}}:{};return _.jsx(A6,{...B("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:D,size:L,labelPosition:y,label:c,description:v,error:b,disabled:w,classNames:r,styles:o,unstyled:a,"data-checked":z.checked||g||void 0,variant:E,ref:C,mod:O,...U,...p,children:_.jsxs(me,{...B("inner"),mod:{"data-label-position":y},children:[_.jsx(me,{component:"input",id:D,ref:t,checked:g,disabled:w,mod:{error:!!b,indeterminate:x},...B("input",{focusable:!0,variant:E}),onChange:k,...V,...z,type:"checkbox"}),_.jsx(M,{indeterminate:x,...B("icon")})]})})});Ol.classes={...uxe,...txe};Ol.displayName="@mantine/core/Checkbox";Ol.Group=CK;Ol.Indicator=AK;Ol.Card=SK;function ix(e){return"group"in e}function lxe({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;ix(o)&&i.push({group:o.group,items:lxe({options:o.items,search:t,limit:n-i.length})}),ix(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function sXe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function cxe(e,t=new Set){if(Array.isArray(e))for(const n of e)if(ix(n))cxe(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function oXe(e,t){return Array.isArray(e)?e.includes(t):e===t}function fxe({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!ix(e)){const a=oXe(n,e.value),u=t&&a&&_.jsx(sxe,{className:il.optionsDropdownCheckIcon}),l=_.jsxs(_.Fragment,{children:[r==="left"&&u,_.jsx("span",{children:e.label}),r==="right"&&u]});return _.jsx(Jn.Option,{value:e.value,disabled:e.disabled,className:ji({[il.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>_.jsx(fxe,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return _.jsx(Jn.Group,{label:e.group,children:o})}function dxe({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){cxe(e);const b=typeof i=="string"?(r||lxe)({options:e,search:u?i:"",limit:s??1/0}):e,w=sXe(b),E=b.map(x=>_.jsx(fxe,{data:x,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},ix(x)?x.group:x.value));return _.jsx(Jn.Dropdown,{hidden:t||n&&w,children:_.jsxs(Jn.Options,{labelledBy:p,"aria-label":y,children:[a?_.jsx(Om.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:E}):E,w&&d&&_.jsx(Jn.Empty,{children:d})]})})}var hxe={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const aXe={},uXe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":sn(s,"badge-height"),"--badge-padding-x":sn(s,"badge-padding-x"),"--badge-fz":sn(s,"badge-fz"),"--badge-radius":t===void 0?void 0:Wr(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?Fr(n,e):void 0}}},L0=Gs((e,t)=>{const n=xe("Badge",aXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:b,...w}=n,E=ht({name:"Badge",props:n,classes:hxe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:uXe});return _.jsxs(me,{variant:m,mod:[{block:g,circle:v},b],...E("root",{variant:m}),ref:t,...w,children:[d&&_.jsx("span",{...E("section"),"data-position":"left",children:d}),_.jsx("span",{...E("label"),children:p}),h&&_.jsx("span",{...E("section"),"data-position":"right",children:h})]})});L0.classes=hxe;L0.displayName="@mantine/core/Badge";var pxe={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const lXe={},cXe=(e,{color:t,size:n,transitionDuration:r,transitionTimingFunction:i})=>({root:{"--burger-color":t?Fr(t,e):void 0,"--burger-size":sn(n,"burger-size"),"--burger-transition-duration":r===void 0?void 0:`${r}ms`,"--burger-transition-timing-function":i}}),IK=Me((e,t)=>{const n=xe("Burger",lXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,children:c,transitionDuration:f,transitionTimingFunction:d,...h}=n,p=ht({name:"Burger",classes:pxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:cXe});return _.jsxs(Is,{...p("root"),ref:t,...h,children:[_.jsx(me,{mod:["reduce-motion",{opened:l}],...p("burger")}),c]})});IK.classes=pxe;IK.displayName="@mantine/core/Burger";var I6={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const Kue={orientation:"horizontal"},fXe=(e,{borderWidth:t})=>({group:{"--button-border-width":Te(t)}}),kK=Me((e,t)=>{const n=xe("ButtonGroup",Kue,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=xe("ButtonGroup",Kue,e),p=ht({name:"ButtonGroup",props:n,classes:I6,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:fXe,rootSelector:"group"});return _.jsx(me,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});kK.classes=I6;kK.displayName="@mantine/core/ButtonGroup";const dXe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Te(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},hXe={},pXe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":sn(s,"button-height"),"--button-padding-x":sn(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?mo(s.replace("compact-","")):mo(s),"--button-radius":t===void 0?void 0:Wr(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},dn=Gs((e,t)=>{const n=xe("Button",hXe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:b,"data-disabled":w,autoContrast:E,mod:x,...S}=n,C=ht({name:"Button",props:n,classes:I6,className:s,style:r,classNames:y,styles:v,unstyled:b,vars:i,varsResolver:pXe}),I=!!l,k=!!c;return _.jsxs(Is,{ref:t,...C("root",{active:!a&&!p&&!w}),unstyled:b,variant:d,disabled:a||p,mod:[{disabled:a||w,loading:p,block:f,"with-left-section":I,"with-right-section":k},x],...S,children:[_.jsx(ug,{mounted:!!p,transition:dXe,duration:150,children:R=>_.jsx(me,{component:"span",...C("loader",{style:R}),"aria-hidden":!0,children:_.jsx(op,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),_.jsxs("span",{...C("inner"),children:[l&&_.jsx(me,{component:"span",...C("section"),mod:{position:"left"},children:l}),_.jsx(me,{component:"span",mod:{loading:p},...C("label"),children:u}),c&&_.jsx(me,{component:"span",...C("section"),mod:{position:"right"},children:c})]})]})});dn.classes=I6;dn.displayName="@mantine/core/Button";dn.Group=kK;const[mXe,gXe]=_o("Card component was not found in tree");var RK={root:"m_e615b15f",section:"m_599a2148"};const yXe={},k6=Gs((e,t)=>{const n=xe("CardSection",yXe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=gXe();return _.jsx(me,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});k6.classes=RK;k6.displayName="@mantine/core/CardSection";const vXe={},bXe=(e,{padding:t})=>({root:{"--card-padding":fs(t)}}),a_=Gs((e,t)=>{const n=xe("Card",vXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=ht({name:"Card",props:n,classes:RK,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:bXe}),h=A.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===k6?A.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return _.jsx(mXe,{value:{getStyles:d},children:_.jsx(wS,{ref:t,unstyled:a,...d("root"),...f,children:p})})});a_.classes=RK;a_.displayName="@mantine/core/Card";a_.Section=k6;var mxe={root:"m_4451eb3a"};const _Xe={},Kc=Gs((e,t)=>{const n=xe("Center",_Xe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=ht({name:"Center",props:n,classes:mxe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return _.jsx(me,{ref:t,mod:[{inline:l},c],...d("root"),...f})});Kc.classes=mxe;Kc.displayName="@mantine/core/Center";var gxe={root:"m_b183c0a2"};const wXe={},EXe=(e,{color:t})=>({root:{"--code-bg":t?Fr(t,e):void 0}}),YA=Me((e,t)=>{const n=xe("Code",wXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,block:c,variant:f,mod:d,...h}=n,p=ht({name:"Code",props:n,classes:gxe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:EXe});return _.jsx(me,{component:c?"pre":"code",variant:f,ref:t,mod:[{block:c},d],...p("root"),...h,dir:"ltr"})});YA.classes=gxe;YA.displayName="@mantine/core/Code";var yxe={root:"m_7485cace"};const xXe={},SXe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:sn(t,"container-size")}}),Xc=Me((e,t)=>{const n=xe("Container",xXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=ht({name:"Container",classes:yxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:SXe});return _.jsx(me,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});Xc.classes=yxe;Xc.displayName="@mantine/core/Container";var vxe={root:"m_3eebeb36",label:"m_9e365f20"};const TXe={orientation:"horizontal"},CXe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Fr(t,e):void 0,"--divider-border-style":n,"--divider-size":sn(r,"divider-size")}}),sx=Me((e,t)=>{const n=xe("Divider",TXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=ht({name:"Divider",classes:vxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:CXe});return _.jsx(me,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&_.jsx(me,{component:"span",mod:{position:d},...m("label"),children:f})})});sx.classes=vxe;sx.displayName="@mantine/core/Divider";const[AXe,IS]=_o("Drawer component was not found in tree");var fg={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const IXe={},R6=Me((e,t)=>{const n=xe("DrawerBody",IXe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=IS();return _.jsx(YY,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});R6.classes=fg;R6.displayName="@mantine/core/DrawerBody";const kXe={},N6=Me((e,t)=>{const n=xe("DrawerCloseButton",kXe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=IS();return _.jsx(KY,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});N6.classes=fg;N6.displayName="@mantine/core/DrawerCloseButton";const RXe={},D6=Me((e,t)=>{const n=xe("DrawerContent",RXe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,radius:l,...c}=n,f=IS(),d=f.scrollAreaComponent||jEe;return _.jsx(FEe,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...c,radius:l||f.radius||0,children:_.jsx(d,{style:{height:"100vh"},children:u})})});D6.classes=fg;D6.displayName="@mantine/core/DrawerContent";const NXe={},P6=Me((e,t)=>{const n=xe("DrawerHeader",NXe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=IS();return _.jsx(XY,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});P6.classes=fg;P6.displayName="@mantine/core/DrawerHeader";const DXe={},O6=Me((e,t)=>{const n=xe("DrawerOverlay",DXe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=IS();return _.jsx(QY,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});O6.classes=fg;O6.displayName="@mantine/core/DrawerOverlay";function PXe(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function OXe(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const $Xe={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},MXe={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},LXe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:cc("modal"),position:"left"},FXe=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":sn(n,"drawer-size"),"--drawer-flex":OXe(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":PXe(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":Te(r)}}),$6=Me((e,t)=>{const n=xe("DrawerRoot",LXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,scrollAreaComponent:l,position:c,transitionProps:f,radius:d,...h}=n,{dir:p}=sp(),m=ht({name:"Drawer",classes:fg,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:FXe}),g=(p==="rtl"?MXe:$Xe)[c];return _.jsx(AXe,{value:{scrollAreaComponent:l,getStyles:m,radius:d},children:_.jsx(LEe,{ref:t,...m("root"),transitionProps:{transition:g,...f},unstyled:a,...h})})});$6.classes=fg;$6.displayName="@mantine/core/DrawerRoot";const jXe={},M6=Me((e,t)=>{const n=xe("DrawerTitle",jXe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=IS();return _.jsx(JY,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});M6.classes=fg;M6.displayName="@mantine/core/DrawerTitle";const BXe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:cc("modal"),withOverlay:!0,withCloseButton:!0},ap=Me((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,...u}=xe("Drawer",BXe,e),l=!!n||s;return _.jsxs($6,{ref:t,...u,children:[r&&_.jsx(O6,{...i}),_.jsxs(D6,{children:[l&&_.jsxs(P6,{children:[n&&_.jsx(M6,{children:n}),s&&_.jsx(N6,{...o})]}),_.jsx(R6,{children:a})]})]})});ap.classes=fg;ap.displayName="@mantine/core/Drawer";ap.Root=$6;ap.Overlay=O6;ap.Content=D6;ap.Body=R6;ap.Header=P6;ap.Title=M6;ap.CloseButton=N6;function UXe({open:e,close:t,openDelay:n,closeDelay:r}){const i=A.useRef(-1),s=A.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return A.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[zXe,bxe]=_o("Grid component was not found in tree"),Oz=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,Xue=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":Oz(e,t),Que=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},Jue=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function VXe({span:e,order:t,offset:n,selector:r}){var d;const i=vs(),s=bxe(),a=Hf(e)===void 0?12:Hf(e),u=Qy({"--col-order":(d=Hf(t))==null?void 0:d.toString(),"--col-flex-grow":Que(a,s.grow),"--col-flex-basis":Oz(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":Xue(a,s.columns,s.grow),"--col-offset":Jue(Hf(n),s.columns)}),l=ti(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=Que(e[p],s.grow),h[p]["--col-flex-basis"]=Oz(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=Xue(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=Jue(n[p],s.columns)),h},{}),f=iI(ti(l),i).filter(h=>ti(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return _.jsx(n_,{styles:u,media:f,selector:r})}var NK={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const HXe={span:12},DK=Me((e,t)=>{const n=xe("GridCol",HXe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=bxe(),h=Hk();return _.jsxs(_.Fragment,{children:[_.jsx(VXe,{selector:`.${h}`,span:u,order:l,offset:c}),_.jsx(me,{ref:t,...d.getStyles("col",{className:ji(i,h),style:s,classNames:r,styles:o}),...f})]})});DK.classes=NK;DK.displayName="@mantine/core/GridCol";function qXe({gutter:e,selector:t}){const n=vs(),r=Qy({"--grid-gutter":fs(Hf(e))}),i=ti(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=fs(e[u])),a),{}),o=iI(ti(i),n).filter(a=>ti(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return _.jsx(n_,{styles:r,media:o,selector:t})}const WXe={gutter:"md",grow:!1,columns:12},GXe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),ds=Me((e,t)=>{const n=xe("Grid",WXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=ht({name:"Grid",classes:NK,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:GXe}),y=Hk();return _.jsxs(zXe,{value:{getStyles:g,grow:l,columns:f},children:[_.jsx(qXe,{selector:`.${y}`,...n}),_.jsx(me,{ref:t,...g("root",{className:y}),...m,children:_.jsx("div",{...g("inner"),children:p})})]})});ds.classes=NK;ds.displayName="@mantine/core/Grid";ds.Col=DK;var _xe={root:"m_9e117634"};const YXe={},KXe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:Wr(t),"--image-object-fit":n}}),dg=Gs((e,t)=>{const n=xe("Image",YXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=A.useState(!c);A.useEffect(()=>y(!c),[c]);const v=ht({name:"Image",classes:_xe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:KXe});return g&&h?_.jsx(me,{component:"img",ref:t,src:h,...v("root"),onError:l,mod:["fallback",p],...m}):_.jsx(me,{component:"img",ref:t,...v("root"),src:c,onError:b=>{l==null||l(b),y(!0)},mod:p,...m})});dg.classes=_xe;dg.displayName="@mantine/core/Image";function $z(){return $z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$z.apply(null,arguments)}function XXe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var QXe=A.useLayoutEffect,JXe=function(t){var n=A.useRef(t);return QXe(function(){n.current=t}),n},Zue=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},ZXe=function(t,n){var r=A.useRef();return A.useCallback(function(i){t.current=i,r.current&&Zue(r.current,null),r.current=n,n&&Zue(n,i)},[n])},ele={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},eQe=function(t){Object.keys(ele).forEach(function(n){t.style.setProperty(n,ele[n],"important")})},tle=eQe,ja=null,nle=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function tQe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),ja||(ja=document.createElement("textarea"),ja.setAttribute("tabindex","-1"),ja.setAttribute("aria-hidden","true"),tle(ja)),ja.parentNode===null&&document.body.appendChild(ja);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;ja.style[h]=o[h]}),tle(ja),ja.value=t;var u=nle(ja,e);ja.value=t,u=nle(ja,e),ja.value="x";var l=ja.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var rle=function(){},nQe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},rQe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],iQe=!!document.documentElement.currentStyle,sQe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=nQe(rQe,n),i=r.boxSizing;if(i==="")return null;iQe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},oQe=sQe;function wxe(e,t,n){var r=JXe(n);A.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var aQe=function(t){wxe(window,"resize",t)},uQe=function(t){wxe(document.fonts,"loadingdone",t)},lQe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],cQe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?rle:o,u=t.onHeightChange,l=u===void 0?rle:u,c=XXe(t,lQe),f=c.value!==void 0,d=A.useRef(null),h=ZXe(d,n),p=A.useRef(0),m=A.useRef(),g=function(){var b=d.current,w=r&&m.current?m.current:oQe(b);if(w){m.current=w;var E=tQe(w,b.value||b.placeholder||"x",s,i),x=E[0],S=E[1];p.current!==x&&(p.current=x,b.style.setProperty("height",x+"px","important"),l(x,{rowHeight:S}))}},y=function(b){f||g(),a(b)};return A.useLayoutEffect(g),aQe(g),uQe(g),A.createElement("textarea",$z({},c,{onChange:y,ref:h}))},fQe=A.forwardRef(cQe);const dQe={},PK=Me((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=xe("Textarea",dQe,e),u=n&&Fwe()!=="test",l=u?{maxRows:r,minRows:i}:{};return _.jsx(uf,{component:u?fQe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});PK.classes=uf.classes;PK.displayName="@mantine/core/Textarea";const[hQe,pQe]=_o("List component was not found in tree");var OK={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const mQe={},$K=Me((e,t)=>{const n=xe("ListItem",mQe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=pQe(),h=u||d.icon,p={classNames:r,styles:o};return _.jsx(me,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:_.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&_.jsx("span",{...d.getStyles("itemIcon",p),children:h}),_.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});$K.classes=OK;$K.displayName="@mantine/core/ListItem";const gQe={type:"unordered"},yQe=(e,{size:t,spacing:n})=>({root:{"--list-fz":mo(t),"--list-lh":Rwe(t),"--list-spacing":fs(n)}}),td=Me((e,t)=>{const n=xe("List",gQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=ht({name:"List",classes:OK,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:yQe});return _.jsx(hQe,{value:{center:p,icon:d,getStyles:v},children:_.jsx(me,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});td.classes=OK;td.displayName="@mantine/core/List";td.Item=$K;var Exe={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const ile={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:cc("overlay")},vQe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),Xl=Me((e,t)=>{const n=xe("LoadingOverlay",ile,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=vs(),g=ht({name:"LoadingOverlay",classes:Exe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:vQe}),y={...ile.overlayProps,...f};return _.jsx(ug,{transition:"fade",...l,mounted:!!d,children:v=>_.jsxs(me,{...g("root",{style:v}),ref:t,...p,children:[_.jsx(op,{...g("loader"),unstyled:a,...c}),_.jsx(aI,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),_.jsx(aI,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});Xl.classes=Exe;Xl.displayName="@mantine/core/LoadingOverlay";const[bQe,Xk]=_o("Menu component was not found in the tree");var kS={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const _Qe={},MK=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("MenuDivider",_Qe,e),u=Xk();return _.jsx(me,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});MK.classes=kS;MK.displayName="@mantine/core/MenuDivider";const wQe={},LK=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=xe("MenuDropdown",wQe,e),f=A.useRef(null),d=Xk(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=um(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=um(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return _.jsxs(zo.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:ys(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[_.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});LK.classes=kS;LK.displayName="@mantine/core/MenuDropdown";const EQe={},FK=Gs((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=xe("MenuItem",EQe,e),p=Xk(),m=vs(),{dir:g}=sp(),y=A.useRef(),v=p.getItemIndex(y.current),b=h,w=um(b.onMouseLeave,()=>p.setHovered(-1)),E=um(b.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),x=um(b.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),S=um(b.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),C=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,I=a?ip({color:a,theme:m}):null;return _.jsxs(Is,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:S,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:ys(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===v?!0:void 0,onMouseEnter:E,onMouseLeave:w,onClick:x,onKeyDown:yY({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:b.onKeydown}),__vars:{"--menu-item-color":I!=null&&I.isThemeColor&&(I==null?void 0:I.shade)===void 0?`var(--mantine-color-${I.color}-6)`:C==null?void 0:C.color,"--menu-item-hover":C==null?void 0:C.hover},children:[l&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&_.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});FK.classes=kS;FK.displayName="@mantine/core/MenuItem";const xQe={},jK=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("MenuLabel",xQe,e),u=Xk();return _.jsx(me,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});jK.classes=kS;jK.displayName="@mantine/core/MenuLabel";const SQe={refProp:"ref"},xxe=A.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=xe("MenuTarget",SQe,e);if(!Jy(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=Xk(),o=um(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=um(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=um(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return _.jsx(zo.Target,{refProp:r,popupType:"menu",ref:t,...i,children:A.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});xxe.displayName="@mantine/core/MenuTarget";const TQe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Ou(e){const t=xe("Menu",TQe,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:b,menuItemTabIndex:w,keepMounted:E,...x}=t,S=ht({name:"Menu",classes:kS,props:t,classNames:m,styles:g,unstyled:y}),[C,{setHovered:I,resetHovered:k}]=IHe(),[R,O]=ks({value:s,defaultValue:o,finalValue:!1,onChange:u}),[P,$]=A.useState(!1),L=()=>{O(!1),$(!1),R&&(i==null||i())},M=()=>{O(!0),!R&&(r==null||r())},B=()=>{R?L():M()},{openDropdown:U,closeDropdown:V}=UXe({open:M,close:L,closeDelay:p,openDelay:h}),D=j=>AHe("[data-menu-item]","[data-menu-dropdown]",j),{resolvedClassNames:z,resolvedStyles:W}=og({classNames:m,styles:g,props:t});return jh(()=>{k()},[R]),_.jsx(bQe,{value:{getStyles:S,opened:R,toggleDropdown:B,getItemIndex:D,hovered:C,setHovered:I,openedViaClick:P,setOpenedViaClick:$,closeOnItemClick:l,closeDropdown:d==="click"?L:V,openDropdown:d==="click"?M:U,closeDropdownImmediately:L,loop:c,trigger:d,unstyled:y,menuItemTabIndex:w},children:_.jsx(zo,{...x,opened:R,onChange:B,defaultOpened:o,trapFocus:E?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:z,styles:W,unstyled:y,variant:v,keepMounted:E,children:n})})}Ou.extend=e=>e;Ou.classes=kS;Ou.displayName="@mantine/core/Menu";Ou.Item=FK;Ou.Label=jK;Ou.Dropdown=LK;Ou.Target=xxe;Ou.Divider=MK;const[CQe,RS]=_o("Modal component was not found in tree");var hg={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const AQe={},L6=Me((e,t)=>{const n=xe("ModalBody",AQe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=RS();return _.jsx(YY,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});L6.classes=hg;L6.displayName="@mantine/core/ModalBody";const IQe={},F6=Me((e,t)=>{const n=xe("ModalCloseButton",IQe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=RS();return _.jsx(KY,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});F6.classes=hg;F6.displayName="@mantine/core/ModalCloseButton";const kQe={},j6=Me((e,t)=>{const n=xe("ModalContent",kQe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=RS(),f=c.scrollAreaComponent||jEe;return _.jsx(FEe,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:_.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${Te(c.yOffset)} * 2))`},children:u})})});j6.classes=hg;j6.displayName="@mantine/core/ModalContent";const RQe={},B6=Me((e,t)=>{const n=xe("ModalHeader",RQe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=RS();return _.jsx(XY,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});B6.classes=hg;B6.displayName="@mantine/core/ModalHeader";const NQe={},U6=Me((e,t)=>{const n=xe("ModalOverlay",NQe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=RS();return _.jsx(QY,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});U6.classes=hg;U6.displayName="@mantine/core/ModalOverlay";const DQe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:cc("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},PQe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:Wr(t),"--modal-size":sn(n,"modal-size"),"--modal-y-offset":Te(r),"--modal-x-offset":Te(i)}}),z6=Me((e,t)=>{const n=xe("ModalRoot",DQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=ht({name:m,classes:hg,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:PQe});return _.jsx(CQe,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:_.jsx(LEe,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});z6.classes=hg;z6.displayName="@mantine/core/ModalRoot";const OQe={},V6=Me((e,t)=>{const n=xe("ModalTitle",OQe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=RS();return _.jsx(JY,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});V6.classes=hg;V6.displayName="@mantine/core/ModalTitle";const $Qe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:cc("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},es=Me((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=xe("Modal",$Qe,e),c=!!n||s;return _.jsxs(z6,{ref:t,radius:u,...l,children:[r&&_.jsx(U6,{...i}),_.jsxs(j6,{radius:u,children:[c&&_.jsxs(B6,{children:[n&&_.jsx(V6,{children:n}),s&&_.jsx(F6,{...o})]}),_.jsx(L6,{children:a})]})]})});es.classes=hg;es.displayName="@mantine/core/Modal";es.Root=z6;es.Overlay=U6;es.Content=j6;es.Body=L6;es.Header=B6;es.Title=V6;es.CloseButton=F6;const[MQe,BK]=bS(),[LQe,FQe]=bS();var H6={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const jQe={},BQe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?sn(t):sn(n,"pg-gap")}}),UK=Me((e,t)=>{const n=xe("PillGroup",jQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=BK(),h=(d==null?void 0:d.size)||l||void 0,p=ht({name:"PillGroup",classes:H6,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:BQe,stylesCtx:{size:h},rootSelector:"group"});return _.jsx(LQe,{value:{size:h,disabled:c},children:_.jsx(me,{ref:t,size:h,...p("group"),...f})})});UK.classes=H6;UK.displayName="@mantine/core/PillGroup";const UQe={variant:"default"},zQe=(e,{radius:t},{size:n})=>({root:{"--pill-fz":sn(n,"pill-fz"),"--pill-height":sn(n,"pill-height"),"--pill-radius":t===void 0?void 0:Wr(t)}}),uI=Me((e,t)=>{const n=xe("Pill",UQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,b=FQe(),w=BK(),E=m||(b==null?void 0:b.size)||void 0,x=(w==null?void 0:w.variant)==="filled"?"contrast":l||"default",S=ht({name:"Pill",classes:H6,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:zQe,stylesCtx:{size:E}});return _.jsxs(me,{component:"span",ref:t,variant:x,size:E,...S("root",{variant:x}),mod:[{"with-remove":f&&!g,disabled:g||(b==null?void 0:b.disabled)},y],...v,children:[_.jsx("span",{...S("label"),children:c}),f&&_.jsx(lg,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...S("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:C=>{var I;C.preventDefault(),C.stopPropagation(),(I=h==null?void 0:h.onMouseDown)==null||I.call(h,C)},onClick:C=>{var I;C.stopPropagation(),d==null||d(),(I=h==null?void 0:h.onClick)==null||I.call(h,C)}})]})});uI.classes=H6;uI.displayName="@mantine/core/Pill";uI.Group=UK;var Sxe={field:"m_45c4369d"};const VQe={type:"visible"},zK=Me((e,t)=>{const n=xe("PillsInputField",VQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=BK(),g=TS(),y=ht({name:"PillsInputField",classes:Sxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return _.jsx(me,{component:"input",ref:ys(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:v,mod:[{disabled:v,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:b=>!d&&b.stopPropagation()})});zK.classes=Sxe;zK.displayName="@mantine/core/PillsInputField";const HQe={},L$=Me((e,t)=>{const n=xe("PillsInput",HQe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=A.useRef();return _.jsx(MQe,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:_.jsx(uf,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});L$.displayName="@mantine/core/PillsInput";L$.Field=zK;function qQe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(ix(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const WQe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},VK=Me((e,t)=>{const n=xe("MultiSelect",WQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:b,selectFirstOptionOnChange:w,onOptionSubmit:E,comboboxProps:x,filter:S,limit:C,withScrollArea:I,maxDropdownHeight:k,searchValue:R,defaultSearchValue:O,onSearchChange:P,readOnly:$,disabled:L,onFocus:M,onBlur:B,onPaste:U,radius:V,rightSection:D,rightSectionWidth:z,rightSectionPointerEvents:W,rightSectionProps:j,leftSection:q,leftSectionWidth:G,leftSectionPointerEvents:te,leftSectionProps:le,inputContainer:fe,inputWrapperOrder:de,withAsterisk:ye,labelProps:Ie,descriptionProps:pe,errorProps:qe,wrapperProps:Ue,description:vt,label:it,error:_e,maxValues:ke,searchable:Ve,nothingFoundMessage:ct,withCheckIcon:Mt,checkIconPosition:Ye,hidePickedOptions:ve,withErrorStyles:pt,name:bt,form:ge,id:Ae,clearable:We,clearButtonProps:ut,hiddenInputProps:wt,placeholder:Bn,hiddenInputValuesDivider:kr,required:Un,mod:pr,renderOption:bn,onRemove:Rn,onClear:or,scrollAreaProps:ar,...Jo}=n,Ui=Pa(Ae),Nn=YEe(m),zi=dK(Nn),Rr=xK({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{b==null||b(),Rr.resetSelectedOption()}}),{styleProps:_s,rest:{type:kp,autoComplete:bl,...Pd}}=r_(Jo),[Cr,Pi]=ks({value:c,defaultValue:f,finalValue:[],onChange:d}),[ni,vu]=ks({value:R,defaultValue:O,finalValue:"",onChange:P}),Ma=ht({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:La,resolvedStyles:oe}=og({props:n,styles:o,classNames:r}),ee=ot=>{h==null||h(ot),ot.key===" "&&!Ve&&(ot.preventDefault(),Rr.toggleDropdown()),ot.key==="Backspace"&&ni.length===0&&Cr.length>0&&(Rn==null||Rn(Cr[Cr.length-1]),Pi(Cr.slice(0,Cr.length-1)))},ae=Cr.map((ot,Tt)=>{var Gt,Ln;return _.jsx(uI,{withRemoveButton:!$&&!((Gt=zi[ot])!=null&&Gt.disabled),onRemove:()=>{Pi(Cr.filter(zn=>ot!==zn)),Rn==null||Rn(ot)},unstyled:a,disabled:L,...Ma("pill"),children:((Ln=zi[ot])==null?void 0:Ln.label)||ot},`${ot}-${Tt}`)});A.useEffect(()=>{w&&Rr.selectFirstOption()},[w,Cr]);const Ce=We&&Cr.length>0&&!L&&!$&&_.jsx(Jn.ClearButton,{size:l,...ut,onClear:()=>{or==null||or(),Pi([]),vu("")}}),Se=qQe({data:Nn,value:Cr});return _.jsxs(_.Fragment,{children:[_.jsxs(Jn,{store:Rr,classNames:La,styles:oe,unstyled:a,size:l,readOnly:$,__staticSelector:"MultiSelect",onOptionSubmit:ot=>{E==null||E(ot),vu(""),Rr.updateSelectedOptionIndex("selected"),Cr.includes(zi[ot].value)?(Pi(Cr.filter(Tt=>Tt!==zi[ot].value)),Rn==null||Rn(zi[ot].value)):Cr.length<ke&&Pi([...Cr,zi[ot].value])},...x,children:[_.jsx(Jn.DropdownTarget,{children:_.jsx(L$,{..._s,__staticSelector:"MultiSelect",classNames:La,styles:oe,unstyled:a,size:l,className:i,style:s,variant:p,disabled:L,radius:V,rightSection:D||Ce||_.jsx(Jn.Chevron,{size:l,error:_e,unstyled:a}),rightSectionPointerEvents:W||(Ce?"all":"none"),rightSectionWidth:z,rightSectionProps:j,leftSection:q,leftSectionWidth:G,leftSectionPointerEvents:te,leftSectionProps:le,inputContainer:fe,inputWrapperOrder:de,withAsterisk:ye,labelProps:Ie,descriptionProps:pe,errorProps:qe,wrapperProps:Ue,description:vt,label:it,error:_e,multiline:!0,withErrorStyles:pt,__stylesApiProps:{...n,rightSectionPointerEvents:W||(Ce?"all":"none"),multiline:!0},pointer:!Ve,onClick:()=>Ve?Rr.openDropdown():Rr.toggleDropdown(),"data-expanded":Rr.dropdownOpened||void 0,id:Ui,required:Un,mod:pr,children:_.jsxs(uI.Group,{disabled:L,unstyled:a,...Ma("pillsList"),children:[ae,_.jsx(Jn.EventsTarget,{autoComplete:bl,children:_.jsx(L$.Field,{...Pd,ref:t,id:Ui,placeholder:Bn,type:!Ve&&!Bn?"hidden":"visible",...Ma("inputField"),unstyled:a,onFocus:ot=>{M==null||M(ot),Ve&&Rr.openDropdown()},onBlur:ot=>{B==null||B(ot),Rr.closeDropdown(),vu("")},onKeyDown:ee,value:ni,onChange:ot=>{vu(ot.currentTarget.value),Ve&&Rr.openDropdown(),w&&Rr.selectFirstOption()},disabled:L,readOnly:$||!Ve,pointer:!Ve})})]})})}),_.jsx(dxe,{data:ve?Se:Nn,hidden:$||L,filter:S,search:ni,limit:C,hiddenWhenEmpty:!Ve||!ct||ve&&Se.length===0&&ni.trim().length===0,withScrollArea:I,maxDropdownHeight:k,filterOptions:Ve,value:Cr,checkIconPosition:Ye,withCheckIcon:Mt,nothingFoundMessage:ct,unstyled:a,labelId:it?`${Ui}-label`:void 0,"aria-label":it?void 0:Jo["aria-label"],renderOption:bn,scrollAreaProps:ar})]}),_.jsx(Jn.HiddenInput,{name:bt,valuesDivider:kr,value:Cr,form:ge,disabled:L,...wt})]})});VK.classes={...uf.classes,...Jn.classes};VK.displayName="@mantine/core/MultiSelect";var Txe={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const GQe={},YQe=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":fs(r)}}},q6=Gs((e,t)=>{const n=xe("NavLink",GQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:v,description:b,disableRightSectionRotation:w,noWrap:E,childrenOffset:x,onKeyDown:S,autoContrast:C,mod:I,...k}=n,R=ht({name:"NavLink",props:n,classes:Txe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:YQe}),[O,P]=ks({value:l,defaultValue:c,finalValue:!1,onChange:f}),$=!!d,L=M=>{h==null||h(M),$&&(M.preventDefault(),P(!O))};return _.jsxs(_.Fragment,{children:[_.jsxs(Is,{...R("root"),component:"a",ref:t,onClick:L,onKeyDown:M=>{S==null||S(M),M.nativeEvent.code==="Space"&&$&&(M.preventDefault(),P(!O))},unstyled:a,mod:[{disabled:m,active:p,expanded:O},I],...k,children:[g&&_.jsx(me,{component:"span",...R("section"),mod:{position:"left"},children:g}),_.jsxs(me,{...R("body"),mod:{"no-wrap":E},children:[_.jsx(me,{component:"span",...R("label"),children:v}),_.jsx(me,{component:"span",mod:{active:p},...R("description"),children:b})]}),($||y)&&_.jsx(me,{...R("section"),component:"span",mod:{rotate:O&&!w,position:"right"},children:$?y||_.jsx(rx,{...R("chevron")}):y})]}),_.jsx(b6,{in:O,...R("collapse"),children:_.jsx("div",{...R("children"),children:d})})]})});q6.classes=Txe;q6.displayName="@mantine/core/NavLink";var Cxe={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const KQe={withCloseButton:!0},XQe=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:Wr(t),"--notification-color":n?Fr(n,e):void 0}}),HK=Me((e,t)=>{const n=xe("Notification",KQe,e),{className:r,color:i,radius:s,loading:o,withCloseButton:a,withBorder:u,title:l,icon:c,children:f,onClose:d,closeButtonProps:h,classNames:p,style:m,styles:g,unstyled:y,variant:v,vars:b,mod:w,...E}=n,x=ht({name:"Notification",classes:Cxe,props:n,className:r,style:m,classNames:p,styles:g,unstyled:y,vars:b,varsResolver:XQe});return _.jsxs(me,{...x("root"),mod:[{"data-with-icon":!!c||o,"data-with-border":u},w],ref:t,variant:v,...E,role:"alert",children:[c&&!o&&_.jsx("div",{...x("icon"),children:c}),o&&_.jsx(op,{size:28,color:i,...x("loader")}),_.jsxs("div",{...x("body"),children:[l&&_.jsx("div",{...x("title"),children:l}),_.jsx(me,{...x("description"),mod:{"data-with-title":!!l},children:f})]}),a&&_.jsx(lg,{iconSize:16,color:"gray",...h,unstyled:y,onClick:d,...x("closeButton")})]})});HK.classes=Cxe;HK.displayName="@mantine/core/Notification";function Axe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var lI;(function(e){e.event="event",e.props="prop"})(lI||(lI={}));function o0(){}function QQe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function cI(e){return!!(e||"").match(/\d/)}function gE(e){return e==null}function JQe(e){return typeof e=="number"&&isNaN(e)}function Ixe(e){return gE(e)||JQe(e)||typeof e=="number"&&!isFinite(e)}function kxe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function ZQe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function eJe(e,t,n){var r=ZQe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function tJe(e){var t=A.useRef(e);t.current=e;var n=A.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function qK(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function nJe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function Rxe(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function sle(e,t){return Array(t+1).join(e)}function Nxe(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+sle("0",Math.abs(o))+i:o>=a?i=i+sle("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function ole(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=qK(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=Rxe(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function c1(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var Dxe=QQe(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),rJe=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function iJe(e,t,n){return Math.min(Math.max(e,t),n)}function p8(e){return Math.max(e.selectionStart,e.selectionEnd)}function sJe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function oJe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function aJe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function uJe(e,t,n,r,i,s,o){o===void 0&&(o=aJe);var a=i.findIndex(function(w){return w}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var v=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var b=y===-1||d[y]===-1?0:d[y]+1;return b>v?v:r-b<v-r?b:v}function ale(e,t,n,r){var i=e.length;if(t=iJe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function lJe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(cI(e[n])||cI(e[n-1]));return t}function Pxe(e,t,n,r,i,s){s===void 0&&(s=o0);var o=tJe(function(p,m){var g,y;return Ixe(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?Nxe(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=A.useState(function(){return o(gE(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;gE(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return A.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function cJe(e){return e.replace(/[^0-9]/g,"")}function fJe(e){return e}function dJe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=fJe);var a=e.removeFormatting;a===void 0&&(a=cJe);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=o0);var h=e.onKeyDown;h===void 0&&(h=o0);var p=e.onMouseUp;p===void 0&&(p=o0);var m=e.onFocus;m===void 0&&(m=o0);var g=e.onBlur;g===void 0&&(g=o0);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=lJe);var b=e.isValidInputCharacter;b===void 0&&(b=cI);var w=e.isCharacterSame,E=Axe(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),x=Pxe(y,u,!!l,o,a,c),S=x[0],C=S.formattedValue,I=S.numAsString,k=x[1],R=A.useRef(),O=A.useRef({formattedValue:C,numAsString:I}),P=function(_e,ke){O.current={formattedValue:_e.formattedValue,numAsString:_e.value},k(_e,ke)},$=A.useState(!1),L=$[0],M=$[1],B=A.useRef(null),U=A.useRef({setCaretTimeout:null,focusTimeout:null});A.useEffect(function(){return M(!0),function(){clearTimeout(U.current.setCaretTimeout),clearTimeout(U.current.focusTimeout)}},[]);var V=o,D=function(_e,ke){var Ve=parseFloat(ke);return{formattedValue:_e,value:ke,floatValue:isNaN(Ve)?void 0:Ve}},z=function(_e,ke,Ve){_e.selectionStart===0&&_e.selectionEnd===_e.value.length||(c1(_e,ke),U.current.setCaretTimeout=setTimeout(function(){_e.value===Ve&&_e.selectionStart!==ke&&c1(_e,ke)},0))},W=function(_e,ke,Ve){return ale(_e,ke,v(_e),Ve)},j=function(_e,ke,Ve){var ct=v(ke),Mt=uJe(ke,C,_e,Ve,ct,b,w);return Mt=ale(ke,Mt,ct),Mt},q=function(_e){var ke=_e.formattedValue;ke===void 0&&(ke="");var Ve=_e.input,ct=_e.source,Mt=_e.event,Ye=_e.numAsString,ve;if(Ve){var pt=_e.inputValue||Ve.value,bt=p8(Ve);Ve.value=ke,ve=j(pt,ke,bt),ve!==void 0&&z(Ve,ve,ke)}ke!==C&&P(D(ke,Ye),{event:Mt,source:ct})};A.useEffect(function(){var _e=O.current,ke=_e.formattedValue,Ve=_e.numAsString;(C!==ke||I!==Ve)&&P(D(C,I),{event:void 0,source:lI.props})},[C,I]);var G=B.current?p8(B.current):void 0,te=typeof window<"u"?A.useLayoutEffect:A.useEffect;te(function(){var _e=B.current;if(C!==O.current.formattedValue&&_e){var ke=j(O.current.formattedValue,C,G);_e.value=C,z(_e,ke,C)}},[C]);var le=function(_e,ke,Ve){var ct=ke.target,Mt=R.current?rJe(R.current,ct.selectionEnd):Dxe(C,_e),Ye=Object.assign(Object.assign({},Mt),{lastValue:C}),ve=a(_e,Ye),pt=V(ve);if(ve=a(pt,void 0),f&&!f(D(pt,ve))){var bt=ke.target,ge=p8(bt),Ae=j(_e,C,ge);return bt.value=C,z(bt,Ae,C),!1}return q({formattedValue:pt,numAsString:ve,inputValue:_e,event:ke,source:Ve,input:ke.target}),!0},fe=function(_e,ke){ke===void 0&&(ke=0);var Ve=_e.selectionStart,ct=_e.selectionEnd;R.current={selectionStart:Ve,selectionEnd:ct+ke}},de=function(_e){var ke=_e.target,Ve=ke.value,ct=le(Ve,_e,lI.event);ct&&d(_e),R.current=void 0},ye=function(_e){var ke=_e.target,Ve=_e.key,ct=ke.selectionStart,Mt=ke.selectionEnd,Ye=ke.value;Ye===void 0&&(Ye="");var ve;Ve==="ArrowLeft"||Ve==="Backspace"?ve=Math.max(ct-1,0):Ve==="ArrowRight"?ve=Math.min(ct+1,Ye.length):Ve==="Delete"&&(ve=ct);var pt=0;Ve==="Delete"&&ct===Mt&&(pt=1);var bt=Ve==="ArrowLeft"||Ve==="ArrowRight";if(ve===void 0||ct!==Mt&&!bt){h(_e),fe(ke,pt);return}var ge=ve;if(bt){var Ae=Ve==="ArrowLeft"?"left":"right";ge=W(Ye,ve,Ae),ge!==ve&&_e.preventDefault()}else Ve==="Delete"&&!b(Ye[ve])?ge=W(Ye,ve,"right"):Ve==="Backspace"&&!b(Ye[ve])&&(ge=W(Ye,ve,"left"));ge!==ve&&z(ke,ge,Ye),h(_e),fe(ke,pt)},Ie=function(_e){var ke=_e.target,Ve=function(){var ct=ke.selectionStart,Mt=ke.selectionEnd,Ye=ke.value;if(Ye===void 0&&(Ye=""),ct===Mt){var ve=W(Ye,ct);ve!==ct&&z(ke,ve,Ye)}};Ve(),requestAnimationFrame(function(){Ve()}),p(_e),fe(ke)},pe=function(_e){_e.persist&&_e.persist();var ke=_e.target,Ve=_e.currentTarget;B.current=ke,U.current.focusTimeout=setTimeout(function(){var ct=ke.selectionStart,Mt=ke.selectionEnd,Ye=ke.value;Ye===void 0&&(Ye="");var ve=W(Ye,ct);ve!==ct&&!(ct===0&&Mt===Ye.length)&&z(ke,ve,Ye),m(Object.assign(Object.assign({},_e),{currentTarget:Ve}))},0)},qe=function(_e){B.current=null,clearTimeout(U.current.focusTimeout),clearTimeout(U.current.setCaretTimeout),g(_e)},Ue=L&&sJe()?"numeric":void 0,vt=Object.assign({inputMode:Ue},E,{type:t,value:C,onChange:de,onKeyDown:ye,onMouseUp:Ie,onFocus:pe,onBlur:qe});if(n==="text")return i?Pt.createElement(Pt.Fragment,null,i(C,E)||null):Pt.createElement("span",Object.assign({},E,{ref:s}),C);if(r){var it=r;return Pt.createElement(it,Object.assign({},vt,{ref:s}))}return Pt.createElement("input",Object.assign({},vt,{ref:s}))}function ule(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=W6(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=qK(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=Rxe(p,n,!!r)),l&&(h=eJe(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function W6(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function hJe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function pJe(e,t){return new RegExp("(^-)|[0-9]|"+kxe(e),"g")}function mJe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function gJe(e,t,n){var r;t===void 0&&(t=oJe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=W6(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(cI(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(B,U,V){var D=!1,z=!1;s.startsWith("-")?D=!1:B.startsWith("--")?(D=!1,z=!0):o.startsWith("-")&&B.length===o.length?D=!1:B[0]==="-"&&(D=!0);var W=D?1:0;return z&&(W=2),W&&(B=B.substring(W),U-=W,V-=W),{value:B,start:U,end:V,hasNegation:D}},v=y(e,c,f),b=v.hasNegation;r=v,e=r.value,c=r.start,f=r.end;var w=y(t.lastValue,u.start,u.end),E=w.start,x=w.end,S=w.value,C=e.substring(c,f);e.length&&S.length&&(E>S.length-o.length||x<s.length)&&!(C&&o.startsWith(C))&&(e=S);var I=0;e.startsWith(s)?I+=s.length:c<s.length&&(I=c),e=e.substring(I),f-=I;var k=e.length,R=e.length-o.length;e.endsWith(o)?k=R:(f>R||f>e.length-o.length)&&(k=f),e=e.substring(0,k),e=hJe(b?"-"+e:e,i),e=(e.match(pJe(p))||[]).join("");var O=e.indexOf(p);e=e.replace(new RegExp(kxe(p),"g"),function(B,U){return U===O?".":""});var P=qK(e,i),$=P.beforeDecimal,L=P.afterDecimal,M=P.addNegation;return l.end-l.start<u.end-u.start&&$===""&&m&&!parseFloat(L)&&(e=M?"-":""),e}function yJe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function vJe(e){var t=W6(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function bJe(e){e=vJe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=o0);var s=e.onBlur;s===void 0&&(s=o0);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=Axe(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=W6(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(M){return ule(M,e)},b=function(M,B){return gJe(M,B,e)},w=gE(f)?c:f,E=d??mJe(w,l,t);gE(f)?gE(c)||(E=E||typeof c=="number"):E=E||typeof f=="number";var x=function(M){return Ixe(M)?M:(typeof M=="number"&&(M=Nxe(M)),E&&typeof a=="number"?ole(M,a,!!u):M)},S=Pxe(x(f),x(c),!!E,v,b,h),C=S[0],I=C.numAsString,k=C.formattedValue,R=S[1],O=function(M){var B=M.target,U=M.key,V=B.selectionStart,D=B.selectionEnd,z=B.value;if(z===void 0&&(z=""),(U==="Backspace"||U==="Delete")&&D<l.length){M.preventDefault();return}if(V!==D){i(M);return}U==="Backspace"&&z[0]==="-"&&V===l.length+1&&n&&c1(B,1),a&&u&&(U==="Backspace"&&z[V-1]===g?(c1(B,V-1),M.preventDefault()):U==="Delete"&&z[V]===g&&M.preventDefault()),y!=null&&y.includes(U)&&z[V]===g&&c1(B,V+1);var W=o===!0?",":o;U==="Backspace"&&z[V-1]===W&&c1(B,V-1),U==="Delete"&&z[V]===W&&c1(B,V+1),i(M)},P=function(M){var B=I;if(B.match(/\d/g)||(B=""),r||(B=nJe(B)),u&&a&&(B=ole(B,a,u)),B!==I){var U=ule(B,e);R({formattedValue:U,value:B,floatValue:parseFloat(B)},{event:M,source:lI.event})}s(M)},$=function(M){return M===g?!0:cI(M)},L=function(M){var B=M.currentValue,U=M.lastValue,V=M.formattedValue,D=M.currentValueIndex,z=M.formattedValueIndex,W=B[D],j=V[z],q=Dxe(U,B),G=q.to;return D>=G.start&&D<G.end&&y&&y.includes(W)&&j===g?!0:W===j};return Object.assign(Object.assign({},p),{value:k,valueIsNumericString:!1,isValidInputCharacter:$,isCharacterSame:L,onValueChange:R,format:v,removeFormatting:b,getCaretBoundary:function(M){return yJe(M,e)},onKeyDown:O,onBlur:P})}function _Je(e){var t=bJe(e);return Pt.createElement(dJe,Object.assign({},t))}function lle({direction:e,style:t,...n}){return _.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var Mz={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const wJe=/^(0\.0*|-0(\.0*)?)$/,EJe=/^-?0\d+(\.\d+)?\.?$/;function xJe(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function cle(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const SJe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},TJe=(e,{size:t})=>({controls:{"--ni-chevron-size":sn(t,"ni-chevron-size")}}),WK=Me((e,t)=>{const n=xe("NumberInput",SJe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:b,allowDecimal:w,decimalScale:E,onKeyDown:x,onKeyDownCapture:S,handlersRef:C,startValue:I,disabled:k,rightSectionPointerEvents:R,allowNegative:O,readOnly:P,size:$,rightSectionWidth:L,stepHoldInterval:M,stepHoldDelay:B,allowLeadingZeros:U,withKeyboardEvents:V,trimLeadingZeroesOnBlur:D,...z}=n,W=ht({name:"NumberInput",classes:Mz,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:TJe}),{resolvedClassNames:j,resolvedStyles:q}=og({classNames:i,styles:s,props:n}),[G,te]=ks({value:c,defaultValue:f,onChange:u}),le=B!==void 0&&M!==void 0,fe=A.useRef(null),de=A.useRef(null),ye=A.useRef(0),Ie=(ve,pt)=>{pt.source==="event"&&te(xJe(ve.floatValue)&&!wJe.test(ve.value)&&!(U&&EJe.test(ve.value))?ve.floatValue:ve.value),l==null||l(ve,pt)},pe=ve=>{const pt=String(ve).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return pt?Math.max(0,(pt[1]?pt[1].length:0)-(pt[2]?+pt[2]:0)):0},qe=ve=>{fe.current&&typeof ve<"u"&&fe.current.setSelectionRange(ve,ve)},Ue=A.useRef();Ue.current=()=>{let ve;const pt=pe(G),bt=pe(p),ge=Math.max(pt,bt),Ae=10**ge;if(typeof G!="number"||Number.isNaN(G))ve=ph(I,h,d);else if(d!==void 0){const ut=(Math.round(G*Ae)+Math.round(p*Ae))/Ae;ve=ut<=d?ut:d}else ve=(Math.round(G*Ae)+Math.round(p*Ae))/Ae;const We=ve.toFixed(ge);te(parseFloat(We)),l==null||l({floatValue:parseFloat(We),formattedValue:We,value:We},{source:"increment"}),setTimeout(()=>{var ut;return qe((ut=fe.current)==null?void 0:ut.value.length)},0)};const vt=A.useRef();vt.current=()=>{let ve;const pt=h!==void 0?h:O?Number.MIN_SAFE_INTEGER:0,bt=pe(G),ge=pe(p),Ae=Math.max(bt,ge),We=10**Ae;if(typeof G!="number"||Number.isNaN(G))ve=ph(I,pt,d);else{const wt=(Math.round(G*We)-Math.round(p*We))/We;ve=pt!==void 0&&wt<pt?pt:wt}const ut=ve.toFixed(Ae);te(parseFloat(ut)),l==null||l({floatValue:parseFloat(ut),formattedValue:ut,value:ut},{source:"decrement"}),setTimeout(()=>{var wt;return qe((wt=fe.current)==null?void 0:wt.value.length)},0)};const it=ve=>{x==null||x(ve),!(P||!V)&&(ve.key==="ArrowUp"&&(ve.preventDefault(),Ue.current()),ve.key==="ArrowDown"&&(ve.preventDefault(),vt.current()))},_e=ve=>{if(S==null||S(ve),ve.key==="Backspace"){const pt=fe.current;pt.selectionStart===0&&pt.selectionStart===pt.selectionEnd&&(ve.preventDefault(),window.setTimeout(()=>qe(0),0))}};_Y(C,{increment:Ue.current,decrement:vt.current});const ke=ve=>{ve?Ue.current():vt.current(),ye.current+=1},Ve=ve=>{if(ke(ve),le){const pt=typeof M=="number"?M:M(ye.current);de.current=window.setTimeout(()=>Ve(ve),pt)}},ct=(ve,pt)=>{var bt;ve.preventDefault(),(bt=fe.current)==null||bt.focus(),ke(pt),le&&(de.current=window.setTimeout(()=>Ve(pt),B))},Mt=()=>{de.current&&window.clearTimeout(de.current),de.current=null,ye.current=0},Ye=_.jsxs("div",{...W("controls"),children:[_.jsx(Is,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof G=="number"&&d!==void 0&&G>=d,mod:{direction:"up"},onMouseDown:ve=>ve.preventDefault(),onPointerDown:ve=>{ct(ve,!0)},onPointerUp:Mt,onPointerLeave:Mt,children:_.jsx(lle,{direction:"up"})}),_.jsx(Is,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof G=="number"&&h!==void 0&&G<=h,mod:{direction:"down"},onMouseDown:ve=>ve.preventDefault(),onPointerDown:ve=>{ct(ve,!1)},onPointerUp:Mt,onPointerLeave:Mt,children:_.jsx(lle,{direction:"down"})})]});return _.jsx(uf,{component:_Je,allowNegative:O,className:ji(Mz.root,r),size:$,...z,readOnly:P,disabled:k,value:G,getInputRef:ys(t,fe),onValueChange:Ie,rightSection:m||P?g:g||Ye,classNames:j,styles:q,unstyled:o,__staticSelector:"NumberInput",decimalScale:w?E:0,onKeyDown:it,onKeyDownCapture:_e,rightSectionPointerEvents:R??(k?"none":void 0),rightSectionWidth:L??`var(--ni-right-section-width-${$||"sm"})`,allowLeadingZeros:U,onBlur:ve=>{if(b==null||b(ve),v==="blur"&&typeof G=="number"&&ph(G,h,d)!==G&&te(ph(G,h,d)),D&&typeof G=="string"){const pt=G.replace(/^0+/,""),bt=parseFloat(pt);te(Number.isNaN(bt)?pt:bt)}},isAllowed:ve=>v==="strict"?y?y(ve)&&cle(ve.floatValue,h,d):cle(ve.floatValue,h,d):y?y(ve):!0})});WK.classes={...uf.classes,...Mz};WK.displayName="@mantine/core/NumberInput";const[CJe,Oxe]=_o("Progress.Root component was not found in tree");var Qk={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const AJe={},GK=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ProgressLabel",AJe,e),u=Oxe();return _.jsx(me,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});GK.classes=Qk;GK.displayName="@mantine/core/ProgressLabel";const IJe={},kJe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":sn(t,"progress-size"),"--progress-radius":n===void 0?void 0:Wr(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),G6=Me((e,t)=>{const n=xe("ProgressRoot",IJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=ht({name:"Progress",classes:Qk,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:kJe});return _.jsx(CJe,{value:{getStyles:d,autoContrast:l},children:_.jsx(me,{ref:t,...d("root"),...f})})});G6.classes=Qk;G6.displayName="@mantine/core/ProgressRoot";const RJe={withAria:!0},Y6=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=xe("ProgressSection",RJe,e),p=Oxe(),m=vs(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return _.jsx(me,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":Fr(l,m),"--progress-label-color":_S(p.autoContrast,m)?ev({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});Y6.classes=Qk;Y6.displayName="@mantine/core/ProgressSection";const NJe={},NS=Me((e,t)=>{const n=xe("Progress",NJe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=og({classNames:i,styles:s,props:n});return _.jsx(G6,{ref:t,classNames:d,styles:h,vars:o,...f,children:_.jsx(Y6,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});NS.classes=Qk;NS.displayName="@mantine/core/Progress";NS.Section=Y6;NS.Root=G6;NS.Label=GK;const[DJe,$xe]=bS(),[PJe,OJe]=bS();var Mxe={card:"m_9dc8ae12"};const $Je={withBorder:!0},MJe=(e,{radius:t})=>({card:{"--card-radius":Wr(t)}}),YK=Me((e,t)=>{const n=xe("RadioCard",$Je,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=ht({name:"RadioCard",classes:Mxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:MJe,rootSelector:"card"}),{dir:v}=sp(),b=$xe(),w=typeof l=="boolean"?l:(b==null?void 0:b.value)===d||!1,E=p||(b==null?void 0:b.name),x=S=>{if(m==null||m(S),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(S.nativeEvent.code)){S.preventDefault();const C=Array.from(document.querySelectorAll(`[role="radio"][name="${E||"__mantine"}"]`)),I=C.findIndex(O=>O===S.target),k=I+1>=C.length?0:I+1,R=I-1<0?C.length-1:I-1;S.nativeEvent.code==="ArrowDown"&&(C[k].focus(),C[k].click()),S.nativeEvent.code==="ArrowUp"&&(C[R].focus(),C[R].click()),S.nativeEvent.code==="ArrowLeft"&&(C[v==="ltr"?R:k].focus(),C[v==="ltr"?R:k].click()),S.nativeEvent.code==="ArrowRight"&&(C[v==="ltr"?k:R].focus(),C[v==="ltr"?k:R].click())}};return _.jsx(PJe,{value:{checked:w},children:_.jsx(Is,{ref:t,mod:[{"with-border":f,checked:w},c],...y("card"),...g,role:"radio","aria-checked":w,name:E,onClick:S=>{h==null||h(S),b==null||b.onChange(d||"")},onKeyDown:x})})});YK.displayName="@mantine/core/RadioCard";YK.classes=Mxe;const LJe={},KK=Me((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=xe("RadioGroup",LJe,e),f=Pa(u),[d,h]=ks({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return _.jsx(DJe,{value:{value:d,onChange:p,size:s,name:f},children:_.jsx(vi.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:_.jsx(TK,{role:"radiogroup",children:a})})})});KK.classes=vi.Wrapper.classes;KK.displayName="@mantine/core/RadioGroup";function Lxe({size:e,style:t,...n}){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Te(e),height:Te(e),...t},"aria-hidden":!0,...n,children:_.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var Fxe={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const FJe={icon:Lxe},jJe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=ip({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":sn(r,"radio-size"),"--radio-radius":t===void 0?void 0:Wr(t),"--radio-color":s==="outline"?u:Fr(n,e),"--radio-icon-size":sn(r,"radio-icon-size"),"--radio-icon-color":i?Fr(i,e):_S(o,e)?ev({color:n,theme:e,autoContrast:o}):void 0}}},XK=Me((e,t)=>{const n=xe("RadioIndicator",FJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,b=l,w=ht({name:"RadioIndicator",classes:Fxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:jJe,rootSelector:"indicator"}),E=OJe(),x=typeof p=="boolean"?p:(E==null?void 0:E.checked)||!1;return _.jsx(me,{ref:t,...w("indicator",{variant:g}),variant:g,mod:[{checked:x,disabled:y},m],...v,children:_.jsx(b,{...w("icon")})})});XK.displayName="@mantine/core/RadioIndicator";XK.classes=Fxe;var jxe={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const BJe={labelPosition:"right"},UJe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=ip({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":sn(t,"radio-size"),"--radio-radius":n===void 0?void 0:Wr(n),"--radio-color":s==="outline"?u:Fr(r,e),"--radio-icon-color":i?Fr(i,e):_S(o,e)?ev({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":sn(t,"radio-icon-size")}}},db=Me((e,t)=>{const n=xe("Radio",BJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:b,icon:w=Lxe,rootRef:E,iconColor:x,onChange:S,mod:C,...I}=n,k=ht({name:"Radio",classes:jxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:UJe}),R=$xe(),O=(R==null?void 0:R.size)??c,P=n.size?c:O,{styleProps:$,rest:L}=r_(I),M=Pa(l),B=R?{checked:R.value===L.value,name:L.name??R.name,onChange:U=>{R.onChange(U),S==null||S(U)}}:{};return _.jsx(A6,{...k("root"),__staticSelector:"Radio",__stylesApiProps:n,id:M,size:P,labelPosition:d,label:f,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":B.checked||void 0,variant:y,ref:E,mod:C,...$,...b,children:_.jsxs(me,{...k("inner"),mod:{"label-position":d},children:[_.jsx(me,{...k("radio",{focusable:!0,variant:y}),onChange:S,...L,...B,component:"input",mod:{error:!!p},ref:t,id:M,disabled:v,type:"radio"}),_.jsx(w,{...k("icon"),"aria-hidden":!0})]})})});db.classes=jxe;db.displayName="@mantine/core/Radio";db.Group=KK;db.Card=YK;db.Indicator=XK;const zJe={duration:100,transition:"fade"};function VJe(e,t){return{...zJe,...t,...e}}function HJe({offset:e,position:t}){const[n,r]=A.useState(!1),i=A.useRef(),{x:s,y:o,elements:a,refs:u,update:l,placement:c}=HY({placement:t,middleware:[BY({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=A.useCallback(({clientX:p,clientY:m})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:m,left:p+f,top:m+d,right:p,bottom:m}}})},[a.reference]);return A.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const m=bm(u.floating.current);return m.forEach(g=>{g.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),m.forEach(g=>{g.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var K6={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const qJe={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:cc("popover")},WJe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Wr(t),"--tooltip-bg":n?Fr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),QK=Me((e,t)=>{const n=xe("TooltipFloating",qJe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,variant:b,vars:w,portalProps:E,...x}=n,S=vs(),C=ht({name:"TooltipFloating",props:n,classes:K6,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:w,varsResolver:WJe}),{handleMouseMove:I,x:k,y:R,opened:O,boundaryRef:P,floating:$,setOpened:L}=HJe({offset:p,position:m});if(!Jy(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const M=ys(P,r.ref,t),B=V=>{var D,z;(z=(D=r.props).onMouseEnter)==null||z.call(D,V),I(V),L(!0)},U=V=>{var D,z;(z=(D=r.props).onMouseLeave)==null||z.call(D,V),L(!1)};return _.jsxs(_.Fragment,{children:[_.jsx(SS,{...E,withinPortal:s,children:_.jsx(me,{...x,...C("tooltip",{style:{...CY(o,S),zIndex:y,display:!v&&O?"block":"none",top:(R&&Math.round(R))??"",left:(k&&Math.round(k))??""}}),variant:b,ref:$,mod:{multiline:g},children:h})}),A.cloneElement(r,{...r.props,[i]:M,onMouseEnter:B,onMouseLeave:U})]})});QK.classes=K6;QK.displayName="@mantine/core/TooltipFloating";const Bxe=A.createContext(!1),GJe=Bxe.Provider,YJe=()=>A.useContext(Bxe),KJe={openDelay:0,closeDelay:0};function Uxe(e){const{openDelay:t,closeDelay:n,children:r}=xe("TooltipGroup",KJe,e);return _.jsx(GJe,{value:!0,children:_.jsx(VGe,{delay:{open:t,close:n},children:r})})}Uxe.displayName="@mantine/core/TooltipGroup";function XJe(e){var x,S,C;const[t,n]=A.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=YJe(),o=Pa(),{delay:a,currentId:u,setCurrentId:l}=SEe(),c=A.useCallback(I=>{n(I),I&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=HY({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[bEe(e.offset),BY({padding:8}),Nz(),_Ee({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[Dz()]:[]]}),{getReferenceProps:b,getFloatingProps:w}=XGe([zGe(h,{enabled:(x=e.events)==null?void 0:x.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((S=e.events)!=null&&S.touch)}),KGe(h,{enabled:(C=e.events)==null?void 0:C.focus,visibleOnly:!0}),JGe(h,{role:"tooltip"}),GGe(h,{enabled:typeof e.opened>"u"}),HGe(h,{id:o})]);NEe({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),jh(()=>{var I;(I=e.onPositionChange)==null||I.call(e,g)},[g]);const E=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:w,getReferenceProps:b,isGroupPhase:E,opened:i,placement:g}}const fle={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:cc("popover"),positionDependencies:[]},QJe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Wr(t),"--tooltip-bg":n?Fr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),Ii=Me((e,t)=>{const n=xe("Tooltip",fle,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:m,unstyled:g,style:y,className:v,withArrow:b,arrowSize:w,arrowOffset:E,arrowRadius:x,arrowPosition:S,offset:C,transitionProps:I,multiline:k,events:R,zIndex:O,disabled:P,positionDependencies:$,onClick:L,onMouseEnter:M,onMouseLeave:B,inline:U,variant:V,keepMounted:D,vars:z,portalProps:W,mod:j,floatingStrategy:q,...G}=xe("Tooltip",fle,n),{dir:te}=sp(),le=A.useRef(null),fe=XJe({position:TEe(te,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:R,arrowRef:le,arrowOffset:E,offset:typeof C=="number"?C+(b?w/2:0):C,positionDependencies:[...$,r],inline:U,strategy:q}),de=ht({name:"Tooltip",props:n,classes:K6,className:v,style:y,classNames:p,styles:m,unstyled:g,rootSelector:"tooltip",vars:z,varsResolver:QJe});if(!Jy(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const ye=ys(fe.reference,r.ref,t),Ie=VJe(I,{duration:100,transition:"fade"});return _.jsxs(_.Fragment,{children:[_.jsx(SS,{...W,withinPortal:f,children:_.jsx(ug,{...Ie,keepMounted:D,mounted:!P&&!!fe.opened,duration:fe.isGroupPhase?10:Ie.duration,children:pe=>_.jsxs(me,{...G,variant:V,mod:[{multiline:k},j],...fe.getFloatingProps({ref:fe.floating,className:de("tooltip").className,style:{...de("tooltip").style,...pe,zIndex:O,top:fe.y??0,left:fe.x??0}}),children:[o,_.jsx(qY,{ref:le,arrowX:fe.arrowX,arrowY:fe.arrowY,visible:b,position:fe.placement,arrowSize:w,arrowOffset:E,arrowRadius:x,arrowPosition:S,...de("arrow")})]})})}),A.cloneElement(r,fe.getReferenceProps({onClick:L,onMouseEnter:M,onMouseLeave:B,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:ye,className:ji(v,r.props.className),...r.props}))]})});Ii.classes=K6;Ii.displayName="@mantine/core/Tooltip";Ii.Floating=QK;Ii.Group=Uxe;var zxe={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const JJe={withItemsBorders:!0},ZJe=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:Wr(t),"--sc-color":n?Fr(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":sn(i,"sc-padding"),"--sc-font-size":mo(i)}}),JK=Me((e,t)=>{var te,le;const n=xe("SegmentedControl",JJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:v,radius:b,color:w,transitionDuration:E,transitionTimingFunction:x,variant:S,autoContrast:C,withItemsBorders:I,mod:k,...R}=n,O=ht({name:"SegmentedControl",props:n,classes:zxe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:ZJe}),P=vs(),$=l.map(fe=>typeof fe=="string"?{label:fe,value:fe}:fe),L=ZHe(),[M,B]=A.useState(null),[U,V]=A.useState({}),D=(fe,de)=>{U[de]=fe,V(U)},[z,W]=ks({value:c,defaultValue:f,finalValue:Array.isArray(l)?((te=$.find(fe=>!fe.disabled))==null?void 0:te.value)??((le=l[0])==null?void 0:le.value)??null:null,onChange:d}),j=Pa(p),q=$.map(fe=>A.createElement(me,{...O("control"),mod:{active:z===fe.value,orientation:v},key:fe.value},A.createElement("input",{...O("input"),disabled:m||fe.disabled,type:"radio",name:j,value:fe.value,id:`${j}-${fe.value}`,checked:z===fe.value,onChange:()=>!g&&W(fe.value),"data-focus-ring":P.focusRing,key:`${fe.value}-input`}),A.createElement(me,{component:"label",...O("label"),mod:{active:z===fe.value&&!(m||fe.disabled),disabled:m||fe.disabled,"read-only":g},htmlFor:`${j}-${fe.value}`,ref:de=>D(de,fe.value),__vars:{"--sc-label-color":w!==void 0?ev({color:w,theme:P,autoContrast:C}):void 0},key:`${fe.value}-label`},_.jsx("span",{...O("innerLabel"),children:fe.label})))),G=ys(t,fe=>B(fe));return l.length===0?null:_.jsxs(me,{...O("root"),variant:S,size:h,ref:G,mod:[{"full-width":y,orientation:v,initialized:L,"with-items-borders":I},k],...R,role:"radiogroup",children:[typeof z=="string"&&_.jsx(tK,{target:U[z],parent:M,component:"span",transitionDuration:"var(--sc-transition-duration)",...O("indicator")}),q]})});JK.classes=zxe;JK.displayName="@mantine/core/SegmentedControl";const eZe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},Jk=Me((e,t)=>{const n=xe("Select",eZe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:b,comboboxProps:w,readOnly:E,disabled:x,filter:S,limit:C,withScrollArea:I,maxDropdownHeight:k,size:R,searchable:O,rightSection:P,checkIconPosition:$,withCheckIcon:L,nothingFoundMessage:M,name:B,form:U,searchValue:V,defaultSearchValue:D,onSearchChange:z,allowDeselect:W,error:j,rightSectionPointerEvents:q,id:G,clearable:te,clearButtonProps:le,hiddenInputProps:fe,renderOption:de,onClear:ye,autoComplete:Ie,scrollAreaProps:pe,...qe}=n,Ue=A.useMemo(()=>YEe(m),[m]),vt=A.useMemo(()=>dK(Ue),[Ue]),it=Pa(G),[_e,ke,Ve]=ks({value:g,defaultValue:y,finalValue:null,onChange:p}),ct=typeof _e=="string"?vt[_e]:void 0,[Mt,Ye]=ks({value:V,defaultValue:D,finalValue:ct?ct.label:"",onChange:z}),ve=xK({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),ve.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),ve.resetSelectedOption()}}),{resolvedClassNames:pt,resolvedStyles:bt}=og({props:n,styles:i,classNames:r});A.useEffect(()=>{v&&ve.selectFirstOption()},[v,_e]),A.useEffect(()=>{g===null&&Ye(""),typeof g=="string"&&ct&&Ye(ct.label)},[g,ct]);const ge=te&&!!_e&&!x&&!E&&_.jsx(Jn.ClearButton,{size:R,...le,onClear:()=>{ke(null,null),Ye(""),ye==null||ye()}});return _.jsxs(_.Fragment,{children:[_.jsxs(Jn,{store:ve,__staticSelector:"Select",classNames:pt,styles:bt,unstyled:s,readOnly:E,onOptionSubmit:Ae=>{b==null||b(Ae);const We=W&&vt[Ae].value===_e?null:vt[Ae],ut=We?We.value:null;ke(ut,We),!Ve&&Ye(typeof ut=="string"&&(We==null?void 0:We.label)||""),ve.closeDropdown()},size:R,...w,children:[_.jsx(Jn.Target,{targetType:O?"input":"button",autoComplete:Ie,children:_.jsx(uf,{id:it,ref:t,rightSection:P||ge||_.jsx(Jn.Chevron,{size:R,error:j,unstyled:s}),rightSectionPointerEvents:q||(ge?"all":"none"),...qe,size:R,__staticSelector:"Select",disabled:x,readOnly:E||!O,value:Mt,onChange:Ae=>{Ye(Ae.currentTarget.value),ve.openDropdown(),v&&ve.selectFirstOption()},onFocus:Ae=>{O&&ve.openDropdown(),f==null||f(Ae)},onBlur:Ae=>{var We;O&&ve.closeDropdown(),Ye(_e!=null&&((We=vt[_e])==null?void 0:We.label)||""),d==null||d(Ae)},onClick:Ae=>{O?ve.openDropdown():ve.toggleDropdown(),h==null||h(Ae)},classNames:pt,styles:bt,unstyled:s,pointer:!O,error:j})}),_.jsx(dxe,{data:Ue,hidden:E||x,filter:S,search:Mt,limit:C,hiddenWhenEmpty:!O||!M,withScrollArea:I,maxDropdownHeight:k,filterOptions:O&&(ct==null?void 0:ct.label)!==Mt,value:_e,checkIconPosition:$,withCheckIcon:L,nothingFoundMessage:M,unstyled:s,labelId:qe.label?`${it}-label`:void 0,"aria-label":qe.label?void 0:qe["aria-label"],renderOption:de,scrollAreaProps:pe})]}),_.jsx(Jn.HiddenInput,{value:_e,name:B,form:U,disabled:x,...fe})]})});Jk.classes={...uf.classes,...Jn.classes};Jk.displayName="@mantine/core/Select";function tZe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=vs(),s=t===void 0?e:t,o=Qy({"--sg-spacing-x":fs(Hf(e)),"--sg-spacing-y":fs(Hf(s)),"--sg-cols":(c=Hf(n))==null?void 0:c.toString()}),a=ti(i.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--sg-spacing-x"]=fs(e[d])),typeof s=="object"&&s[d]!==void 0&&(f[d]["--sg-spacing-y"]=fs(s[d])),typeof n=="object"&&n[d]!==void 0&&(f[d]["--sg-cols"]=n[d]),f),{}),l=iI(ti(a),i).filter(f=>ti(a[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:a[f.value]}));return _.jsx(n_,{styles:o,media:l,selector:r})}function m8(e){return typeof e=="object"&&e!==null?ti(e):[]}function nZe(e){return e.sort((t,n)=>rI(t)-rI(n))}function rZe({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...m8(e),...m8(t),...m8(n)]));return nZe(r)}function iZe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,s=Qy({"--sg-spacing-x":fs(Hf(e)),"--sg-spacing-y":fs(Hf(i)),"--sg-cols":(l=Hf(n))==null?void 0:l.toString()}),o=rZe({spacing:e,verticalSpacing:t,cols:n}),a=o.reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--sg-spacing-x"]=fs(e[f])),typeof i=="object"&&i[f]!==void 0&&(c[f]["--sg-spacing-y"]=fs(i[f])),typeof n=="object"&&n[f]!==void 0&&(c[f]["--sg-cols"]=n[f]),c),{}),u=o.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return _.jsx(n_,{styles:s,container:u,selector:r})}var Vxe={container:"m_925c2d2c",root:"m_2415a157"};const sZe={cols:1,spacing:"md",type:"media"},ZK=Me((e,t)=>{const n=xe("SimpleGrid",sZe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:f,type:d,...h}=n,p=ht({name:"SimpleGrid",classes:Vxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),m=Hk();return d==="container"?_.jsxs(_.Fragment,{children:[_.jsx(iZe,{...n,selector:`.${m}`}),_.jsx("div",{...p("container"),children:_.jsx(me,{ref:t,...p("root",{className:m}),...h})})]}):_.jsxs(_.Fragment,{children:[_.jsx(tZe,{...n,selector:`.${m}`}),_.jsx(me,{ref:t,...p("root",{className:m}),...h})]})});ZK.classes=Vxe;ZK.displayName="@mantine/core/SimpleGrid";const[Hxe,X6]=_o("SliderProvider was not found in tree"),eX=A.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=X6();return _.jsx(me,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});eX.displayName="@mantine/core/SliderRoot";const F$=A.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=X6(),[b,w]=A.useState(!1),E=l||s||b||h&&p;return _.jsxs(me,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{w(!0),typeof f=="function"&&f()},onBlur:()=>{w(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:x=>x.stopPropagation(),children:[m,_.jsx(ug,{mounted:i!=null&&!!E,transition:"fade",duration:0,...u,children:x=>_.jsx("div",{...v("label",{style:x}),children:i})})]})});F$.displayName="@mantine/core/SliderThumb";function j$({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function oZe({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function qxe({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=X6();if(!e)return null;const u=e.map((l,c)=>A.createElement(me,{...a("markWrapper"),__vars:{"--mark-offset":`${j$({value:l.value,min:t,max:n})}%`},key:c},_.jsx(me,{...a("mark"),mod:{filled:oZe({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&_.jsx("div",{...a("markLabel"),children:l.label})));return _.jsx("div",{children:u})}qxe.displayName="@mantine/core/SliderMarks";function tX({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=X6();return _.jsx(_.Fragment,{children:_.jsx(me,{...u("trackContainer"),mod:{disabled:r},...o,children:_.jsxs(me,{...u("track"),mod:{inverted:s,disabled:r},children:[_.jsx(me,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,_.jsx(qxe,{...a,offset:i,disabled:r,inverted:s})]})})})}tX.displayName="@mantine/core/SliderTrack";function Lz({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function Tc(e,t){return parseFloat(e.toFixed(t))}function Wxe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var Q6={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const aZe={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},uZe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":sn(t,"slider-size"),"--slider-color":n?Fr(n,e):void 0,"--slider-radius":i===void 0?void 0:Wr(i),"--slider-thumb-size":r!==void 0?Te(r):"calc(var(--slider-size) * 2)"}}),J6=Me((e,t)=>{const n=xe("Slider",aZe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,thumbChildren:E,disabled:x,unstyled:S,scale:C,inverted:I,className:k,style:R,vars:O,hiddenInputProps:P,...$}=n,L=ht({name:"Slider",props:n,classes:Q6,classNames:r,className:k,styles:i,style:R,vars:O,varsResolver:uZe,unstyled:S}),{dir:M}=sp(),[B,U]=A.useState(!1),[V,D]=ks({value:typeof s=="number"?ph(s,l,c):s,defaultValue:typeof h=="number"?ph(h,l,c):h,finalValue:ph(0,l,c),onChange:o}),z=A.useRef(V),W=A.useRef(),j=A.useRef(),q=j$({value:V,min:l,max:c}),G=C(V),te=typeof g=="function"?g(G):g,le=d??Wxe(f),fe=A.useCallback(({x:pe})=>{if(!x){const qe=Lz({value:pe,min:l,max:c,step:f,precision:le});D(qe),z.current=qe}},[x,l,c,f,le,D]),{ref:de,active:ye}=Lwe(fe,{onScrubEnd:()=>a==null?void 0:a(z.current)},M),Ie=pe=>{var qe,Ue,vt,it,_e,ke;if(!x)switch(pe.key){case"ArrowUp":{pe.preventDefault(),(qe=j.current)==null||qe.focus();const Ve=Tc(Math.min(Math.max(V+f,l),c),le);D(Ve),a==null||a(Ve);break}case"ArrowRight":{pe.preventDefault(),(Ue=j.current)==null||Ue.focus();const Ve=Tc(Math.min(Math.max(M==="rtl"?V-f:V+f,l),c),le);D(Ve),a==null||a(Ve);break}case"ArrowDown":{pe.preventDefault(),(vt=j.current)==null||vt.focus();const Ve=Tc(Math.min(Math.max(V-f,l),c),le);D(Ve),a==null||a(Ve);break}case"ArrowLeft":{pe.preventDefault(),(it=j.current)==null||it.focus();const Ve=Tc(Math.min(Math.max(M==="rtl"?V+f:V-f,l),c),le);D(Ve),a==null||a(Ve);break}case"Home":{pe.preventDefault(),(_e=j.current)==null||_e.focus(),D(l),a==null||a(l);break}case"End":{pe.preventDefault(),(ke=j.current)==null||ke.focus(),D(c),a==null||a(c);break}}};return _.jsx(Hxe,{value:{getStyles:L},children:_.jsxs(eX,{...$,ref:ys(t,W),onKeyDownCapture:Ie,onMouseDownCapture:()=>{var pe;return(pe=W.current)==null?void 0:pe.focus()},size:u,disabled:x,children:[_.jsx(tX,{inverted:I,offset:0,filled:q,marks:m,min:l,max:c,value:G,disabled:x,containerProps:{ref:de,onMouseEnter:w?()=>U(!0):void 0,onMouseLeave:w?()=>U(!1):void 0},children:_.jsx(F$,{max:c,min:l,value:G,position:q,dragging:ye,label:te,ref:j,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,isHovered:B,disabled:x,children:E})}),_.jsx("input",{type:"hidden",name:p,value:G,...P})]})})});J6.classes=Q6;J6.displayName="@mantine/core/Slider";function lZe(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const cZe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":sn(t,"slider-size"),"--slider-color":n?Fr(n,e):void 0,"--slider-radius":i===void 0?void 0:Wr(i),"--slider-thumb-size":r!==void 0?Te(r):"calc(var(--slider-size) * 2)"}}),fZe={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},B$=Me((e,t)=>{const n=xe("RangeSlider",fZe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransitionProps:b,labelAlwaysOn:w,thumbFromLabel:E,thumbToLabel:x,showLabelOnHover:S,thumbChildren:C,disabled:I,unstyled:k,scale:R,inverted:O,className:P,style:$,vars:L,hiddenInputProps:M,...B}=n,U=ht({name:"Slider",props:n,classes:Q6,classNames:r,className:P,styles:i,style:$,vars:L,varsResolver:cZe,unstyled:k}),{dir:V}=sp(),[D,z]=A.useState(-1),[W,j]=A.useState(!1),[q,G]=ks({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),te=A.useRef(q),le=A.useRef([]),fe=A.useRef(void 0),de=[j$({value:q[0],min:l,max:c}),j$({value:q[1],min:l,max:c})],ye=p??Wxe(h),Ie=Ye=>{G(Ye),te.current=Ye};A.useEffect(()=>{Array.isArray(s)&&(te.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const pe=(Ye,ve,pt)=>{const bt=[...te.current];bt[ve]=Ye,ve===0&&(Ye>bt[1]-(f-1e-9)&&(bt[1]=Math.min(Ye+f,c)),Ye>(c-(f-1e-9)||l)&&(bt[ve]=te.current[ve]),bt[1]-Ye>d&&(bt[1]=Ye+d)),ve===1&&(Ye<bt[0]+f&&(bt[0]=Math.max(Ye-f,l)),Ye<bt[0]+f&&(bt[ve]=te.current[ve]),Ye-bt[0]>d&&(bt[0]=Ye-d)),bt[0]=Tc(bt[0],ye),bt[1]=Tc(bt[1],ye),Ie(bt),pt&&(a==null||a(te.current))},qe=Ye=>{if(!I){const ve=Lz({value:Ye,min:l,max:c,step:h,precision:ye});pe(ve,fe.current,!1)}},{ref:Ue,active:vt}=Lwe(({x:Ye})=>qe(Ye),{onScrubEnd:()=>a==null?void 0:a(te.current)},V);function it(Ye){fe.current=Ye}const _e=Ye=>{Ue.current.focus();const ve=Ue.current.getBoundingClientRect(),pt=lZe(Ye.nativeEvent),bt=Lz({value:pt-ve.left,max:c,min:l,step:h,containerWidth:ve.width}),ge=Math.abs(q[0]-bt)>Math.abs(q[1]-bt)?1:0,Ae=V==="ltr"?ge:ge===1?0:1;fe.current=Ae},ke=()=>D!==1&&D!==0?(z(0),0):D,Ve=Ye=>{if(!I)switch(Ye.key){case"ArrowUp":{Ye.preventDefault();const ve=ke();le.current[ve].focus(),pe(Tc(Math.min(Math.max(te.current[ve]+h,l),c),ye),ve,!0);break}case"ArrowRight":{Ye.preventDefault();const ve=ke();le.current[ve].focus(),pe(Tc(Math.min(Math.max(V==="rtl"?te.current[ve]-h:te.current[ve]+h,l),c),ye),ve,!0);break}case"ArrowDown":{Ye.preventDefault();const ve=ke();le.current[ve].focus(),pe(Tc(Math.min(Math.max(te.current[ve]-h,l),c),ye),ve,!0);break}case"ArrowLeft":{Ye.preventDefault();const ve=ke();le.current[ve].focus(),pe(Tc(Math.min(Math.max(V==="rtl"?te.current[ve]+h:te.current[ve]-h,l),c),ye),ve,!0);break}}},ct={max:c,min:l,size:u,labelTransitionProps:b,labelAlwaysOn:w,onBlur:()=>z(-1)},Mt=Array.isArray(C);return _.jsx(Hxe,{value:{getStyles:U},children:_.jsxs(eX,{...B,size:u,ref:t,disabled:I,children:[_.jsxs(tX,{offset:de[0],marksOffset:q[0],filled:de[1]-de[0],marks:y,inverted:O,min:l,max:c,value:q[1],disabled:I,containerProps:{ref:Ue,onMouseEnter:S?()=>j(!0):void 0,onMouseLeave:S?()=>j(!1):void 0,onTouchStartCapture:_e,onTouchEndCapture:()=>{fe.current=-1},onMouseDownCapture:_e,onMouseUpCapture:()=>{fe.current=-1},onKeyDownCapture:Ve},children:[_.jsx(F$,{...ct,value:R(q[0]),position:de[0],dragging:vt,label:typeof v=="function"?v(Tc(R(q[0]),ye)):v,ref:Ye=>{le.current[0]=Ye},thumbLabel:E,onMouseDown:()=>it(0),onFocus:()=>z(0),showLabelOnHover:S,isHovered:W,disabled:I,children:Mt?C[0]:C}),_.jsx(F$,{...ct,thumbLabel:x,value:R(q[1]),position:de[1],dragging:vt,label:typeof v=="function"?v(Tc(R(q[1]),ye)):v,ref:Ye=>{le.current[1]=Ye},onMouseDown:()=>it(1),onFocus:()=>z(1),showLabelOnHover:S,isHovered:W,disabled:I,children:Mt?C[1]:C})]}),_.jsx("input",{type:"hidden",name:`${g}_from`,value:q[0],...M}),_.jsx("input",{type:"hidden",name:`${g}_to`,value:q[1],...M})]})})});B$.classes=Q6;B$.displayName="@mantine/core/RangeSlider";const dZe={},zl=Me((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=xe("Space",dZe,e);return _.jsx(me,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});zl.displayName="@mantine/core/Space";var Gxe={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const hZe={maxHeight:100,initialState:!1},pZe=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),nX=Me((e,t)=>{const n=xe("Spoiler",hZe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,...y}=n,v=ht({name:"Spoiler",classes:Gxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:pZe}),b=Pa(g),w=`${b}-region`,[E,x]=A.useState(l),{ref:S,height:C}=WHe(),I=E?f:d,k=I!==null&&c<C;return _.jsxs(me,{...v("root"),id:b,ref:t,"data-has-spoiler":k||void 0,...y,children:[k&&_.jsx(o_,{component:"button",type:"button",ref:p,onClick:()=>x(R=>!R),"aria-expanded":E,"aria-controls":w,...v("control"),children:I}),_.jsx("div",{...v("content",{style:{maxHeight:E?C?Te(C):void 0:Te(c)}}),"data-reduce-motion":!0,role:"region",id:w,children:_.jsx("div",{ref:S,children:h})})]})});nX.classes=Gxe;nX.displayName="@mantine/core/Spoiler";var Yxe={root:"m_6d731127"};const mZe={gap:"md",align:"stretch",justify:"flex-start"},gZe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":fs(t),"--stack-align":n,"--stack-justify":r}}),mh=Me((e,t)=>{const n=xe("Stack",mZe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=ht({name:"Stack",props:n,classes:Yxe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:gZe});return _.jsx(me,{ref:t,...p("root"),variant:d,...h})});mh.classes=Yxe;mh.displayName="@mantine/core/Stack";const Kxe=A.createContext(null),yZe=Kxe.Provider,vZe=()=>A.useContext(Kxe),bZe={},rX=Me((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=xe("SwitchGroup",bZe,e),[c,f]=ks({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(yZe,{value:{value:c,onChange:d,size:s},children:_.jsx(vi.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:_.jsx(TK,{role:"group",children:a})})})});rX.classes=vi.Wrapper.classes;rX.displayName="@mantine/core/SwitchGroup";var Xxe={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const _Ze={labelPosition:"right"},wZe=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Wr(t),"--switch-height":sn(r,"switch-height"),"--switch-width":sn(r,"switch-width"),"--switch-thumb-size":sn(r,"switch-thumb-size"),"--switch-label-font-size":sn(r,"switch-label-font-size"),"--switch-track-label-padding":sn(r,"switch-track-label-padding"),"--switch-color":n?Fr(n,e):void 0}}),yE=Me((e,t)=>{const n=xe("Switch",_Ze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,children:y,thumbIcon:v,checked:b,defaultChecked:w,onChange:E,labelPosition:x,description:S,error:C,disabled:I,variant:k,rootRef:R,mod:O,...P}=n,$=vZe(),L=p||($==null?void 0:$.size),M=ht({name:"Switch",props:n,classes:Xxe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:wZe}),{styleProps:B,rest:U}=r_(P),V=Pa(h),D=$?{checked:$.value.includes(U.value),onChange:$.onChange}:{},[z,W]=ks({value:D.checked??b,defaultValue:w,finalValue:!1});return _.jsxs(A6,{...M("root"),__staticSelector:"Switch",__stylesApiProps:n,id:V,size:L,labelPosition:x,label:c,description:S,error:C,disabled:I,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":D.checked||void 0,variant:k,ref:R,mod:O,...B,...g,children:[_.jsx("input",{...U,disabled:I,checked:z,onChange:j=>{var q;$?(q=D.onChange)==null||q.call(D,j):E==null||E(j),W(j.currentTarget.checked)},id:V,ref:t,type:"checkbox",role:"switch",...M("input")}),_.jsxs(me,{"aria-hidden":"true",mod:{error:C,"label-position":x},...M("track"),children:[_.jsx(me,{component:"span",mod:"reduce-motion",...M("thumb"),children:v}),_.jsx("span",{...M("trackLabel"),children:z?d:f})]})]})});yE.classes={...Xxe,...txe};yE.displayName="@mantine/core/Switch";yE.Group=rX;const[EZe,xZe]=_o("Table component was not found in the tree");var Zk={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function SZe(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function u_(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=Me((i,s)=>{const o=xe(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=xZe();return _.jsx(me,{component:e,ref:s,...SZe(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=Zk,r}const Fz=u_("th",{columnBorder:!0}),Qxe=u_("td",{columnBorder:!0}),eO=u_("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),Jxe=u_("thead",{stickyHeader:!0}),Zxe=u_("tbody"),eSe=u_("tfoot"),tSe=u_("caption",{captionSide:!0});function iX({data:e}){return _.jsxs(_.Fragment,{children:[e.caption&&_.jsx(tSe,{children:e.caption}),e.head&&_.jsx(Jxe,{children:_.jsx(eO,{children:e.head.map((t,n)=>_.jsx(Fz,{children:t},n))})}),e.body&&_.jsx(Zxe,{children:e.body.map((t,n)=>_.jsx(eO,{children:t.map((r,i)=>_.jsx(Qxe,{children:r},i))},n))}),e.foot&&_.jsx(eSe,{children:_.jsx(eO,{children:e.foot.map((t,n)=>_.jsx(Fz,{children:t},n))})})]})}iX.displayName="@mantine/core/TableDataRenderer";const TZe={type:"scrollarea"},CZe=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":Te(t),"--table-overflow":n==="native"?"auto":void 0}}),sX=Me((e,t)=>{const n=xe("TableScrollContainer",TZe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=ht({name:"TableScrollContainer",classes:Zk,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:CZe,rootSelector:"scrollContainer"});return _.jsx(me,{component:f==="scrollarea"?Om:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:_.jsx("div",{...h("scrollContainerInner"),children:l})})});sX.classes=Zk;sX.displayName="@mantine/core/TableScrollContainer";const AZe={withRowBorders:!0,verticalSpacing:7},IZe=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":fs(r),"--table-vertical-spacing":fs(i),"--table-border-color":s?Fr(s,e):void 0,"--table-striped-color":u&&o?Fr(o,e):void 0,"--table-highlight-on-hover-color":l&&a?Fr(a,e):void 0,"--table-sticky-header-offset":f?Te(c):void 0}}),Yt=Me((e,t)=>{const n=xe("Table",AZe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:b,layout:w,variant:E,data:x,children:S,stickyHeader:C,stickyHeaderOffset:I,mod:k,...R}=n,O=ht({name:"Table",props:n,className:i,style:s,classes:Zk,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:IZe});return _.jsx(EZe,{value:{getStyles:O,stickyHeader:C,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:_.jsx(me,{component:"table",variant:E,ref:t,mod:[{"data-with-table-border":v},k],...O("table"),...R,children:S||!!x&&_.jsx(iX,{data:x})})})});Yt.classes=Zk;Yt.displayName="@mantine/core/Table";Yt.Td=Qxe;Yt.Th=Fz;Yt.Tr=eO;Yt.Thead=Jxe;Yt.Tbody=Zxe;Yt.Tfoot=eSe;Yt.Caption=tSe;Yt.ScrollContainer=sX;Yt.DataRenderer=iX;const[kZe,oX]=_o("Tabs component was not found in the tree");var eR={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const RZe={},aX=Me((e,t)=>{const n=xe("TabsList",RZe,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=oX();return _.jsx(me,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});aX.classes=eR;aX.displayName="@mantine/core/TabsList";const NZe={},uX=Me((e,t)=>{const n=xe("TabsPanel",NZe,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=oX(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return _.jsx(me,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});uX.classes=eR;uX.displayName="@mantine/core/TabsPanel";const DZe={},lX=Me((e,t)=>{const n=xe("TabsTab",DZe,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=vs(),{dir:b}=sp(),w=oX(),E=a===w.value,x=C=>{w.onChange(w.allowTabDeactivation&&a===w.value?null:a),u==null||u(C)},S={classNames:h,styles:p,props:n};return _.jsxs(Is,{...y,...w.getStyles("tab",{className:r,style:d,variant:w.variant,...S}),disabled:c,unstyled:w.unstyled,variant:w.variant,mod:[{active:E,disabled:c,orientation:w.orientation,inverted:w.inverted,placement:w.orientation==="vertical"&&w.placement},g],ref:t,role:"tab",id:w.getTabId(a),"aria-selected":E,tabIndex:E||w.value===null?0:-1,"aria-controls":w.getPanelId(a),onClick:x,__vars:{"--tabs-color":f?Fr(f,v):void 0},onKeyDown:yY({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:w.activateTabWithKeyboard,loop:w.loop,orientation:w.orientation||"horizontal",dir:b,onKeyDown:l}),children:[o&&_.jsx("span",{...w.getStyles("tabSection",S),"data-position":"left",children:o}),i&&_.jsx("span",{...w.getStyles("tabLabel",S),children:i}),s&&_.jsx("span",{...w.getStyles("tabSection",S),"data-position":"right",children:s})]})});lX.classes=eR;lX.displayName="@mantine/core/TabsTab";const dle="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",PZe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},OZe=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Wr(t),"--tabs-color":Fr(n,e),"--tabs-text-color":_S(r,e)?ev({color:n,theme:e,autoContrast:r}):void 0}}),as=Me((e,t)=>{const n=xe("Tabs",PZe,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:b,unstyled:w,className:E,style:x,vars:S,autoContrast:C,mod:I,...k}=n,R=Pa(l),[O,P]=ks({value:i,defaultValue:r,finalValue:null,onChange:s}),$=ht({name:"Tabs",props:n,classes:eR,className:E,style:x,classNames:v,styles:b,unstyled:w,vars:S,varsResolver:OZe});return _.jsx(kZe,{value:{placement:g,value:O,orientation:o,id:R,loop:u,activateTabWithKeyboard:c,getTabId:R$(`${R}-tab`,dle),getPanelId:R$(`${R}-panel`,dle),onChange:P,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:w,getStyles:$},children:_.jsx(me,{ref:t,id:R,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},I],...$("root"),...k,children:a})})});as.classes=eR;as.displayName="@mantine/core/Tabs";as.Tab=lX;as.Panel=uX;as.List=aX;const $Ze={},m0=Me((e,t)=>{const n=xe("TextInput",$Ze,e);return _.jsx(uf,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});m0.classes=uf.classes;m0.displayName="@mantine/core/TextInput";const MZe=["h1","h2","h3","h4","h5","h6"];function LZe(e,t){const n=t!==void 0?t:`h${e}`;return MZe.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:Te(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var nSe={root:"m_8a5d1357"};const FZe={order:1},jZe=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=LZe(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},ki=Me((e,t)=>{const n=xe("Title",FZe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=ht({name:"Title",props:n,classes:nSe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:jZe});return[1,2,3,4,5,6].includes(u)?_.jsx(me,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});ki.classes=nSe;ki.displayName="@mantine/core/Title";function BZe(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(s=>s(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function UZe(e){return A.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function zZe(e,t,n){const r=[],i=[],s={};for(const o of e){const a=o.position||t;s[a]=s[a]||0,s[a]+=1,s[a]<=n?i.push(o):r.push(o)}return{notifications:i,queue:r}}const VZe=()=>BZe({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),l_=VZe(),HZe=(e=l_)=>UZe(e);function DS(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=zZe(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function qZe(e,t=l_){const n=e.id||pE();return DS(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function rSe(e,t=l_){return DS(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function WZe(e,t=l_){return DS(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function GZe(e=l_){DS(e,()=>[])}function YZe(e=l_){DS(e,t=>t.slice(0,e.getState().limit))}const c_={show:qZe,hide:rSe,update:WZe,clean:GZe,cleanQueue:YZe,updateState:DS};function jz(){return jz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jz.apply(null,arguments)}function iSe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function Bz(e,t){return Bz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Bz(e,t)}function sSe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Bz(e,t)}var oSe={exports:{}},KZe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",XZe=KZe,QZe=XZe;function aSe(){}function uSe(){}uSe.resetWarningCache=aSe;var JZe=function(){function e(r,i,s,o,a,u){if(u!==QZe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:uSe,resetWarningCache:aSe};return n.PropTypes=n,n};oSe.exports=JZe();var ZZe=oSe.exports;const hle=ml(ZZe),ple={disabled:!1},U$=Pt.createContext(null);var eet=function(t){return t.scrollTop},QC="unmounted",Yv="exited",Kv="entering",ww="entered",Uz="exiting",pg=function(e){sSe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,u;return s.appearStatus=null,r.in?a?(u=Yv,s.appearStatus=Kv):u=ww:r.unmountOnExit||r.mountOnEnter?u=QC:u=Yv,s.state={status:u},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===QC?{status:Yv}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==Kv&&o!==ww&&(s=Kv):(o===Kv||o===ww)&&(s=Uz)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Kv){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Ww.findDOMNode(this);o&&eet(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Yv&&this.setState({status:QC})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[Ww.findDOMNode(this),a],l=u[0],c=u[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!o||ple.disabled){this.safeSetState({status:ww},function(){s.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:Kv},function(){s.props.onEntering(l,c),s.onTransitionEnd(d,function(){s.safeSetState({status:ww},function(){s.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:Ww.findDOMNode(this);if(!s||ple.disabled){this.safeSetState({status:Yv},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:Uz},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Yv},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:Ww.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===QC)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=iSe(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Pt.createElement(U$.Provider,{value:null},typeof o=="function"?o(i,a):Pt.cloneElement(Pt.Children.only(o),a))},t}(Pt.Component);pg.contextType=U$;pg.propTypes={};function Q_(){}pg.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Q_,onEntering:Q_,onEntered:Q_,onExit:Q_,onExiting:Q_,onExited:Q_};pg.UNMOUNTED=QC;pg.EXITED=Yv;pg.ENTERING=Kv;pg.ENTERED=ww;pg.EXITING=Uz;function tet(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cX(e,t){var n=function(s){return t&&A.isValidElement(s)?t(s):s},r=Object.create(null);return e&&A.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function net(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var s in e)s in t?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var u in t){if(r[u])for(o=0;o<r[u].length;o++){var l=r[u][o];a[r[u][o]]=n(l)}a[u]=n(u)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function I1(e,t,n){return n[t]!=null?n[t]:e.props[t]}function ret(e,t){return cX(e.children,function(n){return A.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:I1(n,"appear",e),enter:I1(n,"enter",e),exit:I1(n,"exit",e)})})}function iet(e,t,n){var r=cX(e.children),i=net(t,r);return Object.keys(i).forEach(function(s){var o=i[s];if(A.isValidElement(o)){var a=s in t,u=s in r,l=t[s],c=A.isValidElement(l)&&!l.props.in;u&&(!a||c)?i[s]=A.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:I1(o,"exit",e),enter:I1(o,"enter",e)}):!u&&a&&!c?i[s]=A.cloneElement(o,{in:!1}):u&&a&&A.isValidElement(l)&&(i[s]=A.cloneElement(o,{onExited:n.bind(null,o),in:l.props.in,exit:I1(o,"exit",e),enter:I1(o,"enter",e)}))}}),i}var set=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},oet={component:"div",childFactory:function(t){return t}},Kg=function(e){sSe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=s.handleExited.bind(tet(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,u=s.firstRender;return{children:u?ret(i,a):iet(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=cX(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var u=jz({},a.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=iSe(i,["component","childFactory"]),u=this.state.contextValue,l=set(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?Pt.createElement(U$.Provider,{value:u},l):Pt.createElement(U$.Provider,{value:u},Pt.createElement(s,a,l))},t}(Pt.Component);Kg.propTypes={};Kg.defaultProps=oet;const lSe=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function aet(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),lSe.reduce((n,r)=>(n[r]=[],n),{}))}const mle={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},uet={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function cet({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,s]=n.split("-"),o=s==="center"?`${i}-center`:s,a={opacity:0,maxHeight:t,transform:mle[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:uet[o]},l={opacity:0,maxHeight:0,transform:mle[o]};return{...a,...{entering:u,entered:u,exiting:l,exited:l}[e]}}function fet(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const cSe=A.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:s,message:o,...a}=e,u=fet(n,e.autoClose),l=A.useRef(),c=()=>window.clearTimeout(l.current),f=()=>{t(e.id),c()},d=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return A.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),A.useEffect(()=>(d(),c),[u]),_.jsx(HK,{...r,...a,onClose:f,ref:i,onMouseEnter:c,onMouseLeave:d,children:o})});cSe.displayName="@mantine/notifications/NotificationContainer";var fSe={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const det=pg,het={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:cc("overlay"),store:l_,withinPortal:!0},pet=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":Te(n)}}),mg=Me((e,t)=>{const n=xe("Notifications",het,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,position:l,autoClose:c,transitionDuration:f,containerWidth:d,notificationMaxHeight:h,limit:p,zIndex:m,store:g,portalProps:y,withinPortal:v,...b}=n,w=vs(),E=HZe(g),x=UHe(),S=g6(),C=A.useRef({}),I=A.useRef(0),R=(w.respectReducedMotion?S:!1)?1:f,O=ht({name:"Notifications",classes:fSe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:pet});A.useEffect(()=>{g==null||g.updateState(L=>({...L,limit:p||5,defaultPosition:l}))},[p,l]),jh(()=>{E.notifications.length>I.current&&setTimeout(()=>x(),0),I.current=E.notifications.length},[E.notifications]);const P=aet(E.notifications,l),$=lSe.reduce((L,M)=>(L[M]=P[M].map(({style:B,...U})=>_.jsx(det,{timeout:R,onEnter:()=>C.current[U.id].offsetHeight,nodeRef:{current:C.current[U.id]},children:V=>_.jsx(cSe,{ref:D=>{C.current[U.id]=D},data:U,onHide:D=>rSe(D,g),autoClose:c,...O("notification",{style:{...cet({state:V,position:M,transitionDuration:R,maxHeight:h}),...B}})})},U.id)),L),{});return _.jsxs(SS,{withinPortal:v,...y,children:[_.jsx(me,{...O("root"),"data-position":"top-center",ref:t,...b,children:_.jsx(Kg,{children:$["top-center"]})}),_.jsx(me,{...O("root"),"data-position":"top-left",...b,children:_.jsx(Kg,{children:$["top-left"]})}),_.jsx(me,{...O("root"),"data-position":"top-right",...b,children:_.jsx(Kg,{children:$["top-right"]})}),_.jsx(me,{...O("root"),"data-position":"bottom-right",...b,children:_.jsx(Kg,{children:$["bottom-right"]})}),_.jsx(me,{...O("root"),"data-position":"bottom-left",...b,children:_.jsx(Kg,{children:$["bottom-left"]})}),_.jsx(me,{...O("root"),"data-position":"bottom-center",...b,children:_.jsx(Kg,{children:$["bottom-center"]})})]})});mg.classes=fSe;mg.displayName="@mantine/notifications/Notifications";mg.show=c_.show;mg.hide=c_.hide;mg.update=c_.update;mg.clean=c_.clean;mg.cleanQueue=c_.cleanQueue;mg.updateState=c_.updateState;const dSe=A.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),Ds=()=>A.useContext(dSe);function met({children:e}){const[t,n]=Pt.useState(void 0),r=Pt.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return _.jsx(dSe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fI(){return fI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fI.apply(this,arguments)}var g0;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(g0||(g0={}));const gle="popstate";function get(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return zz("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:pSe(i)}return vet(t,n,null,e)}function hs(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function hSe(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function yet(){return Math.random().toString(36).substr(2,8)}function yle(e,t){return{usr:e.state,key:e.key,idx:t}}function zz(e,t,n,r){return n===void 0&&(n=null),fI({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?PS(t):t,{state:n,key:t&&t.key||r||yet()})}function pSe(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function PS(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function vet(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=g0.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(fI({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=g0.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=g0.Push;let v=zz(m.location,g,y);l=c()+1;let b=yle(v,l),w=m.createHref(v);try{o.pushState(b,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(w)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=g0.Replace;let v=zz(m.location,g,y);l=c();let b=yle(v,l),w=m.createHref(v);o.replaceState(b,"",w),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:pSe(g);return v=v.replace(/ $/,"%20"),hs(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(gle,f),u=g,()=>{i.removeEventListener(gle,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var vle;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(vle||(vle={}));function bet(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?PS(t):t,i=ySe(r.pathname||"/",n);if(i==null)return null;let s=mSe(e);_et(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=Pet(i);o=Ret(s[a],u)}return o}function mSe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(hs(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=F0([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(hs(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),mSe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:Iet(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of gSe(s.path))i(s,o,u)}),t}function gSe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=gSe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function _et(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:ket(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const wet=/^:[\w-]+$/,Eet=3,xet=2,Tet=1,Cet=10,Aet=-2,ble=e=>e==="*";function Iet(e,t){let n=e.split("/"),r=n.length;return n.some(ble)&&(r+=Aet),t&&(r+=xet),n.filter(i=>!ble(i)).reduce((i,s)=>i+(wet.test(s)?Eet:s===""?Tet:Cet),r)}function ket(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function Ret(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=Net({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:F0([i,c.pathname]),pathnameBase:Let(F0([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=F0([i,c.pathnameBase]))}return s}function Net(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Det(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function Det(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),hSe(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function Pet(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return hSe(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ySe(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Oet(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?PS(e):e;return{pathname:n?n.startsWith("/")?n:$et(n,t):t,search:Fet(r),hash:jet(i)}}function $et(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function g8(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Met(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function fX(e,t){let n=Met(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function dX(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=PS(e):(i=fI({},e),hs(!i.pathname||!i.pathname.includes("?"),g8("?","pathname","search",i)),hs(!i.pathname||!i.pathname.includes("#"),g8("#","pathname","hash",i)),hs(!i.search||!i.search.includes("#"),g8("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=Oet(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const F0=e=>e.join("/").replace(/\/\/+/g,"/"),Let=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Fet=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,jet=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Bet(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const vSe=["post","put","patch","delete"];new Set(vSe);const Uet=["get",...vSe];new Set(Uet);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dI(){return dI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dI.apply(this,arguments)}const hX=A.createContext(null),zet=A.createContext(null),f_=A.createContext(null),Z6=A.createContext(null),up=A.createContext({outlet:null,matches:[],isDataRoute:!1}),bSe=A.createContext(null);function _Se(e,t){let{relative:n}={};OS()||hs(!1);let{basename:r,navigator:i}=A.useContext(f_),{hash:s,pathname:o,search:a}=Wet(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:F0([r,o])),i.createHref({pathname:u,search:a,hash:s})}function OS(){return A.useContext(Z6)!=null}function nv(){return OS()||hs(!1),A.useContext(Z6).location}function wSe(e){A.useContext(f_).static||A.useLayoutEffect(e)}function lp(){let{isDataRoute:e}=A.useContext(up);return e?rtt():Vet()}function Vet(){OS()||hs(!1);let e=A.useContext(hX),{basename:t,future:n,navigator:r}=A.useContext(f_),{matches:i}=A.useContext(up),{pathname:s}=nv(),o=JSON.stringify(fX(i,n.v7_relativeSplatPath)),a=A.useRef(!1);return wSe(()=>{a.current=!0}),A.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=dX(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:F0([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const Het=A.createContext(null);function qet(e){let t=A.useContext(up).outlet;return t&&A.createElement(Het.Provider,{value:e},t)}function Lm(){let{matches:e}=A.useContext(up),t=e[e.length-1];return t?t.params:{}}function Wet(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=A.useContext(f_),{matches:i}=A.useContext(up),{pathname:s}=nv(),o=JSON.stringify(fX(i,r.v7_relativeSplatPath));return A.useMemo(()=>dX(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function ESe(e,t){return Get(e,t)}function Get(e,t,n,r){OS()||hs(!1);let{navigator:i}=A.useContext(f_),{matches:s}=A.useContext(up),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=nv(),c;if(t){var f;let g=typeof t=="string"?PS(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||hs(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=bet(e,{pathname:h}),m=Jet(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:F0([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:F0([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?A.createElement(Z6.Provider,{value:{location:dI({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:g0.Pop}},m):m}function Yet(){let e=ntt(),t=Bet(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},t),n?A.createElement("pre",{style:i},n):null,null)}const Ket=A.createElement(Yet,null);class Xet extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?A.createElement(up.Provider,{value:this.props.routeContext},A.createElement(bSe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Qet(e){let{routeContext:t,match:n,children:r}=e,i=A.useContext(hX);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(up.Provider,{value:t},r)}function Jet(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||hs(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||Ket,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),v=()=>{let b;return h?b=m:p?b=g:f.route.Component?b=A.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,A.createElement(Qet,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?A.createElement(Xet,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var xSe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(xSe||{}),z$=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(z$||{});function Zet(e){let t=A.useContext(hX);return t||hs(!1),t}function ett(e){let t=A.useContext(zet);return t||hs(!1),t}function ttt(e){let t=A.useContext(up);return t||hs(!1),t}function SSe(e){let t=ttt(),n=t.matches[t.matches.length-1];return n.route.id||hs(!1),n.route.id}function ntt(){var e;let t=A.useContext(bSe),n=ett(z$.UseRouteError),r=SSe(z$.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function rtt(){let{router:e}=Zet(xSe.UseNavigateStable),t=SSe(z$.UseNavigateStable),n=A.useRef(!1);return wSe(()=>{n.current=!0}),A.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,dI({fromRouteId:t},s)))},[e,t])}function pX(e){let{to:t,replace:n,state:r,relative:i}=e;OS()||hs(!1);let{future:s,static:o}=A.useContext(f_),{matches:a}=A.useContext(up),{pathname:u}=nv(),l=lp(),c=dX(t,fX(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return A.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function itt(e){return qet(e.context)}function Up(e){hs(!1)}function stt(e){let{basename:t="/",children:n=null,location:r,navigationType:i=g0.Pop,navigator:s,static:o=!1,future:a}=e;OS()&&hs(!1);let u=t.replace(/^\/*/,"/"),l=A.useMemo(()=>({basename:u,navigator:s,static:o,future:dI({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=PS(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=A.useMemo(()=>{let g=ySe(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:A.createElement(f_.Provider,{value:l},A.createElement(Z6.Provider,{children:n,value:m}))}function ott(e){let{children:t,location:n}=e;return ESe(Vz(t),n)}new Promise(()=>{});function Vz(e,t){t===void 0&&(t=[]);let n=[];return A.Children.forEach(e,(r,i)=>{if(!A.isValidElement(r))return;let s=[...t,i];if(r.type===A.Fragment){n.push.apply(n,Vz(r.props.children,s));return}r.type!==Up&&hs(!1),!r.props.index||!r.props.children||hs(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Vz(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hz(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function att(e,t){let n=Hz(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const utt="6";try{window.__reactRouterVersion=utt}catch{}const ltt="startTransition",_le=i$[ltt];function ctt(e){let{basename:t,children:n,future:r,window:i}=e,s=A.useRef();s.current==null&&(s.current=get({window:i,v5Compat:!0}));let o=s.current,[a,u]=A.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=A.useCallback(f=>{l&&_le?_le(()=>u(f)):u(f)},[u,l]);return A.useLayoutEffect(()=>o.listen(c),[o,c]),A.createElement(stt,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var wle;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(wle||(wle={}));var Ele;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Ele||(Ele={}));function mX(e){let t=A.useRef(Hz(e)),n=A.useRef(!1),r=nv(),i=A.useMemo(()=>att(r.search,n.current?null:t.current),[r.search]),s=lp(),o=A.useCallback((a,u)=>{const l=Hz(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const gX=A.createContext(null);gX.displayName="@mantine/modals/ModalsContext";function ftt(){const e=A.useContext(gX);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function dtt({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=ftt(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return _.jsxs(_.Fragment,{children:[l&&_.jsx(me,{mb:"md",children:l}),_.jsxs(Rs,{justify:"flex-end",...o,children:[_.jsx(dn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),_.jsx(dn,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[htt,eF]=tqe("mantine-modals");eF("openModal");eF("closeModal");eF("closeAllModals");const qz=eF("openConfirmModal");function xle(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function ptt(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;xle(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{xle(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function mtt(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function gtt({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=A.useReducer(ptt,{modals:[],current:null}),o=A.useRef(i);o.current=i;const a=A.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=A.useCallback(({modalId:g,...y})=>{const v=g||pE();return s({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[s]),l=A.useCallback(({modalId:g,...y})=>{const v=g||pE();return s({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[s]),c=A.useCallback((g,{modalId:y,...v})=>{const b=y||pE();return s({type:"OPEN",modal:{id:b,type:"context",props:v,ctx:g}}),b},[s]),f=A.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);htt({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,b=r[g.ctx];return{modalProps:v,content:_.jsx(b,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=mtt(g.props);return{modalProps:y,content:_.jsx(dtt,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:_.jsx(_.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return _.jsxs(gX.Provider,{value:d,children:[_.jsx(es,{zIndex:cc("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ytt={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=(e,t,n,r)=>{const i=A.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:u,children:l,...c},f)=>A.createElement("svg",{ref:f,...ytt[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...c},[...r.map(([d,h])=>A.createElement(d,h)),...Array.isArray(l)?l:[l]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vtt=In("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var btt=In("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Sle=In("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _tt=In("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wtt=In("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ett=In("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xtt=In("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Stt=In("outline","chart-bar","IconChartBar",[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ttt=In("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ctt=In("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var TSe=In("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Att=In("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tle=In("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Itt=In("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ktt=In("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rtt=In("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ntt=In("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dtt=In("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ptt=In("outline","file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ott=In("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var CSe=In("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $tt=In("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Mtt=In("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ltt=In("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ftt=In("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jtt=In("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ASe=In("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Btt=In("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Utt=In("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ztt=In("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vtt=In("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Htt=In("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ISe=In("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qtt=In("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kSe=In("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wtt=In("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var RSe=In("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yX=In("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vX=In("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gtt=In("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);function NSe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Qu="/revisit/";function Cle(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function DSe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Ytt=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Ktt=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Xtt={};function Ale(e,t){return(Xtt.jsx?Ktt:Ytt).test(e)}const Qtt=/[ \t\n\f\r]/g;function Jtt(e){return typeof e=="object"?e.type==="text"?Ile(e.value):!1:Ile(e)}function Ile(e){return e.replace(Qtt,"")===""}let tR=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};tR.prototype.property={};tR.prototype.normal={};tR.prototype.space=null;function PSe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new tR(n,r,t)}function hI(e){return e.toLowerCase()}let cf=class{constructor(t,n){this.property=t,this.attribute=n}};cf.prototype.space=null;cf.prototype.boolean=!1;cf.prototype.booleanish=!1;cf.prototype.overloadedBoolean=!1;cf.prototype.number=!1;cf.prototype.commaSeparated=!1;cf.prototype.spaceSeparated=!1;cf.prototype.commaOrSpaceSeparated=!1;cf.prototype.mustUseProperty=!1;cf.prototype.defined=!1;let Ztt=0;const _n=d_(),xs=d_(),OSe=d_(),nt=d_(),si=d_(),vE=d_(),El=d_();function d_(){return 2**++Ztt}const Wz=Object.freeze(Object.defineProperty({__proto__:null,boolean:_n,booleanish:xs,commaOrSpaceSeparated:El,commaSeparated:vE,number:nt,overloadedBoolean:OSe,spaceSeparated:si},Symbol.toStringTag,{value:"Module"})),y8=Object.keys(Wz);class bX extends cf{constructor(t,n,r,i){let s=-1;if(super(t,n),kle(this,"space",i),typeof r=="number")for(;++s<y8.length;){const o=y8[s];kle(this,y8[s],(r&Wz[o])===Wz[o])}}}bX.prototype.defined=!0;function kle(e,t,n){n&&(e[t]=n)}const ent={}.hasOwnProperty;function $S(e){const t={},n={};let r;for(r in e.properties)if(ent.call(e.properties,r)){const i=e.properties[r],s=new bX(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[hI(r)]=r,n[hI(s.attribute)]=r}return new tR(t,n,e.space)}const $Se=$S({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),MSe=$S({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function LSe(e,t){return t in e?e[t]:t}function FSe(e,t){return LSe(e,t.toLowerCase())}const jSe=$S({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:FSe,properties:{xmlns:null,xmlnsXLink:null}}),BSe=$S({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:xs,ariaAutoComplete:null,ariaBusy:xs,ariaChecked:xs,ariaColCount:nt,ariaColIndex:nt,ariaColSpan:nt,ariaControls:si,ariaCurrent:null,ariaDescribedBy:si,ariaDetails:null,ariaDisabled:xs,ariaDropEffect:si,ariaErrorMessage:null,ariaExpanded:xs,ariaFlowTo:si,ariaGrabbed:xs,ariaHasPopup:null,ariaHidden:xs,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:si,ariaLevel:nt,ariaLive:null,ariaModal:xs,ariaMultiLine:xs,ariaMultiSelectable:xs,ariaOrientation:null,ariaOwns:si,ariaPlaceholder:null,ariaPosInSet:nt,ariaPressed:xs,ariaReadOnly:xs,ariaRelevant:null,ariaRequired:xs,ariaRoleDescription:si,ariaRowCount:nt,ariaRowIndex:nt,ariaRowSpan:nt,ariaSelected:xs,ariaSetSize:nt,ariaSort:null,ariaValueMax:nt,ariaValueMin:nt,ariaValueNow:nt,ariaValueText:null,role:null}}),tnt=$S({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:FSe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:vE,acceptCharset:si,accessKey:si,action:null,allow:null,allowFullScreen:_n,allowPaymentRequest:_n,allowUserMedia:_n,alt:null,as:null,async:_n,autoCapitalize:null,autoComplete:si,autoFocus:_n,autoPlay:_n,blocking:si,capture:null,charSet:null,checked:_n,cite:null,className:si,cols:nt,colSpan:null,content:null,contentEditable:xs,controls:_n,controlsList:si,coords:nt|vE,crossOrigin:null,data:null,dateTime:null,decoding:null,default:_n,defer:_n,dir:null,dirName:null,disabled:_n,download:OSe,draggable:xs,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:_n,formTarget:null,headers:si,height:nt,hidden:_n,high:nt,href:null,hrefLang:null,htmlFor:si,httpEquiv:si,id:null,imageSizes:null,imageSrcSet:null,inert:_n,inputMode:null,integrity:null,is:null,isMap:_n,itemId:null,itemProp:si,itemRef:si,itemScope:_n,itemType:si,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:_n,low:nt,manifest:null,max:null,maxLength:nt,media:null,method:null,min:null,minLength:nt,multiple:_n,muted:_n,name:null,nonce:null,noModule:_n,noValidate:_n,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:_n,optimum:nt,pattern:null,ping:si,placeholder:null,playsInline:_n,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:_n,referrerPolicy:null,rel:si,required:_n,reversed:_n,rows:nt,rowSpan:nt,sandbox:si,scope:null,scoped:_n,seamless:_n,selected:_n,shadowRootClonable:_n,shadowRootDelegatesFocus:_n,shadowRootMode:null,shape:null,size:nt,sizes:null,slot:null,span:nt,spellCheck:xs,src:null,srcDoc:null,srcLang:null,srcSet:null,start:nt,step:null,style:null,tabIndex:nt,target:null,title:null,translate:null,type:null,typeMustMatch:_n,useMap:null,value:xs,width:nt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:si,axis:null,background:null,bgColor:null,border:nt,borderColor:null,bottomMargin:nt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:_n,declare:_n,event:null,face:null,frame:null,frameBorder:null,hSpace:nt,leftMargin:nt,link:null,longDesc:null,lowSrc:null,marginHeight:nt,marginWidth:nt,noResize:_n,noHref:_n,noShade:_n,noWrap:_n,object:null,profile:null,prompt:null,rev:null,rightMargin:nt,rules:null,scheme:null,scrolling:xs,standby:null,summary:null,text:null,topMargin:nt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:nt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:_n,disableRemotePlayback:_n,prefix:null,property:null,results:nt,security:null,unselectable:null}}),nnt=$S({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:LSe,properties:{about:El,accentHeight:nt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:nt,amplitude:nt,arabicForm:null,ascent:nt,attributeName:null,attributeType:null,azimuth:nt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:nt,by:null,calcMode:null,capHeight:nt,className:si,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:nt,diffuseConstant:nt,direction:null,display:null,dur:null,divisor:nt,dominantBaseline:null,download:_n,dx:null,dy:null,edgeMode:null,editable:null,elevation:nt,enableBackground:null,end:null,event:null,exponent:nt,externalResourcesRequired:null,fill:null,fillOpacity:nt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:vE,g2:vE,glyphName:vE,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:nt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:nt,horizOriginX:nt,horizOriginY:nt,id:null,ideographic:nt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:nt,k:nt,k1:nt,k2:nt,k3:nt,k4:nt,kernelMatrix:El,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:nt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:nt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:nt,overlineThickness:nt,paintOrder:null,panose1:null,path:null,pathLength:nt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:si,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:nt,pointsAtY:nt,pointsAtZ:nt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:El,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:El,rev:El,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:El,requiredFeatures:El,requiredFonts:El,requiredFormats:El,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:nt,specularExponent:nt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:nt,strikethroughThickness:nt,string:null,stroke:null,strokeDashArray:El,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:nt,strokeOpacity:nt,strokeWidth:null,style:null,surfaceScale:nt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:El,tabIndex:nt,tableValues:null,target:null,targetX:nt,targetY:nt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:El,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:nt,underlineThickness:nt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:nt,values:null,vAlphabetic:nt,vMathematical:nt,vectorEffect:null,vHanging:nt,vIdeographic:nt,version:null,vertAdvY:nt,vertOriginX:nt,vertOriginY:nt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:nt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),rnt=/^data[-\w.:]+$/i,Rle=/-[a-z]/g,int=/[A-Z]/g;function tF(e,t){const n=hI(t);let r=t,i=cf;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&rnt.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Rle,ont);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Rle.test(s)){let o=s.replace(int,snt);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=bX}return new i(r,t)}function snt(e){return"-"+e.toLowerCase()}function ont(e){return e.charAt(1).toUpperCase()}const ant={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},nR=PSe([MSe,$Se,jSe,BSe,tnt],"html"),rv=PSe([MSe,$Se,jSe,BSe,nnt],"svg");function Nle(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function USe(e){return e.join(" ").trim()}var zSe={},Dle=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,unt=/\n/g,lnt=/^\s*/,cnt=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,fnt=/^:\s*/,dnt=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,hnt=/^[;\s]*/,pnt=/^\s+|\s+$/g,mnt=`
`,Ple="/",Ole="*",f1="",gnt="comment",ynt="declaration",vnt=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(unt);m&&(n+=m.length);var g=p.lastIndexOf(mnt);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(lnt)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(Ple!=e.charAt(0)||Ole!=e.charAt(1))){for(var m=2;f1!=e.charAt(m)&&(Ole!=e.charAt(m)||Ple!=e.charAt(m+1));)++m;if(m+=2,f1===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:gnt,comment:g})}}function d(){var p=s(),m=u(cnt);if(m){if(f(),!u(fnt))return a("property missing ':'");var g=u(dnt),y=p({type:ynt,property:$le(m[0].replace(Dle,f1)),value:g?$le(g[0].replace(Dle,f1)):f1});return u(hnt),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function $le(e){return e?e.replace(pnt,f1):f1}var bnt=ao&&ao.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zSe,"__esModule",{value:!0});var _nt=bnt(vnt);function wnt(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,_nt.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var Mle=zSe.default=wnt;const Ent=Mle.default||Mle,nF=VSe("end"),cp=VSe("start");function VSe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function xnt(e){const t=cp(e),n=nF(e);if(t&&n)return{start:t,end:n}}function KA(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Lle(e.position):"start"in e||"end"in e?Lle(e):"line"in e||"column"in e?Gz(e):""}function Gz(e){return Fle(e&&e.line)+":"+Fle(e&&e.column)}function Lle(e){return Gz(e&&e.start)+"-"+Gz(e&&e.end)}function Fle(e){return e&&typeof e=="number"?e:1}class Oa extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=KA(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Oa.prototype.file="";Oa.prototype.name="";Oa.prototype.reason="";Oa.prototype.message="";Oa.prototype.stack="";Oa.prototype.column=void 0;Oa.prototype.line=void 0;Oa.prototype.ancestors=void 0;Oa.prototype.cause=void 0;Oa.prototype.fatal=void 0;Oa.prototype.place=void 0;Oa.prototype.ruleId=void 0;Oa.prototype.source=void 0;const _X={}.hasOwnProperty,Snt=new Map,Tnt=/[A-Z]/g,Cnt=/-([a-z])/g,Ant=new Set(["table","tbody","thead","tfoot","tr"]),Int=new Set(["td","th"]),HSe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function knt(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Lnt(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Mnt(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?rv:nR,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=qSe(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function qSe(e,t,n){if(t.type==="element")return Rnt(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return Nnt(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return Pnt(e,t,n);if(t.type==="mdxjsEsm")return Dnt(e,t);if(t.type==="root")return Ont(e,t,n);if(t.type==="text")return $nt(e,t)}function Rnt(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=rv,e.schema=i),e.ancestors.push(t);const s=GSe(e,t.tagName,!1),o=Fnt(e,t);let a=EX(e,t);return Ant.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!Jtt(u):!0})),WSe(e,o,s,t),wX(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function Nnt(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}pI(e,t.position)}function Dnt(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);pI(e,t.position)}function Pnt(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=rv,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:GSe(e,t.name,!0),o=jnt(e,t),a=EX(e,t);return WSe(e,o,s,t),wX(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function Ont(e,t,n){const r={};return wX(r,EX(e,t)),e.create(t,e.Fragment,r,n)}function $nt(e,t){return t.value}function WSe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function wX(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function Mnt(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function Lnt(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=cp(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function Fnt(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&_X.call(t.properties,i)){const s=Bnt(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&Int.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function jnt(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else pI(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else pI(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function EX(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:Snt;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=qSe(e,s,o);a!==void 0&&n.push(a)}return n}function Bnt(e,t,n){const r=tF(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?DSe(n):USe(n)),r.property==="style"){let i=typeof n=="object"?n:Unt(e,String(n));return e.stylePropertyNameCase==="css"&&(i=znt(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?ant[r.property]||r.property:r.attribute,n]}}function Unt(e,t){const n={};try{Ent(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new Oa("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=HSe+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(Cnt,Hnt)),n[o]=s}}function GSe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=Ale(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=Ale(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return _X.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);pI(e)}function pI(e,t){const n=new Oa("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=HSe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function znt(e){const t={};let n;for(n in e)_X.call(e,n)&&(t[Vnt(n)]=e[n]);return t}function Vnt(e){let t=e.replace(Tnt,qnt);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function Hnt(e,t){return t.toUpperCase()}function qnt(e){return"-"+e.toLowerCase()}const v8={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Wnt={};function Gnt(e,t){const n=Wnt,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return YSe(e,r,i)}function YSe(e,t,n){if(Ynt(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return jle(e.children,t,n)}return Array.isArray(e)?jle(e,t,n):""}function jle(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=YSe(e[i],t,n);return r.join("")}function Ynt(e){return!!(e&&typeof e=="object")}const Ble=document.createElement("i");function xX(e){const t="&"+e+";";Ble.innerHTML=t;const n=Ble.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Fm(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function kc(e,t){return e.length>0?(Fm(e,e.length,0,t),e):t}const Ule={}.hasOwnProperty;function Knt(e){const t={};let n=-1;for(;++n<e.length;)Xnt(t,e[n]);return t}function Xnt(e,t){let n;for(n in t){const i=(Ule.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){Ule.call(i,o)||(i[o]=[]);const a=s[o];Qnt(i[o],Array.isArray(a)?a:a?[a]:[])}}}function Qnt(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Fm(e,0,0,r)}function KSe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function bE(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const nh=iv(/[A-Za-z]/),$l=iv(/[\dA-Za-z]/),Jnt=iv(/[#-'*+\--9=?A-Z^-~]/);function Yz(e){return e!==null&&(e<32||e===127)}const Kz=iv(/\d/),Znt=iv(/[\dA-Fa-f]/),ert=iv(/[!-/:-@[-`{-~]/);function rn(e){return e!==null&&e<-2}function Ju(e){return e!==null&&(e<0||e===32)}function xr(e){return e===-2||e===-1||e===32}const trt=iv(new RegExp("\\p{P}|\\p{S}","u")),nrt=iv(/\s/);function iv(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function MS(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&$l(e.charCodeAt(n+1))&&$l(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function ai(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return xr(u)?(e.enter(n),a(u)):t(u)}function a(u){return xr(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const rrt={tokenize:irt};function irt(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),ai(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return rn(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const srt={tokenize:ort},zle={tokenize:art};function ort(e){const t=this,n=[];let r=0,i,s,o;return a;function a(b){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,u,l)(b)}return l(b)}function u(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const w=t.events.length;let E=w,x;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){x=t.events[E][1].end;break}y(r);let S=w;for(;S<t.events.length;)t.events[S][1].end=Object.assign({},x),S++;return Fm(t.events,E+1,0,t.events.slice(w)),t.events.length=S,l(b)}return a(b)}function l(b){if(r===n.length){if(!i)return d(b);if(i.currentConstruct&&i.currentConstruct.concrete)return p(b);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(zle,c,f)(b)}function c(b){return i&&v(),y(r),d(b)}function f(b){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(b)}function d(b){return t.containerState={},e.attempt(zle,h,p)(b)}function h(b){return r++,n.push([t.currentConstruct,t.containerState]),d(b)}function p(b){if(b===null){i&&v(),y(0),e.consume(b);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(b)}function m(b){if(b===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(b);return}return rn(b)?(e.consume(b),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(b),m)}function g(b,w){const E=t.sliceStream(b);if(w&&E.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(E),t.parser.lazy[b.start.line]){let x=i.events.length;for(;x--;)if(i.events[x][1].start.offset<o&&(!i.events[x][1].end||i.events[x][1].end.offset>o))return;const S=t.events.length;let C=S,I,k;for(;C--;)if(t.events[C][0]==="exit"&&t.events[C][1].type==="chunkFlow"){if(I){k=t.events[C][1].end;break}I=!0}for(y(r),x=S;x<t.events.length;)t.events[x][1].end=Object.assign({},k),x++;Fm(t.events,C+1,0,t.events.slice(S)),t.events.length=x}}function y(b){let w=n.length;for(;w-- >b;){const E=n[w];t.containerState=E[1],E[0].exit.call(t,e)}n.length=b}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function art(e,t,n){return ai(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Vle(e){if(e===null||Ju(e)||nrt(e))return 1;if(trt(e))return 2}function SX(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const Xz={name:"attention",tokenize:lrt,resolveAll:urt};function urt(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);Hle(f,-u),Hle(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=kc(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=kc(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=kc(l,SX(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=kc(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=kc(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,Fm(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function lrt(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Vle(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=Vle(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function Hle(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const crt={name:"autolink",tokenize:frt};function frt(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return nh(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||$l(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||$l(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||Yz(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):Jnt(h)?(e.consume(h),l):n(h)}function c(h){return $l(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||$l(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const rF={tokenize:drt,partial:!0};function drt(e,t,n){return r;function r(s){return xr(s)?ai(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||rn(s)?t(s):n(s)}}const XSe={name:"blockQuote",tokenize:hrt,continuation:{tokenize:prt},exit:mrt};function hrt(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return xr(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function prt(e,t,n){const r=this;return i;function i(o){return xr(o)?ai(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(XSe,t,n)(o)}}function mrt(e){e.exit("blockQuote")}const QSe={name:"characterEscape",tokenize:grt};function grt(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return ert(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const JSe={name:"characterReference",tokenize:yrt};function yrt(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=$l,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=Znt,c):(e.enter("characterReferenceValue"),s=7,o=Kz,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===$l&&!xX(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const qle={tokenize:brt,partial:!0},Wle={name:"codeFenced",tokenize:vrt,concrete:!0};function vrt(e,t,n){const r=this,i={tokenize:E,partial:!0};let s=0,o=0,a;return u;function u(x){return l(x)}function l(x){const S=r.events[r.events.length-1];return s=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,a=x,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(x)}function c(x){return x===a?(o++,e.consume(x),c):o<3?n(x):(e.exit("codeFencedFenceSequence"),xr(x)?ai(e,f,"whitespace")(x):f(x))}function f(x){return x===null||rn(x)?(e.exit("codeFencedFence"),r.interrupt?t(x):e.check(qle,m,w)(x)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(x))}function d(x){return x===null||rn(x)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(x)):xr(x)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ai(e,h,"whitespace")(x)):x===96&&x===a?n(x):(e.consume(x),d)}function h(x){return x===null||rn(x)?f(x):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(x))}function p(x){return x===null||rn(x)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(x)):x===96&&x===a?n(x):(e.consume(x),p)}function m(x){return e.attempt(i,w,g)(x)}function g(x){return e.enter("lineEnding"),e.consume(x),e.exit("lineEnding"),y}function y(x){return s>0&&xr(x)?ai(e,v,"linePrefix",s+1)(x):v(x)}function v(x){return x===null||rn(x)?e.check(qle,m,w)(x):(e.enter("codeFlowValue"),b(x))}function b(x){return x===null||rn(x)?(e.exit("codeFlowValue"),v(x)):(e.consume(x),b)}function w(x){return e.exit("codeFenced"),t(x)}function E(x,S,C){let I=0;return k;function k(L){return x.enter("lineEnding"),x.consume(L),x.exit("lineEnding"),R}function R(L){return x.enter("codeFencedFence"),xr(L)?ai(x,O,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):O(L)}function O(L){return L===a?(x.enter("codeFencedFenceSequence"),P(L)):C(L)}function P(L){return L===a?(I++,x.consume(L),P):I>=o?(x.exit("codeFencedFenceSequence"),xr(L)?ai(x,$,"whitespace")(L):$(L)):C(L)}function $(L){return L===null||rn(L)?(x.exit("codeFencedFence"),S(L)):C(L)}}}function brt(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const b8={name:"codeIndented",tokenize:wrt},_rt={tokenize:Ert,partial:!0};function wrt(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),ai(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):rn(l)?e.attempt(_rt,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||rn(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function Ert(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):rn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):ai(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):rn(o)?i(o):n(o)}}const xrt={name:"codeText",tokenize:Crt,resolve:Srt,previous:Trt};function Srt(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function Trt(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Crt(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):rn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||rn(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class Art{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&eC(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),eC(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),eC(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);eC(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);eC(this.left,n.reverse())}}}function eC(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function ZSe(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new Art(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Irt(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return Fm(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function Irt(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.push([v,v+y.length-1]),e.splice(v,2,y)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const krt={tokenize:Drt,resolve:Nrt},Rrt={tokenize:Prt,partial:!0};function Nrt(e){return ZSe(e),e}function Drt(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):rn(a)?e.check(Rrt,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Prt(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),ai(e,s,"linePrefix")}function s(o){if(o===null||rn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function eTe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||Yz(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||rn(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||Ju(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||Yz(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function tTe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):rn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||rn(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!xr(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function nTe(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):rn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),ai(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||rn(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function XA(e,t){let n;return r;function r(i){return rn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):xr(i)?ai(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const Ort={name:"definition",tokenize:Mrt},$rt={tokenize:Lrt,partial:!0};function Mrt(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return tTe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=bE(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return Ju(h)?XA(e,l)(h):l(h)}function l(h){return eTe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt($rt,f,f)(h)}function f(h){return xr(h)?ai(e,d,"whitespace")(h):d(h)}function d(h){return h===null||rn(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function Lrt(e,t,n){return r;function r(a){return Ju(a)?XA(e,i)(a):n(a)}function i(a){return nTe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return xr(a)?ai(e,o,"whitespace")(a):o(a)}function o(a){return a===null||rn(a)?t(a):n(a)}}const Frt={name:"hardBreakEscape",tokenize:jrt};function jrt(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return rn(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const Brt={name:"headingAtx",tokenize:zrt,resolve:Urt};function Urt(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Fm(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function zrt(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||Ju(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||rn(c)?(e.exit("atxHeading"),t(c)):xr(c)?ai(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Ju(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const Vrt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Gle=["pre","script","style","textarea"],Hrt={name:"htmlFlow",tokenize:Yrt,resolveTo:Grt,concrete:!0},qrt={tokenize:Xrt,partial:!0},Wrt={tokenize:Krt,partial:!0};function Grt(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Yrt(e,t,n){const r=this;let i,s,o,a,u;return l;function l(j){return c(j)}function c(j){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(j),f}function f(j){return j===33?(e.consume(j),d):j===47?(e.consume(j),s=!0,m):j===63?(e.consume(j),i=3,r.interrupt?t:D):nh(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function d(j){return j===45?(e.consume(j),i=2,h):j===91?(e.consume(j),i=5,a=0,p):nh(j)?(e.consume(j),i=4,r.interrupt?t:D):n(j)}function h(j){return j===45?(e.consume(j),r.interrupt?t:D):n(j)}function p(j){const q="CDATA[";return j===q.charCodeAt(a++)?(e.consume(j),a===q.length?r.interrupt?t:O:p):n(j)}function m(j){return nh(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function g(j){if(j===null||j===47||j===62||Ju(j)){const q=j===47,G=o.toLowerCase();return!q&&!s&&Gle.includes(G)?(i=1,r.interrupt?t(j):O(j)):Vrt.includes(o.toLowerCase())?(i=6,q?(e.consume(j),y):r.interrupt?t(j):O(j)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):s?v(j):b(j))}return j===45||$l(j)?(e.consume(j),o+=String.fromCharCode(j),g):n(j)}function y(j){return j===62?(e.consume(j),r.interrupt?t:O):n(j)}function v(j){return xr(j)?(e.consume(j),v):k(j)}function b(j){return j===47?(e.consume(j),k):j===58||j===95||nh(j)?(e.consume(j),w):xr(j)?(e.consume(j),b):k(j)}function w(j){return j===45||j===46||j===58||j===95||$l(j)?(e.consume(j),w):E(j)}function E(j){return j===61?(e.consume(j),x):xr(j)?(e.consume(j),E):b(j)}function x(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(e.consume(j),u=j,S):xr(j)?(e.consume(j),x):C(j)}function S(j){return j===u?(e.consume(j),u=null,I):j===null||rn(j)?n(j):(e.consume(j),S)}function C(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||Ju(j)?E(j):(e.consume(j),C)}function I(j){return j===47||j===62||xr(j)?b(j):n(j)}function k(j){return j===62?(e.consume(j),R):n(j)}function R(j){return j===null||rn(j)?O(j):xr(j)?(e.consume(j),R):n(j)}function O(j){return j===45&&i===2?(e.consume(j),M):j===60&&i===1?(e.consume(j),B):j===62&&i===4?(e.consume(j),z):j===63&&i===3?(e.consume(j),D):j===93&&i===5?(e.consume(j),V):rn(j)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(qrt,W,P)(j)):j===null||rn(j)?(e.exit("htmlFlowData"),P(j)):(e.consume(j),O)}function P(j){return e.check(Wrt,$,W)(j)}function $(j){return e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),L}function L(j){return j===null||rn(j)?P(j):(e.enter("htmlFlowData"),O(j))}function M(j){return j===45?(e.consume(j),D):O(j)}function B(j){return j===47?(e.consume(j),o="",U):O(j)}function U(j){if(j===62){const q=o.toLowerCase();return Gle.includes(q)?(e.consume(j),z):O(j)}return nh(j)&&o.length<8?(e.consume(j),o+=String.fromCharCode(j),U):O(j)}function V(j){return j===93?(e.consume(j),D):O(j)}function D(j){return j===62?(e.consume(j),z):j===45&&i===2?(e.consume(j),D):O(j)}function z(j){return j===null||rn(j)?(e.exit("htmlFlowData"),W(j)):(e.consume(j),z)}function W(j){return e.exit("htmlFlow"),t(j)}}function Krt(e,t,n){const r=this;return i;function i(o){return rn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function Xrt(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(rF,t,n)}}const Qrt={name:"htmlText",tokenize:Jrt};function Jrt(e,t,n){const r=this;let i,s,o;return a;function a(D){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(D),u}function u(D){return D===33?(e.consume(D),l):D===47?(e.consume(D),E):D===63?(e.consume(D),b):nh(D)?(e.consume(D),C):n(D)}function l(D){return D===45?(e.consume(D),c):D===91?(e.consume(D),s=0,p):nh(D)?(e.consume(D),v):n(D)}function c(D){return D===45?(e.consume(D),h):n(D)}function f(D){return D===null?n(D):D===45?(e.consume(D),d):rn(D)?(o=f,B(D)):(e.consume(D),f)}function d(D){return D===45?(e.consume(D),h):f(D)}function h(D){return D===62?M(D):D===45?d(D):f(D)}function p(D){const z="CDATA[";return D===z.charCodeAt(s++)?(e.consume(D),s===z.length?m:p):n(D)}function m(D){return D===null?n(D):D===93?(e.consume(D),g):rn(D)?(o=m,B(D)):(e.consume(D),m)}function g(D){return D===93?(e.consume(D),y):m(D)}function y(D){return D===62?M(D):D===93?(e.consume(D),y):m(D)}function v(D){return D===null||D===62?M(D):rn(D)?(o=v,B(D)):(e.consume(D),v)}function b(D){return D===null?n(D):D===63?(e.consume(D),w):rn(D)?(o=b,B(D)):(e.consume(D),b)}function w(D){return D===62?M(D):b(D)}function E(D){return nh(D)?(e.consume(D),x):n(D)}function x(D){return D===45||$l(D)?(e.consume(D),x):S(D)}function S(D){return rn(D)?(o=S,B(D)):xr(D)?(e.consume(D),S):M(D)}function C(D){return D===45||$l(D)?(e.consume(D),C):D===47||D===62||Ju(D)?I(D):n(D)}function I(D){return D===47?(e.consume(D),M):D===58||D===95||nh(D)?(e.consume(D),k):rn(D)?(o=I,B(D)):xr(D)?(e.consume(D),I):M(D)}function k(D){return D===45||D===46||D===58||D===95||$l(D)?(e.consume(D),k):R(D)}function R(D){return D===61?(e.consume(D),O):rn(D)?(o=R,B(D)):xr(D)?(e.consume(D),R):I(D)}function O(D){return D===null||D===60||D===61||D===62||D===96?n(D):D===34||D===39?(e.consume(D),i=D,P):rn(D)?(o=O,B(D)):xr(D)?(e.consume(D),O):(e.consume(D),$)}function P(D){return D===i?(e.consume(D),i=void 0,L):D===null?n(D):rn(D)?(o=P,B(D)):(e.consume(D),P)}function $(D){return D===null||D===34||D===39||D===60||D===61||D===96?n(D):D===47||D===62||Ju(D)?I(D):(e.consume(D),$)}function L(D){return D===47||D===62||Ju(D)?I(D):n(D)}function M(D){return D===62?(e.consume(D),e.exit("htmlTextData"),e.exit("htmlText"),t):n(D)}function B(D){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(D),e.exit("lineEnding"),U}function U(D){return xr(D)?ai(e,V,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):V(D)}function V(D){return e.enter("htmlTextData"),o(D)}}const TX={name:"labelEnd",tokenize:iit,resolveTo:rit,resolveAll:nit},Zrt={tokenize:sit},eit={tokenize:oit},tit={tokenize:ait};function nit(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function rit(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=kc(a,e.slice(s+1,s+r+3)),a=kc(a,[["enter",c,t]]),a=kc(a,SX(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=kc(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=kc(a,e.slice(o+1)),a=kc(a,[["exit",u,t]]),Fm(e,s,e.length,a),e}function iit(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(bE(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(Zrt,c,o?c:f)(d):d===91?e.attempt(eit,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(tit,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function sit(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return Ju(f)?XA(e,s)(f):s(f)}function s(f){return f===41?c(f):eTe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Ju(f)?XA(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?nTe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return Ju(f)?XA(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function oit(e,t,n){const r=this;return i;function i(a){return tTe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(bE(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function ait(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const uit={name:"labelStartImage",tokenize:lit,resolveAll:TX.resolveAll};function lit(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const cit={name:"labelStartLink",tokenize:fit,resolveAll:TX.resolveAll};function fit(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const _8={name:"lineEnding",tokenize:dit};function dit(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ai(e,t,"linePrefix")}}const tO={name:"thematicBreak",tokenize:hit};function hit(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||rn(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),xr(l)?ai(e,a,"whitespace")(l):a(l))}}const Tu={name:"list",tokenize:git,continuation:{tokenize:yit},exit:bit},pit={tokenize:_it,partial:!0},mit={tokenize:vit,partial:!0};function git(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:Kz(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(tO,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return Kz(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(rF,r.interrupt?n:c,e.attempt(pit,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return xr(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function yit(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(rF,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ai(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!xr(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(mit,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,ai(e,e.attempt(Tu,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function vit(e,t,n){const r=this;return ai(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function bit(e){e.exit(this.containerState.type)}function _it(e,t,n){const r=this;return ai(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!xr(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Yle={name:"setextUnderline",tokenize:Eit,resolveTo:wit};function wit(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function Eit(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),xr(l)?ai(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||rn(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const xit={tokenize:Sit};function Sit(e){const t=this,n=e.attempt(rF,r,e.attempt(this.parser.constructs.flowInitial,i,ai(e,e.attempt(this.parser.constructs.flow,i,e.attempt(krt,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Tit={resolveAll:iTe()},Cit=rTe("string"),Ait=rTe("text");function rTe(e){return{tokenize:t,resolveAll:iTe(e==="text"?Iit:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function iTe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function Iit(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function kit(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:b,exit:w,attempt:S(E),check:S(x),interrupt:S(x,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(R){return o=kc(o,R),g(),o[o.length-1]!==null?[]:(C(t,0),l.events=SX(s,l.events,l),l.events)}function d(R,O){return Nit(h(R),O)}function h(R){return Rit(o,R)}function p(){const{line:R,column:O,offset:P,_index:$,_bufferIndex:L}=r;return{line:R,column:O,offset:P,_index:$,_bufferIndex:L}}function m(R){i[R.line]=R.column,k()}function g(){let R;for(;r._index<o.length;){const O=o[r._index];if(typeof O=="string")for(R=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===R&&r._bufferIndex<O.length;)y(O.charCodeAt(r._bufferIndex));else y(O)}}function y(R){c=c(R)}function v(R){rn(R)?(r.line++,r.column=1,r.offset+=R===-3?2:1,k()):R!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=R}function b(R,O){const P=O||{};return P.type=R,P.start=p(),l.events.push(["enter",P,l]),a.push(P),P}function w(R){const O=a.pop();return O.end=p(),l.events.push(["exit",O,l]),O}function E(R,O){C(R,O.from)}function x(R,O){O.restore()}function S(R,O){return P;function P($,L,M){let B,U,V,D;return Array.isArray($)?W($):"tokenize"in $?W([$]):z($);function z(te){return le;function le(fe){const de=fe!==null&&te[fe],ye=fe!==null&&te.null,Ie=[...Array.isArray(de)?de:de?[de]:[],...Array.isArray(ye)?ye:ye?[ye]:[]];return W(Ie)(fe)}}function W(te){return B=te,U=0,te.length===0?M:j(te[U])}function j(te){return le;function le(fe){return D=I(),V=te,te.partial||(l.currentConstruct=te),te.name&&l.parser.constructs.disable.null.includes(te.name)?G():te.tokenize.call(O?Object.assign(Object.create(l),O):l,u,q,G)(fe)}}function q(te){return R(V,D),L}function G(te){return D.restore(),++U<B.length?j(B[U]):M}}}function C(R,O){R.resolveAll&&!s.includes(R)&&s.push(R),R.resolve&&Fm(l.events,O,l.events.length-O,R.resolve(l.events.slice(O),l)),R.resolveTo&&(l.events=R.resolveTo(l.events,l))}function I(){const R=p(),O=l.previous,P=l.currentConstruct,$=l.events.length,L=Array.from(a);return{restore:M,from:$};function M(){r=R,l.previous=O,l.currentConstruct=P,l.events.length=$,a=L,k()}}function k(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Rit(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function Nit(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const Dit={42:Tu,43:Tu,45:Tu,48:Tu,49:Tu,50:Tu,51:Tu,52:Tu,53:Tu,54:Tu,55:Tu,56:Tu,57:Tu,62:XSe},Pit={91:Ort},Oit={[-2]:b8,[-1]:b8,32:b8},$it={35:Brt,42:tO,45:[Yle,tO],60:Hrt,61:Yle,95:tO,96:Wle,126:Wle},Mit={38:JSe,92:QSe},Lit={[-5]:_8,[-4]:_8,[-3]:_8,33:uit,38:JSe,42:Xz,60:[crt,Qrt],91:cit,92:[Frt,QSe],93:TX,95:Xz,96:xrt},Fit={null:[Xz,Tit]},jit={null:[42,95]},Bit={null:[]},Uit=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:jit,contentInitial:Pit,disable:Bit,document:Dit,flow:$it,flowInitial:Oit,insideSpan:Fit,string:Mit,text:Lit},Symbol.toStringTag,{value:"Module"}));function zit(e){const n=Knt([Uit,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(rrt),document:i(srt),flow:i(xit),string:i(Cit),text:i(Ait)};return r;function i(s){return o;function o(a){return kit(r,s,a)}}}function Vit(e){for(;!ZSe(e););return e}const Kle=/[\0\t\n\r]/g;function Hit(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Kle.lastIndex=f,l=Kle.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const qit=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Wit(e){return e.replace(qit,Git)}function Git(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return KSe(n.slice(s?2:1),s?16:10)}return xX(n)||e}const sTe={}.hasOwnProperty;function Yit(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Kit(n)(Vit(zit(n).document().write(Hit()(e,t,!0))))}function Kit(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Ve),autolinkProtocol:I,autolinkEmail:I,atxHeading:s(vt),blockQuote:s(ye),characterEscape:I,characterReference:I,codeFenced:s(Ie),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ie,o),codeText:s(pe,o),codeTextData:I,data:I,codeFlowValue:I,definition:s(qe),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Ue),hardBreakEscape:s(it),hardBreakTrailing:s(it),htmlFlow:s(_e,o),htmlFlowData:I,htmlText:s(_e,o),htmlTextData:I,image:s(ke),label:o,link:s(Ve),listItem:s(Mt),listItemValue:d,listOrdered:s(ct,f),listUnordered:s(ct),paragraph:s(Ye),reference:j,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(vt),strong:s(ve),thematicBreak:s(bt)},exit:{atxHeading:u(),atxHeadingSequence:E,autolink:u(),autolinkEmail:de,autolinkProtocol:fe,blockQuote:u(),characterEscapeValue:k,characterReferenceMarkerHexadecimal:G,characterReferenceMarkerNumeric:G,characterReferenceValue:te,characterReference:le,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:k,codeIndented:u(y),codeText:u(L),codeTextData:k,data:k,definition:u(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:b,emphasis:u(),hardBreakEscape:u(O),hardBreakTrailing:u(O),htmlFlow:u(P),htmlFlowData:k,htmlText:u($),htmlTextData:k,image:u(B),label:V,labelText:U,lineEnding:R,link:u(M),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:q,resourceDestinationString:D,resourceTitleString:z,resource:W,setextHeading:u(C),setextHeadingLineSequence:S,setextHeadingText:x,strong:u(),thematicBreak:u()}};oTe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(ge){let Ae={type:"root",children:[]};const We={stack:[Ae],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},ut=[];let wt=-1;for(;++wt<ge.length;)if(ge[wt][1].type==="listOrdered"||ge[wt][1].type==="listUnordered")if(ge[wt][0]==="enter")ut.push(wt);else{const Bn=ut.pop();wt=i(ge,Bn,wt)}for(wt=-1;++wt<ge.length;){const Bn=t[ge[wt][0]];sTe.call(Bn,ge[wt][1].type)&&Bn[ge[wt][1].type].call(Object.assign({sliceSerialize:ge[wt][2].sliceSerialize},We),ge[wt][1])}if(We.tokenStack.length>0){const Bn=We.tokenStack[We.tokenStack.length-1];(Bn[1]||Xle).call(We,void 0,Bn[0])}for(Ae.position={start:$g(ge.length>0?ge[0][1].start:{line:1,column:1,offset:0}),end:$g(ge.length>0?ge[ge.length-2][1].end:{line:1,column:1,offset:0})},wt=-1;++wt<t.transforms.length;)Ae=t.transforms[wt](Ae)||Ae;return Ae}function i(ge,Ae,We){let ut=Ae-1,wt=-1,Bn=!1,kr,Un,pr,bn;for(;++ut<=We;){const Rn=ge[ut];switch(Rn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Rn[0]==="enter"?wt++:wt--,bn=void 0;break}case"lineEndingBlank":{Rn[0]==="enter"&&(kr&&!bn&&!wt&&!pr&&(pr=ut),bn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:bn=void 0}if(!wt&&Rn[0]==="enter"&&Rn[1].type==="listItemPrefix"||wt===-1&&Rn[0]==="exit"&&(Rn[1].type==="listUnordered"||Rn[1].type==="listOrdered")){if(kr){let or=ut;for(Un=void 0;or--;){const ar=ge[or];if(ar[1].type==="lineEnding"||ar[1].type==="lineEndingBlank"){if(ar[0]==="exit")continue;Un&&(ge[Un][1].type="lineEndingBlank",Bn=!0),ar[1].type="lineEnding",Un=or}else if(!(ar[1].type==="linePrefix"||ar[1].type==="blockQuotePrefix"||ar[1].type==="blockQuotePrefixWhitespace"||ar[1].type==="blockQuoteMarker"||ar[1].type==="listItemIndent"))break}pr&&(!Un||pr<Un)&&(kr._spread=!0),kr.end=Object.assign({},Un?ge[Un][1].start:Rn[1].end),ge.splice(Un||ut,0,["exit",kr,Rn[2]]),ut++,We++}if(Rn[1].type==="listItemPrefix"){const or={type:"listItem",_spread:!1,start:Object.assign({},Rn[1].start),end:void 0};kr=or,ge.splice(ut,0,["enter",or,Rn[2]]),ut++,We++,pr=void 0,bn=!0}}}return ge[Ae][1]._spread=Bn,We}function s(ge,Ae){return We;function We(ut){a.call(this,ge(ut),ut),Ae&&Ae.call(this,ut)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(ge,Ae,We){this.stack[this.stack.length-1].children.push(ge),this.stack.push(ge),this.tokenStack.push([Ae,We]),ge.position={start:$g(Ae.start),end:void 0}}function u(ge){return Ae;function Ae(We){ge&&ge.call(this,We),l.call(this,We)}}function l(ge,Ae){const We=this.stack.pop(),ut=this.tokenStack.pop();if(ut)ut[0].type!==ge.type&&(Ae?Ae.call(this,ge,ut[0]):(ut[1]||Xle).call(this,ge,ut[0]));else throw new Error("Cannot close `"+ge.type+"` ("+KA({start:ge.start,end:ge.end})+"): its not open");We.position.end=$g(ge.end)}function c(){return Gnt(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(ge){if(this.data.expectingFirstListItemValue){const Ae=this.stack[this.stack.length-2];Ae.start=Number.parseInt(this.sliceSerialize(ge),10),this.data.expectingFirstListItemValue=void 0}}function h(){const ge=this.resume(),Ae=this.stack[this.stack.length-1];Ae.lang=ge}function p(){const ge=this.resume(),Ae=this.stack[this.stack.length-1];Ae.meta=ge}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const ge=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=ge.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const ge=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=ge.replace(/(\r?\n|\r)$/g,"")}function v(ge){const Ae=this.resume(),We=this.stack[this.stack.length-1];We.label=Ae,We.identifier=bE(this.sliceSerialize(ge)).toLowerCase()}function b(){const ge=this.resume(),Ae=this.stack[this.stack.length-1];Ae.title=ge}function w(){const ge=this.resume(),Ae=this.stack[this.stack.length-1];Ae.url=ge}function E(ge){const Ae=this.stack[this.stack.length-1];if(!Ae.depth){const We=this.sliceSerialize(ge).length;Ae.depth=We}}function x(){this.data.setextHeadingSlurpLineEnding=!0}function S(ge){const Ae=this.stack[this.stack.length-1];Ae.depth=this.sliceSerialize(ge).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function I(ge){const We=this.stack[this.stack.length-1].children;let ut=We[We.length-1];(!ut||ut.type!=="text")&&(ut=pt(),ut.position={start:$g(ge.start),end:void 0},We.push(ut)),this.stack.push(ut)}function k(ge){const Ae=this.stack.pop();Ae.value+=this.sliceSerialize(ge),Ae.position.end=$g(ge.end)}function R(ge){const Ae=this.stack[this.stack.length-1];if(this.data.atHardBreak){const We=Ae.children[Ae.children.length-1];We.position.end=$g(ge.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Ae.type)&&(I.call(this,ge),k.call(this,ge))}function O(){this.data.atHardBreak=!0}function P(){const ge=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=ge}function $(){const ge=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=ge}function L(){const ge=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=ge}function M(){const ge=this.stack[this.stack.length-1];if(this.data.inReference){const Ae=this.data.referenceType||"shortcut";ge.type+="Reference",ge.referenceType=Ae,delete ge.url,delete ge.title}else delete ge.identifier,delete ge.label;this.data.referenceType=void 0}function B(){const ge=this.stack[this.stack.length-1];if(this.data.inReference){const Ae=this.data.referenceType||"shortcut";ge.type+="Reference",ge.referenceType=Ae,delete ge.url,delete ge.title}else delete ge.identifier,delete ge.label;this.data.referenceType=void 0}function U(ge){const Ae=this.sliceSerialize(ge),We=this.stack[this.stack.length-2];We.label=Wit(Ae),We.identifier=bE(Ae).toLowerCase()}function V(){const ge=this.stack[this.stack.length-1],Ae=this.resume(),We=this.stack[this.stack.length-1];if(this.data.inReference=!0,We.type==="link"){const ut=ge.children;We.children=ut}else We.alt=Ae}function D(){const ge=this.resume(),Ae=this.stack[this.stack.length-1];Ae.url=ge}function z(){const ge=this.resume(),Ae=this.stack[this.stack.length-1];Ae.title=ge}function W(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function q(ge){const Ae=this.resume(),We=this.stack[this.stack.length-1];We.label=Ae,We.identifier=bE(this.sliceSerialize(ge)).toLowerCase(),this.data.referenceType="full"}function G(ge){this.data.characterReferenceType=ge.type}function te(ge){const Ae=this.sliceSerialize(ge),We=this.data.characterReferenceType;let ut;We?(ut=KSe(Ae,We==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ut=xX(Ae);const wt=this.stack[this.stack.length-1];wt.value+=ut}function le(ge){const Ae=this.stack.pop();Ae.position.end=$g(ge.end)}function fe(ge){k.call(this,ge);const Ae=this.stack[this.stack.length-1];Ae.url=this.sliceSerialize(ge)}function de(ge){k.call(this,ge);const Ae=this.stack[this.stack.length-1];Ae.url="mailto:"+this.sliceSerialize(ge)}function ye(){return{type:"blockquote",children:[]}}function Ie(){return{type:"code",lang:null,meta:null,value:""}}function pe(){return{type:"inlineCode",value:""}}function qe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ue(){return{type:"emphasis",children:[]}}function vt(){return{type:"heading",depth:0,children:[]}}function it(){return{type:"break"}}function _e(){return{type:"html",value:""}}function ke(){return{type:"image",title:null,url:"",alt:null}}function Ve(){return{type:"link",title:null,url:"",children:[]}}function ct(ge){return{type:"list",ordered:ge.type==="listOrdered",start:null,spread:ge._spread,children:[]}}function Mt(ge){return{type:"listItem",spread:ge._spread,checked:null,children:[]}}function Ye(){return{type:"paragraph",children:[]}}function ve(){return{type:"strong",children:[]}}function pt(){return{type:"text",value:""}}function bt(){return{type:"thematicBreak"}}}function $g(e){return{line:e.line,column:e.column,offset:e.offset}}function oTe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?oTe(e,r):Xit(e,r)}}function Xit(e,t){let n;for(n in t)if(sTe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Xle(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+KA({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+KA({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+KA({start:t.start,end:t.end})+") is still open")}function Qit(e){const t=this;t.parser=n;function n(r){return Yit(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Jit(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Zit(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function est(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function tst(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function nst(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function rst(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=MS(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function ist(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function sst(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function aTe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function ost(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return aTe(e,t);const i={src:MS(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function ast(e,t){const n={src:MS(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function ust(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function lst(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return aTe(e,t);const i={href:MS(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function cst(e,t){const n={href:MS(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function fst(e,t,n){const r=e.all(t),i=n?dst(n):uTe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function dst(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=uTe(n[r])}return t}function uTe(e){const t=e.spread;return t??e.children.length>1}function hst(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function pst(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function mst(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function gst(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function yst(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=cp(t.children[1]),u=nF(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function vst(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function bst(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Qle=9,Jle=32;function _st(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(Zle(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(Zle(t.slice(i),i>0,!1)),s.join("")}function Zle(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===Qle||s===Jle;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===Qle||s===Jle;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function wst(e,t){const n={type:"text",value:_st(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Est(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const xst={blockquote:Jit,break:Zit,code:est,delete:tst,emphasis:nst,footnoteReference:rst,heading:ist,html:sst,imageReference:ost,image:ast,inlineCode:ust,linkReference:lst,link:cst,listItem:fst,list:hst,paragraph:pst,root:mst,strong:gst,table:yst,tableCell:bst,tableRow:vst,text:wst,thematicBreak:Est,toml:mD,yaml:mD,definition:mD,footnoteDefinition:mD};function mD(){}const lTe=-1,iF=0,V$=1,H$=2,CX=3,AX=4,IX=5,kX=6,cTe=7,fTe=8,ece=typeof self=="object"?self:globalThis,Sst=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case iF:case lTe:return n(o,i);case V$:{const a=n([],i);for(const u of o)a.push(r(u));return a}case H$:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case CX:return n(new Date(o),i);case AX:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case IX:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case kX:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case cTe:{const{name:a,message:u}=o;return n(new ece[a](u),i)}case fTe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new ece[s](o),i)};return r},tce=e=>Sst(new Map,e)(0),J_="",{toString:Tst}={},{keys:Cst}=Object,tC=e=>{const t=typeof e;if(t!=="object"||!e)return[iF,t];const n=Tst.call(e).slice(8,-1);switch(n){case"Array":return[V$,J_];case"Object":return[H$,J_];case"Date":return[CX,J_];case"RegExp":return[AX,J_];case"Map":return[IX,J_];case"Set":return[kX,J_]}return n.includes("Array")?[V$,n]:n.includes("Error")?[cTe,n]:[H$,n]},gD=([e,t])=>e===iF&&(t==="function"||t==="symbol"),Ast=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=tC(o);switch(a){case iF:{let c=o;switch(u){case"bigint":a=fTe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([lTe],o)}return i([a,c],o)}case V$:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case H$:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of Cst(o))(e||!gD(tC(o[d])))&&c.push([s(d),s(o[d])]);return f}case CX:return i([a,o.toISOString()],o);case AX:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case IX:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(gD(tC(d))||gD(tC(h))))&&c.push([s(d),s(h)]);return f}case kX:{const c=[],f=i([a,c],o);for(const d of o)(e||!gD(tC(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},nce=(e,{json:t,lossy:n}={})=>{const r=[];return Ast(!(t||n),!!t,new Map,r)(e),r},ox=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?tce(nce(e,t)):structuredClone(e):(e,t)=>tce(nce(e,t));function Ist(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function kst(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Rst(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Ist,r=e.options.footnoteBackLabel||kst,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=MS(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(u,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...ox(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const dTe=function(e){if(e==null)return Ost;if(typeof e=="function")return sF(e);if(typeof e=="object")return Array.isArray(e)?Nst(e):Dst(e);if(typeof e=="string")return Pst(e);throw new Error("Expected function, string, or object as test")};function Nst(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=dTe(e[n]);return sF(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function Dst(e){const t=e;return sF(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function Pst(e){return sF(t);function t(n){return n&&n.type===e}}function sF(e){return t;function t(n,r,i){return!!($st(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Ost(){return!0}function $st(e){return e!==null&&typeof e=="object"&&"type"in e}const hTe=[],Mst=!0,rce=!1,Lst="skip";function Fst(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=dTe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=hTe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=jst(n(u,c)),h[0]===rce))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==Lst)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===rce)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function jst(e){return Array.isArray(e)?e:typeof e=="number"?[Mst,e]:e==null?hTe:[e]}function RX(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),Fst(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const Qz={}.hasOwnProperty,Bst={};function Ust(e,t){const n=t||Bst,r=new Map,i=new Map,s=new Map,o={...xst,...n.handlers},a={all:l,applyData:Vst,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:zst,wrap:qst};return RX(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(Qz.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,y=ox(g);return y.children=a.all(c),y}return ox(c)}return(a.options.unknownHandler||Hst)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=ice(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=ice(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function zst(e,t){e.position&&(t.position=xnt(e))}function Vst(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,ox(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Hst(e,t){const n=t.data||{},r="value"in t&&!(Qz.call(n,"hProperties")||Qz.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function qst(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function ice(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function sce(e,t){const n=Ust(e,t),r=n.one(e,void 0),i=Rst(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Wst(e,t){return e&&"run"in e?async function(n,r){const i=sce(n,{file:r,...t});await e.run(i,r)}:function(n,r){return sce(n,{file:r,...t||e})}}function oce(e){if(e)throw e}var nO=Object.prototype.hasOwnProperty,pTe=Object.prototype.toString,ace=Object.defineProperty,uce=Object.getOwnPropertyDescriptor,lce=function(t){return typeof Array.isArray=="function"?Array.isArray(t):pTe.call(t)==="[object Array]"},cce=function(t){if(!t||pTe.call(t)!=="[object Object]")return!1;var n=nO.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&nO.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||nO.call(t,i)},fce=function(t,n){ace&&n.name==="__proto__"?ace(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},dce=function(t,n){if(n==="__proto__")if(nO.call(t,n)){if(uce)return uce(t,n).value}else return;return t[n]},Gst=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=dce(a,n),i=dce(t,n),a!==i&&(c&&i&&(cce(i)||(s=lce(i)))?(s?(s=!1,o=r&&lce(r)?r:[]):o=r&&cce(r)?r:{},fce(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&fce(a,{name:n,newValue:i}));return a};const w8=ml(Gst);function Jz(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Yst(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?Kst(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Kst(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const Wd={basename:Xst,dirname:Qst,extname:Jst,join:Zst,sep:"/"};function Xst(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');rR(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Qst(e){if(rR(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Jst(e){rR(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Zst(...e){let t=-1,n;for(;++t<e.length;)rR(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":eot(n)}function eot(e){rR(e);const t=e.codePointAt(0)===47;let n=tot(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function tot(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function rR(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const not={cwd:rot};function rot(){return"/"}function Zz(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function iot(e){if(typeof e=="string")e=new URL(e);else if(!Zz(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return sot(e)}function sot(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const E8=["history","path","basename","stem","extname","dirname"];class mTe{constructor(t){let n;t?Zz(t)?n={path:t}:typeof t=="string"||oot(t)?n={value:t}:n=t:n={},this.cwd=not.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<E8.length;){const s=E8[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)E8.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Wd.basename(this.path):void 0}set basename(t){S8(t,"basename"),x8(t,"basename"),this.path=Wd.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Wd.dirname(this.path):void 0}set dirname(t){hce(this.basename,"dirname"),this.path=Wd.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Wd.extname(this.path):void 0}set extname(t){if(x8(t,"extname"),hce(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Wd.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Zz(t)&&(t=iot(t)),S8(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Wd.basename(this.path,this.extname):void 0}set stem(t){S8(t,"stem"),x8(t,"stem"),this.path=Wd.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Oa(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function x8(e,t){if(e&&e.includes(Wd.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Wd.sep+"`")}function S8(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function hce(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function oot(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const aot=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},uot={}.hasOwnProperty;class NX extends aot{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Yst()}copy(){const t=new NX;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(w8(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(A8("data",this.frozen),this.namespace[t]=n,this):uot.call(this.namespace,t)&&this.namespace[t]||void 0:t?(A8("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=yD(t),r=this.parser||this.Parser;return T8("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),T8("process",this.parser||this.Parser),C8("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=yD(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);fot(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),T8("processSync",this.parser||this.Parser),C8("processSync",this.compiler||this.Compiler),this.process(t,i),mce("processSync","process",n),r;function i(s,o){n=!0,oce(s),r=o}}run(t,n,r){pce(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=yD(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),mce("runSync","run",r),i;function s(o,a){oce(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=yD(n),i=this.compiler||this.Compiler;return C8("stringify",i),pce(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(A8("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=w8(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];Jz(m)&&Jz(h)&&(h=w8(!0,m,h)),r[d]=[l,h,...p]}}}}const lot=new NX().freeze();function T8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function C8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function A8(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function pce(e){if(!Jz(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function mce(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function yD(e){return cot(e)?e:new mTe(e)}function cot(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function fot(e){return typeof e=="string"||dot(e)}function dot(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const hot="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",gce=[],yce={allowDangerousHtml:!0},pot=/^(https?|ircs?|mailto|xmpp)$/i,mot=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function got(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||gce,u=e.remarkPlugins||gce,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...yce}:yce,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||yot,h=lot().use(Qit).use(u).use(Wst,l).use(a),p=new mTe;typeof r=="string"&&(p.value=r);for(const v of mot)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+hot+v.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),RX(g,y),knt(g,{Fragment:_.Fragment,components:s,ignoreInvalidStyle:!0,jsx:_.jsx,jsxs:_.jsxs,passKeys:!0,passNode:!0});function y(v,b,w){if(v.type==="raw"&&w&&typeof b=="number")return c?w.children.splice(b,1):w.children[b]={type:"text",value:v.value},b;if(v.type==="element"){let E;for(E in v8)if(Object.hasOwn(v8,E)&&Object.hasOwn(v.properties,E)){const x=v.properties[E],S=v8[E];(S===null||S.includes(v.tagName))&&(v.properties[E]=d(String(x||""),E,v))}}if(v.type==="element"){let E=t?!t.includes(v.tagName):o?o.includes(v.tagName):!1;if(!E&&n&&typeof b=="number"&&(E=!n(v,b,w)),E&&w&&typeof b=="number")return f&&v.children?w.children.splice(b,1,...v.children):w.children.splice(b,1),b}}}function yot(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||pot.test(e.slice(0,t))?e:""}const vce=/[#.]/g;function vot(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){vce.lastIndex=i;const a=vce.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const bot=new Set(["button","menu","reset","submit"]),eV={}.hasOwnProperty;function gTe(e,t,n){const r=n&&xot(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=vot(s,t),l.tagName=l.tagName.toLowerCase(),r&&eV.call(r,l.tagName)&&(l.tagName=r[l.tagName]),_ot(o,l.tagName)){let c;for(c in o)eV.call(o,c)&&wot(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)tV(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function _ot(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?bot.has(e.type.toLowerCase()):!("value"in e)}function wot(e,t,n,r){const i=tF(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=Nle(r):i.commaSeparated?o=Cle(r):i.commaOrSpaceSeparated?o=Nle(Cle(r).join(" ")):o=bce(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?Eot(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=bce(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function tV(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)tV(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?tV(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function bce(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||hI(n)===hI(t)))return!0}return n}function Eot(e){const t=[];let n;for(n in e)eV.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function xot(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const Sot=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Tot=gTe(nR,"div"),Cot=gTe(rv,"g",Sot),I8=/\r?\n|\r/g;function Aot(e){const t=String(e),n=[];for(I8.lastIndex=0;I8.test(t);)n.push(I8.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const k1={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},yTe={}.hasOwnProperty,Iot=Object.prototype;function kot(e,t){const n=t||{};return DX({file:n.file||void 0,location:!1,schema:n.space==="svg"?rv:nR,verbose:n.verbose||!1},e)}function DX(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},rO(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:vTe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=Aot(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},rO(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},rO(e,r,n),n}default:return n=Rot(e,t),n}}function vTe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=DX(e,t[n]);r.push(i)}return r}function Rot(e,t){const n=e.schema;e.schema=t.namespaceURI===k1.svg?rv:nR;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;yTe.call(Iot,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?Cot:Tot)(t.tagName,i,vTe(e,t.childNodes));if(rO(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&Gw(u.startTag),c=u&&u.endTag&&Gw(u.endTag),f=DX(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function rO(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=Not(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function Not(e,t,n){const r=Gw(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)yTe.call(n.attrs,o)&&(s[tF(e.schema,o).property]=Gw(n.attrs[o]));n.startTag;const a=Gw(n.startTag),u=n.endTag?Gw(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function Gw(e){const t=_ce({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=_ce({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function _ce(e){return e.line&&e.column?e:void 0}const wce={}.hasOwnProperty;function bTe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&wce.call(i,e)){const u=String(i[e]);o=wce.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Dot={},Pot={}.hasOwnProperty,_Te=bTe("type",{handlers:{root:$ot,element:Bot,text:Fot,comment:jot,doctype:Lot}});function Oot(e,t){const r=(t||Dot).space;return _Te(e,r==="svg"?rv:nR)}function $ot(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=PX(e.children,n,t),LS(e,n),n}function Mot(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=PX(e.children,n,t),LS(e,n),n}function Lot(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return LS(e,t),t}function Fot(e){const t={nodeName:"#text",value:e.value,parentNode:null};return LS(e,t),t}function jot(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return LS(e,t),t}function Bot(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=rv);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&Pot.call(e.properties,s)){const u=Uot(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:k1[o],childNodes:[],parentNode:null};return a.childNodes=PX(e.children,a,r),LS(e,a),e.tagName==="template"&&e.content&&(a.content=Mot(e.content,r)),a}function Uot(e,t,n){const r=tF(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?DSe(n):USe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=k1[r.space]}return i}function PX(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=_Te(e[r],n);s.parentNode=t,i.push(s)}return i}function LS(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const zot=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],Vot=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),wi="";var X;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(X=X||(X={}));const Eu={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function wTe(e){return e>=55296&&e<=57343}function Hot(e){return e>=56320&&e<=57343}function qot(e,t){return(e-55296)*1024+9216+t}function ETe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function xTe(e){return e>=64976&&e<=65007||Vot.has(e)}var Ne;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ne=Ne||(Ne={}));const Wot=65536;class Got{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Wot,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(Hot(n))return this.pos++,this._addGap(),qot(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,X.EOF;return this._err(Ne.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;const r=this.html.charCodeAt(n);return r===X.CARRIAGE_RETURN?X.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;let t=this.html.charCodeAt(this.pos);return t===X.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,X.LINE_FEED):t===X.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,wTe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===X.LINE_FEED||t===X.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){ETe(t)?this._err(Ne.controlCharacterInInputStream):xTe(t)&&this._err(Ne.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Dn;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(Dn=Dn||(Dn={}));function STe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const Ug=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),Yot=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var k8;const Kot=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Xot=(k8=String.fromCodePoint)!==null&&k8!==void 0?k8:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Qot(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Kot.get(e))!==null&&t!==void 0?t:e}var so;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(so||(so={}));const Jot=32;var gh;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(gh||(gh={}));function nV(e){return e>=so.ZERO&&e<=so.NINE}function Zot(e){return e>=so.UPPER_A&&e<=so.UPPER_F||e>=so.LOWER_A&&e<=so.LOWER_F}function eat(e){return e>=so.UPPER_A&&e<=so.UPPER_Z||e>=so.LOWER_A&&e<=so.LOWER_Z||nV(e)}function tat(e){return e===so.EQUALS||eat(e)}var Js;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Js||(Js={}));var d1;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(d1||(d1={}));class nat{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Js.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=d1.Strict}startEntity(t){this.decodeMode=t,this.state=Js.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Js.EntityStart:return t.charCodeAt(n)===so.NUM?(this.state=Js.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Js.NamedEntity,this.stateNamedEntity(t,n));case Js.NumericStart:return this.stateNumericStart(t,n);case Js.NumericDecimal:return this.stateNumericDecimal(t,n);case Js.NumericHex:return this.stateNumericHex(t,n);case Js.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|Jot)===so.LOWER_X?(this.state=Js.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Js.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(nV(i)||Zot(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(nV(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===so.SEMI)this.consumed+=1;else if(this.decodeMode===d1.Strict)return 0;return this.emitCodePoint(Qot(this.result),this.consumed),this.errors&&(t!==so.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&gh.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=CTe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===d1.Attribute&&(s===0||tat(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&gh.VALUE_LENGTH)>>14,s!==0){if(o===so.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==d1.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&gh.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~gh.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Js.NamedEntity:return this.result!==0&&(this.decodeMode!==d1.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Js.NumericDecimal:return this.emitNumericEntity(0,2);case Js.NumericHex:return this.emitNumericEntity(0,3);case Js.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Js.EntityStart:return 0}}}function TTe(e){let t="";const n=new nat(e,r=>t+=Xot(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function CTe(e,t,n,r){const i=(t&gh.BRANCH_LENGTH)>>7,s=t&gh.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}TTe(Ug);TTe(Yot);var Fe;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Fe=Fe||(Fe={}));var j0;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(j0=j0||(j0={}));var Al;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Al=Al||(Al={}));var Ee;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Ee=Ee||(Ee={}));var N;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(N=N||(N={}));const rat=new Map([[Ee.A,N.A],[Ee.ADDRESS,N.ADDRESS],[Ee.ANNOTATION_XML,N.ANNOTATION_XML],[Ee.APPLET,N.APPLET],[Ee.AREA,N.AREA],[Ee.ARTICLE,N.ARTICLE],[Ee.ASIDE,N.ASIDE],[Ee.B,N.B],[Ee.BASE,N.BASE],[Ee.BASEFONT,N.BASEFONT],[Ee.BGSOUND,N.BGSOUND],[Ee.BIG,N.BIG],[Ee.BLOCKQUOTE,N.BLOCKQUOTE],[Ee.BODY,N.BODY],[Ee.BR,N.BR],[Ee.BUTTON,N.BUTTON],[Ee.CAPTION,N.CAPTION],[Ee.CENTER,N.CENTER],[Ee.CODE,N.CODE],[Ee.COL,N.COL],[Ee.COLGROUP,N.COLGROUP],[Ee.DD,N.DD],[Ee.DESC,N.DESC],[Ee.DETAILS,N.DETAILS],[Ee.DIALOG,N.DIALOG],[Ee.DIR,N.DIR],[Ee.DIV,N.DIV],[Ee.DL,N.DL],[Ee.DT,N.DT],[Ee.EM,N.EM],[Ee.EMBED,N.EMBED],[Ee.FIELDSET,N.FIELDSET],[Ee.FIGCAPTION,N.FIGCAPTION],[Ee.FIGURE,N.FIGURE],[Ee.FONT,N.FONT],[Ee.FOOTER,N.FOOTER],[Ee.FOREIGN_OBJECT,N.FOREIGN_OBJECT],[Ee.FORM,N.FORM],[Ee.FRAME,N.FRAME],[Ee.FRAMESET,N.FRAMESET],[Ee.H1,N.H1],[Ee.H2,N.H2],[Ee.H3,N.H3],[Ee.H4,N.H4],[Ee.H5,N.H5],[Ee.H6,N.H6],[Ee.HEAD,N.HEAD],[Ee.HEADER,N.HEADER],[Ee.HGROUP,N.HGROUP],[Ee.HR,N.HR],[Ee.HTML,N.HTML],[Ee.I,N.I],[Ee.IMG,N.IMG],[Ee.IMAGE,N.IMAGE],[Ee.INPUT,N.INPUT],[Ee.IFRAME,N.IFRAME],[Ee.KEYGEN,N.KEYGEN],[Ee.LABEL,N.LABEL],[Ee.LI,N.LI],[Ee.LINK,N.LINK],[Ee.LISTING,N.LISTING],[Ee.MAIN,N.MAIN],[Ee.MALIGNMARK,N.MALIGNMARK],[Ee.MARQUEE,N.MARQUEE],[Ee.MATH,N.MATH],[Ee.MENU,N.MENU],[Ee.META,N.META],[Ee.MGLYPH,N.MGLYPH],[Ee.MI,N.MI],[Ee.MO,N.MO],[Ee.MN,N.MN],[Ee.MS,N.MS],[Ee.MTEXT,N.MTEXT],[Ee.NAV,N.NAV],[Ee.NOBR,N.NOBR],[Ee.NOFRAMES,N.NOFRAMES],[Ee.NOEMBED,N.NOEMBED],[Ee.NOSCRIPT,N.NOSCRIPT],[Ee.OBJECT,N.OBJECT],[Ee.OL,N.OL],[Ee.OPTGROUP,N.OPTGROUP],[Ee.OPTION,N.OPTION],[Ee.P,N.P],[Ee.PARAM,N.PARAM],[Ee.PLAINTEXT,N.PLAINTEXT],[Ee.PRE,N.PRE],[Ee.RB,N.RB],[Ee.RP,N.RP],[Ee.RT,N.RT],[Ee.RTC,N.RTC],[Ee.RUBY,N.RUBY],[Ee.S,N.S],[Ee.SCRIPT,N.SCRIPT],[Ee.SECTION,N.SECTION],[Ee.SELECT,N.SELECT],[Ee.SOURCE,N.SOURCE],[Ee.SMALL,N.SMALL],[Ee.SPAN,N.SPAN],[Ee.STRIKE,N.STRIKE],[Ee.STRONG,N.STRONG],[Ee.STYLE,N.STYLE],[Ee.SUB,N.SUB],[Ee.SUMMARY,N.SUMMARY],[Ee.SUP,N.SUP],[Ee.TABLE,N.TABLE],[Ee.TBODY,N.TBODY],[Ee.TEMPLATE,N.TEMPLATE],[Ee.TEXTAREA,N.TEXTAREA],[Ee.TFOOT,N.TFOOT],[Ee.TD,N.TD],[Ee.TH,N.TH],[Ee.THEAD,N.THEAD],[Ee.TITLE,N.TITLE],[Ee.TR,N.TR],[Ee.TRACK,N.TRACK],[Ee.TT,N.TT],[Ee.U,N.U],[Ee.UL,N.UL],[Ee.SVG,N.SVG],[Ee.VAR,N.VAR],[Ee.WBR,N.WBR],[Ee.XMP,N.XMP]]);function FS(e){var t;return(t=rat.get(e))!==null&&t!==void 0?t:N.UNKNOWN}const Je=N,iat={[Fe.HTML]:new Set([Je.ADDRESS,Je.APPLET,Je.AREA,Je.ARTICLE,Je.ASIDE,Je.BASE,Je.BASEFONT,Je.BGSOUND,Je.BLOCKQUOTE,Je.BODY,Je.BR,Je.BUTTON,Je.CAPTION,Je.CENTER,Je.COL,Je.COLGROUP,Je.DD,Je.DETAILS,Je.DIR,Je.DIV,Je.DL,Je.DT,Je.EMBED,Je.FIELDSET,Je.FIGCAPTION,Je.FIGURE,Je.FOOTER,Je.FORM,Je.FRAME,Je.FRAMESET,Je.H1,Je.H2,Je.H3,Je.H4,Je.H5,Je.H6,Je.HEAD,Je.HEADER,Je.HGROUP,Je.HR,Je.HTML,Je.IFRAME,Je.IMG,Je.INPUT,Je.LI,Je.LINK,Je.LISTING,Je.MAIN,Je.MARQUEE,Je.MENU,Je.META,Je.NAV,Je.NOEMBED,Je.NOFRAMES,Je.NOSCRIPT,Je.OBJECT,Je.OL,Je.P,Je.PARAM,Je.PLAINTEXT,Je.PRE,Je.SCRIPT,Je.SECTION,Je.SELECT,Je.SOURCE,Je.STYLE,Je.SUMMARY,Je.TABLE,Je.TBODY,Je.TD,Je.TEMPLATE,Je.TEXTAREA,Je.TFOOT,Je.TH,Je.THEAD,Je.TITLE,Je.TR,Je.TRACK,Je.UL,Je.WBR,Je.XMP]),[Fe.MATHML]:new Set([Je.MI,Je.MO,Je.MN,Je.MS,Je.MTEXT,Je.ANNOTATION_XML]),[Fe.SVG]:new Set([Je.TITLE,Je.FOREIGN_OBJECT,Je.DESC]),[Fe.XLINK]:new Set,[Fe.XML]:new Set,[Fe.XMLNS]:new Set};function ATe(e){return e===Je.H1||e===Je.H2||e===Je.H3||e===Je.H4||e===Je.H5||e===Je.H6}Ee.STYLE,Ee.SCRIPT,Ee.XMP,Ee.IFRAME,Ee.NOEMBED,Ee.NOFRAMES,Ee.PLAINTEXT;const sat=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var J;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(J||(J={}));const cs={DATA:J.DATA,RCDATA:J.RCDATA,RAWTEXT:J.RAWTEXT,SCRIPT_DATA:J.SCRIPT_DATA,PLAINTEXT:J.PLAINTEXT,CDATA_SECTION:J.CDATA_SECTION};function QA(e){return e>=X.DIGIT_0&&e<=X.DIGIT_9}function JC(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_Z}function oat(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_Z}function zg(e){return oat(e)||JC(e)}function rV(e){return zg(e)||QA(e)}function ITe(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_F}function kTe(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_F}function aat(e){return QA(e)||ITe(e)||kTe(e)}function vD(e){return e+32}function RTe(e){return e===X.SPACE||e===X.LINE_FEED||e===X.TABULATION||e===X.FORM_FEED}function uat(e){return e===X.EQUALS_SIGN||rV(e)}function Ece(e){return RTe(e)||e===X.SOLIDUS||e===X.GREATER_THAN_SIGN}class lat{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=J.DATA,this.returnState=J.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Got(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Dn.START_TAG,tagName:"",tagID:N.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Dn.END_TAG,tagName:"",tagID:N.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:Dn.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:Dn.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(STe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ne.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=FS(t.tagName),t.type===Dn.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Ne.endTagWithAttributes),t.selfClosing&&this._err(Ne.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case Dn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Dn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Dn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:Dn.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=RTe(t)?Dn.WHITESPACE_CHARACTER:t===X.NULL?Dn.NULL_CHARACTER:Dn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(Dn.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=Ug[0];s>=0&&(s=CTe(Ug,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=Ug[s];const a=o&gh.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==X.SEMICOLON&&this._isCharacterReferenceInAttribute()&&uat(this.preprocessor.peek(1))?(n=[X.AMPERSAND],s+=u):(n=u===0?[Ug[s]&~gh.VALUE_LENGTH]:u===1?[Ug[++s]]:[Ug[++s],Ug[++s]],r=0,i=t!==X.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Ne.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===J.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case J.DATA:{this._stateData(t);break}case J.RCDATA:{this._stateRcdata(t);break}case J.RAWTEXT:{this._stateRawtext(t);break}case J.SCRIPT_DATA:{this._stateScriptData(t);break}case J.PLAINTEXT:{this._statePlaintext(t);break}case J.TAG_OPEN:{this._stateTagOpen(t);break}case J.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case J.TAG_NAME:{this._stateTagName(t);break}case J.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case J.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case J.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case J.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case J.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case J.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case J.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case J.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case J.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case J.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case J.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case J.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case J.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case J.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case J.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case J.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case J.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case J.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case J.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case J.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case J.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case J.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case J.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case J.BOGUS_COMMENT:{this._stateBogusComment(t);break}case J.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case J.COMMENT_START:{this._stateCommentStart(t);break}case J.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case J.COMMENT:{this._stateComment(t);break}case J.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case J.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case J.COMMENT_END:{this._stateCommentEnd(t);break}case J.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case J.DOCTYPE:{this._stateDoctype(t);break}case J.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case J.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case J.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case J.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case J.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case J.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case J.CDATA_SECTION:{this._stateCdataSection(t);break}case J.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case J.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case J.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case J.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case J.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case J.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case J.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case J.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.TAG_OPEN;break}case X.AMPERSAND:{this.returnState=J.DATA,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitCodePoint(t);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case X.AMPERSAND:{this.returnState=J.RCDATA,this.state=J.CHARACTER_REFERENCE;break}case X.LESS_THAN_SIGN:{this.state=J.RCDATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(wi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.RAWTEXT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(wi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(wi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(wi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(zg(t))this._createStartTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.EXCLAMATION_MARK:{this.state=J.MARKUP_DECLARATION_OPEN;break}case X.SOLIDUS:{this.state=J.END_TAG_OPEN;break}case X.QUESTION_MARK:{this._err(Ne.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t);break}case X.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=J.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(zg(t))this._createEndTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.GREATER_THAN_SIGN:{this._err(Ne.missingEndTagName),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.tagName+=wi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(JC(t)?vD(t):t)}}_stateRcdataLessThanSign(t){t===X.SOLIDUS?this.state=J.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){zg(t)?(this.state=J.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=J.BEFORE_ATTRIBUTE_NAME,!1;case X.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=J.SELF_CLOSING_START_TAG,!1;case X.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=J.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===X.SOLIDUS?this.state=J.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){zg(t)?(this.state=J.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case X.SOLIDUS:{this.state=J.SCRIPT_DATA_END_TAG_OPEN;break}case X.EXCLAMATION_MARK:{this.state=J.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=J.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){zg(t)?(this.state=J.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(wi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(wi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(wi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===X.SOLIDUS?this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:zg(t)?(this._emitChars("<"),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){zg(t)?(this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(Eu.SCRIPT,!1)&&Ece(this.preprocessor.peek(Eu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Eu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(wi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(wi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(wi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===X.SOLIDUS?(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(Eu.SCRIPT,!1)&&Ece(this.preprocessor.peek(Eu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Eu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._err(Ne.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=J.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this._leaveAttrName(),this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._leaveAttrName(),this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:{this._err(Ne.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.name+=wi;break}default:this.currentAttr.name+=String.fromCodePoint(JC(t)?vD(t):t)}}_stateAfterAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.EQUALS_SIGN:{this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{this.state=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this.state=J.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingAttributeValue),this.state=J.DATA,this.emitCurrentTagToken();break}default:this.state=J.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=wi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case X.APOSTROPHE:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=wi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_UNQUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=wi;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:case X.EQUALS_SIGN:case X.GRAVE_ACCENT:{this._err(Ne.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this._leaveAttrValue(),this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBetweenAttributes),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case X.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.unexpectedSolidusInTag),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.data+=wi;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(Eu.DASH_DASH,!0)?(this._createCommentToken(Eu.DASH_DASH.length+1),this.state=J.COMMENT_START):this._consumeSequenceIfMatch(Eu.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Eu.DOCTYPE.length+1),this.state=J.DOCTYPE):this._consumeSequenceIfMatch(Eu.CDATA_START,!0)?this.inForeignNode?this.state=J.CDATA_SECTION:(this._err(Ne.cdataInHtmlContent),this._createCommentToken(Eu.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=J.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ne.incorrectlyOpenedComment),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_START_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=J.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END_DASH;break}case X.LESS_THAN_SIGN:{n.data+="<",this.state=J.COMMENT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.data+=wi;break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case X.EXCLAMATION_MARK:{n.data+="!",this.state=J.COMMENT_LESS_THAN_SIGN_BANG;break}case X.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=J.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=J.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==X.GREATER_THAN_SIGN&&t!==X.EOF&&this._err(Ne.nestedComment),this.state=J.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EXCLAMATION_MARK:{this.state=J.COMMENT_END_BANG;break}case X.HYPHEN_MINUS:{n.data+="-";break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{n.data+="--!",this.state=J.COMMENT_END_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ne.incorrectlyClosedComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=J.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case X.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBeforeDoctypeName),this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(JC(t))this._createDoctypeToken(String.fromCharCode(vD(t))),this.state=J.DOCTYPE_NAME;else switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._createDoctypeToken(wi),this.state=J.DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=J.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.AFTER_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.name+=wi;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(JC(t)?vD(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Eu.PUBLIC,!1)?this.state=J.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Eu.SYSTEM,!1)?this.state=J.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ne.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.publicId+=wi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.publicId+=wi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.systemId+=wi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.systemId+=wi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter);break}case X.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case X.RIGHT_SQUARE_BRACKET:{this.state=J.CDATA_SECTION_BRACKET;break}case X.EOF:{this._err(Ne.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===X.RIGHT_SQUARE_BRACKET?this.state=J.CDATA_SECTION_END:(this._emitChars("]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA;break}case X.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===X.NUMBER_SIGN?this.state=J.NUMERIC_CHARACTER_REFERENCE:rV(t)?(this.state=J.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this.state=J.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){rV(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===X.SEMICOLON&&this._err(Ne.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===X.LATIN_SMALL_X||t===X.LATIN_CAPITAL_X?this.state=J.HEXADEMICAL_CHARACTER_REFERENCE_START:QA(t)?(this.state=J.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Ne.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){aat(t)?(this.state=J.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Ne.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){ITe(t)?this.charRefCode=this.charRefCode*16+t-55:kTe(t)?this.charRefCode=this.charRefCode*16+t-87:QA(t)?this.charRefCode=this.charRefCode*16+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){QA(t)?this.charRefCode=this.charRefCode*10+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===X.NULL)this._err(Ne.nullCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Ne.characterReferenceOutsideUnicodeRange),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(wTe(this.charRefCode))this._err(Ne.surrogateCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(xTe(this.charRefCode))this._err(Ne.noncharacterCharacterReference);else if(ETe(this.charRefCode)||this.charRefCode===X.CARRIAGE_RETURN){this._err(Ne.controlCharacterReference);const n=sat.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const NTe=new Set([N.DD,N.DT,N.LI,N.OPTGROUP,N.OPTION,N.P,N.RB,N.RP,N.RT,N.RTC]),xce=new Set([...NTe,N.CAPTION,N.COLGROUP,N.TBODY,N.TD,N.TFOOT,N.TH,N.THEAD,N.TR]),bD=new Map([[N.APPLET,Fe.HTML],[N.CAPTION,Fe.HTML],[N.HTML,Fe.HTML],[N.MARQUEE,Fe.HTML],[N.OBJECT,Fe.HTML],[N.TABLE,Fe.HTML],[N.TD,Fe.HTML],[N.TEMPLATE,Fe.HTML],[N.TH,Fe.HTML],[N.ANNOTATION_XML,Fe.MATHML],[N.MI,Fe.MATHML],[N.MN,Fe.MATHML],[N.MO,Fe.MATHML],[N.MS,Fe.MATHML],[N.MTEXT,Fe.MATHML],[N.DESC,Fe.SVG],[N.FOREIGN_OBJECT,Fe.SVG],[N.TITLE,Fe.SVG]]),cat=[N.H1,N.H2,N.H3,N.H4,N.H5,N.H6],fat=[N.TR,N.TEMPLATE,N.HTML],dat=[N.TBODY,N.TFOOT,N.THEAD,N.TEMPLATE,N.HTML],hat=[N.TABLE,N.TEMPLATE,N.HTML],pat=[N.TD,N.TH];class mat{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=N.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===N.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Fe.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Fe.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(cat,Fe.HTML)}popUntilTableCellPopped(){this.popUntilPopped(pat,Fe.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(hat,Fe.HTML)}clearBackToTableBodyContext(){this.clearBackTo(dat,Fe.HTML)}clearBackToTableRowContext(){this.clearBackTo(fat,Fe.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===N.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===N.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if(bD.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(ATe(n)&&r===Fe.HTML)return!0;if(bD.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if((r===N.UL||r===N.OL)&&i===Fe.HTML||bD.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if(r===N.BUTTON&&i===Fe.HTML||bD.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Fe.HTML){if(r===t)return!0;if(r===N.TABLE||r===N.TEMPLATE||r===N.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Fe.HTML){if(n===N.TBODY||n===N.THEAD||n===N.TFOOT)return!0;if(n===N.TABLE||n===N.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Fe.HTML){if(r===t)return!0;if(r!==N.OPTION&&r!==N.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;NTe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;xce.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&xce.has(this.currentTagId);)this.pop()}}const R8=3;var Mf;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Mf=Mf||(Mf={}));const Sce={type:Mf.Marker};class gat{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===Mf.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<R8)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<R8)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=R8&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(Sce)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Mf.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Mf.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(Sce);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===Mf.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===Mf.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Mf.Element&&n.element===t)}}function Tce(e){return{nodeName:"#text",value:e,parentNode:null}}const Ew={createDocument(){return{nodeName:"#document",mode:Al.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};Ew.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(Ew.isTextNode(n)){n.value+=t;return}}Ew.appendChild(e,Tce(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&Ew.isTextNode(r)?r.value+=t:Ew.insertBefore(e,Tce(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},DTe="html",yat="about:legacy-compat",vat="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",PTe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],bat=[...PTe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],_at=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),OTe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],wat=[...OTe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Cce(e,t){return t.some(n=>e.startsWith(n))}function Eat(e){return e.name===DTe&&e.publicId===null&&(e.systemId===null||e.systemId===yat)}function xat(e){if(e.name!==DTe)return Al.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===vat)return Al.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),_at.has(n))return Al.QUIRKS;let r=t===null?bat:PTe;if(Cce(n,r))return Al.QUIRKS;if(r=t===null?OTe:wat,Cce(n,r))return Al.LIMITED_QUIRKS}return Al.NO_QUIRKS}const Ace={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Sat="definitionurl",Tat="definitionURL",Cat=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),Aat=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Fe.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Fe.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Fe.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Fe.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Fe.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Fe.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Fe.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Fe.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Fe.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Fe.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Fe.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Fe.XMLNS}]]),Iat=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),kat=new Set([N.B,N.BIG,N.BLOCKQUOTE,N.BODY,N.BR,N.CENTER,N.CODE,N.DD,N.DIV,N.DL,N.DT,N.EM,N.EMBED,N.H1,N.H2,N.H3,N.H4,N.H5,N.H6,N.HEAD,N.HR,N.I,N.IMG,N.LI,N.LISTING,N.MENU,N.META,N.NOBR,N.OL,N.P,N.PRE,N.RUBY,N.S,N.SMALL,N.SPAN,N.STRONG,N.STRIKE,N.SUB,N.SUP,N.TABLE,N.TT,N.U,N.UL,N.VAR]);function Rat(e){const t=e.tagID;return t===N.FONT&&e.attrs.some(({name:r})=>r===j0.COLOR||r===j0.SIZE||r===j0.FACE)||kat.has(t)}function $Te(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===Sat){e.attrs[t].name=Tat;break}}function MTe(e){for(let t=0;t<e.attrs.length;t++){const n=Cat.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function OX(e){for(let t=0;t<e.attrs.length;t++){const n=Aat.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function Nat(e){const t=Iat.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=FS(e.tagName))}function Dat(e,t){return t===Fe.MATHML&&(e===N.MI||e===N.MO||e===N.MN||e===N.MS||e===N.MTEXT)}function Pat(e,t,n){if(t===Fe.MATHML&&e===N.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===j0.ENCODING){const i=n[r].value.toLowerCase();return i===Ace.TEXT_HTML||i===Ace.APPLICATION_XML}}return t===Fe.SVG&&(e===N.FOREIGN_OBJECT||e===N.DESC||e===N.TITLE)}function Oat(e,t,n,r){return(!r||r===Fe.HTML)&&Pat(e,t,n)||(!r||r===Fe.MATHML)&&Dat(e,t)}const $at="hidden",Mat=8,Lat=3;var ie;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ie||(ie={}));const Fat={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},LTe=new Set([N.TABLE,N.TBODY,N.TFOOT,N.THEAD,N.TR]),Ice={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Ew,onParseError:null};let kce=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ie.INITIAL,this.originalInsertionMode=ie.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Ice,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new lat(this.options,this),this.activeFormattingElements=new gat(this.treeAdapter),this.fragmentContextID=r?FS(this.treeAdapter.getTagName(r)):N.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new mat(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Ice,...n};t??(t=r.treeAdapter.createElement(Ee.TEMPLATE,Fe.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Fe.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===N.TEMPLATE&&s.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:Fat,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Fe.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Fe.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ie.TEXT}switchToPlaintextParsing(){this.insertionMode=ie.TEXT,this.originalInsertionMode=ie.IN_BODY,this.tokenizer.state=cs.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Ee.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Fe.HTML))switch(this.fragmentContextID){case N.TITLE:case N.TEXTAREA:{this.tokenizer.state=cs.RCDATA;break}case N.STYLE:case N.XMP:case N.IFRAME:case N.NOEMBED:case N.NOFRAMES:case N.NOSCRIPT:{this.tokenizer.state=cs.RAWTEXT;break}case N.SCRIPT:{this.tokenizer.state=cs.SCRIPT_DATA;break}case N.PLAINTEXT:{this.tokenizer.state=cs.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Fe.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Fe.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Ee.HTML,Fe.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,N.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===Dn.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===N.SVG&&this.treeAdapter.getTagName(n)===Ee.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Fe.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===N.MGLYPH||t.tagID===N.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Fe.HTML)}_processToken(t){switch(t.type){case Dn.CHARACTER:{this.onCharacter(t);break}case Dn.NULL_CHARACTER:{this.onNullCharacter(t);break}case Dn.COMMENT:{this.onComment(t);break}case Dn.DOCTYPE:{this.onDoctype(t);break}case Dn.START_TAG:{this._processStartTag(t);break}case Dn.END_TAG:{this.onEndTag(t);break}case Dn.EOF:{this.onEof(t);break}case Dn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return Oat(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===Mf.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ie.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(N.P),this.openElements.popUntilTagNamePopped(N.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case N.TR:{this.insertionMode=ie.IN_ROW;return}case N.TBODY:case N.THEAD:case N.TFOOT:{this.insertionMode=ie.IN_TABLE_BODY;return}case N.CAPTION:{this.insertionMode=ie.IN_CAPTION;return}case N.COLGROUP:{this.insertionMode=ie.IN_COLUMN_GROUP;return}case N.TABLE:{this.insertionMode=ie.IN_TABLE;return}case N.BODY:{this.insertionMode=ie.IN_BODY;return}case N.FRAMESET:{this.insertionMode=ie.IN_FRAMESET;return}case N.SELECT:{this._resetInsertionModeForSelect(t);return}case N.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case N.HTML:{this.insertionMode=this.headElement?ie.AFTER_HEAD:ie.BEFORE_HEAD;return}case N.TD:case N.TH:{if(t>0){this.insertionMode=ie.IN_CELL;return}break}case N.HEAD:{if(t>0){this.insertionMode=ie.IN_HEAD;return}break}}this.insertionMode=ie.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===N.TEMPLATE)break;if(r===N.TABLE){this.insertionMode=ie.IN_SELECT_IN_TABLE;return}}this.insertionMode=ie.IN_SELECT}_isElementCausesFosterParenting(t){return LTe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case N.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Fe.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case N.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return iat[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){plt(this,t);return}switch(this.insertionMode){case ie.INITIAL:{nC(this,t);break}case ie.BEFORE_HTML:{JA(this,t);break}case ie.BEFORE_HEAD:{ZA(this,t);break}case ie.IN_HEAD:{e2(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{t2(this,t);break}case ie.AFTER_HEAD:{n2(this,t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:{jTe(this,t);break}case ie.TEXT:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{N8(this,t);break}case ie.IN_TABLE_TEXT:{qTe(this,t);break}case ie.IN_COLUMN_GROUP:{q$(this,t);break}case ie.AFTER_BODY:{W$(this,t);break}case ie.AFTER_AFTER_BODY:{iO(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){hlt(this,t);return}switch(this.insertionMode){case ie.INITIAL:{nC(this,t);break}case ie.BEFORE_HTML:{JA(this,t);break}case ie.BEFORE_HEAD:{ZA(this,t);break}case ie.IN_HEAD:{e2(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{t2(this,t);break}case ie.AFTER_HEAD:{n2(this,t);break}case ie.TEXT:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{N8(this,t);break}case ie.IN_COLUMN_GROUP:{q$(this,t);break}case ie.AFTER_BODY:{W$(this,t);break}case ie.AFTER_AFTER_BODY:{iO(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){iV(this,t);return}switch(this.insertionMode){case ie.INITIAL:case ie.BEFORE_HTML:case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_TEMPLATE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{iV(this,t);break}case ie.IN_TABLE_TEXT:{rC(this,t);break}case ie.AFTER_BODY:{qat(this,t);break}case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{Wat(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ie.INITIAL:{Gat(this,t);break}case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:{this._err(t,Ne.misplacedDoctype);break}case ie.IN_TABLE_TEXT:{rC(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Ne.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?mlt(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{nC(this,t);break}case ie.BEFORE_HTML:{Yat(this,t);break}case ie.BEFORE_HEAD:{Xat(this,t);break}case ie.IN_HEAD:{_d(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{Zat(this,t);break}case ie.AFTER_HEAD:{tut(this,t);break}case ie.IN_BODY:{$a(this,t);break}case ie.IN_TABLE:{ax(this,t);break}case ie.IN_TABLE_TEXT:{rC(this,t);break}case ie.IN_CAPTION:{Qut(this,t);break}case ie.IN_COLUMN_GROUP:{LX(this,t);break}case ie.IN_TABLE_BODY:{uF(this,t);break}case ie.IN_ROW:{lF(this,t);break}case ie.IN_CELL:{elt(this,t);break}case ie.IN_SELECT:{YTe(this,t);break}case ie.IN_SELECT_IN_TABLE:{nlt(this,t);break}case ie.IN_TEMPLATE:{ilt(this,t);break}case ie.AFTER_BODY:{olt(this,t);break}case ie.IN_FRAMESET:{alt(this,t);break}case ie.AFTER_FRAMESET:{llt(this,t);break}case ie.AFTER_AFTER_BODY:{flt(this,t);break}case ie.AFTER_AFTER_FRAMESET:{dlt(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?glt(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{nC(this,t);break}case ie.BEFORE_HTML:{Kat(this,t);break}case ie.BEFORE_HEAD:{Qat(this,t);break}case ie.IN_HEAD:{Jat(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{eut(this,t);break}case ie.AFTER_HEAD:{nut(this,t);break}case ie.IN_BODY:{aF(this,t);break}case ie.TEXT:{Uut(this,t);break}case ie.IN_TABLE:{mI(this,t);break}case ie.IN_TABLE_TEXT:{rC(this,t);break}case ie.IN_CAPTION:{Jut(this,t);break}case ie.IN_COLUMN_GROUP:{Zut(this,t);break}case ie.IN_TABLE_BODY:{sV(this,t);break}case ie.IN_ROW:{GTe(this,t);break}case ie.IN_CELL:{tlt(this,t);break}case ie.IN_SELECT:{KTe(this,t);break}case ie.IN_SELECT_IN_TABLE:{rlt(this,t);break}case ie.IN_TEMPLATE:{slt(this,t);break}case ie.AFTER_BODY:{QTe(this,t);break}case ie.IN_FRAMESET:{ult(this,t);break}case ie.AFTER_FRAMESET:{clt(this,t);break}case ie.AFTER_AFTER_BODY:{iO(this,t);break}}}onEof(t){switch(this.insertionMode){case ie.INITIAL:{nC(this,t);break}case ie.BEFORE_HTML:{JA(this,t);break}case ie.BEFORE_HEAD:{ZA(this,t);break}case ie.IN_HEAD:{e2(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{t2(this,t);break}case ie.AFTER_HEAD:{n2(this,t);break}case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{VTe(this,t);break}case ie.TEXT:{zut(this,t);break}case ie.IN_TABLE_TEXT:{rC(this,t);break}case ie.IN_TEMPLATE:{XTe(this,t);break}case ie.AFTER_BODY:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{MX(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===X.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.TEXT:case ie.IN_COLUMN_GROUP:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{this._insertCharacters(t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:case ie.AFTER_BODY:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{FTe(this,t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{N8(this,t);break}case ie.IN_TABLE_TEXT:{HTe(this,t);break}}}};function jat(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):zTe(e,t),n}function Bat(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function Uat(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=Lat;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=zat(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function zat(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function Vat(e,t,n){const r=e.treeAdapter.getTagName(t),i=FS(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===N.TEMPLATE&&s===Fe.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Hat(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function $X(e,t){for(let n=0;n<Mat;n++){const r=jat(e,t);if(!r)break;const i=Bat(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=Uat(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&Vat(e,o,s),Hat(e,i,r)}}function iV(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function qat(e,t){e._appendCommentNode(t,e.openElements.items[0])}function Wat(e,t){e._appendCommentNode(t,e.document)}function MX(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function Gat(e,t){e._setDocumentType(t);const n=t.forceQuirks?Al.QUIRKS:xat(t);Eat(t)||e._err(t,Ne.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ie.BEFORE_HTML}function nC(e,t){e._err(t,Ne.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Al.QUIRKS),e.insertionMode=ie.BEFORE_HTML,e._processToken(t)}function Yat(e,t){t.tagID===N.HTML?(e._insertElement(t,Fe.HTML),e.insertionMode=ie.BEFORE_HEAD):JA(e,t)}function Kat(e,t){const n=t.tagID;(n===N.HTML||n===N.HEAD||n===N.BODY||n===N.BR)&&JA(e,t)}function JA(e,t){e._insertFakeRootElement(),e.insertionMode=ie.BEFORE_HEAD,e._processToken(t)}function Xat(e,t){switch(t.tagID){case N.HTML:{$a(e,t);break}case N.HEAD:{e._insertElement(t,Fe.HTML),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD;break}default:ZA(e,t)}}function Qat(e,t){const n=t.tagID;n===N.HEAD||n===N.BODY||n===N.HTML||n===N.BR?ZA(e,t):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function ZA(e,t){e._insertFakeElement(Ee.HEAD,N.HEAD),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD,e._processToken(t)}function _d(e,t){switch(t.tagID){case N.HTML:{$a(e,t);break}case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case N.TITLE:{e._switchToTextParsing(t,cs.RCDATA);break}case N.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,cs.RAWTEXT):(e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_HEAD_NO_SCRIPT);break}case N.NOFRAMES:case N.STYLE:{e._switchToTextParsing(t,cs.RAWTEXT);break}case N.SCRIPT:{e._switchToTextParsing(t,cs.SCRIPT_DATA);break}case N.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ie.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE);break}case N.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:e2(e,t)}}function Jat(e,t){switch(t.tagID){case N.HEAD:{e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD;break}case N.BODY:case N.BR:case N.HTML:{e2(e,t);break}case N.TEMPLATE:{h_(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function h_(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==N.TEMPLATE&&e._err(t,Ne.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(N.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function e2(e,t){e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD,e._processToken(t)}function Zat(e,t){switch(t.tagID){case N.HTML:{$a(e,t);break}case N.BASEFONT:case N.BGSOUND:case N.HEAD:case N.LINK:case N.META:case N.NOFRAMES:case N.STYLE:{_d(e,t);break}case N.NOSCRIPT:{e._err(t,Ne.nestedNoscriptInHead);break}default:t2(e,t)}}function eut(e,t){switch(t.tagID){case N.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ie.IN_HEAD;break}case N.BR:{t2(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function t2(e,t){const n=t.type===Dn.EOF?Ne.openElementsLeftAfterEof:Ne.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ie.IN_HEAD,e._processToken(t)}function tut(e,t){switch(t.tagID){case N.HTML:{$a(e,t);break}case N.BODY:{e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_BODY;break}case N.FRAMESET:{e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_FRAMESET;break}case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:case N.NOFRAMES:case N.SCRIPT:case N.STYLE:case N.TEMPLATE:case N.TITLE:{e._err(t,Ne.abandonedHeadElementChild),e.openElements.push(e.headElement,N.HEAD),_d(e,t),e.openElements.remove(e.headElement);break}case N.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:n2(e,t)}}function nut(e,t){switch(t.tagID){case N.BODY:case N.HTML:case N.BR:{n2(e,t);break}case N.TEMPLATE:{h_(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function n2(e,t){e._insertFakeElement(Ee.BODY,N.BODY),e.insertionMode=ie.IN_BODY,oF(e,t)}function oF(e,t){switch(t.type){case Dn.CHARACTER:{jTe(e,t);break}case Dn.WHITESPACE_CHARACTER:{FTe(e,t);break}case Dn.COMMENT:{iV(e,t);break}case Dn.START_TAG:{$a(e,t);break}case Dn.END_TAG:{aF(e,t);break}case Dn.EOF:{VTe(e,t);break}}}function FTe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function jTe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function rut(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function iut(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function sut(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_FRAMESET)}function out(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Fe.HTML)}function aut(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),ATe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Fe.HTML)}function uut(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function lut(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),n||(e.formElement=e.openElements.current))}function cut(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===N.LI&&i===N.LI||(n===N.DD||n===N.DT)&&(i===N.DD||i===N.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==N.ADDRESS&&i!==N.DIV&&i!==N.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Fe.HTML)}function fut(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.tokenizer.state=cs.PLAINTEXT}function dut(e,t){e.openElements.hasInScope(N.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.framesetOk=!1}function hut(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Ee.A);n&&($X(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function put(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function mut(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(N.NOBR)&&($X(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function gut(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function yut(e,t){e.treeAdapter.getDocumentMode(e.document)!==Al.QUIRKS&&e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_TABLE}function BTe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Fe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function UTe(e){const t=STe(e,j0.TYPE);return t!=null&&t.toLowerCase()===$at}function vut(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Fe.HTML),UTe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function but(e,t){e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0}function _ut(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._appendElement(t,Fe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function wut(e,t){t.tagName=Ee.IMG,t.tagID=N.IMG,BTe(e,t)}function Eut(e,t){e._insertElement(t,Fe.HTML),e.skipNextNewLine=!0,e.tokenizer.state=cs.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ie.TEXT}function xut(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,cs.RAWTEXT)}function Sut(e,t){e.framesetOk=!1,e._switchToTextParsing(t,cs.RAWTEXT)}function Rce(e,t){e._switchToTextParsing(t,cs.RAWTEXT)}function Tut(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ie.IN_TABLE||e.insertionMode===ie.IN_CAPTION||e.insertionMode===ie.IN_TABLE_BODY||e.insertionMode===ie.IN_ROW||e.insertionMode===ie.IN_CELL?ie.IN_SELECT_IN_TABLE:ie.IN_SELECT}function Cut(e,t){e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML)}function Aut(e,t){e.openElements.hasInScope(N.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Fe.HTML)}function Iut(e,t){e.openElements.hasInScope(N.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(N.RTC),e._insertElement(t,Fe.HTML)}function kut(e,t){e._reconstructActiveFormattingElements(),$Te(t),OX(t),t.selfClosing?e._appendElement(t,Fe.MATHML):e._insertElement(t,Fe.MATHML),t.ackSelfClosing=!0}function Rut(e,t){e._reconstructActiveFormattingElements(),MTe(t),OX(t),t.selfClosing?e._appendElement(t,Fe.SVG):e._insertElement(t,Fe.SVG),t.ackSelfClosing=!0}function Nce(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML)}function $a(e,t){switch(t.tagID){case N.I:case N.S:case N.B:case N.U:case N.EM:case N.TT:case N.BIG:case N.CODE:case N.FONT:case N.SMALL:case N.STRIKE:case N.STRONG:{put(e,t);break}case N.A:{hut(e,t);break}case N.H1:case N.H2:case N.H3:case N.H4:case N.H5:case N.H6:{aut(e,t);break}case N.P:case N.DL:case N.OL:case N.UL:case N.DIV:case N.DIR:case N.NAV:case N.MAIN:case N.MENU:case N.ASIDE:case N.CENTER:case N.FIGURE:case N.FOOTER:case N.HEADER:case N.HGROUP:case N.DIALOG:case N.DETAILS:case N.ADDRESS:case N.ARTICLE:case N.SECTION:case N.SUMMARY:case N.FIELDSET:case N.BLOCKQUOTE:case N.FIGCAPTION:{out(e,t);break}case N.LI:case N.DD:case N.DT:{cut(e,t);break}case N.BR:case N.IMG:case N.WBR:case N.AREA:case N.EMBED:case N.KEYGEN:{BTe(e,t);break}case N.HR:{_ut(e,t);break}case N.RB:case N.RTC:{Aut(e,t);break}case N.RT:case N.RP:{Iut(e,t);break}case N.PRE:case N.LISTING:{uut(e,t);break}case N.XMP:{xut(e,t);break}case N.SVG:{Rut(e,t);break}case N.HTML:{rut(e,t);break}case N.BASE:case N.LINK:case N.META:case N.STYLE:case N.TITLE:case N.SCRIPT:case N.BGSOUND:case N.BASEFONT:case N.TEMPLATE:{_d(e,t);break}case N.BODY:{iut(e,t);break}case N.FORM:{lut(e,t);break}case N.NOBR:{mut(e,t);break}case N.MATH:{kut(e,t);break}case N.TABLE:{yut(e,t);break}case N.INPUT:{vut(e,t);break}case N.PARAM:case N.TRACK:case N.SOURCE:{but(e,t);break}case N.IMAGE:{wut(e,t);break}case N.BUTTON:{dut(e,t);break}case N.APPLET:case N.OBJECT:case N.MARQUEE:{gut(e,t);break}case N.IFRAME:{Sut(e,t);break}case N.SELECT:{Tut(e,t);break}case N.OPTION:case N.OPTGROUP:{Cut(e,t);break}case N.NOEMBED:{Rce(e,t);break}case N.FRAMESET:{sut(e,t);break}case N.TEXTAREA:{Eut(e,t);break}case N.NOSCRIPT:{e.options.scriptingEnabled?Rce(e,t):Nce(e,t);break}case N.PLAINTEXT:{fut(e,t);break}case N.COL:case N.TH:case N.TD:case N.TR:case N.HEAD:case N.FRAME:case N.TBODY:case N.TFOOT:case N.THEAD:case N.CAPTION:case N.COLGROUP:break;default:Nce(e,t)}}function Nut(e,t){if(e.openElements.hasInScope(N.BODY)&&(e.insertionMode=ie.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function Dut(e,t){e.openElements.hasInScope(N.BODY)&&(e.insertionMode=ie.AFTER_BODY,QTe(e,t))}function Put(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function Out(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(N.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(N.FORM):n&&e.openElements.remove(n))}function $ut(e){e.openElements.hasInButtonScope(N.P)||e._insertFakeElement(Ee.P,N.P),e._closePElement()}function Mut(e){e.openElements.hasInListItemScope(N.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(N.LI),e.openElements.popUntilTagNamePopped(N.LI))}function Lut(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function Fut(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function jut(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function But(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Ee.BR,N.BR),e.openElements.pop(),e.framesetOk=!1}function zTe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==N.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function aF(e,t){switch(t.tagID){case N.A:case N.B:case N.I:case N.S:case N.U:case N.EM:case N.TT:case N.BIG:case N.CODE:case N.FONT:case N.NOBR:case N.SMALL:case N.STRIKE:case N.STRONG:{$X(e,t);break}case N.P:{$ut(e);break}case N.DL:case N.UL:case N.OL:case N.DIR:case N.DIV:case N.NAV:case N.PRE:case N.MAIN:case N.MENU:case N.ASIDE:case N.BUTTON:case N.CENTER:case N.FIGURE:case N.FOOTER:case N.HEADER:case N.HGROUP:case N.DIALOG:case N.ADDRESS:case N.ARTICLE:case N.DETAILS:case N.SECTION:case N.SUMMARY:case N.LISTING:case N.FIELDSET:case N.BLOCKQUOTE:case N.FIGCAPTION:{Put(e,t);break}case N.LI:{Mut(e);break}case N.DD:case N.DT:{Lut(e,t);break}case N.H1:case N.H2:case N.H3:case N.H4:case N.H5:case N.H6:{Fut(e);break}case N.BR:{But(e);break}case N.BODY:{Nut(e,t);break}case N.HTML:{Dut(e,t);break}case N.FORM:{Out(e);break}case N.APPLET:case N.OBJECT:case N.MARQUEE:{jut(e,t);break}case N.TEMPLATE:{h_(e,t);break}default:zTe(e,t)}}function VTe(e,t){e.tmplInsertionModeStack.length>0?XTe(e,t):MX(e,t)}function Uut(e,t){var n;t.tagID===N.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function zut(e,t){e._err(t,Ne.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function N8(e,t){if(LTe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ie.IN_TABLE_TEXT,t.type){case Dn.CHARACTER:{qTe(e,t);break}case Dn.WHITESPACE_CHARACTER:{HTe(e,t);break}}else iR(e,t)}function Vut(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_CAPTION}function Hut(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_COLUMN_GROUP}function qut(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ee.COLGROUP,N.COLGROUP),e.insertionMode=ie.IN_COLUMN_GROUP,LX(e,t)}function Wut(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_TABLE_BODY}function Gut(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ee.TBODY,N.TBODY),e.insertionMode=ie.IN_TABLE_BODY,uF(e,t)}function Yut(e,t){e.openElements.hasInTableScope(N.TABLE)&&(e.openElements.popUntilTagNamePopped(N.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function Kut(e,t){UTe(t)?e._appendElement(t,Fe.HTML):iR(e,t),t.ackSelfClosing=!0}function Xut(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Fe.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function ax(e,t){switch(t.tagID){case N.TD:case N.TH:case N.TR:{Gut(e,t);break}case N.STYLE:case N.SCRIPT:case N.TEMPLATE:{_d(e,t);break}case N.COL:{qut(e,t);break}case N.FORM:{Xut(e,t);break}case N.TABLE:{Yut(e,t);break}case N.TBODY:case N.TFOOT:case N.THEAD:{Wut(e,t);break}case N.INPUT:{Kut(e,t);break}case N.CAPTION:{Vut(e,t);break}case N.COLGROUP:{Hut(e,t);break}default:iR(e,t)}}function mI(e,t){switch(t.tagID){case N.TABLE:{e.openElements.hasInTableScope(N.TABLE)&&(e.openElements.popUntilTagNamePopped(N.TABLE),e._resetInsertionMode());break}case N.TEMPLATE:{h_(e,t);break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TBODY:case N.TD:case N.TFOOT:case N.TH:case N.THEAD:case N.TR:break;default:iR(e,t)}}function iR(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,oF(e,t),e.fosterParentingEnabled=n}function HTe(e,t){e.pendingCharacterTokens.push(t)}function qTe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function rC(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)iR(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const WTe=new Set([N.CAPTION,N.COL,N.COLGROUP,N.TBODY,N.TD,N.TFOOT,N.TH,N.THEAD,N.TR]);function Qut(e,t){const n=t.tagID;WTe.has(n)?e.openElements.hasInTableScope(N.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,ax(e,t)):$a(e,t)}function Jut(e,t){const n=t.tagID;switch(n){case N.CAPTION:case N.TABLE:{e.openElements.hasInTableScope(N.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,n===N.TABLE&&mI(e,t));break}case N.BODY:case N.COL:case N.COLGROUP:case N.HTML:case N.TBODY:case N.TD:case N.TFOOT:case N.TH:case N.THEAD:case N.TR:break;default:aF(e,t)}}function LX(e,t){switch(t.tagID){case N.HTML:{$a(e,t);break}case N.COL:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case N.TEMPLATE:{_d(e,t);break}default:q$(e,t)}}function Zut(e,t){switch(t.tagID){case N.COLGROUP:{e.openElements.currentTagId===N.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case N.TEMPLATE:{h_(e,t);break}case N.COL:break;default:q$(e,t)}}function q$(e,t){e.openElements.currentTagId===N.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE,e._processToken(t))}function uF(e,t){switch(t.tagID){case N.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_ROW;break}case N.TH:case N.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Ee.TR,N.TR),e.insertionMode=ie.IN_ROW,lF(e,t);break}case N.CAPTION:case N.COL:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,ax(e,t));break}default:ax(e,t)}}function sV(e,t){const n=t.tagID;switch(t.tagID){case N.TBODY:case N.TFOOT:case N.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case N.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,mI(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TD:case N.TH:case N.TR:break;default:mI(e,t)}}function lF(e,t){switch(t.tagID){case N.TH:case N.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_CELL,e.activeFormattingElements.insertMarker();break}case N.CAPTION:case N.COL:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:case N.TR:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,uF(e,t));break}default:ax(e,t)}}function GTe(e,t){switch(t.tagID){case N.TR:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY);break}case N.TABLE:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,sV(e,t));break}case N.TBODY:case N.TFOOT:case N.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(N.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,sV(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TD:case N.TH:break;default:mI(e,t)}}function elt(e,t){const n=t.tagID;WTe.has(n)?(e.openElements.hasInTableScope(N.TD)||e.openElements.hasInTableScope(N.TH))&&(e._closeTableCell(),lF(e,t)):$a(e,t)}function tlt(e,t){const n=t.tagID;switch(n){case N.TD:case N.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_ROW);break}case N.TABLE:case N.TBODY:case N.TFOOT:case N.THEAD:case N.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),GTe(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:break;default:aF(e,t)}}function YTe(e,t){switch(t.tagID){case N.HTML:{$a(e,t);break}case N.OPTION:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e._insertElement(t,Fe.HTML);break}case N.OPTGROUP:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e.openElements.currentTagId===N.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Fe.HTML);break}case N.INPUT:case N.KEYGEN:case N.TEXTAREA:case N.SELECT:{e.openElements.hasInSelectScope(N.SELECT)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),t.tagID!==N.SELECT&&e._processStartTag(t));break}case N.SCRIPT:case N.TEMPLATE:{_d(e,t);break}}}function KTe(e,t){switch(t.tagID){case N.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===N.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===N.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===N.OPTGROUP&&e.openElements.pop();break}case N.OPTION:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop();break}case N.SELECT:{e.openElements.hasInSelectScope(N.SELECT)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode());break}case N.TEMPLATE:{h_(e,t);break}}}function nlt(e,t){const n=t.tagID;n===N.CAPTION||n===N.TABLE||n===N.TBODY||n===N.TFOOT||n===N.THEAD||n===N.TR||n===N.TD||n===N.TH?(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),e._processStartTag(t)):YTe(e,t)}function rlt(e,t){const n=t.tagID;n===N.CAPTION||n===N.TABLE||n===N.TBODY||n===N.TFOOT||n===N.THEAD||n===N.TR||n===N.TD||n===N.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),e.onEndTag(t)):KTe(e,t)}function ilt(e,t){switch(t.tagID){case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:case N.NOFRAMES:case N.SCRIPT:case N.STYLE:case N.TEMPLATE:case N.TITLE:{_d(e,t);break}case N.CAPTION:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:{e.tmplInsertionModeStack[0]=ie.IN_TABLE,e.insertionMode=ie.IN_TABLE,ax(e,t);break}case N.COL:{e.tmplInsertionModeStack[0]=ie.IN_COLUMN_GROUP,e.insertionMode=ie.IN_COLUMN_GROUP,LX(e,t);break}case N.TR:{e.tmplInsertionModeStack[0]=ie.IN_TABLE_BODY,e.insertionMode=ie.IN_TABLE_BODY,uF(e,t);break}case N.TD:case N.TH:{e.tmplInsertionModeStack[0]=ie.IN_ROW,e.insertionMode=ie.IN_ROW,lF(e,t);break}default:e.tmplInsertionModeStack[0]=ie.IN_BODY,e.insertionMode=ie.IN_BODY,$a(e,t)}}function slt(e,t){t.tagID===N.TEMPLATE&&h_(e,t)}function XTe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(N.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):MX(e,t)}function olt(e,t){t.tagID===N.HTML?$a(e,t):W$(e,t)}function QTe(e,t){var n;if(t.tagID===N.HTML){if(e.fragmentContext||(e.insertionMode=ie.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===N.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else W$(e,t)}function W$(e,t){e.insertionMode=ie.IN_BODY,oF(e,t)}function alt(e,t){switch(t.tagID){case N.HTML:{$a(e,t);break}case N.FRAMESET:{e._insertElement(t,Fe.HTML);break}case N.FRAME:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case N.NOFRAMES:{_d(e,t);break}}}function ult(e,t){t.tagID===N.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==N.FRAMESET&&(e.insertionMode=ie.AFTER_FRAMESET))}function llt(e,t){switch(t.tagID){case N.HTML:{$a(e,t);break}case N.NOFRAMES:{_d(e,t);break}}}function clt(e,t){t.tagID===N.HTML&&(e.insertionMode=ie.AFTER_AFTER_FRAMESET)}function flt(e,t){t.tagID===N.HTML?$a(e,t):iO(e,t)}function iO(e,t){e.insertionMode=ie.IN_BODY,oF(e,t)}function dlt(e,t){switch(t.tagID){case N.HTML:{$a(e,t);break}case N.NOFRAMES:{_d(e,t);break}}}function hlt(e,t){t.chars=wi,e._insertCharacters(t)}function plt(e,t){e._insertCharacters(t),e.framesetOk=!1}function JTe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Fe.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function mlt(e,t){if(Rat(t))JTe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Fe.MATHML?$Te(t):r===Fe.SVG&&(Nat(t),MTe(t)),OX(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function glt(e,t){if(t.tagID===N.P||t.tagID===N.BR){JTe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Fe.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Ee.AREA,Ee.BASE,Ee.BASEFONT,Ee.BGSOUND,Ee.BR,Ee.COL,Ee.EMBED,Ee.FRAME,Ee.HR,Ee.IMG,Ee.INPUT,Ee.KEYGEN,Ee.LINK,Ee.META,Ee.PARAM,Ee.SOURCE,Ee.TRACK,Ee.WBR;const ylt=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Dce={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function ZTe(e,t){const n=Alt(e),r=bTe("type",{handlers:{root:vlt,element:blt,text:_lt,comment:tCe,doctype:wlt,raw:xlt},unknown:Slt}),i={parser:n?new kce(Dce):kce.getFragmentParser(void 0,Dce),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),jS(i,cp());const s=n?i.parser.document:i.parser.getFragment(),o=kot(s,{file:i.options.file});return i.stitches&&RX(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function eCe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function vlt(e,t){eCe(e.children,t)}function blt(e,t){Tlt(e,t),eCe(e.children,t),Clt(e,t)}function _lt(e,t){const n={type:Dn.CHARACTER,chars:e.value,location:sR(e)};jS(t,cp(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function wlt(e,t){const n={type:Dn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:sR(e)};jS(t,cp(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Elt(e,t){t.stitches=!0;const n=Ilt(e);if("children"in e&&"children"in n){const r=ZTe({type:"root",children:e.children},t.options);n.children=r.children}tCe({type:"comment",value:{stitch:n}},t)}function tCe(e,t){const n=e.value,r={type:Dn.COMMENT,data:n,location:sR(e)};jS(t,cp(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function xlt(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,nCe(t,cp(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function Slt(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))Elt(n,t);else{let r="";throw ylt.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function jS(e,t){nCe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=cs.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function nCe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function Tlt(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===cs.PLAINTEXT)return;jS(t,cp(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:k1.html;i===k1.html&&n==="svg"&&(i=k1.svg);const s=Oot({...e,children:[]},{space:i===k1.svg?"svg":"html"}),o={type:Dn.START_TAG,tagName:n,tagID:FS(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:sR(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function Clt(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&zot.includes(n)||t.parser.tokenizer.state===cs.PLAINTEXT)return;jS(t,nF(e));const r={type:Dn.END_TAG,tagName:n,tagID:FS(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:sR(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===cs.RCDATA||t.parser.tokenizer.state===cs.RAWTEXT||t.parser.tokenizer.state===cs.SCRIPT_DATA)&&(t.parser.tokenizer.state=cs.DATA)}function Alt(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function sR(e){const t=cp(e)||{line:void 0,column:void 0,offset:void 0},n=nF(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function Ilt(e){return"children"in e?ox({...e,children:[]}):ox(e)}function klt(e){return function(t,n){return ZTe(t,{...e,file:n})}}function su({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return _.jsx(dg,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return _.jsx(ze,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return _.jsx(ki,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return _.jsx(ki,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return _.jsx(ki,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return _.jsx(ki,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return _.jsx(ki,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return _.jsx(ki,{...s,order:6,...s,pb:12})},a({node:i,...s}){return _.jsx(o_,{...s,ref:void 0})},ul({node:i,...s}){return _.jsx(td,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return _.jsx(td,{type:"ordered",withPadding:!0,...o,pb:8})}};return _.jsx(got,{components:n,rehypePlugins:[klt],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function oV({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return _.jsx(su,{text:n})}const Rlt="https://github.com/revisit-studies/study/tree/main/public/";function Nlt({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=lp();return _.jsx(yi.Main,{children:_.jsxs(Xc,{size:"xs",px:"xs",children:[_.jsx(dg,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Qu}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),_.jsx(ze,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=NSe(i);return _.jsx(Is,{onClick:a=>{a.preventDefault(),r(`/${o}`)},my:"sm",style:{width:"100%"},children:_.jsxs(a_,{shadow:"sm",radius:"md",withBorder:!0,children:[s.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(ze,{fw:"bold",children:i}),_.jsxs(Nt,{align:"center",direction:"row",children:[_.jsx(Sle,{color:"red"}),_.jsx(ze,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),_.jsx(oV,{issues:s.errors,type:"error"})]}):_.jsxs(_.Fragment,{children:[_.jsxs(Nt,{direction:"row",justify:"space-between",children:[_.jsx(ze,{fw:"bold",children:s.studyMetadata.title}),_.jsx(s_,{onClick:a=>{a.stopPropagation()},variant:"transparent",size:20,style:{float:"right"},component:"a",href:`${Qu}${o}`,children:_.jsx(Dtt,{style:{paddingTop:4}})})]}),_.jsxs(ze,{c:"dimmed",children:[_.jsx(ze,{span:!0,fw:500,children:"Authors: "}),s.studyMetadata.authors]}),_.jsx(ze,{c:"dimmed",children:s.studyMetadata.description}),_.jsx(ze,{c:"dimmed",ta:"right",style:{paddingRight:5},children:_.jsxs(o_,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${Rlt}${o}`,children:["View source:"," ",o]})})]}),s.warnings.length>0&&_.jsxs(_.Fragment,{children:[_.jsxs(Nt,{align:"center",direction:"row",children:[_.jsx(Sle,{color:"orange"}),_.jsx(ze,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),_.jsx(oV,{issues:s.warnings,type:"warning"})]})]})},i)})]})})}var rCe={exports:{}},iCe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oR=A;function Dlt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Plt=typeof Object.is=="function"?Object.is:Dlt,Olt=oR.useSyncExternalStore,$lt=oR.useRef,Mlt=oR.useEffect,Llt=oR.useMemo,Flt=oR.useDebugValue;iCe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=$lt(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Llt(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,Plt(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=Olt(e,s[0],s[1]);return Mlt(function(){o.hasValue=!0,o.value=a},[a]),Flt(a),a};rCe.exports=iCe;var jlt=rCe.exports,Ml="default"in i$?Pt:i$,Pce=Symbol.for("react-redux-context"),Oce=typeof globalThis<"u"?globalThis:{};function Blt(){if(!Ml.createContext)return{};const e=Oce[Pce]??(Oce[Pce]=new Map);let t=e.get(Ml.createContext);return t||(t=Ml.createContext(null),e.set(Ml.createContext,t)),t}var ly=Blt(),Ult=()=>{throw new Error("uSES not initialized!")};function FX(e=ly){return function(){return Ml.useContext(e)}}var sCe=FX(),oCe=Ult,zlt=e=>{oCe=e},Vlt=(e,t)=>e===t;function Hlt(e=ly){const t=e===ly?sCe:FX(e),n=(r,i={})=>{const{equalityFn:s=Vlt,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();Ml.useRef(!0);const d=Ml.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=oCe(u.addNestedSub,a.getState,l||a.getState,d,s);return Ml.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var qlt=Hlt();function Wlt(e){e()}function Glt(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Wlt(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var $ce={notify(){},get:()=>[]};function Ylt(e,t){let n,r=$ce,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=Glt())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=$ce)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var Klt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Xlt=typeof navigator<"u"&&navigator.product==="ReactNative",Qlt=Klt||Xlt?Ml.useLayoutEffect:Ml.useEffect;function Jlt({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=Ml.useMemo(()=>{const l=Ylt(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=Ml.useMemo(()=>e.getState(),[e]);Qlt(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||ly;return Ml.createElement(u.Provider,{value:o},n)}var Zlt=Jlt;function aCe(e=ly){const t=e===ly?sCe:FX(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var ect=aCe();function tct(e=ly){const t=e===ly?ect:aCe(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var uCe=tct();zlt(jlt.useSyncExternalStoreWithSelector);function Ro(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var nct=typeof Symbol=="function"&&Symbol.observable||"@@observable",Mce=nct,D8=()=>Math.random().toString(36).substring(7).split("").join("."),rct={INIT:`@@redux/INIT${D8()}`,REPLACE:`@@redux/REPLACE${D8()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${D8()}`},G$=rct;function jX(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function lCe(e,t,n){if(typeof e!="function")throw new Error(Ro(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ro(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ro(1));return n(lCe)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(u)throw new Error(Ro(3));return i}function f(g){if(typeof g!="function")throw new Error(Ro(4));if(u)throw new Error(Ro(5));let y=!0;l();const v=a++;return o.set(v,g),function(){if(y){if(u)throw new Error(Ro(6));y=!1,l(),o.delete(v),s=null}}}function d(g){if(!jX(g))throw new Error(Ro(7));if(typeof g.type>"u")throw new Error(Ro(8));if(typeof g.type!="string")throw new Error(Ro(17));if(u)throw new Error(Ro(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(Ro(10));r=g,d({type:G$.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Ro(11));function v(){const w=y;w.next&&w.next(c())}return v(),{unsubscribe:g(v)}},[Mce](){return this}}}return d({type:G$.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[Mce]:p}}function ict(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:G$.INIT})>"u")throw new Error(Ro(12));if(typeof n(void 0,{type:G$.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ro(13))})}function sct(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{ict(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(Ro(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function Y$(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function oct(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Ro(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=Y$(...a)(i.dispatch),{...i,dispatch:s}}}function act(e){return jX(e)&&"type"in e&&typeof e.type=="string"}var cCe=Symbol.for("immer-nothing"),Lce=Symbol.for("immer-draftable"),Ql=Symbol.for("immer-state");function Ff(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ux=Object.getPrototypeOf;function cy(e){return!!e&&!!e[Ql]}function jm(e){var t;return e?fCe(e)||Array.isArray(e)||!!e[Lce]||!!((t=e.constructor)!=null&&t[Lce])||fF(e)||dF(e):!1}var uct=Object.prototype.constructor.toString();function fCe(e){if(!e||typeof e!="object")return!1;const t=ux(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===uct}function K$(e,t){cF(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function cF(e){const t=e[Ql];return t?t.type_:Array.isArray(e)?1:fF(e)?2:dF(e)?3:0}function aV(e,t){return cF(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function dCe(e,t,n){const r=cF(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function lct(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function fF(e){return e instanceof Map}function dF(e){return e instanceof Set}function Xv(e){return e.copy_||e.base_}function uV(e,t){if(fF(e))return new Map(e);if(dF(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=fCe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Ql];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(ux(e),r)}else{const r=ux(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function BX(e,t=!1){return hF(e)||cy(e)||!jm(e)||(cF(e)>1&&(e.set=e.add=e.clear=e.delete=cct),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>BX(r,!0))),e}function cct(){Ff(2)}function hF(e){return Object.isFrozen(e)}var fct={};function hb(e){const t=fct[e];return t||Ff(0,e),t}var gI;function hCe(){return gI}function dct(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Fce(e,t){t&&(hb("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function lV(e){cV(e),e.drafts_.forEach(hct),e.drafts_=null}function cV(e){e===gI&&(gI=e.parent_)}function jce(e){return gI=dct(gI,e)}function hct(e){const t=e[Ql];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Bce(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Ql].modified_&&(lV(t),Ff(4)),jm(e)&&(e=X$(t,e),t.parent_||Q$(t,e)),t.patches_&&hb("Patches").generateReplacementPatches_(n[Ql].base_,e,t.patches_,t.inversePatches_)):e=X$(t,n,[]),lV(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==cCe?e:void 0}function X$(e,t,n){if(hF(t))return t;const r=t[Ql];if(!r)return K$(t,(i,s)=>Uce(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Q$(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),K$(s,(a,u)=>Uce(e,r,i,a,u,n,o)),Q$(e,i,!1),n&&e.patches_&&hb("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Uce(e,t,n,r,i,s,o){if(cy(i)){const a=s&&t&&t.type_!==3&&!aV(t.assigned_,r)?s.concat(r):void 0,u=X$(e,i,a);if(dCe(n,r,u),cy(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(jm(i)&&!hF(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;X$(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Q$(e,i)}}function Q$(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&BX(t,n)}function pct(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:hCe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=UX;n&&(i=[r],s=yI);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var UX={get(e,t){if(t===Ql)return e;const n=Xv(e);if(!aV(n,t))return mct(e,n,t);const r=n[t];return e.finalized_||!jm(r)?r:r===P8(e.base_,t)?(O8(e),e.copy_[t]=dV(r,e)):r},has(e,t){return t in Xv(e)},ownKeys(e){return Reflect.ownKeys(Xv(e))},set(e,t,n){const r=pCe(Xv(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=P8(Xv(e),t),s=i==null?void 0:i[Ql];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(lct(n,i)&&(n!==void 0||aV(e.base_,t)))return!0;O8(e),fV(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return P8(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,O8(e),fV(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Xv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Ff(11)},getPrototypeOf(e){return ux(e.base_)},setPrototypeOf(){Ff(12)}},yI={};K$(UX,(e,t)=>{yI[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});yI.deleteProperty=function(e,t){return yI.set.call(this,e,t,void 0)};yI.set=function(e,t,n){return UX.set.call(this,e[0],t,n,e[0])};function P8(e,t){const n=e[Ql];return(n?Xv(n):e)[t]}function mct(e,t,n){var i;const r=pCe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function pCe(e,t){if(!(t in e))return;let n=ux(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=ux(n)}}function fV(e){e.modified_||(e.modified_=!0,e.parent_&&fV(e.parent_))}function O8(e){e.copy_||(e.copy_=uV(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var gct=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&Ff(6),r!==void 0&&typeof r!="function"&&Ff(7);let i;if(jm(t)){const s=jce(this),o=dV(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?lV(s):cV(s)}return Fce(s,r),Bce(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===cCe&&(i=void 0),this.autoFreeze_&&BX(i,!0),r){const s=[],o=[];hb("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else Ff(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){jm(e)||Ff(8),cy(e)&&(e=mCe(e));const t=jce(this),n=dV(e,void 0);return n[Ql].isManual_=!0,cV(t),n}finishDraft(e,t){const n=e&&e[Ql];(!n||!n.isManual_)&&Ff(9);const{scope_:r}=n;return Fce(r,t),Bce(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=hb("Patches").applyPatches_;return cy(e)?r(e,t):this.produce(e,i=>r(i,t))}};function dV(e,t){const n=fF(e)?hb("MapSet").proxyMap_(e,t):dF(e)?hb("MapSet").proxySet_(e,t):pct(e,t);return(t?t.scope_:hCe()).drafts_.push(n),n}function mCe(e){return cy(e)||Ff(10,e),gCe(e)}function gCe(e){if(!jm(e)||hF(e))return e;const t=e[Ql];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=uV(e,t.scope_.immer_.useStrictShallowCopy_)}else n=uV(e,!0);return K$(n,(r,i)=>{dCe(n,r,gCe(i))}),t&&(t.finalized_=!1),n}var Jl=new gct,yCe=Jl.produce;Jl.produceWithPatches.bind(Jl);Jl.setAutoFreeze.bind(Jl);Jl.setUseStrictShallowCopy.bind(Jl);Jl.applyPatches.bind(Jl);Jl.createDraft.bind(Jl);Jl.finishDraft.bind(Jl);function yct(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function vct(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function bct(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var zce=e=>Array.isArray(e)?e:[e];function _ct(e){const t=Array.isArray(e[0])?e[0]:e;return bct(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function wct(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var Ect=class{constructor(e){this.value=e}deref(){return this.value}},xct=typeof WeakRef<"u"?WeakRef:Ect,Sct=0,Vce=1;function _D(){return{s:Sct,v:void 0,o:null,p:null}}function zX(e,t={}){let n=_D();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=_D(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=_D(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===Vce)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new xct(c):c}return l.s=Vce,l.v=c,c}return o.clearCache=()=>{n=_D(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function vCe(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),yct(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=zX,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=zce(d),y=zce(p),v=_ct(i),b=f(function(){return s++,l.apply(null,arguments)},...g),w=h(function(){o++;const x=wct(v,arguments);return a=b.apply(null,x),a},...y);return Object.assign(w,{resultFunc:l,memoizedResultFunc:b,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var Tct=vCe(zX),Cct=Object.assign((e,t=Tct)=>{vct(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>Cct});function bCe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var Act=bCe(),Ict=bCe,kct=(...e)=>{const t=vCe(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(cy(o)?mCe(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};kct(zX);var Rct=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Y$:Y$.apply(null,arguments)};function lx(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Zu(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>act(r)&&r.type===e,n}var _Ce=class ZC extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,ZC.prototype)}static get[Symbol.species](){return ZC}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new ZC(...t[0].concat(this)):new ZC(...t.concat(this))}};function Hce(e){return jm(e)?yCe(e,()=>{}):e}function qce(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(Zu(10));const r=n.insert(t,e);return e.set(t,r),r}function Nct(e){return typeof e=="boolean"}var Dct=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new _Ce;return n&&(Nct(n)?o.push(Act):o.push(Ict(n.extraArgument))),o},Pct="RTK_autoBatch",wCe=e=>t=>{setTimeout(t,e)},Oct=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:wCe(10),$ct=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?Oct:e.type==="callback"?e.queueNotification:wCe(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[Pct]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},Mct=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new _Ce(e);return r&&i.push($ct(typeof r=="object"?r:void 0)),i},Lct=!0;function Fct(e){const t=Dct(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(jX(n))a=sct(n);else throw new Error(Zu(1));let u;typeof r=="function"?u=r(t):u=t();let l=Y$;i&&(l=Rct({trace:!Lct,...typeof i=="object"&&i}));const c=oct(...u),f=Mct(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return lCe(a,s,h)}function ECe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Zu(28));if(a in t)throw new Error(Zu(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function jct(e){return typeof e=="function"}function Bct(e,t){let[n,r,i]=ECe(t),s;if(jct(e))s=()=>Hce(e());else{const a=Hce(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(cy(c)){const h=f(c,u);return h===void 0?c:h}else{if(jm(c))return yCe(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error(Zu(9))}return d}}return c},a)}return o.getInitialState=s,o}var Uct="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",zct=(e=21)=>{let t="",n=e;for(;n--;)t+=Uct[Math.random()*64|0];return t},Vct=Symbol.for("rtk-slice-createasyncthunk");function Hct(e,t){return`${e}/${t}`}function qct({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[Vct];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Zu(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(Yct()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(b,w){const E=typeof b=="string"?b:b.type;if(!E)throw new Error(Zu(12));if(E in l.sliceCaseReducersByType)throw new Error(Zu(13));return l.sliceCaseReducersByType[E]=w,c},addMatcher(b,w){return l.sliceMatchers.push({matcher:b,reducer:w}),c},exposeAction(b,w){return l.actionCreators[b]=w,c},exposeCaseReducer(b,w){return l.sliceCaseReducersByName[b]=w,c}};u.forEach(b=>{const w=a[b],E={reducerName:b,type:Hct(s,b),createNotation:typeof i.reducers=="function"};Xct(w)?Jct(E,w,c,t):Kct(E,w,c)});function f(){const[b={},w=[],E=void 0]=typeof i.extraReducers=="function"?ECe(i.extraReducers):[i.extraReducers],x={...b,...l.sliceCaseReducersByType};return Bct(i.initialState,S=>{for(let C in x)S.addCase(C,x[C]);for(let C of l.sliceMatchers)S.addMatcher(C.matcher,C.reducer);for(let C of w)S.addMatcher(C.matcher,C.reducer);E&&S.addDefaultCase(E)})}const d=b=>b,h=new Map;let p;function m(b,w){return p||(p=f()),p(b,w)}function g(){return p||(p=f()),p.getInitialState()}function y(b,w=!1){function E(S){let C=S[b];return typeof C>"u"&&w&&(C=g()),C}function x(S=d){const C=qce(h,w,{insert:()=>new WeakMap});return qce(C,S,{insert:()=>{const I={};for(const[k,R]of Object.entries(i.selectors??{}))I[k]=Wct(R,S,g,w);return I}})}return{reducerPath:b,getSelectors:x,get selectors(){return x(E)},selectSlice:E}}const v={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(b,{reducerPath:w,...E}={}){const x=w??o;return b.inject({reducerPath:x,reducer:m},E),{...v,...y(x,!0)}}};return v}}function Wct(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var Gct=qct();function Yct(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function Kct({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Qct(r))throw new Error(Zu(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?lx(e,o):lx(e))}function Xct(e){return e._reducerDefinitionType==="asyncThunk"}function Qct(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Jct({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Zu(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||wD,pending:a||wD,rejected:u||wD,settled:l||wD})}function wD(){}var Zct=(e,t)=>{if(typeof e!="function")throw new Error(Zu(32))},VX="listenerMiddleware",eft=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=lx(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Zu(21));return Zct(s),{predicate:i,type:t,effect:s}},tft=Object.assign(e=>{const{type:t,predicate:n,effect:r}=eft(e);return{id:zct(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Zu(22))}}},{withTypes:()=>tft}),nft=Object.assign(lx(`${VX}/add`),{withTypes:()=>nft});lx(`${VX}/removeAll`);var rft=Object.assign(lx(`${VX}/remove`),{withTypes:()=>rft});function Zu(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function Bm(e){return e.components.flatMap(t=>typeof t=="string"?t:Bm(t))}function xCe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:xCe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function SCe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+Bm(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+Bm(e).length-1}];r+=1}else{const o=SCe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function TCe(e,t){const n=SCe(e,t,0);return typeof n=="number"?null:n}function CCe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=CCe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function ift(e,t){const n=CCe(e,t,0);return n.found?n.distance:-1}function ACe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...ACe(i,`${t}-${s}`))}),n}function HX(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>HX(n,`${t}-${r}`))}}async function sft(e,t,n,r,i){const s=Bm(n),o=Object.fromEntries(s.filter(d=>d!=="end").map((d,h)=>[`${d}_${h}`,{answer:{}}])),a=Object.assign({},...s.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),u=Object.assign({},...s.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),l={studyId:e,answers:Object.keys(i).length>0?i:o,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?u:a,iframeAnswers:{},iframeProvenance:null,metadata:r},c=Gct({name:"storeSlice",initialState:l,reducers:{setConfig(d,h){d.config=h.payload},toggleStudyBrowser:d=>{d.showStudyBrowser=!d.showStudyBrowser},toggleShowHelpText:d=>{d.showHelpText=!d.showHelpText},setAlertModal:(d,h)=>{d.alertModal=h.payload},setIframeAnswers:(d,h)=>{d.iframeAnswers=h.payload},setIframeProvenance:(d,h)=>{d.iframeProvenance=h.payload},updateResponseBlockValidation:(d,{payload:h})=>{d.trialValidation[h.identifier]||(d.trialValidation[h.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),d.trialValidation[h.identifier][h.location]={valid:h.status,values:h.values},h.provenanceGraph&&(d.trialValidation[h.identifier].provenanceGraph=h.provenanceGraph)},saveTrialAnswer(d,{payload:h}){const{identifier:p,answer:m,startTime:g,endTime:y,provenanceGraph:v,windowEvents:b}=h;d.answers[p]={answer:m,startTime:g,endTime:y,provenanceGraph:v,windowEvents:b}}}});return{store:Fct({reducer:c.reducer,preloadedState:l}),actions:c.actions}}const ICe=A.createContext(null);function fp(){return A.useContext(ICe).actions}const dp=uCe,ff=qlt;function oft(e){return ff(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function qX(){return ff(e=>Bm(e.sequence))}function p_(){const{studyId:e}=Lm();return`${e}`}function gg(){const{index:e}=Lm(),t=parseInt(e||"0",10);return Number.isNaN(t)?e:t}function sv(){const e=gg(),t=qX();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var J$={exports:{}};J$.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",b="[object Proxy]",w="[object RegExp]",E="[object Set]",x="[object String]",S="[object Undefined]",C="[object WeakMap]",I="[object ArrayBuffer]",k="[object DataView]",R="[object Float32Array]",O="[object Float64Array]",P="[object Int8Array]",$="[object Int16Array]",L="[object Int32Array]",M="[object Uint8Array]",B="[object Uint8ClampedArray]",U="[object Uint16Array]",V="[object Uint32Array]",D=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,j={};j[R]=j[O]=j[P]=j[$]=j[L]=j[M]=j[B]=j[U]=j[V]=!0,j[a]=j[u]=j[I]=j[c]=j[k]=j[f]=j[d]=j[h]=j[m]=j[g]=j[v]=j[w]=j[E]=j[x]=j[C]=!1;var q=typeof ao=="object"&&ao&&ao.Object===Object&&ao,G=typeof self=="object"&&self&&self.Object===Object&&self,te=q||G||Function("return this")(),le=t&&!t.nodeType&&t,fe=le&&!0&&e&&!e.nodeType&&e,de=fe&&fe.exports===le,ye=de&&q.process,Ie=function(){try{var ne=fe&&fe.require&&fe.require("util").types;return ne||ye&&ye.binding&&ye.binding("util")}catch{}}(),pe=Ie&&Ie.isTypedArray;function qe(ne,ue,Re){switch(Re.length){case 0:return ne.call(ue);case 1:return ne.call(ue,Re[0]);case 2:return ne.call(ue,Re[0],Re[1]);case 3:return ne.call(ue,Re[0],Re[1],Re[2])}return ne.apply(ue,Re)}function Ue(ne,ue){for(var Re=-1,It=Array(ne);++Re<ne;)It[Re]=ue(Re);return It}function vt(ne){return function(ue){return ne(ue)}}function it(ne,ue){return ne==null?void 0:ne[ue]}function _e(ne,ue){return function(Re){return ne(ue(Re))}}var ke=Array.prototype,Ve=Function.prototype,ct=Object.prototype,Mt=te["__core-js_shared__"],Ye=Ve.toString,ve=ct.hasOwnProperty,pt=function(){var ne=/[^.]+$/.exec(Mt&&Mt.keys&&Mt.keys.IE_PROTO||"");return ne?"Symbol(src)_1."+ne:""}(),bt=ct.toString,ge=Ye.call(Object),Ae=RegExp("^"+Ye.call(ve).replace(D,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),We=de?te.Buffer:void 0,ut=te.Symbol,wt=te.Uint8Array;We&&We.allocUnsafe;var Bn=_e(Object.getPrototypeOf,Object),kr=Object.create,Un=ct.propertyIsEnumerable,pr=ke.splice,bn=ut?ut.toStringTag:void 0,Rn=function(){try{var ne=Ge(Object,"defineProperty");return ne({},"",{}),ne}catch{}}(),or=We?We.isBuffer:void 0,ar=Math.max,Jo=Date.now,Ui=Ge(te,"Map"),Nn=Ge(Object,"create"),zi=function(){function ne(){}return function(ue){if(!Pp(ue))return{};if(kr)return kr(ue);ne.prototype=ue;var Re=new ne;return ne.prototype=void 0,Re}}();function Rr(ne){var ue=-1,Re=ne==null?0:ne.length;for(this.clear();++ue<Re;){var It=ne[ue];this.set(It[0],It[1])}}function _s(){this.__data__=Nn?Nn(null):{},this.size=0}function kp(ne){var ue=this.has(ne)&&delete this.__data__[ne];return this.size-=ue?1:0,ue}function bl(ne){var ue=this.__data__;if(Nn){var Re=ue[ne];return Re===r?void 0:Re}return ve.call(ue,ne)?ue[ne]:void 0}function Pd(ne){var ue=this.__data__;return Nn?ue[ne]!==void 0:ve.call(ue,ne)}function Cr(ne,ue){var Re=this.__data__;return this.size+=this.has(ne)?0:1,Re[ne]=Nn&&ue===void 0?r:ue,this}Rr.prototype.clear=_s,Rr.prototype.delete=kp,Rr.prototype.get=bl,Rr.prototype.has=Pd,Rr.prototype.set=Cr;function Pi(ne){var ue=-1,Re=ne==null?0:ne.length;for(this.clear();++ue<Re;){var It=ne[ue];this.set(It[0],It[1])}}function ni(){this.__data__=[],this.size=0}function vu(ne){var ue=this.__data__,Re=nr(ue,ne);if(Re<0)return!1;var It=ue.length-1;return Re==It?ue.pop():pr.call(ue,Re,1),--this.size,!0}function Ma(ne){var ue=this.__data__,Re=nr(ue,ne);return Re<0?void 0:ue[Re][1]}function La(ne){return nr(this.__data__,ne)>-1}function oe(ne,ue){var Re=this.__data__,It=nr(Re,ne);return It<0?(++this.size,Re.push([ne,ue])):Re[It][1]=ue,this}Pi.prototype.clear=ni,Pi.prototype.delete=vu,Pi.prototype.get=Ma,Pi.prototype.has=La,Pi.prototype.set=oe;function ee(ne){var ue=-1,Re=ne==null?0:ne.length;for(this.clear();++ue<Re;){var It=ne[ue];this.set(It[0],It[1])}}function ae(){this.size=0,this.__data__={hash:new Rr,map:new(Ui||Pi),string:new Rr}}function Ce(ne){var ue=He(this,ne).delete(ne);return this.size-=ue?1:0,ue}function Se(ne){return He(this,ne).get(ne)}function ot(ne){return He(this,ne).has(ne)}function Tt(ne,ue){var Re=He(this,ne),It=Re.size;return Re.set(ne,ue),this.size+=Re.size==It?0:1,this}ee.prototype.clear=ae,ee.prototype.delete=Ce,ee.prototype.get=Se,ee.prototype.has=ot,ee.prototype.set=Tt;function Gt(ne){var ue=this.__data__=new Pi(ne);this.size=ue.size}function Ln(){this.__data__=new Pi,this.size=0}function zn(ne){var ue=this.__data__,Re=ue.delete(ne);return this.size=ue.size,Re}function yn(ne){return this.__data__.get(ne)}function ur(ne){return this.__data__.has(ne)}function Nr(ne,ue){var Re=this.__data__;if(Re instanceof Pi){var It=Re.__data__;if(!Ui||It.length<n-1)return It.push([ne,ue]),this.size=++Re.size,this;Re=this.__data__=new ee(It)}return Re.set(ne,ue),this.size=Re.size,this}Gt.prototype.clear=Ln,Gt.prototype.delete=zn,Gt.prototype.get=yn,Gt.prototype.has=ur,Gt.prototype.set=Nr;function Wt(ne,ue){var Re=Np(ne),It=!Re&&bu(ne),Fn=!Re&&!It&&Dp(ne),Ar=!Re&&!It&&!Fn&&FN(ne),Xr=Re||It||Fn||Ar,Hn=Xr?Ue(ne.length,String):[],Qr=Hn.length;for(var is in ne)Xr&&(is=="length"||Fn&&(is=="offset"||is=="parent")||Ar&&(is=="buffer"||is=="byteLength"||is=="byteOffset")||xt(is,Qr))||Hn.push(is);return Hn}function lr(ne,ue,Re){(Re!==void 0&&!mc(ne[ue],Re)||Re===void 0&&!(ue in ne))&&Oi(ne,ue,Re)}function Kr(ne,ue,Re){var It=ne[ue];(!(ve.call(ne,ue)&&mc(It,Re))||Re===void 0&&!(ue in ne))&&Oi(ne,ue,Re)}function nr(ne,ue){for(var Re=ne.length;Re--;)if(mc(ne[Re][0],ue))return Re;return-1}function Oi(ne,ue,Re){ue=="__proto__"&&Rn?Rn(ne,ue,{configurable:!0,enumerable:!0,value:Re,writable:!0}):ne[ue]=Re}var Xs=Oe();function ri(ne){return ne==null?ne===void 0?S:y:bn&&bn in Object(ne)?Ke(ne):ea(ne)}function So(ne){return _u(ne)&&ri(ne)==a}function Vi(ne){if(!Pp(ne)||Vn(ne))return!1;var ue=UT(ne)?Ae:z;return ue.test($N(ne))}function Hi(ne){return _u(ne)&&LN(ne.length)&&!!j[ri(ne)]}function Zo(ne){if(!Pp(ne))return Pr(ne);var ue=Dr(ne),Re=[];for(var It in ne)It=="constructor"&&(ue||!ve.call(ne,It))||Re.push(It);return Re}function Fa(ne,ue,Re,It,Fn){ne!==ue&&Xs(ue,function(Ar,Xr){if(Fn||(Fn=new Gt),Pp(Ar))Qs(ne,ue,Xr,Re,Fa,It,Fn);else{var Hn=It?It(Rp(ne,Xr),Ar,Xr+"",ne,ue,Fn):void 0;Hn===void 0&&(Hn=Ar),lr(ne,Xr,Hn)}},kv)}function Qs(ne,ue,Re,It,Fn,Ar,Xr){var Hn=Rp(ne,Re),Qr=Rp(ue,Re),is=Xr.get(Qr);if(is){lr(ne,Re,is);return}var ta=Ar?Ar(Hn,Qr,Re+"",ne,ue,Xr):void 0,Nv=ta===void 0;if(Nv){var Op=Np(Qr),U_=!Op&&Dp(Qr),z_=!Op&&!U_&&FN(Qr);ta=Qr,Op||U_||z_?Np(Hn)?ta=Hn:MN(Hn)?ta=he(Hn):U_?(Nv=!1,ta=Y(Qr)):z_?(Nv=!1,ta=Z(Qr)):ta=[]:bB(Qr)||bu(Qr)?(ta=Hn,bu(Hn)?ta=Iv(Hn):(!Pp(Hn)||UT(Hn))&&(ta=st(Qr))):Nv=!1}Nv&&(Xr.set(Qr,ta),Fn(ta,Qr,It,Ar,Xr),Xr.delete(Qr)),lr(ne,Re,ta)}function pc(ne,ue){return BT($d(ne,ue,Pg),ne+"")}var Od=Rn?function(ne,ue){return Rn(ne,"toString",{configurable:!0,enumerable:!1,value:Rv(ue),writable:!0})}:Pg;function Y(ne,ue){return ne.slice()}function se(ne){var ue=new ne.constructor(ne.byteLength);return new wt(ue).set(new wt(ne)),ue}function Z(ne,ue){var Re=se(ne.buffer);return new ne.constructor(Re,ne.byteOffset,ne.length)}function he(ne,ue){var Re=-1,It=ne.length;for(ue||(ue=Array(It));++Re<It;)ue[Re]=ne[Re];return ue}function be(ne,ue,Re,It){var Fn=!Re;Re||(Re={});for(var Ar=-1,Xr=ue.length;++Ar<Xr;){var Hn=ue[Ar],Qr=void 0;Qr===void 0&&(Qr=ne[Hn]),Fn?Oi(Re,Hn,Qr):Kr(Re,Hn,Qr)}return Re}function ce(ne){return pc(function(ue,Re){var It=-1,Fn=Re.length,Ar=Fn>1?Re[Fn-1]:void 0,Xr=Fn>2?Re[2]:void 0;for(Ar=ne.length>3&&typeof Ar=="function"?(Fn--,Ar):void 0,Xr&&vn(Re[0],Re[1],Xr)&&(Ar=Fn<3?void 0:Ar,Fn=1),ue=Object(ue);++It<Fn;){var Hn=Re[It];Hn&&ne(ue,Hn,It,Ar)}return ue})}function Oe(ne){return function(ue,Re,It){for(var Fn=-1,Ar=Object(ue),Xr=It(ue),Hn=Xr.length;Hn--;){var Qr=Xr[++Fn];if(Re(Ar[Qr],Qr,Ar)===!1)break}return ue}}function He(ne,ue){var Re=ne.__data__;return Ot(ue)?Re[typeof ue=="string"?"string":"hash"]:Re.map}function Ge(ne,ue){var Re=it(ne,ue);return Vi(Re)?Re:void 0}function Ke(ne){var ue=ve.call(ne,bn),Re=ne[bn];try{ne[bn]=void 0;var It=!0}catch{}var Fn=bt.call(ne);return It&&(ue?ne[bn]=Re:delete ne[bn]),Fn}function st(ne){return typeof ne.constructor=="function"&&!Dr(ne)?zi(Bn(ne)):{}}function xt(ne,ue){var Re=typeof ne;return ue=ue??o,!!ue&&(Re=="number"||Re!="symbol"&&W.test(ne))&&ne>-1&&ne%1==0&&ne<ue}function vn(ne,ue,Re){if(!Pp(Re))return!1;var It=typeof ue;return(It=="number"?B_(Re)&&xt(ue,Re.length):It=="string"&&ue in Re)?mc(Re[ue],ne):!1}function Ot(ne){var ue=typeof ne;return ue=="string"||ue=="number"||ue=="symbol"||ue=="boolean"?ne!=="__proto__":ne===null}function Vn(ne){return!!pt&&pt in ne}function Dr(ne){var ue=ne&&ne.constructor,Re=typeof ue=="function"&&ue.prototype||ct;return ne===Re}function Pr(ne){var ue=[];if(ne!=null)for(var Re in Object(ne))ue.push(Re);return ue}function ea(ne){return bt.call(ne)}function $d(ne,ue,Re){return ue=ar(ue===void 0?ne.length-1:ue,0),function(){for(var It=arguments,Fn=-1,Ar=ar(It.length-ue,0),Xr=Array(Ar);++Fn<Ar;)Xr[Fn]=It[ue+Fn];Fn=-1;for(var Hn=Array(ue+1);++Fn<ue;)Hn[Fn]=It[Fn];return Hn[ue]=Re(Xr),qe(ne,this,Hn)}}function Rp(ne,ue){if(!(ue==="constructor"&&typeof ne[ue]=="function")&&ue!="__proto__")return ne[ue]}var BT=Av(Od);function Av(ne){var ue=0,Re=0;return function(){var It=Jo(),Fn=s-(It-Re);if(Re=It,Fn>0){if(++ue>=i)return arguments[0]}else ue=0;return ne.apply(void 0,arguments)}}function $N(ne){if(ne!=null){try{return Ye.call(ne)}catch{}try{return ne+""}catch{}}return""}function mc(ne,ue){return ne===ue||ne!==ne&&ue!==ue}var bu=So(function(){return arguments}())?So:function(ne){return _u(ne)&&ve.call(ne,"callee")&&!Un.call(ne,"callee")},Np=Array.isArray;function B_(ne){return ne!=null&&LN(ne.length)&&!UT(ne)}function MN(ne){return _u(ne)&&B_(ne)}var Dp=or||BN;function UT(ne){if(!Pp(ne))return!1;var ue=ri(ne);return ue==h||ue==p||ue==l||ue==b}function LN(ne){return typeof ne=="number"&&ne>-1&&ne%1==0&&ne<=o}function Pp(ne){var ue=typeof ne;return ne!=null&&(ue=="object"||ue=="function")}function _u(ne){return ne!=null&&typeof ne=="object"}function bB(ne){if(!_u(ne)||ri(ne)!=v)return!1;var ue=Bn(ne);if(ue===null)return!0;var Re=ve.call(ue,"constructor")&&ue.constructor;return typeof Re=="function"&&Re instanceof Re&&Ye.call(Re)==ge}var FN=pe?vt(pe):Hi;function Iv(ne){return be(ne,kv(ne))}function kv(ne){return B_(ne)?Wt(ne):Zo(ne)}var jN=ce(function(ne,ue,Re){Fa(ne,ue,Re)});function Rv(ne){return function(){return ne}}function Pg(ne){return ne}function BN(){return!1}e.exports=jN})(J$,J$.exports);var aft=J$.exports;const WX=ml(aft);function B0(e){return structuredClone(e)}function GX(){const{answers:e}=ff(i=>i),t=gg(),r=`${sv()}_${t}`;return e[r]}const kCe=A.createContext(null);function uft(){const e=A.useContext(kCe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function fy(){return ff(e=>e.config)}function Wce(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function RCe(){const e=gg(),t=qX(),r=`${sv()}_${e}`,{trialValidation:i,sequence:s,answers:o}=ff(x=>x),a=dp(),{saveTrialAnswer:u,setIframeAnswers:l}=fp(),{storageEngine:c}=Ds(),f=p_(),[d,h]=A.useState(!0);A.useEffect(()=>{(async()=>{if(c){const S=await c.getModes(f);h(S.dataCollectionEnabled)}})()},[c,f]);const p=oft(r),m=typeof e!="number"||!p,g=GX(),y=lp(),v=fy(),b=A.useMemo(()=>Date.now(),[]),w=uft(),E=A.useCallback(()=>{if(typeof e!="number")return;const x=B0(i[r]),S=Object.values(x).reduce((L,M)=>Object.hasOwn(M,"values")?{...L,...M.values}:L,{}),{provenanceGraph:C}=x,I=Date.now(),k=w&&"current"in w&&w.current?w.current.splice(0,w.current.length):[];d&&!g.endTime&&(a(u({identifier:r,answer:S,startTime:b,endTime:I,provenanceGraph:C,windowEvents:k})),c&&c.saveAnswers({...o,[r]:{answer:S,startTime:b,endTime:I,provenanceGraph:C,windowEvents:k}}),a(l({})));let R=e+1;const O=TCe(s,e),P=O!==null&&O.some(L=>Object.hasOwn(L.currentBlock,"skip")&&L.currentBlock.skip!==void 0),$={...o,[r]:{answer:S,startTime:b,endTime:I,provenanceGraph:C,windowEvents:k}};P&&[...O.flatMap(M=>M.currentBlock.skip?M.currentBlock.skip.map(B=>({...B,firstIndex:M.firstIndex,lastIndex:M.lastIndex})):[])].some(M=>{let B=!1;const U=Object.fromEntries(Object.entries($).filter(([D])=>{const z=parseInt(D.slice(D.lastIndexOf("_")+1),10);return z>=M.firstIndex&&z<=e})),V=M.check!=="block"?Object.entries(U).filter(([D])=>D.slice(0,D.lastIndexOf("_"))===M.name):Object.entries(U);if(V.length===0)return!1;if(V.some(([D,z])=>!z))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(M,null,2)}`);if(M.check==="response"||M.check==="responses"){const[D,z]=V[0];M.check==="response"?B=M.comparison==="equal"?M.value===z.answer[M.responseId]:M.value!==z.answer[M.responseId]:B=!Wce(z.answer,D,v.components[D.slice(0,D.lastIndexOf("_"))],v)}else if(M.check==="block"||M.check==="repeatedComponent"){if(V.length<M.value)return!1;const D=V.map(([j,q])=>Wce(q.answer,j,v.components[j.slice(0,j.lastIndexOf("_"))],v)),z=D.filter(j=>j).length,W=D.length-z;B=M.condition==="numCorrect"&&z===M.value||M.condition==="numIncorrect"&&W===M.value}if(B){const D=t.indexOf(M.to),z=D===-1?ift(s,M.to):-1;return R=D===-1?z:D,!0}return!1}),y(`/${f}/${R}${window.location.search}`)},[e,i,r,w,d,g.endTime,s,o,b,y,f,a,u,c,l,v,t]);return{isNextDisabled:m,goToNextStep:E}}function lft({label:e="Next",disabled:t=!1,onClick:n}){const{isNextDisabled:r,goToNextStep:i}=RCe(),s=A.useCallback(()=>{n&&n(),i()},[i,n]);return _.jsx(dn,{type:"submit",disabled:t||r,onClick:s,children:e})}function cft(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const fft=typeof window<"u"?A.useLayoutEffect:A.useEffect;function Co(e,t){fft(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function dft(e,t){e&&cft(e),Co(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),Co(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),Co(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),Co(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),Co(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),Co(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),Co(`mantine-form:${e}:clear-errors`,t.clearErrors),Co(`mantine-form:${e}:reset`,t.reset),Co(`mantine-form:${e}:validate`,t.validate),Co(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),Co(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),Co(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),Co(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),Co(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),Co(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),Co(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),Co(`mantine-form:${e}:reset-touched`,t.resetTouched)}function hft(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function hV(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function pft(e){const[t,n]=A.useState(hV(e)),r=A.useRef(t),i=A.useCallback(u=>{n(l=>{const c=hV(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=A.useCallback(()=>i({}),[]),o=A.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=A.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function NCe(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function Gce(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Yce(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=NCe(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=Gce(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=Gce(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function mft(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function Kce(e,t,n){typeof n.value=="object"&&(n.value=Yw(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function Yw(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(Yw(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(Yw(a),Yw(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(Yw(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Kce(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Kce(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function DCe(e){return typeof e!="string"?[]:e.split(".")}function zu(e,t){const n=DCe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function pF(e,t,n){const r=DCe(e);if(r.length===0)return n;const i=Yw(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function gft(e,{from:t,to:n},r){const i=zu(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),pF(e,s,r)}function yft(e,t,n,r){const i=zu(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),pF(e,s,r)}function vft(e,t,n){const r=zu(e,n);return Array.isArray(r)?pF(e,r.filter((i,s)=>s!==t),n):n}function bft({$values:e,$errors:t,$status:n}){const r=A.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>mft(o,a,u)),e.setValues({values:gft(o,a,e.refValues.current),updateState:!0})},[]),i=A.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Yce(o,a,u,-1)),e.setValues({values:vft(o,a,e.refValues.current),updateState:!0})},[]),s=A.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>Yce(o,u,l,1)),e.setValues({values:yft(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}var YX=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const sO=ml(YX);function ED(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function _ft({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=A.useState(t),[o,a]=A.useState(e),u=A.useRef(t),l=A.useRef(e),c=A.useCallback(E=>{const x=typeof E=="function"?E(u.current):E;u.current=x,n==="controlled"&&s(x)},[]),f=A.useCallback(E=>{const x=typeof E=="function"?E(l.current):E;l.current=x,n==="controlled"&&a(x)},[]),d=A.useCallback(()=>c({}),[]),h=E=>{const x=E?{...E,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(x),f({})},p=A.useCallback((E,x)=>{c(S=>ED(S,E)===x?S:{...S,[E]:x})},[]),m=A.useCallback((E,x)=>{f(S=>ED(S,E)===x?S:{...S,[E]:x})},[]),g=A.useCallback(E=>ED(u.current,E),[]),y=A.useCallback(E=>f(x=>{if(typeof E!="string")return x;const S=NCe(E,x);return delete S[E],sO(S,x)?x:S}),[]),v=A.useCallback(E=>{if(E){const S=zu(E,l.current);if(typeof S=="boolean")return S;const C=zu(E,r.refValues.current),I=zu(E,r.valuesSnapshot.current);return!sO(C,I)}return Object.keys(l.current).length>0?ED(l.current):!sO(r.refValues.current,r.valuesSnapshot.current)},[]),b=A.useCallback(()=>l.current,[]),w=A.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:v,getDirty:b,getTouched:w}}function wft({initialValues:e,onValuesChange:t,mode:n}){const r=A.useRef(!1),[i,s]=A.useState(e||{}),o=A.useRef(i),a=A.useRef(i),u=A.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const v=o.current,b=p instanceof Function?p(o.current):p,w=y?{...v,...b}:b;o.current=w,g&&s(w),t==null||t(w,v),m==null||m.filter(Boolean).forEach(E=>E({updatedValues:w,previousValues:v}))},[t]),l=A.useCallback(p=>{var y;const m=zu(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const v=o.current,b=pF(p.path,g,o.current);u({values:b,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(w=>w({path:p.path,updatedValues:b,previousValues:v}))}},[]),c=A.useCallback(p=>{a.current=p},[]),f=A.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[]),d=A.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=A.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function Eft({$status:e}){const t=A.useRef({}),n=A.useCallback((i,s)=>{A.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=A.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:zu(i,o.previousValues),value:zu(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function Xce(e,t){return e?`${e}-${t.toString()}`:t.toString()}function Qce(e){const t=hV(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function pV(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=zu(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>pV(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||pV(o,t,a,i)),i},r)}function mV(e,t){return Qce(typeof e=="function"?e(t):pV(e,t))}function xD(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=mV(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const xft="__MANTINE_FORM_INDEX__";function Jce(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${xft}`)):!1:!1}function PCe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=pft(r),p=wft({initialValues:n,onValuesChange:l,mode:t}),m=_ft({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=bft({$values:p,$errors:h,$status:m}),y=Eft({$status:m}),[v,b]=A.useState(0),[w,E]=A.useState({}),x=A.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&b(D=>D+1)},[]),S=A.useCallback(D=>{p.initialize(D,()=>t==="uncontrolled"&&b(z=>z+1))},[]),C=A.useCallback((D,z,W)=>{const j=Jce(D,a);m.clearFieldDirty(D),m.setFieldTouched(D,!0),!j&&o&&h.clearFieldError(D),p.setFieldValue({path:D,value:z,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers(D),j?q=>{const G=xD(D,d,q.updatedValues);G.hasError?h.setFieldError(D,G.error):h.clearFieldError(D)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>E(q=>({...q,[D]:(q[D]||0)+1})):null]})},[l,d]),I=A.useCallback(D=>{const z=p.refValues.current;p.setValues({values:D,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&b(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const j=zu(W,p.refValues.current),q=zu(W,z);j!==q&&y.getFieldSubscribers(W).forEach(G=>G({previousValues:z,updatedValues:p.refValues.current}))})},[l,o]),k=A.useCallback(()=>{const D=mV(d,p.refValues.current);return h.setErrors(D.errors),D},[d]),R=A.useCallback(D=>{const z=xD(D,d,p.refValues.current);return z.hasError?h.setFieldError(D,z.error):h.clearFieldError(D),z},[d]),O=(D,{type:z="input",withError:W=!0,withFocus:j=!0,...q}={})=>{const te={onChange:hft(le=>C(D,le,{forceUpdate:!1})),"data-path":Xce(e,D)};return W&&(te.error=h.errorsState[D]),z==="checkbox"?te[t==="controlled"?"checked":"defaultChecked"]=zu(D,p.refValues.current):te[t==="controlled"?"value":"defaultValue"]=zu(D,p.refValues.current),j&&(te.onFocus=()=>m.setFieldTouched(D,!0),te.onBlur=()=>{if(Jce(D,u)){const le=xD(D,d,p.refValues.current);le.hasError?h.setFieldError(D,le.error):h.clearFieldError(D)}}),Object.assign(te,f==null?void 0:f({inputProps:te,field:D,options:{type:z,withError:W,withFocus:j,...q},form:V}))},P=(D,z)=>W=>{W==null||W.preventDefault();const j=k();j.hasErrors?z==null||z(j.errors,p.refValues.current,W):D==null||D(c(p.refValues.current),W)},$=D=>c(D||p.refValues.current),L=A.useCallback(D=>{D.preventDefault(),x()},[]),M=A.useCallback(D=>D?!xD(D,d,p.refValues.current).hasError:!mV(d,p.refValues.current).hasErrors,[d]),B=D=>`${v}-${D}-${w[D]||0}`,U=A.useCallback(D=>document.querySelector(`[data-path="${Xce(e,D)}"]`),[]),V={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:S,setValues:I,setFieldValue:C,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:x,validate:k,validateField:R,getInputProps:O,onSubmit:P,onReset:L,isValid:M,getTransformedValues:$,key:B,getInputNode:U};return dft(e,V),V}function Sft(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function Tft(e){return Sft(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function OCe(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const Cft=new URLSearchParams(window.location.search),Aft=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?Cft.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},Ift=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return n.type==="checkbox"?OCe(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function kft(e,t,n){const[r,i]=A.useState(null),s=PCe({initialValues:Aft(e,n),validate:Ift(e)});return A.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function m_(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?s=OCe(e,t.checked):s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function Rft({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=a.map(c=>typeof c=="string"?{value:c,label:c}:c);return _.jsx(Ol.Group,{label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(me,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(su,{text:s,required:o})})]}),description:u,...n,error:m_(e,n,l),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(Rs,{mt:"xs",children:l.map(c=>_.jsx(Ol,{disabled:t,value:c.value,label:c.label},c.value))})})}function Nft({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e,c=u.map(f=>typeof f=="string"?{value:f,label:f}:f);return _.jsx(Jk,{disabled:t,label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(me,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(su,{text:o,required:a})})]}),description:l,placeholder:s,data:c,radius:"md",size:"md",...n,error:m_(e,n,c)})}function Dft({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return _.jsx(vi.Wrapper,{label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&_.jsx(me,{style:{minWidth:"fit-content"},children:`${n}. `}),_.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(su,{text:i,required:s})})]}),description:o,size:"md",children:_.jsx(td,{children:Array.isArray(t.value)?t.value.map(a=>_.jsx(td.Item,{children:a},a)):_.jsx(td.Item,{children:t.value})})})}function $Ce({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,leftLabel:u,rightLabel:l,secondaryText:c}=e,f=a.map(d=>typeof d=="string"?{value:d,label:d}:d);return _.jsx(db.Group,{name:`radioInput${e.id}`,label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(me,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(su,{text:s,required:o})})]}),description:c,...n,error:m_(e,n,f),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsxs(Rs,{mt:"xs",children:[u?_.jsx(ze,{style:{textAlign:"center"},children:u}):null,f.map(d=>_.jsx(db,{disabled:t,value:d.value,label:d.label},d.label)),_.jsx(ze,{children:l})]})},e.id)}function Pft({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o};return _.jsx($Ce,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i})}function Oft({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return _.jsx(WK,{disabled:t,placeholder:l,label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(me,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(su,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:m_(e,n)})}function $ft({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=m_(e,n);return _.jsx(vi.Wrapper,{label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(me,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(su,{text:s,required:o})})]}),description:u,error:l,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(J6,{disabled:t,marks:a,...n,h:40})})}function Mft({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(m0,{disabled:t,placeholder:s,label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(me,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(su,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:m_(e,n)})}function Lft({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(PK,{disabled:t,placeholder:s,label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(me,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(su,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:m_(e,n)})}function Fft({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=mX(),u=fy().uiConfig.enumerateQuestions??!1,l=A.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return _.jsxs(me,{mb:"md",children:[e.type==="numerical"&&_.jsx(Oft,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&_.jsx(Mft,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&_.jsx(Lft,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&_.jsx(Pft,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&_.jsx(Nft,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&_.jsx($ft,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&_.jsx($Ce,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&_.jsx(Rft,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&_.jsx(Dft,{response:e,answer:i,index:r,enumerateQuestions:u})]})}function Z$({config:e,location:t,status:n,style:r}){var $;const i=dp(),{updateResponseBlockValidation:s,toggleShowHelpText:o}=fp(),a=gg(),u=sv(),l=n==null?void 0:n.answer,c=lp(),f=e,d=A.useMemo(()=>{var L;return((L=f==null?void 0:f.response)==null?void 0:L.filter(M=>M.location?M.location===t:t==="belowStimulus"))||[]},[f==null?void 0:f.response,t]),h=kft(d,a,l||{}),[p,m]=A.useState(void 0),{iframeAnswers:g,iframeProvenance:y}=ff(L=>L),v=(f==null?void 0:f.provideFeedback)&&((($=f==null?void 0:f.correctAnswer)==null?void 0:$.length)||0)>0,b=(f==null?void 0:f.allowFailedTraining)===void 0?!0:f.allowFailedTraining,[w,E]=A.useState(0),x=(f==null?void 0:f.trainingAttempts)||2,[S,C]=A.useState(!1),I=t===((f==null?void 0:f.nextButtonLocation)||"belowStimulus");A.useEffect(()=>{const L=d.find(M=>M.type==="iframe");if(g&&L){const M=L.id;h.setValues({...h.values,[M]:g[M]})}},[g]),A.useEffect(()=>{y&&m(y)},[y]),A.useEffect(()=>{i(s({location:t,identifier:`${u}_${a}`,status:h.isValid(),values:B0(h.values),provenanceGraph:p}))},[h.values,u,a,t,i,s,p]);const[k,R]=A.useState(Object.fromEntries(d.map(L=>[L.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),O=(L,M,B,U,V)=>{R(D=>({...D,[L]:{visible:M,title:B,message:U,color:V}}))},P=()=>{const L=w+1;E(L);const M=Object.fromEntries(d.map(B=>{var D,z;const U=(z=(D=f.correctAnswer)==null?void 0:D.find(W=>W.id===B.id))==null?void 0:z.answer,V=h.values[B.id];return[B.id,Array.isArray(V)?typeof U=="string"?V.length===1&&U===V[0]:V.length===U.length&&V.every(W=>U.includes(W)):U===V]}));v&&(d.forEach(B=>{var U;if(M[B.id]&&!((U=k[B.id])!=null&&U.message.includes("You've failed to answer this question correctly")))O(B.id,!0,"Correct Answer","You have answered the question correctly.","green");else{let V="";L>=x?(V=`You didn't answer this question correctly after ${x} attempts. ${b?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,b||setTimeout(()=>{c("./__trainingFailed")},5e3)):x-L===1?V="Please try again. You have 1 attempt left.":V=`Please try again. You have ${x-L} attempts left.`,O(B.id,!0,"Incorrect Answer",V,"red")}}),C(b&&L>=x||Object.values(M).every(B=>B)&&L<=x))};return _.jsxs("div",{style:r,children:[d.map((L,M)=>{var U,V;const B=(V=(U=f.correctAnswer)==null?void 0:U.find(D=>D.id===L.id))==null?void 0:V.answer;return _.jsx(Pt.Fragment,{children:L.hidden?"":_.jsxs(_.Fragment,{children:[_.jsx(Fft,{storedAnswer:l?l[L.id]:void 0,answer:{...h.getInputProps(L.id,{type:L.type==="checkbox"?"checkbox":"input"})},response:L,index:M+1}),k[L.id].visible&&_.jsxs(CS,{mb:"md",title:k[L.id].title,color:k[L.id].color,children:[k[L.id].message," ",k[L.id].message.includes("Please try again")&&_.jsxs(_.Fragment,{children:["Please"," ",_.jsx(o_,{style:{fontSize:14},onClick:()=>i(o()),children:"click here"})," ","and read the help text carefully."]}),_.jsx("br",{}),_.jsx("br",{}),w>=x&&B&&` The correct answer was: ${B}.`]})]})},`${L.id}-${a}`)}),_.jsxs(Rs,{justify:"right",gap:"xs",children:[v&&I&&_.jsx(dn,{onClick:()=>P(),disabled:!h.isValid(),children:"Check Answer"}),I&&_.jsx(lft,{disabled:v&&!S||!h.isValid(),label:f.nextButtonText||"Next"})]})]})}const iC="@REVISIT_COMMS",jft={minHeight:"500px",width:"100%",border:0};function Bft({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=fp(),r=dp(),i=uCe(),s=A.useRef(null),o=A.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=sv(),u=lp(),l=A.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${iC}/${c}`,iframeId:o,message:f},"*")},[s,o]);return A.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${iC}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${iC}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${iC}/ANSWERS`:r(t(d.message));break;case`${iC}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),_.jsx("iframe",{ref:s,src:`${Qu}${e.path}?trialid=${a}&id=${o}`,style:jft})}async function KX(e){const n=await(await fetch(`${Qu}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}function pb({email:e,path:t}){const n=nv();return _.jsxs(Xc,{fluid:!0,my:50,maw:800,mx:"auto",children:[_.jsx(ki,{order:2,children:_.jsx(ze,{span:!0,c:"orange",children:"404"})}),_.jsxs(ze,{children:[_.jsx(ze,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),_.jsx(zl,{h:"lg"}),_.jsxs(td,{children:[_.jsx(td.Item,{children:_.jsx(ze,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),_.jsx(td.Item,{children:_.jsxs(ze,{children:["If you're a participant, please contact the study administrator"," ",e&&_.jsxs(_.Fragment,{children:["at"," ",_.jsxs(o_,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const Uft={maxWidth:"100%"};function zft({currentConfig:e}){const t={...Uft,...e.style},[n,r]=A.useState(!0),[i,s]=A.useState(!1);return A.useEffect(()=>{async function o(){const a=await KX(e.path);s(!!a),r(!1)}o()},[e]),n||i?_.jsx(dg,{mx:"auto",src:`${Qu}${e.path}`,style:t}):_.jsx(pb,{path:e.path})}function vI(e){"@babel/helpers - typeof";return vI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vI(e)}function Vft(e,t){if(vI(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(vI(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hft(e){var t=Vft(e,"string");return vI(t)=="symbol"?t:t+""}function qft(e,t,n){return(t=Hft(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function efe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Zce(Object(n),!0).forEach(function(r){qft(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zce(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Do(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var tfe=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),$8=function(){return Math.random().toString(36).substring(7).split("").join(".")},eM={INIT:"@@redux/INIT"+$8(),REPLACE:"@@redux/REPLACE"+$8(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+$8()}};function Wft(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function XX(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Do(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Do(1));return n(XX)(e,t)}if(typeof e!="function")throw new Error(Do(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(Do(3));return s}function f(m){if(typeof m!="function")throw new Error(Do(4));if(u)throw new Error(Do(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(Do(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!Wft(m))throw new Error(Do(7));if(typeof m.type>"u")throw new Error(Do(8));if(u)throw new Error(Do(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(Do(10));i=m,d({type:eM.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(Do(11));function b(){v.next&&v.next(c())}b();var w=g(b);return{unsubscribe:w}}},m[tfe]=function(){return this},m}return d({type:eM.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[tfe]=p,r}function Gft(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:eM.INIT});if(typeof r>"u")throw new Error(Do(12));if(typeof n(void 0,{type:eM.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Do(13))})}function Yft(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{Gft(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(Do(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function nfe(e,t){return function(){return t(e.apply(this,arguments))}}function rfe(e,t){if(typeof e=="function")return nfe(e,t);if(typeof e!="object"||e===null)throw new Error(Do(16));var n={};for(var r in e){var i=e[r];typeof i=="function"&&(n[r]=nfe(i,t))}return n}function bI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function MCe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Do(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=bI.apply(void 0,a)(i.dispatch),efe(efe({},i),{},{dispatch:s})}}}var LCe={exports:{}},FCe={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cx=A;function Kft(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xft=typeof Object.is=="function"?Object.is:Kft,Qft=cx.useState,Jft=cx.useEffect,Zft=cx.useLayoutEffect,edt=cx.useDebugValue;function tdt(e,t){var n=t(),r=Qft({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return Zft(function(){i.value=n,i.getSnapshot=t,M8(i)&&s({inst:i})},[e,n,t]),Jft(function(){return M8(i)&&s({inst:i}),e(function(){M8(i)&&s({inst:i})})},[e]),edt(n),n}function M8(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Xft(e,n)}catch{return!0}}function ndt(e,t){return t()}var rdt=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ndt:tdt;FCe.useSyncExternalStore=cx.useSyncExternalStore!==void 0?cx.useSyncExternalStore:rdt;LCe.exports=FCe;var jCe=LCe.exports,idt={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mF=A,sdt=jCe;function odt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var adt=typeof Object.is=="function"?Object.is:odt,udt=sdt.useSyncExternalStore,ldt=mF.useRef,cdt=mF.useEffect,fdt=mF.useMemo,ddt=mF.useDebugValue;idt.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=ldt(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=fdt(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,adt(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=udt(e,s[0],s[1]);return cdt(function(){o.hasValue=!0,o.value=a},[a]),ddt(a),a};function hdt(e){e()}let BCe=hdt;const pdt=e=>BCe=e,mdt=()=>BCe,ife=Symbol.for("react-redux-context"),sfe=typeof globalThis<"u"?globalThis:{};function gdt(){var e;if(!A.createContext)return{};const t=(e=sfe[ife])!=null?e:sfe[ife]=new Map;let n=t.get(A.createContext);return n||(n=A.createContext(null),t.set(A.createContext,n)),n}const UCe=gdt(),ydt=()=>{throw new Error("uSES not initialized!")};function U0(){return U0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U0.apply(null,arguments)}function zCe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var VCe={exports:{}},jr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wo=typeof Symbol=="function"&&Symbol.for,QX=wo?Symbol.for("react.element"):60103,JX=wo?Symbol.for("react.portal"):60106,gF=wo?Symbol.for("react.fragment"):60107,yF=wo?Symbol.for("react.strict_mode"):60108,vF=wo?Symbol.for("react.profiler"):60114,bF=wo?Symbol.for("react.provider"):60109,_F=wo?Symbol.for("react.context"):60110,ZX=wo?Symbol.for("react.async_mode"):60111,wF=wo?Symbol.for("react.concurrent_mode"):60111,EF=wo?Symbol.for("react.forward_ref"):60112,xF=wo?Symbol.for("react.suspense"):60113,vdt=wo?Symbol.for("react.suspense_list"):60120,SF=wo?Symbol.for("react.memo"):60115,TF=wo?Symbol.for("react.lazy"):60116,bdt=wo?Symbol.for("react.block"):60121,_dt=wo?Symbol.for("react.fundamental"):60117,wdt=wo?Symbol.for("react.responder"):60118,Edt=wo?Symbol.for("react.scope"):60119;function fc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case QX:switch(e=e.type,e){case ZX:case wF:case gF:case vF:case yF:case xF:return e;default:switch(e=e&&e.$$typeof,e){case _F:case EF:case TF:case SF:case bF:return e;default:return t}}case JX:return t}}}function HCe(e){return fc(e)===wF}jr.AsyncMode=ZX;jr.ConcurrentMode=wF;jr.ContextConsumer=_F;jr.ContextProvider=bF;jr.Element=QX;jr.ForwardRef=EF;jr.Fragment=gF;jr.Lazy=TF;jr.Memo=SF;jr.Portal=JX;jr.Profiler=vF;jr.StrictMode=yF;jr.Suspense=xF;jr.isAsyncMode=function(e){return HCe(e)||fc(e)===ZX};jr.isConcurrentMode=HCe;jr.isContextConsumer=function(e){return fc(e)===_F};jr.isContextProvider=function(e){return fc(e)===bF};jr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===QX};jr.isForwardRef=function(e){return fc(e)===EF};jr.isFragment=function(e){return fc(e)===gF};jr.isLazy=function(e){return fc(e)===TF};jr.isMemo=function(e){return fc(e)===SF};jr.isPortal=function(e){return fc(e)===JX};jr.isProfiler=function(e){return fc(e)===vF};jr.isStrictMode=function(e){return fc(e)===yF};jr.isSuspense=function(e){return fc(e)===xF};jr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===gF||e===wF||e===vF||e===yF||e===xF||e===vdt||typeof e=="object"&&e!==null&&(e.$$typeof===TF||e.$$typeof===SF||e.$$typeof===bF||e.$$typeof===_F||e.$$typeof===EF||e.$$typeof===_dt||e.$$typeof===wdt||e.$$typeof===Edt||e.$$typeof===bdt)};jr.typeOf=fc;VCe.exports=jr;var xdt=VCe.exports,eQ=xdt,Sdt={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Tdt={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Cdt={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},qCe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},tQ={};tQ[eQ.ForwardRef]=Cdt;tQ[eQ.Memo]=qCe;function ofe(e){return eQ.isMemo(e)?qCe:tQ[e.$$typeof]||Sdt}var Adt=Object.defineProperty,Idt=Object.getOwnPropertyNames,afe=Object.getOwnPropertySymbols,kdt=Object.getOwnPropertyDescriptor,Rdt=Object.getPrototypeOf,ufe=Object.prototype;function WCe(e,t,n){if(typeof t!="string"){if(ufe){var r=Rdt(t);r&&r!==ufe&&WCe(e,r,n)}var i=Idt(t);afe&&(i=i.concat(afe(t)));for(var s=ofe(e),o=ofe(t),a=0;a<i.length;++a){var u=i[a];if(!Tdt[u]&&!(n&&n[u])&&!(o&&o[u])&&!(s&&s[u])){var l=kdt(t,u);try{Adt(e,u,l)}catch{}}}}return e}var Ndt=WCe;const lfe=ml(Ndt);var GCe={exports:{}},Br={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nQ=Symbol.for("react.element"),rQ=Symbol.for("react.portal"),CF=Symbol.for("react.fragment"),AF=Symbol.for("react.strict_mode"),IF=Symbol.for("react.profiler"),kF=Symbol.for("react.provider"),RF=Symbol.for("react.context"),Ddt=Symbol.for("react.server_context"),NF=Symbol.for("react.forward_ref"),DF=Symbol.for("react.suspense"),PF=Symbol.for("react.suspense_list"),OF=Symbol.for("react.memo"),$F=Symbol.for("react.lazy"),Pdt=Symbol.for("react.offscreen"),YCe;YCe=Symbol.for("react.module.reference");function df(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case nQ:switch(e=e.type,e){case CF:case IF:case AF:case DF:case PF:return e;default:switch(e=e&&e.$$typeof,e){case Ddt:case RF:case NF:case $F:case OF:case kF:return e;default:return t}}case rQ:return t}}}Br.ContextConsumer=RF;Br.ContextProvider=kF;Br.Element=nQ;Br.ForwardRef=NF;Br.Fragment=CF;Br.Lazy=$F;Br.Memo=OF;Br.Portal=rQ;Br.Profiler=IF;Br.StrictMode=AF;Br.Suspense=DF;Br.SuspenseList=PF;Br.isAsyncMode=function(){return!1};Br.isConcurrentMode=function(){return!1};Br.isContextConsumer=function(e){return df(e)===RF};Br.isContextProvider=function(e){return df(e)===kF};Br.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===nQ};Br.isForwardRef=function(e){return df(e)===NF};Br.isFragment=function(e){return df(e)===CF};Br.isLazy=function(e){return df(e)===$F};Br.isMemo=function(e){return df(e)===OF};Br.isPortal=function(e){return df(e)===rQ};Br.isProfiler=function(e){return df(e)===IF};Br.isStrictMode=function(e){return df(e)===AF};Br.isSuspense=function(e){return df(e)===DF};Br.isSuspenseList=function(e){return df(e)===PF};Br.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===CF||e===IF||e===AF||e===DF||e===PF||e===Pdt||typeof e=="object"&&e!==null&&(e.$$typeof===$F||e.$$typeof===OF||e.$$typeof===kF||e.$$typeof===RF||e.$$typeof===NF||e.$$typeof===YCe||e.getModuleId!==void 0)};Br.typeOf=df;GCe.exports=Br;var Odt=GCe.exports;const $dt=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Mdt(e,t,n,r,{areStatesEqual:i,areOwnPropsEqual:s,areStatePropsEqual:o}){let a=!1,u,l,c,f,d;function h(v,b){return u=v,l=b,c=e(u,l),f=t(r,l),d=n(c,f,l),a=!0,d}function p(){return c=e(u,l),t.dependsOnOwnProps&&(f=t(r,l)),d=n(c,f,l),d}function m(){return e.dependsOnOwnProps&&(c=e(u,l)),t.dependsOnOwnProps&&(f=t(r,l)),d=n(c,f,l),d}function g(){const v=e(u,l),b=!o(v,c);return c=v,b&&(d=n(c,f,l)),d}function y(v,b){const w=!s(b,l),E=!i(v,u,b,l);return u=v,l=b,w&&E?p():w?m():E?g():d}return function(b,w){return a?y(b,w):h(b,w)}}function Ldt(e,t){let{initMapStateToProps:n,initMapDispatchToProps:r,initMergeProps:i}=t,s=zCe(t,$dt);const o=n(e,s),a=r(e,s),u=i(e,s);return Mdt(o,a,u,e,s)}function Fdt(e,t){const n={};for(const r in e){const i=e[r];typeof i=="function"&&(n[r]=(...s)=>t(i(...s)))}return n}function gV(e){return function(n){const r=e(n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function cfe(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function KCe(e,t){return function(r,{displayName:i}){const s=function(a,u){return s.dependsOnOwnProps?s.mapToProps(a,u):s.mapToProps(a,void 0)};return s.dependsOnOwnProps=!0,s.mapToProps=function(a,u){s.mapToProps=e,s.dependsOnOwnProps=cfe(e);let l=s(a,u);return typeof l=="function"&&(s.mapToProps=l,s.dependsOnOwnProps=cfe(l),l=s(a,u)),l},s}}function iQ(e,t){return(n,r)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${r.wrappedComponentName}.`)}}function jdt(e){return e&&typeof e=="object"?gV(t=>Fdt(e,t)):e?typeof e=="function"?KCe(e):iQ(e,"mapDispatchToProps"):gV(t=>({dispatch:t}))}function Bdt(e){return e?typeof e=="function"?KCe(e):iQ(e,"mapStateToProps"):gV(()=>({}))}function Udt(e,t,n){return U0({},n,e,t)}function zdt(e){return function(n,{displayName:r,areMergedPropsEqual:i}){let s=!1,o;return function(u,l,c){const f=e(u,l,c);return s?i(f,o)||(o=f):(s=!0,o=f),o}}}function Vdt(e){return e?typeof e=="function"?zdt(e):iQ(e,"mergeProps"):()=>Udt}function Hdt(){const e=mdt();let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=t;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,s=n={callback:r,next:null,prev:n};return s.prev?s.prev.next=s:t=s,function(){!i||t===null||(i=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}const ffe={notify(){},get:()=>[]};function XCe(e,t){let n,r=ffe,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=t?t.addNestedSub(u):e.subscribe(u),r=Hdt())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=ffe)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}const qdt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tM=qdt?A.useLayoutEffect:A.useEffect;function dfe(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function L8(e,t){if(dfe(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!dfe(e[n[i]],t[n[i]]))return!1;return!0}const Wdt=["reactReduxForwardedRef"];let QCe=ydt;const Gdt=e=>{QCe=e},Ydt=[null,null];function Kdt(e,t,n){tM(()=>e(...t),n)}function Xdt(e,t,n,r,i,s){e.current=r,n.current=!1,i.current&&(i.current=null,s())}function Qdt(e,t,n,r,i,s,o,a,u,l,c){if(!e)return()=>{};let f=!1,d=null;const h=()=>{if(f||!a.current)return;const m=t.getState();let g,y;try{g=r(m,i.current)}catch(v){y=v,d=v}y||(d=null),g===s.current?o.current||l():(s.current=g,u.current=g,o.current=!0,c())};return n.onStateChange=h,n.trySubscribe(),h(),()=>{if(f=!0,n.tryUnsubscribe(),n.onStateChange=null,d)throw d}}function Jdt(e,t){return e===t}function JCe(e,t,n,{pure:r,areStatesEqual:i=Jdt,areOwnPropsEqual:s=L8,areStatePropsEqual:o=L8,areMergedPropsEqual:a=L8,forwardRef:u=!1,context:l=UCe}={}){const c=l,f=Bdt(e),d=jdt(t),h=Vdt(n),p=!!e;return g=>{const y=g.displayName||g.name||"Component",v=`Connect(${y})`,b={shouldHandleStateChanges:p,displayName:v,wrappedComponentName:y,WrappedComponent:g,initMapStateToProps:f,initMapDispatchToProps:d,initMergeProps:h,areStatesEqual:i,areStatePropsEqual:o,areOwnPropsEqual:s,areMergedPropsEqual:a};function w(S){const[C,I,k]=A.useMemo(()=>{const{reactReduxForwardedRef:pe}=S,qe=zCe(S,Wdt);return[S.context,pe,qe]},[S]),R=A.useMemo(()=>C&&C.Consumer&&Odt.isContextConsumer(A.createElement(C.Consumer,null))?C:c,[C,c]),O=A.useContext(R),P=!!S.store&&!!S.store.getState&&!!S.store.dispatch,$=!!O&&!!O.store,L=P?S.store:O.store,M=$?O.getServerState:L.getState,B=A.useMemo(()=>Ldt(L.dispatch,b),[L]),[U,V]=A.useMemo(()=>{if(!p)return Ydt;const pe=XCe(L,P?void 0:O.subscription),qe=pe.notifyNestedSubs.bind(pe);return[pe,qe]},[L,P,O]),D=A.useMemo(()=>P?O:U0({},O,{subscription:U}),[P,O,U]),z=A.useRef(),W=A.useRef(k),j=A.useRef(),q=A.useRef(!1);A.useRef(!1);const G=A.useRef(!1),te=A.useRef();tM(()=>(G.current=!0,()=>{G.current=!1}),[]);const le=A.useMemo(()=>()=>j.current&&k===W.current?j.current:B(L.getState(),k),[L,k]),fe=A.useMemo(()=>qe=>U?Qdt(p,L,U,B,W,z,q,G,j,V,qe):()=>{},[U]);Kdt(Xdt,[W,z,q,k,j,V]);let de;try{de=QCe(fe,le,M?()=>B(M(),k):le)}catch(pe){throw te.current&&(pe.message+=`
The error may be correlated with this previous error:
${te.current.stack}

`),pe}tM(()=>{te.current=void 0,j.current=void 0,z.current=de});const ye=A.useMemo(()=>A.createElement(g,U0({},de,{ref:I})),[I,g,de]);return A.useMemo(()=>p?A.createElement(R.Provider,{value:D},ye):ye,[R,ye,D])}const x=A.memo(w);if(x.WrappedComponent=g,x.displayName=w.displayName=v,u){const C=A.forwardRef(function(k,R){return A.createElement(x,U0({},k,{reactReduxForwardedRef:R}))});return C.displayName=v,C.WrappedComponent=g,lfe(C,g)}return lfe(x,g)}}function Zdt({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",noopCheck:s="once"}){const o=A.useMemo(()=>{const l=XCe(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,noopCheck:s}},[e,r,i,s]),a=A.useMemo(()=>e.getState(),[e]);tM(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||UCe;return A.createElement(u.Provider,{value:o},n)}Gdt(jCe.useSyncExternalStore);pdt(Xy.unstable_batchedUpdates);function eht(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ZCe(e,t){var n=A.useState(function(){return{inputs:t,result:e()}})[0],r=A.useRef(!0),i=A.useRef(n),s=r.current||!!(t&&i.current.inputs&&eht(t,i.current.inputs)),o=s?i.current:{inputs:t,result:e()};return A.useEffect(function(){r.current=!1,i.current=o},[o]),o.result}function tht(e,t){return ZCe(function(){return e},t)}var Zn=ZCe,Lt=tht,nht="Invariant failed";function rht(e,t){throw new Error(nht)}var Wf=function(t){var n=t.top,r=t.right,i=t.bottom,s=t.left,o=r-s,a=i-n,u={top:n,right:r,bottom:i,left:s,width:o,height:a,x:s,y:n,center:{x:(r+s)/2,y:(i+n)/2}};return u},sQ=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},hfe=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},iht=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},F8={top:0,right:0,bottom:0,left:0},oQ=function(t){var n=t.borderBox,r=t.margin,i=r===void 0?F8:r,s=t.border,o=s===void 0?F8:s,a=t.padding,u=a===void 0?F8:a,l=Wf(sQ(n,i)),c=Wf(hfe(n,o)),f=Wf(hfe(c,u));return{marginBox:l,borderBox:Wf(n),paddingBox:c,contentBox:f,margin:i,border:o,padding:u}},gc=function(t){var n=t.slice(0,-2),r=t.slice(-2);if(r!=="px")return 0;var i=Number(n);return isNaN(i)&&rht(),i},sht=function(){return{x:window.pageXOffset,y:window.pageYOffset}},nM=function(t,n){var r=t.borderBox,i=t.border,s=t.margin,o=t.padding,a=iht(r,n);return oQ({borderBox:a,border:i,margin:s,padding:o})},rM=function(t,n){return n===void 0&&(n=sht()),nM(t,n)},eAe=function(t,n){var r={top:gc(n.marginTop),right:gc(n.marginRight),bottom:gc(n.marginBottom),left:gc(n.marginLeft)},i={top:gc(n.paddingTop),right:gc(n.paddingRight),bottom:gc(n.paddingBottom),left:gc(n.paddingLeft)},s={top:gc(n.borderTopWidth),right:gc(n.borderRightWidth),bottom:gc(n.borderBottomWidth),left:gc(n.borderLeftWidth)};return oQ({borderBox:t,margin:r,padding:i,border:s})},tAe=function(t){var n=t.getBoundingClientRect(),r=window.getComputedStyle(t);return eAe(n,r)},pfe=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function oht(e,t){return!!(e===t||pfe(e)&&pfe(t))}function aht(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!oht(e[n],t[n]))return!1;return!0}function go(e,t){t===void 0&&(t=aht);var n=null;function r(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(n&&n.lastThis===this&&t(i,n.lastArgs))return n.lastResult;var o=e.apply(this,i);return n={lastResult:o,lastArgs:i,lastThis:this},o}return r.clear=function(){n=null},r}var _I=function(t){var n=[],r=null,i=function(){for(var o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];n=a,!r&&(r=requestAnimationFrame(function(){r=null,t.apply(void 0,n)}))};return i.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},i};function nAe(e,t){}nAe.bind(null,"warn");nAe.bind(null,"error");function z0(){}function uht(e,t){return{...e,...t}}function Lc(e,t,n){const r=t.map(i=>{const s=uht(n,i.options);return e.addEventListener(i.eventName,i.fn,s),function(){e.removeEventListener(i.eventName,i.fn,s)}});return function(){r.forEach(s=>{s()})}}const lht="Invariant failed";class iM extends Error{}iM.prototype.toString=function(){return this.message};function ft(e,t){throw new iM(lht)}class cht extends Pt.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=z0,this.onWindowError=n=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),n.error instanceof iM&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=Lc(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof iM){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const fht=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,sM=e=>e+1,dht=e=>`
  You have lifted an item in position ${sM(e.source.index)}
`,rAe=(e,t)=>{const n=e.droppableId===t.droppableId,r=sM(e.index),i=sM(t.index);return n?`
      You have moved the item from position ${r}
      to position ${i}
    `:`
    You have moved the item from position ${r}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${i}
  `},iAe=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,hht=e=>{const t=e.destination;if(t)return rAe(e.source,t);const n=e.combine;return n?iAe(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},mfe=e=>`
  The item has returned to its starting position
  of ${sM(e.index)}
`,pht=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${mfe(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${rAe(e.source,t)}
    `:n?`
      You have dropped the item.
      ${iAe(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${mfe(e.source)}
  `},mht={dragHandleUsageInstructions:fht,onDragStart:dht,onDragUpdate:hht,onDragEnd:pht};var oO=mht;const vo={x:0,y:0},Fo=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),Ll=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),V0=(e,t)=>e.x===t.x&&e.y===t.y,BS=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),mb=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},wI=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),gfe=(e,t)=>Math.min(...t.map(n=>wI(e,n))),sAe=e=>t=>({x:e(t.x),y:e(t.y)});var ght=(e,t)=>{const n=Wf({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const aR=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),yfe=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],yht={top:0,right:0,bottom:0,left:0},vht=(e,t)=>t?aR(e,t.scroll.diff.displacement):e,bht=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,_ht=(e,t)=>t&&t.shouldClipSubject?ght(t.pageMarginBox,e):Wf(e);var fx=({page:e,withPlaceholder:t,axis:n,frame:r})=>{const i=vht(e.marginBox,r),s=bht(i,n,t),o=_ht(s,r);return{page:e,withPlaceholder:t,active:o}},aQ=(e,t)=>{e.frame||ft();const n=e.frame,r=Ll(t,n.scroll.initial),i=BS(r),s={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:i},max:n.scroll.max}},o=fx({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:s});return{...e,frame:s,subject:o}};const oAe=go(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),aAe=go(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),MF=go(e=>Object.values(e)),wht=go(e=>Object.values(e));var US=go((e,t)=>wht(t).filter(r=>e===r.descriptor.droppableId).sort((r,i)=>r.descriptor.index-i.descriptor.index));function uQ(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function LF(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var FF=go((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),Eht=({isMovingForward:e,draggable:t,destination:n,insideDestination:r,previousImpact:i})=>{if(!n.isCombineEnabled||!uQ(i))return null;function o(h){const p={type:"COMBINE",combine:{draggableId:h,droppableId:n.descriptor.id}};return{...i,at:p}}const a=i.displaced.all,u=a.length?a[0]:null;if(e)return u?o(u):null;const l=FF(t,r);if(!u){if(!l.length)return null;const h=l[l.length-1];return o(h.descriptor.id)}const c=l.findIndex(h=>h.descriptor.id===u);c===-1&&ft();const f=c-1;if(f<0)return null;const d=l[f];return o(d.descriptor.id)},zS=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const uAe={point:vo,value:0},EI={invisible:{},visible:{},all:[]},xht={displaced:EI,displacedBy:uAe,at:null};var Sht=xht,Vc=(e,t)=>n=>e<=n&&n<=t,lAe=e=>{const t=Vc(e.top,e.bottom),n=Vc(e.left,e.right);return r=>{if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;const s=t(r.top)||t(r.bottom),o=n(r.left)||n(r.right);if(s&&o)return!0;const u=r.top<e.top&&r.bottom>e.bottom,l=r.left<e.left&&r.right>e.right;return u&&l?!0:u&&o||l&&s}},Tht=e=>{const t=Vc(e.top,e.bottom),n=Vc(e.left,e.right);return r=>t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right)};const lQ={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},cAe={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var Cht=e=>t=>{const n=Vc(t.top,t.bottom),r=Vc(t.left,t.right);return i=>e===lQ?n(i.top)&&n(i.bottom):r(i.left)&&r(i.right)};const Aht=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:vo;return aR(e,n)},Iht=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,kht=(e,t,n)=>n(t)(e),cQ=({target:e,destination:t,viewport:n,withDroppableDisplacement:r,isVisibleThroughFrameFn:i})=>{const s=r?Aht(e,t):e;return Iht(s,t,i)&&kht(s,n,i)},Rht=e=>cQ({...e,isVisibleThroughFrameFn:lAe}),fAe=e=>cQ({...e,isVisibleThroughFrameFn:Tht}),Nht=e=>cQ({...e,isVisibleThroughFrameFn:Cht(e.destination.axis)}),Dht=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:r,visible:i}=t;if(r[e])return!1;const s=i[e];return s?s.shouldAnimate:!0};function Pht(e,t){const n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return Wf(sQ(n,r))}function xI({afterDragging:e,destination:t,displacedBy:n,viewport:r,forceShouldAnimate:i,last:s}){return e.reduce(function(a,u){const l=Pht(u,n),c=u.descriptor.id;if(a.all.push(c),!Rht({target:l,destination:t,viewport:r,withDroppableDisplacement:!0}))return a.invisible[u.descriptor.id]=!0,a;const d=Dht(c,s,i),h={draggableId:c,shouldAnimate:d};return a.visible[c]=h,a},{all:[],visible:{},invisible:{}})}function Oht(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function vfe({insideDestination:e,inHomeList:t,displacedBy:n,destination:r}){const i=Oht(e,{inHomeList:t});return{displaced:EI,displacedBy:n,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:i}}}}function oM({draggable:e,insideDestination:t,destination:n,viewport:r,displacedBy:i,last:s,index:o,forceShouldAnimate:a}){const u=zS(e,n);if(o==null)return vfe({insideDestination:t,inHomeList:u,displacedBy:i,destination:n});const l=t.find(p=>p.descriptor.index===o);if(!l)return vfe({insideDestination:t,inHomeList:u,displacedBy:i,destination:n});const c=FF(e,t),f=t.indexOf(l),d=c.slice(f);return{displaced:xI({afterDragging:d,destination:n,displacedBy:i,last:s,viewport:r.frame,forceShouldAnimate:a}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function dy(e,t){return!!t.effected[e]}var $ht=({isMovingForward:e,destination:t,draggables:n,combine:r,afterCritical:i})=>{if(!t.isCombineEnabled)return null;const s=r.draggableId,a=n[s].descriptor.index;return dy(s,i)?e?a:a-1:e?a+1:a},Mht=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:r})=>{if(!n.length)return null;const i=r.index,s=e?i+1:i-1,o=n[0].descriptor.index,a=n[n.length-1].descriptor.index,u=t?a:a+1;return s<o||s>u?null:s},Lht=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:r,destination:i,insideDestination:s,previousImpact:o,viewport:a,afterCritical:u})=>{const l=o.at;if(l||ft(),l.type==="REORDER"){const f=Mht({isMovingForward:e,isInHomeList:t,location:l.destination,insideDestination:s});return f==null?null:oM({draggable:n,insideDestination:s,destination:i,viewport:a,last:o.displaced,displacedBy:o.displacedBy,index:f})}const c=$ht({isMovingForward:e,destination:i,displaced:o.displaced,draggables:r,combine:l.combine,afterCritical:u});return c==null?null:oM({draggable:n,insideDestination:s,destination:i,viewport:a,last:o.displaced,displacedBy:o.displacedBy,index:c})},Fht=({displaced:e,afterCritical:t,combineWith:n,displacedBy:r})=>{const i=!!(e.visible[n]||e.invisible[n]);return dy(n,t)?i?vo:BS(r.point):i?r.point:vo},jht=({afterCritical:e,impact:t,draggables:n})=>{const r=LF(t);r||ft();const i=r.draggableId,s=n[i].page.borderBox.center,o=Fht({displaced:t.displaced,afterCritical:e,combineWith:i,displacedBy:t.displacedBy});return Fo(s,o)};const dAe=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,Bht=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,fQ=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,bfe=({axis:e,moveRelativeTo:t,isMoving:n})=>mb(e.line,t.marginBox[e.end]+dAe(e,n),fQ(e,t.marginBox,n)),_fe=({axis:e,moveRelativeTo:t,isMoving:n})=>mb(e.line,t.marginBox[e.start]-Bht(e,n),fQ(e,t.marginBox,n)),Uht=({axis:e,moveInto:t,isMoving:n})=>mb(e.line,t.contentBox[e.start]+dAe(e,n),fQ(e,t.contentBox,n));var zht=({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:i})=>{const s=US(r.descriptor.id,n),o=t.page,a=r.axis;if(!s.length)return Uht({axis:a,moveInto:r.page,isMoving:o});const{displaced:u,displacedBy:l}=e,c=u.all[0];if(c){const d=n[c];if(dy(c,i))return _fe({axis:a,moveRelativeTo:d.page,isMoving:o});const h=nM(d.page,l.point);return _fe({axis:a,moveRelativeTo:h,isMoving:o})}const f=s[s.length-1];if(f.descriptor.id===t.descriptor.id)return o.borderBox.center;if(dy(f.descriptor.id,i)){const d=nM(f.page,BS(i.displacedBy.point));return bfe({axis:a,moveRelativeTo:d,isMoving:o})}return bfe({axis:a,moveRelativeTo:f.page,isMoving:o})},yV=(e,t)=>{const n=e.frame;return n?Fo(t,n.scroll.diff.displacement):t};const Vht=({impact:e,draggable:t,droppable:n,draggables:r,afterCritical:i})=>{const s=t.page.borderBox.center,o=e.at;return!n||!o?s:o.type==="REORDER"?zht({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:i}):jht({impact:e,draggables:r,afterCritical:i})};var jF=e=>{const t=Vht(e),n=e.droppable;return n?yV(n,t):t},hAe=(e,t)=>{const n=Ll(t,e.scroll.initial),r=BS(n);return{frame:Wf({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function wfe(e,t){return e.map(n=>t[n])}function Hht(e,t){for(let n=0;n<t.length;n++){const r=t[n].visible[e];if(r)return r}return null}var qht=({impact:e,viewport:t,destination:n,draggables:r,maxScrollChange:i})=>{const s=hAe(t,Fo(t.scroll.current,i)),o=n.frame?aQ(n,Fo(n.frame.scroll.current,i)):n,a=e.displaced,u=xI({afterDragging:wfe(a.all,r),destination:n,displacedBy:e.displacedBy,viewport:s.frame,last:a,forceShouldAnimate:!1}),l=xI({afterDragging:wfe(a.all,r),destination:o,displacedBy:e.displacedBy,viewport:t.frame,last:a,forceShouldAnimate:!1}),c={},f={},d=[a,u,l];return a.all.forEach(p=>{const m=Hht(p,d);if(m){f[p]=m;return}c[p]=!0}),{...e,displaced:{all:a.all,invisible:c,visible:f}}},Wht=(e,t)=>Fo(e.scroll.diff.displacement,t),dQ=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const r=Wht(n,e),i=Ll(r,t.page.borderBox.center);return Fo(t.client.borderBox.center,i)},pAe=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:r,withDroppableDisplacement:i,onlyOnMainAxis:s=!1})=>{const o=Ll(n,e.page.borderBox.center),u={target:aR(e.page.borderBox,o),destination:t,withDroppableDisplacement:i,viewport:r};return s?Nht(u):fAe(u)},Ght=({isMovingForward:e,draggable:t,destination:n,draggables:r,previousImpact:i,viewport:s,previousPageBorderBoxCenter:o,previousClientSelection:a,afterCritical:u})=>{if(!n.isEnabled)return null;const l=US(n.descriptor.id,r),c=zS(t,n),f=Eht({isMovingForward:e,draggable:t,destination:n,insideDestination:l,previousImpact:i})||Lht({isMovingForward:e,isInHomeList:c,draggable:t,draggables:r,destination:n,insideDestination:l,previousImpact:i,viewport:s,afterCritical:u});if(!f)return null;const d=jF({impact:f,draggable:t,droppable:n,draggables:r,afterCritical:u});if(pAe({draggable:t,destination:n,newPageBorderBoxCenter:d,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:dQ({pageBorderBoxCenter:d,draggable:t,viewport:s}),impact:f,scrollJumpRequest:null};const p=Ll(d,o),m=qht({impact:f,viewport:s,destination:n,draggables:r,maxScrollChange:p});return{clientSelection:a,impact:m,scrollJumpRequest:p}};const Ba=e=>{const t=e.subject.active;return t||ft(),t};var Yht=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:r,viewport:i})=>{const s=n.subject.active;if(!s)return null;const o=n.axis,a=Vc(s[o.start],s[o.end]),u=MF(r).filter(c=>c!==n).filter(c=>c.isEnabled).filter(c=>!!c.subject.active).filter(c=>lAe(i.frame)(Ba(c))).filter(c=>{const f=Ba(c);return e?s[o.crossAxisEnd]<f[o.crossAxisEnd]:f[o.crossAxisStart]<s[o.crossAxisStart]}).filter(c=>{const f=Ba(c),d=Vc(f[o.start],f[o.end]);return a(f[o.start])||a(f[o.end])||d(s[o.start])||d(s[o.end])}).sort((c,f)=>{const d=Ba(c)[o.crossAxisStart],h=Ba(f)[o.crossAxisStart];return e?d-h:h-d}).filter((c,f,d)=>Ba(c)[o.crossAxisStart]===Ba(d[0])[o.crossAxisStart]);if(!u.length)return null;if(u.length===1)return u[0];const l=u.filter(c=>Vc(Ba(c)[o.start],Ba(c)[o.end])(t[o.line]));return l.length===1?l[0]:l.length>1?l.sort((c,f)=>Ba(c)[o.start]-Ba(f)[o.start])[0]:u.sort((c,f)=>{const d=gfe(t,yfe(Ba(c))),h=gfe(t,yfe(Ba(f)));return d!==h?d-h:Ba(c)[o.start]-Ba(f)[o.start]})[0]};const Efe=(e,t)=>{const n=e.page.borderBox.center;return dy(e.descriptor.id,t)?Ll(n,t.displacedBy.point):n},Kht=(e,t)=>{const n=e.page.borderBox;return dy(e.descriptor.id,t)?aR(n,BS(t.displacedBy.point)):n};var Xht=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:r,afterCritical:i})=>r.filter(o=>fAe({target:Kht(o,i),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((o,a)=>{const u=wI(e,yV(n,Efe(o,i))),l=wI(e,yV(n,Efe(a,i)));return u<l?-1:l<u?1:o.descriptor.index-a.descriptor.index})[0]||null,uR=go(function(t,n){const r=n[t.line];return{value:r,point:mb(t.line,r)}});const Qht=(e,t,n)=>{const r=e.axis;if(e.descriptor.mode==="virtual")return mb(r.line,t[r.line]);const i=e.subject.page.contentBox[r.size],u=US(e.descriptor.id,n).reduce((l,c)=>l+c.client.marginBox[r.size],0)+t[r.line]-i;return u<=0?null:mb(r.line,u)},mAe=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),gAe=(e,t,n)=>{const r=e.frame;zS(t,e)&&ft(),e.subject.withPlaceholder&&ft();const i=uR(e.axis,t.displaceBy).point,s=Qht(e,i,n),o={placeholderSize:i,increasedBy:s,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r){const c=fx({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:e.frame});return{...e,subject:c}}const a=s?Fo(r.scroll.max,s):r.scroll.max,u=mAe(r,a),l=fx({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:u});return{...e,subject:l,frame:u}},Jht=e=>{const t=e.subject.withPlaceholder;t||ft();const n=e.frame;if(!n){const o=fx({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:o}}const r=t.oldFrameMaxScroll;r||ft();const i=mAe(n,r),s=fx({page:e.subject.page,axis:e.axis,frame:i,withPlaceholder:null});return{...e,subject:s,frame:i}};var Zht=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:r,draggables:i,destination:s,viewport:o,afterCritical:a})=>{if(!t){if(n.length)return null;const f={displaced:EI,displacedBy:uAe,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:0}}},d=jF({impact:f,draggable:r,droppable:s,draggables:i,afterCritical:a}),h=zS(r,s)?s:gAe(s,r,i);return pAe({draggable:r,destination:h,newPageBorderBoxCenter:d,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?f:null}const u=e[s.axis.line]<=t.page.borderBox.center[s.axis.line],l=(()=>{const f=t.descriptor.index;return t.descriptor.id===r.descriptor.id||u?f:f+1})(),c=uR(s.axis,r.displaceBy);return oM({draggable:r,insideDestination:n,destination:s,viewport:o,displacedBy:c,last:EI,index:l})},ept=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:r,draggables:i,droppables:s,viewport:o,afterCritical:a})=>{const u=Yht({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:s,viewport:o});if(!u)return null;const l=US(u.descriptor.id,i),c=Xht({pageBorderBoxCenter:t,viewport:o,destination:u,insideDestination:l,afterCritical:a}),f=Zht({previousPageBorderBoxCenter:t,destination:u,draggable:n,draggables:i,moveRelativeTo:c,insideDestination:l,viewport:o,afterCritical:a});if(!f)return null;const d=jF({impact:f,draggable:n,droppable:u,draggables:i,afterCritical:a});return{clientSelection:dQ({pageBorderBoxCenter:d,draggable:n,viewport:o}),impact:f,scrollJumpRequest:null}},Vl=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const tpt=(e,t)=>{const n=Vl(e);return n?t[n]:null};var npt=({state:e,type:t})=>{const n=tpt(e.impact,e.dimensions.droppables),r=!!n,i=e.dimensions.droppables[e.critical.droppable.id],s=n||i,o=s.axis.direction,a=o==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||o==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(a&&!r)return null;const u=t==="MOVE_DOWN"||t==="MOVE_RIGHT",l=e.dimensions.draggables[e.critical.draggable.id],c=e.current.page.borderBoxCenter,{draggables:f,droppables:d}=e.dimensions;return a?Ght({isMovingForward:u,previousPageBorderBoxCenter:c,draggable:l,destination:s,draggables:f,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):ept({isMovingForward:u,previousPageBorderBoxCenter:c,draggable:l,isOver:s,draggables:f,droppables:d,viewport:e.viewport,afterCritical:e.afterCritical})};function Qv(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function yAe(e){const t=Vc(e.top,e.bottom),n=Vc(e.left,e.right);return function(i){return t(i.y)&&n(i.x)}}function rpt(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function ipt({pageBorderBox:e,draggable:t,candidates:n}){const r=t.page.borderBox.center,i=n.map(s=>{const o=s.axis,a=mb(s.axis.line,e.center[o.line],s.page.borderBox.center[o.crossAxisLine]);return{id:s.descriptor.id,distance:wI(r,a)}}).sort((s,o)=>o.distance-s.distance);return i[0]?i[0].id:null}function spt({pageBorderBox:e,draggable:t,droppables:n}){const r=MF(n).filter(i=>{if(!i.isEnabled)return!1;const s=i.subject.active;if(!s||!rpt(e,s))return!1;if(yAe(s)(e.center))return!0;const o=i.axis,a=s.center[o.crossAxisLine],u=e[o.crossAxisStart],l=e[o.crossAxisEnd],c=Vc(s[o.crossAxisStart],s[o.crossAxisEnd]),f=c(u),d=c(l);return!f&&!d?!0:f?u<a:l>a});return r.length?r.length===1?r[0].descriptor.id:ipt({pageBorderBox:e,draggable:t,candidates:r}):null}const vAe=(e,t)=>Wf(aR(e,t));var opt=(e,t)=>{const n=e.frame;return n?vAe(t,n.scroll.diff.value):t};function bAe({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function apt({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var upt=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:r,last:i,viewport:s,afterCritical:o})=>{const a=n.axis,u=uR(n.axis,t.displaceBy),l=u.value,c=e[a.start],f=e[a.end],h=FF(t,r).find(m=>{const g=m.descriptor.id,y=m.page.borderBox.center[a.line],v=dy(g,o),b=bAe({displaced:i,id:g});return v?b?f<=y:c<y-l:b?f<=y+l:c<y})||null,p=apt({draggable:t,closest:h,inHomeList:zS(t,n)});return oM({draggable:t,insideDestination:r,destination:n,viewport:s,last:i,displacedBy:u,index:p})};const lpt=4;var cpt=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:r,insideDestination:i,afterCritical:s})=>{if(!r.isCombineEnabled)return null;const o=r.axis,a=uR(r.axis,e.displaceBy),u=a.value,l=t[o.start],c=t[o.end],d=FF(e,i).find(p=>{const m=p.descriptor.id,g=p.page.borderBox,v=g[o.size]/lpt,b=dy(m,s),w=bAe({displaced:n.displaced,id:m});return b?w?c>g[o.start]+v&&c<g[o.end]-v:l>g[o.start]-u+v&&l<g[o.end]-u-v:w?c>g[o.start]+u+v&&c<g[o.end]+u-v:l>g[o.start]+v&&l<g[o.end]-v});return d?{displacedBy:a,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:d.descriptor.id,droppableId:r.descriptor.id}}}:null},_Ae=({pageOffset:e,draggable:t,draggables:n,droppables:r,previousImpact:i,viewport:s,afterCritical:o})=>{const a=vAe(t.page.borderBox,e),u=spt({pageBorderBox:a,draggable:t,droppables:r});if(!u)return Sht;const l=r[u],c=US(l.descriptor.id,n),f=opt(l,a);return cpt({pageBorderBoxWithDroppableScroll:f,draggable:t,previousImpact:i,destination:l,insideDestination:c,afterCritical:o})||upt({pageBorderBoxWithDroppableScroll:f,draggable:t,destination:l,insideDestination:c,last:i.displaced,viewport:s,afterCritical:o})},hQ=(e,t)=>({...e,[t.descriptor.id]:t});const fpt=({previousImpact:e,impact:t,droppables:n})=>{const r=Vl(e),i=Vl(t);if(!r||r===i)return n;const s=n[r];if(!s.subject.withPlaceholder)return n;const o=Jht(s);return hQ(n,o)};var dpt=({draggable:e,draggables:t,droppables:n,previousImpact:r,impact:i})=>{const s=fpt({previousImpact:r,impact:i,droppables:n}),o=Vl(i);if(!o)return s;const a=n[o];if(zS(e,a)||a.subject.withPlaceholder)return s;const u=gAe(a,e,t);return hQ(s,u)},r2=({state:e,clientSelection:t,dimensions:n,viewport:r,impact:i,scrollJumpRequest:s})=>{const o=r||e.viewport,a=n||e.dimensions,u=t||e.current.client.selection,l=Ll(u,e.initial.client.selection),c={offset:l,selection:u,borderBoxCenter:Fo(e.initial.client.borderBoxCenter,l)},f={selection:Fo(c.selection,o.scroll.current),borderBoxCenter:Fo(c.borderBoxCenter,o.scroll.current),offset:Fo(c.offset,o.scroll.diff.value)},d={client:c,page:f};if(e.phase==="COLLECTING")return{...e,dimensions:a,viewport:o,current:d};const h=a.draggables[e.critical.draggable.id],p=i||_Ae({pageOffset:f.offset,draggable:h,draggables:a.draggables,droppables:a.droppables,previousImpact:e.impact,viewport:o,afterCritical:e.afterCritical}),m=dpt({draggable:h,impact:p,previousImpact:e.impact,draggables:a.draggables,droppables:a.droppables});return{...e,current:d,dimensions:{draggables:a.draggables,droppables:m},impact:p,viewport:o,scrollJumpRequest:s||null,forceShouldAnimate:s?!1:null}};function hpt(e,t){return e.map(n=>t[n])}var wAe=({impact:e,viewport:t,draggables:n,destination:r,forceShouldAnimate:i})=>{const s=e.displaced,o=hpt(s.all,n),a=xI({afterDragging:o,destination:r,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:i,last:s});return{...e,displaced:a}},EAe=({impact:e,draggable:t,droppable:n,draggables:r,viewport:i,afterCritical:s})=>{const o=jF({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:s});return dQ({pageBorderBoxCenter:o,draggable:t,viewport:i})},xAe=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&ft();const r=e.impact,i=n||e.viewport,s=t||e.dimensions,{draggables:o,droppables:a}=s,u=o[e.critical.draggable.id],l=Vl(r);l||ft();const c=a[l],f=wAe({impact:r,viewport:i,destination:c,draggables:o}),d=EAe({impact:f,draggable:u,droppable:c,draggables:o,viewport:i,afterCritical:e.afterCritical});return r2({impact:f,clientSelection:d,state:e,dimensions:s,viewport:i})},ppt=e=>({index:e.index,droppableId:e.droppableId}),SAe=({draggable:e,home:t,draggables:n,viewport:r})=>{const i=uR(t.axis,e.displaceBy),s=US(t.descriptor.id,n),o=s.indexOf(e);o===-1&&ft();const a=s.slice(o+1),u=a.reduce((d,h)=>(d[h.descriptor.id]=!0,d),{}),l={inVirtualList:t.descriptor.mode==="virtual",displacedBy:i,effected:u};return{impact:{displaced:xI({afterDragging:a,destination:t,displacedBy:i,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:ppt(e.descriptor)}},afterCritical:l}},mpt=(e,t)=>({draggables:e.draggables,droppables:hQ(e.droppables,t)}),gpt=({draggable:e,offset:t,initialWindowScroll:n})=>{const r=nM(e.client,t),i=rM(r,n);return{...e,placeholder:{...e.placeholder,client:r},client:r,page:i}},ypt=e=>{const t=e.frame;return t||ft(),t},vpt=({additions:e,updatedDroppables:t,viewport:n})=>{const r=n.scroll.diff.value;return e.map(i=>{const s=i.descriptor.droppableId,o=t[s],u=ypt(o).scroll.diff.value,l=Fo(r,u);return gpt({draggable:i,offset:l,initialWindowScroll:n.scroll.initial})})},bpt=({state:e,published:t})=>{const n=t.modified.map(y=>{const v=e.dimensions.droppables[y.droppableId];return aQ(v,y.scroll)}),r={...e.dimensions.droppables,...oAe(n)},i=aAe(vpt({additions:t.additions,updatedDroppables:r,viewport:e.viewport})),s={...e.dimensions.draggables,...i};t.removals.forEach(y=>{delete s[y]});const o={droppables:r,draggables:s},a=Vl(e.impact),u=a?o.droppables[a]:null,l=o.draggables[e.critical.draggable.id],c=o.droppables[e.critical.droppable.id],{impact:f,afterCritical:d}=SAe({draggable:l,home:c,draggables:s,viewport:e.viewport}),h=u&&u.isCombineEnabled?e.impact:f,p=_Ae({pageOffset:e.current.page.offset,draggable:o.draggables[e.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:h,viewport:e.viewport,afterCritical:d}),m={...e,phase:"DRAGGING",impact:p,onLiftImpact:f,dimensions:o,afterCritical:d,forceShouldAnimate:!1};return e.phase==="COLLECTING"?m:{...m,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const vV=e=>e.movementMode==="SNAP",j8=(e,t,n)=>{const r=mpt(e.dimensions,t);return!vV(e)||n?r2({state:e,dimensions:r}):xAe({state:e,dimensions:r})};function B8(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const xfe={phase:"IDLE",completed:null,shouldFlush:!1};var _pt=(e=xfe,t)=>{if(t.type==="FLUSH")return{...xfe,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&ft();const{critical:n,clientSelection:r,viewport:i,dimensions:s,movementMode:o}=t.payload,a=s.draggables[n.draggable.id],u=s.droppables[n.droppable.id],l={selection:r,borderBoxCenter:a.client.borderBox.center,offset:vo},c={client:l,page:{selection:Fo(l.selection,i.scroll.initial),borderBoxCenter:Fo(l.selection,i.scroll.initial),offset:Fo(l.selection,i.scroll.diff.value)}},f=MF(s.droppables).every(m=>!m.isFixedOnPage),{impact:d,afterCritical:h}=SAe({draggable:a,home:u,draggables:s.draggables,viewport:i});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:o,dimensions:s,initial:c,current:c,isWindowScrollAllowed:f,impact:d,afterCritical:h,onLiftImpact:d,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&ft(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||ft(),bpt({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Qv(e)||ft();const{client:n}=t.payload;return V0(n,e.current.client.selection)?e:r2({state:e,clientSelection:n,impact:vV(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return B8(e);Qv(e)||ft();const{id:n,newScroll:r}=t.payload,i=e.dimensions.droppables[n];if(!i)return e;const s=aQ(i,r);return j8(e,s,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Qv(e)||ft();const{id:n,isEnabled:r}=t.payload,i=e.dimensions.droppables[n];i||ft(),i.isEnabled===r&&ft();const s={...i,isEnabled:r};return j8(e,s,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Qv(e)||ft();const{id:n,isCombineEnabled:r}=t.payload,i=e.dimensions.droppables[n];i||ft(),i.isCombineEnabled===r&&ft();const s={...i,isCombineEnabled:r};return j8(e,s,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Qv(e)||ft(),e.isWindowScrollAllowed||ft();const n=t.payload.newScroll;if(V0(e.viewport.scroll.current,n))return B8(e);const r=hAe(e.viewport,n);return vV(e)?xAe({state:e,viewport:r}):r2({state:e,viewport:r})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Qv(e))return e;const n=t.payload.maxScroll;if(V0(n,e.viewport.scroll.max))return e;const r={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:r}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&ft();const n=npt({state:e,type:t.type});return n?r2({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&ft(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:r,newHomeClientOffset:i}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||ft(),{phase:"DROP_ANIMATING",completed:n,dropDuration:r,newHomeClientOffset:i,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};const wpt=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),Ept=e=>({type:"LIFT",payload:e}),xpt=e=>({type:"INITIAL_PUBLISH",payload:e}),Spt=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),Tpt=()=>({type:"COLLECTION_STARTING",payload:null}),Cpt=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),Apt=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),Ipt=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),TAe=e=>({type:"MOVE",payload:e}),kpt=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),Rpt=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),Npt=()=>({type:"MOVE_UP",payload:null}),Dpt=()=>({type:"MOVE_DOWN",payload:null}),Ppt=()=>({type:"MOVE_RIGHT",payload:null}),Opt=()=>({type:"MOVE_LEFT",payload:null}),pQ=()=>({type:"FLUSH",payload:null}),$pt=e=>({type:"DROP_ANIMATE",payload:e}),mQ=e=>({type:"DROP_COMPLETE",payload:e}),CAe=e=>({type:"DROP",payload:e}),Mpt=e=>({type:"DROP_PENDING",payload:e}),AAe=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var Lpt=e=>({getState:t,dispatch:n})=>r=>i=>{if(i.type!=="LIFT"){r(i);return}const{id:s,clientSelection:o,movementMode:a}=i.payload,u=t();u.phase==="DROP_ANIMATING"&&n(mQ({completed:u.completed})),t().phase!=="IDLE"&&ft(),n(pQ()),n(wpt({draggableId:s,movementMode:a}));const c={draggableId:s,scrollOptions:{shouldPublishImmediately:a==="SNAP"}},{critical:f,dimensions:d,viewport:h}=e.startPublishing(c);n(xpt({critical:f,dimensions:d,clientSelection:o,movementMode:a,viewport:h}))},Fpt=e=>()=>t=>n=>{n.type==="INITIAL_PUBLISH"&&e.dragging(),n.type==="DROP_ANIMATE"&&e.dropping(n.payload.completed.result.reason),(n.type==="FLUSH"||n.type==="DROP_COMPLETE")&&e.resting(),t(n)};const gQ={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},SI={opacity:{drop:0,combining:.7},scale:{drop:.75}},IAe={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Pv=`${IAe.outOfTheWay}s ${gQ.outOfTheWay}`,i2={fluid:`opacity ${Pv}`,snap:`transform ${Pv}, opacity ${Pv}`,drop:e=>{const t=`${e}s ${gQ.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${Pv}`,placeholder:`height ${Pv}, width ${Pv}, margin ${Pv}`},Sfe=e=>V0(e,vo)?void 0:`translate(${e.x}px, ${e.y}px)`,bV={moveTo:Sfe,drop:(e,t)=>{const n=Sfe(e);if(n)return t?`${n} scale(${SI.scale.drop})`:n}},{minDropTime:_V,maxDropTime:kAe}=IAe,jpt=kAe-_V,Tfe=1500,Bpt=.6;var Upt=({current:e,destination:t,reason:n})=>{const r=wI(e,t);if(r<=0)return _V;if(r>=Tfe)return kAe;const i=r/Tfe,s=_V+jpt*i,o=n==="CANCEL"?s*Bpt:s;return Number(o.toFixed(2))},zpt=({impact:e,draggable:t,dimensions:n,viewport:r,afterCritical:i})=>{const{draggables:s,droppables:o}=n,a=Vl(e),u=a?o[a]:null,l=o[t.descriptor.droppableId],c=EAe({impact:e,draggable:t,draggables:s,afterCritical:i,droppable:u||l,viewport:r});return Ll(c,t.client.borderBox.center)},Vpt=({draggables:e,reason:t,lastImpact:n,home:r,viewport:i,onLiftImpact:s})=>!n.at||t!=="DROP"?{impact:wAe({draggables:e,impact:s,destination:r,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:EI},didDropInsideDroppable:!0};const Hpt=({getState:e,dispatch:t})=>n=>r=>{if(r.type!=="DROP"){n(r);return}const i=e(),s=r.payload.reason;if(i.phase==="COLLECTING"){t(Mpt({reason:s}));return}if(i.phase==="IDLE")return;i.phase==="DROP_PENDING"&&i.isWaiting&&ft(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||ft();const a=i.critical,u=i.dimensions,l=u.draggables[i.critical.draggable.id],{impact:c,didDropInsideDroppable:f}=Vpt({reason:s,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),d=f?uQ(c):null,h=f?LF(c):null,p={index:a.draggable.index,droppableId:a.droppable.id},m={draggableId:l.descriptor.id,type:l.descriptor.type,source:p,reason:s,mode:i.movementMode,destination:d,combine:h},g=zpt({impact:c,draggable:l,dimensions:u,viewport:i.viewport,afterCritical:i.afterCritical}),y={critical:i.critical,afterCritical:i.afterCritical,result:m,impact:c};if(!(!V0(i.current.client.offset,g)||!!m.combine)){t(mQ({completed:y}));return}const b=Upt({current:i.current.client.offset,destination:g,reason:s});t($pt({newHomeClientOffset:g,dropDuration:b,completed:y}))};var qpt=Hpt,RAe=()=>({x:window.pageXOffset,y:window.pageYOffset});function Wpt(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function Gpt({onWindowScroll:e}){function t(){e(RAe())}const n=_I(t),r=Wpt(n);let i=z0;function s(){return i!==z0}function o(){s()&&ft(),i=Lc(window,[r])}function a(){s()||ft(),n.cancel(),i(),i=z0}return{start:o,stop:a,isActive:s}}const Ypt=e=>e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH",Kpt=e=>{const t=Gpt({onWindowScroll:n=>{e.dispatch(kpt({newScroll:n}))}});return n=>r=>{!t.isActive()&&r.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&Ypt(r)&&t.stop(),n(r)}};var Xpt=Kpt,Qpt=e=>{let t=!1,n=!1;const r=setTimeout(()=>{n=!0}),i=s=>{t||n||(t=!0,e(s),clearTimeout(r))};return i.wasCalled=()=>t,i},Jpt=()=>{const e=[],t=i=>{const s=e.findIndex(a=>a.timerId===i);s===-1&&ft();const[o]=e.splice(s,1);o.callback()};return{add:i=>{const s=setTimeout(()=>t(s)),o={timerId:s,callback:i};e.push(o)},flush:()=>{if(!e.length)return;const i=[...e];e.length=0,i.forEach(s=>{clearTimeout(s.timerId),s.callback()})}}};const Zpt=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,emt=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,tmt=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r},sC=(e,t)=>{t()},SD=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function U8(e,t,n,r){if(!e){n(r(t));return}const i=Qpt(n);e(t,{announce:i}),i.wasCalled()||n(r(t))}var nmt=(e,t)=>{const n=Jpt();let r=null;const i=(f,d)=>{r&&ft(),sC("onBeforeCapture",()=>{const h=e().onBeforeCapture;h&&h({draggableId:f,mode:d})})},s=(f,d)=>{r&&ft(),sC("onBeforeDragStart",()=>{const h=e().onBeforeDragStart;h&&h(SD(f,d))})},o=(f,d)=>{r&&ft();const h=SD(f,d);r={mode:d,lastCritical:f,lastLocation:h.source,lastCombine:null},n.add(()=>{sC("onDragStart",()=>U8(e().onDragStart,h,t,oO.onDragStart))})},a=(f,d)=>{const h=uQ(d),p=LF(d);r||ft();const m=!tmt(f,r.lastCritical);m&&(r.lastCritical=f);const g=!Zpt(r.lastLocation,h);g&&(r.lastLocation=h);const y=!emt(r.lastCombine,p);if(y&&(r.lastCombine=p),!m&&!g&&!y)return;const v={...SD(f,r.mode),combine:p,destination:h};n.add(()=>{sC("onDragUpdate",()=>U8(e().onDragUpdate,v,t,oO.onDragUpdate))})},u=()=>{r||ft(),n.flush()},l=f=>{r||ft(),r=null,sC("onDragEnd",()=>U8(e().onDragEnd,f,t,oO.onDragEnd))};return{beforeCapture:i,beforeStart:s,start:o,update:a,flush:u,drop:l,abort:()=>{if(!r)return;const f={...SD(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};l(f)}}},rmt=(e,t)=>{const n=nmt(e,t);return r=>i=>s=>{if(s.type==="BEFORE_INITIAL_CAPTURE"){n.beforeCapture(s.payload.draggableId,s.payload.movementMode);return}if(s.type==="INITIAL_PUBLISH"){const a=s.payload.critical;n.beforeStart(a,s.payload.movementMode),i(s),n.start(a,s.payload.movementMode);return}if(s.type==="DROP_COMPLETE"){const a=s.payload.completed.result;n.flush(),i(s),n.drop(a);return}if(i(s),s.type==="FLUSH"){n.abort();return}const o=r.getState();o.phase==="DRAGGING"&&n.update(o.critical,o.impact)}};const imt=e=>t=>n=>{if(n.type!=="DROP_ANIMATION_FINISHED"){t(n);return}const r=e.getState();r.phase!=="DROP_ANIMATING"&&ft(),e.dispatch(mQ({completed:r.completed}))};var smt=imt;const omt=e=>{let t=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return i=>s=>{if((s.type==="FLUSH"||s.type==="DROP_COMPLETE"||s.type==="DROP_ANIMATION_FINISHED")&&r(),i(s),s.type!=="DROP_ANIMATE")return;const o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(AAe())}};n=requestAnimationFrame(()=>{n=null,t=Lc(window,[o])})}};var amt=omt,umt=e=>()=>t=>n=>{(n.type==="DROP_COMPLETE"||n.type==="FLUSH"||n.type==="DROP_ANIMATE")&&e.stopPublishing(),t(n)},lmt=e=>{let t=!1;return()=>n=>r=>{if(r.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),e.tryRestoreFocusRecorded();return}if(n(r),!!t){if(r.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(r.type==="DROP_COMPLETE"){t=!1;const i=r.payload.completed.result;i.combine&&e.tryShiftRecord(i.draggableId,i.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const cmt=e=>e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH";var fmt=e=>t=>n=>r=>{if(cmt(r)){e.stop(),n(r);return}if(r.type==="INITIAL_PUBLISH"){n(r);const i=t.getState();i.phase!=="DRAGGING"&&ft(),e.start(i);return}n(r),e.scroll(t.getState())};const dmt=e=>t=>n=>{if(t(n),n.type!=="PUBLISH_WHILE_DRAGGING")return;const r=e.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||e.dispatch(CAe({reason:r.reason})))};var hmt=dmt;const pmt=bI;var mmt=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:r,announce:i,autoScroller:s})=>XX(_pt,pmt(MCe(Fpt(n),umt(e),Lpt(e),qpt,smt,amt,hmt,fmt(s),Xpt,lmt(t),rmt(r,i))));const z8=()=>({additions:{},removals:{},modified:{}});function gmt({registry:e,callbacks:t}){let n=z8(),r=null;const i=()=>{r||(t.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:u,removals:l,modified:c}=n,f=Object.keys(u).map(p=>e.draggable.getById(p).getDimension(vo)).sort((p,m)=>p.descriptor.index-m.descriptor.index),d=Object.keys(c).map(p=>{const g=e.droppable.getById(p).callbacks.getScrollWhileDragging();return{droppableId:p,scroll:g}}),h={additions:f,removals:Object.keys(l),modified:d};n=z8(),t.publish(h)}))};return{add:u=>{const l=u.descriptor.id;n.additions[l]=u,n.modified[u.descriptor.droppableId]=!0,n.removals[l]&&delete n.removals[l],i()},remove:u=>{const l=u.descriptor;n.removals[l.id]=!0,n.modified[l.droppableId]=!0,n.additions[l.id]&&delete n.additions[l.id],i()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,n=z8())}}}var NAe=({scrollHeight:e,scrollWidth:t,height:n,width:r})=>{const i=Ll({x:t,y:e},{x:r,y:n});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},DAe=()=>{const e=document.documentElement;return e||ft(),e},PAe=()=>{const e=DAe();return NAe({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},ymt=()=>{const e=RAe(),t=PAe(),n=e.y,r=e.x,i=DAe(),s=i.clientWidth,o=i.clientHeight,a=r+s,u=n+o;return{frame:Wf({top:n,left:r,right:a,bottom:u}),scroll:{initial:e,current:e,max:t,diff:{value:vo,displacement:vo}}}},vmt=({critical:e,scrollOptions:t,registry:n})=>{const r=ymt(),i=r.scroll.current,s=e.droppable,o=n.droppable.getAllByType(s.type).map(c=>c.callbacks.getDimensionAndWatchScroll(i,t)),a=n.draggable.getAllByType(e.draggable.type).map(c=>c.getDimension(i));return{dimensions:{draggables:aAe(a),droppables:oAe(o)},critical:e,viewport:r}};function Cfe(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var bmt=(e,t)=>{let n=null;const r=gmt({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),i=(d,h)=>{e.droppable.exists(d)||ft(),n&&t.updateDroppableIsEnabled({id:d,isEnabled:h})},s=(d,h)=>{n&&(e.droppable.exists(d)||ft(),t.updateDroppableIsCombineEnabled({id:d,isCombineEnabled:h}))},o=(d,h)=>{n&&(e.droppable.exists(d)||ft(),t.updateDroppableScroll({id:d,newScroll:h}))},a=(d,h)=>{n&&e.droppable.getById(d).callbacks.scroll(h)},u=()=>{if(!n)return;r.stop();const d=n.critical.droppable;e.droppable.getAllByType(d.type).forEach(h=>h.callbacks.dragStopped()),n.unsubscribe(),n=null},l=d=>{n||ft();const h=n.critical.draggable;d.type==="ADDITION"&&Cfe(e,h,d.value)&&r.add(d.value),d.type==="REMOVAL"&&Cfe(e,h,d.value)&&r.remove(d.value)};return{updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:s,scrollDroppable:a,updateDroppableScroll:o,startPublishing:d=>{n&&ft();const h=e.draggable.getById(d.draggableId),p=e.droppable.getById(h.descriptor.droppableId),m={draggable:h.descriptor,droppable:p.descriptor},g=e.subscribe(l);return n={critical:m,unsubscribe:g},vmt({critical:m,registry:e,scrollOptions:d.scrollOptions})},stopPublishing:u}},OAe=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",_mt=e=>{window.scrollBy(e.x,e.y)};const wmt=go(e=>MF(e).filter(t=>!(!t.isEnabled||!t.frame))),Emt=(e,t)=>wmt(t).find(r=>(r.frame||ft(),yAe(r.frame.pageMarginBox)(e)))||null;var xmt=({center:e,destination:t,droppables:n})=>{if(t){const i=n[t];return i.frame?i:null}return Emt(e,n)};const TI={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var Smt=(e,t,n=()=>TI)=>{const r=n(),i=e[t.size]*r.startFromPercentage,s=e[t.size]*r.maxScrollAtPercentage;return{startScrollingFrom:i,maxScrollValueAt:s}},$Ae=({startOfRange:e,endOfRange:t,current:n})=>{const r=t-e;return r===0?0:(n-e)/r},yQ=1,Tmt=(e,t,n=()=>TI)=>{const r=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return r.maxPixelScroll;if(e===t.startScrollingFrom)return yQ;const s=1-$Ae({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),o=r.maxPixelScroll*r.ease(s);return Math.ceil(o)},Cmt=(e,t,n)=>{const r=n(),i=r.durationDampening.accelerateAt,s=r.durationDampening.stopDampeningAt,o=t,a=s,l=Date.now()-o;if(l>=s)return e;if(l<i)return yQ;const c=$Ae({startOfRange:i,endOfRange:a,current:l}),f=e*r.ease(c);return Math.ceil(f)},Afe=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const s=Tmt(e,t,i);return s===0?0:r?Math.max(Cmt(s,n,i),yQ):s},Ife=({container:e,distanceToEdges:t,dragStartTime:n,axis:r,shouldUseTimeDampening:i,getAutoScrollerOptions:s})=>{const o=Smt(e,r,s);return t[r.end]<t[r.start]?Afe({distanceToEdge:t[r.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:s}):-1*Afe({distanceToEdge:t[r.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:s})},Amt=({container:e,subject:t,proposedScroll:n})=>{const r=t.height>e.height,i=t.width>e.width;return!i&&!r?n:i&&r?null:{x:i?0:n.x,y:r?0:n.y}};const Imt=sAe(e=>e===0?0:e);var MAe=({dragStartTime:e,container:t,subject:n,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:s})=>{const o={top:r.y-t.top,right:t.right-r.x,bottom:t.bottom-r.y,left:r.x-t.left},a=Ife({container:t,distanceToEdges:o,dragStartTime:e,axis:lQ,shouldUseTimeDampening:i,getAutoScrollerOptions:s}),u=Ife({container:t,distanceToEdges:o,dragStartTime:e,axis:cAe,shouldUseTimeDampening:i,getAutoScrollerOptions:s}),l=Imt({x:u,y:a});if(V0(l,vo))return null;const c=Amt({container:t,subject:n,proposedScroll:l});return c?V0(c,vo)?null:c:null};const kmt=sAe(e=>e===0?0:e>0?1:-1),vQ=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:r})=>{const i=Fo(t,r),s={x:e(i.x,n.x),y:e(i.y,n.y)};return V0(s,vo)?null:s}})(),LAe=({max:e,current:t,change:n})=>{const r={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},i=kmt(n),s=vQ({max:r,current:t,change:i});return!s||i.x!==0&&s.x===0||i.y!==0&&s.y===0},bQ=(e,t)=>LAe({current:e.scroll.current,max:e.scroll.max,change:t}),Rmt=(e,t)=>{if(!bQ(e,t))return null;const n=e.scroll.max,r=e.scroll.current;return vQ({current:r,max:n,change:t})},_Q=(e,t)=>{const n=e.frame;return n?LAe({current:n.scroll.current,max:n.scroll.max,change:t}):!1},Nmt=(e,t)=>{const n=e.frame;return!n||!_Q(e,t)?null:vQ({current:n.scroll.current,max:n.scroll.max,change:t})};var Dmt=({viewport:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:s})=>{const o=MAe({dragStartTime:r,container:e.frame,subject:t,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:s});return o&&bQ(e,o)?o:null},Pmt=({droppable:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:s})=>{const o=e.frame;if(!o)return null;const a=MAe({dragStartTime:r,container:o.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:s});return a&&_Q(e,a)?a:null},kfe=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:r,scrollDroppable:i,getAutoScrollerOptions:s})=>{const o=e.current.page.borderBoxCenter,u=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const f=e.viewport,d=Dmt({dragStartTime:t,viewport:f,subject:u,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:s});if(d){r(d);return}}const l=xmt({center:o,destination:Vl(e.impact),droppables:e.dimensions.droppables});if(!l)return;const c=Pmt({dragStartTime:t,droppable:l,subject:u,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:s});c&&i(l.descriptor.id,c)},Omt=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>TI})=>{const r=_I(e),i=_I(t);let s=null;const o=l=>{s||ft();const{shouldUseTimeDampening:c,dragStartTime:f}=s;kfe({state:l,scrollWindow:r,scrollDroppable:i,dragStartTime:f,shouldUseTimeDampening:c,getAutoScrollerOptions:n})};return{start:l=>{s&&ft();const c=Date.now();let f=!1;const d=()=>{f=!0};kfe({state:l,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:d,scrollDroppable:d,getAutoScrollerOptions:n}),s={dragStartTime:c,shouldUseTimeDampening:f},f&&o(l)},stop:()=>{s&&(r.cancel(),i.cancel(),s=null)},scroll:o}},$mt=({move:e,scrollDroppable:t,scrollWindow:n})=>{const r=(a,u)=>{const l=Fo(a.current.client.selection,u);e({client:l})},i=(a,u)=>{if(!_Q(a,u))return u;const l=Nmt(a,u);if(!l)return t(a.descriptor.id,u),null;const c=Ll(u,l);return t(a.descriptor.id,c),Ll(u,c)},s=(a,u,l)=>{if(!a||!bQ(u,l))return l;const c=Rmt(u,l);if(!c)return n(l),null;const f=Ll(l,c);return n(f),Ll(l,f)};return a=>{const u=a.scrollJumpRequest;if(!u)return;const l=Vl(a.impact);l||ft();const c=i(a.dimensions.droppables[l],u);if(!c)return;const f=a.viewport,d=s(a.isWindowScrollAllowed,f,c);d&&r(a,d)}},Mmt=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:r})=>{const i=Omt({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:r}),s=$mt({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:u=>{if(!(r().disabled||u.phase!=="DRAGGING")){if(u.movementMode==="FLUID"){i.scroll(u);return}u.scrollJumpRequest&&s(u)}},start:i.start,stop:i.stop}};const dx="data-rfd",hx=(()=>{const e=`${dx}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),wV=(()=>{const e=`${dx}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),Lmt=(()=>{const e=`${dx}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),Rfe={contextId:`${dx}-scroll-container-context-id`},Fmt=e=>t=>`[${t}="${e}"]`,oC=(e,t)=>e.map(n=>{const r=n.styles[t];return r?`${n.selector} { ${r} }`:""}).join(" "),jmt="pointer-events: none;";var Bmt=e=>{const t=Fmt(e),n=(()=>{const a=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(hx.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:a,dragging:jmt,dropAnimating:a}}})(),r=(()=>{const a=`
      transition: ${i2.outOfTheWay};
    `;return{selector:t(wV.contextId),styles:{dragging:a,dropAnimating:a,userCancel:a}}})(),i={selector:t(Lmt.contextId),styles:{always:"overflow-anchor: none;"}},o=[r,n,i,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:oC(o,"always"),resting:oC(o,"resting"),dragging:oC(o,"dragging"),dropAnimating:oC(o,"dropAnimating"),userCancel:oC(o,"userCancel")}};const Umt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?A.useLayoutEffect:A.useEffect;var Hl=Umt;const V8=()=>{const e=document.querySelector("head");return e||ft(),e},Nfe=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function zmt(e,t){const n=Zn(()=>Bmt(e),[e]),r=A.useRef(null),i=A.useRef(null),s=Lt(go(f=>{const d=i.current;d||ft(),d.textContent=f}),[]),o=Lt(f=>{const d=r.current;d||ft(),d.textContent=f},[]);Hl(()=>{!r.current&&!i.current||ft();const f=Nfe(t),d=Nfe(t);return r.current=f,i.current=d,f.setAttribute(`${dx}-always`,e),d.setAttribute(`${dx}-dynamic`,e),V8().appendChild(f),V8().appendChild(d),o(n.always),s(n.resting),()=>{const h=p=>{const m=p.current;m||ft(),V8().removeChild(m),p.current=null};h(r),h(i)}},[t,o,s,n.always,n.resting,e]);const a=Lt(()=>s(n.dragging),[s,n.dragging]),u=Lt(f=>{if(f==="DROP"){s(n.dropAnimating);return}s(n.userCancel)},[s,n.dropAnimating,n.userCancel]),l=Lt(()=>{i.current&&s(n.resting)},[s,n.resting]);return Zn(()=>({dragging:a,dropping:u,resting:l}),[a,u,l])}function FAe(e,t){return Array.from(e.querySelectorAll(t))}var jAe=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function BF(e){return e instanceof jAe(e).HTMLElement}function Vmt(e,t){const n=`[${hx.contextId}="${e}"]`,r=FAe(document,n);if(!r.length)return null;const i=r.find(s=>s.getAttribute(hx.draggableId)===t);return!i||!BF(i)?null:i}function Hmt(e){const t=A.useRef({}),n=A.useRef(null),r=A.useRef(null),i=A.useRef(!1),s=Lt(function(d,h){const p={id:d,focus:h};return t.current[d]=p,function(){const g=t.current;g[d]!==p&&delete g[d]}},[]),o=Lt(function(d){const h=Vmt(e,d);h&&h!==document.activeElement&&h.focus()},[e]),a=Lt(function(d,h){n.current===d&&(n.current=h)},[]),u=Lt(function(){r.current||i.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const d=n.current;d&&o(d)}))},[o]),l=Lt(function(d){n.current=null;const h=document.activeElement;h&&h.getAttribute(hx.draggableId)===d&&(n.current=d)},[]);return Hl(()=>(i.current=!0,function(){i.current=!1;const d=r.current;d&&cancelAnimationFrame(d)}),[]),Zn(()=>({register:s,tryRecordFocus:l,tryRestoreFocusRecorded:u,tryShiftRecord:a}),[s,l,u,a])}function qmt(){const e={draggables:{},droppables:{}},t=[];function n(f){return t.push(f),function(){const h=t.indexOf(f);h!==-1&&t.splice(h,1)}}function r(f){t.length&&t.forEach(d=>d(f))}function i(f){return e.draggables[f]||null}function s(f){const d=i(f);return d||ft(),d}const o={register:f=>{e.draggables[f.descriptor.id]=f,r({type:"ADDITION",value:f})},update:(f,d)=>{const h=e.draggables[d.descriptor.id];h&&h.uniqueId===f.uniqueId&&(delete e.draggables[d.descriptor.id],e.draggables[f.descriptor.id]=f)},unregister:f=>{const d=f.descriptor.id,h=i(d);h&&f.uniqueId===h.uniqueId&&(delete e.draggables[d],e.droppables[f.descriptor.droppableId]&&r({type:"REMOVAL",value:f}))},getById:s,findById:i,exists:f=>!!i(f),getAllByType:f=>Object.values(e.draggables).filter(d=>d.descriptor.type===f)};function a(f){return e.droppables[f]||null}function u(f){const d=a(f);return d||ft(),d}const l={register:f=>{e.droppables[f.descriptor.id]=f},unregister:f=>{const d=a(f.descriptor.id);d&&f.uniqueId===d.uniqueId&&delete e.droppables[f.descriptor.id]},getById:u,findById:a,exists:f=>!!a(f),getAllByType:f=>Object.values(e.droppables).filter(d=>d.descriptor.type===f)};function c(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:l,subscribe:n,clean:c}}function Wmt(){const e=Zn(qmt,[]);return A.useEffect(()=>function(){Pt.version.startsWith("16")||Pt.version.startsWith("17")?requestAnimationFrame(e.clean):e.clean()},[e]),e}var wQ=Pt.createContext(null),aM=()=>{const e=document.body;return e||ft(),e};const Gmt={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var Ymt=Gmt;const Kmt=e=>`rfd-announcement-${e}`;function Xmt(e){const t=Zn(()=>Kmt(e),[e]),n=A.useRef(null);return A.useEffect(function(){const s=document.createElement("div");return n.current=s,s.id=t,s.setAttribute("aria-live","assertive"),s.setAttribute("aria-atomic","true"),U0(s.style,Ymt),aM().appendChild(s),function(){setTimeout(function(){const u=aM();u.contains(s)&&u.removeChild(s),s===n.current&&(n.current=null)})}},[t]),Lt(i=>{const s=n.current;if(s){s.textContent=i;return}},[])}let Qmt=0;const BAe={separator:"::"};function Jmt(e,t=BAe){return Zn(()=>`${e}${t.separator}${Qmt++}`,[t.separator,e])}function Zmt(e,t=BAe){const n=Pt.useId();return Zn(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}var EQ="useId"in Pt?Zmt:Jmt;function egt({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function tgt({contextId:e,text:t}){const n=EQ("hidden-text",{separator:"-"}),r=Zn(()=>egt({contextId:e,uniqueId:n}),[n,e]);return A.useEffect(function(){const s=document.createElement("div");return s.id=r,s.textContent=t,s.style.display="none",aM().appendChild(s),function(){const a=aM();a.contains(s)&&a.removeChild(s)}},[r,t]),r}var UF=Pt.createContext(null);function UAe(e){const t=A.useRef(e);return A.useEffect(()=>{t.current=e}),t}function ngt(){let e=null;function t(){return!!e}function n(o){return o===e}function r(o){e&&ft();const a={abandon:o};return e=a,a}function i(){e||ft(),e=null}function s(){e&&(e.abandon(),i())}return{isClaimed:t,isActive:n,claim:r,release:i,tryAbandon:s}}function CI(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const rgt=9,igt=13,xQ=27,zAe=32,sgt=33,ogt=34,agt=35,ugt=36,lgt=37,cgt=38,fgt=39,dgt=40,hgt={[igt]:!0,[rgt]:!0};var VAe=e=>{hgt[e.keyCode]&&e.preventDefault()};const pgt=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(r=>`on${r}`in document)||e})();var zF=pgt;const HAe=0,Dfe=5;function mgt(e,t){return Math.abs(t.x-e.x)>=Dfe||Math.abs(t.y-e.y)>=Dfe}const Pfe={type:"IDLE"};function ggt({cancel:e,completed:t,getPhase:n,setPhase:r}){return[{eventName:"mousemove",fn:i=>{const{button:s,clientX:o,clientY:a}=i;if(s!==HAe)return;const u={x:o,y:a},l=n();if(l.type==="DRAGGING"){i.preventDefault(),l.actions.move(u);return}l.type!=="PENDING"&&ft();const c=l.point;if(!mgt(c,u))return;i.preventDefault();const f=l.actions.fluidLift(u);r({type:"DRAGGING",actions:f})}},{eventName:"mouseup",fn:i=>{const s=n();if(s.type!=="DRAGGING"){e();return}i.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:i=>{n().type==="DRAGGING"&&i.preventDefault(),e()}},{eventName:"keydown",fn:i=>{if(n().type==="PENDING"){e();return}if(i.keyCode===xQ){i.preventDefault(),e();return}VAe(i)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:i=>{const s=n();if(s.type==="IDLE"&&ft(),s.actions.shouldRespectForcePress()){e();return}i.preventDefault()}},{eventName:zF,fn:e}]}function ygt(e){const t=A.useRef(Pfe),n=A.useRef(z0),r=Zn(()=>({eventName:"mousedown",fn:function(f){if(f.defaultPrevented||f.button!==HAe||f.ctrlKey||f.metaKey||f.shiftKey||f.altKey)return;const d=e.findClosestDraggableId(f);if(!d)return;const h=e.tryGetLock(d,o,{sourceEvent:f});if(!h)return;f.preventDefault();const p={x:f.clientX,y:f.clientY};n.current(),l(h,p)}}),[e]),i=Zn(()=>({eventName:"webkitmouseforcewillbegin",fn:c=>{if(c.defaultPrevented)return;const f=e.findClosestDraggableId(c);if(!f)return;const d=e.findOptionsForDraggable(f);d&&(d.shouldRespectForcePress||e.canGetLock(f)&&c.preventDefault())}}),[e]),s=Lt(function(){const f={passive:!1,capture:!0};n.current=Lc(window,[i,r],f)},[i,r]),o=Lt(()=>{t.current.type!=="IDLE"&&(t.current=Pfe,n.current(),s())},[s]),a=Lt(()=>{const c=t.current;o(),c.type==="DRAGGING"&&c.actions.cancel({shouldBlockNextClick:!0}),c.type==="PENDING"&&c.actions.abort()},[o]),u=Lt(function(){const f={capture:!0,passive:!1},d=ggt({cancel:a,completed:o,getPhase:()=>t.current,setPhase:h=>{t.current=h}});n.current=Lc(window,d,f)},[a,o]),l=Lt(function(f,d){t.current.type!=="IDLE"&&ft(),t.current={type:"PENDING",point:d,actions:f},u()},[u]);Hl(function(){return s(),function(){n.current()}},[s])}function vgt(){}const bgt={[ogt]:!0,[sgt]:!0,[ugt]:!0,[agt]:!0};function _gt(e,t){function n(){t(),e.cancel()}function r(){t(),e.drop()}return[{eventName:"keydown",fn:i=>{if(i.keyCode===xQ){i.preventDefault(),n();return}if(i.keyCode===zAe){i.preventDefault(),r();return}if(i.keyCode===dgt){i.preventDefault(),e.moveDown();return}if(i.keyCode===cgt){i.preventDefault(),e.moveUp();return}if(i.keyCode===fgt){i.preventDefault(),e.moveRight();return}if(i.keyCode===lgt){i.preventDefault(),e.moveLeft();return}if(bgt[i.keyCode]){i.preventDefault();return}VAe(i)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:zF,fn:n}]}function wgt(e){const t=A.useRef(vgt),n=Zn(()=>({eventName:"keydown",fn:function(s){if(s.defaultPrevented||s.keyCode!==zAe)return;const o=e.findClosestDraggableId(s);if(!o)return;const a=e.tryGetLock(o,c,{sourceEvent:s});if(!a)return;s.preventDefault();let u=!0;const l=a.snapLift();t.current();function c(){u||ft(),u=!1,t.current(),r()}t.current=Lc(window,_gt(l,c),{capture:!0,passive:!1})}}),[e]),r=Lt(function(){const s={passive:!1,capture:!0};t.current=Lc(window,[n],s)},[n]);Hl(function(){return r(),function(){t.current()}},[r])}const H8={type:"IDLE"},Egt=120,xgt=.15;function Sgt({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===xQ&&n.preventDefault(),e()}},{eventName:zF,fn:e}]}function Tgt({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const i=n();if(i.type!=="DRAGGING"){e();return}i.hasMoved=!0;const{clientX:s,clientY:o}=r.touches[0],a={x:s,y:o};r.preventDefault(),i.actions.move(a)}},{eventName:"touchend",fn:r=>{const i=n();if(i.type!=="DRAGGING"){e();return}r.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:r=>{if(n().type!=="DRAGGING"){e();return}r.preventDefault(),e()}},{eventName:"touchforcechange",fn:r=>{const i=n();i.type==="IDLE"&&ft();const s=r.touches[0];if(!s||!(s.force>=xgt))return;const a=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){a&&e();return}if(a){if(i.hasMoved){r.preventDefault();return}e();return}r.preventDefault()}},{eventName:zF,fn:e}]}function Cgt(e){const t=A.useRef(H8),n=A.useRef(z0),r=Lt(function(){return t.current},[]),i=Lt(function(h){t.current=h},[]),s=Zn(()=>({eventName:"touchstart",fn:function(h){if(h.defaultPrevented)return;const p=e.findClosestDraggableId(h);if(!p)return;const m=e.tryGetLock(p,a,{sourceEvent:h});if(!m)return;const g=h.touches[0],{clientX:y,clientY:v}=g,b={x:y,y:v};n.current(),f(m,b)}}),[e]),o=Lt(function(){const h={capture:!0,passive:!1};n.current=Lc(window,[s],h)},[s]),a=Lt(()=>{const d=t.current;d.type!=="IDLE"&&(d.type==="PENDING"&&clearTimeout(d.longPressTimerId),i(H8),n.current(),o())},[o,i]),u=Lt(()=>{const d=t.current;a(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[a]),l=Lt(function(){const h={capture:!0,passive:!1},p={cancel:u,completed:a,getPhase:r},m=Lc(window,Tgt(p),h),g=Lc(window,Sgt(p),h);n.current=function(){m(),g()}},[u,r,a]),c=Lt(function(){const h=r();h.type!=="PENDING"&&ft();const p=h.actions.fluidLift(h.point);i({type:"DRAGGING",actions:p,hasMoved:!1})},[r,i]),f=Lt(function(h,p){r().type!=="IDLE"&&ft();const m=setTimeout(c,Egt);i({type:"PENDING",point:p,actions:h,longPressTimerId:m}),l()},[l,r,i,c]);Hl(function(){return o(),function(){n.current();const p=r();p.type==="PENDING"&&(clearTimeout(p.longPressTimerId),i(H8))}},[r,o,i]),Hl(function(){return Lc(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const Agt=["input","button","textarea","select","option","optgroup","video","audio"];function qAe(e,t){if(t==null)return!1;if(Agt.includes(t.tagName.toLowerCase()))return!0;const r=t.getAttribute("contenteditable");return r==="true"||r===""?!0:t===e?!1:qAe(e,t.parentElement)}function Igt(e,t){const n=t.target;return BF(n)?qAe(e,n):!1}var kgt=e=>Wf(e.getBoundingClientRect()).center;function Rgt(e){return e instanceof jAe(e).Element}const Ngt=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||e})();function WAe(e,t){return e==null?null:e[Ngt](t)?e:WAe(e.parentElement,t)}function Dgt(e,t){return e.closest?e.closest(t):WAe(e,t)}function Pgt(e){return`[${hx.contextId}="${e}"]`}function Ogt(e,t){const n=t.target;if(!Rgt(n))return null;const r=Pgt(e),i=Dgt(n,r);return!i||!BF(i)?null:i}function $gt(e,t){const n=Ogt(e,t);return n?n.getAttribute(hx.draggableId):null}function Mgt(e,t){const n=`[${wV.contextId}="${e}"]`,i=FAe(document,n).find(s=>s.getAttribute(wV.id)===t);return!i||!BF(i)?null:i}function Lgt(e){e.preventDefault()}function TD({expected:e,phase:t,isLockActive:n,shouldWarn:r}){return!(!n()||e!==t)}function GAe({lockAPI:e,store:t,registry:n,draggableId:r}){if(e.isClaimed())return!1;const i=n.draggable.findById(r);return!(!i||!i.options.isEnabled||!OAe(t.getState(),r))}function Fgt({lockAPI:e,contextId:t,store:n,registry:r,draggableId:i,forceSensorStop:s,sourceEvent:o}){if(!GAe({lockAPI:e,store:n,registry:r,draggableId:i}))return null;const u=r.draggable.getById(i),l=Mgt(t,u.descriptor.id);if(!l||o&&!u.options.canDragInteractiveElements&&Igt(l,o))return null;const c=e.claim(s||z0);let f="PRE_DRAG";function d(){return u.options.shouldRespectForcePress}function h(){return e.isActive(c)}function p(E,x){TD({expected:E,phase:f,isLockActive:h,shouldWarn:!0})&&n.dispatch(x())}const m=p.bind(null,"DRAGGING");function g(E){function x(){e.release(),f="COMPLETED"}f!=="PRE_DRAG"&&(x(),ft()),n.dispatch(Ept(E.liftActionArgs)),f="DRAGGING";function S(C,I={shouldBlockNextClick:!1}){if(E.cleanup(),I.shouldBlockNextClick){const k=Lc(window,[{eventName:"click",fn:Lgt,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(k)}x(),n.dispatch(CAe({reason:C}))}return{isActive:()=>TD({expected:"DRAGGING",phase:f,isLockActive:h,shouldWarn:!1}),shouldRespectForcePress:d,drop:C=>S("DROP",C),cancel:C=>S("CANCEL",C),...E.actions}}function y(E){const x=_I(C=>{m(()=>TAe({client:C}))});return{...g({liftActionArgs:{id:i,clientSelection:E,movementMode:"FLUID"},cleanup:()=>x.cancel(),actions:{move:x}}),move:x}}function v(){const E={moveUp:()=>m(Npt),moveRight:()=>m(Ppt),moveDown:()=>m(Dpt),moveLeft:()=>m(Opt)};return g({liftActionArgs:{id:i,clientSelection:kgt(l),movementMode:"SNAP"},cleanup:z0,actions:E})}function b(){TD({expected:"PRE_DRAG",phase:f,isLockActive:h,shouldWarn:!0})&&e.release()}return{isActive:()=>TD({expected:"PRE_DRAG",phase:f,isLockActive:h,shouldWarn:!1}),shouldRespectForcePress:d,fluidLift:y,snapLift:v,abort:b}}const jgt=[ygt,wgt,Cgt];function Bgt({contextId:e,store:t,registry:n,customSensors:r,enableDefaultSensors:i}){const s=[...i?jgt:[],...r||[]],o=A.useState(()=>ngt())[0],a=Lt(function(g,y){CI(g)&&!CI(y)&&o.tryAbandon()},[o]);Hl(function(){let g=t.getState();return t.subscribe(()=>{const v=t.getState();a(g,v),g=v})},[o,t,a]),Hl(()=>o.tryAbandon,[o.tryAbandon]);const u=Lt(m=>GAe({lockAPI:o,registry:n,store:t,draggableId:m}),[o,n,t]),l=Lt((m,g,y)=>Fgt({lockAPI:o,registry:n,contextId:e,store:t,draggableId:m,forceSensorStop:g||null,sourceEvent:y&&y.sourceEvent?y.sourceEvent:null}),[e,o,n,t]),c=Lt(m=>$gt(e,m),[e]),f=Lt(m=>{const g=n.draggable.findById(m);return g?g.options:null},[n.draggable]),d=Lt(function(){o.isClaimed()&&(o.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(pQ()))},[o,t]),h=Lt(()=>o.isClaimed(),[o]),p=Zn(()=>({canGetLock:u,tryGetLock:l,findClosestDraggableId:c,findOptionsForDraggable:f,tryReleaseLock:d,isLockClaimed:h}),[u,l,c,f,d,h]);for(let m=0;m<s.length;m++)s[m](p)}const Ugt=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};Pt.version.startsWith("16")||Pt.version.startsWith("17")?n():Xy.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),zgt=e=>({...TI,...e.autoScrollerOptions,durationDampening:{...TI.durationDampening,...e.autoScrollerOptions}});function aC(e){return e.current||ft(),e.current}function Vgt(e){const{contextId:t,setCallbacks:n,sensors:r,nonce:i,dragHandleUsageInstructions:s}=e,o=A.useRef(null),a=UAe(e),u=Lt(()=>Ugt(a.current),[a]),l=Lt(()=>zgt(a.current),[a]),c=Xmt(t),f=tgt({contextId:t,text:s}),d=zmt(t,i),h=Lt(k=>{aC(o).dispatch(k)},[]),p=Zn(()=>rfe({publishWhileDragging:Spt,updateDroppableScroll:Cpt,updateDroppableIsEnabled:Apt,updateDroppableIsCombineEnabled:Ipt,collectionStarting:Tpt},h),[h]),m=Wmt(),g=Zn(()=>bmt(m,p),[m,p]),y=Zn(()=>Mmt({scrollWindow:_mt,scrollDroppable:g.scrollDroppable,getAutoScrollerOptions:l,...rfe({move:TAe},h)}),[g.scrollDroppable,h,l]),v=Hmt(t),b=Zn(()=>mmt({announce:c,autoScroller:y,dimensionMarshal:g,focusMarshal:v,getResponders:u,styleMarshal:d}),[c,y,g,v,u,d]);o.current=b;const w=Lt(()=>{const k=aC(o);k.getState().phase!=="IDLE"&&k.dispatch(pQ())},[]),E=Lt(()=>{const k=aC(o).getState();return k.phase==="DROP_ANIMATING"?!0:k.phase==="IDLE"?!1:k.isDragging},[]),x=Zn(()=>({isDragging:E,tryAbort:w}),[E,w]);n(x);const S=Lt(k=>OAe(aC(o).getState(),k),[]),C=Lt(()=>Qv(aC(o).getState()),[]),I=Zn(()=>({marshal:g,focus:v,contextId:t,canLift:S,isMovementAllowed:C,dragHandleUsageInstructionsId:f,registry:m}),[t,g,f,v,S,C,m]);return Bgt({contextId:t,store:b,registry:m,customSensors:r||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),A.useEffect(()=>w,[w]),Pt.createElement(UF.Provider,{value:I},Pt.createElement(Zdt,{context:wQ,store:b},e.children))}let Hgt=0;function qgt(){return Zn(()=>`${Hgt++}`,[])}function Wgt(){return Pt.useId()}var Ggt="useId"in Pt?Wgt:qgt;function Ygt(e){const t=Ggt(),n=e.dragHandleUsageInstructions||oO.dragHandleUsageInstructions;return Pt.createElement(cht,null,r=>Pt.createElement(Vgt,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const Ofe={dragging:5e3,dropAnimating:4500},Kgt=(e,t)=>t?i2.drop(t.duration):e?i2.snap:i2.fluid,Xgt=(e,t)=>{if(e)return t?SI.opacity.drop:SI.opacity.combining},Qgt=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function Jgt(e){const n=e.dimension.client,{offset:r,combineWith:i,dropping:s}=e,o=!!i,a=Qgt(e),u=!!s,l=u?bV.drop(r,o):bV.moveTo(r);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:Kgt(a,s),transform:l,opacity:Xgt(o,u),zIndex:u?Ofe.dropAnimating:Ofe.dragging,pointerEvents:"none"}}function Zgt(e){return{transform:bV.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function e0t(e){return e.type==="DRAGGING"?Jgt(e):Zgt(e)}function t0t(e,t,n=vo){const r=window.getComputedStyle(t),i=t.getBoundingClientRect(),s=eAe(i,r),o=rM(s,n),a={client:s,tagName:t.tagName.toLowerCase(),display:r.display},u={x:s.marginBox.width,y:s.marginBox.height};return{descriptor:e,placeholder:a,displaceBy:u,client:s,page:o}}function n0t(e){const t=EQ("draggable"),{descriptor:n,registry:r,getDraggableRef:i,canDragInteractiveElements:s,shouldRespectForcePress:o,isEnabled:a}=e,u=Zn(()=>({canDragInteractiveElements:s,shouldRespectForcePress:o,isEnabled:a}),[s,a,o]),l=Lt(h=>{const p=i();return p||ft(),t0t(n,p,h)},[n,i]),c=Zn(()=>({uniqueId:t,descriptor:n,options:u,getDimension:l}),[n,l,u,t]),f=A.useRef(c),d=A.useRef(!0);Hl(()=>(r.draggable.register(f.current),()=>r.draggable.unregister(f.current)),[r.draggable]),Hl(()=>{if(d.current){d.current=!1;return}const h=f.current;f.current=c,r.draggable.update(c,h)},[c,r.draggable])}var SQ=Pt.createContext(null);function uM(e){const t=A.useContext(e);return t||ft(),t}function r0t(e){e.preventDefault()}const i0t=e=>{const t=A.useRef(null),n=Lt((x=null)=>{t.current=x},[]),r=Lt(()=>t.current,[]),{contextId:i,dragHandleUsageInstructionsId:s,registry:o}=uM(UF),{type:a,droppableId:u}=uM(SQ),l=Zn(()=>({id:e.draggableId,index:e.index,type:a,droppableId:u}),[e.draggableId,e.index,a,u]),{children:c,draggableId:f,isEnabled:d,shouldRespectForcePress:h,canDragInteractiveElements:p,isClone:m,mapped:g,dropAnimationFinished:y}=e;if(!m){const x=Zn(()=>({descriptor:l,registry:o,getDraggableRef:r,canDragInteractiveElements:p,shouldRespectForcePress:h,isEnabled:d}),[l,o,r,p,h,d]);n0t(x)}const v=Zn(()=>d?{tabIndex:0,role:"button","aria-describedby":s,"data-rfd-drag-handle-draggable-id":f,"data-rfd-drag-handle-context-id":i,draggable:!1,onDragStart:r0t}:null,[i,s,f,d]),b=Lt(x=>{g.type==="DRAGGING"&&g.dropping&&x.propertyName==="transform"&&(Pt.version.startsWith("16")||Pt.version.startsWith("17")?y():Xy.flushSync(y))},[y,g]),w=Zn(()=>{const x=e0t(g),S=g.type==="DRAGGING"&&g.dropping?b:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":i,"data-rfd-draggable-id":f,style:x,onTransitionEnd:S},dragHandleProps:v}},[i,v,f,g,b,n]),E=Zn(()=>({draggableId:l.id,type:l.type,source:{index:l.index,droppableId:l.droppableId}}),[l.droppableId,l.id,l.index,l.type]);return Pt.createElement(Pt.Fragment,null,c(w,g.snapshot,E))};var s0t=i0t,YAe=(e,t)=>e===t,KAe=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const o0t=e=>e.combine?e.combine.draggableId:null,a0t=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function u0t(){const e=go((i,s)=>({x:i,y:s})),t=go((i,s,o=null,a=null,u=null)=>({isDragging:!0,isClone:s,isDropAnimating:!!u,dropAnimation:u,mode:i,draggingOver:o,combineWith:a,combineTargetFor:null})),n=go((i,s,o,a,u=null,l=null,c=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:u,combineWith:l,mode:s,offset:i,dimension:o,forceShouldAnimate:c,snapshot:t(s,a,u,l,null)}}));return(i,s)=>{if(CI(i)){if(i.critical.draggable.id!==s.draggableId)return null;const o=i.current.client.offset,a=i.dimensions.draggables[s.draggableId],u=Vl(i.impact),l=a0t(i.impact),c=i.forceShouldAnimate;return n(e(o.x,o.y),i.movementMode,a,s.isClone,u,l,c)}if(i.phase==="DROP_ANIMATING"){const o=i.completed;if(o.result.draggableId!==s.draggableId)return null;const a=s.isClone,u=i.dimensions.draggables[s.draggableId],l=o.result,c=l.mode,f=KAe(l),d=o0t(l),p={duration:i.dropDuration,curve:gQ.drop,moveTo:i.newHomeClientOffset,opacity:d?SI.opacity.drop:null,scale:d?SI.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:u,dropping:p,draggingOver:f,combineWith:d,mode:c,forceShouldAnimate:null,snapshot:t(c,a,f,d,p)}}}return null}}function XAe(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const l0t={mapped:{type:"SECONDARY",offset:vo,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:XAe(null)}};function c0t(){const e=go((o,a)=>({x:o,y:a})),t=go(XAe),n=go((o,a=null,u)=>({mapped:{type:"SECONDARY",offset:o,combineTargetFor:a,shouldAnimateDisplacement:u,snapshot:t(a)}})),r=o=>o?n(vo,o,!0):null,i=(o,a,u,l)=>{const c=u.displaced.visible[o],f=!!(l.inVirtualList&&l.effected[o]),d=LF(u),h=d&&d.draggableId===o?a:null;if(!c){if(!f)return r(h);if(u.displaced.invisible[o])return null;const g=BS(l.displacedBy.point),y=e(g.x,g.y);return n(y,h,!0)}if(f)return r(h);const p=u.displacedBy.point,m=e(p.x,p.y);return n(m,h,c.shouldAnimate)};return(o,a)=>{if(CI(o))return o.critical.draggable.id===a.draggableId?null:i(a.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){const u=o.completed;return u.result.draggableId===a.draggableId?null:i(a.draggableId,u.result.draggableId,u.impact,u.afterCritical)}return null}}const f0t=()=>{const e=u0t(),t=c0t();return(r,i)=>e(r,i)||t(r,i)||l0t},d0t={dropAnimationFinished:AAe},h0t=JCe(f0t,d0t,null,{context:wQ,areStatePropsEqual:YAe})(s0t);var p0t=h0t;function QAe(e){return uM(SQ).isUsingCloneFor===e.draggableId&&!e.isClone?null:Pt.createElement(p0t,e)}function m0t(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,r=!!e.shouldRespectForcePress;return Pt.createElement(QAe,U0({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}const JAe=e=>t=>e===t,g0t=JAe("scroll"),y0t=JAe("auto"),$fe=(e,t)=>t(e.overflowX)||t(e.overflowY),v0t=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return $fe(n,g0t)||$fe(n,y0t)},b0t=()=>!1,ZAe=e=>e==null?null:e===document.body?b0t()?e:null:e===document.documentElement?null:v0t(e)?e:ZAe(e.parentElement);var EV=e=>({x:e.scrollLeft,y:e.scrollTop});const e2e=e=>e?window.getComputedStyle(e).position==="fixed"?!0:e2e(e.parentElement):!1;var _0t=e=>{const t=ZAe(e),n=e2e(e);return{closestScrollable:t,isFixedOnPage:n}},w0t=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:r,direction:i,client:s,page:o,closest:a})=>{const u=(()=>{if(!a)return null;const{scrollSize:d,client:h}=a,p=NAe({scrollHeight:d.scrollHeight,scrollWidth:d.scrollWidth,height:h.paddingBox.height,width:h.paddingBox.width});return{pageMarginBox:a.page.marginBox,frameClient:h,scrollSize:d,shouldClipSubject:a.shouldClipSubject,scroll:{initial:a.scroll,current:a.scroll,max:p,diff:{value:vo,displacement:vo}}}})(),l=i==="vertical"?lQ:cAe,c=fx({page:o,withPlaceholder:null,axis:l,frame:u});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:r,axis:l,isEnabled:t,client:s,page:o,frame:u,subject:c}};const E0t=(e,t)=>{const n=tAe(e);if(!t||e!==t)return n;const r=n.paddingBox.top-t.scrollTop,i=n.paddingBox.left-t.scrollLeft,s=r+t.scrollHeight,o=i+t.scrollWidth,u=sQ({top:r,right:o,bottom:s,left:i},n.border);return oQ({borderBox:u,margin:n.margin,border:n.border,padding:n.padding})};var x0t=({ref:e,descriptor:t,env:n,windowScroll:r,direction:i,isDropDisabled:s,isCombineEnabled:o,shouldClipSubject:a})=>{const u=n.closestScrollable,l=E0t(e,u),c=rM(l,r),f=(()=>{if(!u)return null;const h=tAe(u),p={scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth};return{client:h,page:rM(h,r),scroll:EV(u),scrollSize:p,shouldClipSubject:a}})();return w0t({descriptor:t,isEnabled:!s,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:i,client:l,page:c,closest:f})};const S0t={passive:!1},T0t={passive:!0};var Mfe=e=>e.shouldPublishImmediately?S0t:T0t;const CD=e=>e&&e.env.closestScrollable||null;function C0t(e){const t=A.useRef(null),n=uM(UF),r=EQ("droppable"),{registry:i,marshal:s}=n,o=UAe(e),a=Zn(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),u=A.useRef(a),l=Zn(()=>go((w,E)=>{t.current||ft();const x={x:w,y:E};s.updateDroppableScroll(a.id,x)}),[a.id,s]),c=Lt(()=>{const w=t.current;return!w||!w.env.closestScrollable?vo:EV(w.env.closestScrollable)},[]),f=Lt(()=>{const w=c();l(w.x,w.y)},[c,l]),d=Zn(()=>_I(f),[f]),h=Lt(()=>{const w=t.current,E=CD(w);if(w&&E||ft(),w.scrollOptions.shouldPublishImmediately){f();return}d()},[d,f]),p=Lt((w,E)=>{t.current&&ft();const x=o.current,S=x.getDroppableRef();S||ft();const C=_0t(S),I={ref:S,descriptor:a,env:C,scrollOptions:E};t.current=I;const k=x0t({ref:S,descriptor:a,env:C,windowScroll:w,direction:x.direction,isDropDisabled:x.isDropDisabled,isCombineEnabled:x.isCombineEnabled,shouldClipSubject:!x.ignoreContainerClipping}),R=C.closestScrollable;return R&&(R.setAttribute(Rfe.contextId,n.contextId),R.addEventListener("scroll",h,Mfe(I.scrollOptions))),k},[n.contextId,a,h,o]),m=Lt(()=>{const w=t.current,E=CD(w);return w&&E||ft(),EV(E)},[]),g=Lt(()=>{const w=t.current;w||ft();const E=CD(w);t.current=null,E&&(d.cancel(),E.removeAttribute(Rfe.contextId),E.removeEventListener("scroll",h,Mfe(w.scrollOptions)))},[h,d]),y=Lt(w=>{const E=t.current;E||ft();const x=CD(E);x||ft(),x.scrollTop+=w.y,x.scrollLeft+=w.x},[]),v=Zn(()=>({getDimensionAndWatchScroll:p,getScrollWhileDragging:m,dragStopped:g,scroll:y}),[g,p,m,y]),b=Zn(()=>({uniqueId:r,descriptor:a,callbacks:v}),[v,a,r]);Hl(()=>(u.current=b.descriptor,i.droppable.register(b),()=>{t.current&&g(),i.droppable.unregister(b)}),[v,a,g,b,s,i.droppable]),Hl(()=>{t.current&&s.updateDroppableIsEnabled(u.current.id,!e.isDropDisabled)},[e.isDropDisabled,s]),Hl(()=>{t.current&&s.updateDroppableIsCombineEnabled(u.current.id,e.isCombineEnabled)},[e.isCombineEnabled,s])}function q8(){}const Lfe={width:0,height:0,margin:yht},A0t=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?Lfe:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},I0t=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const r=A0t({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?i2.placeholder:null}},k0t=e=>{const t=A.useRef(null),n=Lt(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:r,onTransitionEnd:i,onClose:s,contextId:o}=e,[a,u]=A.useState(e.animate==="open");A.useEffect(()=>a?r!=="open"?(n(),u(!1),q8):t.current?q8:(t.current=setTimeout(()=>{t.current=null,u(!1)}),n):q8,[r,a,n]);const l=Lt(f=>{f.propertyName==="height"&&(i(),r==="close"&&s())},[r,s,i]),c=I0t({isAnimatingOpenOnMount:a,animate:e.animate,placeholder:e.placeholder});return Pt.createElement(e.placeholder.tagName,{style:c,"data-rfd-placeholder-context-id":o,onTransitionEnd:l,ref:e.innerRef})};var R0t=Pt.memo(k0t);class N0t extends Pt.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const D0t=e=>{const t=A.useContext(UF);t||ft();const{contextId:n,isMovementAllowed:r}=t,i=A.useRef(null),s=A.useRef(null),{children:o,droppableId:a,type:u,mode:l,direction:c,ignoreContainerClipping:f,isDropDisabled:d,isCombineEnabled:h,snapshot:p,useClone:m,updateViewportMaxScroll:g,getContainerForClone:y}=e,v=Lt(()=>i.current,[]),b=Lt((R=null)=>{i.current=R},[]);Lt(()=>s.current,[]);const w=Lt((R=null)=>{s.current=R},[]),E=Lt(()=>{r()&&g({maxScroll:PAe()})},[r,g]);C0t({droppableId:a,type:u,mode:l,direction:c,isDropDisabled:d,isCombineEnabled:h,ignoreContainerClipping:f,getDroppableRef:v});const x=Zn(()=>Pt.createElement(N0t,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:R,data:O,animate:P})=>Pt.createElement(R0t,{placeholder:O,onClose:R,innerRef:w,animate:P,contextId:n,onTransitionEnd:E})),[n,E,e.placeholder,e.shouldAnimatePlaceholder,w]),S=Zn(()=>({innerRef:b,placeholder:x,droppableProps:{"data-rfd-droppable-id":a,"data-rfd-droppable-context-id":n}}),[n,a,x,b]),C=m?m.dragging.draggableId:null,I=Zn(()=>({droppableId:a,type:u,isUsingCloneFor:C}),[a,C,u]);function k(){if(!m)return null;const{dragging:R,render:O}=m,P=Pt.createElement(QAe,{draggableId:R.draggableId,index:R.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},($,L)=>O($,L,R));return Ww.createPortal(P,y())}return Pt.createElement(SQ.Provider,{value:I},o(S,p),k())};var P0t=D0t;function O0t(){return document.body||ft(),document.body}const Ffe={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:O0t},t2e=e=>{let t={...e},n;for(n in Ffe)e[n]===void 0&&(t={...t,[n]:Ffe[n]});return t},W8=(e,t)=>e===t.droppable.type,jfe=(e,t)=>t.draggables[e.draggable.id],$0t=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=go(s=>({draggableId:s.id,type:s.type,source:{index:s.index,droppableId:s.droppableId}})),r=go((s,o,a,u,l,c)=>{const f=l.descriptor.id;if(l.descriptor.droppableId===s){const p=c?{render:c,dragging:n(l.descriptor)}:null,m={isDraggingOver:a,draggingOverWith:a?f:null,draggingFromThisWith:f,isUsingPlaceholder:!0};return{placeholder:l.placeholder,shouldAnimatePlaceholder:!1,snapshot:m,useClone:p}}if(!o)return t;if(!u)return e;const h={isDraggingOver:a,draggingOverWith:f,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:l.placeholder,shouldAnimatePlaceholder:!0,snapshot:h,useClone:null}});return(s,o)=>{const a=t2e(o),u=a.droppableId,l=a.type,c=!a.isDropDisabled,f=a.renderClone;if(CI(s)){const d=s.critical;if(!W8(l,d))return t;const h=jfe(d,s.dimensions),p=Vl(s.impact)===u;return r(u,c,p,p,h,f)}if(s.phase==="DROP_ANIMATING"){const d=s.completed;if(!W8(l,d.critical))return t;const h=jfe(d.critical,s.dimensions);return r(u,c,KAe(d.result)===u,Vl(d.impact)===u,h,f)}if(s.phase==="IDLE"&&s.completed&&!s.shouldFlush){const d=s.completed;if(!W8(l,d.critical))return t;const h=Vl(d.impact)===u,p=!!(d.impact.at&&d.impact.at.type==="COMBINE"),m=d.critical.droppable.id===u;return h?p?e:t:m?e:t}return t}},M0t={updateViewportMaxScroll:Rpt},L0t=JCe($0t,M0t,(e,t,n)=>({...t2e(n),...e,...t}),{context:wQ,areStatePropsEqual:YAe})(P0t);var F0t=L0t;const j0t="_item_n4gbg_1",B0t="_itemDragging_n4gbg_16",U0t="_symbol_n4gbg_20",z0t="_rightCard_n4gbg_26",V0t="_rightCardText_n4gbg_40",wl={item:j0t,itemDragging:B0t,symbol:U0t,rightCard:z0t,rightCardText:V0t};function H0t({parameters:e,setAnswer:t}){const{taskid:n,description:r,imageData:i,cards:s}=e,[o,a]=A.useState([]),[u,l]=HHe(s);A.useEffect(()=>{const f=u.map((d,h)=>_.jsx(m0t,{index:h,draggableId:d.label,children:(p,m)=>_.jsx("div",{className:ji(wl.item,{[wl.itemDragging]:m.isDragging}),...p.draggableProps,...p.dragHandleProps,ref:p.innerRef,children:_.jsx(ze,{className:wl.symbol,children:d.label})})},d.label));a(f)},[u]);const c=()=>{const f=JSON.stringify(u,null,2);t({status:!0,answers:{[n]:f}})};return _.jsx(Kc,{children:_.jsxs(me,{style:{minWidth:"fit-content"},children:[_.jsx(ze,{size:"lg",fw:700,style:{marginBottom:"10px"},children:"Trial"}),_.jsx(ze,{style:{marginBottom:"10px",width:"900px"},children:r.text}),_.jsx(ze,{size:"sm",fw:300,style:{marginBottom:"10px",marginTop:"20px"},children:"Note: These images are purely fictional and are not indicitive of a real bushfire event."}),_.jsx(dg,{radius:"md",h:i.height,w:i.width,fit:"contain",src:i.location,style:{marginBottom:"10px"}}),_.jsx(ze,{size:"md",fw:500,style:{marginBottom:"10px",marginTop:"20px"},children:r.taskText}),_.jsx(Kc,{children:_.jsxs(ds,{children:[_.jsx(ds.Col,{span:{base:12,md:6,lg:3},style:{borderRight:"1px dotted LightGray"},children:_.jsx(Ygt,{onDragEnd:({destination:f,source:d})=>l.reorder({from:d.index,to:(f==null?void 0:f.index)||0}),children:_.jsx(F0t,{droppableId:"dnd-list",direction:"vertical",children:f=>_.jsxs("div",{...f.droppableProps,ref:f.innerRef,children:[o,f.placeholder]})})})}),_.jsx(ds.Col,{span:{base:12,md:6,lg:3},children:_.jsxs(Nt,{justify:"space-between",align:"flex-start",direction:"column",wrap:"wrap",children:[_.jsx("div",{className:wl.rightCard,children:_.jsx(ze,{className:wl.rightCardText,style:{width:"400px"},children:"1st - Most in Danger"})}),_.jsx("div",{className:wl.rightCard,children:_.jsx(ze,{className:wl.rightCardText,style:{width:"400px"},children:"2nd"})}),_.jsx("div",{className:wl.rightCard,children:_.jsx(ze,{className:wl.rightCardText,style:{width:"400px"},children:"3rd - Middle Priority"})}),_.jsx("div",{className:wl.rightCard,children:_.jsx(ze,{className:wl.rightCardText,style:{width:"400px"},children:"4th"})}),_.jsx("div",{className:wl.rightCard,children:_.jsx(ze,{className:wl.rightCardText,style:{width:"400px"},children:"5th - Least in Danger"})})]})})]})}),_.jsx(dn,{onClick:()=>c(),children:"Confirm Cards"})]})})}const q0t=Object.freeze(Object.defineProperty({__proto__:null,default:H0t},Symbol.toStringTag,{value:"Module"}));function _m(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function W0t(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function VS(e){let t,n,r;e.length!==2?(t=_m,n=(a,u)=>_m(e(a),u),r=(a,u)=>e(a)-u):(t=e===_m||e===W0t?e:G0t,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function G0t(){return 0}function n2e(e){return e===null?NaN:+e}function*Y0t(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const r2e=VS(_m),hy=r2e.right,K0t=r2e.left;VS(n2e).center;function X0t(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function Q0t(e,t){const n=X0t(e,t);return n&&Math.sqrt(n)}function Bfe(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class nu{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class Ufe extends Map{constructor(t,n=o2e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(xV(this,t))}has(t){return super.has(xV(this,t))}set(t,n){return super.set(i2e(this,t),n)}delete(t){return super.delete(s2e(this,t))}}class lM extends Set{constructor(t,n=o2e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(xV(this,t))}add(t){return super.add(i2e(this,t))}delete(t){return super.delete(s2e(this,t))}}function xV({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function i2e({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function s2e({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function o2e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function J0t(e,t){return Array.from(t,n=>e[n])}function Z0t(e=_m){if(e===_m)return a2e;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function a2e(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const eyt=Math.sqrt(50),tyt=Math.sqrt(10),nyt=Math.sqrt(2);function cM(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=eyt?10:s>=tyt?5:s>=nyt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?cM(e,t,n*2):[a,u,l]}function SV(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?cM(t,e,n):cM(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function TV(e,t,n){return t=+t,e=+e,n=+n,cM(e,t,n)[2]}function py(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?TV(t,e,n):TV(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function H0(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function CV(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function u2e(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?a2e:Z0t(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));u2e(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(uC(e,n,t),i(e[r],s)>0&&uC(e,n,r);o<a;){for(uC(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?uC(e,n,a):(++a,uC(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function uC(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function AV(e,t,n){if(e=Float64Array.from(Y0t(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return CV(e);if(t>=1)return H0(e);var r,i=(r-1)*t,s=Math.floor(i),o=H0(u2e(e,s).subarray(0,s+1)),a=CV(e.subarray(s+1));return o+(a-o)*(i-s)}}function l2e(e,t,n=n2e){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function ryt(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function c2e(e,t){return AV(e,.5,t)}function*iyt(e){for(const t of e)yield*t}function f2e(e){return Array.from(iyt(e))}function Vu(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function d2e(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function syt(e,...t){e=new lM(e),t=t.map(oyt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function oyt(e){return e instanceof lM?e:new lM(e)}function ayt(...e){const t=new lM;for(const n of e)for(const r of n)t.add(r);return t}var uyt={value:()=>{}};function VF(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new aO(n)}function aO(e){this._=e}function lyt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}aO.prototype=VF.prototype={constructor:aO,on:function(e,t){var n=this._,r=lyt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=cyt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=zfe(n[i],e.name,t);else if(t==null)for(i in n)n[i]=zfe(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new aO(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function cyt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function zfe(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=uyt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var IV="http://www.w3.org/1999/xhtml";const Vfe={svg:"http://www.w3.org/2000/svg",xhtml:IV,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function HF(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Vfe.hasOwnProperty(t)?{space:Vfe[t],local:e}:e}function fyt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===IV&&t.documentElement.namespaceURI===IV?t.createElement(e):t.createElementNS(n,e)}}function dyt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function h2e(e){var t=HF(e);return(t.local?dyt:fyt)(t)}function hyt(){}function TQ(e){return e==null?hyt:function(){return this.querySelector(e)}}function pyt(e){typeof e!="function"&&(e=TQ(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new ou(r,this._parents)}function p2e(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function myt(){return[]}function m2e(e){return e==null?myt:function(){return this.querySelectorAll(e)}}function gyt(e){return function(){return p2e(e.apply(this,arguments))}}function yyt(e){typeof e=="function"?e=gyt(e):e=m2e(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new ou(r,i)}function g2e(e){return function(){return this.matches(e)}}function y2e(e){return function(t){return t.matches(e)}}var vyt=Array.prototype.find;function byt(e){return function(){return vyt.call(this.children,e)}}function _yt(){return this.firstElementChild}function wyt(e){return this.select(e==null?_yt:byt(typeof e=="function"?e:y2e(e)))}var Eyt=Array.prototype.filter;function xyt(){return Array.from(this.children)}function Syt(e){return function(){return Eyt.call(this.children,e)}}function Tyt(e){return this.selectAll(e==null?xyt:Syt(typeof e=="function"?e:y2e(e)))}function Cyt(e){typeof e!="function"&&(e=g2e(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new ou(r,this._parents)}function v2e(e){return new Array(e.length)}function Ayt(){return new ou(this._enter||this._groups.map(v2e),this._parents)}function fM(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}fM.prototype={constructor:fM,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Iyt(e){return function(){return e}}function kyt(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new fM(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function Ryt(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new fM(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function Nyt(e){return e.__data__}function Dyt(e,t){if(!arguments.length)return Array.from(this,Nyt);var n=t?Ryt:kyt,r=this._parents,i=this._groups;typeof e!="function"&&(e=Iyt(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=Pyt(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,b=0,w,E;v<p;++v)if(w=m[v]){for(v>=b&&(b=v+1);!(E=g[b])&&++b<p;);w._next=E||null}}return o=new ou(o,r),o._enter=a,o._exit=u,o}function Pyt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Oyt(){return new ou(this._exit||this._groups.map(v2e),this._parents)}function $yt(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Myt(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new ou(a,this._parents)}function Lyt(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Fyt(e){e||(e=jyt);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new ou(i,this._parents).order()}function jyt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Byt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Uyt(){return Array.from(this)}function zyt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Vyt(){let e=0;for(const t of this)++e;return e}function Hyt(){return!this.node()}function qyt(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function Wyt(e){return function(){this.removeAttribute(e)}}function Gyt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Yyt(e,t){return function(){this.setAttribute(e,t)}}function Kyt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Xyt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Qyt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Jyt(e,t){var n=HF(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Gyt:Wyt:typeof t=="function"?n.local?Qyt:Xyt:n.local?Kyt:Yyt)(n,t))}function b2e(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Zyt(e){return function(){this.style.removeProperty(e)}}function evt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function tvt(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function nvt(e,t,n){return arguments.length>1?this.each((t==null?Zyt:typeof t=="function"?tvt:evt)(e,t,n??"")):px(this.node(),e)}function px(e,t){return e.style.getPropertyValue(t)||b2e(e).getComputedStyle(e,null).getPropertyValue(t)}function rvt(e){return function(){delete this[e]}}function ivt(e,t){return function(){this[e]=t}}function svt(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function ovt(e,t){return arguments.length>1?this.each((t==null?rvt:typeof t=="function"?svt:ivt)(e,t)):this.node()[e]}function _2e(e){return e.trim().split(/^|\s+/)}function CQ(e){return e.classList||new w2e(e)}function w2e(e){this._node=e,this._names=_2e(e.getAttribute("class")||"")}w2e.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function E2e(e,t){for(var n=CQ(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function x2e(e,t){for(var n=CQ(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function avt(e){return function(){E2e(this,e)}}function uvt(e){return function(){x2e(this,e)}}function lvt(e,t){return function(){(t.apply(this,arguments)?E2e:x2e)(this,e)}}function cvt(e,t){var n=_2e(e+"");if(arguments.length<2){for(var r=CQ(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?lvt:t?avt:uvt)(n,t))}function fvt(){this.textContent=""}function dvt(e){return function(){this.textContent=e}}function hvt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function pvt(e){return arguments.length?this.each(e==null?fvt:(typeof e=="function"?hvt:dvt)(e)):this.node().textContent}function mvt(){this.innerHTML=""}function gvt(e){return function(){this.innerHTML=e}}function yvt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function vvt(e){return arguments.length?this.each(e==null?mvt:(typeof e=="function"?yvt:gvt)(e)):this.node().innerHTML}function bvt(){this.nextSibling&&this.parentNode.appendChild(this)}function _vt(){return this.each(bvt)}function wvt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Evt(){return this.each(wvt)}function xvt(e){var t=typeof e=="function"?e:h2e(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Svt(){return null}function Tvt(e,t){var n=typeof e=="function"?e:h2e(e),r=t==null?Svt:typeof t=="function"?t:TQ(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Cvt(){var e=this.parentNode;e&&e.removeChild(this)}function Avt(){return this.each(Cvt)}function Ivt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function kvt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Rvt(e){return this.select(e?kvt:Ivt)}function Nvt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Dvt(e){return function(t){e.call(this,t,this.__data__)}}function Pvt(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Ovt(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function $vt(e,t,n){return function(){var r=this.__on,i,s=Dvt(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Mvt(e,t,n){var r=Pvt(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?$vt:Ovt,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function S2e(e,t,n){var r=b2e(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Lvt(e,t){return function(){return S2e(this,e,t)}}function Fvt(e,t){return function(){return S2e(this,e,t.apply(this,arguments))}}function jvt(e,t){return this.each((typeof t=="function"?Fvt:Lvt)(e,t))}function*Bvt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var AQ=[null];function ou(e,t){this._groups=e,this._parents=t}function lR(){return new ou([[document.documentElement]],AQ)}function Uvt(){return this}ou.prototype=lR.prototype={constructor:ou,select:pyt,selectAll:yyt,selectChild:wyt,selectChildren:Tyt,filter:Cyt,data:Dyt,enter:Ayt,exit:Oyt,join:$yt,merge:Myt,selection:Uvt,order:Lyt,sort:Fyt,call:Byt,nodes:Uyt,node:zyt,size:Vyt,empty:Hyt,each:qyt,attr:Jyt,style:nvt,property:ovt,classed:cvt,text:pvt,html:vvt,raise:_vt,lower:Evt,append:xvt,insert:Tvt,remove:Avt,clone:Rvt,datum:Nvt,on:Mvt,dispatch:jvt,[Symbol.iterator]:Bvt};function Ss(e){return typeof e=="string"?new ou([[document.querySelector(e)]],[document.documentElement]):new ou([[e]],AQ)}function zvt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function kV(e,t){if(e=zvt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function Vvt(e){return typeof e=="string"?new ou([document.querySelectorAll(e)],[document.documentElement]):new ou([p2e(e)],AQ)}const RV={capture:!0,passive:!1};function NV(e){e.preventDefault(),e.stopImmediatePropagation()}function Hvt(e){var t=e.document.documentElement,n=Ss(e).on("dragstart.drag",NV,RV);"onselectstart"in t?n.on("selectstart.drag",NV,RV):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function qvt(e,t){var n=e.document.documentElement,r=Ss(e).on("dragstart.drag",null);t&&(r.on("click.drag",NV,RV),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function HS(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function cR(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ov(){}var gb=.7,mx=1/gb,_E="\\s*([+-]?\\d+)\\s*",AI="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Th="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wvt=/^#([0-9a-f]{3,8})$/,Gvt=new RegExp(`^rgb\\(${_E},${_E},${_E}\\)$`),Yvt=new RegExp(`^rgb\\(${Th},${Th},${Th}\\)$`),Kvt=new RegExp(`^rgba\\(${_E},${_E},${_E},${AI}\\)$`),Xvt=new RegExp(`^rgba\\(${Th},${Th},${Th},${AI}\\)$`),Qvt=new RegExp(`^hsl\\(${AI},${Th},${Th}\\)$`),Jvt=new RegExp(`^hsla\\(${AI},${Th},${Th},${AI}\\)$`),Hfe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};HS(ov,yb,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:qfe,formatHex:qfe,formatHex8:Zvt,formatHsl:e1t,formatRgb:Wfe,toString:Wfe});function qfe(){return this.rgb().formatHex()}function Zvt(){return this.rgb().formatHex8()}function e1t(){return T2e(this).formatHsl()}function Wfe(){return this.rgb().formatRgb()}function yb(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Wvt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Gfe(t):n===3?new uo(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?AD(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?AD(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Gvt.exec(e))?new uo(t[1],t[2],t[3],1):(t=Yvt.exec(e))?new uo(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Kvt.exec(e))?AD(t[1],t[2],t[3],t[4]):(t=Xvt.exec(e))?AD(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Qvt.exec(e))?Xfe(t[1],t[2]/100,t[3]/100,1):(t=Jvt.exec(e))?Xfe(t[1],t[2]/100,t[3]/100,t[4]):Hfe.hasOwnProperty(e)?Gfe(Hfe[e]):e==="transparent"?new uo(NaN,NaN,NaN,0):null}function Gfe(e){return new uo(e>>16&255,e>>8&255,e&255,1)}function AD(e,t,n,r){return r<=0&&(e=t=n=NaN),new uo(e,t,n,r)}function IQ(e){return e instanceof ov||(e=yb(e)),e?(e=e.rgb(),new uo(e.r,e.g,e.b,e.opacity)):new uo}function my(e,t,n,r){return arguments.length===1?IQ(e):new uo(e,t,n,r??1)}function uo(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}HS(uo,my,cR(ov,{brighter(e){return e=e==null?mx:Math.pow(mx,e),new uo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?gb:Math.pow(gb,e),new uo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new uo(Y1(this.r),Y1(this.g),Y1(this.b),dM(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yfe,formatHex:Yfe,formatHex8:t1t,formatRgb:Kfe,toString:Kfe}));function Yfe(){return`#${R1(this.r)}${R1(this.g)}${R1(this.b)}`}function t1t(){return`#${R1(this.r)}${R1(this.g)}${R1(this.b)}${R1((isNaN(this.opacity)?1:this.opacity)*255)}`}function Kfe(){const e=dM(this.opacity);return`${e===1?"rgb(":"rgba("}${Y1(this.r)}, ${Y1(this.g)}, ${Y1(this.b)}${e===1?")":`, ${e})`}`}function dM(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Y1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function R1(e){return e=Y1(e),(e<16?"0":"")+e.toString(16)}function Xfe(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new jf(e,t,n,r)}function T2e(e){if(e instanceof jf)return new jf(e.h,e.s,e.l,e.opacity);if(e instanceof ov||(e=yb(e)),!e)return new jf;if(e instanceof jf)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new jf(o,a,u,e.opacity)}function hM(e,t,n,r){return arguments.length===1?T2e(e):new jf(e,t,n,r??1)}function jf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}HS(jf,hM,cR(ov,{brighter(e){return e=e==null?mx:Math.pow(mx,e),new jf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?gb:Math.pow(gb,e),new jf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new uo(G8(e>=240?e-240:e+120,i,r),G8(e,i,r),G8(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new jf(Qfe(this.h),ID(this.s),ID(this.l),dM(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=dM(this.opacity);return`${e===1?"hsl(":"hsla("}${Qfe(this.h)}, ${ID(this.s)*100}%, ${ID(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Qfe(e){return e=(e||0)%360,e<0?e+360:e}function ID(e){return Math.max(0,Math.min(1,e||0))}function G8(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const C2e=Math.PI/180,A2e=180/Math.PI,pM=18,I2e=.96422,k2e=1,R2e=.82521,N2e=4/29,wE=6/29,D2e=3*wE*wE,n1t=wE*wE*wE;function P2e(e){if(e instanceof Ch)return new Ch(e.l,e.a,e.b,e.opacity);if(e instanceof lm)return O2e(e);e instanceof uo||(e=IQ(e));var t=Q8(e.r),n=Q8(e.g),r=Q8(e.b),i=Y8((.2225045*t+.7168786*n+.0606169*r)/k2e),s,o;return t===n&&n===r?s=o=i:(s=Y8((.4360747*t+.3850649*n+.1430804*r)/I2e),o=Y8((.0139322*t+.0971045*n+.7141733*r)/R2e)),new Ch(116*i-16,500*(s-i),200*(i-o),e.opacity)}function mM(e,t,n,r){return arguments.length===1?P2e(e):new Ch(e,t,n,r??1)}function Ch(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}HS(Ch,mM,cR(ov,{brighter(e){return new Ch(this.l+pM*(e??1),this.a,this.b,this.opacity)},darker(e){return new Ch(this.l-pM*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=I2e*K8(t),e=k2e*K8(e),n=R2e*K8(n),new uo(X8(3.1338561*t-1.6168667*e-.4906146*n),X8(-.9787684*t+1.9161415*e+.033454*n),X8(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Y8(e){return e>n1t?Math.pow(e,1/3):e/D2e+N2e}function K8(e){return e>wE?e*e*e:D2e*(e-N2e)}function X8(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Q8(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function r1t(e){if(e instanceof lm)return new lm(e.h,e.c,e.l,e.opacity);if(e instanceof Ch||(e=P2e(e)),e.a===0&&e.b===0)return new lm(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*A2e;return new lm(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function gM(e,t,n,r){return arguments.length===1?r1t(e):new lm(e,t,n,r??1)}function lm(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function O2e(e){if(isNaN(e.h))return new Ch(e.l,0,0,e.opacity);var t=e.h*C2e;return new Ch(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}HS(lm,gM,cR(ov,{brighter(e){return new lm(this.h,this.c,this.l+pM*(e??1),this.opacity)},darker(e){return new lm(this.h,this.c,this.l-pM*(e??1),this.opacity)},rgb(){return O2e(this).rgb()}}));var $2e=-.14861,kQ=1.78277,RQ=-.29227,qF=-.90649,II=1.97294,Jfe=II*qF,Zfe=II*kQ,ede=kQ*RQ-qF*$2e;function i1t(e){if(e instanceof K1)return new K1(e.h,e.s,e.l,e.opacity);e instanceof uo||(e=IQ(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(ede*r+Jfe*t-Zfe*n)/(ede+Jfe-Zfe),s=r-i,o=(II*(n-i)-RQ*s)/qF,a=Math.sqrt(o*o+s*s)/(II*i*(1-i)),u=a?Math.atan2(o,s)*A2e-120:NaN;return new K1(u<0?u+360:u,a,i,e.opacity)}function DV(e,t,n,r){return arguments.length===1?i1t(e):new K1(e,t,n,r??1)}function K1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}HS(K1,DV,cR(ov,{brighter(e){return e=e==null?mx:Math.pow(mx,e),new K1(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?gb:Math.pow(gb,e),new K1(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*C2e,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new uo(255*(t+n*($2e*r+kQ*i)),255*(t+n*(RQ*r+qF*i)),255*(t+n*(II*r)),this.opacity)}}));function M2e(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function L2e(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return M2e((n-r/t)*t,o,i,s,a)}}function F2e(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return M2e((n-r/t)*t,i,s,o,a)}}const WF=e=>()=>e;function j2e(e,t){return function(n){return e+n*t}}function s1t(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function GF(e,t){var n=t-e;return n?j2e(e,n>180||n<-180?n-360*Math.round(n/360):n):WF(isNaN(e)?t:e)}function o1t(e){return(e=+e)==1?lo:function(t,n){return n-t?s1t(t,n,e):WF(isNaN(t)?n:t)}}function lo(e,t){var n=t-e;return n?j2e(e,n):WF(isNaN(e)?t:e)}const kI=function e(t){var n=o1t(t);function r(i,s){var o=n((i=my(i)).r,(s=my(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=lo(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function B2e(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=my(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var a1t=B2e(L2e),u1t=B2e(F2e);function NQ(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function U2e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function l1t(e,t){return(U2e(t)?NQ:z2e)(e,t)}function z2e(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=yg(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function V2e(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Rc(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function H2e(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=yg(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var PV=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,J8=new RegExp(PV.source,"g");function c1t(e){return function(){return e}}function f1t(e){return function(t){return e(t)+""}}function DQ(e,t){var n=PV.lastIndex=J8.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=PV.exec(e))&&(i=J8.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:Rc(r,i)})),n=J8.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?f1t(u[0].x):c1t(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function yg(e,t){var n=typeof t,r;return t==null||n==="boolean"?WF(t):(n==="number"?Rc:n==="string"?(r=yb(t))?(t=r,kI):DQ:t instanceof yb?kI:t instanceof Date?V2e:U2e(t)?NQ:Array.isArray(t)?z2e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?H2e:Rc)(e,t)}function d1t(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function h1t(e,t){var n=GF(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function fR(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var tde=180/Math.PI,OV={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function q2e(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*tde,skewX:Math.atan(u)*tde,scaleX:o,scaleY:a}}var kD;function p1t(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?OV:q2e(t.a,t.b,t.c,t.d,t.e,t.f)}function m1t(e){return e==null||(kD||(kD=document.createElementNS("http://www.w3.org/2000/svg","g")),kD.setAttribute("transform",e),!(e=kD.transform.baseVal.consolidate()))?OV:(e=e.matrix,q2e(e.a,e.b,e.c,e.d,e.e,e.f))}function W2e(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:Rc(l,f)},{i:m-2,x:Rc(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Rc(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Rc(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:Rc(l,f)},{i:m-2,x:Rc(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var G2e=W2e(p1t,"px, ","px)","deg)"),Y2e=W2e(m1t,", ",")",")"),g1t=1e-12;function nde(e){return((e=Math.exp(e))+1/e)/2}function y1t(e){return((e=Math.exp(e))-1/e)/2}function v1t(e){return((e=Math.exp(2*e))-1)/(e+1)}const b1t=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<g1t)y=Math.log(d/l)/t,g=function(S){return[a+S*h,u+S*p,l*Math.exp(t*S*y)]};else{var v=Math.sqrt(m),b=(d*d-l*l+r*m)/(2*l*n*v),w=(d*d-l*l-r*m)/(2*d*n*v),E=Math.log(Math.sqrt(b*b+1)-b),x=Math.log(Math.sqrt(w*w+1)-w);y=(x-E)/t,g=function(S){var C=S*y,I=nde(E),k=l/(n*v)*(I*v1t(t*C+E)-y1t(E));return[a+k*h,u+k*p,l*I/nde(t*C+E)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function K2e(e){return function(t,n){var r=e((t=hM(t)).h,(n=hM(n)).h),i=lo(t.s,n.s),s=lo(t.l,n.l),o=lo(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const _1t=K2e(GF);var w1t=K2e(lo);function E1t(e,t){var n=lo((e=mM(e)).l,(t=mM(t)).l),r=lo(e.a,t.a),i=lo(e.b,t.b),s=lo(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function X2e(e){return function(t,n){var r=e((t=gM(t)).h,(n=gM(n)).h),i=lo(t.c,n.c),s=lo(t.l,n.l),o=lo(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const x1t=X2e(GF);var S1t=X2e(lo);function Q2e(e){return function t(n){n=+n;function r(i,s){var o=e((i=DV(i)).h,(s=DV(s)).h),a=lo(i.s,s.s),u=lo(i.l,s.l),l=lo(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const T1t=Q2e(GF);var C1t=Q2e(lo);function PQ(e,t){t===void 0&&(t=e,e=yg);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function A1t(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const I1t=Object.freeze(Object.defineProperty({__proto__:null,interpolate:yg,interpolateArray:l1t,interpolateBasis:L2e,interpolateBasisClosed:F2e,interpolateCubehelix:T1t,interpolateCubehelixLong:C1t,interpolateDate:V2e,interpolateDiscrete:d1t,interpolateHcl:x1t,interpolateHclLong:S1t,interpolateHsl:_1t,interpolateHslLong:w1t,interpolateHue:h1t,interpolateLab:E1t,interpolateNumber:Rc,interpolateNumberArray:NQ,interpolateObject:H2e,interpolateRgb:kI,interpolateRgbBasis:a1t,interpolateRgbBasisClosed:u1t,interpolateRound:fR,interpolateString:DQ,interpolateTransformCss:G2e,interpolateTransformSvg:Y2e,interpolateZoom:b1t,piecewise:PQ,quantize:A1t},Symbol.toStringTag,{value:"Module"}));var gx=0,eA=0,lC=0,J2e=1e3,yM,tA,vM=0,vb=0,YF=0,RI=typeof performance=="object"&&performance.now?performance:Date,Z2e=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function KF(){return vb||(Z2e(k1t),vb=RI.now()+YF)}function k1t(){vb=0}function NI(){this._call=this._time=this._next=null}NI.prototype=OQ.prototype={constructor:NI,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?KF():+n)+(t==null?0:+t),!this._next&&tA!==this&&(tA?tA._next=this:yM=this,tA=this),this._call=e,this._time=n,$V()},stop:function(){this._call&&(this._call=null,this._time=1/0,$V())}};function OQ(e,t,n){var r=new NI;return r.restart(e,t,n),r}function R1t(){KF(),++gx;for(var e=yM,t;e;)(t=vb-e._time)>=0&&e._call.call(void 0,t),e=e._next;--gx}function rde(){vb=(vM=RI.now())+YF,gx=eA=0;try{R1t()}finally{gx=0,D1t(),vb=0}}function N1t(){var e=RI.now(),t=e-vM;t>J2e&&(YF-=t,vM=e)}function D1t(){for(var e,t=yM,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:yM=n);tA=e,$V(r)}function $V(e){if(!gx){eA&&(eA=clearTimeout(eA));var t=e-vb;t>24?(e<1/0&&(eA=setTimeout(rde,e-RI.now()-YF)),lC&&(lC=clearInterval(lC))):(lC||(vM=RI.now(),lC=setInterval(N1t,J2e)),gx=1,Z2e(rde))}}function ide(e,t,n){var r=new NI;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function P1t(e,t,n){var r=new NI,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?KF():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var O1t=VF("start","end","cancel","interrupt"),$1t=[],eIe=0,sde=1,MV=2,uO=3,ode=4,LV=5,lO=6;function XF(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;M1t(e,n,{name:t,index:r,group:i,on:O1t,tween:$1t,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:eIe})}function $Q(e,t){var n=wd(e,t);if(n.state>eIe)throw new Error("too late; already scheduled");return n}function hp(e,t){var n=wd(e,t);if(n.state>uO)throw new Error("too late; already running");return n}function wd(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function M1t(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=OQ(s,0,n.time);function s(l){n.state=sde,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==sde)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===uO)return ide(o);h.state===ode?(h.state=lO,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=lO,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(ide(function(){n.state===uO&&(n.state=ode,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=MV,n.on.call("start",e,e.__data__,n.index,n.group),n.state===MV){for(n.state=uO,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=LV,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===LV&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=lO,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function FV(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>MV&&r.state<LV,r.state=lO,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function L1t(e){return this.each(function(){FV(this,e)})}function F1t(e,t){var n,r;return function(){var i=hp(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function j1t(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=hp(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function B1t(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=wd(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?F1t:j1t)(n,e,t))}function MQ(e,t,n){var r=e._id;return e.each(function(){var i=hp(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return wd(i,r).value[t]}}function tIe(e,t){var n;return(typeof t=="number"?Rc:t instanceof yb?kI:(n=yb(t))?(t=n,kI):DQ)(e,t)}function U1t(e){return function(){this.removeAttribute(e)}}function z1t(e){return function(){this.removeAttributeNS(e.space,e.local)}}function V1t(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function H1t(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function q1t(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function W1t(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function G1t(e,t){var n=HF(e),r=n==="transform"?Y2e:tIe;return this.attrTween(e,typeof t=="function"?(n.local?W1t:q1t)(n,r,MQ(this,"attr."+e,t)):t==null?(n.local?z1t:U1t)(n):(n.local?H1t:V1t)(n,r,t))}function Y1t(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function K1t(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function X1t(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&K1t(e,s)),n}return i._value=t,i}function Q1t(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Y1t(e,s)),n}return i._value=t,i}function J1t(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=HF(e);return this.tween(n,(r.local?X1t:Q1t)(r,t))}function Z1t(e,t){return function(){$Q(this,e).delay=+t.apply(this,arguments)}}function ebt(e,t){return t=+t,function(){$Q(this,e).delay=t}}function tbt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Z1t:ebt)(t,e)):wd(this.node(),t).delay}function nbt(e,t){return function(){hp(this,e).duration=+t.apply(this,arguments)}}function rbt(e,t){return t=+t,function(){hp(this,e).duration=t}}function ibt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?nbt:rbt)(t,e)):wd(this.node(),t).duration}function sbt(e,t){if(typeof t!="function")throw new Error;return function(){hp(this,e).ease=t}}function obt(e){var t=this._id;return arguments.length?this.each(sbt(t,e)):wd(this.node(),t).ease}function abt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;hp(this,e).ease=n}}function ubt(e){if(typeof e!="function")throw new Error;return this.each(abt(this._id,e))}function lbt(e){typeof e!="function"&&(e=g2e(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Um(r,this._parents,this._name,this._id)}function cbt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new Um(o,this._parents,this._name,this._id)}function fbt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function dbt(e,t,n){var r,i,s=fbt(t)?$Q:hp;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function hbt(e,t){var n=this._id;return arguments.length<2?wd(this.node(),n).on.on(e):this.each(dbt(n,e,t))}function pbt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function mbt(){return this.on("end.remove",pbt(this._id))}function gbt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=TQ(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,XF(l[d],t,n,d,l,wd(c,n)));return new Um(s,this._parents,t,n)}function ybt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=m2e(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=wd(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&XF(h,t,n,m,d,p);s.push(d),o.push(c)}return new Um(s,o,t,n)}var vbt=lR.prototype.constructor;function bbt(){return new vbt(this._groups,this._parents)}function _bt(e,t){var n,r,i;return function(){var s=px(this,e),o=(this.style.removeProperty(e),px(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function nIe(e){return function(){this.style.removeProperty(e)}}function wbt(e,t,n){var r,i=n+"",s;return function(){var o=px(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Ebt(e,t,n){var r,i,s;return function(){var o=px(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),px(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function xbt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=hp(this,e),l=u.on,c=u.value[s]==null?a||(a=nIe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function Sbt(e,t,n){var r=(e+="")=="transform"?G2e:tIe;return t==null?this.styleTween(e,_bt(e,r)).on("end.style."+e,nIe(e)):typeof t=="function"?this.styleTween(e,Ebt(e,r,MQ(this,"style."+e,t))).each(xbt(this._id,e)):this.styleTween(e,wbt(e,r,t),n).on("end.style."+e,null)}function Tbt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Cbt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Tbt(e,o,n)),r}return s._value=t,s}function Abt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Cbt(e,t,n??""))}function Ibt(e){return function(){this.textContent=e}}function kbt(e){return function(){var t=e(this);this.textContent=t??""}}function Rbt(e){return this.tween("text",typeof e=="function"?kbt(MQ(this,"text",e)):Ibt(e==null?"":e+""))}function Nbt(e){return function(t){this.textContent=e.call(this,t)}}function Dbt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Nbt(i)),t}return r._value=e,r}function Pbt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Dbt(e))}function Obt(){for(var e=this._name,t=this._id,n=rIe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=wd(u,t);XF(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Um(r,this._parents,e,n)}function $bt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=hp(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var Mbt=0;function Um(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function rIe(){return++Mbt}var $p=lR.prototype;Um.prototype={constructor:Um,select:gbt,selectAll:ybt,selectChild:$p.selectChild,selectChildren:$p.selectChildren,filter:lbt,merge:cbt,selection:bbt,transition:Obt,call:$p.call,nodes:$p.nodes,node:$p.node,size:$p.size,empty:$p.empty,each:$p.each,on:hbt,attr:G1t,attrTween:J1t,style:Sbt,styleTween:Abt,text:Rbt,textTween:Pbt,remove:mbt,tween:B1t,delay:tbt,duration:ibt,ease:obt,easeVarying:ubt,end:$bt,[Symbol.iterator]:$p[Symbol.iterator]};const Lbt=e=>+e;function Fbt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var jbt={time:null,delay:0,duration:250,ease:Fbt};function Bbt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Ubt(e){var t,n;e instanceof Um?(t=e._id,e=e._name):(t=rIe(),(n=jbt).time=KF(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&XF(u,e,t,l,o,n||Bbt(u,t));return new Um(r,this._parents,e,t)}lR.prototype.interrupt=L1t;lR.prototype.transition=Ubt;const Z8=e=>()=>e;function zbt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function Vbt(e){e.stopImmediatePropagation()}function e9(e){e.preventDefault(),e.stopImmediatePropagation()}var ade={name:"drag"},t9={name:"space"},Z_={name:"handle"},ew={name:"center"};const{abs:ude,max:oa,min:aa}=Math;function lde(e){return[+e[0],+e[1]]}function jV(e){return[lde(e[0]),lde(e[1])]}var cO={name:"x",handles:["w","e"].map(DI),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},fO={name:"y",handles:["n","s"].map(DI),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Hbt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(DI),input:function(e){return e==null?null:jV(e)},output:function(e){return e}},Mp={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},cde={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},fde={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},qbt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Wbt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function DI(e){return{type:e}}function Gbt(e){return!e.ctrlKey&&!e.button}function Ybt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Kbt(){return navigator.maxTouchPoints||"ontouchstart"in this}function n9(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Xbt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function Qbt(){return LQ(cO)}function Jbt(){return LQ(fO)}function Zbt(){return LQ(Hbt)}function LQ(e){var t=Ybt,n=Gbt,r=Kbt,i=!0,s=VF("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([DI("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Mp.overlay).merge(y).each(function(){var b=n9(this).extent;Ss(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),g.selectAll(".selection").data([DI("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Mp.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(b){return b.type});v.exit().remove(),v.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return Mp[b.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(b){c(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){c(this,arguments).end(b)}).tween("brush",function(){var b=this,w=b.__brush,E=c(b,arguments),x=w.selection,S=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),C=yg(x,S);function I(k){w.selection=k===1&&S===null?null:C(k),l.call(b),E.brush()}return x!==null&&S!==null?I:I(1)}):g.each(function(){var b=this,w=arguments,E=b.__brush,x=e.input(typeof y=="function"?y.apply(b,w):y,E.extent),S=c(b,w).beforestart();FV(b),E.selection=x===null?null:x,l.call(b),S.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=Ss(this),y=n9(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var b=g.__brush.emitter;return b&&(!v||!b.clean)?b:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var b=Ss(this.that).datum();s.call(g,this.that,new zbt(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),b)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,b=(i&&g.metaKey?v="overlay":v)==="selection"?ade:i&&g.altKey?ew:Z_,w=e===fO?null:qbt[v],E=e===cO?null:Wbt[v],x=n9(y),S=x.extent,C=x.selection,I=S[0][0],k,R,O=S[0][1],P,$,L=S[1][0],M,B,U=S[1][1],V,D,z=0,W=0,j,q=w&&E&&i&&g.shiftKey,G,te,le=Array.from(g.touches||[g],_e=>{const ke=_e.identifier;return _e=kV(_e,y),_e.point0=_e.slice(),_e.identifier=ke,_e});FV(y);var fe=c(y,arguments,!0).beforestart();if(v==="overlay"){C&&(j=!0);const _e=[le[0],le[1]||le[0]];x.selection=C=[[k=e===fO?I:aa(_e[0][0],_e[1][0]),P=e===cO?O:aa(_e[0][1],_e[1][1])],[M=e===fO?L:oa(_e[0][0],_e[1][0]),V=e===cO?U:oa(_e[0][1],_e[1][1])]],le.length>1&&qe(g)}else k=C[0][0],P=C[0][1],M=C[1][0],V=C[1][1];R=k,$=P,B=M,D=V;var de=Ss(y).attr("pointer-events","none"),ye=de.selectAll(".overlay").attr("cursor",Mp[v]);if(g.touches)fe.moved=pe,fe.ended=Ue;else{var Ie=Ss(g.view).on("mousemove.brush",pe,!0).on("mouseup.brush",Ue,!0);i&&Ie.on("keydown.brush",vt,!0).on("keyup.brush",it,!0),Hvt(g.view)}l.call(y),fe.start(g,b.name);function pe(_e){for(const ke of _e.changedTouches||[_e])for(const Ve of le)Ve.identifier===ke.identifier&&(Ve.cur=kV(ke,y));if(q&&!G&&!te&&le.length===1){const ke=le[0];ude(ke.cur[0]-ke[0])>ude(ke.cur[1]-ke[1])?te=!0:G=!0}for(const ke of le)ke.cur&&(ke[0]=ke.cur[0],ke[1]=ke.cur[1]);j=!0,e9(_e),qe(_e)}function qe(_e){const ke=le[0],Ve=ke.point0;var ct;switch(z=ke[0]-Ve[0],W=ke[1]-Ve[1],b){case t9:case ade:{w&&(z=oa(I-k,aa(L-M,z)),R=k+z,B=M+z),E&&(W=oa(O-P,aa(U-V,W)),$=P+W,D=V+W);break}case Z_:{le[1]?(w&&(R=oa(I,aa(L,le[0][0])),B=oa(I,aa(L,le[1][0])),w=1),E&&($=oa(O,aa(U,le[0][1])),D=oa(O,aa(U,le[1][1])),E=1)):(w<0?(z=oa(I-k,aa(L-k,z)),R=k+z,B=M):w>0&&(z=oa(I-M,aa(L-M,z)),R=k,B=M+z),E<0?(W=oa(O-P,aa(U-P,W)),$=P+W,D=V):E>0&&(W=oa(O-V,aa(U-V,W)),$=P,D=V+W));break}case ew:{w&&(R=oa(I,aa(L,k-z*w)),B=oa(I,aa(L,M+z*w))),E&&($=oa(O,aa(U,P-W*E)),D=oa(O,aa(U,V+W*E)));break}}B<R&&(w*=-1,ct=k,k=M,M=ct,ct=R,R=B,B=ct,v in cde&&ye.attr("cursor",Mp[v=cde[v]])),D<$&&(E*=-1,ct=P,P=V,V=ct,ct=$,$=D,D=ct,v in fde&&ye.attr("cursor",Mp[v=fde[v]])),x.selection&&(C=x.selection),G&&(R=C[0][0],B=C[1][0]),te&&($=C[0][1],D=C[1][1]),(C[0][0]!==R||C[0][1]!==$||C[1][0]!==B||C[1][1]!==D)&&(x.selection=[[R,$],[B,D]],l.call(y),fe.brush(_e,b.name))}function Ue(_e){if(Vbt(_e),_e.touches){if(_e.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else qvt(_e.view,j),Ie.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);de.attr("pointer-events","all"),ye.attr("cursor",Mp.overlay),x.selection&&(C=x.selection),Xbt(C)&&(x.selection=null,l.call(y)),fe.end(_e,b.name)}function vt(_e){switch(_e.keyCode){case 16:{q=w&&E;break}case 18:{b===Z_&&(w&&(M=B-z*w,k=R+z*w),E&&(V=D-W*E,P=$+W*E),b=ew,qe(_e));break}case 32:{(b===Z_||b===ew)&&(w<0?M=B-z:w>0&&(k=R-z),E<0?V=D-W:E>0&&(P=$-W),b=t9,ye.attr("cursor",Mp.selection),qe(_e));break}default:return}e9(_e)}function it(_e){switch(_e.keyCode){case 16:{q&&(G=te=q=!1,qe(_e));break}case 18:{b===ew&&(w<0?M=B:w>0&&(k=R),E<0?V=D:E>0&&(P=$),b=Z_,qe(_e));break}case 32:{b===t9&&(_e.altKey?(w&&(M=B-z*w,k=R+z*w),E&&(V=D-W*E,P=$+W*E),b=ew):(w<0?M=B:w>0&&(k=R),E<0?V=D:E>0&&(P=$),b=Z_),ye.attr("cursor",Mp[v]),qe(_e));break}default:return}e9(_e)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=jV(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:Z8(jV(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:Z8(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:Z8(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const BV=Math.PI,UV=2*BV,Jv=1e-6,e_t=UV-Jv;function iIe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function t_t(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return iIe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let FQ=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?iIe:t_t(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Jv)if(!(Math.abs(f*u-l*c)>Jv)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),b=s*Math.tan((BV-Math.acos((m+d-g)/(2*y*v)))/2),w=b/v,E=b/y;Math.abs(w-1)>Jv&&this._append`L${t+w*c},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+E*u},${this._y1=n+E*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Jv||Math.abs(this._y1-c)>Jv)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%UV+UV),d>e_t?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>Jv&&this._append`A${r},${r},0,${+(d>=BV)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function QF(){return new FQ}QF.prototype=FQ.prototype;const wm=11102230246251565e-32,ua=134217729,n_t=(3+8*wm)*wm;function r9(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function r_t(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function dR(e){return new Float64Array(e)}const i_t=(3+16*wm)*wm,s_t=(2+12*wm)*wm,o_t=(9+64*wm)*wm*wm,tw=dR(4),dde=dR(8),hde=dR(12),pde=dR(16),Ua=dR(4);function a_t(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,b,w,E,x,S,C;const I=e-i,k=n-i,R=t-s,O=r-s;w=I*O,d=ua*I,h=d-(d-I),p=I-h,d=ua*O,m=d-(d-O),g=O-m,E=p*g-(w-h*m-p*m-h*g),x=R*k,d=ua*R,h=d-(d-R),p=R-h,d=ua*k,m=d-(d-k),g=k-m,S=p*g-(x-h*m-p*m-h*g),y=E-S,f=E-y,tw[0]=E-(y+f)+(f-S),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-x,f=b-y,tw[1]=b-(y+f)+(f-x),C=v+y,f=C-v,tw[2]=v-(C-f)+(y-f),tw[3]=C;let P=r_t(4,tw),$=s_t*o;if(P>=$||-P>=$||(f=e-I,a=e-(I+f)+(f-i),f=n-k,l=n-(k+f)+(f-i),f=t-R,u=t-(R+f)+(f-s),f=r-O,c=r-(O+f)+(f-s),a===0&&u===0&&l===0&&c===0)||($=o_t*o+n_t*Math.abs(P),P+=I*c+O*a-(R*l+k*u),P>=$||-P>=$))return P;w=a*O,d=ua*a,h=d-(d-a),p=a-h,d=ua*O,m=d-(d-O),g=O-m,E=p*g-(w-h*m-p*m-h*g),x=u*k,d=ua*u,h=d-(d-u),p=u-h,d=ua*k,m=d-(d-k),g=k-m,S=p*g-(x-h*m-p*m-h*g),y=E-S,f=E-y,Ua[0]=E-(y+f)+(f-S),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-x,f=b-y,Ua[1]=b-(y+f)+(f-x),C=v+y,f=C-v,Ua[2]=v-(C-f)+(y-f),Ua[3]=C;const L=r9(4,tw,4,Ua,dde);w=I*c,d=ua*I,h=d-(d-I),p=I-h,d=ua*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),x=R*l,d=ua*R,h=d-(d-R),p=R-h,d=ua*l,m=d-(d-l),g=l-m,S=p*g-(x-h*m-p*m-h*g),y=E-S,f=E-y,Ua[0]=E-(y+f)+(f-S),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-x,f=b-y,Ua[1]=b-(y+f)+(f-x),C=v+y,f=C-v,Ua[2]=v-(C-f)+(y-f),Ua[3]=C;const M=r9(L,dde,4,Ua,hde);w=a*c,d=ua*a,h=d-(d-a),p=a-h,d=ua*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),x=u*l,d=ua*u,h=d-(d-u),p=u-h,d=ua*l,m=d-(d-l),g=l-m,S=p*g-(x-h*m-p*m-h*g),y=E-S,f=E-y,Ua[0]=E-(y+f)+(f-S),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-x,f=b-y,Ua[1]=b-(y+f)+(f-x),C=v+y,f=C-v,Ua[2]=v-(C-f)+(y-f),Ua[3]=C;const B=r9(M,hde,4,Ua,pde);return pde[B-1]}function RD(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=i_t*l?u:-a_t(e,t,n,r,i,s,l)}const mde=Math.pow(2,-52),ND=new Uint32Array(512);class bM{static from(t,n=d_t,r=h_t){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new bM(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let I=0;I<o;I++){const k=t[2*I],R=t[2*I+1];k<a&&(a=k),R<u&&(u=R),k>l&&(l=k),R>c&&(c=R),this._ids[I]=I}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let I=0,k=1/0;I<o;I++){const R=i9(f,d,t[2*I],t[2*I+1]);R<k&&(h=I,k=R)}const g=t[2*h],y=t[2*h+1];for(let I=0,k=1/0;I<o;I++){if(I===h)continue;const R=i9(g,y,t[2*I],t[2*I+1]);R<k&&R>0&&(p=I,k=R)}let v=t[2*p],b=t[2*p+1],w=1/0;for(let I=0;I<o;I++){if(I===h||I===p)continue;const k=c_t(g,y,v,b,t[2*I],t[2*I+1]);k<w&&(m=I,w=k)}let E=t[2*m],x=t[2*m+1];if(w===1/0){for(let R=0;R<o;R++)this._dists[R]=t[2*R]-t[0]||t[2*R+1]-t[1];Kw(this._ids,this._dists,0,o-1);const I=new Uint32Array(o);let k=0;for(let R=0,O=-1/0;R<o;R++){const P=this._ids[R],$=this._dists[P];$>O&&(I[k++]=P,O=$)}this.hull=I.subarray(0,k),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(RD(g,y,v,b,E,x)<0){const I=p,k=v,R=b;p=m,v=E,b=x,m=I,E=k,x=R}const S=f_t(g,y,v,b,E,x);this._cx=S.x,this._cy=S.y;for(let I=0;I<o;I++)this._dists[I]=i9(t[2*I],t[2*I+1],S.x,S.y);Kw(this._ids,this._dists,0,o-1),this._hullStart=h;let C=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,b)]=p,s[this._hashKey(E,x)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let I=0,k,R;I<this._ids.length;I++){const O=this._ids[I],P=t[2*O],$=t[2*O+1];if(I>0&&Math.abs(P-k)<=mde&&Math.abs($-R)<=mde||(k=P,R=$,O===h||O===p||O===m))continue;let L=0;for(let D=0,z=this._hashKey(P,$);D<this._hashSize&&(L=s[(z+D)%this._hashSize],!(L!==-1&&L!==r[L]));D++);L=n[L];let M=L,B;for(;B=r[M],RD(P,$,t[2*M],t[2*M+1],t[2*B],t[2*B+1])>=0;)if(M=B,M===L){M=-1;break}if(M===-1)continue;let U=this._addTriangle(M,O,r[M],-1,-1,i[M]);i[O]=this._legalize(U+2),i[M]=U,C++;let V=r[M];for(;B=r[V],RD(P,$,t[2*V],t[2*V+1],t[2*B],t[2*B+1])<0;)U=this._addTriangle(V,O,B,i[O],-1,i[V]),i[O]=this._legalize(U+2),r[V]=V,C--,V=B;if(M===L)for(;B=n[M],RD(P,$,t[2*B],t[2*B+1],t[2*M],t[2*M+1])<0;)U=this._addTriangle(B,O,M,-1,i[M],i[B]),this._legalize(U+2),i[B]=U,r[M]=M,C--,M=B;this._hullStart=n[O]=M,r[M]=n[V]=O,r[O]=V,s[this._hashKey(P,$)]=O,s[this._hashKey(t[2*M],t[2*M+1])]=M}this.hull=new Uint32Array(C);for(let I=0,k=this._hullStart;I<C;I++)this.hull[I]=k,k=r[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(u_t(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=ND[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(l_t(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<ND.length&&(ND[s++]=v)}else{if(s===0)break;t=ND[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function u_t(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function i9(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function l_t(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function c_t(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function f_t(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function Kw(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;cC(e,i,s),t[e[n]]>t[e[r]]&&cC(e,n,r),t[e[s]]>t[e[r]]&&cC(e,s,r),t[e[n]]>t[e[s]]&&cC(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;cC(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(Kw(e,t,s,r),Kw(e,t,n,o-1)):(Kw(e,t,n,o-1),Kw(e,t,s,r))}}function cC(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function d_t(e){return e[0]}function h_t(e){return e[1]}const gde=1e-6;class N1{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>gde||Math.abs(this._y1-s)>gde)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class zV{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let p_t=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,b;m<y;m+=3,g+=2){const w=r[m]*2,E=r[m+1]*2,x=r[m+2]*2,S=t[w],C=t[w+1],I=t[E],k=t[E+1],R=t[x],O=t[x+1],P=I-S,$=k-C,L=R-S,M=O-C,B=(P*M-$*L)*2;if(Math.abs(B)<1e-9){if(s===void 0){s=o=0;for(const V of n)s+=t[V*2],o+=t[V*2+1];s/=n.length,o/=n.length}const U=1e9*Math.sign((s-S)*M-(o-C)*L);v=(S+R)/2-U*M,b=(C+O)/2+U*L}else{const U=1/B,V=P*P+$*$,D=L*L+M*M;v=S+(M*V-$*D)*U,b=C+(P*D-L*V)*U}a[g]=v,a[g+1]=b}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new N1:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new N1:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new N1:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new zV;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const m_t=2*Math.PI,nw=Math.pow;function g_t(e){return e[0]}function y_t(e){return e[1]}function v_t(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function b_t(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class jQ{static from(t,n=g_t,r=y_t,i){return new jQ("length"in t?__t(t,n,r,i):Float64Array.from(w_t(t,n,r,i)))}constructor(t){this._delaunator=new bM(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&v_t(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=b_t(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new bM(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new p_t(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=nw(n-l[t*2],2)+nw(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=nw(n-l[p*2],2)+nw(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&nw(n-l[h*2],2)+nw(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new N1:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new N1:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,m_t)}return r&&r.value()}renderHull(t){const n=t==null?t=new N1:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new zV;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new N1:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new zV;return this.renderTriangle(t,n),n.value()}}function __t(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*w_t(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var yde={},s9={},o9=34,fC=10,a9=13;function sIe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function E_t(e,t){var n=sIe(e);return function(r,i){return t(n(r),i,e)}}function vde(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Cu(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function x_t(e){return e<0?"-"+Cu(-e,6):e>9999?"+"+Cu(e,6):Cu(e,4)}function S_t(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":x_t(e.getUTCFullYear())+"-"+Cu(e.getUTCMonth()+1,2)+"-"+Cu(e.getUTCDate(),2)+(i?"T"+Cu(t,2)+":"+Cu(n,2)+":"+Cu(r,2)+"."+Cu(i,3)+"Z":r?"T"+Cu(t,2)+":"+Cu(n,2)+":"+Cu(r,2)+"Z":n||t?"T"+Cu(t,2)+":"+Cu(n,2)+"Z":"")}function oIe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?E_t(g,d):sIe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===fC&&--p,f.charCodeAt(p-1)===a9&&--p;function w(){if(v)return s9;if(b)return b=!1,yde;var x,S=m,C;if(f.charCodeAt(S)===o9){for(;m++<p&&f.charCodeAt(m)!==o9||f.charCodeAt(++m)===o9;);return(x=m)>=p?v=!0:(C=f.charCodeAt(m++))===fC?b=!0:C===a9&&(b=!0,f.charCodeAt(m)===fC&&++m),f.slice(S+1,x-1).replace(/""/g,'"')}for(;m<p;){if((C=f.charCodeAt(x=m++))===fC)b=!0;else if(C===a9)b=!0,f.charCodeAt(m)===fC&&++m;else if(C!==n)continue;return f.slice(S,x)}return v=!0,f.slice(S,p)}for(;(y=w())!==s9;){for(var E=[];y!==yde&&y!==s9;)E.push(y),y=w();d&&(E=d(E,g++))==null||h.push(E)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=vde(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=vde(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?S_t(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var T_t=oIe(","),C_t=T_t.parse;function A_t(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function I_t(e,t){return fetch(e,t).then(A_t)}function k_t(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),I_t(t,n).then(function(i){return e(i,r)})}}var R_t=k_t(C_t);function N_t(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function D_t(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return aIe(this.cover(t,n),t,n,e)}function aIe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function P_t(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)aIe(this,o[n],a[n],e[n]);return this}function O_t(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function $_t(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function M_t(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Qa(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function L_t(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new Qa(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new Qa(h[3],g,y,u,l),new Qa(h[2],o,y,g,l),new Qa(h[1],g,a,u,y),new Qa(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),w=v*v+b*b;if(w<n){var E=Math.sqrt(n=w);i=e-E,s=t-E,c=e+E,f=t+E,r=h.data}}return r}function F_t(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function j_t(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function B_t(){return this._root}function U_t(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function z_t(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new Qa(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new Qa(i,l,c,a,u)),(i=r[2])&&t.push(new Qa(i,s,c,l,u)),(i=r[1])&&t.push(new Qa(i,l,o,a,c)),(i=r[0])&&t.push(new Qa(i,s,o,l,c))}return this}function V_t(e){var t=[],n=[],r;for(this._root&&t.push(new Qa(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new Qa(s,o,a,c,f)),(s=i[1])&&t.push(new Qa(s,c,a,u,f)),(s=i[2])&&t.push(new Qa(s,o,f,c,l)),(s=i[3])&&t.push(new Qa(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function H_t(e){return e[0]}function q_t(e){return arguments.length?(this._x=e,this):this._x}function W_t(e){return e[1]}function G_t(e){return arguments.length?(this._y=e,this):this._y}function BQ(e,t,n){var r=new UQ(t??H_t,n??W_t,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function UQ(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function bde(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var pu=BQ.prototype=UQ.prototype;pu.copy=function(){var e=new UQ(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=bde(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=bde(r));return e};pu.add=D_t;pu.addAll=P_t;pu.cover=O_t;pu.data=$_t;pu.extent=M_t;pu.find=L_t;pu.remove=F_t;pu.removeAll=j_t;pu.root=B_t;pu.size=U_t;pu.visit=z_t;pu.visitAfter=V_t;pu.x=q_t;pu.y=G_t;function Za(e){return function(){return e}}function y0(e){return(e()-.5)*1e-6}function Y_t(e){return e.x+e.vx}function K_t(e){return e.y+e.vy}function X_t(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Za(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=BQ(t,Y_t,K_t).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,w,E,x,S){var C=b.data,I=b.r,k=m+I;if(C){if(C.index>d.index){var R=h-C.x-C.vx,O=p-C.y-C.vy,P=R*R+O*O;P<k*k&&(R===0&&(R=y0(r),P+=R*R),O===0&&(O=y0(r),P+=O*O),P=(k-(P=Math.sqrt(P)))/P*i,d.vx+=(R*=P)*(k=(I*=I)/(g+I)),d.vy+=(O*=P)*k,C.vx-=R*(k=1-k),C.vy-=O*k)}return}return w>h+k||x<h-k||E>p+k||S<p-k}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Za(+l),u(),o):e},o}function Q_t(e){return e.index}function _de(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function J_t(e){var t=Q_t,n=f,r,i=Za(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var b=0,w,E,x,S,C,I,k;b<v;++b)w=e[b],E=w.source,x=w.target,S=x.x+x.vx-E.x-E.vx||y0(l),C=x.y+x.vy-E.y-E.vy||y0(l),I=Math.sqrt(S*S+C*C),I=(I-s[b])/I*g*r[b],S*=I,C*=I,x.vx-=S*(k=u[b]),x.vy-=C*k,E.vx+=S*(k=1-k),E.vy+=C*k}function h(){if(o){var g,y=o.length,v=e.length,b=new Map(o.map((E,x)=>[t(E,x,o),E])),w;for(g=0,a=new Array(y);g<v;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=_de(b,w.source)),typeof w.target!="object"&&(w.target=_de(b,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)w=e[g],u[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:Za(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Za(+g),m(),d):i},d}const Z_t=1664525,ewt=1013904223,wde=4294967296;function twt(){let e=1;return()=>(e=(Z_t*e+ewt)%wde)/wde}function nwt(e){return e.x}function rwt(e){return e.y}var iwt=10,swt=Math.PI*(3-Math.sqrt(5));function owt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=OQ(f),l=VF("tick","end"),c=twt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var b=0;b<m;++b)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=iwt*Math.sqrt(.5+m),b=m*swt;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,b=e.length,w,E,x,S,C;for(y==null?y=1/0:y*=y,v=0;v<b;++v)S=e[v],w=m-S.x,E=g-S.y,x=w*w+E*E,x<y&&(C=S,y=x);return C},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function awt(){var e,t,n,r,i=Za(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=BQ(e,nwt,rwt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,b,w;if(h.length){for(v=b=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,b+=g*m.y);h.x=v/y,h.y=b/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=g-p,w=y*y+v*v;if(b*b/u<w)return w<a&&(y===0&&(y=y0(n),w+=y*y),v===0&&(v=y0(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)),t.vx+=y*h.value*r/w,t.vy+=v*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(y===0&&(y=y0(n),w+=y*y),v===0&&(v=y0(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(b=s[h.data.index]*r/w,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Za(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function uwt(e){var t=Za(.1),n,r,i;typeof e!="function"&&(e=Za(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Za(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Za(+a),o(),s):e},s}function lwt(e){var t=Za(.1),n,r,i;typeof e!="function"&&(e=Za(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Za(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Za(+a),o(),s):e},s}function cwt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function _M(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function yx(e){return e=_M(Math.abs(e)),e?e[1]:NaN}function fwt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function dwt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var hwt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function bb(e){if(!(t=hwt.exec(e)))throw new Error("invalid format: "+e);var t;return new zQ({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}bb.prototype=zQ.prototype;function zQ(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}zQ.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function pwt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var uIe;function mwt(e,t){var n=_M(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(uIe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+_M(e,Math.max(0,t+s-1))[0]}function Ede(e,t){var n=_M(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const xde={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:cwt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Ede(e*100,t),r:Ede,s:mwt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Sde(e){return e}var Tde=Array.prototype.map,Cde=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function lIe(e){var t=e.grouping===void 0||e.thousands===void 0?Sde:fwt(Tde.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Sde:dwt(Tde.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=bb(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,b=f.precision,w=f.trim,E=f.type;E==="n"?(v=!0,E="g"):xde[E]||(b===void 0&&(b=12),w=!0,E="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var x=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",S=m==="$"?r:/[%p]/.test(E)?o:"",C=xde[E],I=/[defgprs%]/.test(E);b=b===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function k(R){var O=x,P=S,$,L,M;if(E==="c")P=C(R)+P,R="";else{R=+R;var B=R<0||1/R<0;if(R=isNaN(R)?u:C(Math.abs(R),b),w&&(R=pwt(R)),B&&+R==0&&p!=="+"&&(B=!1),O=(B?p==="("?p:a:p==="-"||p==="("?"":p)+O,P=(E==="s"?Cde[8+uIe/3]:"")+P+(B&&p==="("?")":""),I){for($=-1,L=R.length;++$<L;)if(M=R.charCodeAt($),48>M||M>57){P=(M===46?i+R.slice($+1):R.slice($))+P,R=R.slice(0,$);break}}}v&&!g&&(R=t(R,1/0));var U=O.length+R.length+P.length,V=U<y?new Array(y-U+1).join(d):"";switch(v&&g&&(R=t(V+R,V.length?y-P.length:1/0),V=""),h){case"<":R=O+R+P+V;break;case"=":R=O+V+R+P;break;case"^":R=V.slice(0,U=V.length>>1)+O+R+P+V.slice(U);break;default:R=V+O+R+P;break}return s(R)}return k.toString=function(){return f+""},k}function c(f,d){var h=l((f=bb(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(yx(d)/3)))*3,m=Math.pow(10,-p),g=Cde[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var DD,qS,VQ;gwt({thousands:",",grouping:[3],currency:["$",""]});function gwt(e){return DD=lIe(e),qS=DD.format,VQ=DD.formatPrefix,DD}function cIe(e){return Math.max(0,-yx(Math.abs(e)))}function fIe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(yx(t)/3)))*3-yx(Math.abs(e)))}function dIe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,yx(t)-yx(e))+1}var Vt=1e-6,wM=1e-12,$n=Math.PI,Zi=$n/2,EM=$n/4,au=$n*2,us=180/$n,Pn=$n/180,er=Math.abs,WS=Math.atan,Qc=Math.atan2,qt=Math.cos,PD=Math.ceil,hIe=Math.exp,VV=Math.hypot,xM=Math.log,u9=Math.pow,Ut=Math.sin,Fc=Math.sign||function(e){return e>0?1:e<0?-1:0},uu=Math.sqrt,HQ=Math.tan;function pIe(e){return e>1?0:e<-1?$n:Math.acos(e)}function sl(e){return e>1?Zi:e<-1?-Zi:Math.asin(e)}function jo(){}function SM(e,t){e&&Ide.hasOwnProperty(e.type)&&Ide[e.type](e,t)}var Ade={Feature:function(e,t){SM(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)SM(n[r].geometry,t)}},Ide={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){HV(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)HV(n[r],t,0)},Polygon:function(e,t){kde(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)kde(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)SM(n[r],t)}};function HV(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function kde(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)HV(e[n],t,1);t.polygonEnd()}function em(e,t){e&&Ade.hasOwnProperty(e.type)?Ade[e.type](e,t):SM(e,t)}var TM=new nu,CM=new nu,mIe,gIe,qV,WV,GV,Bh={point:jo,lineStart:jo,lineEnd:jo,polygonStart:function(){TM=new nu,Bh.lineStart=ywt,Bh.lineEnd=vwt},polygonEnd:function(){var e=+TM;CM.add(e<0?au+e:e),this.lineStart=this.lineEnd=this.point=jo},sphere:function(){CM.add(au)}};function ywt(){Bh.point=bwt}function vwt(){yIe(mIe,gIe)}function bwt(e,t){Bh.point=yIe,mIe=e,gIe=t,e*=Pn,t*=Pn,qV=e,WV=qt(t=t/2+EM),GV=Ut(t)}function yIe(e,t){e*=Pn,t*=Pn,t=t/2+EM;var n=e-qV,r=n>=0?1:-1,i=r*n,s=qt(t),o=Ut(t),a=GV*o,u=WV*s+a*qt(i),l=a*r*Ut(i);TM.add(Qc(l,u)),qV=e,WV=s,GV=o}function _wt(e){return CM=new nu,em(e,Bh),CM*2}function AM(e){return[Qc(e[1],e[0]),sl(e[2])]}function _b(e){var t=e[0],n=e[1],r=qt(n);return[r*qt(t),r*Ut(t),Ut(n)]}function OD(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function vx(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function l9(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function $D(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function IM(e){var t=uu(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var $i,$u,qi,Il,Zv,vIe,bIe,EE,s2,Xg,zm,Kp={point:YV,lineStart:Rde,lineEnd:Nde,polygonStart:function(){Kp.point=wIe,Kp.lineStart=wwt,Kp.lineEnd=Ewt,s2=new nu,Bh.polygonStart()},polygonEnd:function(){Bh.polygonEnd(),Kp.point=YV,Kp.lineStart=Rde,Kp.lineEnd=Nde,TM<0?($i=-(qi=180),$u=-(Il=90)):s2>Vt?Il=90:s2<-Vt&&($u=-90),zm[0]=$i,zm[1]=qi},sphere:function(){$i=-(qi=180),$u=-(Il=90)}};function YV(e,t){Xg.push(zm=[$i=e,qi=e]),t<$u&&($u=t),t>Il&&(Il=t)}function _Ie(e,t){var n=_b([e*Pn,t*Pn]);if(EE){var r=vx(EE,n),i=[r[1],-r[0],0],s=vx(i,r);IM(s),s=AM(s);var o=e-Zv,a=o>0?1:-1,u=s[0]*us*a,l,c=er(o)>180;c^(a*Zv<u&&u<a*e)?(l=s[1]*us,l>Il&&(Il=l)):(u=(u+360)%360-180,c^(a*Zv<u&&u<a*e)?(l=-s[1]*us,l<$u&&($u=l)):(t<$u&&($u=t),t>Il&&(Il=t))),c?e<Zv?Cl($i,e)>Cl($i,qi)&&(qi=e):Cl(e,qi)>Cl($i,qi)&&($i=e):qi>=$i?(e<$i&&($i=e),e>qi&&(qi=e)):e>Zv?Cl($i,e)>Cl($i,qi)&&(qi=e):Cl(e,qi)>Cl($i,qi)&&($i=e)}else Xg.push(zm=[$i=e,qi=e]);t<$u&&($u=t),t>Il&&(Il=t),EE=n,Zv=e}function Rde(){Kp.point=_Ie}function Nde(){zm[0]=$i,zm[1]=qi,Kp.point=YV,EE=null}function wIe(e,t){if(EE){var n=e-Zv;s2.add(er(n)>180?n+(n>0?360:-360):n)}else vIe=e,bIe=t;Bh.point(e,t),_Ie(e,t)}function wwt(){Bh.lineStart()}function Ewt(){wIe(vIe,bIe),Bh.lineEnd(),er(s2)>Vt&&($i=-(qi=180)),zm[0]=$i,zm[1]=qi,EE=null}function Cl(e,t){return(t-=e)<0?t+360:t}function xwt(e,t){return e[0]-t[0]}function Dde(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Swt(e){var t,n,r,i,s,o,a;if(Il=qi=-($i=$u=1/0),Xg=[],em(e,Kp),n=Xg.length){for(Xg.sort(xwt),t=1,r=Xg[0],s=[r];t<n;++t)i=Xg[t],Dde(r,i[0])||Dde(r,i[1])?(Cl(r[0],i[1])>Cl(r[0],r[1])&&(r[1]=i[1]),Cl(i[0],r[1])>Cl(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=Cl(r[1],i[0]))>o&&(o=a,$i=i[0],qi=r[1])}return Xg=zm=null,$i===1/0||$u===1/0?[[NaN,NaN],[NaN,NaN]]:[[$i,$u],[qi,Il]]}var nA,kM,RM,NM,DM,PM,OM,$M,KV,XV,QV,EIe,xIe,Ya,Ka,Xa,Gf={sphere:jo,point:qQ,lineStart:Pde,lineEnd:Ode,polygonStart:function(){Gf.lineStart=Awt,Gf.lineEnd=Iwt},polygonEnd:function(){Gf.lineStart=Pde,Gf.lineEnd=Ode}};function qQ(e,t){e*=Pn,t*=Pn;var n=qt(t);hR(n*qt(e),n*Ut(e),Ut(t))}function hR(e,t,n){++nA,RM+=(e-RM)/nA,NM+=(t-NM)/nA,DM+=(n-DM)/nA}function Pde(){Gf.point=Twt}function Twt(e,t){e*=Pn,t*=Pn;var n=qt(t);Ya=n*qt(e),Ka=n*Ut(e),Xa=Ut(t),Gf.point=Cwt,hR(Ya,Ka,Xa)}function Cwt(e,t){e*=Pn,t*=Pn;var n=qt(t),r=n*qt(e),i=n*Ut(e),s=Ut(t),o=Qc(uu((o=Ka*s-Xa*i)*o+(o=Xa*r-Ya*s)*o+(o=Ya*i-Ka*r)*o),Ya*r+Ka*i+Xa*s);kM+=o,PM+=o*(Ya+(Ya=r)),OM+=o*(Ka+(Ka=i)),$M+=o*(Xa+(Xa=s)),hR(Ya,Ka,Xa)}function Ode(){Gf.point=qQ}function Awt(){Gf.point=kwt}function Iwt(){SIe(EIe,xIe),Gf.point=qQ}function kwt(e,t){EIe=e,xIe=t,e*=Pn,t*=Pn,Gf.point=SIe;var n=qt(t);Ya=n*qt(e),Ka=n*Ut(e),Xa=Ut(t),hR(Ya,Ka,Xa)}function SIe(e,t){e*=Pn,t*=Pn;var n=qt(t),r=n*qt(e),i=n*Ut(e),s=Ut(t),o=Ka*s-Xa*i,a=Xa*r-Ya*s,u=Ya*i-Ka*r,l=VV(o,a,u),c=sl(l),f=l&&-c/l;KV.add(f*o),XV.add(f*a),QV.add(f*u),kM+=c,PM+=c*(Ya+(Ya=r)),OM+=c*(Ka+(Ka=i)),$M+=c*(Xa+(Xa=s)),hR(Ya,Ka,Xa)}function Rwt(e){nA=kM=RM=NM=DM=PM=OM=$M=0,KV=new nu,XV=new nu,QV=new nu,em(e,Gf);var t=+KV,n=+XV,r=+QV,i=VV(t,n,r);return i<wM&&(t=PM,n=OM,r=$M,kM<Vt&&(t=RM,n=NM,r=DM),i=VV(t,n,r),i<wM)?[NaN,NaN]:[Qc(n,t)*us,sl(r/i)*us]}function JV(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function ZV(e,t){return er(e)>$n&&(e-=Math.round(e/au)*au),[e,t]}ZV.invert=ZV;function TIe(e,t,n){return(e%=au)?t||n?JV(Mde(e),Lde(t,n)):Mde(e):t||n?Lde(t,n):ZV}function $de(e){return function(t,n){return t+=e,er(t)>$n&&(t-=Math.round(t/au)*au),[t,n]}}function Mde(e){var t=$de(e);return t.invert=$de(-e),t}function Lde(e,t){var n=qt(e),r=Ut(e),i=qt(t),s=Ut(t);function o(a,u){var l=qt(u),c=qt(a)*l,f=Ut(a)*l,d=Ut(u),h=d*n+c*r;return[Qc(f*i-h*s,c*n-d*r),sl(h*i+f*s)]}return o.invert=function(a,u){var l=qt(u),c=qt(a)*l,f=Ut(a)*l,d=Ut(u),h=d*i-f*s;return[Qc(f*i+d*s,c*n+h*r),sl(h*n-c*r)]},o}function Nwt(e){e=TIe(e[0]*Pn,e[1]*Pn,e.length>2?e[2]*Pn:0);function t(n){return n=e(n[0]*Pn,n[1]*Pn),n[0]*=us,n[1]*=us,n}return t.invert=function(n){return n=e.invert(n[0]*Pn,n[1]*Pn),n[0]*=us,n[1]*=us,n},t}function Dwt(e,t,n,r,i,s){if(n){var o=qt(t),a=Ut(t),u=r*n;i==null?(i=t+r*au,s=t-u/2):(i=Fde(o,i),s=Fde(o,s),(r>0?i<s:i>s)&&(i+=r*au));for(var l,c=i;r>0?c>s:c<s;c-=u)l=AM([o,-a*qt(c),-a*Ut(c)]),e.point(l[0],l[1])}}function Fde(e,t){t=_b(t),t[0]-=e,IM(t);var n=pIe(-t[1]);return((-t[2]<0?-n:n)+au-Vt)%au}function CIe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:jo,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function dO(e,t){return er(e[0]-t[0])<Vt&&er(e[1]-t[1])<Vt}function MD(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function AIe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(dO(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*Vt}s.push(v=new MD(g,p,null,!0)),o.push(v.o=new MD(g,null,v,!1)),s.push(v=new MD(y,p,null,!1)),o.push(v.o=new MD(y,null,v,!0))}}),!!s.length){for(o.sort(t),jde(s),jde(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function jde(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function c9(e){return er(e[0])<=$n?e[0]:Fc(e[0])*((er(e[0])+$n)%au-$n)}function Pwt(e,t){var n=c9(t),r=t[1],i=Ut(r),s=[Ut(n),-qt(n),0],o=0,a=0,u=new nu;i===1?r=Zi+Vt:i===-1&&(r=-Zi-Vt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=c9(h),m=h[1]/2+EM,g=Ut(m),y=qt(m),v=0;v<d;++v,p=w,g=x,y=S,h=b){var b=f[v],w=c9(b),E=b[1]/2+EM,x=Ut(E),S=qt(E),C=w-p,I=C>=0?1:-1,k=I*C,R=k>$n,O=g*x;if(u.add(Qc(O*I*Ut(k),y*S+O*qt(k))),o+=R?C+I*au:C,R^p>=n^w>=n){var P=vx(_b(h),_b(b));IM(P);var $=vx(s,P);IM($);var L=(R^C>=0?-1:1)*sl($[2]);(r>L||r===L&&(P[0]||P[1]))&&(a+=R^C>=0?1:-1)}}return(o<-Vt||o<Vt&&u<-wM)^a&1}function IIe(e,t,n,r){return function(i){var s=t(i),o=CIe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=f2e(c);var w=Pwt(l,r);c.length?(u||(i.polygonStart(),u=!0),AIe(c,$wt,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,E){e(w,E)&&i.point(w,E)}function p(w,E){s.point(w,E)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(w,E){f.push([w,E]),a.point(w,E)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),E=o.result(),x,S=E.length,C,I,k;if(f.pop(),l.push(f),f=null,!!S){if(w&1){if(I=E[0],(C=I.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),x=0;x<C;++x)i.point((k=I[x])[0],k[1]);i.lineEnd()}return}S>1&&w&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(Owt))}}return d}}function Owt(e){return e.length>1}function $wt(e,t){return((e=e.x)[0]<0?e[1]-Zi-Vt:Zi-e[1])-((t=t.x)[0]<0?t[1]-Zi-Vt:Zi-t[1])}const Bde=IIe(function(){return!0},Mwt,Fwt,[-$n,-Zi]);function Mwt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?$n:-$n,u=er(s-t);er(u-$n)<Vt?(e.point(t,n=(n+o)/2>0?Zi:-Zi),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=$n&&(er(t-r)<Vt&&(t-=r*Vt),er(s-a)<Vt&&(s-=a*Vt),n=Lwt(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Lwt(e,t,n,r){var i,s,o=Ut(e-n);return er(o)>Vt?WS((Ut(t)*(s=qt(r))*Ut(n)-Ut(r)*(i=qt(t))*Ut(e))/(i*s*o)):(t+r)/2}function Fwt(e,t,n,r){var i;if(e==null)i=n*Zi,r.point(-$n,i),r.point(0,i),r.point($n,i),r.point($n,0),r.point($n,-i),r.point(0,-i),r.point(-$n,-i),r.point(-$n,0),r.point(-$n,i);else if(er(e[0]-t[0])>Vt){var s=e[0]<t[0]?$n:-$n;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function jwt(e){var t=qt(e),n=2*Pn,r=t>0,i=er(t)>Vt;function s(c,f,d,h){Dwt(h,e,n,d,c,f)}function o(c,f){return qt(c)*qt(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],b,w=o(g,y),E=r?w?0:l(g,y):w?l(g+(g<0?$n:-$n),y):0;if(!f&&(p=h=w)&&c.lineStart(),w!==h&&(b=u(f,v),(!b||dO(f,b)||dO(v,b))&&(v[2]=1)),w!==h)m=0,w?(c.lineStart(),b=u(v,f),c.point(b[0],b[1])):(b=u(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^w){var x;!(E&d)&&(x=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(x[0][0],x[0][1]),c.point(x[1][0],x[1][1]),c.lineEnd()):(c.point(x[1][0],x[1][1]),c.lineEnd(),c.lineStart(),c.point(x[0][0],x[0][1],3)))}w&&(!f||!dO(f,v))&&c.point(v[0],v[1]),f=v,h=w,d=E},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=_b(c),p=_b(f),m=[1,0,0],g=vx(h,p),y=OD(g,g),v=g[0],b=y-v*v;if(!b)return!d&&c;var w=t*y/b,E=-t*v/b,x=vx(m,g),S=$D(m,w),C=$D(g,E);l9(S,C);var I=x,k=OD(S,I),R=OD(I,I),O=k*k-R*(OD(S,S)-1);if(!(O<0)){var P=uu(O),$=$D(I,(-k-P)/R);if(l9($,S),$=AM($),!d)return $;var L=c[0],M=f[0],B=c[1],U=f[1],V;M<L&&(V=L,L=M,M=V);var D=M-L,z=er(D-$n)<Vt,W=z||D<Vt;if(!z&&U<B&&(V=B,B=U,U=V),W?z?B+U>0^$[1]<(er($[0]-L)<Vt?B:U):B<=$[1]&&$[1]<=U:D>$n^(L<=$[0]&&$[0]<=M)){var j=$D(I,(-k+P)/R);return l9(j,S),[$,AM(j)]}}}function l(c,f){var d=r?e:$n-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return IIe(o,a,s,r?[0,-e]:[-$n,e-$n])}function Bwt(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var rA=1e9,LD=-rA;function kIe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return er(l[0]-e)<Vt?c>0?0:3:er(l[0]-n)<Vt?c>0?2:1:er(l[1]-t)<Vt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=CIe(),d,h,p,m,g,y,v,b,w,E,x,S={point:C,lineStart:O,lineEnd:P,polygonStart:k,polygonEnd:R};function C(L,M){i(L,M)&&c.point(L,M)}function I(){for(var L=0,M=0,B=h.length;M<B;++M)for(var U=h[M],V=1,D=U.length,z=U[0],W,j,q=z[0],G=z[1];V<D;++V)W=q,j=G,z=U[V],q=z[0],G=z[1],j<=r?G>r&&(q-W)*(r-j)>(G-j)*(e-W)&&++L:G<=r&&(q-W)*(r-j)<(G-j)*(e-W)&&--L;return L}function k(){c=f,d=[],h=[],x=!0}function R(){var L=I(),M=x&&L,B=(d=f2e(d)).length;(M||B)&&(l.polygonStart(),M&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),B&&AIe(d,a,L,s,l),l.polygonEnd()),c=l,d=h=p=null}function O(){S.point=$,h&&h.push(p=[]),E=!0,w=!1,v=b=NaN}function P(){d&&($(m,g),y&&w&&f.rejoin(),d.push(f.result())),S.point=C,w&&c.lineEnd()}function $(L,M){var B=i(L,M);if(h&&p.push([L,M]),E)m=L,g=M,y=B,E=!1,B&&(c.lineStart(),c.point(L,M));else if(B&&w)c.point(L,M);else{var U=[v=Math.max(LD,Math.min(rA,v)),b=Math.max(LD,Math.min(rA,b))],V=[L=Math.max(LD,Math.min(rA,L)),M=Math.max(LD,Math.min(rA,M))];Bwt(U,V,e,t,n,r)?(w||(c.lineStart(),c.point(U[0],U[1])),c.point(V[0],V[1]),B||c.lineEnd(),x=!1):B&&(c.lineStart(),c.point(L,M),x=!1)}v=L,b=M,w=B}return S}}function Ude(e,t,n){var r=Vu(e,t-Vt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function zde(e,t,n){var r=Vu(e,t-Vt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function Uwt(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Vu(PD(r/c)*c,n,c).map(p).concat(Vu(PD(a/f)*f,o,f).map(m)).concat(Vu(PD(t/u)*u,e,u).filter(function(b){return er(b%c)>Vt}).map(d)).concat(Vu(PD(s/l)*l,i,l).filter(function(b){return er(b%f)>Vt}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(g)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(u=+b[0],l=+b[1],y):[u,l]},y.precision=function(b){return arguments.length?(g=+b,d=Ude(s,i,90),h=zde(t,e,g),p=Ude(a,o,90),m=zde(r,n,g),y):g},y.extentMajor([[-180,-90+Vt],[180,90-Vt]]).extentMinor([[-180,-80-Vt],[180,80+Vt]])}const PI=e=>e;var f9=new nu,eH=new nu,RIe,NIe,tH,nH,tm={point:jo,lineStart:jo,lineEnd:jo,polygonStart:function(){tm.lineStart=zwt,tm.lineEnd=Hwt},polygonEnd:function(){tm.lineStart=tm.lineEnd=tm.point=jo,f9.add(er(eH)),eH=new nu},result:function(){var e=f9/2;return f9=new nu,e}};function zwt(){tm.point=Vwt}function Vwt(e,t){tm.point=DIe,RIe=tH=e,NIe=nH=t}function DIe(e,t){eH.add(nH*e-tH*t),tH=e,nH=t}function Hwt(){DIe(RIe,NIe)}var bx=1/0,MM=bx,OI=-bx,LM=OI,FM={point:qwt,lineStart:jo,lineEnd:jo,polygonStart:jo,polygonEnd:jo,result:function(){var e=[[bx,MM],[OI,LM]];return OI=LM=-(MM=bx=1/0),e}};function qwt(e,t){e<bx&&(bx=e),e>OI&&(OI=e),t<MM&&(MM=t),t>LM&&(LM=t)}var rH=0,iH=0,iA=0,jM=0,BM=0,Xw=0,sH=0,oH=0,sA=0,PIe,OIe,rh,ih,Oc={point:wb,lineStart:Vde,lineEnd:Hde,polygonStart:function(){Oc.lineStart=Ywt,Oc.lineEnd=Kwt},polygonEnd:function(){Oc.point=wb,Oc.lineStart=Vde,Oc.lineEnd=Hde},result:function(){var e=sA?[sH/sA,oH/sA]:Xw?[jM/Xw,BM/Xw]:iA?[rH/iA,iH/iA]:[NaN,NaN];return rH=iH=iA=jM=BM=Xw=sH=oH=sA=0,e}};function wb(e,t){rH+=e,iH+=t,++iA}function Vde(){Oc.point=Wwt}function Wwt(e,t){Oc.point=Gwt,wb(rh=e,ih=t)}function Gwt(e,t){var n=e-rh,r=t-ih,i=uu(n*n+r*r);jM+=i*(rh+e)/2,BM+=i*(ih+t)/2,Xw+=i,wb(rh=e,ih=t)}function Hde(){Oc.point=wb}function Ywt(){Oc.point=Xwt}function Kwt(){$Ie(PIe,OIe)}function Xwt(e,t){Oc.point=$Ie,wb(PIe=rh=e,OIe=ih=t)}function $Ie(e,t){var n=e-rh,r=t-ih,i=uu(n*n+r*r);jM+=i*(rh+e)/2,BM+=i*(ih+t)/2,Xw+=i,i=ih*e-rh*t,sH+=i*(rh+e),oH+=i*(ih+t),sA+=i*3,wb(rh=e,ih=t)}function MIe(e){this._context=e}MIe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,au);break}}},result:jo};var aH=new nu,d9,LIe,FIe,oA,aA,$I={point:jo,lineStart:function(){$I.point=Qwt},lineEnd:function(){d9&&jIe(LIe,FIe),$I.point=jo},polygonStart:function(){d9=!0},polygonEnd:function(){d9=null},result:function(){var e=+aH;return aH=new nu,e}};function Qwt(e,t){$I.point=jIe,LIe=oA=e,FIe=aA=t}function jIe(e,t){oA-=e,aA-=t,aH.add(uu(oA*oA+aA*aA)),oA=e,aA=t}let qde,UM,Wde,Gde;class Yde{constructor(t){this._append=t==null?BIe:Jwt(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Wde||this._append!==UM){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Wde=r,UM=this._append,Gde=this._,this._=i}this._+=Gde;break}}}result(){const t=this._;return this._="",t.length?t:null}}function BIe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Jwt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return BIe;if(t!==qde){const n=10**t;qde=t,UM=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return UM}function UIe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),em(a,i(s))),s.result()}return o.area=function(a){return em(a,i(tm)),tm.result()},o.measure=function(a){return em(a,i($I)),$I.result()},o.bounds=function(a){return em(a,i(FM)),FM.result()},o.centroid=function(a){return em(a,i(Oc)),Oc.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,PI):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new Yde(n)):new MIe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new Yde(n)),o},o.projection(e).digits(n).context(t)}function JF(e){return function(t){var n=new uH;for(var r in e)n[r]=e[r];return n.stream=t,n}}function uH(){}uH.prototype={constructor:uH,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function WQ(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),em(n,e.stream(FM)),t(FM.result()),r!=null&&e.clipExtent(r),e}function ZF(e,t,n){return WQ(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function GQ(e,t,n){return ZF(e,[[0,0],t],n)}function YQ(e,t,n){return WQ(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function KQ(e,t,n){return WQ(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var Kde=16,Zwt=qt(30*Pn);function Xde(e,t){return+t?tEt(e,t):eEt(e)}function eEt(e){return JF({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function tEt(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var w=o+d,E=a+h,x=u+p,S=uu(w*w+E*E+x*x),C=sl(x/=S),I=er(er(x)-1)<Vt||er(s-f)<Vt?(s+f)/2:Qc(E,w),k=e(I,C),R=k[0],O=k[1],P=R-r,$=O-i,L=v*P-y*$;(L*L/b>t||er((y*P+v*$)/b-.5)>.3||o*d+a*h+u*p<Zwt)&&(n(r,i,s,o,a,u,R,O,I,w/=S,E/=S,x,m,g),g.point(R,O),n(R,O,I,w,E,x,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=E},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(C,I){C=e(C,I),r.point(C[0],C[1])}function v(){f=NaN,g.point=b,r.lineStart()}function b(C,I){var k=_b([C,I]),R=e(C,I);n(f,d,c,h,p,m,f=R[0],d=R[1],c=C,h=k[0],p=k[1],m=k[2],Kde,r),r.point(f,d)}function w(){g.point=y,r.lineEnd()}function E(){v(),g.point=x,g.lineEnd=S}function x(C,I){b(i=C,I),s=f,o=d,a=h,u=p,l=m,g.point=b}function S(){n(f,d,c,h,p,m,s,o,i,a,u,l,Kde,r),g.lineEnd=w,w()}return g}}var nEt=JF({point:function(e,t){this.stream.point(e*Pn,t*Pn)}});function rEt(e){return JF({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function iEt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function Qde(e,t,n,r,i,s){if(!s)return iEt(e,t,n,r,i);var o=qt(s),a=Ut(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function pp(e){return zIe(function(){return e})()}function zIe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=Bde,g=null,y,v,b,w=PI,E=.5,x,S,C,I,k;function R(L){return C(L[0]*Pn,L[1]*Pn)}function O(L){return L=C.invert(L[0],L[1]),L&&[L[0]*us,L[1]*us]}R.stream=function(L){return I&&k===L?I:I=nEt(rEt(c)(m(x(w(k=L)))))},R.preclip=function(L){return arguments.length?(m=L,p=void 0,$()):m},R.postclip=function(L){return arguments.length?(w=L,g=y=v=b=null,$()):w},R.clipAngle=function(L){return arguments.length?(m=+L?jwt(p=L*Pn):(p=null,Bde),$()):p*us},R.clipExtent=function(L){return arguments.length?(w=L==null?(g=y=v=b=null,PI):kIe(g=+L[0][0],y=+L[0][1],v=+L[1][0],b=+L[1][1]),$()):g==null?null:[[g,y],[v,b]]},R.scale=function(L){return arguments.length?(n=+L,P()):n},R.translate=function(L){return arguments.length?(r=+L[0],i=+L[1],P()):[r,i]},R.center=function(L){return arguments.length?(s=L[0]%360*Pn,o=L[1]%360*Pn,P()):[s*us,o*us]},R.rotate=function(L){return arguments.length?(a=L[0]%360*Pn,u=L[1]%360*Pn,l=L.length>2?L[2]%360*Pn:0,P()):[a*us,u*us,l*us]},R.angle=function(L){return arguments.length?(f=L%360*Pn,P()):f*us},R.reflectX=function(L){return arguments.length?(d=L?-1:1,P()):d<0},R.reflectY=function(L){return arguments.length?(h=L?-1:1,P()):h<0},R.precision=function(L){return arguments.length?(x=Xde(S,E=L*L),$()):uu(E)},R.fitExtent=function(L,M){return ZF(R,L,M)},R.fitSize=function(L,M){return GQ(R,L,M)},R.fitWidth=function(L,M){return YQ(R,L,M)},R.fitHeight=function(L,M){return KQ(R,L,M)};function P(){var L=Qde(n,0,0,d,h,f).apply(null,t(s,o)),M=Qde(n,r-L[0],i-L[1],d,h,f);return c=TIe(a,u,l),S=JV(t,M),C=JV(c,S),x=Xde(S,E),$()}function $(){return I=k=null,R}return function(){return t=e.apply(this,arguments),R.invert=t.invert&&O,P()}}function XQ(e){var t=0,n=$n/3,r=zIe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Pn,n=s[1]*Pn):[t*us,n*us]},i}function sEt(e){var t=qt(e);function n(r,i){return[r*t,Ut(i)/t]}return n.invert=function(r,i){return[r/t,sl(i*t)]},n}function oEt(e,t){var n=Ut(e),r=(n+Ut(t))/2;if(er(r)<Vt)return sEt(e);var i=1+n*(2*r-n),s=uu(i)/r;function o(a,u){var l=uu(i-2*r*Ut(u))/r;return[l*Ut(a*=r),s-l*qt(a)]}return o.invert=function(a,u){var l=s-u,c=Qc(a,er(l))*Fc(l);return l*r<0&&(c-=$n*Fc(a)*Fc(l)),[c/r,sl((i-(a*a+l*l)*r*r)/(2*r))]},o}function zM(){return XQ(oEt).scale(155.424).center([0,33.6442])}function VIe(){return zM().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function aEt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function uEt(){var e,t,n=VIe(),r,i=zM().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=zM().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=aEt([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Vt,m+.12*h+Vt],[p-.214*h-Vt,m+.234*h-Vt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Vt,m+.166*h+Vt],[p-.115*h-Vt,m+.234*h-Vt]]).stream(l),f()},c.fitExtent=function(d,h){return ZF(c,d,h)},c.fitSize=function(d,h){return GQ(c,d,h)},c.fitWidth=function(d,h){return YQ(c,d,h)},c.fitHeight=function(d,h){return KQ(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function HIe(e){return function(t,n){var r=qt(t),i=qt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Ut(t),s*Ut(n)]}}function pR(e){return function(t,n){var r=uu(t*t+n*n),i=e(r),s=Ut(i),o=qt(i);return[Qc(t*s,r*o),sl(r&&n*s/r)]}}var qIe=HIe(function(e){return uu(2/(1+e))});qIe.invert=pR(function(e){return 2*sl(e/2)});function lEt(){return pp(qIe).scale(124.75).clipAngle(180-.001)}var WIe=HIe(function(e){return(e=pIe(e))&&e/Ut(e)});WIe.invert=pR(function(e){return e});function cEt(){return pp(WIe).scale(79.4188).clipAngle(180-.001)}function e4(e,t){return[e,xM(HQ((Zi+t)/2))]}e4.invert=function(e,t){return[e,2*WS(hIe(t))-Zi]};function fEt(){return GIe(e4).scale(961/au)}function GIe(e){var t=pp(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=$n*r(),d=t(Nwt(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===e4?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function FD(e){return HQ((Zi+e)/2)}function dEt(e,t){var n=qt(e),r=e===t?Ut(e):xM(n/qt(t))/xM(FD(t)/FD(e)),i=n*u9(FD(e),r)/r;if(!r)return e4;function s(o,a){i>0?a<-Zi+Vt&&(a=-Zi+Vt):a>Zi-Vt&&(a=Zi-Vt);var u=i/u9(FD(a),r);return[u*Ut(r*o),i-u*qt(r*o)]}return s.invert=function(o,a){var u=i-a,l=Fc(r)*uu(o*o+u*u),c=Qc(o,er(u))*Fc(u);return u*r<0&&(c-=$n*Fc(o)*Fc(u)),[c/r,2*WS(u9(i/l,1/r))-Zi]},s}function hEt(){return XQ(dEt).scale(109.5).parallels([30,30])}function VM(e,t){return[e,t]}VM.invert=VM;function pEt(){return pp(VM).scale(152.63)}function mEt(e,t){var n=qt(e),r=e===t?Ut(e):(n-qt(t))/(t-e),i=n/r+e;if(er(r)<Vt)return VM;function s(o,a){var u=i-a,l=r*o;return[u*Ut(l),i-u*qt(l)]}return s.invert=function(o,a){var u=i-a,l=Qc(o,er(u))*Fc(u);return u*r<0&&(l-=$n*Fc(o)*Fc(u)),[l/r,i-Fc(r)*uu(o*o+u*u)]},s}function gEt(){return XQ(mEt).scale(131.154).center([0,13.9389])}var o2=1.340264,a2=-.081106,u2=893e-6,l2=.003796,HM=uu(3)/2,yEt=12;function YIe(e,t){var n=sl(HM*Ut(t)),r=n*n,i=r*r*r;return[e*qt(n)/(HM*(o2+3*a2*r+i*(7*u2+9*l2*r))),n*(o2+a2*r+i*(u2+l2*r))]}YIe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<yEt&&(a=n*(o2+a2*r+i*(u2+l2*r))-t,u=o2+3*a2*r+i*(7*u2+9*l2*r),n-=o=a/u,r=n*n,i=r*r*r,!(er(o)<wM));++s);return[HM*e*(o2+3*a2*r+i*(7*u2+9*l2*r))/qt(n),sl(Ut(n)/HM)]};function vEt(){return pp(YIe).scale(177.158)}function KIe(e,t){var n=qt(t),r=qt(e)*n;return[n*Ut(e)/r,Ut(t)/r]}KIe.invert=pR(WS);function bEt(){return pp(KIe).scale(144.049).clipAngle(60)}function _Et(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=JF({point:function(w,E){var x=b([w,E]);this.stream.point(x[0],x[1])}}),m=PI,g,y;function v(){return d=e*r,h=e*i,g=y=null,b}function b(w){var E=w[0]*d,x=w[1]*h;if(s){var S=x*o-E*a;E=E*o+x*a,x=S}return[E+t,x+n]}return b.invert=function(w){var E=w[0]-t,x=w[1]-n;if(s){var S=x*o+E*a;E=E*o-x*a,x=S}return[E/d,x/h]},b.stream=function(w){return g&&y===w?g:g=p(m(y=w))},b.postclip=function(w){return arguments.length?(m=w,u=l=c=f=null,v()):m},b.clipExtent=function(w){return arguments.length?(m=w==null?(u=l=c=f=null,PI):kIe(u=+w[0][0],l=+w[0][1],c=+w[1][0],f=+w[1][1]),v()):u==null?null:[[u,l],[c,f]]},b.scale=function(w){return arguments.length?(e=+w,v()):e},b.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],v()):[t,n]},b.angle=function(w){return arguments.length?(s=w%360*Pn,a=Ut(s),o=qt(s),v()):s*us},b.reflectX=function(w){return arguments.length?(r=w?-1:1,v()):r<0},b.reflectY=function(w){return arguments.length?(i=w?-1:1,v()):i<0},b.fitExtent=function(w,E){return ZF(b,w,E)},b.fitSize=function(w,E){return GQ(b,w,E)},b.fitWidth=function(w,E){return YQ(b,w,E)},b.fitHeight=function(w,E){return KQ(b,w,E)},b}function XIe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}XIe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(er(i)>Vt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function wEt(){return pp(XIe).scale(175.295)}function QIe(e,t){return[qt(t)*Ut(e),Ut(t)]}QIe.invert=pR(sl);function EEt(){return pp(QIe).scale(249.5).clipAngle(90+Vt)}function JIe(e,t){var n=qt(t),r=1+qt(e)*n;return[n*Ut(e)/r,Ut(t)/r]}JIe.invert=pR(function(e){return 2*WS(e)});function xEt(){return pp(JIe).scale(250).clipAngle(142)}function ZIe(e,t){return[xM(HQ((Zi+t)/2)),-e]}ZIe.invert=function(e,t){return[-t,2*WS(hIe(e))-Zi]};function SEt(){var e=GIe(ZIe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function TEt(e,t){return e.parent===t.parent?1:2}function CEt(e){return e.reduce(AEt,0)/e.length}function AEt(e,t){return e+t.x}function IEt(e){return 1+e.reduce(kEt,0)}function kEt(e,t){return Math.max(e,t.y)}function REt(e){for(var t;t=e.children;)e=t[0];return e}function NEt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function DEt(){var e=TEt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=CEt(h),d.y=IEt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=REt(s),l=NEt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function PEt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function OEt(){return this.eachAfter(PEt)}function $Et(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function MEt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function LEt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function FEt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function jEt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function BEt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function UEt(e){for(var t=this,n=zEt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function zEt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function VEt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function HEt(){return Array.from(this)}function qEt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function WEt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*GEt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function t4(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=XEt)):t===void 0&&(t=KEt);for(var n=new _x(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new _x(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(eke)}function YEt(){return t4(this).eachBefore(QEt)}function KEt(e){return e.children}function XEt(e){return Array.isArray(e)?e[1]:null}function QEt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function eke(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function _x(e){this.data=e,this.depth=this.height=0,this.parent=null}_x.prototype=t4.prototype={constructor:_x,count:OEt,each:$Et,eachAfter:LEt,eachBefore:MEt,find:FEt,sum:jEt,sort:BEt,path:UEt,ancestors:VEt,descendants:HEt,leaves:qEt,links:WEt,copy:YEt,[Symbol.iterator]:GEt};function hO(e){return e==null?null:tke(e)}function tke(e){if(typeof e!="function")throw new Error;return e}function h1(){return 0}function xw(e){return function(){return e}}const JEt=1664525,ZEt=1013904223,Jde=4294967296;function ext(){let e=1;return()=>(e=(JEt*e+ZEt)%Jde)/Jde}function txt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function nxt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function rxt(e,t){for(var n=0,r=(e=nxt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&nke(o,s)?++n:(o=sxt(i=ixt(i,s)),n=0);return o}function ixt(e,t){var n,r;if(h9(t,e))return[t];for(n=0;n<e.length;++n)if(jD(t,e[n])&&h9(uA(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(jD(uA(e[n],e[r]),t)&&jD(uA(e[n],t),e[r])&&jD(uA(e[r],t),e[n])&&h9(rke(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function jD(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function nke(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function h9(e,t){for(var n=0;n<t.length;++n)if(!nke(e,t[n]))return!1;return!0}function sxt(e){switch(e.length){case 1:return oxt(e[0]);case 2:return uA(e[0],e[1]);case 3:return rke(e[0],e[1],e[2])}}function oxt(e){return{x:e.x,y:e.y,r:e.r}}function uA(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function rke(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,b=v-o*o-a*a+u*u,w=v-l*l-c*c+f*f,E=h*p-d*m,x=(p*w-m*b)/(E*2)-r,S=(m*g-p*y)/E,C=(h*b-d*w)/(E*2)-i,I=(d*y-h*g)/E,k=S*S+I*I-1,R=2*(s+x*S+C*I),O=x*x+C*C-s*s,P=-(Math.abs(k)>1e-6?(R+Math.sqrt(R*R-4*k*O))/(2*k):O/R);return{x:r+x+S*P,y:i+C+I*P,r:P}}function Zde(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function ehe(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function the(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function BD(e){this._=e,this.next=null,this.previous=null}function axt(e,t){if(!(s=(e=txt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;Zde(r,n,i=e[2]),n=new BD(n),r=new BD(r),i=new BD(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){Zde(n._,r._,i=e[u]),i=new BD(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(ehe(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(ehe(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=the(n);(i=i.next)!==r;)(a=the(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=rxt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function uxt(e){return Math.sqrt(e.value)}function ike(){var e=null,t=1,n=1,r=h1;function i(s){const o=ext();return s.x=t/2,s.y=n/2,e?s.eachBefore(nhe(e)).eachAfter(p9(r,.5,o)).eachBefore(rhe(1)):s.eachBefore(nhe(uxt)).eachAfter(p9(h1,1,o)).eachAfter(p9(r,s.r/Math.min(t,n),o)).eachBefore(rhe(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=hO(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:xw(+s),i):r},i}function nhe(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function p9(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=axt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function rhe(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function ske(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function mR(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function lxt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(ske),o}function s(o,a){return function(u){u.children&&mR(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var cxt={depth:-1},ihe={},m9={};function fxt(e){return e.id}function dxt(e){return e.parentId}function she(){var e=fxt,t=dxt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((w,E)=>hxt(n(w,E,i))),v=y.map(ohe),b=new Set(y).add("");for(const w of v)b.has(w)||(b.add(w),y.push(w),v.push(ohe(w)),s.push(m9));o=(w,E)=>y[E],a=(w,E)=>v[E]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new _x(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?ihe:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===ihe)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===m9&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===m9);--y)h.data=null}if(f.parent=cxt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(eke),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=hO(i),r):e},r.parentId=function(i){return arguments.length?(t=hO(i),r):t},r.path=function(i){return arguments.length?(n=hO(i),r):n},r}function hxt(e){e=`${e}`;let t=e.length;return lH(e,t-1)&&!lH(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function ohe(e){let t=e.length;if(t<2)return"";for(;--t>1&&!lH(e,t););return e.slice(0,t)}function lH(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function pxt(e,t){return e.parent===t.parent?1:2}function g9(e){var t=e.children;return t?t[0]:e.t}function y9(e){var t=e.children;return t?t[t.length-1]:e.t}function mxt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function gxt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function yxt(e,t,n){return e.a.parent===t.parent?e.a:n}function pO(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}pO.prototype=Object.create(_x.prototype);function vxt(e){for(var t=new pO(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new pO(s[o],o)),i.parent=n;return(t.parent=new pO(null,0)).children=[t],t}function bxt(){var e=pxt,t=1,n=1,r=null;function i(l){var c=vxt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){gxt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,b=m.m,w;p=y9(p),d=g9(d),p&&d;)m=g9(m),h=y9(h),h.a=l,w=p.z+v-d.z-g+e(p._,d._),w>0&&(mxt(yxt(p,l,f),l,w),g+=w,y+=w),v+=p.m,g+=d.m,b+=m.m,y+=h.m;p&&!y9(h)&&(h.t=p,h.m+=v-y),d&&!g9(m)&&(m.t=d,m.m+=g-b,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function n4(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var oke=(1+Math.sqrt(5))/2;function ake(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,b,w,E,x;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,E=Math.max(p/h,h/p)/(m*e),x=g*g*E,w=Math.max(v/x,x/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),x=g*g*E,b=Math.max(v/x,x/y),b>w){g-=l;break}w=b}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?mR(u,n,r,i,m?r+=p*g/m:s):n4(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const uke=function e(t){function n(r,i,s,o,a){ake(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(oke);function _xt(){var e=uke,t=!1,n=1,r=1,i=[0],s=h1,o=h1,a=h1,u=h1,l=h1;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(ske),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=tke(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:xw(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:xw(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:xw(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:xw(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:xw(+d),c):l},c}function wxt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var b=l[f],w=h/2+b,E=f+1,x=d-1;E<x;){var S=E+x>>>1;l[S]<w?E=S+1:x=S}w-l[E-1]<l[E]-w&&f+1<E&&--E;var C=l[E]-b,I=h-C;if(g-p>y-m){var k=h?(p*I+g*C)/h:g;c(f,E,C,p,m,k,y),c(E,d,I,k,m,g,y)}else{var R=h?(m*I+y*C)/h:y;c(f,E,C,p,m,g,R),c(E,d,I,p,R,g,y)}}}function Ext(e,t,n,r,i){(e.depth&1?n4:mR)(e,t,n,r,i)}const xxt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?mR(l,i,s,o,m?s+=(a-s)*l.value/m:a):n4(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=ake(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(oke);function Ed(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function av(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const cH=Symbol("implicit");function GS(){var e=new Ufe,t=[],n=[],r=cH;function i(s){let o=e.get(s);if(o===void 0){if(r!==cH)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Ufe;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return GS(t,n).unknown(r)},Ed.apply(i,arguments),i}function gR(){var e=GS().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=Vu(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return gR(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},Ed.apply(f(),arguments)}function Sxt(e){return function(){return e}}function fH(e){return+e}var ahe=[0,1];function Hu(e){return e}function dH(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Sxt(isNaN(t)?NaN:.5)}function Txt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Cxt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=dH(i,r),s=n(o,s)):(r=dH(r,i),s=n(s,o)),function(a){return s(r(a))}}function Axt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=dH(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=hy(e,a,1,r)-1;return s[u](i[u](a))}}function yR(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function r4(){var e=ahe,t=ahe,n=yg,r,i,s,o=Hu,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Hu&&(o=Txt(e[0],e[d-1])),a=d>2?Axt:Cxt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),Rc)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,fH),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=fR,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Hu,c()):o!==Hu},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function lke(){return r4()(Hu,Hu)}function cke(e,t,n,r){var i=py(e,t,n),s;switch(r=bb(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=fIe(i,o))&&(r.precision=s),VQ(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=dIe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=cIe(i))&&(r.precision=s-(r.type==="%")*2);break}}return qS(r)}function g_(e){var t=e.domain;return e.ticks=function(n){var r=t();return SV(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return cke(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=TV(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function Vm(){var e=lke();return e.copy=function(){return yR(e,Vm())},Ed.apply(e,arguments),g_(e)}function fke(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,fH),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return fke(e).unknown(t)},e=arguments.length?Array.from(e,fH):[0,1],g_(n)}function dke(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function uhe(e){return Math.log(e)}function lhe(e){return Math.exp(e)}function Ixt(e){return-Math.log(-e)}function kxt(e){return-Math.exp(-e)}function Rxt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Nxt(e){return e===10?Rxt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Dxt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function che(e){return(t,n)=>-e(-t,n)}function QQ(e){const t=e(uhe,lhe),n=t.domain;let r=10,i,s;function o(){return i=Dxt(r),s=Nxt(r),n()[0]<0?(i=che(i),s=che(s),e(Ixt,kxt)):e(uhe,lhe),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=SV(l,c,g))}else y=SV(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=bb(u)).precision==null&&(u.trim=!0),u=qS(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(dke(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function hke(){const e=QQ(r4()).domain([1,10]);return e.copy=()=>yR(e,hke()).base(e.base()),Ed.apply(e,arguments),e}function fhe(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function dhe(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function JQ(e){var t=1,n=e(fhe(t),dhe(t));return n.constant=function(r){return arguments.length?e(fhe(t=+r),dhe(t)):t},g_(n)}function pke(){var e=JQ(r4());return e.copy=function(){return yR(e,pke()).constant(e.constant())},Ed.apply(e,arguments)}function hhe(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Pxt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Oxt(e){return e<0?-e*e:e*e}function ZQ(e){var t=e(Hu,Hu),n=1;function r(){return n===1?e(Hu,Hu):n===.5?e(Pxt,Oxt):e(hhe(n),hhe(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},g_(t)}function eJ(){var e=ZQ(r4());return e.copy=function(){return yR(e,eJ()).exponent(e.exponent())},Ed.apply(e,arguments),e}function $xt(){return eJ.apply(null,arguments).exponent(.5)}function mke(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=l2e(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[hy(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(_m),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return mke().domain(e).range(t).unknown(r)},Ed.apply(s,arguments)}function gke(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[hy(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return gke().domain([e,t]).range(i).unknown(s)},Ed.apply(g_(o),arguments)}function yke(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[hy(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return yke().domain(e).range(t).unknown(n)},Ed.apply(i,arguments)}const v9=new Date,b9=new Date;function Ys(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>Ys(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(v9.setTime(+s),b9.setTime(+o),e(v9),e(b9),Math.floor(n(v9,b9))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const wx=Ys(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);wx.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ys(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):wx);wx.range;const cm=1e3,jc=cm*60,fm=jc*60,Hm=fm*24,tJ=Hm*7,phe=Hm*30,_9=Hm*365,dm=Ys(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*cm)},(e,t)=>(t-e)/cm,e=>e.getUTCSeconds());dm.range;const i4=Ys(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*cm)},(e,t)=>{e.setTime(+e+t*jc)},(e,t)=>(t-e)/jc,e=>e.getMinutes());i4.range;const s4=Ys(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*jc)},(e,t)=>(t-e)/jc,e=>e.getUTCMinutes());s4.range;const o4=Ys(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*cm-e.getMinutes()*jc)},(e,t)=>{e.setTime(+e+t*fm)},(e,t)=>(t-e)/fm,e=>e.getHours());o4.range;const a4=Ys(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*fm)},(e,t)=>(t-e)/fm,e=>e.getUTCHours());a4.range;const Em=Ys(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*jc)/Hm,e=>e.getDate()-1);Em.range;const q0=Ys(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Hm,e=>e.getUTCDate()-1);q0.range;const vke=Ys(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Hm,e=>Math.floor(e/Hm));vke.range;function y_(e){return Ys(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*jc)/tJ)}const YS=y_(0),qM=y_(1),Mxt=y_(2),Lxt=y_(3),Ex=y_(4),Fxt=y_(5),jxt=y_(6);YS.range;qM.range;Mxt.range;Lxt.range;Ex.range;Fxt.range;jxt.range;function v_(e){return Ys(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/tJ)}const KS=v_(0),WM=v_(1),Bxt=v_(2),Uxt=v_(3),xx=v_(4),zxt=v_(5),Vxt=v_(6);KS.range;WM.range;Bxt.range;Uxt.range;xx.range;zxt.range;Vxt.range;const MI=Ys(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());MI.range;const LI=Ys(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());LI.range;const Uh=Ys(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Uh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ys(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Uh.range;const zh=Ys(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());zh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ys(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});zh.range;function bke(e,t,n,r,i,s){const o=[[dm,1,cm],[dm,5,5*cm],[dm,15,15*cm],[dm,30,30*cm],[s,1,jc],[s,5,5*jc],[s,15,15*jc],[s,30,30*jc],[i,1,fm],[i,3,3*fm],[i,6,6*fm],[i,12,12*fm],[r,1,Hm],[r,2,2*Hm],[n,1,tJ],[t,1,phe],[t,3,3*phe],[e,1,_9]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=VS(([,,g])=>g).right(o,d);if(h===o.length)return e.every(py(l/_9,c/_9,f));if(h===0)return wx.every(Math.max(py(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[Hxt,qxt]=bke(zh,LI,KS,vke,a4,s4),[Wxt,Gxt]=bke(Uh,MI,YS,Em,o4,i4);function w9(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function E9(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function dC(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function _ke(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=hC(i),c=pC(i),f=hC(s),d=pC(s),h=hC(o),p=pC(o),m=hC(a),g=pC(a),y=hC(u),v=pC(u),b={a:B,A:U,b:V,B:D,c:null,d:_he,e:_he,f:gSt,g:CSt,G:ISt,H:hSt,I:pSt,j:mSt,L:wke,m:ySt,M:vSt,p:z,q:W,Q:xhe,s:She,S:bSt,u:_St,U:wSt,V:ESt,w:xSt,W:SSt,x:null,X:null,y:TSt,Y:ASt,Z:kSt,"%":Ehe},w={a:j,A:q,b:G,B:te,c:null,d:whe,e:whe,f:PSt,g:VSt,G:qSt,H:RSt,I:NSt,j:DSt,L:xke,m:OSt,M:$St,p:le,q:fe,Q:xhe,s:She,S:MSt,u:LSt,U:FSt,V:jSt,w:BSt,W:USt,x:null,X:null,y:zSt,Y:HSt,Z:WSt,"%":Ehe},E={a:k,A:R,b:O,B:P,c:$,d:vhe,e:vhe,f:lSt,g:yhe,G:ghe,H:bhe,I:bhe,j:sSt,L:uSt,m:iSt,M:oSt,p:I,q:rSt,Q:fSt,s:dSt,S:aSt,u:Jxt,U:Zxt,V:eSt,w:Qxt,W:tSt,x:L,X:M,y:yhe,Y:ghe,Z:nSt,"%":cSt};b.x=x(n,b),b.X=x(r,b),b.c=x(t,b),w.x=x(n,w),w.X=x(r,w),w.c=x(t,w);function x(de,ye){return function(Ie){var pe=[],qe=-1,Ue=0,vt=de.length,it,_e,ke;for(Ie instanceof Date||(Ie=new Date(+Ie));++qe<vt;)de.charCodeAt(qe)===37&&(pe.push(de.slice(Ue,qe)),(_e=mhe[it=de.charAt(++qe)])!=null?it=de.charAt(++qe):_e=it==="e"?" ":"0",(ke=ye[it])&&(it=ke(Ie,_e)),pe.push(it),Ue=qe+1);return pe.push(de.slice(Ue,qe)),pe.join("")}}function S(de,ye){return function(Ie){var pe=dC(1900,void 0,1),qe=C(pe,de,Ie+="",0),Ue,vt;if(qe!=Ie.length)return null;if("Q"in pe)return new Date(pe.Q);if("s"in pe)return new Date(pe.s*1e3+("L"in pe?pe.L:0));if(ye&&!("Z"in pe)&&(pe.Z=0),"p"in pe&&(pe.H=pe.H%12+pe.p*12),pe.m===void 0&&(pe.m="q"in pe?pe.q:0),"V"in pe){if(pe.V<1||pe.V>53)return null;"w"in pe||(pe.w=1),"Z"in pe?(Ue=E9(dC(pe.y,0,1)),vt=Ue.getUTCDay(),Ue=vt>4||vt===0?WM.ceil(Ue):WM(Ue),Ue=q0.offset(Ue,(pe.V-1)*7),pe.y=Ue.getUTCFullYear(),pe.m=Ue.getUTCMonth(),pe.d=Ue.getUTCDate()+(pe.w+6)%7):(Ue=w9(dC(pe.y,0,1)),vt=Ue.getDay(),Ue=vt>4||vt===0?qM.ceil(Ue):qM(Ue),Ue=Em.offset(Ue,(pe.V-1)*7),pe.y=Ue.getFullYear(),pe.m=Ue.getMonth(),pe.d=Ue.getDate()+(pe.w+6)%7)}else("W"in pe||"U"in pe)&&("w"in pe||(pe.w="u"in pe?pe.u%7:"W"in pe?1:0),vt="Z"in pe?E9(dC(pe.y,0,1)).getUTCDay():w9(dC(pe.y,0,1)).getDay(),pe.m=0,pe.d="W"in pe?(pe.w+6)%7+pe.W*7-(vt+5)%7:pe.w+pe.U*7-(vt+6)%7);return"Z"in pe?(pe.H+=pe.Z/100|0,pe.M+=pe.Z%100,E9(pe)):w9(pe)}}function C(de,ye,Ie,pe){for(var qe=0,Ue=ye.length,vt=Ie.length,it,_e;qe<Ue;){if(pe>=vt)return-1;if(it=ye.charCodeAt(qe++),it===37){if(it=ye.charAt(qe++),_e=E[it in mhe?ye.charAt(qe++):it],!_e||(pe=_e(de,Ie,pe))<0)return-1}else if(it!=Ie.charCodeAt(pe++))return-1}return pe}function I(de,ye,Ie){var pe=l.exec(ye.slice(Ie));return pe?(de.p=c.get(pe[0].toLowerCase()),Ie+pe[0].length):-1}function k(de,ye,Ie){var pe=h.exec(ye.slice(Ie));return pe?(de.w=p.get(pe[0].toLowerCase()),Ie+pe[0].length):-1}function R(de,ye,Ie){var pe=f.exec(ye.slice(Ie));return pe?(de.w=d.get(pe[0].toLowerCase()),Ie+pe[0].length):-1}function O(de,ye,Ie){var pe=y.exec(ye.slice(Ie));return pe?(de.m=v.get(pe[0].toLowerCase()),Ie+pe[0].length):-1}function P(de,ye,Ie){var pe=m.exec(ye.slice(Ie));return pe?(de.m=g.get(pe[0].toLowerCase()),Ie+pe[0].length):-1}function $(de,ye,Ie){return C(de,t,ye,Ie)}function L(de,ye,Ie){return C(de,n,ye,Ie)}function M(de,ye,Ie){return C(de,r,ye,Ie)}function B(de){return o[de.getDay()]}function U(de){return s[de.getDay()]}function V(de){return u[de.getMonth()]}function D(de){return a[de.getMonth()]}function z(de){return i[+(de.getHours()>=12)]}function W(de){return 1+~~(de.getMonth()/3)}function j(de){return o[de.getUTCDay()]}function q(de){return s[de.getUTCDay()]}function G(de){return u[de.getUTCMonth()]}function te(de){return a[de.getUTCMonth()]}function le(de){return i[+(de.getUTCHours()>=12)]}function fe(de){return 1+~~(de.getUTCMonth()/3)}return{format:function(de){var ye=x(de+="",b);return ye.toString=function(){return de},ye},parse:function(de){var ye=S(de+="",!1);return ye.toString=function(){return de},ye},utcFormat:function(de){var ye=x(de+="",w);return ye.toString=function(){return de},ye},utcParse:function(de){var ye=S(de+="",!0);return ye.toString=function(){return de},ye}}}var mhe={"-":"",_:" ",0:"0"},Eo=/^\s*\d+/,Yxt=/^%/,Kxt=/[\\^$*+?|[\]().{}]/g;function br(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function Xxt(e){return e.replace(Kxt,"\\$&")}function hC(e){return new RegExp("^(?:"+e.map(Xxt).join("|")+")","i")}function pC(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Qxt(e,t,n){var r=Eo.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Jxt(e,t,n){var r=Eo.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Zxt(e,t,n){var r=Eo.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function eSt(e,t,n){var r=Eo.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function tSt(e,t,n){var r=Eo.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function ghe(e,t,n){var r=Eo.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function yhe(e,t,n){var r=Eo.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function nSt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function rSt(e,t,n){var r=Eo.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function iSt(e,t,n){var r=Eo.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function vhe(e,t,n){var r=Eo.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function sSt(e,t,n){var r=Eo.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function bhe(e,t,n){var r=Eo.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function oSt(e,t,n){var r=Eo.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function aSt(e,t,n){var r=Eo.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function uSt(e,t,n){var r=Eo.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function lSt(e,t,n){var r=Eo.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function cSt(e,t,n){var r=Yxt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function fSt(e,t,n){var r=Eo.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function dSt(e,t,n){var r=Eo.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function _he(e,t){return br(e.getDate(),t,2)}function hSt(e,t){return br(e.getHours(),t,2)}function pSt(e,t){return br(e.getHours()%12||12,t,2)}function mSt(e,t){return br(1+Em.count(Uh(e),e),t,3)}function wke(e,t){return br(e.getMilliseconds(),t,3)}function gSt(e,t){return wke(e,t)+"000"}function ySt(e,t){return br(e.getMonth()+1,t,2)}function vSt(e,t){return br(e.getMinutes(),t,2)}function bSt(e,t){return br(e.getSeconds(),t,2)}function _St(e){var t=e.getDay();return t===0?7:t}function wSt(e,t){return br(YS.count(Uh(e)-1,e),t,2)}function Eke(e){var t=e.getDay();return t>=4||t===0?Ex(e):Ex.ceil(e)}function ESt(e,t){return e=Eke(e),br(Ex.count(Uh(e),e)+(Uh(e).getDay()===4),t,2)}function xSt(e){return e.getDay()}function SSt(e,t){return br(qM.count(Uh(e)-1,e),t,2)}function TSt(e,t){return br(e.getFullYear()%100,t,2)}function CSt(e,t){return e=Eke(e),br(e.getFullYear()%100,t,2)}function ASt(e,t){return br(e.getFullYear()%1e4,t,4)}function ISt(e,t){var n=e.getDay();return e=n>=4||n===0?Ex(e):Ex.ceil(e),br(e.getFullYear()%1e4,t,4)}function kSt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+br(t/60|0,"0",2)+br(t%60,"0",2)}function whe(e,t){return br(e.getUTCDate(),t,2)}function RSt(e,t){return br(e.getUTCHours(),t,2)}function NSt(e,t){return br(e.getUTCHours()%12||12,t,2)}function DSt(e,t){return br(1+q0.count(zh(e),e),t,3)}function xke(e,t){return br(e.getUTCMilliseconds(),t,3)}function PSt(e,t){return xke(e,t)+"000"}function OSt(e,t){return br(e.getUTCMonth()+1,t,2)}function $St(e,t){return br(e.getUTCMinutes(),t,2)}function MSt(e,t){return br(e.getUTCSeconds(),t,2)}function LSt(e){var t=e.getUTCDay();return t===0?7:t}function FSt(e,t){return br(KS.count(zh(e)-1,e),t,2)}function Ske(e){var t=e.getUTCDay();return t>=4||t===0?xx(e):xx.ceil(e)}function jSt(e,t){return e=Ske(e),br(xx.count(zh(e),e)+(zh(e).getUTCDay()===4),t,2)}function BSt(e){return e.getUTCDay()}function USt(e,t){return br(WM.count(zh(e)-1,e),t,2)}function zSt(e,t){return br(e.getUTCFullYear()%100,t,2)}function VSt(e,t){return e=Ske(e),br(e.getUTCFullYear()%100,t,2)}function HSt(e,t){return br(e.getUTCFullYear()%1e4,t,4)}function qSt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?xx(e):xx.ceil(e),br(e.getUTCFullYear()%1e4,t,4)}function WSt(){return"+0000"}function Ehe(){return"%"}function xhe(e){return+e}function She(e){return Math.floor(+e/1e3)}var rw,nJ,Tke,u4,Cke;GSt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function GSt(e){return rw=_ke(e),nJ=rw.format,Tke=rw.parse,u4=rw.utcFormat,Cke=rw.utcParse,rw}function YSt(e){return new Date(e)}function KSt(e){return e instanceof Date?+e:+new Date(+e)}function rJ(e,t,n,r,i,s,o,a,u,l){var c=lke(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),w=l("%Y");function E(x){return(u(x)<x?h:a(x)<x?p:o(x)<x?m:s(x)<x?g:r(x)<x?i(x)<x?y:v:n(x)<x?b:w)(x)}return c.invert=function(x){return new Date(f(x))},c.domain=function(x){return arguments.length?d(Array.from(x,KSt)):d().map(YSt)},c.ticks=function(x){var S=d();return e(S[0],S[S.length-1],x??10)},c.tickFormat=function(x,S){return S==null?E:l(S)},c.nice=function(x){var S=d();return(!x||typeof x.range!="function")&&(x=t(S[0],S[S.length-1],x??10)),x?d(dke(S,x)):c},c.copy=function(){return yR(c,rJ(e,t,n,r,i,s,o,a,u,l))},c}function Ake(){return Ed.apply(rJ(Wxt,Gxt,Uh,MI,YS,Em,o4,i4,dm,nJ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function XSt(){return Ed.apply(rJ(Hxt,qxt,zh,LI,KS,q0,a4,s4,dm,u4).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function l4(){var e=0,t=1,n,r,i,s,o=Hu,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(yg),l.rangeRound=c(fR),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function uv(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function iJ(){var e=g_(l4()(Hu));return e.copy=function(){return uv(e,iJ())},av.apply(e,arguments)}function Ike(){var e=QQ(l4()).domain([1,10]);return e.copy=function(){return uv(e,Ike()).base(e.base())},av.apply(e,arguments)}function kke(){var e=JQ(l4());return e.copy=function(){return uv(e,kke()).constant(e.constant())},av.apply(e,arguments)}function sJ(){var e=ZQ(l4());return e.copy=function(){return uv(e,sJ()).exponent(e.exponent())},av.apply(e,arguments)}function QSt(){return sJ.apply(null,arguments).exponent(.5)}function c4(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Hu,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,b;return arguments.length?([y,v,b]=g,l=PQ(m,[y,v,b]),h):[l(0),l(.5),l(1)]}}return h.range=p(yg),h.rangeRound=p(fR),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function Rke(){var e=g_(c4()(Hu));return e.copy=function(){return uv(e,Rke())},av.apply(e,arguments)}function Nke(){var e=QQ(c4()).domain([.1,1,10]);return e.copy=function(){return uv(e,Nke()).base(e.base())},av.apply(e,arguments)}function Dke(){var e=JQ(c4());return e.copy=function(){return uv(e,Dke()).constant(e.constant())},av.apply(e,arguments)}function oJ(){var e=ZQ(c4());return e.copy=function(){return uv(e,oJ()).exponent(e.exponent())},av.apply(e,arguments)}function JSt(){return oJ.apply(null,arguments).exponent(.5)}function xd(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const ZSt=xd("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),eTt=xd("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),tTt=xd("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),nTt=xd("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),rTt=xd("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),iTt=xd("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),sTt=xd("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),oTt=xd("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),aTt=xd("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),uTt=xd("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Pke=xd("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function Tn(e){return function(){return e}}const The=Math.abs,la=Math.atan2,Ov=Math.cos,lTt=Math.max,x9=Math.min,Ld=Math.sin,D1=Math.sqrt,da=1e-12,Sx=Math.PI,GM=Sx/2,c2=2*Sx;function cTt(e){return e>1?0:e<-1?Sx:Math.acos(e)}function Che(e){return e>=1?GM:e<=-1?-GM:Math.asin(e)}function f4(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new FQ(t)}function fTt(e){return e.innerRadius}function dTt(e){return e.outerRadius}function hTt(e){return e.startAngle}function pTt(e){return e.endAngle}function mTt(e){return e&&e.padAngle}function gTt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<da))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function UD(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/D1(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,b=m-h,w=v*v+b*b,E=i-s,x=d*m-p*h,S=(b<0?-1:1)*D1(lTt(0,E*E*w-x*x)),C=(x*b-v*S)/w,I=(-x*v-b*S)/w,k=(x*b+v*S)/w,R=(-x*v+b*S)/w,O=C-g,P=I-y,$=k-g,L=R-y;return O*O+P*P>$*$+L*L&&(C=k,I=R),{cx:C,cy:I,x01:-c,y01:-f,x11:C*(i/E-1),y11:I*(i/E-1)}}function hH(){var e=fTt,t=dTt,n=Tn(0),r=null,i=hTt,s=pTt,o=mTt,a=null,u=f4(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-GM,m=s.apply(this,arguments)-GM,g=The(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>da))a.moveTo(0,0);else if(g>c2-da)a.moveTo(h*Ov(p),h*Ld(p)),a.arc(0,0,h,p,m,!y),d>da&&(a.moveTo(d*Ov(m),d*Ld(m)),a.arc(0,0,d,m,p,y));else{var v=p,b=m,w=p,E=m,x=g,S=g,C=o.apply(this,arguments)/2,I=C>da&&(r?+r.apply(this,arguments):D1(d*d+h*h)),k=x9(The(h-d)/2,+n.apply(this,arguments)),R=k,O=k,P,$;if(I>da){var L=Che(I/d*Ld(C)),M=Che(I/h*Ld(C));(x-=L*2)>da?(L*=y?1:-1,w+=L,E-=L):(x=0,w=E=(p+m)/2),(S-=M*2)>da?(M*=y?1:-1,v+=M,b-=M):(S=0,v=b=(p+m)/2)}var B=h*Ov(v),U=h*Ld(v),V=d*Ov(E),D=d*Ld(E);if(k>da){var z=h*Ov(b),W=h*Ld(b),j=d*Ov(w),q=d*Ld(w),G;if(g<Sx)if(G=gTt(B,U,j,q,z,W,V,D)){var te=B-G[0],le=U-G[1],fe=z-G[0],de=W-G[1],ye=1/Ld(cTt((te*fe+le*de)/(D1(te*te+le*le)*D1(fe*fe+de*de)))/2),Ie=D1(G[0]*G[0]+G[1]*G[1]);R=x9(k,(d-Ie)/(ye-1)),O=x9(k,(h-Ie)/(ye+1))}else R=O=0}S>da?O>da?(P=UD(j,q,B,U,h,O,y),$=UD(z,W,V,D,h,O,y),a.moveTo(P.cx+P.x01,P.cy+P.y01),O<k?a.arc(P.cx,P.cy,O,la(P.y01,P.x01),la($.y01,$.x01),!y):(a.arc(P.cx,P.cy,O,la(P.y01,P.x01),la(P.y11,P.x11),!y),a.arc(0,0,h,la(P.cy+P.y11,P.cx+P.x11),la($.cy+$.y11,$.cx+$.x11),!y),a.arc($.cx,$.cy,O,la($.y11,$.x11),la($.y01,$.x01),!y))):(a.moveTo(B,U),a.arc(0,0,h,v,b,!y)):a.moveTo(B,U),!(d>da)||!(x>da)?a.lineTo(V,D):R>da?(P=UD(V,D,z,W,d,-R,y),$=UD(B,U,j,q,d,-R,y),a.lineTo(P.cx+P.x01,P.cy+P.y01),R<k?a.arc(P.cx,P.cy,R,la(P.y01,P.x01),la($.y01,$.x01),!y):(a.arc(P.cx,P.cy,R,la(P.y01,P.x01),la(P.y11,P.x11),!y),a.arc(0,0,d,la(P.cy+P.y11,P.cx+P.x11),la($.cy+$.y11,$.cx+$.x11),y),a.arc($.cx,$.cy,R,la($.y11,$.x11),la($.y01,$.x01),!y))):a.arc(0,0,d,E,w,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-Sx/2;return[Ov(f)*c,Ld(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Tn(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Tn(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Tn(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Tn(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Tn(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Tn(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Tn(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function d4(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Oke(e){this._context=e}Oke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function aJ(e){return new Oke(e)}function $ke(e){return e[0]}function Mke(e){return e[1]}function Lke(e,t){var n=Tn(!0),r=null,i=aJ,s=null,o=f4(a);e=typeof e=="function"?e:e===void 0?$ke:Tn(e),t=typeof t=="function"?t:t===void 0?Mke:Tn(t);function a(u){var l,c=(u=d4(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:Tn(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:Tn(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Tn(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function Fke(e,t,n){var r=null,i=Tn(!0),s=null,o=aJ,a=null,u=f4(l);e=typeof e=="function"?e:e===void 0?$ke:Tn(+e),t=typeof t=="function"?t:Tn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Mke:Tn(+n);function l(f){var d,h,p,m=(f=d4(f)).length,g,y=!1,v,b=new Array(m),w=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(g,d,f),w[d]=+t(g,d,f),a.point(r?+r(g,d,f):b[d],n?+n(g,d,f):w[d]))}if(v)return a=null,v+""||null}function c(){return Lke().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:Tn(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Tn(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Tn(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:Tn(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Tn(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Tn(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Tn(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function yTt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function vTt(e){return e}function bTt(){var e=vTt,t=yTt,n=null,r=Tn(0),i=Tn(c2),s=Tn(0);function o(a){var u,l=(a=d4(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(c2,Math.max(-c2,i.apply(this,arguments)-m)),y,v=Math.min(Math.abs(g)/l,s.apply(this,arguments)),b=v*(g<0?-1:1),w;for(u=0;u<l;++u)(w=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=w);for(t!=null?h.sort(function(E,x){return t(p[E],p[x])}):n!=null&&h.sort(function(E,x){return n(a[E],a[x])}),u=0,f=d?(g-l*b)/d:0;u<l;++u,m=y)c=h[u],w=p[c],y=m+(w>0?w*f:0)+b,p[c]={data:a[c],index:u,value:w,startAngle:m,endAngle:y,padAngle:v};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:Tn(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:Tn(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:Tn(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:Tn(+a),o):s},o}const _Tt={draw(e,t){const n=D1(t/Sx);e.moveTo(n,0),e.arc(0,0,n,0,c2)}};function wTt(e,t){let n=null,r=f4(i);e=typeof e=="function"?e:Tn(e||_Tt),t=typeof t=="function"?t:Tn(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Tn(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Tn(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function gy(){}function YM(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function h4(e){this._context=e}h4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:YM(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:YM(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ETt(e){return new h4(e)}function jke(e){this._context=e}jke.prototype={areaStart:gy,areaEnd:gy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:YM(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function xTt(e){return new jke(e)}function Bke(e){this._context=e}Bke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:YM(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function STt(e){return new Bke(e)}function Uke(e,t){this._basis=new h4(e),this._beta=t}Uke.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const TTt=function e(t){function n(r){return t===1?new h4(r):new Uke(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function KM(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function uJ(e,t){this._context=e,this._k=(1-t)/6}uJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:KM(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:KM(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const CTt=function e(t){function n(r){return new uJ(r,t)}return n.tension=function(r){return e(+r)},n}(0);function lJ(e,t){this._context=e,this._k=(1-t)/6}lJ.prototype={areaStart:gy,areaEnd:gy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:KM(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ATt=function e(t){function n(r){return new lJ(r,t)}return n.tension=function(r){return e(+r)},n}(0);function cJ(e,t){this._context=e,this._k=(1-t)/6}cJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:KM(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ITt=function e(t){function n(r){return new cJ(r,t)}return n.tension=function(r){return e(+r)},n}(0);function fJ(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>da){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>da){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function zke(e,t){this._context=e,this._alpha=t}zke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:fJ(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const kTt=function e(t){function n(r){return t?new zke(r,t):new uJ(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Vke(e,t){this._context=e,this._alpha=t}Vke.prototype={areaStart:gy,areaEnd:gy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:fJ(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const RTt=function e(t){function n(r){return t?new Vke(r,t):new lJ(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Hke(e,t){this._context=e,this._alpha=t}Hke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:fJ(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const NTt=function e(t){function n(r){return t?new Hke(r,t):new cJ(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function qke(e){this._context=e}qke.prototype={areaStart:gy,areaEnd:gy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function DTt(e){return new qke(e)}function Ahe(e){return e<0?-1:1}function Ihe(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Ahe(s)+Ahe(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function khe(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function S9(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function XM(e){this._context=e}XM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:S9(this,this._t0,khe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,S9(this,khe(this,n=Ihe(this,e,t)),n);break;default:S9(this,this._t0,n=Ihe(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Wke(e){this._context=new Gke(e)}(Wke.prototype=Object.create(XM.prototype)).point=function(e,t){XM.prototype.point.call(this,t,e)};function Gke(e){this._context=e}Gke.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function PTt(e){return new XM(e)}function OTt(e){return new Wke(e)}function Yke(e){this._context=e}Yke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Rhe(e),i=Rhe(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Rhe(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function $Tt(e){return new Yke(e)}function p4(e,t){this._context=e,this._t=t}p4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function MTt(e){return new p4(e,.5)}function LTt(e){return new p4(e,0)}function FTt(e){return new p4(e,1)}function Nhe(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Dhe(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function jTt(e,t){return e[t]}function BTt(e){const t=[];return t.key=e,t}function UTt(){var e=Tn([]),t=Dhe,n=Nhe,r=jTt;function i(s){var o=Array.from(e.apply(this,arguments),BTt),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=d4(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Tn(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:Tn(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?Dhe:typeof s=="function"?s:Tn(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??Nhe,i):n},i}function lA(e,t,n){this.k=e,this.x=t,this.y=n}lA.prototype={constructor:lA,scale:function(e){return e===1?this:new lA(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new lA(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};lA.prototype;function dJ({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=A.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=A.useCallback(c=>(s?u4("%B"):qS(".2s"))(c),[s]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:_.jsx(Kc,{children:_.jsx(Rs,{gap:3,children:_.jsx(ze,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?_.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>_.jsxs("g",{transform:`translate(${f}, ${n})`,children:[_.jsx("line",{y2:"6",stroke:"currentColor"}),o?_.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,_.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:_.jsx(Kc,{children:_.jsx(Ii,{withinPortal:!0,label:c,children:_.jsx(ze,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const zTt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:dJ},Symbol.toStringTag,{value:"Module"}));function Kke({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=A.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(Kc,{children:_.jsx(Rs,{gap:3,children:_.jsx(ze,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>_.jsxs("g",{transform:`translate(${n}, ${l})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),s?_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,_.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:_.jsx("foreignObject",{width:a,height:20,children:_.jsx(Rs,{style:{width:"100%",height:"100%"},justify:"right",children:_.jsx(ze,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const VTt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:Kke},Symbol.toStringTag,{value:"Module"})),yc={top:15,left:100,right:50,bottom:50};function pH({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=W1(),o=A.useMemo(()=>s-yc.left-yc.right,[s]),a=A.useMemo(()=>i-yc.top-yc.bottom,[i]),u=A.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return GS(Pke).domain(d)},[n,t.category]),l=A.useMemo(()=>e?Vm([yc.left,o+yc.left]).domain([0,H0(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=A.useMemo(()=>e?gR([yc.top,a+yc.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=A.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:_.jsxs("g",{children:[_.jsx("rect",{x:yc.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-yc.left},h),_.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?_.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_.jsx(dJ,{xScale:l,yRange:c.range(),vertPosition:a+yc.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?_.jsx(Kke,{yScale:c,horizontalPosition:yc.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):_.jsx(op,{})}const HTt=Object.freeze(Object.defineProperty({__proto__:null,Bar:pH,default:pH},Symbol.toStringTag,{value:"Module"})),gr=Array.isArray;function ol(e){return e!=null?gr(e)?e:[e]:[]}function qTt(e=0,t=1/0){return`${Phe(e)} < row_number() && row_number() <= ${Phe(t)}`}function Phe(e){return e<0?`count() + ${e}`:e}class Xke{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(qTt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,ol(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function Cn(e){throw Error(e)}function lu(e){return typeof e=="number"}function bi(e){return typeof e=="function"}function m4(e,t){const n=Array(e);if(bi(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let WTt=class extends Xke{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){Cn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){Cn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){Cn("Not implemented")}getter(t){Cn("Not implemented")}objects(t){Cn("Not implemented")}object(t){Cn("Not implemented")}[Symbol.iterator](){Cn("Not implemented")}print(t={}){lu(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=m4(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},GTt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},YTt=function(e){return e&&bi(e.get)?e:new GTt(e)};function qm(e){return e instanceof Date}function ka(e){return e===Object(e)}function QM(e){return e instanceof RegExp}function Xo(e){return typeof e=="string"}function KTt(e,t){const n=r=>Cn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?Ohe(e.entries(),t):qm(e)?n("Date"):QM(e)?n("RegExp"):Xo(e)?n():gr(e)?XTt(e,t):bi(e[Symbol.iterator])?QTt(e,t):ka(e)?Ohe(Object.entries(e),t):n()}function Ohe(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function XTt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function QTt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:JTt}=Object.prototype;function cd(e,t){return JTt.call(e,t)}function dc(e){return e?new $he({...e.data()},e.columnNames()):new $he}class $he{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return cd(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const fr=void 0,ZTt=Object.getPrototypeOf(Int8Array);function vR(e){return e instanceof ZTt}function P1(e){return gr(e)||vR(e)}function Yf(e){return e!=null&&e===e}const mC=e=>P1(e)||Xo(e),eCt={compact:e=>P1(e)?e.filter(t=>Yf(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>mC(e)?e.includes(t,n):!1,indexof:(e,t)=>mC(e)?e.indexOf(t):-1,join:(e,t)=>P1(e)?e.join(t):fr,lastindexof:(e,t)=>mC(e)?e.lastIndexOf(t):-1,length:e=>mC(e)?e.length:0,pluck:(e,t)=>P1(e)?e.map(n=>Yf(n)?n[t]:fr):fr,reverse:e=>P1(e)?e.slice().reverse():Xo(e)?e.split("").reverse().join(""):fr,slice:(e,t,n)=>mC(e)?e.slice(t,n):fr};function tCt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function mO(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const Fd=e=>(e<10?"0":"")+e,nCt=e=>e<0?"-"+mO(-e,6):e>9999?"+"+mO(e,6):mO(e,4);function Qke(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return nCt(e)+"-"+Fd(t+1)+"-"+Fd(n)+(!u||o?"T"+Fd(r)+":"+Fd(i)+":"+Fd(s)+"."+mO(o,3)+l:s?"T"+Fd(r)+":"+Fd(i)+":"+Fd(s)+l:i||r||!a?"T"+Fd(r)+":"+Fd(i)+l:"")}function Jke(e,t){return isNaN(e)?"Invalid Date":Qke(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function g4(e,t){return isNaN(e)?"Invalid Date":Qke(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const rCt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function iCt(e){return e.match(rCt)&&!isNaN(Date.parse(e))}function sCt(e,t=Date.parse){return iCt(e)?t(e):e}const Zke=6e4,eRe=864e5,tRe=6048e5,Ki=new Date,Xi=new Date,ss=e=>(Ki.setTime(typeof e=="string"?sCt(e):e),Ki);function oCt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function aCt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function uCt(e){Xi.setTime(+e),Xi.setHours(0,0,0,0),Ki.setTime(+Xi),Ki.setMonth(0),Ki.setDate(1);const t=(Xi.getTimezoneOffset()-Ki.getTimezoneOffset())*Zke;return Math.floor(1+(Xi-Ki-t)/eRe)}function lCt(e){Xi.setTime(+e),Xi.setUTCHours(0,0,0,0);const t=Date.UTC(Xi.getUTCFullYear(),0,1);return Math.floor(1+(Xi-t)/eRe)}function cCt(e,t){const n=t||0;Xi.setTime(+e),Xi.setDate(Xi.getDate()-(Xi.getDay()+7-n)%7),Xi.setHours(0,0,0,0),Ki.setTime(+e),Ki.setMonth(0),Ki.setDate(1),Ki.setDate(1-(Ki.getDay()+7-n)%7),Ki.setHours(0,0,0,0);const r=(Xi.getTimezoneOffset()-Ki.getTimezoneOffset())*Zke;return Math.floor((1+(Xi-Ki)-r)/tRe)}function fCt(e,t){const n=t||0;return Xi.setTime(+e),Xi.setUTCDate(Xi.getUTCDate()-(Xi.getUTCDay()+7-n)%7),Xi.setUTCHours(0,0,0,0),Ki.setTime(+e),Ki.setUTCMonth(0),Ki.setUTCDate(1),Ki.setUTCDate(1-(Ki.getUTCDay()+7-n)%7),Ki.setUTCHours(0,0,0,0),Math.floor((1+(Xi-Ki))/tRe)}const dCt={format_date:(e,t)=>Jke(ss(e),!t),format_utcdate:(e,t)=>g4(ss(e),!t),timestamp:e=>+ss(e),year:e=>ss(e).getFullYear(),quarter:e=>Math.floor(ss(e).getMonth()/3),month:e=>ss(e).getMonth(),date:e=>ss(e).getDate(),dayofweek:e=>ss(e).getDay(),hours:e=>ss(e).getHours(),minutes:e=>ss(e).getMinutes(),seconds:e=>ss(e).getSeconds(),milliseconds:e=>ss(e).getMilliseconds(),utcyear:e=>ss(e).getUTCFullYear(),utcquarter:e=>Math.floor(ss(e).getUTCMonth()/3),utcmonth:e=>ss(e).getUTCMonth(),utcdate:e=>ss(e).getUTCDate(),utcdayofweek:e=>ss(e).getUTCDay(),utchours:e=>ss(e).getUTCHours(),utcminutes:e=>ss(e).getUTCMinutes(),utcseconds:e=>ss(e).getUTCSeconds(),utcmilliseconds:e=>ss(e).getUTCMilliseconds(),datetime:oCt,dayofyear:uCt,week:cCt,utcdatetime:aCt,utcdayofyear:lCt,utcweek:fCt,now:Date.now};function hJ(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:qm(e)||qm(t)?+e==+t:QM(e)&&QM(t)?e+""==t+"":ka(e)&&ka(t)?hCt(e,t):!1}function hCt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return Mhe(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!Mhe(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!hJ(e[o],t[o]))return!1}return!0}function Mhe(e,t,n=hJ){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const pCt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let mCt=Math.random;function XS(){return mCt()}const gCt={random:XS,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function pJ(e){return e instanceof Map}function yCt(e){return e instanceof Set}function gO(e){return pJ(e)||yCt(e)}function T9(e){return Array.from(e)}const vCt={has:(e,t)=>gO(e)?e.has(t):e!=null?cd(e,t):!1,keys:e=>pJ(e)?T9(e.keys()):e!=null?Object.keys(e):[],values:e=>gO(e)?T9(e.values()):e!=null?Object.values(e):[],entries:e=>gO(e)?T9(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):fr};function bCt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(cd(t,e))return t[e];return n!==void 0?n:e}function _Ct(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const wCt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},Qw={bin:tCt,equal:hJ,recode:bCt,sequence:_Ct,...eCt,...dCt,...pCt,...gCt,...vCt,...wCt};function FI(e){return typeof e=="bigint"}function Vh(e){return e===void 0?e+"":FI(e)?e+"n":JSON.stringify(e)}function wn(e,t=[],n=[]){return new ECt(e,ol(t),ol(n))}let ECt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${Vh(n)}]`),...this.params.map(Vh)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const nRe=e=>wn("any",e),rRe=()=>wn("count"),iRe=e=>wn("array_agg",e),sRe=e=>wn("array_agg_distinct",e),oRe=(e,t)=>wn("map_agg",[e,t]),aRe=(e,t)=>wn("object_agg",[e,t]),uRe=(e,t)=>wn("entries_agg",[e,t]);({...Qw});function xCt(e,t){e=gO(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function SCt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function TCt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function CCt(e,t,n,r){const i=r==="map"||r===!0?oRe:r==="entries"?uRe:r==="object"?aRe:Cn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=xCt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:iRe(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const ACt="ArrayPattern",ICt="ArrowFunctionExpression",kCt="FunctionExpression",W0="Identifier",QS="Literal",lRe="MemberExpression",RCt="ObjectExpression",cRe="ObjectPattern",fRe="Property",bR="Column",NCt="Constant",DCt="Dictionary",PCt="Function",OCt="Parameter",dRe="Op",ii=(e,t)=>{const n=$Ct[e.type];return n?n(e,t):Cn(`Unsupported expression construct: ${e.type}`)},C9=(e,t)=>"("+ii(e.left,t)+" "+e.operator+" "+ii(e.right,t)+")",A9=(e,t)=>"("+Gd(e.params,t)+")=>"+ii(e.body,t),Lhe=(e,t)=>ii(e.callee,t)+"("+Gd(e.arguments,t)+")",Gd=(e,t,n=",")=>e.map(r=>ii(r,t)).join(n),hRe=e=>e.computed?`[${Vh(e.name)}]`:`.${e.name}`,Fhe=(e,t,n)=>{const r=e.table||"";return`data${r}${hRe(e)}.${n}(${t.index}${r})`},$Ct={Constant:e=>e.raw,Column:(e,t)=>Fhe(e,t,"get"),Dictionary:(e,t)=>Fhe(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${hRe(e)}`,Op:(e,t)=>`op(${Vh(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+ii(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=ii(e.object,t),i=ii(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:Lhe,NewExpression:(e,t)=>"new "+Lhe(e,t),ArrayExpression:(e,t)=>"["+Gd(e.elements,t)+"]",AssignmentExpression:C9,BinaryExpression:C9,LogicalExpression:C9,UnaryExpression:(e,t)=>"("+e.operator+ii(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+ii(e.test,t)+"?"+ii(e.consequent,t)+":"+ii(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Gd(e.properties,t)+"})",Property:(e,t)=>{const n=ii(e.key,t);return(e.computed?`[${n}]`:n)+":"+ii(e.value,t)},ArrowFunctionExpression:A9,FunctionExpression:A9,FunctionDeclaration:A9,ArrayPattern:(e,t)=>"["+Gd(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Gd(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Gd(e.declarations,t,","),VariableDeclarator:(e,t)=>ii(e.id,t)+"="+ii(e.init,t),SpreadElement:(e,t)=>"..."+ii(e.argument,t),BlockStatement:(e,t)=>"{"+Gd(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>ii(e.expression,t),IfStatement:(e,t)=>"if ("+ii(e.test,t)+")"+ii(e.consequent,t)+(e.alternate?" else "+ii(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+ii(e.discriminant,t)+") {"+Gd(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+ii(e.test,t):"default")+": "+Gd(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+ii(e.argument,t),Program:(e,t)=>ii(e.body[0],t)};function JM(e,t={index:"row"}){return ii(e,t)}function MCt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function Tx(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:qm(e)?+e:gr(e)||vR(e)?`[${e.map(Tx)}]`:QM(e)?e+"":LCt(e)}function LCt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${Tx(e[r])}`;return t+="}",t}function ZM(e,t){const n=e.length;return n===1?(r,i)=>Tx(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=Tx(a)}return s}}function FCt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=Tx(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=Tx(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function Xp(){}function jCt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function Ps(e){return e.init=e.init||Xp,e.add=e.add||Xp,e.rem=e.rem||Xp,e}function jhe(e,t){return e.product_v=!1,e.product=t}const pRe={count:{create:()=>Ps({value:e=>e.count}),param:[]},array_agg:{create:()=>Ps({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>Ps({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>Ps({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>Ps({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>Ps({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:fr}),param:[1]},valid:{create:()=>Ps({value:e=>e.valid}),param:[1]},invalid:{create:()=>Ps({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=FCt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>Ps({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>Ps({value:e=>{let t=fr,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:fr,add:(e,t)=>FI(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>jhe(e,1),value:e=>e.valid?e.product_v?jhe(e,jCt(e.list.values())):e.product:void 0,add:(e,t)=>FI(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:fr,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>Ps({value:e=>e.valid?e.mean:fr}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):fr,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>Ps({value:e=>e.valid>1?e.dev/e.valid:fr}),param:[1],req:["variance"]},stdev:{create:()=>Ps({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):fr}),param:[1],req:["variance"]},stdevp:{create:()=>Ps({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):fr}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=fr,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===fr)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=fr,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===fr)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>Ps({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>Ps({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):fr,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>Ps({value:e=>e.valid>1?e.cov/e.valid:fr}),param:[2],req:["covariance"]},corr:{create:()=>Ps({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):fr}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>Ps({value:i=>MCt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},Bhe={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},Uhe={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},mRe={row_number:{create(){return{init:Xp,value:e=>e.index+1}},param:[]},rank:Bhe,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=Bhe.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:Uhe,ntile:{create(e){e=+e,e>0||Cn("ntile num must be greater than zero.");const{init:t,value:n}=Uhe.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=fr){return e=+e||1,{init:Xp,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=fr){return e=+e||1,{init:Xp,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:Xp,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:Xp,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||Cn("nth_value nth must be greater than zero."),{init:Xp,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):fr}}},param:[1,1]},fill_down:{create(e=fr){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return Yf(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=fr){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=BCt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function BCt(e,t,n){for(const r=e.size;n<r;++n)if(Yf(e.value(n,t)))return n;return-1}function mJ(e){return cd(pRe,e)}function gJ(e){return cd(mRe,e)}function gRe(e){return cd(Qw,e)||e==="row_object"}function yRe(e){return mJ(e)&&pRe[e]}function vRe(e){return gJ(e)&&mRe[e]}function gC(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const yJ={escape:(e,t,n)=>gC(e,t,n),expr:(e,t)=>gC(`(row,data,op)=>${e}`,Qw,t),expr2:(e,t)=>gC(`(row0,data0,row,data)=>${e}`,Qw,t),join:(e,t)=>gC(`(row1,data1,row2,data2)=>${e}`,Qw,t),param:(e,t)=>gC(e,Qw,t)},UCt={"==":1,"!=":1,"===":1,"!==":1};function bRe(e,t,n=0,r,i){if(e.type=bR,e.name=t,e.table=n,i&&r&&bi(r.keyFor)){const s=UCt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===QS&&zCt(i,e,s,r.keyFor(s.value))}return e}function zCt(e,t,n,r){return r<0?(e.type=QS,e.value=!1,e.raw="false"):(t.type=DCt,n.value=r,n.raw=r+""),!0}function y4(e){return gr(e)?e:pJ(e)?e.entries():e?Object.entries(e):[]}const _Re="row_object";function wRe(e,t){e.type=RCt;const n=e.properties=[];for(const r of y4(t)){const[i,s]=gr(r)?r:[r,r];n.push({type:fRe,key:{type:QS,raw:Vh(s)},value:bRe({computed:!0},i)})}return e}function ERe(e){return JM(wRe({},e))}function xRe(e){return yJ.expr(ERe(e))}const VCt=new TextDecoder("utf-8"),mH=e=>VCt.decode(e),HCt=new TextEncoder,vJ=e=>HCt.encode(e),qCt=e=>typeof e=="boolean",Ru=e=>typeof e=="function",lv=e=>e!=null&&Object(e)===e,v4=e=>lv(e)&&Ru(e.then),bJ=e=>lv(e)&&Ru(e[Symbol.iterator]),b4=e=>lv(e)&&Ru(e[Symbol.asyncIterator]),WCt=e=>lv(e)&&"done"in e&&"value"in e,SRe=e=>"_getDOMStream"in e&&"_getNodeStream"in e,GCt=e=>lv(e)&&Ru(e.abort)&&Ru(e.getWriter)&&!SRe(e),YCt=e=>lv(e)&&Ru(e.end)&&Ru(e.write)&&qCt(e.writable)&&!SRe(e),KCt=e=>lv(e)&&Ru(e.clear)&&Ru(e.bytes)&&Ru(e.position)&&Ru(e.setPosition)&&Ru(e.capacity)&&Ru(e.getBufferIdentifier)&&Ru(e.createLong),_J=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function XCt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function e3(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function Hh(e,t){const n=XCt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?e3(o,s,a):o=s;break}e3(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function eo(e,t){let n=WCt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=vJ(n)),n instanceof ArrayBuffer?new e(n):n instanceof _J?new e(n):KCt(n)?eo(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const yC=e=>eo(Int32Array,e),$r=e=>eo(Uint8Array,e),gH=e=>(e.next(),e);function*QCt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof _J?n(t):bJ(t)?t:n(t);return yield*gH(function*(i){let s=null;do s=i.next(yield eo(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const JCt=e=>QCt(Uint8Array,e);function TRe(e,t){return C1(this,arguments,function*(){if(v4(t))return yield Qn(yield Qn(yield*KB(GA(TRe(e,yield Qn(t))))));const r=function(o){return C1(this,arguments,function*(){yield yield Qn(yield Qn(o))})},i=function(o){return C1(this,arguments,function*(){yield Qn(yield*KB(GA(gH(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof _J?r(t):bJ(t)?i(t):b4(t)?t:r(t);return yield Qn(yield*KB(GA(gH(function(o){return C1(this,arguments,function*(){let a=null;do a=yield Qn(o.next(yield yield Qn(eo(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Qn(new e)})}const ZCt=e=>TRe(Uint8Array,e);function CRe(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function eAt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const zhe={fromIterable(e){return zD(tAt(e))},fromAsyncIterable(e){return zD(nAt(e))},fromDOMStream(e){return zD(rAt(e))},fromNodeStream(e){return zD(sAt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},zD=e=>(e.next(),e);function*tAt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?Hh(r,o)[0]:([i,r,a]=Hh(r,o),i)}({cmd:s,size:o}=yield null);const l=JCt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function nAt(e){return C1(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Hh(i,a)[0]:([s,i,u]=Hh(i,a),s)}({cmd:o,size:a}=yield yield Qn(null));const c=ZCt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Qn(c.next()):yield Qn(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Qn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Qn(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Qn(c.return(new Uint8Array(0))))}return yield Qn(null)})}function rAt(e){return C1(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Hh(i,a)[0]:([s,i,u]=Hh(i,a),s)}({cmd:o,size:a}=yield yield Qn(null));const c=new iAt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Qn(c.read()):yield Qn(c.read(a-u)),!n&&s.byteLength>0&&(i.push($r(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Qn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Qn(c.cancel(f)))}finally{r===!1?yield Qn(c.cancel()):e.locked&&c.releaseLock()}return yield Qn(null)})}class iAt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Zp(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return Zp(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=$r(n)),n})}}const I9=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function sAt(e){return C1(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?Hh(l,a)[0]:([c,l,u]=Hh(l,a),c)}if({cmd:o,size:a}=yield yield Qn(null),e.isTTY)return yield yield Qn(new Uint8Array(0)),yield Qn(null);try{n[0]=I9(e,"end"),n[1]=I9(e,"error");do{if(n[2]=I9(e,"readable"),[r,s]=yield Qn(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=$r(e.read(a-u)),c.byteLength<a-u&&(c=$r(e.read()))):c=$r(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Qn(f()));while(a<u)}while(!i)}finally{yield Qn(d(n,r==="error"?s:null))}return yield Qn(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var Ja;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Ja||(Ja={}));var al;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(al||(al={}));var Vo;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Vo||(Vo={}));var qh;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(qh||(qh={}));var Kt;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Kt||(Kt={}));var Wh;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Wh||(Wh={}));var ro;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(ro||(ro={}));var re;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(re||(re={}));var Hp;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(Hp||(Hp={}));const oAt=void 0;function Eb(e){if(e===null)return"null";if(e===oAt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>Eb(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const aAt=Symbol.for("isArrowBigNum");function Sd(e,...t){return t.length===0?Object.setPrototypeOf(eo(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Sd.prototype[aAt]=!0;Sd.prototype.toJSON=function(){return`"${BI(this)}"`};Sd.prototype.valueOf=function(){return ARe(this)};Sd.prototype.toString=function(){return BI(this)};Sd.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return ARe(this);case"string":return BI(this);case"default":return uAt(this)}return BI(this)};function xE(...e){return Sd.apply(this,e)}function SE(...e){return Sd.apply(this,e)}function jI(...e){return Sd.apply(this,e)}Object.setPrototypeOf(xE.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(SE.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(jI.prototype,Object.create(Uint32Array.prototype));Object.assign(xE.prototype,Sd.prototype,{constructor:xE,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(SE.prototype,Sd.prototype,{constructor:SE,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(jI.prototype,Sd.prototype,{constructor:jI,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function ARe(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const BI=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return k9(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return k9(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${k9(t)}`},uAt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:BI(e);function k9(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class wJ{static new(t,n){switch(n){case!0:return new xE(t);case!1:return new SE(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new xE(t)}return t.byteLength===16?new jI(t):new SE(t)}static signed(t){return new xE(t)}static unsigned(t){return new SE(t)}static decimal(t){return new jI(t)}constructor(t,n){return wJ.new(t,n)}}function fd(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var IRe,kRe,RRe,NRe,DRe,PRe,ORe,$Re,MRe,LRe,FRe,jRe,BRe,URe,zRe,VRe,HRe,qRe,WRe,GRe;let An=class yH{static isNull(t){return(t==null?void 0:t.typeId)===re.Null}static isInt(t){return(t==null?void 0:t.typeId)===re.Int}static isFloat(t){return(t==null?void 0:t.typeId)===re.Float}static isBinary(t){return(t==null?void 0:t.typeId)===re.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===re.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===re.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===re.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===re.Date}static isTime(t){return(t==null?void 0:t.typeId)===re.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===re.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===re.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===re.Duration}static isList(t){return(t==null?void 0:t.typeId)===re.List}static isStruct(t){return(t==null?void 0:t.typeId)===re.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===re.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===re.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===re.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===re.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===re.Dictionary}static isDenseUnion(t){return yH.isUnion(t)&&t.mode===al.Dense}static isSparseUnion(t){return yH.isUnion(t)&&t.mode===al.Sparse}get typeId(){return re.NONE}};IRe=Symbol.toStringTag;An[IRe]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(An.prototype);let Wm=class extends An{toString(){return"Null"}get typeId(){return re.Null}};kRe=Symbol.toStringTag;Wm[kRe]=(e=>e[Symbol.toStringTag]="Null")(Wm.prototype);class cu extends An{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return re.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}RRe=Symbol.toStringTag;cu[RRe]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(cu.prototype);class EJ extends cu{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class xJ extends cu{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class yy extends cu{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class SJ extends cu{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class TJ extends cu{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class CJ extends cu{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class AJ extends cu{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class IJ extends cu{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(EJ.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(xJ.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(yy.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(SJ.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(TJ.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(CJ.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(AJ.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(IJ.prototype,"ArrayType",{value:BigUint64Array});class vy extends An{constructor(t){super(),this.precision=t}get typeId(){return re.Float}get ArrayType(){switch(this.precision){case Vo.HALF:return Uint16Array;case Vo.SINGLE:return Float32Array;case Vo.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}NRe=Symbol.toStringTag;vy[NRe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(vy.prototype);class YRe extends vy{constructor(){super(Vo.HALF)}}class kJ extends vy{constructor(){super(Vo.SINGLE)}}class RJ extends vy{constructor(){super(Vo.DOUBLE)}}Object.defineProperty(YRe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(kJ.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(RJ.prototype,"ArrayType",{value:Float64Array});let UI=class extends An{constructor(){super()}get typeId(){return re.Binary}toString(){return"Binary"}};DRe=Symbol.toStringTag;UI[DRe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(UI.prototype);let Cx=class extends An{constructor(){super()}get typeId(){return re.Utf8}toString(){return"Utf8"}};PRe=Symbol.toStringTag;Cx[PRe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(Cx.prototype);let zI=class extends An{constructor(){super()}get typeId(){return re.Bool}toString(){return"Bool"}};ORe=Symbol.toStringTag;zI[ORe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(zI.prototype);let t3=class extends An{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return re.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};$Re=Symbol.toStringTag;t3[$Re]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(t3.prototype);class Ax extends An{constructor(t){super(),this.unit=t}get typeId(){return re.Date}toString(){return`Date${(this.unit+1)*32}<${qh[this.unit]}>`}}MRe=Symbol.toStringTag;Ax[MRe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(Ax.prototype);class lAt extends Ax{constructor(){super(qh.DAY)}}class cAt extends Ax{constructor(){super(qh.MILLISECOND)}}class Gm extends An{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return re.Time}toString(){return`Time${this.bitWidth}<${Kt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}LRe=Symbol.toStringTag;Gm[LRe]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Gm.prototype);class fAt extends Gm{constructor(){super(Kt.SECOND,32)}}class dAt extends Gm{constructor(){super(Kt.MILLISECOND,32)}}class hAt extends Gm{constructor(){super(Kt.MICROSECOND,64)}}class pAt extends Gm{constructor(){super(Kt.NANOSECOND,64)}}class n3 extends An{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return re.Timestamp}toString(){return`Timestamp<${Kt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}FRe=Symbol.toStringTag;n3[FRe]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(n3.prototype);class Ix extends An{constructor(t){super(),this.unit=t}get typeId(){return re.Interval}toString(){return`Interval<${Wh[this.unit]}>`}}jRe=Symbol.toStringTag;Ix[jRe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(Ix.prototype);class mAt extends Ix{constructor(){super(Wh.DAY_TIME)}}class gAt extends Ix{constructor(){super(Wh.YEAR_MONTH)}}let r3=class extends An{constructor(t){super(),this.unit=t}get typeId(){return re.Duration}toString(){return`Duration<${Kt[this.unit]}>`}};BRe=Symbol.toStringTag;r3[BRe]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(r3.prototype);let kx=class extends An{constructor(t){super(),this.children=[t]}get typeId(){return re.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};URe=Symbol.toStringTag;kx[URe]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(kx.prototype);class ba extends An{constructor(t){super(),this.children=t}get typeId(){return re.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}zRe=Symbol.toStringTag;ba[zRe]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(ba.prototype);class VI extends An{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return re.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}VRe=Symbol.toStringTag;VI[VRe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(VI.prototype);let i3=class extends An{constructor(t){super(),this.byteWidth=t}get typeId(){return re.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};HRe=Symbol.toStringTag;i3[HRe]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(i3.prototype);let Rx=class extends An{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return re.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};qRe=Symbol.toStringTag;Rx[qRe]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(Rx.prototype);class HI extends An{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return re.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}WRe=Symbol.toStringTag;HI[WRe]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(HI.prototype);const yAt=(e=>()=>++e)(-1);class by extends An{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?yAt():fd(r)}get typeId(){return re.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}GRe=Symbol.toStringTag;by[GRe]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(by.prototype);function Xd(e){const t=e;switch(e.typeId){case re.Decimal:return e.bitWidth/32;case re.Timestamp:return 2;case re.Date:return 1+t.unit;case re.Interval:return 1+t.unit;case re.FixedSizeList:return t.listSize;case re.FixedSizeBinary:return t.byteWidth;default:return 1}}class kn{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return vAt(this,t,n)}getVisitFnByTypeId(t,n=!0){return Sw(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function vAt(e,t,n=!0){return typeof t=="number"?Sw(e,t,n):typeof t=="string"&&t in re?Sw(e,re[t],n):t&&t instanceof An?Sw(e,Vhe(t),n):t!=null&&t.type&&t.type instanceof An?Sw(e,Vhe(t.type),n):Sw(e,re.NONE,n)}function Sw(e,t,n=!0){let r=null;switch(t){case re.Null:r=e.visitNull;break;case re.Bool:r=e.visitBool;break;case re.Int:r=e.visitInt;break;case re.Int8:r=e.visitInt8||e.visitInt;break;case re.Int16:r=e.visitInt16||e.visitInt;break;case re.Int32:r=e.visitInt32||e.visitInt;break;case re.Int64:r=e.visitInt64||e.visitInt;break;case re.Uint8:r=e.visitUint8||e.visitInt;break;case re.Uint16:r=e.visitUint16||e.visitInt;break;case re.Uint32:r=e.visitUint32||e.visitInt;break;case re.Uint64:r=e.visitUint64||e.visitInt;break;case re.Float:r=e.visitFloat;break;case re.Float16:r=e.visitFloat16||e.visitFloat;break;case re.Float32:r=e.visitFloat32||e.visitFloat;break;case re.Float64:r=e.visitFloat64||e.visitFloat;break;case re.Utf8:r=e.visitUtf8;break;case re.Binary:r=e.visitBinary;break;case re.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case re.Date:r=e.visitDate;break;case re.DateDay:r=e.visitDateDay||e.visitDate;break;case re.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case re.Timestamp:r=e.visitTimestamp;break;case re.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case re.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case re.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case re.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case re.Time:r=e.visitTime;break;case re.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case re.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case re.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case re.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case re.Decimal:r=e.visitDecimal;break;case re.List:r=e.visitList;break;case re.Struct:r=e.visitStruct;break;case re.Union:r=e.visitUnion;break;case re.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case re.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case re.Dictionary:r=e.visitDictionary;break;case re.Interval:r=e.visitInterval;break;case re.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case re.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case re.Duration:r=e.visitDuration;break;case re.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case re.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case re.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case re.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case re.FixedSizeList:r=e.visitFixedSizeList;break;case re.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${re[t]}'`)}function Vhe(e){switch(e.typeId){case re.Null:return re.Null;case re.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?re.Int8:re.Uint8;case 16:return n?re.Int16:re.Uint16;case 32:return n?re.Int32:re.Uint32;case 64:return n?re.Int64:re.Uint64}return re.Int}case re.Float:switch(e.precision){case Vo.HALF:return re.Float16;case Vo.SINGLE:return re.Float32;case Vo.DOUBLE:return re.Float64}return re.Float;case re.Binary:return re.Binary;case re.Utf8:return re.Utf8;case re.Bool:return re.Bool;case re.Decimal:return re.Decimal;case re.Time:switch(e.unit){case Kt.SECOND:return re.TimeSecond;case Kt.MILLISECOND:return re.TimeMillisecond;case Kt.MICROSECOND:return re.TimeMicrosecond;case Kt.NANOSECOND:return re.TimeNanosecond}return re.Time;case re.Timestamp:switch(e.unit){case Kt.SECOND:return re.TimestampSecond;case Kt.MILLISECOND:return re.TimestampMillisecond;case Kt.MICROSECOND:return re.TimestampMicrosecond;case Kt.NANOSECOND:return re.TimestampNanosecond}return re.Timestamp;case re.Date:switch(e.unit){case qh.DAY:return re.DateDay;case qh.MILLISECOND:return re.DateMillisecond}return re.Date;case re.Interval:switch(e.unit){case Wh.DAY_TIME:return re.IntervalDayTime;case Wh.YEAR_MONTH:return re.IntervalYearMonth}return re.Interval;case re.Duration:switch(e.unit){case Kt.SECOND:return re.DurationSecond;case Kt.MILLISECOND:return re.DurationMillisecond;case Kt.MICROSECOND:return re.DurationMicrosecond;case Kt.NANOSECOND:return re.DurationNanosecond}return re.Duration;case re.Map:return re.Map;case re.List:return re.List;case re.Struct:return re.Struct;case re.Union:switch(e.mode){case al.Dense:return re.DenseUnion;case al.Sparse:return re.SparseUnion}return re.Union;case re.FixedSizeBinary:return re.FixedSizeBinary;case re.FixedSizeList:return re.FixedSizeList;case re.Dictionary:return re.Dictionary}throw new Error(`Unrecognized type '${re[e.typeId]}'`)}kn.prototype.visitInt8=null;kn.prototype.visitInt16=null;kn.prototype.visitInt32=null;kn.prototype.visitInt64=null;kn.prototype.visitUint8=null;kn.prototype.visitUint16=null;kn.prototype.visitUint32=null;kn.prototype.visitUint64=null;kn.prototype.visitFloat16=null;kn.prototype.visitFloat32=null;kn.prototype.visitFloat64=null;kn.prototype.visitDateDay=null;kn.prototype.visitDateMillisecond=null;kn.prototype.visitTimestampSecond=null;kn.prototype.visitTimestampMillisecond=null;kn.prototype.visitTimestampMicrosecond=null;kn.prototype.visitTimestampNanosecond=null;kn.prototype.visitTimeSecond=null;kn.prototype.visitTimeMillisecond=null;kn.prototype.visitTimeMicrosecond=null;kn.prototype.visitTimeNanosecond=null;kn.prototype.visitDenseUnion=null;kn.prototype.visitSparseUnion=null;kn.prototype.visitIntervalDayTime=null;kn.prototype.visitIntervalYearMonth=null;kn.prototype.visitDuration=null;kn.prototype.visitDurationSecond=null;kn.prototype.visitDurationMillisecond=null;kn.prototype.visitDurationMicrosecond=null;kn.prototype.visitDurationNanosecond=null;const KRe=new Float64Array(1),iw=new Uint32Array(KRe.buffer);function XRe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function QRe(e){if(e!==e)return 32256;KRe[0]=e;const t=(iw[1]&2147483648)>>16&65535;let n=iw[1]&2146435072,r=0;return n>=1089470464?iw[0]>0?n=31744:(n=(n&2080374784)>>16,r=(iw[1]&1048575)>>10):n<=1056964608?(r=1048576+(iw[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(iw[1]&1048575)+512>>10),t|n|r&65535}class en extends kn{}function an(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const bAt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},NJ=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},_At=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},wAt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},JRe=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},EAt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},vg=({values:e},t,n)=>{e[t]=n},DJ=({values:e},t,n)=>{e[t]=n},ZRe=({values:e},t,n)=>{e[t]=QRe(n)},xAt=(e,t,n)=>{switch(e.type.precision){case Vo.HALF:return ZRe(e,t,n);case Vo.SINGLE:case Vo.DOUBLE:return DJ(e,t,n)}},PJ=({values:e},t,n)=>{bAt(e,t,n.valueOf())},OJ=({values:e},t,n)=>{NJ(e,t*2,n.valueOf())},eNe=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},SAt=({values:e,valueOffsets:t},n,r)=>JRe(e,t,n,r),TAt=({values:e,valueOffsets:t},n,r)=>{JRe(e,t,n,vJ(r))},tNe=(e,t,n)=>{e.type.unit===qh.DAY?PJ(e,t,n):OJ(e,t,n)},$J=({values:e},t,n)=>NJ(e,t*2,n/1e3),MJ=({values:e},t,n)=>NJ(e,t*2,n),LJ=({values:e},t,n)=>_At(e,t*2,n),FJ=({values:e},t,n)=>wAt(e,t*2,n),nNe=(e,t,n)=>{switch(e.type.unit){case Kt.SECOND:return $J(e,t,n);case Kt.MILLISECOND:return MJ(e,t,n);case Kt.MICROSECOND:return LJ(e,t,n);case Kt.NANOSECOND:return FJ(e,t,n)}},jJ=({values:e},t,n)=>{e[t]=n},BJ=({values:e},t,n)=>{e[t]=n},UJ=({values:e},t,n)=>{e[t]=n},zJ=({values:e},t,n)=>{e[t]=n},rNe=(e,t,n)=>{switch(e.type.unit){case Kt.SECOND:return jJ(e,t,n);case Kt.MILLISECOND:return BJ(e,t,n);case Kt.MICROSECOND:return UJ(e,t,n);case Kt.NANOSECOND:return zJ(e,t,n)}},iNe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},CAt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=Jc.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},AAt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=Jc.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},IAt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),kAt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),RAt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),NAt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),DAt=(e,t,n)=>{const r=e.type.children.map(s=>Jc.getVisitFn(s.type)),i=n instanceof Map?RAt(t,n):n instanceof yr?kAt(t,n):Array.isArray(n)?IAt(t,n):NAt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},PAt=(e,t,n)=>{e.type.mode===al.Dense?sNe(e,t,n):oNe(e,t,n)},sNe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Jc.visit(i,e.valueOffsets[t],n)},oNe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Jc.visit(i,t,n)},OAt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},aNe=(e,t,n)=>{e.type.unit===Wh.DAY_TIME?VJ(e,t,n):HJ(e,t,n)},VJ=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},HJ=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},qJ=({values:e},t,n)=>{e[t]=n},WJ=({values:e},t,n)=>{e[t]=n},GJ=({values:e},t,n)=>{e[t]=n},YJ=({values:e},t,n)=>{e[t]=n},uNe=(e,t,n)=>{switch(e.type.unit){case Kt.SECOND:return qJ(e,t,n);case Kt.MILLISECOND:return WJ(e,t,n);case Kt.MICROSECOND:return GJ(e,t,n);case Kt.NANOSECOND:return YJ(e,t,n)}},$At=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=Jc.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};en.prototype.visitBool=an(EAt);en.prototype.visitInt=an(vg);en.prototype.visitInt8=an(vg);en.prototype.visitInt16=an(vg);en.prototype.visitInt32=an(vg);en.prototype.visitInt64=an(vg);en.prototype.visitUint8=an(vg);en.prototype.visitUint16=an(vg);en.prototype.visitUint32=an(vg);en.prototype.visitUint64=an(vg);en.prototype.visitFloat=an(xAt);en.prototype.visitFloat16=an(ZRe);en.prototype.visitFloat32=an(DJ);en.prototype.visitFloat64=an(DJ);en.prototype.visitUtf8=an(TAt);en.prototype.visitBinary=an(SAt);en.prototype.visitFixedSizeBinary=an(eNe);en.prototype.visitDate=an(tNe);en.prototype.visitDateDay=an(PJ);en.prototype.visitDateMillisecond=an(OJ);en.prototype.visitTimestamp=an(nNe);en.prototype.visitTimestampSecond=an($J);en.prototype.visitTimestampMillisecond=an(MJ);en.prototype.visitTimestampMicrosecond=an(LJ);en.prototype.visitTimestampNanosecond=an(FJ);en.prototype.visitTime=an(rNe);en.prototype.visitTimeSecond=an(jJ);en.prototype.visitTimeMillisecond=an(BJ);en.prototype.visitTimeMicrosecond=an(UJ);en.prototype.visitTimeNanosecond=an(zJ);en.prototype.visitDecimal=an(iNe);en.prototype.visitList=an(CAt);en.prototype.visitStruct=an(DAt);en.prototype.visitUnion=an(PAt);en.prototype.visitDenseUnion=an(sNe);en.prototype.visitSparseUnion=an(oNe);en.prototype.visitDictionary=an(OAt);en.prototype.visitInterval=an(aNe);en.prototype.visitIntervalDayTime=an(VJ);en.prototype.visitIntervalYearMonth=an(HJ);en.prototype.visitDuration=an(uNe);en.prototype.visitDurationSecond=an(qJ);en.prototype.visitDurationMillisecond=an(WJ);en.prototype.visitDurationMicrosecond=an(GJ);en.prototype.visitDurationNanosecond=an(YJ);en.prototype.visitFixedSizeList=an($At);en.prototype.visitMap=an(AAt);const Jc=new en,Df=Symbol.for("parent"),TE=Symbol.for("rowIndex");class KJ{constructor(t,n){return this[Df]=t,this[TE]=n,new Proxy(this,new LAt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[TE],n=this[Df],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=ul.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${Eb(t)}: ${Eb(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new MAt(this[Df],this[TE])}}class MAt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,ul.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(KJ.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Df]:{writable:!0,enumerable:!1,configurable:!1,value:null},[TE]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class LAt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Df].type.children.map(n=>n.name)}has(t,n){return t[Df].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Df].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Df].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=ul.visit(t[Df].children[r],t[TE]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Df].type.children.findIndex(s=>s.name===n);return i!==-1?(Jc.visit(t[Df].children[i],t[TE],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class Xt extends kn{}function tn(e){return(t,n)=>t.getValid(n)?e(t,n):null}const FAt=(e,t)=>864e5*e[t],XJ=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),jAt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,BAt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,lNe=e=>new Date(e),UAt=(e,t)=>lNe(FAt(e,t)),zAt=(e,t)=>lNe(XJ(e,t)),VAt=(e,t)=>null,cNe=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},HAt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},fNe=({values:e},t)=>UAt(e,t),dNe=({values:e},t)=>zAt(e,t*2),cv=({stride:e,values:t},n)=>t[e*n],qAt=({stride:e,values:t},n)=>XRe(t[e*n]),hNe=({values:e},t)=>e[t],WAt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),GAt=({values:e,valueOffsets:t},n)=>cNe(e,t,n),YAt=({values:e,valueOffsets:t},n)=>{const r=cNe(e,t,n);return r!==null?mH(r):null},KAt=({values:e},t)=>e[t],XAt=({type:e,values:t},n)=>e.precision!==Vo.HALF?t[n]:XRe(t[n]),QAt=(e,t)=>e.type.unit===qh.DAY?fNe(e,t):dNe(e,t),pNe=({values:e},t)=>1e3*XJ(e,t*2),mNe=({values:e},t)=>XJ(e,t*2),gNe=({values:e},t)=>jAt(e,t*2),yNe=({values:e},t)=>BAt(e,t*2),JAt=(e,t)=>{switch(e.type.unit){case Kt.SECOND:return pNe(e,t);case Kt.MILLISECOND:return mNe(e,t);case Kt.MICROSECOND:return gNe(e,t);case Kt.NANOSECOND:return yNe(e,t)}},vNe=({values:e},t)=>e[t],bNe=({values:e},t)=>e[t],_Ne=({values:e},t)=>e[t],wNe=({values:e},t)=>e[t],ZAt=(e,t)=>{switch(e.type.unit){case Kt.SECOND:return vNe(e,t);case Kt.MILLISECOND:return bNe(e,t);case Kt.MICROSECOND:return _Ne(e,t);case Kt.NANOSECOND:return wNe(e,t)}},e2t=({values:e,stride:t},n)=>wJ.decimal(e.subarray(t*n,t*(n+1))),t2t=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new yr([u])},n2t=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new _4(o.slice(i,s-i))},r2t=(e,t)=>new KJ(e,t),i2t=(e,t)=>e.type.mode===al.Dense?ENe(e,t):xNe(e,t),ENe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return ul.visit(r,e.valueOffsets[t])},xNe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return ul.visit(r,t)},s2t=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},o2t=(e,t)=>e.type.unit===Wh.DAY_TIME?SNe(e,t):TNe(e,t),SNe=({values:e},t)=>e.subarray(2*t,2*(t+1)),TNe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},CNe=({values:e},t)=>e[t],ANe=({values:e},t)=>e[t],INe=({values:e},t)=>e[t],kNe=({values:e},t)=>e[t],a2t=(e,t)=>{switch(e.type.unit){case Kt.SECOND:return CNe(e,t);case Kt.MILLISECOND:return ANe(e,t);case Kt.MICROSECOND:return INe(e,t);case Kt.NANOSECOND:return kNe(e,t)}},u2t=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new yr([s])};Xt.prototype.visitNull=tn(VAt);Xt.prototype.visitBool=tn(HAt);Xt.prototype.visitInt=tn(KAt);Xt.prototype.visitInt8=tn(cv);Xt.prototype.visitInt16=tn(cv);Xt.prototype.visitInt32=tn(cv);Xt.prototype.visitInt64=tn(hNe);Xt.prototype.visitUint8=tn(cv);Xt.prototype.visitUint16=tn(cv);Xt.prototype.visitUint32=tn(cv);Xt.prototype.visitUint64=tn(hNe);Xt.prototype.visitFloat=tn(XAt);Xt.prototype.visitFloat16=tn(qAt);Xt.prototype.visitFloat32=tn(cv);Xt.prototype.visitFloat64=tn(cv);Xt.prototype.visitUtf8=tn(YAt);Xt.prototype.visitBinary=tn(GAt);Xt.prototype.visitFixedSizeBinary=tn(WAt);Xt.prototype.visitDate=tn(QAt);Xt.prototype.visitDateDay=tn(fNe);Xt.prototype.visitDateMillisecond=tn(dNe);Xt.prototype.visitTimestamp=tn(JAt);Xt.prototype.visitTimestampSecond=tn(pNe);Xt.prototype.visitTimestampMillisecond=tn(mNe);Xt.prototype.visitTimestampMicrosecond=tn(gNe);Xt.prototype.visitTimestampNanosecond=tn(yNe);Xt.prototype.visitTime=tn(ZAt);Xt.prototype.visitTimeSecond=tn(vNe);Xt.prototype.visitTimeMillisecond=tn(bNe);Xt.prototype.visitTimeMicrosecond=tn(_Ne);Xt.prototype.visitTimeNanosecond=tn(wNe);Xt.prototype.visitDecimal=tn(e2t);Xt.prototype.visitList=tn(t2t);Xt.prototype.visitStruct=tn(r2t);Xt.prototype.visitUnion=tn(i2t);Xt.prototype.visitDenseUnion=tn(ENe);Xt.prototype.visitSparseUnion=tn(xNe);Xt.prototype.visitDictionary=tn(s2t);Xt.prototype.visitInterval=tn(o2t);Xt.prototype.visitIntervalDayTime=tn(SNe);Xt.prototype.visitIntervalYearMonth=tn(TNe);Xt.prototype.visitDuration=tn(a2t);Xt.prototype.visitDurationSecond=tn(CNe);Xt.prototype.visitDurationMillisecond=tn(ANe);Xt.prototype.visitDurationMicrosecond=tn(INe);Xt.prototype.visitDurationNanosecond=tn(kNe);Xt.prototype.visitFixedSizeList=tn(u2t);Xt.prototype.visitMap=tn(n2t);const ul=new Xt,Bf=Symbol.for("keys"),CE=Symbol.for("vals");class _4{constructor(t){return this[Bf]=new yr([t.children[0]]).memoize(),this[CE]=t.children[1],new Proxy(this,new c2t)}[Symbol.iterator](){return new l2t(this[Bf],this[CE])}get size(){return this[Bf].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Bf],n=this[CE],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=ul.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${Eb(t)}: ${Eb(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class l2t{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),ul.visit(this.vals,t)]})}}class c2t{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Bf].toArray().map(String)}has(t,n){return t[Bf].includes(n)}getOwnPropertyDescriptor(t,n){if(t[Bf].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Bf].indexOf(n);if(r!==-1){const i=ul.visit(Reflect.get(t,CE),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Bf].indexOf(n);return i!==-1?(Jc.visit(Reflect.get(t,CE),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(_4.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Bf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[CE]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Hhe;function RNe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(Hhe=s,s=o,o=Hhe),o>i&&(o=i),r?r(e,s,o):[s,o]}const qhe=e=>e!==e;function JS(e){if(typeof e!=="object"||e===null)return qhe(e)?qhe:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?eAt(e,n):!1:e instanceof Map?d2t(e):Array.isArray(e)?f2t(e):e instanceof yr?h2t(e):p2t(e,!0)}function f2t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=JS(e[n]);return w4(t)}function d2t(e){let t=-1;const n=[];for(const r of e.values())n[++t]=JS(r);return w4(n)}function h2t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=JS(e.get(n));return w4(t)}function p2t(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=JS(e[n[i]]);return w4(r,n)}function w4(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return m2t(e,n);case Map:return Whe(e,n,n.keys());case _4:case KJ:case Object:case void 0:return Whe(e,n,t||Object.keys(n))}return n instanceof yr?g2t(e,n):!1}}function m2t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function g2t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function Whe(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function NNe(e,t,n,r){return(n&1<<r)!==0}function y2t(e,t,n,r){return(n&1<<r)>>r}function s3(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):DNe(new QJ(n,e,t,null,NNe)).subarray(0,r)),i}return n}function DNe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class QJ{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function vH(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new QJ(e,t,n-t,e,y2t))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return vH(e,t,i)+vH(e,r,n)+v2t(e,i>>3,r-i>>3)}function v2t(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=R9(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=R9(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=R9(s.getUint8(i)),i+=1;return r}function R9(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const b2t=-1;class Or{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return An.isSparseUnion(t)?this.children.some(n=>n.nullable):An.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(An.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=b2t&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-vH(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof Or?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Xd(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(An.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===al.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(An.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===al.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(s3(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Or(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===re.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(s3(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[Hp.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[Hp.TYPE])&&(o[Hp.TYPE]=s.subarray(t,t+n)),(s=o[Hp.OFFSET])&&(o[Hp.OFFSET]=s.subarray(t,t+n+1))||(s=o[Hp.DATA])&&(o[Hp.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Or.prototype.children=Object.freeze([]);class f2 extends kn{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Or(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=$r(t.nullBitmap),s=eo(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=$r(t.nullBitmap),s=eo(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=$r(t.nullBitmap),s=eo(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=$r(t.data),s=$r(t.nullBitmap),o=yC(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Or(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=$r(t.data),s=$r(t.nullBitmap),o=yC(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Or(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=$r(t.nullBitmap),s=eo(n.ArrayType,t.data),{["length"]:o=s.length/Xd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=$r(t.nullBitmap),s=eo(n.ArrayType,t.data),{["length"]:o=s.length/Xd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=$r(t.nullBitmap),s=eo(n.ArrayType,t.data),{["length"]:o=s.length/Xd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=$r(t.nullBitmap),s=eo(n.ArrayType,t.data),{["length"]:o=s.length/Xd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=$r(t.nullBitmap),s=eo(n.ArrayType,t.data),{["length"]:o=s.length/Xd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=$r(t.nullBitmap),o=yC(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Or(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=$r(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=eo(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(An.isSparseUnion(n))return new Or(n,r,o,a,[void 0,void 0,void 0,s],i);const u=yC(t.valueOffsets);return new Or(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=$r(t.nullBitmap),s=eo(n.indices.ArrayType,t.data),{["dictionary"]:o=new yr([new f2().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Or(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=$r(t.nullBitmap),s=eo(n.ArrayType,t.data),{["length"]:o=s.length/Xd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=$r(t.nullBitmap),s=eo(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new f2().visit({type:n.valueType})}=t,s=$r(t.nullBitmap),{["length"]:o=i.length/Xd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new f2().visit({type:n.childType})}=t,s=$r(t.nullBitmap),o=yC(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Or(n,r,a,u,[o,void 0,s],[i])}}const _2t=new f2;function ma(e){return _2t.visit(e)}class Ghe{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function PNe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function ONe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function $Ne(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function JJ(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function ZJ(e,t){return e.getValid(t)}function AE(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return JJ(r,this._offsets,n,t)}}function MNe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=JJ(s,this._offsets,r,n);return t=void 0,o}}function LNe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):JJ(s,this._offsets,i,n);return t=void 0,o}}class Qt extends kn{}function w2t(e,t){return t===null&&e.length>0?0:-1}function E2t(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new QJ(n,e.offset+(t||0),e.length,n,NNe)){if(!i)return r;++r}return-1}function pn(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case re.Union:break;case re.Dictionary:break;default:return E2t(e,n)}const r=ul.getVisitFn(e),i=JS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function FNe(e,t,n){const r=ul.getVisitFn(e),i=JS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}Qt.prototype.visitNull=w2t;Qt.prototype.visitBool=pn;Qt.prototype.visitInt=pn;Qt.prototype.visitInt8=pn;Qt.prototype.visitInt16=pn;Qt.prototype.visitInt32=pn;Qt.prototype.visitInt64=pn;Qt.prototype.visitUint8=pn;Qt.prototype.visitUint16=pn;Qt.prototype.visitUint32=pn;Qt.prototype.visitUint64=pn;Qt.prototype.visitFloat=pn;Qt.prototype.visitFloat16=pn;Qt.prototype.visitFloat32=pn;Qt.prototype.visitFloat64=pn;Qt.prototype.visitUtf8=pn;Qt.prototype.visitBinary=pn;Qt.prototype.visitFixedSizeBinary=pn;Qt.prototype.visitDate=pn;Qt.prototype.visitDateDay=pn;Qt.prototype.visitDateMillisecond=pn;Qt.prototype.visitTimestamp=pn;Qt.prototype.visitTimestampSecond=pn;Qt.prototype.visitTimestampMillisecond=pn;Qt.prototype.visitTimestampMicrosecond=pn;Qt.prototype.visitTimestampNanosecond=pn;Qt.prototype.visitTime=pn;Qt.prototype.visitTimeSecond=pn;Qt.prototype.visitTimeMillisecond=pn;Qt.prototype.visitTimeMicrosecond=pn;Qt.prototype.visitTimeNanosecond=pn;Qt.prototype.visitDecimal=pn;Qt.prototype.visitList=pn;Qt.prototype.visitStruct=pn;Qt.prototype.visitUnion=pn;Qt.prototype.visitDenseUnion=FNe;Qt.prototype.visitSparseUnion=FNe;Qt.prototype.visitDictionary=pn;Qt.prototype.visitInterval=pn;Qt.prototype.visitIntervalDayTime=pn;Qt.prototype.visitIntervalYearMonth=pn;Qt.prototype.visitDuration=pn;Qt.prototype.visitDurationSecond=pn;Qt.prototype.visitDurationMillisecond=pn;Qt.prototype.visitDurationMicrosecond=pn;Qt.prototype.visitDurationNanosecond=pn;Qt.prototype.visitFixedSizeList=pn;Qt.prototype.visitMap=pn;const o3=new Qt;class Jt extends kn{}function nn(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===re.Timestamp||t instanceof cu&&t.bitWidth!==64||t instanceof Gm&&t.bitWidth!==64||t instanceof vy&&t.precision!==Vo.HALF))return new Ghe(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new Ghe(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new x2t(o)})}class x2t{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Jt.prototype.visitNull=nn;Jt.prototype.visitBool=nn;Jt.prototype.visitInt=nn;Jt.prototype.visitInt8=nn;Jt.prototype.visitInt16=nn;Jt.prototype.visitInt32=nn;Jt.prototype.visitInt64=nn;Jt.prototype.visitUint8=nn;Jt.prototype.visitUint16=nn;Jt.prototype.visitUint32=nn;Jt.prototype.visitUint64=nn;Jt.prototype.visitFloat=nn;Jt.prototype.visitFloat16=nn;Jt.prototype.visitFloat32=nn;Jt.prototype.visitFloat64=nn;Jt.prototype.visitUtf8=nn;Jt.prototype.visitBinary=nn;Jt.prototype.visitFixedSizeBinary=nn;Jt.prototype.visitDate=nn;Jt.prototype.visitDateDay=nn;Jt.prototype.visitDateMillisecond=nn;Jt.prototype.visitTimestamp=nn;Jt.prototype.visitTimestampSecond=nn;Jt.prototype.visitTimestampMillisecond=nn;Jt.prototype.visitTimestampMicrosecond=nn;Jt.prototype.visitTimestampNanosecond=nn;Jt.prototype.visitTime=nn;Jt.prototype.visitTimeSecond=nn;Jt.prototype.visitTimeMillisecond=nn;Jt.prototype.visitTimeMicrosecond=nn;Jt.prototype.visitTimeNanosecond=nn;Jt.prototype.visitDecimal=nn;Jt.prototype.visitList=nn;Jt.prototype.visitStruct=nn;Jt.prototype.visitUnion=nn;Jt.prototype.visitDenseUnion=nn;Jt.prototype.visitSparseUnion=nn;Jt.prototype.visitDictionary=nn;Jt.prototype.visitInterval=nn;Jt.prototype.visitIntervalDayTime=nn;Jt.prototype.visitIntervalYearMonth=nn;Jt.prototype.visitDuration=nn;Jt.prototype.visitDurationSecond=nn;Jt.prototype.visitDurationMillisecond=nn;Jt.prototype.visitDurationMicrosecond=nn;Jt.prototype.visitDurationNanosecond=nn;Jt.prototype.visitFixedSizeList=nn;Jt.prototype.visitMap=nn;const eZ=new Jt,S2t=(e,t)=>e+t;class fv extends kn{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===Kt.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+Gh.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Gh.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const T2t=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),C2t=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),A2t=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Gh.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},I2t=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Gh.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},k2t=(e,t)=>e.type.mode===al.Dense?jNe(e,t):BNe(e,t),jNe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Gh.visit(t[s],r[i])},BNe=({children:e},t)=>4+Gh.visitMany(e,e.map(()=>t)).reduce(S2t,0);fv.prototype.visitUtf8=T2t;fv.prototype.visitBinary=C2t;fv.prototype.visitList=A2t;fv.prototype.visitFixedSizeList=I2t;fv.prototype.visitUnion=k2t;fv.prototype.visitDenseUnion=jNe;fv.prototype.visitSparseUnion=BNe;const Gh=new fv;var UNe;const zNe={},VNe={};class yr{constructor(t){var n,r,i;const s=t[0]instanceof yr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Or)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=zNe[o.typeId],f=s[0];this.isValid=d=>ZJ(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,VNe[o.typeId]),this._offsets=ONe(s);break}this.data=s,this.type=o,this.stride=Xd(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return PNe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${re[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return eZ.visit(this)}concat(...t){return new yr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new yr(RNe(this,t,n,({data:r,_offsets:i},s,o)=>$Ne(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case re.Int:case re.Float:case re.Decimal:case re.Time:case re.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new yr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return An.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(An.isDictionary(this.type)){const t=new a3(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new yr(n)}return new a3(this)}unmemoize(){if(An.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new yr(n)}return this}}UNe=Symbol.toStringTag;yr[UNe]=(e=>{e.type=An.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(re).map(n=>re[n]).filter(n=>typeof n=="number"&&n!==re.NONE);for(const n of t){const r=ul.getVisitFnByTypeId(n),i=Jc.getVisitFnByTypeId(n),s=o3.getVisitFnByTypeId(n),o=Gh.getVisitFnByTypeId(n);zNe[n]={get:r,set:i,indexOf:s,byteLength:o},VNe[n]=Object.create(e,{isValid:{value:AE(ZJ)},get:{value:AE(ul.getVisitFnByTypeId(n))},set:{value:MNe(Jc.getVisitFnByTypeId(n))},indexOf:{value:LNe(o3.getVisitFnByTypeId(n))},getByteLength:{value:AE(Gh.getVisitFnByTypeId(n))}})}return"Vector"})(yr.prototype);class a3 extends yr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new a3(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new yr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function R2t(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${N2t(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function N2t(e){return typeof e!="bigint"?Eb(e):`${Eb(e)}n`}const N9=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,D2t=(e,t=0)=>e.length>=t?e.subarray(0,t):e3(new e.constructor(t),e,0);class E4{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?N9(r*1,this.BYTES_PER_ELEMENT):N9(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=N9(t*this.stride,this.BYTES_PER_ELEMENT);const n=D2t(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=e3(new this.ArrayType(t),this.buffer)}}E4.prototype.offset=0;class _R extends E4{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class HNe extends _R{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class qNe extends _R{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let gl=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=Xd(t),this._nulls=new HNe,n&&n.length>0&&(this._isValid=R2t(n))}toVector(){return new yr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),ma({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};gl.prototype.length=1;gl.prototype.stride=1;gl.prototype.children=null;gl.prototype.finished=!1;gl.prototype.nullValues=null;gl.prototype._isValid=()=>!0;class bg extends gl{constructor(t){super(t),this._values=new _R(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class x4 extends gl{constructor(t){super(t),this._pendingLength=0,this._offsets=new qNe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof _4?n[Bf].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class bH{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const D9=2,sh=4,nm=4,Gr=4,Qg=new Int32Array(2),Yhe=new Float32Array(Qg.buffer),Khe=new Float64Array(Qg.buffer),VD=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var _H;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(_H||(_H={}));let u3=class WNe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new WNe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Qg[0]=this.readInt32(t),Yhe[0]}readFloat64(t){return Qg[VD?0:1]=this.readInt32(t),Qg[VD?1:0]=this.readInt32(t+4),Khe[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){Yhe[0]=n,this.writeInt32(t,Qg[0])}writeFloat64(t,n){Khe[0]=n,this.writeInt32(t,Qg[VD?0:1]),this.writeInt32(t+4,Qg[VD?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+sh+nm)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<nm;n++)t+=String.fromCharCode(this.readInt8(this.position_+sh+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=sh;const i=this.bytes_.subarray(t,t+r);return n===_H.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+sh}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=nm)throw new Error("FlatBuffers: file identifier must be length "+nm);for(let n=0;n<nm;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+sh+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},GNe=class YNe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=u3.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=YNe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=u3.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(sh,0),this.writeInt32(this.offset()-t+sh)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*D9;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=D9;l<s;l+=D9)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?Gr:0;if(n){const s=n;if(this.prep(this.minalign,sh+nm+i),s.length!=nm)throw new TypeError("FlatBuffers: file identifier must be length "+nm);for(let o=nm-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,sh+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(sh,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class Ms{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Ms).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Gr),(n||new Ms).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Ms.startKeyValue(t),Ms.addKey(t,n),Ms.addValue(t,r),Ms.endKeyValue(t)}}var Nx;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Nx||(Nx={}));var Dx;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(Dx||(Dx={}));var l3;(function(e){e[e.DenseArray=0]="DenseArray"})(l3||(l3={}));class kl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new kl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Gr),(n||new kl).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return kl.startInt(t),kl.addBitWidth(t,n),kl.addIsSigned(t,r),kl.endInt(t)}}class rm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new rm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Gr),(n||new rm).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new kl).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):l3.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,l3.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class O1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new O1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Gr),(n||new O1).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return O1.startBinary(t),O1.endBinary(t)}}class $1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new $1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Gr),(n||new $1).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return $1.startBool(t),$1.endBool(t)}}var c3;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(c3||(c3={}));let yO=class Tw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new Tw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Gr),(n||new Tw).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):c3.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,c3.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return Tw.startDate(t),Tw.addUnit(t,n),Tw.endDate(t)}};class Nu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new Nu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Gr),(n||new Nu).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return Nu.startDecimal(t),Nu.addPrecision(t,n),Nu.addScale(t,r),Nu.addBitWidth(t,i),Nu.endDecimal(t)}}var _y;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(_y||(_y={}));class oh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new oh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+Gr),(n||new oh).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):_y.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,_y.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return oh.startDuration(t),oh.addUnit(t,n),oh.endDuration(t)}}class ah{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new ah).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Gr),(n||new ah).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return ah.startFixedSizeBinary(t),ah.addByteWidth(t,n),ah.endFixedSizeBinary(t)}}class uh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new uh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Gr),(n||new uh).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return uh.startFixedSizeList(t),uh.addListSize(t,n),uh.endFixedSizeList(t)}}var f3;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(f3||(f3={}));class lh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new lh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Gr),(n||new lh).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):f3.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,f3.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return lh.startFloatingPoint(t),lh.addPrecision(t,n),lh.endFloatingPoint(t)}}var d3;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(d3||(d3={}));class ch{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new ch).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Gr),(n||new ch).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):d3.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,d3.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return ch.startInterval(t),ch.addUnit(t,n),ch.endInterval(t)}}class M1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new M1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Gr),(n||new M1).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return M1.startList(t),M1.endList(t)}}let vO=class Cw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new Cw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Gr),(n||new Cw).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return Cw.startMap(t),Cw.addKeysSorted(t,n),Cw.endMap(t)}};class L1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new L1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Gr),(n||new L1).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return L1.startNull(t),L1.endNull(t)}}class F1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new F1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Gr),(n||new F1).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return F1.startStruct_(t),F1.endStruct_(t)}}let cA=class e1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new e1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Gr),(n||new e1).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):_y.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,_y.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return e1.startTime(t),e1.addUnit(t,n),e1.addBitWidth(t,r),e1.endTime(t)}},fA=class t1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new t1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Gr),(n||new t1).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):_y.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,_y.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return t1.startTimestamp(t),t1.addUnit(t,n),t1.addTimezone(t,r),t1.endTimestamp(t)}};var h3;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(h3||(h3={}));let n1=class r1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new r1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Gr),(n||new r1).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):h3.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,h3.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return r1.startUnion(t),r1.addMode(t,n),r1.addTypeIds(t,r),r1.endUnion(t)}};class j1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new j1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Gr),(n||new j1).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return j1.startUtf8(t),j1.endUtf8(t)}}var Ei;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(Ei||(Ei={}));let xc=class bO{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new bO).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Gr),(n||new bO).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Ei.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new rm).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new bO).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new Ms).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,Ei.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Yd=class zp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new zp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Gr),(n||new zp).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Dx.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new xc).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Ms).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,Dx.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return zp.startSchema(t),zp.addEndianness(t,n),zp.addFields(t,r),zp.addCustomMetadata(t,i),zp.addFeatures(t,s),zp.endSchema(t)}};class Sl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new Sl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Gr),(n||new Sl).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Nx.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Yd).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new bH).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new bH).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Ms).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Nx.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class Ir{constructor(t=[],n,r,i=Ja.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=EH(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new Ir(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new Ir(n,this.metadata)}assign(...t){const n=t[0]instanceof Ir?t[0]:Array.isArray(t[0])?new Ir(t[0]):new Ir(t),r=[...this.fields],i=HD(HD(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:HD(HD(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=EH(s,new Map);return new Ir([...r,...s],i,new Map([...this.dictionaries,...o]))}}Ir.prototype.fields=null;Ir.prototype.metadata=null;Ir.prototype.dictionaries=null;let Vr=class wH{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new wH(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],wH.new(n,r,i,s)}};Vr.prototype.type=null;Vr.prototype.name=null;Vr.prototype.nullable=null;Vr.prototype.metadata=null;function HD(e,t){return new Map([...e||new Map,...t||new Map])}function EH(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(An.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&EH(s.children,t)}return t}var P2t=GNe,O2t=u3;class xH{static decode(t){t=new O2t($r(t));const n=Sl.getRootAsFooter(t),r=Ir.decode(n.schema(),new Map,n.version());return new $2t(r,n)}static encode(t){const n=new P2t,r=Ir.encode(n,t.schema);Sl.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())wy.encode(n,o);const i=n.endVector();Sl.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())wy.encode(n,o);const s=n.endVector();return Sl.startFooter(n),Sl.addSchema(n,r),Sl.addVersion(n,Ja.V5),Sl.addRecordBatches(n,i),Sl.addDictionaries(n,s),Sl.finishFooterBuffer(n,Sl.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Ja.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class $2t extends xH{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return wy.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return wy.decode(n)}return null}}class wy{static decode(t){return new wy(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return bH.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=fd(r),this.bodyLength=fd(n)}}const qD=Object.freeze({done:!0,value:void 0});class KNe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class M2t extends KNe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Zp(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(qD);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return zhe.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return zhe.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Zp(this,void 0,void 0,function*(){return yield this.abort(t),qD})}return(t){return Zp(this,void 0,void 0,function*(){return yield this.close(),qD})}read(t){return Zp(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Zp(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(qD)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class P9 extends M2t{write(t){if((t=$r(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?mH(this.toUint8Array(!0)):this.toUint8Array(!1).then(mH)}toUint8Array(t=!1){return t?Hh(this._values)[0]:Zp(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=GA(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return Hh(o,a)[0]})}}class XNe extends x4{constructor(t){super(t),this._values=new E4(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,$r(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class L2t extends gl{constructor(t){super(t),this._values=new HNe}setValue(t,n){this._values.set(t,+n)}}class S4 extends bg{}S4.prototype._setValue=tNe;class QNe extends S4{}QNe.prototype._setValue=PJ;class JNe extends S4{}JNe.prototype._setValue=OJ;class ZNe extends bg{}ZNe.prototype._setValue=iNe;class F2t extends gl{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new by(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=p3({type:this.type.indices,nullValues:n}),this.dictionary=p3({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class eDe extends bg{}eDe.prototype._setValue=eNe;class j2t extends gl{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new Rx(this.type.listSize,new Vr(n,t.type,!0)),r}}class T4 extends bg{setValue(t,n){this._values.set(t,n)}}class B2t extends T4{setValue(t,n){super.setValue(t,QRe(n))}}class U2t extends T4{}class z2t extends T4{}class C4 extends bg{}C4.prototype._setValue=aNe;class tDe extends C4{}tDe.prototype._setValue=VJ;class nDe extends C4{}nDe.prototype._setValue=HJ;class ZS extends bg{}ZS.prototype._setValue=uNe;class rDe extends ZS{}rDe.prototype._setValue=qJ;class iDe extends ZS{}iDe.prototype._setValue=WJ;class sDe extends ZS{}sDe.prototype._setValue=GJ;class oDe extends ZS{}oDe.prototype._setValue=YJ;class _g extends bg{setValue(t,n){this._values.set(t,n)}}class V2t extends _g{}class H2t extends _g{}class q2t extends _g{}class W2t extends _g{}class G2t extends _g{}class Y2t extends _g{}class K2t extends _g{}class X2t extends _g{}class Q2t extends x4{constructor(t){super(t),this._offsets=new qNe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new kx(new Vr(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class J2t extends x4{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new HI(new Vr(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class Z2t extends gl{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class eIt extends gl{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new ba([...this.type.children,new Vr(n,t.type,!0)]),r}}class eT extends bg{}eT.prototype._setValue=nNe;class aDe extends eT{}aDe.prototype._setValue=$J;class uDe extends eT{}uDe.prototype._setValue=MJ;class lDe extends eT{}lDe.prototype._setValue=LJ;class cDe extends eT{}cDe.prototype._setValue=FJ;class tT extends bg{}tT.prototype._setValue=rNe;class fDe extends tT{}fDe.prototype._setValue=jJ;class dDe extends tT{}dDe.prototype._setValue=BJ;class hDe extends tT{}hDe.prototype._setValue=UJ;class pDe extends tT{}pDe.prototype._setValue=zJ;class tZ extends gl{constructor(t){super(t),this._typeIds=new _R(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Vr(n,t.type)];return this.type=new VI(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class tIt extends tZ{}class nIt extends tZ{constructor(t){super(t),this._offsets=new _R(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class mDe extends x4{constructor(t){super(t),this._values=new E4(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,vJ(n))}_flushPending(t,n){}}mDe.prototype._flushPending=XNe.prototype._flushPending;class rIt extends kn{visitNull(){return Z2t}visitBool(){return L2t}visitInt(){return _g}visitInt8(){return V2t}visitInt16(){return H2t}visitInt32(){return q2t}visitInt64(){return W2t}visitUint8(){return G2t}visitUint16(){return Y2t}visitUint32(){return K2t}visitUint64(){return X2t}visitFloat(){return T4}visitFloat16(){return B2t}visitFloat32(){return U2t}visitFloat64(){return z2t}visitUtf8(){return mDe}visitBinary(){return XNe}visitFixedSizeBinary(){return eDe}visitDate(){return S4}visitDateDay(){return QNe}visitDateMillisecond(){return JNe}visitTimestamp(){return eT}visitTimestampSecond(){return aDe}visitTimestampMillisecond(){return uDe}visitTimestampMicrosecond(){return lDe}visitTimestampNanosecond(){return cDe}visitTime(){return tT}visitTimeSecond(){return fDe}visitTimeMillisecond(){return dDe}visitTimeMicrosecond(){return hDe}visitTimeNanosecond(){return pDe}visitDecimal(){return ZNe}visitList(){return Q2t}visitStruct(){return eIt}visitUnion(){return tZ}visitDenseUnion(){return nIt}visitSparseUnion(){return tIt}visitDictionary(){return F2t}visitInterval(){return C4}visitIntervalDayTime(){return tDe}visitIntervalYearMonth(){return nDe}visitDuration(){return ZS}visitDurationSecond(){return rDe}visitDurationMillisecond(){return iDe}visitDurationMicrosecond(){return sDe}visistDurationNanosecond(){return oDe}visitFixedSizeList(){return j2t}visitMap(){return J2t}}const iIt=new rIt;class Zt extends kn{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function mu(e,t){return t instanceof e.constructor}function wR(e,t){return e===t||mu(e,t)}function wg(e,t){return e===t||mu(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function A4(e,t){return e===t||mu(e,t)&&e.precision===t.precision}function sIt(e,t){return e===t||mu(e,t)&&e.byteWidth===t.byteWidth}function nZ(e,t){return e===t||mu(e,t)&&e.unit===t.unit}function ER(e,t){return e===t||mu(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function xR(e,t){return e===t||mu(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function oIt(e,t){return e===t||mu(e,t)&&e.children.length===t.children.length&&Ey.compareManyFields(e.children,t.children)}function aIt(e,t){return e===t||mu(e,t)&&e.children.length===t.children.length&&Ey.compareManyFields(e.children,t.children)}function rZ(e,t){return e===t||mu(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&Ey.compareManyFields(e.children,t.children)}function uIt(e,t){return e===t||mu(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Ey.visit(e.indices,t.indices)&&Ey.visit(e.dictionary,t.dictionary)}function iZ(e,t){return e===t||mu(e,t)&&e.unit===t.unit}function SR(e,t){return e===t||mu(e,t)&&e.unit===t.unit}function lIt(e,t){return e===t||mu(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Ey.compareManyFields(e.children,t.children)}function cIt(e,t){return e===t||mu(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Ey.compareManyFields(e.children,t.children)}Zt.prototype.visitNull=wR;Zt.prototype.visitBool=wR;Zt.prototype.visitInt=wg;Zt.prototype.visitInt8=wg;Zt.prototype.visitInt16=wg;Zt.prototype.visitInt32=wg;Zt.prototype.visitInt64=wg;Zt.prototype.visitUint8=wg;Zt.prototype.visitUint16=wg;Zt.prototype.visitUint32=wg;Zt.prototype.visitUint64=wg;Zt.prototype.visitFloat=A4;Zt.prototype.visitFloat16=A4;Zt.prototype.visitFloat32=A4;Zt.prototype.visitFloat64=A4;Zt.prototype.visitUtf8=wR;Zt.prototype.visitBinary=wR;Zt.prototype.visitFixedSizeBinary=sIt;Zt.prototype.visitDate=nZ;Zt.prototype.visitDateDay=nZ;Zt.prototype.visitDateMillisecond=nZ;Zt.prototype.visitTimestamp=ER;Zt.prototype.visitTimestampSecond=ER;Zt.prototype.visitTimestampMillisecond=ER;Zt.prototype.visitTimestampMicrosecond=ER;Zt.prototype.visitTimestampNanosecond=ER;Zt.prototype.visitTime=xR;Zt.prototype.visitTimeSecond=xR;Zt.prototype.visitTimeMillisecond=xR;Zt.prototype.visitTimeMicrosecond=xR;Zt.prototype.visitTimeNanosecond=xR;Zt.prototype.visitDecimal=wR;Zt.prototype.visitList=oIt;Zt.prototype.visitStruct=aIt;Zt.prototype.visitUnion=rZ;Zt.prototype.visitDenseUnion=rZ;Zt.prototype.visitSparseUnion=rZ;Zt.prototype.visitDictionary=uIt;Zt.prototype.visitInterval=iZ;Zt.prototype.visitIntervalDayTime=iZ;Zt.prototype.visitIntervalYearMonth=iZ;Zt.prototype.visitDuration=SR;Zt.prototype.visitDurationSecond=SR;Zt.prototype.visitDurationMillisecond=SR;Zt.prototype.visitDurationMicrosecond=SR;Zt.prototype.visitDurationNanosecond=SR;Zt.prototype.visitFixedSizeList=lIt;Zt.prototype.visitMap=cIt;const Ey=new Zt;function SH(e,t){return Ey.compareSchemas(e,t)}function p3(e){const t=e.type,n=new(iIt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(p3(Object.assign(Object.assign({},l),{type:u})))}}return n}function O9(e,t){return fIt(e,t.map(n=>n.data.concat()))}function fIt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=dIt(n,o,c,t,i),o>0&&(r[s++]=ma({type:new ba(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new Rl(e,f))]}function dIt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:ma({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var gDe;class Mu{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new Ir([]),this._offsets=[0],this;let i,s;t[0]instanceof Ir&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof Rl)return[u];if(u instanceof Mu)return u.batches;if(u instanceof Or){if(u.type instanceof ba)return[new Rl(new Ir(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new yr([u[h]])),f=new Ir(l.map((h,p)=>new Vr(String(h),c[p].type))),[,d]=O9(f,c);return d.length===0?[new Rl(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Ir([]),!(i instanceof Ir))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof Rl))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!SH(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??ONe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=PNe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?eZ.visit(new yr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Mu(n,r.map(i=>new Rl(n,i)))}slice(t,n){const r=this.schema;[t,n]=RNe({length:this.numRows},t,n);const i=$Ne(this.data,this._offsets,t,n);return new Mu(r,i.map(s=>new Rl(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=ma({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new yr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new yr([ma({type:new Wm,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=O9(r,a)}return new Mu(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Mu(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Mu(...O9(s,o))}}gDe=Symbol.toStringTag;Mu[gDe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=AE(ZJ),e.get=AE(ul.getVisitFn(re.Struct)),e.set=MNe(Jc.getVisitFn(re.Struct)),e.indexOf=LNe(o3.getVisitFn(re.Struct)),e.getByteLength=AE(Gh.getVisitFn(re.Struct)),"Table"))(Mu.prototype);var yDe;let Rl=class dA{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Ir))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=ma({nullCount:0,type:new ba(this.schema.fields),children:this.schema.fields.map(n=>ma({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Or))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Xhe(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Vr.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new Ir(r),a=ma({type:new ba(r),length:s,children:i,nullCount:0});[this.schema,this.data]=Xhe(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=vDe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return ul.visit(this.data,t)}set(t,n){return Jc.visit(this.data,t,n)}indexOf(t,n){return o3.visit(this.data,t,n)}getByteLength(t){return Gh.visit(this.data,t)}[Symbol.iterator](){return eZ.visit(new yr([this.data]))}toArray(){return[...this]}concat(...t){return new Mu(this.schema,[this,...t])}slice(t,n){const[r]=new yr([this.data]).slice(t,n).data;return new dA(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new yr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new yr([ma({type:new Wm,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new Ir(s,new Map(this.schema.metadata)),i=ma({type:new ba(s),children:o})}return new dA(r,i)}select(t){const n=this.schema.select(t),r=new ba(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new dA(n,ma({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=ma({type:new ba(n.fields),length:this.numRows,children:r});return new dA(n,i)}};yDe=Symbol.toStringTag;Rl[yDe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Rl.prototype);function Xhe(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:ma({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),ma({type:new ba(i),length:n,children:s})]}function vDe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])vDe(a.children,l==null?void 0:l.children,n);if(An.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class hIt extends Rl{constructor(t){const n=t.fields.map(i=>ma({type:i.type})),r=ma({type:new ba(t.fields),nullCount:0,children:n});super(t,r)}}var m3;(function(e){e[e.BUFFER=0]="BUFFER"})(m3||(m3={}));var g3;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(g3||(g3={}));class Jg{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Jg).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Gr),(n||new Jg).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):g3.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):m3.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,g3.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,m3.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Jg.startBodyCompression(t),Jg.addCodec(t,n),Jg.addMethod(t,r),Jg.endBodyCompression(t)}}let bDe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},_De=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},qp=class TH{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new TH).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Gr),(n||new TH).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new _De).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new bDe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Jg).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},Aw=class CH{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new CH).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Gr),(n||new CH).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new qp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var y3;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(y3||(y3={}));let Mg=class Bd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new Bd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Gr),(n||new Bd).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Nx.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):y3.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Ms).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Nx.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,y3.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return Bd.startMessage(t),Bd.addVersion(t,n),Bd.addHeaderType(t,r),Bd.addHeader(t,i),Bd.addBodyLength(t,s),Bd.addCustomMetadata(t,o),Bd.endMessage(t)}};class pIt extends kn{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return L1.startNull(n),L1.endNull(n)}visitInt(t,n){return kl.startInt(n),kl.addBitWidth(n,t.bitWidth),kl.addIsSigned(n,t.isSigned),kl.endInt(n)}visitFloat(t,n){return lh.startFloatingPoint(n),lh.addPrecision(n,t.precision),lh.endFloatingPoint(n)}visitBinary(t,n){return O1.startBinary(n),O1.endBinary(n)}visitBool(t,n){return $1.startBool(n),$1.endBool(n)}visitUtf8(t,n){return j1.startUtf8(n),j1.endUtf8(n)}visitDecimal(t,n){return Nu.startDecimal(n),Nu.addScale(n,t.scale),Nu.addPrecision(n,t.precision),Nu.addBitWidth(n,t.bitWidth),Nu.endDecimal(n)}visitDate(t,n){return yO.startDate(n),yO.addUnit(n,t.unit),yO.endDate(n)}visitTime(t,n){return cA.startTime(n),cA.addUnit(n,t.unit),cA.addBitWidth(n,t.bitWidth),cA.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return fA.startTimestamp(n),fA.addUnit(n,t.unit),r!==void 0&&fA.addTimezone(n,r),fA.endTimestamp(n)}visitInterval(t,n){return ch.startInterval(n),ch.addUnit(n,t.unit),ch.endInterval(n)}visitDuration(t,n){return oh.startDuration(n),oh.addUnit(n,t.unit),oh.endDuration(n)}visitList(t,n){return M1.startList(n),M1.endList(n)}visitStruct(t,n){return F1.startStruct_(n),F1.endStruct_(n)}visitUnion(t,n){n1.startTypeIdsVector(n,t.typeIds.length);const r=n1.createTypeIdsVector(n,t.typeIds);return n1.startUnion(n),n1.addMode(n,t.mode),n1.addTypeIds(n,r),n1.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return rm.startDictionaryEncoding(n),rm.addId(n,BigInt(t.id)),rm.addIsOrdered(n,t.isOrdered),r!==void 0&&rm.addIndexType(n,r),rm.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return ah.startFixedSizeBinary(n),ah.addByteWidth(n,t.byteWidth),ah.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return uh.startFixedSizeList(n),uh.addListSize(n,t.listSize),uh.endFixedSizeList(n)}visitMap(t,n){return vO.startMap(n),vO.addKeysSorted(n,t.keysSorted),vO.endMap(n)}}const $9=new pIt;function mIt(e,t=new Map){return new Ir(yIt(e,t),_O(e.metadata),t)}function wDe(e){return new Zl(e.count,EDe(e.columns),xDe(e.columns))}function gIt(e){return new Yh(wDe(e.data),e.id,e.isDelta)}function yIt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Vr.fromJSON(n,t))}function Qhe(e,t){return(e.children||[]).filter(Boolean).map(n=>Vr.fromJSON(n,t))}function EDe(e){return(e||[]).reduce((t,n)=>[...t,new xy(n.count,vIt(n.VALIDITY)),...EDe(n.children)],[])}function xDe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new yh(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new yh(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new yh(t.length,i.OFFSET.length)),i.DATA&&t.push(new yh(t.length,i.DATA.length)),t=xDe(i.children,t)}return t}function vIt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function bIt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=Zhe(e,Qhe(e,t)),i=new Vr(e.name,o,e.nullable,_O(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?Jhe(r):new yy,a=new by(t.get(n),r,n,s.isOrdered),i=new Vr(e.name,a,e.nullable,_O(e.metadata))):(r=(r=s.indexType)?Jhe(r):new yy,t.set(n,o=Zhe(e,Qhe(e,t))),a=new by(o,r,n,s.isOrdered),i=new Vr(e.name,a,e.nullable,_O(e.metadata))),i||null}function _O(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function Jhe(e){return new cu(e.isSigned,e.bitWidth)}function Zhe(e,t){const n=e.type.name;switch(n){case"NONE":return new Wm;case"null":return new Wm;case"binary":return new UI;case"utf8":return new Cx;case"bool":return new zI;case"list":return new kx((t||[])[0]);case"struct":return new ba(t||[]);case"struct_":return new ba(t||[])}switch(n){case"int":{const r=e.type;return new cu(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new vy(Vo[r.precision])}case"decimal":{const r=e.type;return new t3(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new Ax(qh[r.unit])}case"time":{const r=e.type;return new Gm(Kt[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new n3(Kt[r.unit],r.timezone)}case"interval":{const r=e.type;return new Ix(Wh[r.unit])}case"duration":{const r=e.type;return new r3(Kt[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new VI(al[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new i3(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new Rx(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new HI((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var _It=GNe,wIt=u3;class fh{static fromJSON(t,n){const r=new fh(0,Ja.V5,n);return r._createHeader=EIt(t,n),r}static decode(t){t=new wIt($r(t));const n=Mg.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new fh(r,i,s);return o._createHeader=xIt(n,s),o}static encode(t){const n=new _It;let r=-1;return t.isSchema()?r=Ir.encode(n,t.header()):t.isRecordBatch()?r=Zl.encode(n,t.header()):t.isDictionaryBatch()&&(r=Yh.encode(n,t.header())),Mg.startMessage(n),Mg.addVersion(n,Ja.V5),Mg.addHeader(n,r),Mg.addHeaderType(n,t.headerType),Mg.addBodyLength(n,BigInt(t.bodyLength)),Mg.finishMessageBuffer(n,Mg.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Ir)return new fh(0,Ja.V5,ro.Schema,t);if(t instanceof Zl)return new fh(n,Ja.V5,ro.RecordBatch,t);if(t instanceof Yh)return new fh(n,Ja.V5,ro.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===ro.Schema}isRecordBatch(){return this.headerType===ro.RecordBatch}isDictionaryBatch(){return this.headerType===ro.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=fd(t)}}class Zl{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=fd(t)}}class Yh{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=fd(n)}}class yh{constructor(t,n){this.offset=fd(t),this.length=fd(n)}}class xy{constructor(t,n){this.length=fd(t),this.nullCount=fd(n)}}function EIt(e,t){return()=>{switch(t){case ro.Schema:return Ir.fromJSON(e);case ro.RecordBatch:return Zl.fromJSON(e);case ro.DictionaryBatch:return Yh.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${ro[t]}, type: ${t} }`)}}function xIt(e,t){return()=>{switch(t){case ro.Schema:return Ir.decode(e.header(new Yd),new Map,e.version());case ro.RecordBatch:return Zl.decode(e.header(new qp),e.version());case ro.DictionaryBatch:return Yh.decode(e.header(new Aw),e.version())}throw new Error(`Unrecognized Message type: { name: ${ro[t]}, type: ${t} }`)}}Vr.encode=OIt;Vr.decode=DIt;Vr.fromJSON=bIt;Ir.encode=PIt;Ir.decode=SIt;Ir.fromJSON=mIt;Zl.encode=$It;Zl.decode=TIt;Zl.fromJSON=wDe;Yh.encode=MIt;Yh.decode=CIt;Yh.fromJSON=gIt;xy.encode=LIt;xy.decode=IIt;yh.encode=FIt;yh.decode=AIt;function SIt(e,t=new Map,n=Ja.V5){const r=NIt(e,t);return new Ir(r,wO(e),t,n)}function TIt(e,t=Ja.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Zl(e.length(),kIt(e),RIt(e,t))}function CIt(e,t=Ja.V5){return new Yh(Zl.decode(e.data(),t),e.id(),e.isDelta())}function AIt(e){return new yh(e.offset(),e.length())}function IIt(e){return new xy(e.length(),e.nullCount())}function kIt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=xy.decode(n));return t}function RIt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Ja.V4&&(r.bb_pos+=8*(i+1)),n[++s]=yh.decode(r));return n}function NIt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Vr.decode(r,t));return n}function epe(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Vr.decode(r,t));return n}function DIt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=npe(e,epe(e,t)),r=new Vr(e.name(),i,e.nullable(),wO(e))):t.has(n=fd(a.id()))?(s=(s=a.indexType())?tpe(s):new yy,o=new by(t.get(n),s,n,a.isOrdered()),r=new Vr(e.name(),o,e.nullable(),wO(e))):(s=(s=a.indexType())?tpe(s):new yy,t.set(n,i=npe(e,epe(e,t))),o=new by(i,s,n,a.isOrdered()),r=new Vr(e.name(),o,e.nullable(),wO(e))),r||null}function wO(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function tpe(e){return new cu(e.isSigned(),e.bitWidth())}function npe(e,t){const n=e.typeType();switch(n){case Ei.NONE:return new Wm;case Ei.Null:return new Wm;case Ei.Binary:return new UI;case Ei.Utf8:return new Cx;case Ei.Bool:return new zI;case Ei.List:return new kx((t||[])[0]);case Ei.Struct_:return new ba(t||[])}switch(n){case Ei.Int:{const r=e.type(new kl);return new cu(r.isSigned(),r.bitWidth())}case Ei.FloatingPoint:{const r=e.type(new lh);return new vy(r.precision())}case Ei.Decimal:{const r=e.type(new Nu);return new t3(r.scale(),r.precision(),r.bitWidth())}case Ei.Date:{const r=e.type(new yO);return new Ax(r.unit())}case Ei.Time:{const r=e.type(new cA);return new Gm(r.unit(),r.bitWidth())}case Ei.Timestamp:{const r=e.type(new fA);return new n3(r.unit(),r.timezone())}case Ei.Interval:{const r=e.type(new ch);return new Ix(r.unit())}case Ei.Duration:{const r=e.type(new oh);return new r3(r.unit())}case Ei.Union:{const r=e.type(new n1);return new VI(r.mode(),r.typeIdsArray()||[],t||[])}case Ei.FixedSizeBinary:{const r=e.type(new ah);return new i3(r.byteWidth())}case Ei.FixedSizeList:{const r=e.type(new uh);return new Rx(r.listSize(),(t||[])[0])}case Ei.Map:{const r=e.type(new vO);return new HI((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${Ei[n]}" (${n})`)}function PIt(e,t){const n=t.fields.map(s=>Vr.encode(e,s));Yd.startFieldsVector(e,n.length);const r=Yd.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Yd.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return Ms.startKeyValue(e),Ms.addKey(e,a),Ms.addValue(e,u),Ms.endKeyValue(e)})):-1;return Yd.startSchema(e),Yd.addFields(e,r),Yd.addEndianness(e,jIt?Dx.Little:Dx.Big),i!==-1&&Yd.addCustomMetadata(e,i),Yd.endSchema(e)}function OIt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;An.isDictionary(s)?(o=s.dictionary.typeId,i=$9.visit(s,e),r=$9.visit(s.dictionary,e)):r=$9.visit(s,e);const a=(s.children||[]).map(c=>Vr.encode(e,c)),u=xc.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?xc.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return Ms.startKeyValue(e),Ms.addKey(e,d),Ms.addValue(e,h),Ms.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),xc.startField(e),xc.addType(e,r),xc.addTypeType(e,o),xc.addChildren(e,u),xc.addNullable(e,!!t.nullable),n!==-1&&xc.addName(e,n),i!==-1&&xc.addDictionary(e,i),l!==-1&&xc.addCustomMetadata(e,l),xc.endField(e)}function $It(e,t){const n=t.nodes||[],r=t.buffers||[];qp.startNodesVector(e,n.length);for(const o of n.slice().reverse())xy.encode(e,o);const i=e.endVector();qp.startBuffersVector(e,r.length);for(const o of r.slice().reverse())yh.encode(e,o);const s=e.endVector();return qp.startRecordBatch(e),qp.addLength(e,BigInt(t.length)),qp.addNodes(e,i),qp.addBuffers(e,s),qp.endRecordBatch(e)}function MIt(e,t){const n=Zl.encode(e,t.data);return Aw.startDictionaryBatch(e),Aw.addId(e,BigInt(t.id)),Aw.addIsDelta(e,t.isDelta),Aw.addData(e,n),Aw.endDictionaryBatch(e)}function LIt(e,t){return _De.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function FIt(e,t){return bDe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const jIt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),AH="ARROW1",sZ=new Uint8Array(AH.length);for(let e=0;e<AH.length;e+=1)sZ[e]=AH.codePointAt(e);sZ.length;class ps extends kn{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof Rl?s.data.children:s.data),r=new ps;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof yr)return this.visitMany(t.data),this;const{type:n}=t;if(!An.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(An.isUnion(n))this.nodes.push(new xy(r,0));else{const{nullCount:i}=t;An.isNull(n)||nd.call(this,i<=0?new Uint8Array(0):s3(t.offset,r,t.nullBitmap)),this.nodes.push(new xy(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function nd(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new yh(this._byteLength,t)),this._byteLength+=t,this}function BIt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(nd.call(this,i),n.mode===al.Sparse)return IH.call(this,e);if(n.mode===al.Dense){if(e.offset<=0)return nd.call(this,s),IH.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);nd.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function UIt(e){let t;return e.nullCount>=e.length?nd.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?nd.call(this,s3(e.offset,e.length,t)):nd.call(this,DNe(e.values))}function Eg(e){return nd.call(this,e.values.subarray(0,e.length*e.stride))}function SDe(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return nd.call(this,CRe(-i,t+1,r)),nd.call(this,n.subarray(i,i+o)),this}function oZ(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return nd.call(this,CRe(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function IH(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}ps.prototype.visitBool=UIt;ps.prototype.visitInt=Eg;ps.prototype.visitFloat=Eg;ps.prototype.visitUtf8=SDe;ps.prototype.visitBinary=SDe;ps.prototype.visitFixedSizeBinary=Eg;ps.prototype.visitDate=Eg;ps.prototype.visitTimestamp=Eg;ps.prototype.visitTime=Eg;ps.prototype.visitDecimal=Eg;ps.prototype.visitList=oZ;ps.prototype.visitStruct=IH;ps.prototype.visitUnion=BIt;ps.prototype.visitInterval=Eg;ps.prototype.visitDuration=Eg;ps.prototype.visitFixedSizeList=oZ;ps.prototype.visitMap=oZ;class TDe extends KNe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new P9,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,lv(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return v4(t)?t.then(n=>this.writeAll(n)):b4(t)?cZ(this,t):lZ(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof P9?this._sink=t:(this._sink=new P9,t&&GCt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&YCt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!SH(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Mu&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof Rl&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!SH(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof Rl?t instanceof hIt||this._writeRecordBatch(t):t instanceof Mu?this.writeAll(t.batches):bJ(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=fh.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===ro.RecordBatch?this._recordBatchBlocks.push(new wy(a,t.bodyLength,this._position)):t.headerType===ro.DictionaryBatch&&this._dictionaryBlocks.push(new wy(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=$r(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(fh.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(sZ)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=ps.assemble(t),o=new Zl(t.numRows,r,i),a=fh.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=ps.assemble(new yr([t])),u=new Zl(t.length,s,o),l=new Yh(u,n,r),c=fh.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class aZ extends TDe{static writeAll(t,n){const r=new aZ(n);return v4(t)?t.then(i=>r.writeAll(i)):b4(t)?cZ(r,t):lZ(r,t)}}class uZ extends TDe{static writeAll(t){const n=new uZ;return v4(t)?t.then(r=>n.writeAll(r)):b4(t)?cZ(n,t):lZ(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=xH.encode(new xH(t,Ja.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function lZ(e,t){let n=t;t instanceof Mu&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function cZ(e,t){var n,r,i,s,o,a,u;return Zp(this,void 0,void 0,function*(){try{for(n=!0,r=GA(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function zIt(e,t="stream"){return(t==="stream"?aZ:uZ).writeAll(e).toUint8Array(!0)}function fZ(e,t=1){return(e*t+63&-64||64)/t}function Sy(e,t,n=e.BYTES_PER_ELEMENT){return new e(fZ(t,n))}function dZ(e){return e instanceof Or?e:new Or(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function VIt(e){return new yr([dZ(e)])}const hZ=new TextEncoder;function HIt(e,t,n){const r=hZ.encode(n);return e.set(r,t),r.length}function qIt(e,t,n){return hZ.encodeInto(n,e.subarray(t)).written}const WIt=hZ.encodeInto?qIt:HIt;function rpe(e,t){const n=Sy(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function GIt(e,t){const n=Sy(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function YIt(e,t){const n=Sy(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function KIt(e,t){const n=Sy(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function XIt(e){const t=p3({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function QIt(e,t,n){const r=Sy(Int32Array,t+1),i=Sy(Uint8Array,3*n);let s=0;return{set(o,a){s+=WIt(i,s,o),r[a+1]=s},data:()=>{const o=fZ(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function JIt(e,t){const n=[],r=Sy(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:ZIt(e.dictionary,n,o)})}}function ZIt(e,t,n){const r=QIt(e,t.length,n);return t.forEach(r.set),VIt(r.data())}function ekt(e,t){const n=Sy(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function tkt(e,t,n=!0){let r;switch(e.typeId){case re.Int:r=e.bitWidth<64?rpe:null;break;case re.Float:r=e.precision>0?rpe:null;break;case re.Dictionary:r=e.dictionary.typeId===re.Utf8&&e.indices.typeId===re.Int&&e.indices.bitWidth<64?JIt:null;break;case re.Bool:r=GIt;break;case re.Date:r=e.unit?KIt:YIt;break}return r==null?XIt(e):n?ekt(r(e,t),t):r(e,t)}function nkt(e,t){const n=e.length,r=fZ(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),dZ({type:t,length:n,buffers:[null,i]})}function CDe(e,t,n,r,i=!0){const s=tkt(r,e,i);return t(n,s.set),dZ(s.data())}function pZ(e){if(e instanceof An||e==null)return e;switch(e){case re.Binary:return new UI;case re.Bool:return new zI;case re.DateDay:return new lAt;case re.DateMillisecond:case re.Date:return new cAt;case re.Dictionary:return new by(new Cx,new yy);case re.Float16:return new YRe;case re.Float32:return new kJ;case re.Float64:case re.Float:return new RJ;case re.Int8:return new EJ;case re.Int16:return new xJ;case re.Int32:case re.Int:return new yy;case re.Int64:return new SJ;case re.IntervalDayTime:return new mAt;case re.Interval:case re.IntervalYearMonth:return new gAt;case re.Null:return new Wm;case re.TimeMicrosecond:return new hAt;case re.TimeMillisecond:case re.Time:return new dAt;case re.TimeNanosecond:return new pAt;case re.TimeSecond:return new fAt;case re.Uint8:return new TJ;case re.Uint16:return new CJ;case re.Uint32:return new AJ;case re.Uint64:return new IJ;case re.Utf8:return new Cx;default:Cn(`Unsupported type code: ${Vh(e)}. Use a data type constructor instead?`)}}function rkt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function ADe(e,t){const n=kH();return e(t,n.add),n}function kH(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(qm(t))++e.dates,rkt(t)&&++e.utcdays;else if(P1(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=kH());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=kH())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return pZ(ikt(e))}};return e}function ikt(e){const t=e.count-e.nulls;if(t===0)return re.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?re.Float64:n<128?re.Int8:n<32768?re.Int16:re.Int32:n>=2**32?re.Float64:n<256?re.Uint8:n<65536?re.Uint16:re.Uint32}else{if(e.nums===t)return re.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?re.Int64:Cn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?re.Uint64:Cn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return re.Bool;if(e.utcdays===t)return re.DateDay;if(e.dates===t)return re.DateMillisecond;if(e.arrays===t){const n=Vr.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new Rx(e.minlen,n):new kx(n)}else if(e.structs===t){const n=e.struct_prof;return new ba(Object.keys(n).map(r=>Vr.new(r,n[r].type(),!0)))}else{if(e.strings>0)return re.Dictionary;Cn("Type inference failure")}}}}function skt(e,t,n,r,i,s=!0){if(i=pZ(i),!i){const o=ADe(r,t);s=o.nulls>0,i=o.type()}return CDe(n,r,t,i,s)}function okt(e,t,n,r,i,s=!0){i=pZ(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=akt(o);if(u&&a&&ipe(u.type,i))return u;const l=o.data;if(vR(l)){const c=ukt(l);if(a&&c&&ipe(c,i))return nkt(l,c);i=i||c,s=!1}if(!i){const c=ADe(r,o);s=c.nulls>0,i=c.type()}return CDe(n,r,o,i,s)}function akt(e){return e instanceof yr?e:e.vector instanceof yr?e.vector:null}function ukt(e){const n={Float32Array:kJ,Float64Array:RJ,Int8Array:EJ,Int16Array:xJ,Int32Array:yy,Uint8Array:TJ,Uint16Array:CJ,Uint32Array:AJ,BigInt64Array:SJ,BigUint64Array:IJ}[e.constructor.name];return n?new n:null}function ipe(e,t){return!e||!t?!0:e.compareTo(t)}function lkt(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function ckt(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&P1(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const fkt=()=>Cn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function dkt(){try{return Mu}catch{fkt()}}function IDe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=hkt(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&Cn("Column length mismatch"),a[l]=c});const u=dkt();return new u(a)}function hkt(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=bi(n)?n(e):gr(n)?n:null;if(gr(e))return{dataFrom:skt,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:lkt(e,r,i)};if(pkt(e))return{dataFrom:okt,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:ckt(e,r,i)};Cn("Unsupported input data type")}function pkt(e){return e&&bi(e.reify)}function mkt(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return zIt(IDe(e,r),n)}function gkt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function ykt(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&qm(u))++i,gkt(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function I4(e,t){return bi(t)?t(e):t||e.columnNames()}function kDe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=ykt(vkt(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function vkt(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function mZ(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function bkt(e,t={}){const n=I4(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":qm(l)?g4(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return mZ(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function RDe(e,t={}){if(bi(t))return t(e)+"";const n=typeof e;if(n==="object"){if(qm(e))return t.utc?g4(e):Jke(e);{const r=JSON.stringify(e,(s,o)=>vR(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function k4(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function _kt(e,t={}){const n=I4(e,t.columns),{align:r,format:i}=kDe(e,n,t),s=wkt(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(RDe(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",b=s[m]&&s[m](g,d,f)||"",w=(v?`text-align: ${v};`+(b?" ":""):"")+b;return`<${m}${w?` style="${w}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return mZ(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function wkt(e){return k4(e.style,t=>bi(t)?t:()=>t)}function Ekt(e,t=!0,n=!1){return e===void 0||e?t:n}const xkt=e=>qm(e)?g4(e,!0):e;function Skt(e,t={}){const n=Ekt(t.schema),r=t.format||{},i=I4(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||xkt;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function Tkt(e,t={}){const n=I4(e,t.columns),{align:r,format:i}=kDe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return mZ(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(RDe(u,i[l]))+"|"}}),a+`
`}function NDe(e,t){for(const[n,r]of y4(t))e.set(n,r);return e}function Ckt(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function Ym(e,t,n=new Map){return t=lu(t)?e.columnName(t):t,Xo(t)?n.set(t,t):gr(t)?t.forEach(r=>Ym(e,r,n)):bi(t)?Ym(e,t(e),n):ka(t)?NDe(n,t):Cn(`Invalid column selection: ${Vh(t)}`),n}function R4(e,t){return e.toObject=t,e}function DDe(e){return gr(e)?e.map(DDe):e&&e.toObject?e.toObject():e}function Px(){return R4(e=>e.columnNames(),()=>({all:[]}))}function PDe(...e){return e=e.flat(),R4(t=>{const n=Ym(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:DDe(e)}))}function Akt(e,t){return R4(n=>{let r=lu(e)?e:n.columnIndex(e),i=lu(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function Ikt(e){return Xo(e)&&(e=RegExp(Ckt(e))),R4(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function kkt(e){return vR(e.data)?e.data.constructor:Array}class im extends WTt{static from(t,n){return new im(KTt(t,n),n)}static new(t,n){if(t instanceof im)return t;const r={},i=[];for(const[s,o]of y4(t))r[s]=o,i.push(s);return new im(r,n||i)}constructor(t,n,r,i,s,o){k4(t,YTt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new im(t||this._data,n||(t?null:this._names),o,i!==void 0?i:SCt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=dc(r).groupby(r.groups());return t.forEach(s=>{s=im.new(s),s.numRows()!==n&&Cn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):Cn(`Unrecognized column: ${t}`)}object(t=0){return spe(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=Ym(this,t.columns||Px()),o=xRe(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),CCt(this,u,a,n)}return a}*[Symbol.iterator](){const t=spe(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(kkt(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=TCt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return IDe(this,t)}toArrowBuffer(t){return mkt(this,t)}toCSV(t){return bkt(this,t)}toHTML(t){return _kt(this,t)}toJSON(t){return Skt(this,t)}toMarkdown(t){return Tkt(this,t)}}function spe(e){let t=e._builder;if(!t){const n=xRe(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class Rkt{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function ir(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=Nkt[e.type];s&&s(e,t,n)}const WD=(e,t,n)=>{ir(e.argument,t,n,e)},M9=(e,t,n)=>{ir(e.left,t,n,e),ir(e.right,t,n,e)},ope=(e,t,n)=>{ir(e.test,t,n,e),ir(e.consequent,t,n,e),e.alternate&&ir(e.alternate,t,n,e)},L9=(e,t,n)=>{Kd(e.params,t,n,e),ir(e.body,t,n,e)},ape=(e,t,n)=>{ir(e.callee,t,n,e),Kd(e.arguments,t,n,e)},Kd=(e,t,n,r)=>{e.forEach(i=>ir(i,t,n,r))},Nkt={TemplateLiteral:(e,t,n)=>{Kd(e.expressions,t,n,e),Kd(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{ir(e.object,t,n,e),ir(e.property,t,n,e)},CallExpression:ape,NewExpression:ape,ArrayExpression:(e,t,n)=>{Kd(e.elements,t,n,e)},AssignmentExpression:M9,AwaitExpression:WD,BinaryExpression:M9,LogicalExpression:M9,UnaryExpression:WD,UpdateExpression:WD,ConditionalExpression:ope,ObjectExpression:(e,t,n)=>{Kd(e.properties,t,n,e)},Property:(e,t,n)=>{ir(e.key,t,n,e),ir(e.value,t,n,e)},ArrowFunctionExpression:L9,FunctionExpression:L9,FunctionDeclaration:L9,VariableDeclaration:(e,t,n)=>{Kd(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{ir(e.id,t,n,e),ir(e.init,t,n,e)},SpreadElement:(e,t,n)=>{ir(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{Kd(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{ir(e.expression,t,n,e)},IfStatement:ope,ForStatement:(e,t,n)=>{ir(e.init,t,n,e),ir(e.test,t,n,e),ir(e.update,t,n,e),ir(e.body,t,n,e)},WhileStatement:(e,t,n)=>{ir(e.test,t,n,e),ir(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{ir(e.body,t,n,e),ir(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{ir(e.discriminant,t,n,e),Kd(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&ir(e.test,t,n,e),Kd(e.consequent,t,n,e)},ReturnStatement:WD,Program:(e,t,n)=>{ir(e.body[0],t,n,e)}};function ODe(e){delete e.start,delete e.end,delete e.optional}function upe(e){ODe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function Dkt(e){return ir(e,null,{Column:upe,Constant:upe,Default:ODe}),e}function Fs(e,t){return t&&t.type===e}function Pkt(e){return Fs(kCt,e)||Fs(ICt,e)}function Okt(e){return bi(e)?e:()=>e}const $kt="Escaped functions are not valid as rollup or pivot values.";function Mkt(e,t,n){e.aggronly&&Cn($kt);const r="(row,data)=>fn("+ERe(e.table.columnNames())+",$)";return{escape:yJ.escape(r,Okt(t.expr),n)}}var Lkt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],$De=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],Fkt="-----------------------------------------------------------------------------------------------------------------------------------------------------",MDe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",F9={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},j9="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",jkt={5:j9,"5module":j9+" export import",6:j9+" const class extends export import super"},Bkt=/^in(stanceof)?$/,Ukt=new RegExp("["+MDe+"]"),zkt=new RegExp("["+MDe+Fkt+"]");function RH(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function Km(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&Ukt.test(String.fromCharCode(e)):t===!1?!1:RH(e,$De)}function Ox(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&zkt.test(String.fromCharCode(e)):t===!1?!1:RH(e,$De)||RH(e,Lkt)}var cr=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function vc(e,t){return new cr(e,{beforeExpr:!0,binop:t})}var bc={beforeExpr:!0},xu={startsExpr:!0},gZ={};function Kn(e,t){return t===void 0&&(t={}),t.keyword=e,gZ[e]=new cr(e,t)}var K={num:new cr("num",xu),regexp:new cr("regexp",xu),string:new cr("string",xu),name:new cr("name",xu),privateId:new cr("privateId",xu),eof:new cr("eof"),bracketL:new cr("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new cr("]"),braceL:new cr("{",{beforeExpr:!0,startsExpr:!0}),braceR:new cr("}"),parenL:new cr("(",{beforeExpr:!0,startsExpr:!0}),parenR:new cr(")"),comma:new cr(",",bc),semi:new cr(";",bc),colon:new cr(":",bc),dot:new cr("."),question:new cr("?",bc),questionDot:new cr("?."),arrow:new cr("=>",bc),template:new cr("template"),invalidTemplate:new cr("invalidTemplate"),ellipsis:new cr("...",bc),backQuote:new cr("`",xu),dollarBraceL:new cr("${",{beforeExpr:!0,startsExpr:!0}),eq:new cr("=",{beforeExpr:!0,isAssign:!0}),assign:new cr("_=",{beforeExpr:!0,isAssign:!0}),incDec:new cr("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new cr("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:vc("||",1),logicalAND:vc("&&",2),bitwiseOR:vc("|",3),bitwiseXOR:vc("^",4),bitwiseAND:vc("&",5),equality:vc("==/!=/===/!==",6),relational:vc("</>/<=/>=",7),bitShift:vc("<</>>/>>>",8),plusMin:new cr("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:vc("%",10),star:vc("*",10),slash:vc("/",10),starstar:new cr("**",{beforeExpr:!0}),coalesce:vc("??",1),_break:Kn("break"),_case:Kn("case",bc),_catch:Kn("catch"),_continue:Kn("continue"),_debugger:Kn("debugger"),_default:Kn("default",bc),_do:Kn("do",{isLoop:!0,beforeExpr:!0}),_else:Kn("else",bc),_finally:Kn("finally"),_for:Kn("for",{isLoop:!0}),_function:Kn("function",xu),_if:Kn("if"),_return:Kn("return",bc),_switch:Kn("switch"),_throw:Kn("throw",bc),_try:Kn("try"),_var:Kn("var"),_const:Kn("const"),_while:Kn("while",{isLoop:!0}),_with:Kn("with"),_new:Kn("new",{beforeExpr:!0,startsExpr:!0}),_this:Kn("this",xu),_super:Kn("super",xu),_class:Kn("class",xu),_extends:Kn("extends",bc),_export:Kn("export"),_import:Kn("import",xu),_null:Kn("null",xu),_true:Kn("true",xu),_false:Kn("false",xu),_in:Kn("in",{beforeExpr:!0,binop:7}),_instanceof:Kn("instanceof",{beforeExpr:!0,binop:7}),_typeof:Kn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Kn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Kn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},hf=/\r\n?|\n|\u2028|\u2029/,Vkt=new RegExp(hf.source,"g");function nT(e){return e===10||e===13||e===8232||e===8233}function LDe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(nT(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var FDe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Nc=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,jDe=Object.prototype,Hkt=jDe.hasOwnProperty,qkt=jDe.toString,TR=Object.hasOwn||function(e,t){return Hkt.call(e,t)},lpe=Array.isArray||function(e){return qkt.call(e)==="[object Array]"},cpe=Object.create(null);function v0(e){return cpe[e]||(cpe[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function Ty(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var Wkt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,qI=function(t,n){this.line=t,this.column=n};qI.prototype.offset=function(t){return new qI(this.line,this.column+t)};var N4=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function BDe(e,t){for(var n=1,r=0;;){var i=LDe(e,r,t);if(i<0)return new qI(n,t-r);++n,r=i}}var NH={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},fpe=!1;function Gkt(e){var t={};for(var n in NH)t[n]=e&&TR(e,n)?e[n]:NH[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!fpe&&typeof console=="object"&&console.warn&&(fpe=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),lpe(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return lpe(t.onComment)&&(t.onComment=Ykt(t,t.onComment)),t}function Ykt(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new N4(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var WI=1,rT=2,yZ=4,UDe=8,zDe=16,VDe=32,vZ=64,HDe=128,CR=256,bZ=WI|rT|CR;function _Z(e,t){return rT|(e?yZ:0)|(t?UDe:0)}var v3=0,wZ=1,xg=2,qDe=3,WDe=4,GDe=5,Ws=function(t,n,r){this.options=t=Gkt(t),this.sourceFile=t.sourceFile,this.keywords=v0(jkt[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=F9[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=v0(i);var s=(i?i+" ":"")+F9.strict;this.reservedWordsStrict=v0(s),this.reservedWordsStrictBind=v0(s+" "+F9.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(hf).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=K.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(WI),this.regexpState=null,this.privateNameStack=[]},mp={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Ws.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};mp.inFunction.get=function(){return(this.currentVarScope().flags&rT)>0};mp.inGenerator.get=function(){return(this.currentVarScope().flags&UDe)>0&&!this.currentVarScope().inClassFieldInit};mp.inAsync.get=function(){return(this.currentVarScope().flags&yZ)>0&&!this.currentVarScope().inClassFieldInit};mp.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&CR)return!1;if(t.flags&rT)return(t.flags&yZ)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};mp.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&vZ)>0||n||this.options.allowSuperOutsideMethod};mp.allowDirectSuper.get=function(){return(this.currentThisScope().flags&HDe)>0};mp.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};mp.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(rT|CR))>0||n};mp.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&CR)>0};Ws.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Ws.parse=function(t,n){return new this(n,t).parse()};Ws.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Ws.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Ws.prototype,mp);var gu=Ws.prototype,Kkt=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;gu.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){Nc.lastIndex=e,e+=Nc.exec(this.input)[0].length;var t=Kkt.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){Nc.lastIndex=e+t[0].length;var n=Nc.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||hf.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,Nc.lastIndex=e,e+=Nc.exec(this.input)[0].length,this.input[e]===";"&&e++}};gu.eat=function(e){return this.type===e?(this.next(),!0):!1};gu.isContextual=function(e){return this.type===K.name&&this.value===e&&!this.containsEsc};gu.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};gu.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};gu.canInsertSemicolon=function(){return this.type===K.eof||this.type===K.braceR||hf.test(this.input.slice(this.lastTokEnd,this.start))};gu.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};gu.semicolon=function(){!this.eat(K.semi)&&!this.insertSemicolon()&&this.unexpected()};gu.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};gu.expect=function(e){this.eat(e)||this.unexpected()};gu.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var D4=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};gu.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};gu.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};gu.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};gu.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var Ft=Ws.prototype;Ft.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==K.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var EZ={kind:"loop"},Xkt={kind:"switch"};Ft.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Nc.lastIndex=this.pos;var t=Nc.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(Km(r,!0)){for(var i=n+1;Ox(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!Bkt.test(s))return!0}return!1};Ft.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Nc.lastIndex=this.pos;var e=Nc.exec(this.input),t=this.pos+e[0].length,n;return!hf.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(Ox(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};Ft.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=K._var,s="let"),r){case K._break:case K._continue:return this.parseBreakContinueStatement(i,r.keyword);case K._debugger:return this.parseDebuggerStatement(i);case K._do:return this.parseDoStatement(i);case K._for:return this.parseForStatement(i);case K._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case K._class:return e&&this.unexpected(),this.parseClass(i,!0);case K._if:return this.parseIfStatement(i);case K._return:return this.parseReturnStatement(i);case K._switch:return this.parseSwitchStatement(i);case K._throw:return this.parseThrowStatement(i);case K._try:return this.parseTryStatement(i);case K._const:case K._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case K._while:return this.parseWhileStatement(i);case K._with:return this.parseWithStatement(i);case K.braceL:return this.parseBlock(!0,i);case K.semi:return this.parseEmptyStatement(i);case K._export:case K._import:if(this.options.ecmaVersion>10&&r===K._import){Nc.lastIndex=this.pos;var o=Nc.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===K._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===K.name&&c.type==="Identifier"&&this.eat(K.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};Ft.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(K.semi)||this.insertSemicolon()?e.label=null:this.type!==K.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};Ft.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};Ft.parseDoStatement=function(e){return this.next(),this.labels.push(EZ),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(K._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(K.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};Ft.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(EZ),this.enterScope(0),this.expect(K.parenL),this.type===K.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===K._var||this.type===K._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new D4,u=this.parseExpression(t>-1?"await":!0,a);return this.type===K._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};Ft.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,d2|(n?0:DH),!1,t)};Ft.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(K._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};Ft.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(K.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};Ft.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(K.braceL),this.labels.push(Xkt),this.enterScope(0);for(var t,n=!1;this.type!==K.braceR;)if(this.type===K._case||this.type===K._default){var r=this.type===K._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(K.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};Ft.parseThrowStatement=function(e){return this.next(),hf.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var Qkt=[];Ft.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?VDe:0),this.checkLValPattern(e,t?WDe:xg),this.expect(K.parenR),e};Ft.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===K._catch){var t=this.startNode();this.next(),this.eat(K.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(K._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};Ft.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};Ft.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(EZ),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};Ft.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};Ft.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};Ft.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===K._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};Ft.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};Ft.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(K.braceL),e&&this.enterScope(0);this.type!==K.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};Ft.parseFor=function(e,t){return e.init=t,this.expect(K.semi),e.test=this.type===K.semi?null:this.parseExpression(),this.expect(K.semi),e.update=this.type===K.parenR?null:this.parseExpression(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};Ft.parseForIn=function(e,t){var n=this.type===K._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};Ft.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(K.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===K._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(K.comma))break}return e};Ft.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?wZ:xg,!1)};var d2=1,DH=2,YDe=4;Ft.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===K.star&&t&DH&&this.unexpected(),e.generator=this.eat(K.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&d2&&(e.id=t&YDe&&this.type!==K.name?null:this.parseIdent(),e.id&&!(t&DH)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?wZ:xg:qDe));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(_Z(e.async,e.generator)),t&d2||(e.id=this.type===K.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&d2?"FunctionDeclaration":"FunctionExpression")};Ft.parseFunctionParams=function(e){this.expect(K.parenL),e.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};Ft.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(K.braceL);this.type!==K.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&Jkt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};Ft.parseClassElement=function(e){if(this.eat(K.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(K.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===K.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===K.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(K.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===K.parenL||o!=="method"||i||s){var l=!n.static&&b3(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};Ft.isClassElementNameStart=function(){return this.type===K.name||this.type===K.privateId||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword};Ft.parseClassElementName=function(e){this.type===K.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};Ft.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&b3(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};Ft.parseClassField=function(e){if(b3(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&b3(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(K.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};Ft.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(CR|vZ);this.type!==K.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};Ft.parseClassId=function(e,t){this.type===K.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,xg,!1)):(t===!0&&this.unexpected(),e.id=null)};Ft.parseClassSuper=function(e){e.superClass=this.eat(K._extends)?this.parseExprSubscripts(null,!1):null};Ft.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};Ft.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];TR(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function Jkt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function b3(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}Ft.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};Ft.parseExport=function(e,t){if(this.next(),this.eat(K.star))return this.parseExportAllDeclaration(e,t);if(this.eat(K._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};Ft.parseExportDeclaration=function(e){return this.parseStatement(null)};Ft.parseExportDefaultDeclaration=function(){var e;if(this.type===K._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,d2|YDe,!1,e)}else if(this.type===K._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};Ft.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),TR(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};Ft.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};Ft.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};Ft.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};Ft.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};Ft.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(K.braceL);!this.eat(K.braceR);){if(n)n=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;t.push(this.parseExportSpecifier(e))}return t};Ft.parseImport=function(e){return this.next(),this.type===K.string?(e.specifiers=Qkt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===K.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};Ft.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,xg),this.finishNode(e,"ImportSpecifier")};Ft.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,xg),this.finishNode(e,"ImportDefaultSpecifier")};Ft.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,xg),this.finishNode(e,"ImportNamespaceSpecifier")};Ft.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===K.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(K.comma)))return e;if(this.type===K.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(K.braceL);!this.eat(K.braceR);){if(t)t=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;e.push(this.parseImportSpecifier())}return e};Ft.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===K.string){var e=this.parseLiteral(this.value);return Wkt.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};Ft.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};Ft.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var pf=Ws.prototype;pf.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};pf.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};pf.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};pf.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==K.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};pf.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case K.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(K.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case K.braceL:return this.parseObj(!0)}return this.parseIdent()};pf.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(K.comma),t&&this.type===K.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===K.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};pf.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};pf.parseBindingListItem=function(e){return e};pf.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(K.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};pf.checkLValSimple=function(e,t,n){t===void 0&&(t=v3);var r=t!==v3;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===xg&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(TR(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==GDe&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};pf.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=v3),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};pf.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=v3),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var xf=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},Ri={b_stat:new xf("{",!1),b_expr:new xf("{",!0),b_tmpl:new xf("${",!1),p_stat:new xf("(",!1),p_expr:new xf("(",!0),q_tmpl:new xf("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new xf("function",!1),f_expr:new xf("function",!0),f_expr_gen:new xf("function",!0,!1,null,!0),f_gen:new xf("function",!1,!1,null,!0)},iT=Ws.prototype;iT.initialContext=function(){return[Ri.b_stat]};iT.curContext=function(){return this.context[this.context.length-1]};iT.braceIsBlock=function(e){var t=this.curContext();return t===Ri.f_expr||t===Ri.f_stat?!0:e===K.colon&&(t===Ri.b_stat||t===Ri.b_expr)?!t.isExpr:e===K._return||e===K.name&&this.exprAllowed?hf.test(this.input.slice(this.lastTokEnd,this.start)):e===K._else||e===K.semi||e===K.eof||e===K.parenR||e===K.arrow?!0:e===K.braceL?t===Ri.b_stat:e===K._var||e===K._const||e===K.name?!1:!this.exprAllowed};iT.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};iT.updateContext=function(e){var t,n=this.type;n.keyword&&e===K.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};iT.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};K.parenR.updateContext=K.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Ri.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};K.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Ri.b_stat:Ri.b_expr),this.exprAllowed=!0};K.dollarBraceL.updateContext=function(){this.context.push(Ri.b_tmpl),this.exprAllowed=!0};K.parenL.updateContext=function(e){var t=e===K._if||e===K._for||e===K._with||e===K._while;this.context.push(t?Ri.p_stat:Ri.p_expr),this.exprAllowed=!0};K.incDec.updateContext=function(){};K._function.updateContext=K._class.updateContext=function(e){e.beforeExpr&&e!==K._else&&!(e===K.semi&&this.curContext()!==Ri.p_stat)&&!(e===K._return&&hf.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===K.colon||e===K.braceL)&&this.curContext()===Ri.b_stat)?this.context.push(Ri.f_expr):this.context.push(Ri.f_stat),this.exprAllowed=!1};K.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};K.backQuote.updateContext=function(){this.curContext()===Ri.q_tmpl?this.context.pop():this.context.push(Ri.q_tmpl),this.exprAllowed=!1};K.star.updateContext=function(e){if(e===K._function){var t=this.context.length-1;this.context[t]===Ri.f_expr?this.context[t]=Ri.f_expr_gen:this.context[t]=Ri.f_gen}this.exprAllowed=!0};K.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==K.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var fn=Ws.prototype;fn.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};fn.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===K.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(K.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};fn.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new D4,r=!0);var a=this.start,u=this.startLoc;(this.type===K.parenL||this.type===K.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===K.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===K.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};fn.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(K.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(K.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};fn.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};fn.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==K._in)&&s>r){var o=this.type===K.logicalOR||this.type===K.logicalAND,a=this.type===K.coalesce;a&&(s=K.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===K.coalesce||a&&(this.type===K.logicalOR||this.type===K.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};fn.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};fn.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===K.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&KDe(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===K.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==K._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(K.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function KDe(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&KDe(e.expression)}fn.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};fn.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};fn.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(K.arrow)};fn.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};fn.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(K.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(K.bracketL);if(l||u&&this.type!==K.parenL&&this.type!==K.backQuote||this.eat(K.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(K.bracketR)):this.type===K.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(K.parenL)){var f=new D4,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===K.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};fn.parseExprAtom=function(e,t,n){this.type===K.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case K._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===K.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==K.dot&&this.type!==K.bracketL&&this.type!==K.parenL&&this.unexpected(),this.finishNode(r,"Super");case K._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case K.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(K._function))return this.overrideContext(Ri.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(K.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===K.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(K.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case K.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case K.num:case K.string:return this.parseLiteral(this.value);case K._null:case K._true:case K._false:return r=this.startNode(),r.value=this.type===K._null?null:this.type===K._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case K.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case K.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(K.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case K.braceL:return this.overrideContext(Ri.b_expr),this.parseObj(!1,e);case K._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case K._class:return this.parseClass(this.startNode(),!1);case K._new:return this.parseNew();case K.backQuote:return this.parseTemplate();case K._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};fn.parseExprAtomDefault=function(){this.unexpected()};fn.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===K.parenL&&!e)return this.parseDynamicImport(t);if(this.type===K.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};fn.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(K.parenR)){var t=this.start;this.eat(K.comma)&&this.eat(K.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};fn.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};fn.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};fn.parseParenExpression=function(){this.expect(K.parenL);var e=this.parseExpression();return this.expect(K.parenR),e};fn.shouldParseArrow=function(e){return!this.canInsertSemicolon()};fn.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new D4,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==K.parenR;)if(l?l=!1:this.expect(K.comma),s&&this.afterTrailingComma(K.parenR,!0)){c=!0;break}else if(this.type===K.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(K.parenR),e&&this.shouldParseArrow(u)&&this.eat(K.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};fn.parseParenItem=function(e){return e};fn.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var Zkt=[];fn.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===K.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(K.parenL)?e.arguments=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1):e.arguments=Zkt,this.finishNode(e,"NewExpression")};fn.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===K.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===K.backQuote,this.finishNode(n,"TemplateElement")};fn.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===K.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(K.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(K.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};fn.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===K.name||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===K.star)&&!hf.test(this.input.slice(this.lastTokEnd,this.start))};fn.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(K.braceR);){if(r)r=!1;else if(this.expect(K.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(K.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};fn.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(K.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===K.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(K.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(K.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};fn.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};fn.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===K.colon&&this.unexpected(),this.eat(K.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===K.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==K.comma&&this.type!==K.braceR&&this.type!==K.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===K.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};fn.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(K.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(K.bracketR),e.key;e.computed=!1}return e.key=this.type===K.num||this.type===K.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};fn.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};fn.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(_Z(t,r.generator)|vZ|(n?HDe:0)),this.expect(K.parenL),r.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};fn.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(_Z(n,!1)|zDe),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};fn.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==K.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,GDe),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};fn.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};fn.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,wZ,t?null:n)}};fn.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(K.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===K.comma?o=null:this.type===K.ellipsis?(o=this.parseSpread(r),r&&this.type===K.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};fn.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};fn.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};fn.parseIdentNode=function(){var e=this.startNode();return this.type===K.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=K.name):this.unexpected(),e};fn.parsePrivateIdent=function(){var e=this.startNode();return this.type===K.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};fn.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===K.semi||this.canInsertSemicolon()||this.type!==K.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(K.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};fn.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var _3=Ws.prototype;_3.raise=function(e,t){var n=BDe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};_3.raiseRecoverable=_3.raise;_3.curPosition=function(){if(this.options.locations)return new qI(this.curLine,this.pos-this.lineStart)};var dv=Ws.prototype,eRt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};dv.enterScope=function(e){this.scopeStack.push(new eRt(e))};dv.exitScope=function(){this.scopeStack.pop()};dv.treatFunctionsAsVarInScope=function(e){return e.flags&rT||!this.inModule&&e.flags&WI};dv.declareName=function(e,t,n){var r=!1;if(t===xg){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&WI&&delete this.undefinedExports[e]}else if(t===WDe){var s=this.currentScope();s.lexical.push(e)}else if(t===qDe){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&VDe&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&WI&&delete this.undefinedExports[e],u.flags&bZ)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};dv.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};dv.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};dv.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&bZ)return t}};dv.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&bZ&&!(t.flags&zDe))return t}};var P4=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new N4(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},AR=Ws.prototype;AR.startNode=function(){return new P4(this,this.start,this.startLoc)};AR.startNodeAt=function(e,t){return new P4(this,e,t)};function XDe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}AR.finishNode=function(e,t){return XDe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};AR.finishNodeAt=function(e,t,n,r){return XDe.call(this,e,t,n,r)};AR.copyNode=function(e){var t=new P4(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var QDe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",JDe=QDe+" Extended_Pictographic",ZDe=JDe,ePe=ZDe+" EBase EComp EMod EPres ExtPict",tPe=ePe,tRt=tPe,nRt={9:QDe,10:JDe,11:ZDe,12:ePe,13:tPe,14:tRt},rRt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",iRt={9:"",10:"",11:"",12:"",13:"",14:rRt},dpe="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",nPe="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",rPe=nPe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",iPe=rPe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",sPe=iPe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",oPe=sPe+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",sRt=oPe+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",oRt={9:nPe,10:rPe,11:iPe,12:sPe,13:oPe,14:sRt},aPe={};function aRt(e){var t=aPe[e]={binary:v0(nRt[e]+" "+dpe),binaryOfStrings:v0(iRt[e]),nonBinary:{General_Category:v0(dpe),Script:v0(oRt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var B9=0,hpe=[9,10,11,12,13,14];B9<hpe.length;B9+=1){var uRt=hpe[B9];aRt(uRt)}var At=Ws.prototype,gp=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=aPe[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};gp.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};gp.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};gp.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};gp.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};gp.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};gp.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};gp.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};gp.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};gp.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};At.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};At.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};At.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};At.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};At.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};At.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};At.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};At.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};At.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};At.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};At.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};At.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};At.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};At.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};At.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};At.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};At.regexp_eatSyntaxCharacter=function(e){var t=e.current();return uPe(t)?(e.lastIntValue=t,e.advance(),!0):!1};function uPe(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}At.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!uPe(n);)e.advance();return e.pos!==t};At.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};At.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};At.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};At.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=Ty(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=Ty(e.lastIntValue);return!0}return!1};At.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),lRt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function lRt(e){return Km(e,!0)||e===36||e===95}At.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),cRt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function cRt(e){return Ox(e,!0)||e===36||e===95||e===8204||e===8205}At.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};At.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};At.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};At.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};At.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};At.regexp_eatZero=function(e){return e.current()===48&&!O4(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};At.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};At.regexp_eatControlLetter=function(e){var t=e.current();return lPe(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function lPe(e){return e>=65&&e<=90||e>=97&&e<=122}At.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&fRt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function fRt(e){return e>=0&&e<=1114111}At.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};At.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var cPe=0,Xm=1,$c=2;At.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(dRt(t))return e.lastIntValue=-1,e.advance(),Xm;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===$c&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return cPe};function dRt(e){return e===100||e===68||e===115||e===83||e===119||e===87}At.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Xm}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return cPe};At.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){TR(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};At.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Xm;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return $c;e.raise("Invalid property name")};At.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";fPe(t=e.current());)e.lastStringValue+=Ty(t),e.advance();return e.lastStringValue!==""};function fPe(e){return lPe(e)||e===95}At.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";hRt(t=e.current());)e.lastStringValue+=Ty(t),e.advance();return e.lastStringValue!==""};function hRt(e){return fPe(e)||O4(e)}At.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};At.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===$c&&e.raise("Negated character class may contain strings"),!0}return!1};At.regexp_classContents=function(e){return e.current()===93?Xm:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Xm)};At.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};At.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||pPe(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};At.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};At.regexp_classSetExpression=function(e){var t=Xm,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===$c&&(t=$c);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==$c&&(t=Xm);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===$c&&(t=$c)}};At.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};At.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Xm:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};At.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===$c&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};At.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};At.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===$c&&(t=$c);return t};At.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Xm:$c};At.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&pRt(n)||mRt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function pRt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function mRt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}At.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return gRt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function gRt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}At.regexp_eatClassControlLetter=function(e){var t=e.current();return O4(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};At.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};At.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;O4(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function O4(e){return e>=48&&e<=57}At.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;dPe(n=e.current());)e.lastIntValue=16*e.lastIntValue+hPe(n),e.advance();return e.pos!==t};function dPe(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function hPe(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}At.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};At.regexp_eatOctalDigit=function(e){var t=e.current();return pPe(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function pPe(e){return e>=48&&e<=55}At.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!dPe(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+hPe(i),e.advance()}return!0};var xZ=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new N4(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Yn=Ws.prototype;Yn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new xZ(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Yn.getToken=function(){return this.next(),new xZ(this)};typeof Symbol<"u"&&(Yn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===K.eof,value:t}}}});Yn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(K.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Yn.readToken=function(e){return Km(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Yn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Yn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=LDe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Yn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!nT(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Yn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&FDe.test(String.fromCharCode(e)))++this.pos;else break e}}};Yn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Yn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(K.ellipsis)):(++this.pos,this.finishToken(K.dot))};Yn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(K.assign,2):this.finishOp(K.slash,1)};Yn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?K.star:K.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=K.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(K.assign,n+1):this.finishOp(r,n)};Yn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(K.assign,3)}return this.finishOp(e===124?K.logicalOR:K.logicalAND,2)}return t===61?this.finishOp(K.assign,2):this.finishOp(e===124?K.bitwiseOR:K.bitwiseAND,1)};Yn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(K.assign,2):this.finishOp(K.bitwiseXOR,1)};Yn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||hf.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(K.incDec,2):t===61?this.finishOp(K.assign,2):this.finishOp(K.plusMin,1)};Yn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(K.assign,n+1):this.finishOp(K.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(K.relational,n))};Yn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(K.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(K.arrow)):this.finishOp(e===61?K.eq:K.prefix,1)};Yn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(K.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(K.assign,3)}return this.finishOp(K.coalesce,2)}}return this.finishOp(K.question,1)};Yn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),Km(t,!0)||t===92))return this.finishToken(K.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Ty(t)+"'")};Yn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(K.parenL);case 41:return++this.pos,this.finishToken(K.parenR);case 59:return++this.pos,this.finishToken(K.semi);case 44:return++this.pos,this.finishToken(K.comma);case 91:return++this.pos,this.finishToken(K.bracketL);case 93:return++this.pos,this.finishToken(K.bracketR);case 123:return++this.pos,this.finishToken(K.braceL);case 125:return++this.pos,this.finishToken(K.braceR);case 58:return++this.pos,this.finishToken(K.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(K.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(K.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Ty(e)+"'")};Yn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Yn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(hf.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new gp(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(K.regexp,{pattern:i,flags:o,value:u})};Yn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function yRt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function mPe(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Yn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=mPe(this.input.slice(t,this.pos)),++this.pos):Km(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,n)};Yn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=mPe(this.input.slice(t,this.pos));return++this.pos,Km(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),Km(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=yRt(this.input.slice(t,this.pos),n);return this.finishToken(K.num,s)};Yn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Yn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(nT(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(K.string,t)};var gPe={};Yn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===gPe)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Yn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw gPe;this.raise(e,t)};Yn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===K.template||this.type===K.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(K.dollarBraceL)):(++this.pos,this.finishToken(K.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(K.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(nT(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Yn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(K.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Yn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Ty(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return nT(t)?"":String.fromCharCode(t)}};Yn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Yn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(Ox(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?Km:Ox)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=Ty(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Yn.readWord=function(){var e=this.readWord1(),t=K.name;return this.keywords.test(e)&&(t=gZ[e]),this.finishToken(t,e)};var vRt="8.11.3";Ws.acorn={Parser:Ws,version:vRt,defaultOptions:NH,Position:qI,SourceLocation:N4,getLineInfo:BDe,Node:P4,TokenType:cr,tokTypes:K,keywordTypes:gZ,TokContext:xf,tokContexts:Ri,isIdentifierChar:Ox,isIdentifierStart:Km,Token:xZ,isNewLine:nT,lineBreak:hf,lineBreakG:Vkt,nonASCIIwhitespace:FDe};function bRt(e,t){return Ws.parse(e,t)}const SZ={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},_Rt={ecmaVersion:11},ppe="$",wRt="d",ERt="d1",xRt="d2",Po=e=>(t,n)=>n.error(t,e+" not allowed"),SRt=Po("Aggregate function"),TRt=Po("Window function"),CRt="Invalid argument",TZ="Invalid column reference",ARt=TZ+" (must be input to an aggregate function)",yPe="Invalid function call",IRt="Invalid member expression",kRt="Invalid operator parameter",RRt="Invalid param reference",NRt="Invalid variable reference",DRt="Variable not accessible in operator call",PRt="Unsupported variable declaration",ORt="Unsupported destructuring pattern",vPe="Table expressions do not support closures",bPe="Use aq.escape(fn) to use a function as-is (including closures)",$Rt="use table.params({ name: value }) to define dynamic parameters",MRt="use aq.addFunction(name, fn) to add new op functions",LRt=`
Note: ${vPe}. ${bPe}, or ${$Rt}.`,_Pe=`
Note: ${vPe}. ${bPe}, or ${MRt}.`,FRt=`The ${_Re} method is not valid in multi-table expressions.`;function jRt(e,t){const n=BRt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,Pkt(r)?(zRt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=ERt),e.scope.add(e.tuple2=xRt),e.scope.add(e.$param=ppe)):(e.scope.add(e.tuple=wRt),e.scope.add(e.$param=ppe)),ir(r,e,CZ),e.root}function BRt(e){try{const t=e.field?URt(e):gr(e)?Vh(e):e;return bRt(`expr=(${t})`,_Rt).body[0].expression.right}catch{Cn(`Expression parse error: ${e+""}`)}}function URt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const CZ={FunctionDeclaration:Po("Function definitions"),ForStatement:Po("For loops"),ForOfStatement:Po("For-of loops"),ForInStatement:Po("For-in loops"),WhileStatement:Po("While loops"),DoWhileStatement:Po("Do-while loops"),AwaitExpression:Po("Await expressions"),ArrowFunctionExpression:Po("Function definitions"),AssignmentExpression:Po("Assignments"),FunctionExpression:Po("Function definitions"),NewExpression:Po('Use of "new"'),UpdateExpression:Po("Update expressions"),VariableDeclarator(e,t){$H(e.id,t)},Identifier(e,t,n){xPe(e,t,n)&&!t.scope.has(e.name)&&t.error(e,NRt,LRt)},CallExpression(e,t){const n=wPe(e.callee),r=yRe(n)||vRe(n);if(r){if((t.join||t.aggregate===!1)&&mJ(n)&&SRt(e,t),(t.join||t.window===!1)&&gJ(n)&&TRt(e,t),t.$op=1,t.ast)OH(e,n,t),e.arguments.forEach(i=>ir(i,t,PH));else{const i=t.op(VRt(t,r,n,e.arguments));Object.assign(e,{type:dRe,name:i.id})}return t.$op=0,!1}else gRe(n)?OH(e,n,t):t.error(e,yPe,_Pe)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!Fs(W0,r))return;const{name:s}=r;if(EPe(e)&&Fs(W0,i)&&cd(SZ,i.name)){CPe(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return mpe(e,o,t,SPe,n);if(s===t.$param)return mpe(e,o,t,qRt);t.paramsRef.has(s)?GI(e,t.paramsRef.get(s)):t.columnRef.has(s)?TPe(r,s,t,e):cd(t.params,s)&&GI(r,s)}};function mpe(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(Fs(QS,s))a=s.value;else try{ir(s,n,CZ,e),a=n.param(s)}catch{n.error(e,IRt)}return r(e,a,t,n,i),!1}const PH={...CZ,VariableDeclarator:Po("Variable declaration in operator call"),Identifier(e,t,n){xPe(e,t,n)&&t.error(e,DRt)},CallExpression(e,t){const n=wPe(e.callee);gRe(n)?OH(e,n,t):t.error(e,yPe,_Pe)}};function zRt(e,t){e.generator&&Po("Generator functions")(e,t),e.async&&Po("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(vC(t,n[0],"tuple1",i(1)),r>1&&vC(t,n[1],"tuple2",i(2)),r>2&&vC(t,n[2],"$param",s)):(vC(t,n[0],"tuple",i(0)),r>1&&vC(t,n[1],"$param",s))),t.root=e.body}function vC(e,t,n,r){Fs(W0,t)?(e.scope.add(t.name),e[n]=t.name):Fs(cRe,t)&&t.properties.forEach(i=>{const s=Fs(W0,i.key)?i.key.name:Fs(QS,i.key)?i.key.value:e.error(i,CRt);Fs(W0,i.value)||e.error(i.value,ORt),r(i.value.name,s)})}function VRt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(ir(u,e,PH),i.push(e.field(u))):l<a?(ir(u,e,PH),s.push(e.param(u))):e.error(u,kRt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function wPe(e){return Fs(W0,e)?e.name:Fs(lRe,e)?EPe(e)?HRt(e.property.name):e.property.name:null}function EPe(e){return Fs(W0,e.object)&&e.object.name==="Math"}function HRt(e){return e==="max"?"greatest":e==="min"?"least":e}function xPe(e,t,n){const{name:r}=e;if(!(Fs(lRe,n)&&n.property===e)){if(!(Fs(fRe,n)&&n.key===e))if(t.paramsRef.has(r))GI(e,t.paramsRef.get(r));else if(t.columnRef.has(r))TPe(e,r,t,n);else if(cd(t.params,r))GI(e,r);else if(cd(SZ,r))CPe(e,r);else return!0}}function SPe(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,TZ),r.aggronly&&!r.$op&&r.error(e,ARt),bRe(e,t,n,o,i)}function TPe(e,t,n,r){const[i,s]=n.columnRef.get(t);SPe(e,i,s,n,r)}function qRt(e,t,n,r){r.params&&!cd(r.params,t)&&r.error(e,RRt),GI(e,t)}function GI(e,t){e.type=OCt,e.name=t}function CPe(e,t){e.type=NCt,e.name=t,e.raw=SZ[t]}function OH(e,t,n){if(t===_Re){const r=n.table;r||n.error(e,FRt),wRe(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=lu(s)?r.columnName(s):s;return r.column(o)||n.error(i,TZ),o}):r.columnNames())}else e.callee={type:PCt,name:t}}function $H(e,t){Fs(W0,e)?t.scope.add(e.name):Fs(ACt,e)?e.elements.forEach(n=>$H(n,t)):Fs(cRe,e)?e.properties.forEach(n=>$H(n.value,t)):t.error(e.id,PRt)}const WRt={[bR]:1,[dRe]:1};function ll(e,t={}){const n=t.generate||JM,r=t.compiler||yJ,i=YRt(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=GRt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return Fs(QS,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?Dkt(g):f(n(g),i));u.push(y),WRt[g.type]&&y!==g&&ka(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,b=m.end-6,w=String(d.spec).slice(v,b);Cn(`${g}: "${w}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of y4(e))d.value(m+"",g.escape?Mkt(d,g,i):jRt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function GRt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function YRt(e){return(e.table?U9(e.table):e.join?{...U9(e.join[1]),...U9(e.join[0])}:{})||{}}function U9(e){return e&&bi(e.params)?e.params():{}}const APe="Expr",Sf="ExprList",IPe="ExprNumber",hA="ExprObject",Jw="JoinKeys",w3="JoinValues",Sc="Options",AZ="OrderKeys",Vg="SelectionList",p1="TableRef",Zw="TableRefList",KRt="Descending",XRt="Query",QRt="Selection",JRt="Verb",ZRt="Window";function $4(e,t){return e&&e.expr?new gpe({...e,...t}):new gpe(t,e)}class gpe{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...bi(this.expr)?{func:!0}:{}}}}function eNt(e){return $4(e,{desc:!0})}function xb(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return $4(e,t?{expr:t,...r}:r)}function tNt(e,t,n){return $4(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function nNt(e){const t=n=>n;return t.toString=()=>e,t}function ype(e,t){return t=t&&bi(t.query)?t.query():t,t&&bi(t.evaluate)?t.evaluate(null,e):e(t)}function kPe(e){return ka(e)&&(gr(e.all)||gr(e.matches)||gr(e.not)||gr(e.range))}function YI(e){return e&&bi(e.toObject)?e.toObject():bi(e)?{expr:String(e),func:!0}:gr(e)?e.map(YI):ka(e)?k4(e,t=>YI(t)):e}function IZ(e){return gr(e)?e.map(IZ):ka(e)?gr(e.verbs)?RZ.from(e):gr(e.all)?Px():gr(e.range)?Akt(...e.range):gr(e.match)?Ikt(RegExp(...e.match)):gr(e.not)?PDe(e.not.map(YI)):rNt(e):e}function rNt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=xb(n):e.func===!0&&(t=n=nNt(n)),ka(e.window)){const{frame:r,peers:i}=e.window;t=n=tNt(n,r,i)}e.desc===!0&&(t=eNt(n))}return e===t?k4(e,r=>IZ(r)):t}function iNt(e){return gr(e)?e.map(sNt):e}function sNt(e){const t=[];return ol(e).forEach(n=>{lu(n)?t.push(n):Xo(n)?t.push(xb(n,null)):ka(n)&&n.expr||bi(n)?t.push(n):Cn(`Invalid key value: ${n+""}`)}),t}function oNt(e){return gr(e)?e.map(aNt):e}function aNt(e,t){return t<2?ol(e):e}function uNt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(ka(r)&&!bi(r))for(const i in r)t.push(r[i]);else n=lu(r)?r:Xo(r)?xb(n):bi(r)?n:Cn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const lNt={[APe]:PPe,[Sf]:$x,[IPe]:mNt,[hA]:Cy,[Jw]:gNt,[w3]:yNt,[AZ]:$x,[Vg]:hNt};function cNt(e,t,n){return t===p1?vpe(e):t===Zw?e.map(vpe):RPe(YI(e),t,n)}function RPe(e,t,n){return t===Sc?e&&fNt(e,n):lNt[t](e)}function fNt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?RPe(i,t[r]):i}return n}function dNt(e,t){return ll({expr:e},{...t,ast:!0}).exprs[0]}function kZ(e){return{type:bR,name:e}}function NPe(e){return{type:bR,index:e}}function Cy(e,t){if(Xo(e))return dNt(e,t);if(e.expr){let n;if(e.field===!0?n=kZ(e.expr):e.func===!0&&(n=Cy(e.expr,t)),n)return e.desc&&(n={type:KRt,expr:n}),e.window&&(n={type:ZRt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...Cy(e[n],t),as:n}))}function DPe(e){const t=QRt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:$x(e.not)}:e.range?{type:t,operator:"range",arguments:$x(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:Cn("Invalid input")}function hNt(e){return ol(e).map(pNt).flat()}function pNt(e){return kPe(e)?DPe(e):lu(e)?NPe(e):Xo(e)?kZ(e):ka(e)?Object.keys(e).map(t=>({type:bR,name:t,as:e[t]})):Cn("Invalid input")}function PPe(e){return kPe(e)?DPe(e):lu(e)?NPe(e):Xo(e)?kZ(e):ka(e)?Cy(e):Cn("Invalid input")}function $x(e){return ol(e).map(PPe).flat()}function mNt(e){return lu(e)?e:Cy(e)}function gNt(e){return gr(e)?e.map($x):Cy(e,{join:!0})}function yNt(e){return gr(e)?e.map((t,n)=>n<2?$x(t):Cy(t,{join:!0})):Cy(e,{join:!0})}function vpe(e){return e&&bi(e.toAST)?e.toAST():e}class OPe{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===Jw?iNt(a):o===w3?oNt(a):o===AZ?uNt(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=MH[t.verb],r=(n.schema||[]).map(({name:i})=>IZ(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===p1?ype(n,o):s===Zw?o.map(a=>ype(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=YI(this[n])}),t}toAST(){const t={type:JRt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=cNt(this[n],r,i)}),t}}function zr(e,t){return Object.assign((...n)=>new OPe(e,t,n),{schema:t})}const MH={count:zr("count",[{name:"options",type:Sc}]),derive:zr("derive",[{name:"values",type:hA},{name:"options",type:Sc,props:{before:Vg,after:Vg}}]),filter:zr("filter",[{name:"criteria",type:hA}]),groupby:zr("groupby",[{name:"keys",type:Sf}]),orderby:zr("orderby",[{name:"keys",type:AZ}]),relocate:zr("relocate",[{name:"columns",type:Vg},{name:"options",type:Sc,props:{before:Vg,after:Vg}}]),rename:zr("rename",[{name:"columns",type:Vg}]),rollup:zr("rollup",[{name:"values",type:hA}]),sample:zr("sample",[{name:"size",type:IPe},{name:"options",type:Sc,props:{weight:APe}}]),select:zr("select",[{name:"columns",type:Vg}]),ungroup:zr("ungroup"),unorder:zr("unorder"),reify:zr("reify"),dedupe:zr("dedupe",[{name:"keys",type:Sf,default:[]}]),impute:zr("impute",[{name:"values",type:hA},{name:"options",type:Sc,props:{expand:Sf}}]),fold:zr("fold",[{name:"values",type:Sf},{name:"options",type:Sc}]),pivot:zr("pivot",[{name:"keys",type:Sf},{name:"values",type:Sf},{name:"options",type:Sc}]),spread:zr("spread",[{name:"values",type:Sf},{name:"options",type:Sc}]),unroll:zr("unroll",[{name:"values",type:Sf},{name:"options",type:Sc,props:{drop:Sf}}]),lookup:zr("lookup",[{name:"table",type:p1},{name:"on",type:Jw},{name:"values",type:Sf}]),join:zr("join",[{name:"table",type:p1},{name:"on",type:Jw},{name:"values",type:w3},{name:"options",type:Sc}]),cross:zr("cross",[{name:"table",type:p1},{name:"values",type:w3},{name:"options",type:Sc}]),semijoin:zr("semijoin",[{name:"table",type:p1},{name:"on",type:Jw}]),antijoin:zr("antijoin",[{name:"table",type:p1},{name:"on",type:Jw}]),concat:zr("concat",[{name:"tables",type:Zw}]),union:zr("union",[{name:"tables",type:Zw}]),intersect:zr("intersect",[{name:"tables",type:Zw}]),except:zr("except",[{name:"tables",type:Zw}])};let RZ=class $Pe extends Xke{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new $Pe(t.map(OPe.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return bpe(this,"toObject")}toJSON(){return this.toObject()}toAST(){return bpe(this,"toAST",{type:XRt})}};function bpe(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function vNt(e,t){return new RZ(e._verbs.concat(t),e._params,e._table)}for(const e in MH){const t=MH[e];RZ.prototype["__"+e]=function(n,...r){return vNt(n,t(...r))}}function sT(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function bNt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function NZ(e,t){const n=dc();return t.forEach((r,i)=>{const s=Xo(r)?r:i;if(s){const o=e.column(i)||Cn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function MPe(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||Cn("relocate requires a before or after option."),i&&s&&Cn("relocate accepts only one of the before or after options."),t=Ym(e,t);const o=[...Ym(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),NZ(e,u)}function IR(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function DZ(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function _Nt(e,t=0,n=e.length){let r=n?e[t++]:fr;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function wNt(e,t=0,n=e.length){let r=n?e[t++]:fr;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function GD(e){return FI(e)?e:+e}function ENt(e,t){const n=e.length;if(!n)return fr;if((t=+t)<=0||n<2)return GD(e[0]);if(t>=1)return GD(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=GD(e[i]);return FI(s)?s:s+(GD(e[i+1])-s)*(r-i)}class xNt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:_Nt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:wNt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(DZ)),ENt(this._sorted,t)}}const E3=(e,t,n)=>sT(t,"{"+IR(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function SNt(e,t){const{ops:n,output:r}=TNt(e,t),i=e[0].fields,s=i.length,o=s===0?PZ:s===1?CNt:s===2?ANt:Cn("Unsupported field count: "+s);return new o(i,n,r,t)}function TNt(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=yRe(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class PZ extends Rkt{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new xNt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class CNt extends PZ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=E3(n,s,"add"),this._rem=E3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,Yf(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,Yf(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class ANt extends PZ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=E3(n,s,"add"),this._rem=E3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,Yf(i)&&Yf(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,Yf(i)&&Yf(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function b_(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=oT(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function oT(e,t,n){if(!t.length)return n;const r=LPe(t),i=e.groups(),s=i?i.size:1;return n=n||m4(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=jPe(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=FPe(e,o);o.write(a,n,0)}),n}function LPe(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(SNt(r[i],t));return n}function FPe(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function jPe(e,t,n){const{keys:r,size:i}=n,s=m4(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function BPe(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function UPe(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const _pe=UPe(DZ);function INt(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?sT(["w","r","k"],"{"+IR(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i?i.map(b=>b.init()):null;for(let b=0;b<f;++b)r[b].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,b=p.i0,w=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=_pe.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=_pe.right(o,o[p.i1-1])));for(let E=0;E<d;++E){const x=i[E],S=a[E];for(let C=b;C<p.i0;++C)x.rem(S,s[C],e);for(let C=w;C<p.i1;++C)x.add(S,s[C],e);x.write(S,u,l)}return h(p,u,l),u}};return p}const kNt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),RNt=e=>!!e.peers;function NNt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=vRe(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function DNt(e,t,n,r={},i){const s=e.data(),o=PNt(i,s),a=o.length,u=sT(["r","d","op"],"{"+IR(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=ONt(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function PNt(e,t){const n={};return e.forEach(r=>{const i=kNt(r),s=RNt(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});mJ(r.name)?a.push(r):u.push(NNt(r))}),Object.values(n).map(r=>INt(t,r.frame,r.peers,r.winOps,LPe(r.aggOps,r.frame[0]!=null?-1:1)))}function ONt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function $Nt(e){return gJ(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function OZ(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=dc(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=MNt(r),c=e.isGrouped()?e.groups().size:1,f=oT(e,u,m4(r.length,()=>Array(c)));return l.length?DNt(e,a,n,f,l):LNt(e,a,n,f),e.create(o)}function MNt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,($Nt(s)?n:t).push(s)}return[t,n]}function LNt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function FNt(e,t,n={}){const r=OZ(e,ll(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:MPe(r,Object.keys(t).filter(i=>!e.column(i)),n)}function jNt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const YD=2147483648,BNt=4294967295;class zPe{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&YD>>>t}set(t){this._bits[t>>5]|=YD>>>t}clear(t){this._bits[t>>5]&=~(YD>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&BNt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=YD>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function UNt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new zPe(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function zNt(e,t){const n=ll({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=OZ(e,n,{drop:!0}).column("p");r=s=>i[s]}return UNt(e,r)}function VPe(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=b_(e,r,n),l=dc(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(w=>{if(!a.has(w)){const E=l.add(w,[]);c.has(w)||(f.push(e.column(w)),d.push(E))}}),t.forEach(w=>{a.has(w)||(l.has(w)||l.add(w,[]),h.push(l.data[w]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(w,E)=>{for(let x=0;x<g;++x)d[x].length=m+E,d[x].fill(f[x].get(w),m,m+E)},b=p?(w,E)=>{for(let x=0;x<E;++x)p[w+x]=x}:()=>{};if(y===1){const w=u[0],E=h[0];e.scan((x,S)=>{const C=ol(w(x,S)),I=Math.min(C.length,s);v(x,I);for(let k=0;k<I;++k)E[m+k]=C[k];b(m,I),m+=I})}else e.scan((w,E)=>{let x=0;const S=u.map(C=>{const I=ol(C(w,E));return x=Math.min(Math.max(x,I.length),s),I});v(w,x);for(let C=0;C<y;++C){const I=h[C],k=S[C];for(let R=0;R<x;++R)I[m+R]=k[R]}b(m,x),m+=x});return e.create(l.new())}function VNt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=b_(e,r,n);return VPe(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function dd(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=lu(o)?t.columnName(o):o,Xo(o)?i.set(o,xb(o)):bi(o)?Ym(t,o).forEach(s):ka(o)?NDe(i,o):Cn(`Invalid ${e} value: ${o+""}`)};return ol(n).forEach(s),r.preparse&&r.preparse(i),ll(i,{table:t,...r})}function HNt(e,t,n){return VNt(e,dd("fold",e,t),n)}function wpe(e,t,n,r){const i=n&&n.length;return qNt(i?WNt(e,n,r):e,t,i)}function qNt(e,{names:t,exprs:n,ops:r},i){const s=b_(e,r,n),o=i?null:dc(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=Yf(p)?p:d(h)})}),i?e:e.create(o)}function WNt(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=ZM(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=dc(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=ZM(o.map((p,m)=>g=>g[m])),h=sT("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),Epe(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else Epe(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function Epe(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function $Z(e,{names:t,exprs:n,ops:r}){const i=dc(),s=e.groups();return s&&BPe(i,s),GNt(t,n,s,oT(e,r),i),e.create(i.new())}function GNt(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function YNt(e,t,n={}){if(t=ll(t,{table:e}),t.names.forEach(r=>e.column(r)?0:Cn(`Invalid impute column ${Vh(r)}`)),n.expand){const r={preparse:KNt,aggronly:!0},i=dd("impute",e,n.expand,r),s=$Z(e.ungroup(),i);return wpe(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return wpe(e,t)}function KNt(e){e.forEach((t,n)=>t.field?e.set(n,sRe(t+"")):0)}function XNt(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function HPe(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function QNt(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function JNt(e,t){const n=["i","a","j","b"];return sT(n,"{"+IR(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function ZNt(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=dc(),g=Array(p),y=Array(p);for(let w=0;w<r.length;++w)g[w]=m.add(r[w],[]),y[w]=i[w];const v=JNt(g,y);if((gr(n)?tDt:eDt)(v,n,o,c,a,f,l,h,u,d),s.left)for(let w=0;w<u;++w)l[w]||v(a[w],o,-1,c);if(s.right)for(let w=0;w<d;++w)h[w]||v(-1,o,f[w],c);return e.create(m.new())}function eDt(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function tDt(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,b=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,b=(x,S,C,I)=>e(C,I,x,S));const w=QNt(v,m,g),E=p.length;for(let x=0;x<E;++x){const S=p[x],C=w.get(d(S,f));if(C){const I=C.length;for(let k=0;k<I;++k){const R=C[k];b(S,f,v[R],m),y[R]=1}h[x]=1}}}function x3(e,t,n){const r=new Map;ol(n).forEach((s,o)=>{s=lu(s)?t.columnName(s):s,Xo(s)?r.set(o,xb(s)):bi(s)||ka(s)&&s.expr?r.set(o,s):Cn(`Invalid ${e} key value: ${s+""}`)});const i=ll(r,{table:t,aggregate:!1,window:!1});return ZM(i.exprs,!0)}function nDt(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function MZ(e,t,n){if(n)Xo(n)?n=[n,n]:gr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=nDt(e.columnNames(),t.columnNames());r.length||Cn("Natural join requires shared column names."),n=[r,r]}return n}function qPe(e,t,n,r){return n.length!==r.length&&Cn("Mismatched number of join keys"),[x3("join",e,n),x3("join",t,r)]}const rDt={aggregate:!1,window:!1},iDt={...rDt,index:1};function xpe(e,t,n,r,i={}){n=MZ(e,t,n);const s={join:[e,t]};let o;if(gr(n)){const[a,u]=n.map(ol);o=qPe(e,t,a,u),r||(r=sDt(e,a,u,i))}else o=ll({on:n},s).exprs[0],r||(r=[Px(),Px()]);return ZNt(e,t,o,oDt(e,t,r,s,i&&i.suffix),i)}function sDt(e,t,n,r){const i=[];t.forEach((o,a)=>Xo(o)&&o===n[a]?i.push(o):0);const s=PDe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${Vh(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,Px()]:[Px(),s]}function oDt(e,t,n,r,i=[]){if(gr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=dd("join",e,n[0],r)),u--&&(o=dd("join",t,n[1],iDt)),u--&&(a=ll(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&Spe(s.names,l,i[0]||"_1"),i[1]!==""&&Spe(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return ll(n,r)}function Spe(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function aDt(e,t,n,r={}){const i=new zPe(e.totalRows());return(gr(n)?uDt:lDt)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function uDt(e,t,n,[r,i]){const s=HPe(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function lDt(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function Tpe(e,t,n,r){n=MZ(e,t,n);const i=gr(n)?qPe(e,t,...n.map(ol)):ll({on:n},{join:[e,t]}).exprs[0];return aDt(e,t,i,r)}function cDt(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=dc(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(fr)));const l=HPe(t,r),c=sT(["lr","rr","data"],"{"+IR(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),b_(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function fDt(e,t,n,r){return n=MZ(e,t,n),cDt(e,t,[x3("lookup",e,n[0]),x3("lookup",t,n[1])],dd("lookup",t,r))}const LH=(e,t)=>e??t;function dDt(e,t,n,r={}){const{keys:i,keyColumn:s}=hDt(e,t,r),o=LH(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>oT(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(pDt(n,a,e.groups(),u))}function hDt(e,t,n){const r=n.limit>0?+n.limit:1/0,i=LH(n.sort,!0),s=LH(n.keySeparator,"_"),o=b_(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=oT(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function pDt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=dc(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&BPe(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function mDt(e,t,n,r){return dDt(e,dd("fold",e,t),dd("fold",e,n,{preparse:gDt,aggronly:!0}),r)}function gDt(e){e.forEach((t,n)=>t.field?e.set(n,nRe(t+"")):0)}function yDt(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),NZ(e,Ym(e,t,n))}function Cpe(e,t){return $Z(e,ll(t,{table:e,aggronly:!0,window:!1}))}function vDt(e,t,n,r){return(t?r?_Dt:bDt:r?EDt:wDt)(e.length,e,n,r)}function bDt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*XS()|0];return t}function _Dt(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=UPe(DZ).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*XS())];return t}function wDt(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*XS();s<e&&(t[s|0]=n[i])}return t}function EDt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(XS())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function xDt(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=XS()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function SDt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):vDt(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&xDt(u),e.reify(u)}function TDt(e,t,n={}){return SDt(e,CDt(e,t),ADt(e,n.weight),n)}const WPe=e=>t=>e.get(t)||0;function CDt(e,t){return lu(t)?()=>t:WPe($Z(e,ll({size:t},{table:e,window:!1})).column("size"))}function ADt(e,t){return t==null?null:(t=lu(t)?e.columnName(t):t,WPe(Xo(t)?e.column(t):OZ(e,ll({w:t},{table:e}),{drop:!0}).column("w")))}function IDt(e,t){return NZ(e,Ym(e,t))}function kDt(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=b_(e,r,n),l=dc(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=RDt(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function RDt(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=ol(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(fr));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function NDt(e,t,n){return kDt(e,dd("spread",e,t),n)}function DDt(e,t){return e.concat(t).dedupe()}function PDt(e,t,n){return VPe(e,dd("unroll",e,t),n&&n.drop?{...n,drop:dd("unroll",e,n.drop).names}:n)}function ODt(e,t){return e.create({groups:$Dt(e,t)})}function $Dt(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=b_(e,r,n);const o=ZM(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function MDt(e,t){return ODt(e,dd("groupby",e,t))}function LDt(e,t){return e.create({order:t})}const FDt=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function jDt(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=ll(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([JM(p,{index:"a",op:o}),JM(p,{index:"b",op:a})])},window:!1}),l=oT(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=FDt(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function BDt(e,t){return LDt(e,UDt(e,t))}function UDt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(ka(o)&&!bi(o))for(const a in o)i(o[a]);else i(lu(o)?xb(s,e.columnName(o)):Xo(o)?xb(s):bi(o)?s:Cn(`Invalid orderby field: ${s+""}`))}),jDt(e,r)}function zDt(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=dc();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>fr};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function VDt(e,t){const n=dc(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?jPe(e,t,r):[FPe(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function HDt(e){return e.isGrouped()?e.create({groups:null}):e}function qDt(e){return e.isOrdered()?e.create({order:null}):e}const WDt={__antijoin:(e,t,n)=>Tpe(e,t,n,{anti:!0}),__count:(e,t={})=>Cpe(e,{[t.as||"count"]:rRe()}),__cross:(e,t,n,r)=>xpe(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:zDt,__dedupe:bNt,__derive:FNt,__except:jNt,__filter:zNt,__fold:HNt,__impute:YNt,__intersect:XNt,__join:xpe,__lookup:fDt,__pivot:mDt,__relocate:MPe,__rename:yDt,__rollup:Cpe,__sample:TDt,__select:IDt,__semijoin:Tpe,__spread:NDt,__union:DDt,__unroll:PDt,__groupby:MDt,__orderby:BDt,__ungroup:HDt,__unorder:qDt,__reduce:VDt};Object.assign(im.prototype,WDt);function GDt(e,t){return im.from(e,t)}function z9(e){return $4(e,{escape:!0,toString(){Cn("Escaped values can not be serialized.")}})}im.prototype;function Uf(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Ay(e){return!!e&&!!e[Si]}function Qm(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===nPt}(e)||Array.isArray(e)||!!e[Ppe]||!!(!((t=e.constructor)===null||t===void 0)&&t[Ppe])||LZ(e)||FZ(e))}function Sb(e,t,n){n===void 0&&(n=!1),aT(e)===0?(n?Object.keys:kE)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function aT(e){var t=e[Si];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:LZ(e)?2:FZ(e)?3:0}function IE(e,t){return aT(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function YDt(e,t){return aT(e)===2?e.get(t):e[t]}function GPe(e,t,n){var r=aT(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function YPe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function LZ(e){return ePt&&e instanceof Map}function FZ(e){return tPt&&e instanceof Set}function i1(e){return e.o||e.t}function jZ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=XPe(e);delete t[Si];for(var n=kE(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function BZ(e,t){return t===void 0&&(t=!1),UZ(e)||Ay(e)||!Qm(e)||(aT(e)>1&&(e.set=e.add=e.clear=e.delete=KDt),Object.freeze(e),t&&Sb(e,function(n,r){return BZ(r,!0)},!0)),e}function KDt(){Uf(2)}function UZ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Ah(e){var t=UH[e];return t||Uf(18,e),t}function XDt(e,t){UH[e]||(UH[e]=t)}function FH(){return KI}function V9(e,t){t&&(Ah("Patches"),e.u=[],e.s=[],e.v=t)}function S3(e){jH(e),e.p.forEach(QDt),e.p=null}function jH(e){e===KI&&(KI=e.l)}function Ape(e){return KI={p:[],l:KI,h:e,m:!0,_:0}}function QDt(e){var t=e[Si];t.i===0||t.i===1?t.j():t.g=!0}function H9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||Ah("ES5").S(t,e,r),r?(n[Si].P&&(S3(t),Uf(4)),Qm(e)&&(e=T3(t,e),t.l||C3(t,e)),t.u&&Ah("Patches").M(n[Si].t,e,t.u,t.s)):e=T3(t,n,[]),S3(t),t.u&&t.v(t.u,t.s),e!==KPe?e:void 0}function T3(e,t,n){if(UZ(t))return t;var r=t[Si];if(!r)return Sb(t,function(a,u){return Ipe(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return C3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=jZ(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),Sb(s,function(a,u){return Ipe(e,r,i,a,u,n,o)}),C3(e,i,!1),n&&e.u&&Ah("Patches").N(r,n,e.u,e.s)}return r.o}function Ipe(e,t,n,r,i,s,o){if(Ay(i)){var a=T3(e,i,s&&t&&t.i!==3&&!IE(t.R,r)?s.concat(r):void 0);if(GPe(n,r,a),!Ay(a))return;e.m=!1}else o&&n.add(i);if(Qm(i)&&!UZ(i)){if(!e.h.D&&e._<1)return;T3(e,i),t&&t.A.l||C3(e,i)}}function C3(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&BZ(t,n)}function q9(e,t){var n=e[Si];return(n?i1(n):e)[t]}function kpe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function a0(e){e.P||(e.P=!0,e.l&&a0(e.l))}function W9(e){e.o||(e.o=jZ(e.t))}function BH(e,t,n){var r=LZ(t)?Ah("MapSet").F(t,n):FZ(t)?Ah("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:FH(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=XI;o&&(u=[a],l=pA);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Ah("ES5").J(t,n);return(n?n.A:FH()).p.push(r),r}function JDt(e){return Ay(e)||Uf(22,e),function t(n){if(!Qm(n))return n;var r,i=n[Si],s=aT(n);if(i){if(!i.P&&(i.i<4||!Ah("ES5").K(i)))return i.t;i.I=!0,r=Rpe(n,s),i.I=!1}else r=Rpe(n,s);return Sb(r,function(o,a){i&&YDt(i.t,o)===a||GPe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Rpe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return jZ(e)}function ZDt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[Si];return XI.get(u,s)},set:function(u){var l=this[Si];XI.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][Si];if(!a.P)switch(a.i){case 5:r(a)&&a0(a);break;case 4:n(a)&&a0(a)}}}function n(s){for(var o=s.t,a=s.k,u=kE(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==Si){var f=o[c];if(f===void 0&&!IE(o,c))return!0;var d=a[c],h=d&&d[Si];if(h?h.t!==f:!YPe(d,f))return!0}}var p=!!o[Si];return u.length!==kE(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};XDt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=XPe(f);delete p[Si];for(var m=kE(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:FH(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,Si,{value:l,writable:!0}),u},S:function(s,o,a){a?Ay(o)&&o[Si].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[Si];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)Sb(d,function(b){b!==Si&&(f[b]!==void 0||IE(f,b)?h[b]||u(d[b]):(h[b]=!0,a0(c)))}),Sb(f,function(b){d[b]!==void 0||IE(d,b)||(h[b]=!1,a0(c))});else if(p===5){if(r(c)&&(a0(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Npe,KI,zZ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",ePt=typeof Map<"u",tPt=typeof Set<"u",Dpe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",KPe=zZ?Symbol.for("immer-nothing"):((Npe={})["immer-nothing"]=!0,Npe),Ppe=zZ?Symbol.for("immer-draftable"):"__$immer_draftable",Si=zZ?Symbol.for("immer-state"):"__$immer_state",nPt=""+Object.prototype.constructor,kE=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,XPe=Object.getOwnPropertyDescriptors||function(e){var t={};return kE(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},UH={},XI={get:function(e,t){if(t===Si)return e;var n=i1(e);if(!IE(n,t))return function(i,s,o){var a,u=kpe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Qm(r)?r:r===q9(e.t,t)?(W9(e),e.o[t]=BH(e.A.h,r,e)):r},has:function(e,t){return t in i1(e)},ownKeys:function(e){return Reflect.ownKeys(i1(e))},set:function(e,t,n){var r=kpe(i1(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=q9(i1(e),t),s=i==null?void 0:i[Si];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(YPe(n,i)&&(n!==void 0||IE(e.t,t)))return!0;W9(e),a0(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return q9(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,W9(e),a0(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=i1(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Uf(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Uf(12)}},pA={};Sb(XI,function(e,t){pA[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),pA.deleteProperty=function(e,t){return pA.set.call(this,e,t,void 0)},pA.set=function(e,t,n){return XI.set.call(this,e[0],t,n,e[0])};var rPt=function(){function e(n){var r=this;this.O=Dpe,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&Uf(6),o!==void 0&&typeof o!="function"&&Uf(7),Qm(i)){var c=Ape(r),f=BH(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?S3(c):jH(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return V9(c,o),H9(m,c)},function(m){throw S3(c),m}):(V9(c,o),H9(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===KPe&&(l=void 0),r.D&&BZ(l,!0),o){var h=[],p=[];Ah("Patches").M(i,l,h,p),o(h,p)}return l}Uf(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Qm(n)||Uf(8),Ay(n)&&(n=JDt(n));var r=Ape(this),i=BH(this,n,void 0);return i[Si].C=!0,jH(r),i},t.finishDraft=function(n,r){var i=n&&n[Si],s=i.A;return V9(s,r),H9(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!Dpe&&Uf(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Ah("Patches").$;return Ay(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),ec=new rPt,iPt=ec.produce;ec.produceWithPatches.bind(ec);ec.setAutoFreeze.bind(ec);ec.setUseProxies.bind(ec);ec.applyPatches.bind(ec);ec.createDraft.bind(ec);ec.finishDraft.bind(ec);const QPe=iPt;function JPe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var zH=JPe();zH.withExtraArgument=JPe;var ZPe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),kR=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Tb=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},sPt=Object.defineProperty,oPt=Object.defineProperties,aPt=Object.getOwnPropertyDescriptors,Ope=Object.getOwnPropertySymbols,uPt=Object.prototype.hasOwnProperty,lPt=Object.prototype.propertyIsEnumerable,$pe=function(e,t,n){return t in e?sPt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},G0=function(e,t){for(var n in t||(t={}))uPt.call(t,n)&&$pe(e,n,t[n]);if(Ope)for(var r=0,i=Ope(t);r<i.length;r++){var n=i[r];lPt.call(t,n)&&$pe(e,n,t[n])}return e},G9=function(e,t){return oPt(e,aPt(t))},RR=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},cPt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?bI:bI.apply(null,arguments)};function eOe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var fPt=function(e){return e&&typeof e.match=="function"};function Ih(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return G0(G0({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function dPt(e){return eOe(e)&&"type"in e}var hPt=function(e){ZPe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Tb([void 0],n[0].concat(this)))):new(t.bind.apply(t,Tb([void 0],n.concat(this))))},t}(Array),pPt=function(e){ZPe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Tb([void 0],n[0].concat(this)))):new(t.bind.apply(t,Tb([void 0],n.concat(this))))},t}(Array);function VH(e){return Qm(e)?QPe(e,function(){}):e}function mPt(e){return typeof e=="boolean"}function gPt(){return function(t){return yPt(t)}}function yPt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new hPt;return n&&(mPt(n)?r.push(zH):r.push(zH.withExtraArgument(n.extraArgument))),r}var vPt=!0;function bPt(e){var t=gPt(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(eOe(i))h=Yft(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=MCe.apply(void 0,p),g=bI;u&&(g=cPt(G0({trace:!vPt},typeof u=="object"&&u)));var y=new pPt(m),v=y;Array.isArray(d)?v=Tb([m],d):typeof d=="function"&&(v=d(y));var b=g.apply(void 0,v);return XX(h,c,b)}function tOe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function _Pt(e){return typeof e=="function"}function wPt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?tOe(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(_Pt(e))u=function(){return VH(e())};else{var l=VH(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=Tb([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(Ay(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(Qm(p))return QPe(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function EPt(e,t){return e+"/"+t}function xPt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:VH(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=EPt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?Ih(d,p):Ih(d)});function u(){var c=typeof e.extraReducers=="function"?tOe(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=G0(G0({},d),o);return wPt(n,function(v){for(var b in y)v.addCase(b,y[b]);for(var w=0,E=p;w<E.length;w++){var x=E[w];v.addMatcher(x.matcher,x.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var SPt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",nOe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=SPt[Math.random()*64|0];return t},TPt=["name","message","stack","code"],Y9=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Mpe=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),CPt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=TPt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=Ih(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:G9(G0({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=Ih(t+"/pending",function(l,c,f){return{payload:void 0,meta:G9(G0({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=Ih(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||CPt)(l||"Rejected"),meta:G9(G0({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):nOe(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return RR(this,null,function(){var v,b,w,E,x,S,C;return kR(this,function(I){switch(I.label){case 0:return I.trys.push([0,4,,5]),E=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),IPt(E)?[4,E]:[3,2];case 1:E=I.sent(),I.label=2;case 2:if(E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return x=new Promise(function(k,R){return p.signal.addEventListener("abort",function(){return R({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(b=r==null?void 0:r.getPendingMeta)==null?void 0:b.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([x,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(k,R){return new Y9(k,R)},fulfillWithValue:function(k,R){return new Mpe(k,R)}})).then(function(k){if(k instanceof Y9)throw k;return k instanceof Mpe?i(k.payload,h,l,k.meta):i(k,h,l)})])];case 3:return w=I.sent(),[3,5];case 4:return S=I.sent(),w=S instanceof Y9?o(null,h,l,S.payload,S.meta):o(S,h,l),[3,5];case 5:return C=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,C||c(w),[2,w]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(APt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function APt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function IPt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var kPt=function(e,t){return fPt(e)?e.match(t):e(t)};function Lpe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return kPt(r,n)})}}var VZ=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},HH=function(){},rOe=function(e,t){return t===void 0&&(t=HH),e.catch(t),e},iOe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},RE=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},RPt="task",sOe="listener",oOe="completed",HZ="cancelled",NPt="task-"+HZ,DPt="task-"+oOe,aOe=sOe+"-"+HZ,PPt=sOe+"-"+oOe,M4=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=RPt+" "+HZ+" (reason: "+t+")"}return e}(),NE=function(e){if(e.aborted)throw new M4(e.reason)};function uOe(e,t){var n=HH;return new Promise(function(r,i){var s=function(){return i(new M4(e.reason))};if(e.aborted){s();return}n=iOe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=HH})}var OPt=function(e,t){return RR(void 0,null,function(){var n,r;return kR(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof M4?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},A3=function(e){return function(t){return rOe(uOe(e,t).then(function(n){return NE(e),n}))}},lOe=function(e){var t=A3(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},$Pt=Object.assign,Fpe={},NR="listenerMiddleware",MPt=function(e,t){var n=function(r){return iOe(e,function(){return RE(r,e.reason)})};return function(r,i){VZ(r,"taskExecutor");var s=new AbortController;n(s);var o=OPt(function(){return RR(void 0,null,function(){var a;return kR(this,function(u){switch(u.label){case 0:return NE(e),NE(s.signal),[4,r({pause:A3(s.signal),delay:lOe(s.signal),signal:s.signal})];case 1:return a=u.sent(),NE(s.signal),[2,a]}})})},function(){return RE(s,DPt)});return i!=null&&i.autoJoin&&t.push(o),{result:A3(e)(o),cancel:function(){RE(s,NPt)}}}},LPt=function(e,t){var n=function(r,i){return RR(void 0,null,function(){var s,o,a,u;return kR(this,function(l){switch(l.label){case 0:NE(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,uOe(t,Promise.race(a))];case 2:return u=l.sent(),NE(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return rOe(n(r,i))}},cOe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=Ih(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return VZ(s,"options.listener"),{predicate:i,type:t,effect:s}},FPt=function(e){var t=cOe(e),n=t.type,r=t.predicate,i=t.effect,s=nOe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},qH=function(e){e.pending.forEach(function(t){RE(t,aOe)})},jPt=function(e){return function(){e.forEach(qH),e.clear()}},jpe=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},BPt=Ih(NR+"/add"),UPt=Ih(NR+"/removeAll"),zPt=Ih(NR+"/remove"),VPt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,Tb([NR+"/error"],e))};function HPt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?VPt:i;VZ(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&qH(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=FPt(h)),o(p)},l=function(h){var p=cOe(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(b){var w=typeof m=="string"?b.type===m:b.predicate===y;return w&&b.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&qH(v)),!!v},c=function(h,p,m,g){return RR(t,null,function(){var y,v,b,w;return kR(this,function(E){switch(E.label){case 0:y=new AbortController,v=LPt(u,y.signal),b=[],E.label=1;case 1:return E.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,$Pt({},m,{getOriginalState:g,condition:function(x,S){return v(x,S).then(Boolean)},take:v,delay:lOe(y.signal),pause:A3(y.signal),extra:r,signal:y.signal,fork:MPt(y.signal,b),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(x,S,C){x!==y&&(RE(x,aOe),C.delete(x))})}})))];case 2:return E.sent(),[3,6];case 3:return w=E.sent(),w instanceof M4||jpe(s,w,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(b)];case 5:return E.sent(),RE(y,PPt),h.pending.delete(y),[7];case 6:return[2]}})})},f=jPt(n),d=function(h){return function(p){return function(m){if(!dPt(m))return p(m);if(BPt.match(m))return u(m.payload);if(UPt.match(m)){f();return}if(zPt.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===Fpe)throw new Error(NR+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var b=h.getState(),w=Array.from(n.values()),E=0,x=w;E<x.length;E++){var S=x[E],C=!1;try{C=S.predicate(m,b,g)}catch(I){C=!1,jpe(s,I,{raisedBy:"predicate"})}C&&c(S,m,h,y)}}finally{g=Fpe}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var Bpe;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);ZDt();function qPt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let KD;const WPt=new Uint8Array(16);function GPt(){if(!KD&&(KD=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!KD))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return KD(WPt)}const Ao=[];for(let e=0;e<256;++e)Ao.push((e+256).toString(16).slice(1));function YPt(e,t=0){return(Ao[e[t+0]]+Ao[e[t+1]]+Ao[e[t+2]]+Ao[e[t+3]]+"-"+Ao[e[t+4]]+Ao[e[t+5]]+"-"+Ao[e[t+6]]+Ao[e[t+7]]+"-"+Ao[e[t+8]]+Ao[e[t+9]]+"-"+Ao[e[t+10]]+Ao[e[t+11]]+Ao[e[t+12]]+Ao[e[t+13]]+Ao[e[t+14]]+Ao[e[t+15]]).toLowerCase()}const KPt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Upe={randomUUID:KPt};function zpe(e,t,n){if(Upe.randomUUID&&!t&&!e)return Upe.randomUUID();e=e||{};const r=e.random||(e.rng||GPt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,YPt(r)}class kh{static get(){let t=zpe();for(;this.ids.has(t);)t=zpe();return this.ids.set(t,!0),t}}kh.ids=new Map;function Rh(e){return"parent"in e}function XPt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:kh.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:kh.get(),createdOn:Date.now(),val:r}]:[];return{id:kh.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function QPt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:kh.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:kh.get(),createdOn:Date.now(),val:s}]:[];return{id:kh.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function Qi(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=oOt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Cb(e){return!!e&&!!e[tc]}function Iy(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===aOt}(e)||Array.isArray(e)||!!e[h2]||!!(!((t=e.constructor)===null||t===void 0)&&t[h2])||L4(e)||F4(e))}function Mx(e,t,n){n===void 0&&(n=!1),ky(e)===0?(n?Object.keys:XZ)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function ky(e){var t=e[tc];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:L4(e)?2:F4(e)?3:0}function QI(e,t){return ky(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function EO(e,t){return ky(e)===2?e.get(t):e[t]}function fOe(e,t,n){var r=ky(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function JPt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function L4(e){return iOt&&e instanceof Map}function F4(e){return sOt&&e instanceof Set}function s1(e){return e.o||e.t}function qZ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=uOt(e);delete t[tc];for(var n=XZ(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function WZ(e,t){return t===void 0&&(t=!1),GZ(e)||Cb(e)||!Iy(e)||(ky(e)>1&&(e.set=e.add=e.clear=e.delete=ZPt),Object.freeze(e),t&&Mx(e,function(n,r){return WZ(r,!0)},!0)),e}function ZPt(){Qi(2)}function GZ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Nh(e){var t=KH[e];return t||Qi(18,e),t}function eOt(e,t){KH[e]||(KH[e]=t)}function Vpe(){return{}.NODE_ENV==="production"||Lx||Qi(0),Lx}function K9(e,t){t&&(Nh("Patches"),e.u=[],e.s=[],e.v=t)}function I3(e){WH(e),e.p.forEach(tOt),e.p=null}function WH(e){e===Lx&&(Lx=e.l)}function Hpe(e){return Lx={p:[],l:Lx,h:e,m:!0,_:0}}function tOt(e){var t=e[tc];t.i===0||t.i===1?t.j():t.O=!0}function X9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||Nh("ES5").S(t,e,r),r?(n[tc].P&&(I3(t),Qi(4)),Iy(e)&&(e=k3(t,e),t.l||R3(t,e)),t.u&&Nh("Patches").M(n[tc].t,e,t.u,t.s)):e=k3(t,n,[]),I3(t),t.u&&t.v(t.u,t.s),e!==KZ?e:void 0}function k3(e,t,n){if(GZ(t))return t;var r=t[tc];if(!r)return Mx(t,function(s,o){return qpe(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return R3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=qZ(r.k):r.o;Mx(r.i===3?new Set(i):i,function(s,o){return qpe(e,r,i,s,o,n)}),R3(e,i,!1),n&&e.u&&Nh("Patches").R(r,n,e.u,e.s)}return r.o}function qpe(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Qi(5),Cb(i)){var o=k3(e,i,s&&t&&t.i!==3&&!QI(t.D,r)?s.concat(r):void 0);if(fOe(n,r,o),!Cb(o))return;e.m=!1}if(Iy(i)&&!GZ(i)){if(!e.h.F&&e._<1)return;k3(e,i),t&&t.A.l||R3(e,i)}}function R3(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&WZ(t,n)}function Q9(e,t){var n=e[tc];return(n?s1(n):e)[t]}function Wpe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function GH(e){e.P||(e.P=!0,e.l&&GH(e.l))}function J9(e){e.o||(e.o=qZ(e.t))}function YH(e,t,n){var r=L4(t)?Nh("MapSet").N(t,n):F4(t)?Nh("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Vpe(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=XH;o&&(u=[a],l=mA);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Nh("ES5").J(t,n);return(n?n.A:Vpe()).p.push(r),r}function nOt(e){return Cb(e)||Qi(22,e),function t(n){if(!Iy(n))return n;var r,i=n[tc],s=ky(n);if(i){if(!i.P&&(i.i<4||!Nh("ES5").K(i)))return i.t;i.I=!0,r=Gpe(n,s),i.I=!1}else r=Gpe(n,s);return Mx(r,function(o,a){i&&EO(i.t,o)===a||fOe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Gpe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return qZ(e)}function rOt(){function e(r){if(!Iy(r))return r;if(Array.isArray(r))return r.map(e);if(L4(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(F4(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return QI(r,h2)&&(i[h2]=r[h2]),i}function t(r){return Cb(r)?e(r):r}var n="add";eOt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=ky(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||Qi(24),typeof u=="function"&&f==="prototype"&&Qi(24),typeof(u=EO(u,f))!="object"&&Qi(15,o.join("/"))}var d=ky(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:Qi(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:Qi(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;Mx(a.D,function(h,p){var m=EO(f,h),g=EO(d,h),y=p?QI(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var b=u.concat([v]);l.push({op:n,path:b,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===KZ?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var Ype,Lx,YZ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",iOt=typeof Map<"u",sOt=typeof Set<"u",Kpe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",KZ=YZ?Symbol.for("immer-nothing"):((Ype={})["immer-nothing"]=!0,Ype),h2=YZ?Symbol.for("immer-draftable"):"__$immer_draftable",tc=YZ?Symbol.for("immer-state"):"__$immer_state",oOt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},aOt=""+Object.prototype.constructor,XZ=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,uOt=Object.getOwnPropertyDescriptors||function(e){var t={};return XZ(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},KH={},XH={get:function(e,t){if(t===tc)return e;var n=s1(e);if(!QI(n,t))return function(i,s,o){var a,u=Wpe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Iy(r)?r:r===Q9(e.t,t)?(J9(e),e.o[t]=YH(e.A.h,r,e)):r},has:function(e,t){return t in s1(e)},ownKeys:function(e){return Reflect.ownKeys(s1(e))},set:function(e,t,n){var r=Wpe(s1(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Q9(s1(e),t),s=i==null?void 0:i[tc];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(JPt(n,i)&&(n!==void 0||QI(e.t,t)))return!0;J9(e),GH(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return Q9(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,J9(e),GH(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=s1(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Qi(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Qi(12)}},mA={};Mx(XH,function(e,t){mA[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),mA.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Qi(13),mA.set.call(this,e,t,void 0)},mA.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Qi(14),XH.set.call(this,e[0],t,n,e[0])};var lOt=function(){function e(n){var r=this;this.g=Kpe,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&Qi(6),o!==void 0&&typeof o!="function"&&Qi(7),Iy(i)){var c=Hpe(r),f=YH(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?I3(c):WH(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return K9(c,o),X9(m,c)},function(m){throw I3(c),m}):(K9(c,o),X9(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===KZ&&(l=void 0),r.F&&WZ(l,!0),o){var h=[],p=[];Nh("Patches").M(i,l,h,p),o(h,p)}return l}Qi(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Iy(n)||Qi(8),Cb(n)&&(n=nOt(n));var r=Hpe(this),i=YH(this,n,void 0);return i[tc].C=!0,WH(r),i},t.finishDraft=function(n,r){var i=n&&n[tc];({}).NODE_ENV!=="production"&&(i&&i.C||Qi(9),i.I&&Qi(10));var s=i.A;return K9(s,r),X9(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!Kpe&&Qi(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Nh("Patches").$;return Cb(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),nc=new lOt,cOt=nc.produce;nc.produceWithPatches.bind(nc);nc.setAutoFreeze.bind(nc);nc.setUseProxies.bind(nc);nc.applyPatches.bind(nc);nc.createDraft.bind(nc);nc.finishDraft.bind(nc);function fOt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=XPt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return xPt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:kh.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:kh.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function dOt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=fOt(e),s=HPt();s.startListening({matcher:Lpe(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=Lpe(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=bPt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:kh.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var hOt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),pOt=Object.prototype.hasOwnProperty;function QH(e,t){return pOt.call(e,t)}function JH(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)QH(e,i)&&r.push(i);return r}function qu(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function ZH(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function o1(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function dOe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function eq(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(eq(e[t]))return!0}else if(typeof e=="object"){for(var r=JH(e),i=r.length,s=0;s<i;s++)if(eq(e[r[s]]))return!0}}return!1}function Xpe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var hOe=function(e){hOt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Xpe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Xpe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Wi=hOe,mOt=qu,eE={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=N3(n,this.path);r&&(r=qu(r));var i=X1(n,{op:"remove",path:this.from}).removed;return X1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=N3(n,this.from);return X1(n,{op:"add",path:this.path,value:qu(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:JI(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},gOt={add:function(e,t,n){return ZH(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:eE.move,copy:eE.copy,test:eE.test,_get:eE._get};function N3(e,t){if(t=="")return e;var n={op:"_get",path:t};return X1(e,n),n.value}function X1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):D3(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=N3(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=JI(e,t.value),o.test===!1)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Wi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=qu(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=D3;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=dOe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!ZH(h))throw new Wi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);ZH(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Wi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=gOt[t.op].call(t,l,h,e);if(o.test===!1)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=eE[t.op].call(t,l,h,e);if(o.test===!1)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Wi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function j4(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Wi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=qu(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=X1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function yOt(e,t,n){var r=X1(e,t);if(r.test===!1)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function D3(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Wi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(eE[e.op]){if(typeof e.path!="string")throw new Wi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Wi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Wi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Wi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&eq(e.value))throw new Wi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Wi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Wi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=pOe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Wi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Wi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function pOe(e,t,n){try{if(!Array.isArray(e))throw new Wi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)j4(qu(t),qu(e),n||!0);else{n=n||D3;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Wi)return i;throw i}}function JI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!JI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!JI(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const vOt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Wi,_areEquals:JI,applyOperation:X1,applyPatch:j4,applyReducer:yOt,deepClone:mOt,getValueByPointer:N3,validate:pOe,validator:D3},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var QZ=new WeakMap,bOt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),_Ot=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function wOt(e){return QZ.get(e)}function EOt(e,t){return e.observers.get(t)}function xOt(e,t){e.observers.delete(t.callback)}function SOt(e,t){t.unobserve()}function TOt(e,t){var n=[],r,i=wOt(e);if(!i)i=new bOt(e),QZ.set(e,i);else{var s=EOt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=qu(e),t){r.callback=t,r.next=null;var o=function(){tq(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){tq(r),clearTimeout(r.next),xOt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new _Ot(t,r)),r}function tq(e,t){t===void 0&&(t=!1);var n=QZ.get(e.object);JZ(n.value,e.object,e.patches,"",t),e.patches.length&&j4(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function JZ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=JH(t),o=JH(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(QH(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?JZ(c,f,n,r+"/"+o1(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+o1(l),value:qu(c)}),n.push({op:"replace",path:r+"/"+o1(l),value:qu(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+o1(l),value:qu(c)}),n.push({op:"remove",path:r+"/"+o1(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!QH(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+o1(l),value:qu(t[l])})}}}function mOe(e,t,n){n===void 0&&(n=!1);var r=[];return JZ(e,t,r,"",n),r}const COt=Object.freeze(Object.defineProperty({__proto__:null,compare:mOe,generate:tq,observe:TOt,unobserve:SOt},Symbol.toStringTag,{value:"Module"}));Object.assign({},vOt,COt,{JsonPatchError:hOe,deepClone:qu,escapePathComponent:o1,unescapePathComponent:dOe});var gA=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(gA||{});function xO(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=yOe(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=xO(i,t);return j4(a,qu(o),!0,!1).newDocument}function AOt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function gOe({registry:e,initialState:t}){let n=!1;const r=qPt(),i=dOt(t);function s(c){return i.backend.nodes[c]}r.listen(gA.TRAVERSAL_START,()=>{n=!0}),r.listen(gA.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return xO(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=xO(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=mOe(y,f);if(AOt(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const b=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:b}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=QPt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=xO(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(gA.TRAVERSAL_START);const f=yOe(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);kOt(p,m)?Rh(p)&&d.push(...p.sideEffects.undo):Rh(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(gA.TRAVERSAL_END)},undo(){const{current:c}=i;return Rh(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return vOe(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function IOt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;Rh(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)Rh(r)&&(r=n[r.parent]),Rh(i)&&(i=n[i.parent]);return r.id}function yOe(e,t,n){const r=IOt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),Rh(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),Rh(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function kOt(e,t){if(Rh(e)&&e.parent===t.id)return!0;if(Rh(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function vOe(e,t){return{...e,children:e.children.map(n=>vOe(t[n],t)),name:`${e.label}`}}rOt();function ROt(e){return e.length===2?cOt(e):e}class B4{static create(){return new B4}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:ROt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),Ih(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var NOt="Expected a function",Qpe=NaN,DOt="[object Symbol]",POt=/^\s+|\s+$/g,OOt=/^[-+]0x[0-9a-f]+$/i,$Ot=/^0b[01]+$/i,MOt=/^0o[0-7]+$/i,LOt=parseInt,FOt=typeof ao=="object"&&ao&&ao.Object===Object&&ao,jOt=typeof self=="object"&&self&&self.Object===Object&&self,BOt=FOt||jOt||Function("return this")(),UOt=Object.prototype,zOt=UOt.toString,VOt=Math.max,HOt=Math.min,Z9=function(){return BOt.Date.now()};function qOt(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(NOt);t=Jpe(t)||0,nq(n)&&(c=!!n.leading,f="maxWait"in n,s=f?VOt(Jpe(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(x){var S=r,C=i;return r=i=void 0,l=x,o=e.apply(C,S),o}function p(x){return l=x,a=setTimeout(y,t),c?h(x):o}function m(x){var S=x-u,C=x-l,I=t-S;return f?HOt(I,s-C):I}function g(x){var S=x-u,C=x-l;return u===void 0||S>=t||S<0||f&&C>=s}function y(){var x=Z9();if(g(x))return v(x);a=setTimeout(y,m(x))}function v(x){return a=void 0,d&&r?h(x):(r=i=void 0,o)}function b(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function w(){return a===void 0?o:v(Z9())}function E(){var x=Z9(),S=g(x);if(r=arguments,i=this,u=x,S){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return E.cancel=b,E.flush=w,E}function nq(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function WOt(e){return!!e&&typeof e=="object"}function GOt(e){return typeof e=="symbol"||WOt(e)&&zOt.call(e)==DOt}function Jpe(e){if(typeof e=="number")return e;if(GOt(e))return Qpe;if(nq(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=nq(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(POt,"");var n=$Ot.test(e);return n||MOt.test(e)?LOt(e.slice(2),n?2:8):OOt.test(e)?Qpe:+e}var YOt=qOt;const Ud=ml(YOt);function bOe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=A.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=A.useMemo(()=>qS(".2s"),[]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(Kc,{children:_.jsx(Rs,{gap:3,children:_.jsx(ze,{size:"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>_.jsxs("g",{transform:`translate(${n}, ${a})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),_.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const KOt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:bOe},Symbol.toStringTag,{value:"Module"})),eU=15;function _Oe({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=A.useState([0,0]),[l,c]=A.useState(!1);return A.useEffect(()=>{const f=Ss("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<eU&&Math.abs(t(g[r.y])-p[1])<eU);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),_.jsx("circle",{style:{cursor:l?"pointer":"default"},r:eU,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const XOt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:_Oe},Symbol.toStringTag,{value:"Module"})),_i={top:15,left:100,right:15,bottom:70};function rq({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=W1(),[c]=W1(),[f]=W1(),[d,h]=A.useState(!0),p=A.useMemo(()=>l-_i.left-_i.right,[l]),m=A.useMemo(()=>u-_i.top-_i.bottom,[u]),g=A.useMemo(()=>{const k=Array.from(new Set(s.map(R=>R[i.category])));return GS(Pke).domain(k)},[s,i.category]),{xMin:y,yMin:v,xMax:b,yMax:w}=A.useMemo(()=>{const k=s.map(M=>+M[i.x]).filter(M=>M!==null),[R,O]=Bfe(k),P=s.map(M=>+M[i.y]).filter(M=>M!==null),[$,L]=Bfe(P);return{xMin:R,xMax:O,yMin:$,yMax:L}},[s,i.x,i.y]),E=A.useMemo(()=>{const k=b-y;return p<=0?null:i.dataType==="date"?Ake([_i.left,p+_i.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):Vm([_i.left,p+_i.left]).domain([y-k/10,b+k/10]).nice()},[i.dataType,p,b,y]),x=A.useMemo(()=>{const k=w-v;return m<=0?null:Vm([m+_i.top,_i.top]).domain([v-k/10,w+k/10]).nice()},[m,w,v]),S=A.useMemo(()=>{if(!E||!x)return()=>null;if(r==="Axis Selection"){const k=Qbt().extent([[_i.left,_i.top+m-5],[_i.left+p,_i.top+m+5]]).on("brush end",O=>{O.sourceEvent!==void 0&&n([[O.selection[0],null],[O.selection[1],null]],E,x,O.mode)}),R=Jbt().extent([[_i.left-5,_i.top],[_i.left+5,_i.top+m]]).on("brush end",O=>{O.sourceEvent!==void 0&&n([[null,O.selection[0]],[null,O.selection[1]]],E,x,O.mode)});return c.current&&f.current&&(Ss(f.current).call(R),Ss(c.current).call(k),t.hasBrush||(Ss(f.current).call(R.move,[x(w),x(v)]),Ss(c.current).call(k.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),x(w)],[E(new Date("2015-12-31")),x(v)]],E,x,"drag"))),()=>{Ss(f.current).call(R.move,[x(w),x(v)]),Ss(c.current).call(k.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),x(w)],[E(new Date("2015-12-31")),x(v)]],E,x,"clear")}}if(r==="Rectangular Selection"){const k=Zbt().extent([[_i.left,_i.top],[_i.left+p,_i.top+m]]).on("brush",R=>{R.sourceEvent!==void 0&&n([[R.selection[0][0],R.selection[0][1]],[R.selection[1][0],R.selection[1][1]]],E,x,R.mode)}).on("end",R=>{R.selection===null&&R.sourceEvent!==void 0&&(Ss(a.current).call(k.move,null),e(null))});return Ss(a.current).call(k),()=>{Ss(a.current).call(k.move,null),n([[null,null],[null,null]],E,x,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[E(y),x(w)],[E(b),x(v)]],E,x,null),()=>n([[E(y),x(w)],[E(b),x(v)]],E,x,"clear")):r==="Paintbrush Selection"?()=>n([[E(y),x(w)],[E(b),x(v)]],E,x,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,b,y,E,w,v,x]),C=A.useMemo(()=>o.length===0?null:new Set(o),[o]),I=A.useMemo(()=>!E||!x?null:s.map((k,R)=>{if(k[i.x]===null||k[i.y]===null)return null;const O=i.dataType==="date"?E(new Date(k[i.x])):E(k[i.x]);return _.jsx("circle",{opacity:C&&!C.has(k[i.ids])?.3:1,r:3,fill:C&&!C.has(k[i.ids])?"lightgray":g(k[i.category]),cx:O,cy:x(k[i.y])},R)}),[C,g,s,i.category,i.dataType,i.ids,i.x,i.y,E,x]);return A.useEffect(()=>{r==="Axis Selection"&&Vvt(".handle").style("fill","darkgrey")},[t,r]),_.jsxs(mh,{children:[_.jsxs(Rs,{children:[_.jsx(dn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),S==null||S()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?_.jsx(JK,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:k=>h(k==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),_.jsxs(Rs,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[_.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E&&x?_.jsxs("g",{children:[_.jsx(bOe,{yScale:x,label:i.y,horizontalPosition:_i.left,xRange:E.range()}),_.jsx(dJ,{xScale:E,yRange:x.range(),isDate:i.dataType==="date",vertPosition:m+_i.top,label:i.x,ticks:E.ticks(i.brushType==="Axis Selection"?12:5).map(k=>({value:k.toString(),offset:E(k)}))})]}):null,I,_.jsx("g",{id:"brushXRef",ref:c}),_.jsx("g",{id:"brushYRef",ref:f}),E&&x&&r==="Paintbrush Selection"?_.jsx(_Oe,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:E,yScale:x}):null]}),r==="Slider Selection"&&E&&x?_.jsxs(mh,{style:{flexGrow:1},gap:50,children:[_.jsxs(mh,{gap:0,children:[_.jsx(ze,{children:i.x}),_.jsx(B$,{minRange:1,label:null,min:E.domain()[0],max:E.domain()[1],labelAlwaysOn:!1,onChange:k=>{n([[E(k[0]),t.y1],[E(k[1]),t.y2]],E,x,"drag")},style:{width:"300px"},marks:E.ticks(5).map(k=>({value:k,label:k})),value:[E.invert(t.x1),E.invert(t.x2)]})]}),_.jsxs(mh,{gap:0,children:[_.jsx(ze,{children:i.y}),_.jsx(B$,{minRange:1,label:null,min:x.domain()[0],max:x.domain()[1],onChange:k=>{n([[t.x1,x(k[1])],[t.x2,x(k[0])]],E,x,"drag")},style:{width:"300px"},marks:x.ticks(5).map(k=>({value:k,label:k})),value:[x.invert(t.y2),x.invert(t.y1)]})]})]}):null]})]})}const QOt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:rq,default:rq},Symbol.toStringTag,{value:"Module"}));function Zpe({parameters:e,setAnswer:t}){const[n,r]=A.useState(null),[i,s]=A.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=A.useState(null);A.useEffect(()=>{R_t(`./data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=A.useMemo(()=>o?GDt(o):null,[o]),{actions:l,trrack:c}=A.useMemo(()=>{const g=B4.create(),y=g.register("brush",(x,S)=>(x.all={brush:S},x)),v=g.register("brushMove",(x,S)=>(x.all={brush:S},x)),b=g.register("brushResize",(x,S)=>(x.all={brush:S},x)),w=g.register("brushClear",(x,S)=>(x.all={brush:S},x)),E=gOe({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:v,brushResize:b,clearBrush:w},trrack:E}},[]),f=A.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=A.useMemo(()=>Ud(f,100,{maxWait:100}),[f]),h=A.useCallback((g,y,v,b,w)=>{if(!y||!v)return;const E=y.invert(g[0][0]||i.x1),x=y.invert(g[1][0]||i.x2),S=v.invert(g[1][1]||i.y2),C=v.invert(g[0][1]||i.y1);let I=null;if(b==="clear")I=u;else if(w){const R=new Set(w);I=u.filter(z9(O=>R.has(O[e.ids])))}else e.brushType==="Axis Selection"?I=u.filter(z9(R=>new Date(R[e.x])>=new Date(E)&&new Date(R[e.x])<=new Date(x)&&R[e.y]>=S&&R[e.y]<=C)):I=u.filter(z9(R=>R[e.x]>=E&&R[e.x]<=x&&R[e.y]>=S&&R[e.y]<=C));const k={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:b!=="clear",ids:b!=="clear"?I==null?void 0:I.array("id"):[]};s(k),b==="drag"||b==="handle"?d(b,k):b==="clear"&&c.apply("Clear Brush",l.clearBrush(k)),r(I),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=A.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=A.useCallback(g=>{r(g)},[]);return o?_.jsxs(mh,{gap:"xs",children:[_.jsx(rq,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),_.jsx(pH,{data:o,parameters:e,barsTable:p})]}):_.jsx(op,{})}const JOt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:Zpe,default:Zpe},Symbol.toStringTag,{value:"Module"})),ZOt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),eme=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},uT=e=>{const t=A.useRef(null),n=eme(e),[r,i]=A.useState(0),[s,o]=A.useState(0);A.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=eme({...n,width:n.width||r,height:n.height||s});return[t,a]},e$t=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:uT},Symbol.toStringTag,{value:"Module"}));function wOe({data:e,xScale:t,yScale:n,height:r}){return _.jsx("g",{children:e.map((i,s)=>_.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const t$t=Object.freeze(Object.defineProperty({__proto__:null,Bars:wOe},Symbol.toStringTag,{value:"Module"}));function ZZ({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=A.useMemo(()=>{const o=Vm().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(0,${a})`,children:[_.jsx("line",{x2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const n$t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:ZZ},Symbol.toStringTag,{value:"Module"}));function EOe({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=A.useMemo(()=>{const o=gR().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsx("g",{transform:`translate(${a}, 10)`,children:_.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const r$t=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:EOe},Symbol.toStringTag,{value:"Module"})),i$t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function s$t({parameters:e}){const[n,r]=uT(i$t),i=gR().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=Vm().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(EOe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(ZZ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(wOe,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const o$t=Object.freeze(Object.defineProperty({__proto__:null,default:s$t},Symbol.toStringTag,{value:"Module"}));function xOe({data:e}){return _.jsx("g",{children:e.map(({bubble:t},n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const a$t=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:xOe},Symbol.toStringTag,{value:"Module"}));function eee({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const u$t=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:eee},Symbol.toStringTag,{value:"Module"})),l$t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},c$t=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=ike().size([t-10,n-10]).padding(1.5),o=t4(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},f$t=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function d$t({parameters:e}){const[t,n]=uT(l$t),r=c$t(e,n.width,n.height),i=f$t(r,e.selectedIndices);return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[_.jsx(xOe,{data:r}),_.jsx(eee,{positions:i})]})})})}const h$t=Object.freeze(Object.defineProperty({__proto__:null,default:d$t},Symbol.toStringTag,{value:"Module"}));function SOe({arcs:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const p$t=Object.freeze(Object.defineProperty({__proto__:null,Slices:SOe},Symbol.toStringTag,{value:"Module"}));function TOe({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("g",{transform:`translate(${t.centroid()})`,children:_.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const m$t=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:TOe},Symbol.toStringTag,{value:"Module"})),g$t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},y$t=bTt().value(e=>e.value),bC=150;function v$t({parameters:e}){const[t,n]=uT(g$t),r=y$t(e.data),i=r.map(o=>hH().innerRadius(0).outerRadius(bC).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>hH().outerRadius(bC+10).innerRadius(bC+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft+bC,n.marginTop+bC].join(",")})`,children:[_.jsx(SOe,{arcs:i}),_.jsx(TOe,{positions:s})]})})})}const b$t=Object.freeze(Object.defineProperty({__proto__:null,default:v$t},Symbol.toStringTag,{value:"Module"}));function COe({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=A.useMemo(()=>{const o=Vm().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(${a}, 0)`,children:[_.jsx("line",{y2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const _$t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:COe},Symbol.toStringTag,{value:"Module"}));function AOe({data:e,barWidth:t,yScale:n}){return _.jsx("g",{children:e.map((r,i)=>_.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const w$t=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:AOe},Symbol.toStringTag,{value:"Module"})),E$t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function x$t({parameters:e}){const[n,r]=uT(E$t),i=gR().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=Vm().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(b=>+b.value),g=p.reduce((b,w)=>Number(b)+Number(w))/100,y={};p.forEach((b,w)=>{y[String.fromCharCode(w+65)]=b/g});const v=[y];return UTt().keys(e.data.map(b=>b.name))(v)},l=(h,p,m)=>h.filter((y,v)=>p.includes(v)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(COe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:"translate(0, 0)",children:_.jsx(ZZ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsxs("g",{transform:"translate(0, 0)",children:[_.jsx(AOe,{data:c,barWidth:f,yScale:s}),_.jsx(eee,{positions:d})]})]})})})}const S$t=Object.freeze(Object.defineProperty({__proto__:null,default:x$t},Symbol.toStringTag,{value:"Module"})),T$t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function C$t({parameters:e,setAnswer:t}){const[n,r]=uT(T$t),[i,s]=A.useState(100),[o,a]=A.useState(100),[u,l]=A.useState(300),{taskid:c}=e,{actions:f,trrack:d}=A.useMemo(()=>{const p=B4.create(),m=p.register("click",(y,v)=>(y.clickX=v.clickX,y.clickY=v.clickY,y.distance=v.distance,y)),g=gOe({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=A.useCallback(p=>{const m=Ss("#movingCircle"),g=Ss("#clickAccuracySvg"),y=kV(p,g.node()),v=[+m.attr("cx"),+m.attr("cy")],b=`${Math.round(Math.sqrt((y[0]-v[0])**2+(y[1]-v[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+b,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:b}})},[f,t,c,d]);return A.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;Ss(n.current).select("circle").transition().duration(y).ease(Lbt).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:_.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[_.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),_.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),_.jsxs(me,{children:["Adjust speed (px/s):",_.jsx(J6,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const A$t=Object.freeze(Object.defineProperty({__proto__:null,default:C$t},Symbol.toStringTag,{value:"Module"}));function tme({rankings:e}){return _.jsx("div",{style:{fontFamily:"sans-serif"},children:_.jsx("div",{children:e.map((t,n)=>_.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function I$t({parameters:e,setAnswer:t}){const n=sv(),[r,i]=A.useState(""),{goToNextStep:s,isNextDisabled:o}=RCe(),a=A.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[u]=A.useState(new URLSearchParams(window.location.search)),l=(u.get("admin")||"f")==="t",c=A.useCallback(h=>{i(h),t({status:!0,answers:{[`${n}/leftARP`]:a==="r1"?e.data.r1ARP:e.data.r2ARP,[`${n}/rightARP`]:a==="r2"?e.data.r1ARP:e.data.r2ARP,[`${n}/leftRanking`]:JSON.stringify(a==="r1"?e.data.r1:e.data.r2),[`${n}/rightRanking`]:JSON.stringify(a==="r2"?e.data.r1:e.data.r2),[`${n}/choice`]:h,[`${n}/correctChoice`]:a==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[n,a,e.data,t]),f=A.useCallback(()=>{o||s()},[o,s]);A.useEffect(()=>{const h=XHe([["ArrowLeft",()=>c("left")],["ArrowRight",()=>c("right")],["Enter",f]]);return document.body.addEventListener("keydown",h),()=>{document.body.removeEventListener("keydown",h)}},[c,f]);let d=!1;return a==="r1"?(r==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||r==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(d=!0):(r==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||r==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(d=!0),_.jsxs("div",{children:[_.jsxs(ds,{children:[_.jsxs(ds.Col,{span:2,children:[_.jsx(tme,{rankings:a==="r1"?e.data.r1:e.data.r2}),_.jsx(dn,{fullWidth:!0,disabled:r==="left",onClick:()=>{c("left")},children:r==="left"?_.jsx(Tle,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r1ARP:e.data.r2ARP})]}),_.jsxs(ds.Col,{span:2,children:[_.jsx(tme,{rankings:a==="r1"?e.data.r2:e.data.r1}),_.jsx(dn,{fullWidth:!0,disabled:r==="right",onClick:()=>{c("right")},children:r==="right"?_.jsx(Tle,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),l&&r&&_.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:d?"CORRECT":"INCORRECT"})]})}const k$t=Object.freeze(Object.defineProperty({__proto__:null,default:I$t},Symbol.toStringTag,{value:"Module"}));function R$t({parameters:e}){const{description:t,mapData:n}=e;return _.jsx(Kc,{children:_.jsxs(me,{style:{minWidth:"fit-content"},children:[_.jsx(ze,{size:"lg",fw:700,style:{marginBottom:"10px"},children:"Trial"}),_.jsx(ze,{style:{marginBottom:"10px",width:"900px"},children:t.text}),_.jsxs(ds,{children:[_.jsx(ds.Col,{span:10,children:_.jsx("div",{style:{minHeight:n.height},children:_.jsx("iframe",{width:n.width,height:n.height,style:{border:"0px"},src:n.mapFileLocation,title:n.title})})}),_.jsx(ds.Col,{span:1,children:_.jsx("div",{style:{minHeight:n.keyHeight},children:_.jsx("iframe",{width:n.keyWidth,height:n.keyHeight,style:{border:"0px"},src:n.keyFileLocation,title:n.title})})})]}),_.jsx(ze,{style:{marginBottom:"10px",width:"900px"},children:t.textUnder})]})})}const N$t=Object.freeze(Object.defineProperty({__proto__:null,default:R$t},Symbol.toStringTag,{value:"Module"})),nme=Object.assign({"../public/card-sort-2/CardSortReact.tsx":q0t,"../public/demo-brush-interactions/assets/Bar.tsx":HTt,"../public/demo-brush-interactions/assets/BrushPlot.tsx":JOt,"../public/demo-brush-interactions/assets/Paintbrush.tsx":XOt,"../public/demo-brush-interactions/assets/Scatter.tsx":QOt,"../public/demo-brush-interactions/assets/XAxisBar.tsx":zTt,"../public/demo-brush-interactions/assets/YAxis.tsx":KOt,"../public/demo-brush-interactions/assets/YAxisBar.tsx":VTt,"../public/demo-brush-interactions/assets/types.ts":ZOt,"../public/demo-cleveland/assets/BarChart.tsx":o$t,"../public/demo-cleveland/assets/BubbleChart.tsx":h$t,"../public/demo-cleveland/assets/PieChart.tsx":b$t,"../public/demo-cleveland/assets/StackedBarChart.tsx":S$t,"../public/demo-cleveland/assets/chartcomponents/Bars.tsx":t$t,"../public/demo-cleveland/assets/chartcomponents/Bubbles.tsx":a$t,"../public/demo-cleveland/assets/chartcomponents/DotMarks.tsx":u$t,"../public/demo-cleveland/assets/chartcomponents/NumericAxisH.tsx":_$t,"../public/demo-cleveland/assets/chartcomponents/NumericAxisV.tsx":n$t,"../public/demo-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":r$t,"../public/demo-cleveland/assets/chartcomponents/Slices.tsx":p$t,"../public/demo-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":m$t,"../public/demo-cleveland/assets/chartcomponents/StackedBars.tsx":w$t,"../public/demo-cleveland/assets/hooks/useChartDimensions.tsx":e$t,"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":A$t,"../public/demo-fairness-jnd/assets/FairnessJND.tsx":k$t,"../public/vizumap-example/MapStimulus.tsx":N$t});function D$t({currentConfig:e}){const t=gg(),n=sv(),r=`../public/${e.path}`,i=r in nme?nme[r].default:null,s=dp(),{updateResponseBlockValidation:o,setIframeAnswers:a}=fp();function u({status:l,provenanceGraph:c,answers:f}){s(o({location:"sidebar",identifier:`${n}_${t}`,status:l,values:f,provenanceGraph:c})),s(a(f))}return _.jsx(A.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:i?_.jsx(i,{parameters:e.parameters,setAnswer:u}):_.jsx(pb,{path:e.path})})}function P$t({currentConfig:e}){const[t,n]=A.useState(""),[r,i]=A.useState(!0);return A.useEffect(()=>{async function s(){const o=await KX(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?_.jsx(su,{text:t}):_.jsx(pb,{path:e.path})}const O$t={},$$t=Object.freeze(Object.defineProperty({__proto__:null,default:O$t},Symbol.toStringTag,{value:"Module"})),M$t=f7e($$t);var L$t=M$t;function F$t(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function j$t(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function B$t(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function U$t(e){return e.__COMMENTS__}function z$t(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var U4={EOL:L$t.EOL||`
`,tryParseNumber:F$t,createComment:j$t,removeComment:B$t,getComment:U$t,forceComment:z$t},V$t="3.2.1";function H$t(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return rme}else if(e.length===0)return rme;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return W$t(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),q$t.bind(null,n)}function q$t(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function rme(){}function W$t(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function IOe(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}IOe.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function kOe(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}kOe.description="parse hexadecimal numbers prefixed with 0x";function ROe(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}ROe.description="support ISO dates";var tee={loadDsf:H$t,std:{math:IOe,hex:kOe,date:ROe}},G$t=function(e,t){var n=U4,r=tee,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f($){return $==="{"||$==="}"||$==="["||$==="]"||$===","||$===":"}function d($){var L,M=0,B=1;for(L=s-1;L>0&&i[L]!==`
`;L--,M++);for(;L>0;L--)i[L]===`
`&&B++;throw new Error($+" at line "+B+","+M+" >>>"+i.substr(s-M,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p($){return i.charAt(s+$)}function m($){for(var L="",M=o;h();){if(o===M)return h(),$&&M==="'"&&o==="'"&&L.length===0?(h(),g()):L;if(o==="\\")if(h(),o==="u"){for(var B=0,U=0;U<4;U++){h();var V=o.charCodeAt(0),D;o>="0"&&o<="9"?D=V-48:o>="a"&&o<="f"?D=V-97+10:o>="A"&&o<="F"?D=V-65+10:d("Bad \\u char "+o),B=B*16+D}L+=String.fromCharCode(B)}else if(typeof a[o]=="string")L+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):L+=o}d("Bad string")}function g(){for(var $="",L=0,M=0;;){var B=p(-M-5);if(!B||B===`
`)break;M++}function U(){for(var V=M;o&&o<=" "&&o!==`
`&&V-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),U());;){if(!o)d("Bad multiline string");else if(o==="'"){if(L++,h(),L===3)return $.slice(-1)===`
`&&($=$.slice(0,-1)),$;continue}else for(;L>0;)$+="'",L--;o===`
`?($+=`
`,h(),U()):(o!=="\r"&&($+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var $="",L=s,M=-1;;){if(o===":")return $?M>=0&&M!==$.length&&(s=L+M,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),$;o<=" "?o?M<0&&(M=$.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):$+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function b(){var $=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var L=o==="\r"||o===`
`||o==="";if(L||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var M=$[0];switch(M){case"f":if($.trim()==="false")return!1;break;case"n":if($.trim()==="null")return null;break;case"t":if($.trim()==="true")return!0;break;default:if(M==="-"||M>="0"&&M<="9"){var B=n.tryParseNumber($);if(B!==void 0)return B}}if(L){$=$.trim();var U=l($);return U!==void 0?U:$}}$+=o}}function w($,L){var M;for($--,M=s-2;M>$&&i[M]<=" "&&i[M]!==`
`;M--);i[M]===`
`&&M--,i[M]==="\r"&&M--;var B=i.substr($,M-$+1);for(M=0;M<B.length;M++)if(B[M]>" "){var U=B.indexOf(`
`);if(U>=0){var V=[B.substr(0,U),B.substr(U+1)];return L&&V[0].trim().length===0&&V.shift(),V}else return[B]}return[]}function E($){function L(B,U){var V,D,z,W;switch(typeof B){case"string":B.indexOf(U)>=0&&(W=B);break;case"object":if(Object.prototype.toString.apply(B)==="[object Array]")for(V=0,z=B.length;V<z;V++)W=L(B[V],U)||W;else for(D in B)Object.prototype.hasOwnProperty.call(B,D)&&(W=L(B[D],U)||W)}return W}function M(B){var U=L($,B);return U?"found '"+B+`' in a string value, your mistake could be with:
  > `+U+`
  (unquoted strings contain everything up to the next line!)`:""}return M("}")||M("]")}function x(){var $=[],L,M,B;try{if(u&&(L=n.createComment($,{a:[]})),h(),M=s,v(),L&&(B=w(M,!0).join(`
`)),o==="]")return h(),L&&(L.e=[B]),$;for(;o;){if($.push(C()),M=s,v(),o===","&&(h(),M=s,v()),L){var U=w(M);L.a.push([B||"",U[0]||""]),B=U[1]}if(o==="]")return h(),L&&(L.a[L.a.length-1][1]+=B||""),$;v()}d("End of input while parsing an array (missing ']')")}catch(V){throw V.hint=V.hint||E($),V}}function S($){var L="",M={},B,U,V;try{if(u&&(B=n.createComment(M,{c:{},o:[]})),$?U=1:(h(),U=s),v(),B&&(V=w(U,!0).join(`
`)),o==="}"&&!$)return B&&(B.e=[V]),h(),M;for(;o;){if(L=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),M[L]=C(),U=s,v(),o===","&&(h(),U=s,v()),B){var D=w(U);B.c[L]=[V||"",D[0]||""],V=D[1],B.o.push(L)}if(o==="}"&&!$)return h(),B&&(B.c[L][1]+=V||""),M;v()}if($)return M;d("End of input while parsing an object (missing '}')")}catch(z){throw z.hint=z.hint||E(M),z}}function C(){switch(v(),o){case"{":return S();case"[":return x();case"'":case'"':return m(!0);default:return b()}}function I($,L){var M=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var B=L.join(`
`),U=w(M).join(`
`);if(U||B){var V=n.createComment($,n.getComment($));V.r=[B,U]}}return $}function k(){v();var $=u?w(1):null;switch(o){case"{":return I(S(),$);case"[":return I(x(),$);default:return I(C(),$)}}function R(){v();var $=u?w(1):null;switch(o){case"{":return I(S(),$);case"[":return I(x(),$)}try{return I(S(!0),$)}catch(L){c();try{return I(C(),$)}catch{throw L}}}if(typeof e!="string")throw new Error("source is not a string");var O=null,P=!0;return t&&typeof t=="object"&&(u=t.keepWsc,O=t.dsf,P=t.legacyRoot!==!1),l=r.loadDsf(O,"parse"),i=e,c(),P?R():k()},Y$t=function(e,t){var n=U4,r=tee,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var b=v[y];g[b].push(i[b][0].length,i[b][1].length)}}var w,E="---\u2028--\uFEFF-",x=new RegExp('[\\\\\\"\0-'+E+"]","g"),S=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+E+"]","g"),C=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+E+"]","g"),I=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),k={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},R=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,O="",P=0;function $(W,j){return P+=W[0].length+W[1].length-W[2]-W[3],W[0]+j+W[1]}function L(W){return W.replace(x,function(j){var q=k[j];return typeof q=="string"?$(g.esc,q):$(g.uni,("0000"+j.charCodeAt(0).toString(16)).slice(-4))})}function M(W,j,q,G){return W?(S.lastIndex=0,I.lastIndex=0,c||q||S.test(W)||n.tryParseNumber(W,!0)!==void 0||I.test(W)?(x.lastIndex=0,C.lastIndex=0,x.test(W)?!C.test(W)&&!G&&d?B(W,j):$(g.qstr,L(W)):$(g.qstr,W)):$(g.str,W)):$(g.qstr,"")}function B(W,j){var q,G=W.replace(/\r/g,"").split(`
`);if(j+=o,G.length===1)return $(g.mstr,G[0]);var te=s+j+g.mstr[0];for(q=0;q<G.length;q++)te+=s,G[q]&&(te+=j+G[q]);return te+s+j+g.mstr[1]}function U(W){return W?l||R.test(W)?(x.lastIndex=0,$(g.qkey,x.test(W)?L(W):W)):$(g.key,W):'""'}function V(W,j,q,G){function te(bn){return bn&&bn[bn[0]==="\r"?1:0]===`
`}function le(bn){return bn&&!te(bn)}function fe(bn,Rn,or){if(!bn)return"";bn=n.forceComment(bn);var ar,Jo=bn.length;for(ar=0;ar<Jo&&bn[ar]<=" ";ar++);return or&&ar>0&&(bn=bn.substr(ar)),ar<Jo?Rn+$(g.rem,bn):bn}var de=w(W);if(de!==void 0)return $(g.dsf,de);switch(typeof W){case"string":return M(W,O,j,G);case"number":return isFinite(W)?$(g.num,String(W)):$(g.lit,"null");case"boolean":return $(g.lit,String(W));case"object":if(!W)return $(g.lit,"null");var ye;a&&(ye=n.getComment(W));var Ie=Object.prototype.toString.apply(W)==="[object Array]",pe=O;O+=o;var qe=s+pe,Ue=s+O,vt=q||u?"":qe,it=[],_e,ke=f?[]:null,Ve=c,ct=d,Mt=h?"":g.com[0],Ye=0,ve,pt,bt,ge,Ae,We,ut,wt,Bn;if(Ie){for(ve=0,pt=W.length;ve<pt;ve++){if(_e=ve<pt-1,ye?(We=ye.a[ve]||[],ut=le(We[1]),it.push(fe(We[0],`
`)+Ue),ke&&(We[0]||We[1]||ut)&&(ke=null)):it.push(Ue),P=0,ge=W[ve],it.push(V(ge,ye?ut:!1,!0)+(_e?h:"")),ke){switch(typeof ge){case"string":P=0,c=!0,d=0,ke.push(V(ge,!1,!0)+(_e?g.com[0]:"")),c=Ve,d=ct;break;case"object":if(ge){ke=null;break}default:ke.push(it[it.length-1]+(_e?Mt:""));break}_e&&(P+=g.com[0].length-g.com[2]),Ye+=P}ye&&We[1]&&it.push(fe(We[1],ut?" ":`
`,ut))}pt===0?ye&&ye.e&&it.push(fe(ye.e[0],`
`)+qe):it.push(qe),it.length===0?wt=$(g.arr,""):(wt=vt+$(g.arr,it.join("")),ke&&(Bn=ke.join(" "),Bn.length-Ye<=f&&(wt=$(g.arr,Bn))))}else{var kr=ye?ye.o.slice():[],Un=[];for(bt in W)Object.prototype.hasOwnProperty.call(W,bt)&&kr.indexOf(bt)<0&&Un.push(bt);m&&Un.sort();var pr=kr.concat(Un);for(ve=0,pt=pr.length;ve<pt;ve++)if(_e=ve<pt-1,bt=pr[ve],ye?(We=ye.c[bt]||[],ut=le(We[1]),it.push(fe(We[0],`
`)+Ue),ke&&(We[0]||We[1]||ut)&&(ke=null)):it.push(Ue),P=0,ge=W[bt],Ae=V(ge,ye&&ut),it.push(U(bt)+g.col[0]+(te(Ae)?"":" ")+Ae+(_e?h:"")),ye&&We[1]&&it.push(fe(We[1],ut?" ":`
`,ut)),ke){switch(typeof ge){case"string":P=0,c=!0,d=0,Ae=V(ge,!1),c=Ve,d=ct,ke.push(U(bt)+g.col[0]+" "+Ae+(_e?g.com[0]:""));break;case"object":if(ge){ke=null;break}default:ke.push(it[it.length-1]+(_e?Mt:""));break}P+=g.col[0].length-g.col[2],_e&&(P+=g.com[0].length-g.com[2]),Ye+=P}pt===0?ye&&ye.e&&it.push(fe(ye.e[0],`
`)+qe):it.push(qe),it.length===0?wt=$(g.obj,""):(wt=vt+$(g.obj,it.join("")),ke&&(Bn=ke.join(" "),Bn.length-Ye<=f&&(wt=$(g.obj,Bn))))}return O=pe,wt}}w=r.loadDsf(p,"stringify");var D="",z=a?z=(n.getComment(e)||{}).r:null;return z&&z[0]&&(D=z[0]+`
`),D+=V(e,null,!0,!0),z&&(D+=z[1]||""),D},DE=U4;function p2(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function iq(e,t){if(!(e===null||typeof e!="object")){var n=DE.getComment(e);n&&DE.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)ime(o.a,r,n.a[r],iq(e[r]))&&(s=!0);!s&&n.e&&(o.e=p2(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];ime(o.s,l,n.c[l],iq(e[l]))&&(s=!0)}!s&&n.e&&(o.e=p2(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=p2(n.r[0],n.r[1])),s?o:void 0}}function K$t(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function X$t(e,t){var n=[];if(sq(e,t,n,[]),n.length>0){var r=P3(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+K$t(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),P3(t,r,1)}}function ime(e,t,n,r){var i=p2(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function m2(e,t){var n=p2(t.b,t.a);return n.path=e,n}function g2(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(m2(s,o)),g2(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(m2(u,l)),g2(l.x,t,u))});e.e&&t.push(m2(n,e.e))}}function sq(e,t,n,r){if(e){if(t===null||typeof t!="object"){g2(e,n,r);return}var i,s=DE.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],sq(u.x,t[i],n,l)):(n.push(m2(l,u)),g2(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],sq(d.x,t[c],n,f))):d&&(n.push(m2(f,d)),g2(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function P3(e,t,n){var r=DE.createComment(e,DE.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=DE.forceComment(t)),r.r[n]||""}var Q$t={extract:function(e){return iq(e,!0)},merge:X$t,header:function(e,t){return P3(e,t,0)},footer:function(e,t){return P3(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var sme=U4,J$t=V$t,ome=G$t,ame=Y$t,Z$t=Q$t,eMt=tee,nee={parse:ome,stringify:ame,endOfLine:function(){return sme.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(sme.EOL=e)},version:J$t,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,ome(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,ame(e,t)}},comments:Z$t,dsf:eMt.std},oq={exports:{}},NOe={},rd={},Fx={},DR={},Mn={},ZI={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((b,w)=>`${b}${w}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((b,w)=>(w instanceof n&&(b[w.str]=(b[w.str]||0)+1),b),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const b=[y[0]];let w=0;for(;w<v.length;)a(b,v[w]),b.push(y[++w]);return new r(b)}e._=i;const s=new r("+");function o(y,...v){const b=[h(y[0])];let w=0;for(;w<v.length;)b.push(s),a(b,v[w]),b.push(s,h(y[++w]));return u(b),new r(b)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const b=l(y[v-1],y[v+1]);if(b!==void 0){y.splice(v-1,3,b);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(ZI);var aq={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=ZI;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const b=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${b} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(aq);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=ZI,n=aq;var r=ZI;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=aq;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(q,G){return this}}class o extends s{constructor(q,G,te){super(),this.varKind=q,this.name=G,this.rhs=te}render({es5:q,_n:G}){const te=q?n.varKinds.var:this.varKind,le=this.rhs===void 0?"":` = ${this.rhs}`;return`${te} ${this.name}${le};`+G}optimizeNames(q,G){if(q[this.name.str])return this.rhs&&(this.rhs=$(this.rhs,q,G)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(q,G,te){super(),this.lhs=q,this.rhs=G,this.sideEffects=te}render({_n:q}){return`${this.lhs} = ${this.rhs};`+q}optimizeNames(q,G){if(!(this.lhs instanceof t.Name&&!q[this.lhs.str]&&!this.sideEffects))return this.rhs=$(this.rhs,q,G),this}get names(){const q=this.lhs instanceof t.Name?{}:{...this.lhs.names};return P(q,this.rhs)}}class u extends a{constructor(q,G,te,le){super(q,te,le),this.op=G}render({_n:q}){return`${this.lhs} ${this.op}= ${this.rhs};`+q}}class l extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`${this.label}:`+q}}class c extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`break${this.label?` ${this.label}`:""};`+q}}class f extends s{constructor(q){super(),this.error=q}render({_n:q}){return`throw ${this.error};`+q}get names(){return this.error.names}}class d extends s{constructor(q){super(),this.code=q}render({_n:q}){return`${this.code};`+q}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(q,G){return this.code=$(this.code,q,G),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(q=[]){super(),this.nodes=q}render(q){return this.nodes.reduce((G,te)=>G+te.render(q),"")}optimizeNodes(){const{nodes:q}=this;let G=q.length;for(;G--;){const te=q[G].optimizeNodes();Array.isArray(te)?q.splice(G,1,...te):te?q[G]=te:q.splice(G,1)}return q.length>0?this:void 0}optimizeNames(q,G){const{nodes:te}=this;let le=te.length;for(;le--;){const fe=te[le];fe.optimizeNames(q,G)||(L(q,fe.names),te.splice(le,1))}return te.length>0?this:void 0}get names(){return this.nodes.reduce((q,G)=>O(q,G.names),{})}}class p extends h{render(q){return"{"+q._n+super.render(q)+"}"+q._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(q,G){super(G),this.condition=q}render(q){let G=`if(${this.condition})`+super.render(q);return this.else&&(G+="else "+this.else.render(q)),G}optimizeNodes(){super.optimizeNodes();const q=this.condition;if(q===!0)return this.nodes;let G=this.else;if(G){const te=G.optimizeNodes();G=this.else=Array.isArray(te)?new g(te):te}if(G)return q===!1?G instanceof y?G:G.nodes:this.nodes.length?this:new y(M(q),G instanceof y?[G]:G.nodes);if(!(q===!1||!this.nodes.length))return this}optimizeNames(q,G){var te;if(this.else=(te=this.else)===null||te===void 0?void 0:te.optimizeNames(q,G),!!(super.optimizeNames(q,G)||this.else))return this.condition=$(this.condition,q,G),this}get names(){const q=super.names;return P(q,this.condition),this.else&&O(q,this.else.names),q}}y.kind="if";class v extends p{}v.kind="for";class b extends v{constructor(q){super(),this.iteration=q}render(q){return`for(${this.iteration})`+super.render(q)}optimizeNames(q,G){if(super.optimizeNames(q,G))return this.iteration=$(this.iteration,q,G),this}get names(){return O(super.names,this.iteration.names)}}class w extends v{constructor(q,G,te,le){super(),this.varKind=q,this.name=G,this.from=te,this.to=le}render(q){const G=q.es5?n.varKinds.var:this.varKind,{name:te,from:le,to:fe}=this;return`for(${G} ${te}=${le}; ${te}<${fe}; ${te}++)`+super.render(q)}get names(){const q=P(super.names,this.from);return P(q,this.to)}}class E extends v{constructor(q,G,te,le){super(),this.loop=q,this.varKind=G,this.name=te,this.iterable=le}render(q){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(q)}optimizeNames(q,G){if(super.optimizeNames(q,G))return this.iterable=$(this.iterable,q,G),this}get names(){return O(super.names,this.iterable.names)}}class x extends p{constructor(q,G,te){super(),this.name=q,this.args=G,this.async=te}render(q){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(q)}}x.kind="func";class S extends h{render(q){return"return "+super.render(q)}}S.kind="return";class C extends p{render(q){let G="try"+super.render(q);return this.catch&&(G+=this.catch.render(q)),this.finally&&(G+=this.finally.render(q)),G}optimizeNodes(){var q,G;return super.optimizeNodes(),(q=this.catch)===null||q===void 0||q.optimizeNodes(),(G=this.finally)===null||G===void 0||G.optimizeNodes(),this}optimizeNames(q,G){var te,le;return super.optimizeNames(q,G),(te=this.catch)===null||te===void 0||te.optimizeNames(q,G),(le=this.finally)===null||le===void 0||le.optimizeNames(q,G),this}get names(){const q=super.names;return this.catch&&O(q,this.catch.names),this.finally&&O(q,this.finally.names),q}}class I extends p{constructor(q){super(),this.error=q}render(q){return`catch(${this.error})`+super.render(q)}}I.kind="catch";class k extends p{render(q){return"finally"+super.render(q)}}k.kind="finally";class R{constructor(q,G={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...G,_n:G.lines?`
`:""},this._extScope=q,this._scope=new n.Scope({parent:q}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(q){return this._scope.name(q)}scopeName(q){return this._extScope.name(q)}scopeValue(q,G){const te=this._extScope.value(q,G);return(this._values[te.prefix]||(this._values[te.prefix]=new Set)).add(te),te}getScopeValue(q,G){return this._extScope.getValue(q,G)}scopeRefs(q){return this._extScope.scopeRefs(q,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(q,G,te,le){const fe=this._scope.toName(G);return te!==void 0&&le&&(this._constants[fe.str]=te),this._leafNode(new o(q,fe,te)),fe}const(q,G,te){return this._def(n.varKinds.const,q,G,te)}let(q,G,te){return this._def(n.varKinds.let,q,G,te)}var(q,G,te){return this._def(n.varKinds.var,q,G,te)}assign(q,G,te){return this._leafNode(new a(q,G,te))}add(q,G){return this._leafNode(new u(q,e.operators.ADD,G))}code(q){return typeof q=="function"?q():q!==t.nil&&this._leafNode(new d(q)),this}object(...q){const G=["{"];for(const[te,le]of q)G.length>1&&G.push(","),G.push(te),(te!==le||this.opts.es5)&&(G.push(":"),(0,t.addCodeArg)(G,le));return G.push("}"),new t._Code(G)}if(q,G,te){if(this._blockNode(new y(q)),G&&te)this.code(G).else().code(te).endIf();else if(G)this.code(G).endIf();else if(te)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(q){return this._elseNode(new y(q))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(q,G){return this._blockNode(q),G&&this.code(G).endFor(),this}for(q,G){return this._for(new b(q),G)}forRange(q,G,te,le,fe=this.opts.es5?n.varKinds.var:n.varKinds.let){const de=this._scope.toName(q);return this._for(new w(fe,de,G,te),()=>le(de))}forOf(q,G,te,le=n.varKinds.const){const fe=this._scope.toName(q);if(this.opts.es5){const de=G instanceof t.Name?G:this.var("_arr",G);return this.forRange("_i",0,(0,t._)`${de}.length`,ye=>{this.var(fe,(0,t._)`${de}[${ye}]`),te(fe)})}return this._for(new E("of",le,fe,G),()=>te(fe))}forIn(q,G,te,le=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(q,(0,t._)`Object.keys(${G})`,te);const fe=this._scope.toName(q);return this._for(new E("in",le,fe,G),()=>te(fe))}endFor(){return this._endBlockNode(v)}label(q){return this._leafNode(new l(q))}break(q){return this._leafNode(new c(q))}return(q){const G=new S;if(this._blockNode(G),this.code(q),G.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(S)}try(q,G,te){if(!G&&!te)throw new Error('CodeGen: "try" without "catch" and "finally"');const le=new C;if(this._blockNode(le),this.code(q),G){const fe=this.name("e");this._currNode=le.catch=new I(fe),G(fe)}return te&&(this._currNode=le.finally=new k,this.code(te)),this._endBlockNode(I,k)}throw(q){return this._leafNode(new f(q))}block(q,G){return this._blockStarts.push(this._nodes.length),q&&this.code(q).endBlock(G),this}endBlock(q){const G=this._blockStarts.pop();if(G===void 0)throw new Error("CodeGen: not in self-balancing block");const te=this._nodes.length-G;if(te<0||q!==void 0&&te!==q)throw new Error(`CodeGen: wrong number of nodes: ${te} vs ${q} expected`);return this._nodes.length=G,this}func(q,G=t.nil,te,le){return this._blockNode(new x(q,G,te)),le&&this.code(le).endFunc(),this}endFunc(){return this._endBlockNode(x)}optimize(q=1){for(;q-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(q){return this._currNode.nodes.push(q),this}_blockNode(q){this._currNode.nodes.push(q),this._nodes.push(q)}_endBlockNode(q,G){const te=this._currNode;if(te instanceof q||G&&te instanceof G)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${G?`${q.kind}/${G.kind}`:q.kind}"`)}_elseNode(q){const G=this._currNode;if(!(G instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=G.else=q,this}get _root(){return this._nodes[0]}get _currNode(){const q=this._nodes;return q[q.length-1]}set _currNode(q){const G=this._nodes;G[G.length-1]=q}}e.CodeGen=R;function O(j,q){for(const G in q)j[G]=(j[G]||0)+(q[G]||0);return j}function P(j,q){return q instanceof t._CodeOrName?O(j,q.names):j}function $(j,q,G){if(j instanceof t.Name)return te(j);if(!le(j))return j;return new t._Code(j._items.reduce((fe,de)=>(de instanceof t.Name&&(de=te(de)),de instanceof t._Code?fe.push(...de._items):fe.push(de),fe),[]));function te(fe){const de=G[fe.str];return de===void 0||q[fe.str]!==1?fe:(delete q[fe.str],de)}function le(fe){return fe instanceof t._Code&&fe._items.some(de=>de instanceof t.Name&&q[de.str]===1&&G[de.str]!==void 0)}}function L(j,q){for(const G in q)j[G]=(j[G]||0)-(q[G]||0)}function M(j){return typeof j=="boolean"||typeof j=="number"||j===null?!j:(0,t._)`!${W(j)}`}e.not=M;const B=z(e.operators.AND);function U(...j){return j.reduce(B)}e.and=U;const V=z(e.operators.OR);function D(...j){return j.reduce(V)}e.or=D;function z(j){return(q,G)=>q===t.nil?G:G===t.nil?q:(0,t._)`${W(q)} ${j} ${W(G)}`}function W(j){return j instanceof t.Name?j:(0,t._)`(${j})`}})(Mn);var Et={};Object.defineProperty(Et,"__esModule",{value:!0});Et.checkStrictMode=Et.getErrorPath=Et.Type=Et.useFunc=Et.setEvaluated=Et.evaluatedPropsToName=Et.mergeEvaluated=Et.eachItem=Et.unescapeJsonPointer=Et.escapeJsonPointer=Et.escapeFragment=Et.unescapeFragment=Et.schemaRefOrVal=Et.schemaHasRulesButRef=Et.schemaHasRules=Et.checkUnknownRules=Et.alwaysValidSchema=Et.toHash=void 0;const Zr=Mn,tMt=ZI;function nMt(e){const t={};for(const n of e)t[n]=!0;return t}Et.toHash=nMt;function rMt(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(DOe(e,t),!POe(t,e.self.RULES.all))}Et.alwaysValidSchema=rMt;function DOe(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||MOe(e,`unknown keyword: "${s}"`)}Et.checkUnknownRules=DOe;function POe(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}Et.schemaHasRules=POe;function iMt(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}Et.schemaHasRulesButRef=iMt;function sMt({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Zr._)`${n}`}return(0,Zr._)`${e}${t}${(0,Zr.getProperty)(r)}`}Et.schemaRefOrVal=sMt;function oMt(e){return OOe(decodeURIComponent(e))}Et.unescapeFragment=oMt;function aMt(e){return encodeURIComponent(ree(e))}Et.escapeFragment=aMt;function ree(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}Et.escapeJsonPointer=ree;function OOe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}Et.unescapeJsonPointer=OOe;function uMt(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}Et.eachItem=uMt;function ume({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof Zr.Name?(s instanceof Zr.Name?e(i,s,o):t(i,s,o),o):s instanceof Zr.Name?(t(i,o,s),s):n(s,o);return a===Zr.Name&&!(u instanceof Zr.Name)?r(i,u):u}}Et.mergeEvaluated={props:ume({mergeNames:(e,t,n)=>e.if((0,Zr._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,Zr._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,Zr._)`${n} || {}`).code((0,Zr._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,Zr._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,Zr._)`${n} || {}`),iee(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:$Oe}),items:ume({mergeNames:(e,t,n)=>e.if((0,Zr._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,Zr._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,Zr._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,Zr._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function $Oe(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,Zr._)`{}`);return t!==void 0&&iee(e,n,t),n}Et.evaluatedPropsToName=$Oe;function iee(e,t,n){Object.keys(n).forEach(r=>e.assign((0,Zr._)`${t}${(0,Zr.getProperty)(r)}`,!0))}Et.setEvaluated=iee;const lme={};function lMt(e,t){return e.scopeValue("func",{ref:t,code:lme[t.code]||(lme[t.code]=new tMt._Code(t.code))})}Et.useFunc=lMt;var uq;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(uq||(Et.Type=uq={}));function cMt(e,t,n){if(e instanceof Zr.Name){const r=t===uq.Num;return n?r?(0,Zr._)`"[" + ${e} + "]"`:(0,Zr._)`"['" + ${e} + "']"`:r?(0,Zr._)`"/" + ${e}`:(0,Zr._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Zr.getProperty)(e).toString():"/"+ree(e)}Et.getErrorPath=cMt;function MOe(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}Et.checkStrictMode=MOe;var yp={};Object.defineProperty(yp,"__esModule",{value:!0});const ca=Mn,fMt={data:new ca.Name("data"),valCxt:new ca.Name("valCxt"),instancePath:new ca.Name("instancePath"),parentData:new ca.Name("parentData"),parentDataProperty:new ca.Name("parentDataProperty"),rootData:new ca.Name("rootData"),dynamicAnchors:new ca.Name("dynamicAnchors"),vErrors:new ca.Name("vErrors"),errors:new ca.Name("errors"),this:new ca.Name("this"),self:new ca.Name("self"),scope:new ca.Name("scope"),json:new ca.Name("json"),jsonPos:new ca.Name("jsonPos"),jsonLen:new ca.Name("jsonLen"),jsonPart:new ca.Name("jsonPart")};yp.default=fMt;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Mn,n=Et,r=yp;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,b){const{it:w}=g,{gen:E,compositeRule:x,allErrors:S}=w,C=f(g,y,v);b??(x||S)?u(E,C):l(w,(0,t._)`[${C}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:b}=g,{gen:w,compositeRule:E,allErrors:x}=b,S=f(g,y,v);u(w,S),E||x||l(b,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:b,errsCount:w,it:E}){if(w===void 0)throw new Error("ajv implementation error");const x=g.name("err");g.forRange("i",w,r.default.errors,S=>{g.const(x,(0,t._)`${r.default.vErrors}[${S}]`),g.if((0,t._)`${x}.instancePath === undefined`,()=>g.assign((0,t._)`${x}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),g.assign((0,t._)`${x}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${y}`),E.opts.verbose&&(g.assign((0,t._)`${x}.schema`,v),g.assign((0,t._)`${x}.data`,b))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:b,schemaEnv:w}=g;w.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${b}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:b}=g.it;return b===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:b,it:w}=g,E=[h(w,v),p(g,v)];return m(g,y,E),b.object(...E)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:b}){let w=b?y:(0,t.str)`${y}/${g}`;return v&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:y,message:v},b){const{keyword:w,data:E,schemaValue:x,it:S}=g,{opts:C,propertyName:I,topSchemaRef:k,schemaPath:R}=S;b.push([c.keyword,w],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),C.messages&&b.push([c.message,typeof v=="function"?v(g):v]),C.verbose&&b.push([c.schema,x],[c.parentSchema,(0,t._)`${k}${R}`],[r.default.data,E]),I&&b.push([c.propertyName,I])}})(DR);Object.defineProperty(Fx,"__esModule",{value:!0});Fx.boolOrEmptySchema=Fx.topBoolOrEmptySchema=void 0;const dMt=DR,hMt=Mn,pMt=yp,mMt={message:"boolean schema is false"};function gMt(e){const{gen:t,schema:n,validateName:r}=e;n===!1?LOe(e,!1):typeof n=="object"&&n.$async===!0?t.return(pMt.default.data):(t.assign((0,hMt._)`${r}.errors`,null),t.return(!0))}Fx.topBoolOrEmptySchema=gMt;function yMt(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),LOe(e)):n.var(t,!0)}Fx.boolOrEmptySchema=yMt;function LOe(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,dMt.reportError)(i,mMt,void 0,t)}var $s={},Ab={};Object.defineProperty(Ab,"__esModule",{value:!0});Ab.getRules=Ab.isJSONType=void 0;const vMt=["string","number","integer","boolean","null","object","array"],bMt=new Set(vMt);function _Mt(e){return typeof e=="string"&&bMt.has(e)}Ab.isJSONType=_Mt;function wMt(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Ab.getRules=wMt;var xm={};Object.defineProperty(xm,"__esModule",{value:!0});xm.shouldUseRule=xm.shouldUseGroup=xm.schemaHasRulesForType=void 0;function EMt({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&FOe(e,r)}xm.schemaHasRulesForType=EMt;function FOe(e,t){return t.rules.some(n=>jOe(e,n))}xm.shouldUseGroup=FOe;function jOe(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}xm.shouldUseRule=jOe;Object.defineProperty($s,"__esModule",{value:!0});$s.reportTypeError=$s.checkDataTypes=$s.checkDataType=$s.coerceAndCheckDataType=$s.getJSONTypes=$s.getSchemaTypes=$s.DataType=void 0;const xMt=Ab,SMt=xm,TMt=DR,Sn=Mn,BOe=Et;var PE;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(PE||($s.DataType=PE={}));function CMt(e){const t=UOe(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}$s.getSchemaTypes=CMt;function UOe(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(xMt.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}$s.getJSONTypes=UOe;function AMt(e,t){const{gen:n,data:r,opts:i}=e,s=IMt(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,SMt.schemaHasRulesForType)(e,t[0]));if(o){const a=see(t,r,i.strictNumbers,PE.Wrong);n.if(a,()=>{s.length?kMt(e,t,s):oee(e)})}return o}$s.coerceAndCheckDataType=AMt;const zOe=new Set(["string","number","integer","boolean","null"]);function IMt(e,t){return t?e.filter(n=>zOe.has(n)||t==="array"&&n==="array"):[]}function kMt(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,Sn._)`typeof ${i}`),a=r.let("coerced",(0,Sn._)`undefined`);s.coerceTypes==="array"&&r.if((0,Sn._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,Sn._)`${i}[0]`).assign(o,(0,Sn._)`typeof ${i}`).if(see(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,Sn._)`${a} !== undefined`);for(const l of n)(zOe.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),oee(e),r.endIf(),r.if((0,Sn._)`${a} !== undefined`,()=>{r.assign(i,a),RMt(e,a)});function u(l){switch(l){case"string":r.elseIf((0,Sn._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,Sn._)`"" + ${i}`).elseIf((0,Sn._)`${i} === null`).assign(a,(0,Sn._)`""`);return;case"number":r.elseIf((0,Sn._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,Sn._)`+${i}`);return;case"integer":r.elseIf((0,Sn._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,Sn._)`+${i}`);return;case"boolean":r.elseIf((0,Sn._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,Sn._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,Sn._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,Sn._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,Sn._)`[${i}]`)}}}function RMt({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,Sn._)`${t} !== undefined`,()=>e.assign((0,Sn._)`${t}[${n}]`,r))}function lq(e,t,n,r=PE.Correct){const i=r===PE.Correct?Sn.operators.EQ:Sn.operators.NEQ;let s;switch(e){case"null":return(0,Sn._)`${t} ${i} null`;case"array":s=(0,Sn._)`Array.isArray(${t})`;break;case"object":s=(0,Sn._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,Sn._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,Sn._)`typeof ${t} ${i} ${e}`}return r===PE.Correct?s:(0,Sn.not)(s);function o(a=Sn.nil){return(0,Sn.and)((0,Sn._)`typeof ${t} == "number"`,a,n?(0,Sn._)`isFinite(${t})`:Sn.nil)}}$s.checkDataType=lq;function see(e,t,n,r){if(e.length===1)return lq(e[0],t,n,r);let i;const s=(0,BOe.toHash)(e);if(s.array&&s.object){const o=(0,Sn._)`typeof ${t} != "object"`;i=s.null?o:(0,Sn._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=Sn.nil;s.number&&delete s.integer;for(const o in s)i=(0,Sn.and)(i,lq(o,t,n,r));return i}$s.checkDataTypes=see;const NMt={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,Sn._)`{type: ${e}}`:(0,Sn._)`{type: ${t}}`};function oee(e){const t=DMt(e);(0,TMt.reportError)(t,NMt)}$s.reportTypeError=oee;function DMt(e){const{gen:t,data:n,schema:r}=e,i=(0,BOe.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var z4={};Object.defineProperty(z4,"__esModule",{value:!0});z4.assignDefaults=void 0;const sw=Mn,PMt=Et;function OMt(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)cme(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>cme(e,s,i.default))}z4.assignDefaults=OMt;function cme(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,sw._)`${s}${(0,sw.getProperty)(t)}`;if(i){(0,PMt.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,sw._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,sw._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,sw._)`${a} = ${(0,sw.stringify)(n)}`)}var vh={},On={};Object.defineProperty(On,"__esModule",{value:!0});On.validateUnion=On.validateArray=On.usePattern=On.callValidateCode=On.schemaProperties=On.allSchemaProperties=On.noPropertyInData=On.propertyInData=On.isOwnProperty=On.hasPropFunc=On.reportMissingProp=On.checkMissingProp=On.checkReportMissingProp=void 0;const di=Mn,aee=Et,Lg=yp,$Mt=Et;function MMt(e,t){const{gen:n,data:r,it:i}=e;n.if(lee(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,di._)`${t}`},!0),e.error()})}On.checkReportMissingProp=MMt;function LMt({gen:e,data:t,it:{opts:n}},r,i){return(0,di.or)(...r.map(s=>(0,di.and)(lee(e,t,s,n.ownProperties),(0,di._)`${i} = ${s}`)))}On.checkMissingProp=LMt;function FMt(e,t){e.setParams({missingProperty:t},!0),e.error()}On.reportMissingProp=FMt;function VOe(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,di._)`Object.prototype.hasOwnProperty`})}On.hasPropFunc=VOe;function uee(e,t,n){return(0,di._)`${VOe(e)}.call(${t}, ${n})`}On.isOwnProperty=uee;function jMt(e,t,n,r){const i=(0,di._)`${t}${(0,di.getProperty)(n)} !== undefined`;return r?(0,di._)`${i} && ${uee(e,t,n)}`:i}On.propertyInData=jMt;function lee(e,t,n,r){const i=(0,di._)`${t}${(0,di.getProperty)(n)} === undefined`;return r?(0,di.or)(i,(0,di.not)(uee(e,t,n))):i}On.noPropertyInData=lee;function HOe(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}On.allSchemaProperties=HOe;function BMt(e,t){return HOe(t).filter(n=>!(0,aee.alwaysValidSchema)(e,t[n]))}On.schemaProperties=BMt;function UMt({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,di._)`${e}, ${t}, ${r}${i}`:t,f=[[Lg.default.instancePath,(0,di.strConcat)(Lg.default.instancePath,s)],[Lg.default.parentData,o.parentData],[Lg.default.parentDataProperty,o.parentDataProperty],[Lg.default.rootData,Lg.default.rootData]];o.opts.dynamicRef&&f.push([Lg.default.dynamicAnchors,Lg.default.dynamicAnchors]);const d=(0,di._)`${c}, ${n.object(...f)}`;return u!==di.nil?(0,di._)`${a}.call(${u}, ${d})`:(0,di._)`${a}(${d})`}On.callValidateCode=UMt;const zMt=(0,di._)`new RegExp`;function VMt({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,di._)`${i.code==="new RegExp"?zMt:(0,$Mt.useFunc)(e,i)}(${n}, ${r})`})}On.usePattern=VMt;function HMt(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,di._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:aee.Type.Num},s),t.if((0,di.not)(s),a)})}}On.validateArray=HMt;function qMt(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,aee.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,di._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,di.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}On.validateUnion=qMt;Object.defineProperty(vh,"__esModule",{value:!0});vh.validateKeywordUsage=vh.validSchemaType=vh.funcKeywordCode=vh.macroKeywordCode=void 0;const Wa=Mn,m1=yp,WMt=On,GMt=DR;function YMt(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=qOe(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:Wa.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}vh.macroKeywordCode=YMt;function KMt(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;QMt(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=qOe(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&fme(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&fme(e),g(()=>XMt(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,Wa._)`await `),v=>r.assign(f,!1).if((0,Wa._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,Wa._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,Wa._)`${c}.errors`;return r.assign(y,null),m(Wa.nil),y}function m(y=t.async?(0,Wa._)`await `:Wa.nil){const v=u.opts.passContext?m1.default.this:m1.default.self,b=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,Wa._)`${y}${(0,WMt.callValidateCode)(e,c,v,b)}`,t.modifying)}function g(y){var v;r.if((0,Wa.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}vh.funcKeywordCode=KMt;function fme(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,Wa._)`${r.parentData}[${r.parentDataProperty}]`))}function XMt(e,t){const{gen:n}=e;n.if((0,Wa._)`Array.isArray(${t})`,()=>{n.assign(m1.default.vErrors,(0,Wa._)`${m1.default.vErrors} === null ? ${t} : ${m1.default.vErrors}.concat(${t})`).assign(m1.default.errors,(0,Wa._)`${m1.default.vErrors}.length`),(0,GMt.extendErrors)(e)},()=>e.error())}function QMt({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function qOe(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Wa.stringify)(n)})}function JMt(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}vh.validSchemaType=JMt;function ZMt({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}vh.validateKeywordUsage=ZMt;var Y0={};Object.defineProperty(Y0,"__esModule",{value:!0});Y0.extendSubschemaMode=Y0.extendSubschemaData=Y0.getSubschema=void 0;const dh=Mn,WOe=Et;function e3t(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,dh._)`${e.schemaPath}${(0,dh.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,dh._)`${e.schemaPath}${(0,dh.getProperty)(t)}${(0,dh.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,WOe.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}Y0.getSubschema=e3t;function t3t(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,dh._)`${t.data}${(0,dh.getProperty)(n)}`,!0);u(d),e.errorPath=(0,dh.str)`${l}${(0,WOe.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,dh._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof dh.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}Y0.extendSubschemaData=t3t;function n3t(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}Y0.extendSubschemaMode=n3t;var Mo={},GOe={exports:{}},b0=GOe.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};SO(t,r,i,e,"",e)};b0.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};b0.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};b0.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};b0.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function SO(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in b0.arrayKeywords)for(var d=0;d<f.length;d++)SO(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in b0.propsKeywords){if(f&&typeof f=="object")for(var h in f)SO(e,t,n,f[h],i+"/"+c+"/"+r3t(h),s,i,c,r,h)}else(c in b0.keywords||e.allKeys&&!(c in b0.skipKeywords))&&SO(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function r3t(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var i3t=GOe.exports;Object.defineProperty(Mo,"__esModule",{value:!0});Mo.getSchemaRefs=Mo.resolveUrl=Mo.normalizeId=Mo._getFullPath=Mo.getFullPath=Mo.inlineRef=void 0;const s3t=Et,o3t=YX,a3t=i3t,u3t=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function l3t(e,t=!0){return typeof e=="boolean"?!0:t===!0?!cq(e):t?YOe(e)<=t:!1}Mo.inlineRef=l3t;const c3t=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function cq(e){for(const t in e){if(c3t.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(cq)||typeof n=="object"&&cq(n))return!0}return!1}function YOe(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!u3t.has(n)&&(typeof e[n]=="object"&&(0,s3t.eachItem)(e[n],r=>t+=YOe(r)),t===1/0))return 1/0}return t}function KOe(e,t="",n){n!==!1&&(t=OE(t));const r=e.parse(t);return XOe(e,r)}Mo.getFullPath=KOe;function XOe(e,t){return e.serialize(t).split("#")[0]+"#"}Mo._getFullPath=XOe;const f3t=/#\/?$/;function OE(e){return e?e.replace(f3t,""):""}Mo.normalizeId=OE;function d3t(e,t,n){return n=OE(n),e.resolve(t,n)}Mo.resolveUrl=d3t;const h3t=/^[a-z_][-a-z0-9._]*$/i;function p3t(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=OE(e[n]||t),s={"":i},o=KOe(r,i,!1),a={},u=new Set;return a3t(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(b){const w=this.opts.uriResolver.resolve;if(b=OE(g?w(g,b):b),u.has(b))throw c(b);u.add(b);let E=this.refs[b];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?l(f,E.schema,b):b!==OE(m)&&(b[0]==="#"?(l(f,a[b],b),a[b]=f):this.refs[b]=m),b}function v(b){if(typeof b=="string"){if(!h3t.test(b))throw new Error(`invalid anchor "${b}"`);y.call(this,`#${b}`)}}}),a;function l(f,d,h){if(d!==void 0&&!o3t(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Mo.getSchemaRefs=p3t;Object.defineProperty(rd,"__esModule",{value:!0});rd.getData=rd.KeywordCxt=rd.validateFunctionCode=void 0;const QOe=Fx,dme=$s,cee=xm,O3=$s,m3t=z4,y2=vh,tU=Y0,$t=Mn,un=yp,g3t=Mo,Sm=Et,_C=DR;function y3t(e){if(e$e(e)&&(t$e(e),ZOe(e))){_3t(e);return}JOe(e,()=>(0,QOe.topBoolOrEmptySchema)(e))}rd.validateFunctionCode=y3t;function JOe({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,$t._)`${un.default.data}, ${un.default.valCxt}`,r.$async,()=>{e.code((0,$t._)`"use strict"; ${hme(n,i)}`),b3t(e,i),e.code(s)}):e.func(t,(0,$t._)`${un.default.data}, ${v3t(i)}`,r.$async,()=>e.code(hme(n,i)).code(s))}function v3t(e){return(0,$t._)`{${un.default.instancePath}="", ${un.default.parentData}, ${un.default.parentDataProperty}, ${un.default.rootData}=${un.default.data}${e.dynamicRef?(0,$t._)`, ${un.default.dynamicAnchors}={}`:$t.nil}}={}`}function b3t(e,t){e.if(un.default.valCxt,()=>{e.var(un.default.instancePath,(0,$t._)`${un.default.valCxt}.${un.default.instancePath}`),e.var(un.default.parentData,(0,$t._)`${un.default.valCxt}.${un.default.parentData}`),e.var(un.default.parentDataProperty,(0,$t._)`${un.default.valCxt}.${un.default.parentDataProperty}`),e.var(un.default.rootData,(0,$t._)`${un.default.valCxt}.${un.default.rootData}`),t.dynamicRef&&e.var(un.default.dynamicAnchors,(0,$t._)`${un.default.valCxt}.${un.default.dynamicAnchors}`)},()=>{e.var(un.default.instancePath,(0,$t._)`""`),e.var(un.default.parentData,(0,$t._)`undefined`),e.var(un.default.parentDataProperty,(0,$t._)`undefined`),e.var(un.default.rootData,un.default.data),t.dynamicRef&&e.var(un.default.dynamicAnchors,(0,$t._)`{}`)})}function _3t(e){const{schema:t,opts:n,gen:r}=e;JOe(e,()=>{n.$comment&&t.$comment&&r$e(e),T3t(e),r.let(un.default.vErrors,null),r.let(un.default.errors,0),n.unevaluated&&w3t(e),n$e(e),I3t(e)})}function w3t(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,$t._)`${n}.evaluated`),t.if((0,$t._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,$t._)`${e.evaluated}.props`,(0,$t._)`undefined`)),t.if((0,$t._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,$t._)`${e.evaluated}.items`,(0,$t._)`undefined`))}function hme(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,$t._)`/*# sourceURL=${n} */`:$t.nil}function E3t(e,t){if(e$e(e)&&(t$e(e),ZOe(e))){x3t(e,t);return}(0,QOe.boolOrEmptySchema)(e,t)}function ZOe({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function e$e(e){return typeof e.schema!="boolean"}function x3t(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&r$e(e),C3t(e),A3t(e);const s=r.const("_errs",un.default.errors);n$e(e,s),r.var(t,(0,$t._)`${s} === ${un.default.errors}`)}function t$e(e){(0,Sm.checkUnknownRules)(e),S3t(e)}function n$e(e,t){if(e.opts.jtd)return pme(e,[],!1,t);const n=(0,dme.getSchemaTypes)(e.schema),r=(0,dme.coerceAndCheckDataType)(e,n);pme(e,n,!r,t)}function S3t(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,Sm.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function T3t(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,Sm.checkStrictMode)(e,"default is ignored in the schema root")}function C3t(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,g3t.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function A3t(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function r$e({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,$t._)`${un.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,$t.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,$t._)`${un.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function I3t(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,$t._)`${un.default.errors} === 0`,()=>t.return(un.default.data),()=>t.throw((0,$t._)`new ${i}(${un.default.vErrors})`)):(t.assign((0,$t._)`${r}.errors`,un.default.vErrors),s.unevaluated&&k3t(e),t.return((0,$t._)`${un.default.errors} === 0`))}function k3t({gen:e,evaluated:t,props:n,items:r}){n instanceof $t.Name&&e.assign((0,$t._)`${t}.props`,n),r instanceof $t.Name&&e.assign((0,$t._)`${t}.items`,r)}function pme(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,Sm.schemaHasRulesButRef)(s,c))){i.block(()=>o$e(e,"$ref",c.all.$ref.definition));return}u.jtd||R3t(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,cee.shouldUseGroup)(s,d)&&(d.type?(i.if((0,O3.checkDataType)(d.type,o,u.strictNumbers)),mme(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,O3.reportTypeError)(e)),i.endIf()):mme(e,d),a||i.if((0,$t._)`${un.default.errors} === ${r||0}`))}}function mme(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,m3t.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,cee.shouldUseRule)(r,s)&&o$e(e,s.keyword,s.definition,t.type)})}function R3t(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(N3t(e,t),e.opts.allowUnionTypes||D3t(e,t),P3t(e,e.dataTypes))}function N3t(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{i$e(e.dataTypes,n)||fee(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),$3t(e,t)}}function D3t(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&fee(e,"use allowUnionTypes to allow union type keyword")}function P3t(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,cee.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>O3t(t,o))&&fee(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function O3t(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function i$e(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function $3t(e,t){const n=[];for(const r of e.dataTypes)i$e(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function fee(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,Sm.checkStrictMode)(e,t,e.opts.strictTypes)}class s$e{constructor(t,n,r){if((0,y2.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Sm.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",a$e(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,y2.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",un.default.errors))}result(t,n,r){this.failResult((0,$t.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,$t.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,$t._)`${n} !== undefined && (${(0,$t.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?_C.reportExtraError:_C.reportError)(this,this.def.error,n)}$dataError(){(0,_C.reportError)(this,this.def.$dataError||_C.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,_C.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=$t.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=$t.nil,n=$t.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,$t.or)((0,$t._)`${i} === undefined`,n)),t!==$t.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==$t.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,$t.or)(o(),a());function o(){if(r.length){if(!(n instanceof $t.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,$t._)`${(0,O3.checkDataTypes)(u,n,s.opts.strictNumbers,O3.DataType.Wrong)}`}return $t.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,$t._)`!${u}(${n})`}return $t.nil}}subschema(t,n){const r=(0,tU.getSubschema)(this.it,t);(0,tU.extendSubschemaData)(r,this.it,t),(0,tU.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return E3t(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=Sm.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=Sm.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,$t.Name)),!0}}rd.KeywordCxt=s$e;function o$e(e,t,n,r){const i=new s$e(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,y2.funcKeywordCode)(i,n):"macro"in n?(0,y2.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,y2.funcKeywordCode)(i,n)}const M3t=/^\/(?:[^~]|~0|~1)*$/,L3t=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function a$e(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return un.default.rootData;if(e[0]==="/"){if(!M3t.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=un.default.rootData}else{const l=L3t.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,$t._)`${s}${(0,$t.getProperty)((0,Sm.unescapeJsonPointer)(l))}`,o=(0,$t._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}rd.getData=a$e;var PR={};Object.defineProperty(PR,"__esModule",{value:!0});class F3t extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}PR.default=F3t;var lT={};Object.defineProperty(lT,"__esModule",{value:!0});const nU=Mo;class j3t extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,nU.resolveUrl)(t,n,r),this.missingSchema=(0,nU.normalizeId)((0,nU.getFullPath)(t,this.missingRef))}}lT.default=j3t;var Fu={};Object.defineProperty(Fu,"__esModule",{value:!0});Fu.resolveSchema=Fu.getCompilingSchema=Fu.resolveRef=Fu.compileSchema=Fu.SchemaEnv=void 0;const _f=Mn,B3t=PR,$v=yp,zf=Mo,gme=Et,U3t=rd;class V4{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,zf.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Fu.SchemaEnv=V4;function dee(e){const t=u$e.call(this,e);if(t)return t;const n=(0,zf.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new _f.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:B3t.default,code:(0,_f._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:$v.default.data,parentData:$v.default.parentData,parentDataProperty:$v.default.parentDataProperty,dataNames:[$v.default.data],dataPathArr:[_f.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,_f.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:_f.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,_f._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,U3t.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs($v.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${$v.default.self}`,`${$v.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof _f.Name?void 0:p,items:m instanceof _f.Name?void 0:m,dynamicProps:p instanceof _f.Name,dynamicItems:m instanceof _f.Name},h.source&&(h.source.evaluated=(0,_f.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}Fu.compileSchema=dee;function z3t(e,t,n){var r;n=(0,zf.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=q3t.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new V4({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=V3t.call(this,s)}Fu.resolveRef=z3t;function V3t(e){return(0,zf.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:dee.call(this,e)}function u$e(e){for(const t of this._compilations)if(H3t(t,e))return t}Fu.getCompilingSchema=u$e;function H3t(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function q3t(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||H4.call(this,e,t)}function H4(e,t){const n=this.opts.uriResolver.parse(t),r=(0,zf._getFullPath)(this.opts.uriResolver,n);let i=(0,zf.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return rU.call(this,n,e);const s=(0,zf.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=H4.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:rU.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||dee.call(this,o),s===(0,zf.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,zf.resolveUrl)(this.opts.uriResolver,i,l)),new V4({schema:a,schemaId:u,root:e,baseId:i})}return rU.call(this,n,o)}}Fu.resolveSchema=H4;const W3t=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function rU(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,gme.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!W3t.has(a)&&l&&(t=(0,zf.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,gme.schemaHasRulesButRef)(n,this.RULES)){const a=(0,zf.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=H4.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new V4({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const G3t="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Y3t="Meta-schema for $data reference (JSON AnySchema extension proposal)",K3t="object",X3t=["$data"],Q3t={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},J3t=!1,Z3t={$id:G3t,description:Y3t,type:K3t,required:X3t,properties:Q3t,additionalProperties:J3t};var hee={},fq={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(ao,function(n){function r(){for(var oe=arguments.length,ee=Array(oe),ae=0;ae<oe;ae++)ee[ae]=arguments[ae];if(ee.length>1){ee[0]=ee[0].slice(0,-1);for(var Ce=ee.length-1,Se=1;Se<Ce;++Se)ee[Se]=ee[Se].slice(1,-1);return ee[Ce]=ee[Ce].slice(1),ee.join("")}else return ee[0]}function i(oe){return"(?:"+oe+")"}function s(oe){return oe===void 0?"undefined":oe===null?"null":Object.prototype.toString.call(oe).split(" ").pop().split("]").shift().toLowerCase()}function o(oe){return oe.toUpperCase()}function a(oe){return oe!=null?oe instanceof Array?oe:typeof oe.length!="number"||oe.split||oe.setInterval||oe.call?[oe]:Array.prototype.slice.call(oe):[]}function u(oe,ee){var ae=oe;if(ee)for(var Ce in ee)ae[Ce]=ee[Ce];return ae}function l(oe){var ee="[A-Za-z]",ae="[0-9]",Ce=r(ae,"[A-Fa-f]"),Se=i(i("%[EFef]"+Ce+"%"+Ce+Ce+"%"+Ce+Ce)+"|"+i("%[89A-Fa-f]"+Ce+"%"+Ce+Ce)+"|"+i("%"+Ce+Ce)),ot="[\\:\\/\\?\\#\\[\\]\\@]",Tt="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Gt=r(ot,Tt),Ln=oe?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",zn=oe?"[\\uE000-\\uF8FF]":"[]",yn=r(ee,ae,"[\\-\\.\\_\\~]",Ln);i(ee+r(ee,ae,"[\\+\\-\\.]")+"*"),i(i(Se+"|"+r(yn,Tt,"[\\:]"))+"*");var ur=i(i("25[0-5]")+"|"+i("2[0-4]"+ae)+"|"+i("1"+ae+ae)+"|"+i("0?[1-9]"+ae)+"|0?0?"+ae),Nr=i(ur+"\\."+ur+"\\."+ur+"\\."+ur),Wt=i(Ce+"{1,4}"),lr=i(i(Wt+"\\:"+Wt)+"|"+Nr),Kr=i(i(Wt+"\\:")+"{6}"+lr),nr=i("\\:\\:"+i(Wt+"\\:")+"{5}"+lr),Oi=i(i(Wt)+"?\\:\\:"+i(Wt+"\\:")+"{4}"+lr),Xs=i(i(i(Wt+"\\:")+"{0,1}"+Wt)+"?\\:\\:"+i(Wt+"\\:")+"{3}"+lr),ri=i(i(i(Wt+"\\:")+"{0,2}"+Wt)+"?\\:\\:"+i(Wt+"\\:")+"{2}"+lr),So=i(i(i(Wt+"\\:")+"{0,3}"+Wt)+"?\\:\\:"+Wt+"\\:"+lr),Vi=i(i(i(Wt+"\\:")+"{0,4}"+Wt)+"?\\:\\:"+lr),Hi=i(i(i(Wt+"\\:")+"{0,5}"+Wt)+"?\\:\\:"+Wt),Zo=i(i(i(Wt+"\\:")+"{0,6}"+Wt)+"?\\:\\:"),Fa=i([Kr,nr,Oi,Xs,ri,So,Vi,Hi,Zo].join("|")),Qs=i(i(yn+"|"+Se)+"+");i("[vV]"+Ce+"+\\."+r(yn,Tt,"[\\:]")+"+"),i(i(Se+"|"+r(yn,Tt))+"*");var pc=i(Se+"|"+r(yn,Tt,"[\\:\\@]"));return i(i(Se+"|"+r(yn,Tt,"[\\@]"))+"+"),i(i(pc+"|"+r("[\\/\\?]",zn))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ee,ae,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",yn,Tt),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",yn,Tt),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",yn,Tt),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",yn,Tt),"g"),NOT_QUERY:new RegExp(r("[^\\%]",yn,Tt,"[\\:\\@\\/\\?]",zn),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",yn,Tt,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",yn,Tt),"g"),UNRESERVED:new RegExp(yn,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",yn,Gt),"g"),PCT_ENCODED:new RegExp(Se,"g"),IPV4ADDRESS:new RegExp("^("+Nr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Fa+")"+i(i("\\%25|\\%(?!"+Ce+"{2})")+"("+Qs+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function oe(ee,ae){var Ce=[],Se=!0,ot=!1,Tt=void 0;try{for(var Gt=ee[Symbol.iterator](),Ln;!(Se=(Ln=Gt.next()).done)&&(Ce.push(Ln.value),!(ae&&Ce.length===ae));Se=!0);}catch(zn){ot=!0,Tt=zn}finally{try{!Se&&Gt.return&&Gt.return()}finally{if(ot)throw Tt}}return Ce}return function(ee,ae){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return oe(ee,ae);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(oe){if(Array.isArray(oe)){for(var ee=0,ae=Array(oe.length);ee<oe.length;ee++)ae[ee]=oe[ee];return ae}else return Array.from(oe)},p=2147483647,m=36,g=1,y=26,v=38,b=700,w=72,E=128,x="-",S=/^xn--/,C=/[^\0-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=m-g,O=Math.floor,P=String.fromCharCode;function $(oe){throw new RangeError(k[oe])}function L(oe,ee){for(var ae=[],Ce=oe.length;Ce--;)ae[Ce]=ee(oe[Ce]);return ae}function M(oe,ee){var ae=oe.split("@"),Ce="";ae.length>1&&(Ce=ae[0]+"@",oe=ae[1]),oe=oe.replace(I,".");var Se=oe.split("."),ot=L(Se,ee).join(".");return Ce+ot}function B(oe){for(var ee=[],ae=0,Ce=oe.length;ae<Ce;){var Se=oe.charCodeAt(ae++);if(Se>=55296&&Se<=56319&&ae<Ce){var ot=oe.charCodeAt(ae++);(ot&64512)==56320?ee.push(((Se&1023)<<10)+(ot&1023)+65536):(ee.push(Se),ae--)}else ee.push(Se)}return ee}var U=function(ee){return String.fromCodePoint.apply(String,h(ee))},V=function(ee){return ee-48<10?ee-22:ee-65<26?ee-65:ee-97<26?ee-97:m},D=function(ee,ae){return ee+22+75*(ee<26)-((ae!=0)<<5)},z=function(ee,ae,Ce){var Se=0;for(ee=Ce?O(ee/b):ee>>1,ee+=O(ee/ae);ee>R*y>>1;Se+=m)ee=O(ee/R);return O(Se+(R+1)*ee/(ee+v))},W=function(ee){var ae=[],Ce=ee.length,Se=0,ot=E,Tt=w,Gt=ee.lastIndexOf(x);Gt<0&&(Gt=0);for(var Ln=0;Ln<Gt;++Ln)ee.charCodeAt(Ln)>=128&&$("not-basic"),ae.push(ee.charCodeAt(Ln));for(var zn=Gt>0?Gt+1:0;zn<Ce;){for(var yn=Se,ur=1,Nr=m;;Nr+=m){zn>=Ce&&$("invalid-input");var Wt=V(ee.charCodeAt(zn++));(Wt>=m||Wt>O((p-Se)/ur))&&$("overflow"),Se+=Wt*ur;var lr=Nr<=Tt?g:Nr>=Tt+y?y:Nr-Tt;if(Wt<lr)break;var Kr=m-lr;ur>O(p/Kr)&&$("overflow"),ur*=Kr}var nr=ae.length+1;Tt=z(Se-yn,nr,yn==0),O(Se/nr)>p-ot&&$("overflow"),ot+=O(Se/nr),Se%=nr,ae.splice(Se++,0,ot)}return String.fromCodePoint.apply(String,ae)},j=function(ee){var ae=[];ee=B(ee);var Ce=ee.length,Se=E,ot=0,Tt=w,Gt=!0,Ln=!1,zn=void 0;try{for(var yn=ee[Symbol.iterator](),ur;!(Gt=(ur=yn.next()).done);Gt=!0){var Nr=ur.value;Nr<128&&ae.push(P(Nr))}}catch(Oe){Ln=!0,zn=Oe}finally{try{!Gt&&yn.return&&yn.return()}finally{if(Ln)throw zn}}var Wt=ae.length,lr=Wt;for(Wt&&ae.push(x);lr<Ce;){var Kr=p,nr=!0,Oi=!1,Xs=void 0;try{for(var ri=ee[Symbol.iterator](),So;!(nr=(So=ri.next()).done);nr=!0){var Vi=So.value;Vi>=Se&&Vi<Kr&&(Kr=Vi)}}catch(Oe){Oi=!0,Xs=Oe}finally{try{!nr&&ri.return&&ri.return()}finally{if(Oi)throw Xs}}var Hi=lr+1;Kr-Se>O((p-ot)/Hi)&&$("overflow"),ot+=(Kr-Se)*Hi,Se=Kr;var Zo=!0,Fa=!1,Qs=void 0;try{for(var pc=ee[Symbol.iterator](),Od;!(Zo=(Od=pc.next()).done);Zo=!0){var Y=Od.value;if(Y<Se&&++ot>p&&$("overflow"),Y==Se){for(var se=ot,Z=m;;Z+=m){var he=Z<=Tt?g:Z>=Tt+y?y:Z-Tt;if(se<he)break;var be=se-he,ce=m-he;ae.push(P(D(he+be%ce,0))),se=O(be/ce)}ae.push(P(D(se,0))),Tt=z(ot,Hi,lr==Wt),ot=0,++lr}}}catch(Oe){Fa=!0,Qs=Oe}finally{try{!Zo&&pc.return&&pc.return()}finally{if(Fa)throw Qs}}++ot,++Se}return ae.join("")},q=function(ee){return M(ee,function(ae){return S.test(ae)?W(ae.slice(4).toLowerCase()):ae})},G=function(ee){return M(ee,function(ae){return C.test(ae)?"xn--"+j(ae):ae})},te={version:"2.1.0",ucs2:{decode:B,encode:U},decode:W,encode:j,toASCII:G,toUnicode:q},le={};function fe(oe){var ee=oe.charCodeAt(0),ae=void 0;return ee<16?ae="%0"+ee.toString(16).toUpperCase():ee<128?ae="%"+ee.toString(16).toUpperCase():ee<2048?ae="%"+(ee>>6|192).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase():ae="%"+(ee>>12|224).toString(16).toUpperCase()+"%"+(ee>>6&63|128).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase(),ae}function de(oe){for(var ee="",ae=0,Ce=oe.length;ae<Ce;){var Se=parseInt(oe.substr(ae+1,2),16);if(Se<128)ee+=String.fromCharCode(Se),ae+=3;else if(Se>=194&&Se<224){if(Ce-ae>=6){var ot=parseInt(oe.substr(ae+4,2),16);ee+=String.fromCharCode((Se&31)<<6|ot&63)}else ee+=oe.substr(ae,6);ae+=6}else if(Se>=224){if(Ce-ae>=9){var Tt=parseInt(oe.substr(ae+4,2),16),Gt=parseInt(oe.substr(ae+7,2),16);ee+=String.fromCharCode((Se&15)<<12|(Tt&63)<<6|Gt&63)}else ee+=oe.substr(ae,9);ae+=9}else ee+=oe.substr(ae,3),ae+=3}return ee}function ye(oe,ee){function ae(Ce){var Se=de(Ce);return Se.match(ee.UNRESERVED)?Se:Ce}return oe.scheme&&(oe.scheme=String(oe.scheme).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_SCHEME,"")),oe.userinfo!==void 0&&(oe.userinfo=String(oe.userinfo).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_USERINFO,fe).replace(ee.PCT_ENCODED,o)),oe.host!==void 0&&(oe.host=String(oe.host).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_HOST,fe).replace(ee.PCT_ENCODED,o)),oe.path!==void 0&&(oe.path=String(oe.path).replace(ee.PCT_ENCODED,ae).replace(oe.scheme?ee.NOT_PATH:ee.NOT_PATH_NOSCHEME,fe).replace(ee.PCT_ENCODED,o)),oe.query!==void 0&&(oe.query=String(oe.query).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_QUERY,fe).replace(ee.PCT_ENCODED,o)),oe.fragment!==void 0&&(oe.fragment=String(oe.fragment).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_FRAGMENT,fe).replace(ee.PCT_ENCODED,o)),oe}function Ie(oe){return oe.replace(/^0*(.*)/,"$1")||"0"}function pe(oe,ee){var ae=oe.match(ee.IPV4ADDRESS)||[],Ce=d(ae,2),Se=Ce[1];return Se?Se.split(".").map(Ie).join("."):oe}function qe(oe,ee){var ae=oe.match(ee.IPV6ADDRESS)||[],Ce=d(ae,3),Se=Ce[1],ot=Ce[2];if(Se){for(var Tt=Se.toLowerCase().split("::").reverse(),Gt=d(Tt,2),Ln=Gt[0],zn=Gt[1],yn=zn?zn.split(":").map(Ie):[],ur=Ln.split(":").map(Ie),Nr=ee.IPV4ADDRESS.test(ur[ur.length-1]),Wt=Nr?7:8,lr=ur.length-Wt,Kr=Array(Wt),nr=0;nr<Wt;++nr)Kr[nr]=yn[nr]||ur[lr+nr]||"";Nr&&(Kr[Wt-1]=pe(Kr[Wt-1],ee));var Oi=Kr.reduce(function(Hi,Zo,Fa){if(!Zo||Zo==="0"){var Qs=Hi[Hi.length-1];Qs&&Qs.index+Qs.length===Fa?Qs.length++:Hi.push({index:Fa,length:1})}return Hi},[]),Xs=Oi.sort(function(Hi,Zo){return Zo.length-Hi.length})[0],ri=void 0;if(Xs&&Xs.length>1){var So=Kr.slice(0,Xs.index),Vi=Kr.slice(Xs.index+Xs.length);ri=So.join(":")+"::"+Vi.join(":")}else ri=Kr.join(":");return ot&&(ri+="%"+ot),ri}else return oe}var Ue=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,vt="".match(/(){0}/)[1]===void 0;function it(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae={},Ce=ee.iri!==!1?f:c;ee.reference==="suffix"&&(oe=(ee.scheme?ee.scheme+":":"")+"//"+oe);var Se=oe.match(Ue);if(Se){vt?(ae.scheme=Se[1],ae.userinfo=Se[3],ae.host=Se[4],ae.port=parseInt(Se[5],10),ae.path=Se[6]||"",ae.query=Se[7],ae.fragment=Se[8],isNaN(ae.port)&&(ae.port=Se[5])):(ae.scheme=Se[1]||void 0,ae.userinfo=oe.indexOf("@")!==-1?Se[3]:void 0,ae.host=oe.indexOf("//")!==-1?Se[4]:void 0,ae.port=parseInt(Se[5],10),ae.path=Se[6]||"",ae.query=oe.indexOf("?")!==-1?Se[7]:void 0,ae.fragment=oe.indexOf("#")!==-1?Se[8]:void 0,isNaN(ae.port)&&(ae.port=oe.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Se[4]:void 0)),ae.host&&(ae.host=qe(pe(ae.host,Ce),Ce)),ae.scheme===void 0&&ae.userinfo===void 0&&ae.host===void 0&&ae.port===void 0&&!ae.path&&ae.query===void 0?ae.reference="same-document":ae.scheme===void 0?ae.reference="relative":ae.fragment===void 0?ae.reference="absolute":ae.reference="uri",ee.reference&&ee.reference!=="suffix"&&ee.reference!==ae.reference&&(ae.error=ae.error||"URI is not a "+ee.reference+" reference.");var ot=le[(ee.scheme||ae.scheme||"").toLowerCase()];if(!ee.unicodeSupport&&(!ot||!ot.unicodeSupport)){if(ae.host&&(ee.domainHost||ot&&ot.domainHost))try{ae.host=te.toASCII(ae.host.replace(Ce.PCT_ENCODED,de).toLowerCase())}catch(Tt){ae.error=ae.error||"Host's domain name can not be converted to ASCII via punycode: "+Tt}ye(ae,c)}else ye(ae,Ce);ot&&ot.parse&&ot.parse(ae,ee)}else ae.error=ae.error||"URI can not be parsed.";return ae}function _e(oe,ee){var ae=ee.iri!==!1?f:c,Ce=[];return oe.userinfo!==void 0&&(Ce.push(oe.userinfo),Ce.push("@")),oe.host!==void 0&&Ce.push(qe(pe(String(oe.host),ae),ae).replace(ae.IPV6ADDRESS,function(Se,ot,Tt){return"["+ot+(Tt?"%25"+Tt:"")+"]"})),(typeof oe.port=="number"||typeof oe.port=="string")&&(Ce.push(":"),Ce.push(String(oe.port))),Ce.length?Ce.join(""):void 0}var ke=/^\.\.?\//,Ve=/^\/\.(\/|$)/,ct=/^\/\.\.(\/|$)/,Mt=/^\/?(?:.|\n)*?(?=\/|$)/;function Ye(oe){for(var ee=[];oe.length;)if(oe.match(ke))oe=oe.replace(ke,"");else if(oe.match(Ve))oe=oe.replace(Ve,"/");else if(oe.match(ct))oe=oe.replace(ct,"/"),ee.pop();else if(oe==="."||oe==="..")oe="";else{var ae=oe.match(Mt);if(ae){var Ce=ae[0];oe=oe.slice(Ce.length),ee.push(Ce)}else throw new Error("Unexpected dot segment condition")}return ee.join("")}function ve(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae=ee.iri?f:c,Ce=[],Se=le[(ee.scheme||oe.scheme||"").toLowerCase()];if(Se&&Se.serialize&&Se.serialize(oe,ee),oe.host&&!ae.IPV6ADDRESS.test(oe.host)){if(ee.domainHost||Se&&Se.domainHost)try{oe.host=ee.iri?te.toUnicode(oe.host):te.toASCII(oe.host.replace(ae.PCT_ENCODED,de).toLowerCase())}catch(Gt){oe.error=oe.error||"Host's domain name can not be converted to "+(ee.iri?"Unicode":"ASCII")+" via punycode: "+Gt}}ye(oe,ae),ee.reference!=="suffix"&&oe.scheme&&(Ce.push(oe.scheme),Ce.push(":"));var ot=_e(oe,ee);if(ot!==void 0&&(ee.reference!=="suffix"&&Ce.push("//"),Ce.push(ot),oe.path&&oe.path.charAt(0)!=="/"&&Ce.push("/")),oe.path!==void 0){var Tt=oe.path;!ee.absolutePath&&(!Se||!Se.absolutePath)&&(Tt=Ye(Tt)),ot===void 0&&(Tt=Tt.replace(/^\/\//,"/%2F")),Ce.push(Tt)}return oe.query!==void 0&&(Ce.push("?"),Ce.push(oe.query)),oe.fragment!==void 0&&(Ce.push("#"),Ce.push(oe.fragment)),Ce.join("")}function pt(oe,ee){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ce=arguments[3],Se={};return Ce||(oe=it(ve(oe,ae),ae),ee=it(ve(ee,ae),ae)),ae=ae||{},!ae.tolerant&&ee.scheme?(Se.scheme=ee.scheme,Se.userinfo=ee.userinfo,Se.host=ee.host,Se.port=ee.port,Se.path=Ye(ee.path||""),Se.query=ee.query):(ee.userinfo!==void 0||ee.host!==void 0||ee.port!==void 0?(Se.userinfo=ee.userinfo,Se.host=ee.host,Se.port=ee.port,Se.path=Ye(ee.path||""),Se.query=ee.query):(ee.path?(ee.path.charAt(0)==="/"?Se.path=Ye(ee.path):((oe.userinfo!==void 0||oe.host!==void 0||oe.port!==void 0)&&!oe.path?Se.path="/"+ee.path:oe.path?Se.path=oe.path.slice(0,oe.path.lastIndexOf("/")+1)+ee.path:Se.path=ee.path,Se.path=Ye(Se.path)),Se.query=ee.query):(Se.path=oe.path,ee.query!==void 0?Se.query=ee.query:Se.query=oe.query),Se.userinfo=oe.userinfo,Se.host=oe.host,Se.port=oe.port),Se.scheme=oe.scheme),Se.fragment=ee.fragment,Se}function bt(oe,ee,ae){var Ce=u({scheme:"null"},ae);return ve(pt(it(oe,Ce),it(ee,Ce),Ce,!0),Ce)}function ge(oe,ee){return typeof oe=="string"?oe=ve(it(oe,ee),ee):s(oe)==="object"&&(oe=it(ve(oe,ee),ee)),oe}function Ae(oe,ee,ae){return typeof oe=="string"?oe=ve(it(oe,ae),ae):s(oe)==="object"&&(oe=ve(oe,ae)),typeof ee=="string"?ee=ve(it(ee,ae),ae):s(ee)==="object"&&(ee=ve(ee,ae)),oe===ee}function We(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.ESCAPE:f.ESCAPE,fe)}function ut(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.PCT_ENCODED:f.PCT_ENCODED,de)}var wt={scheme:"http",domainHost:!0,parse:function(ee,ae){return ee.host||(ee.error=ee.error||"HTTP URIs must have a host."),ee},serialize:function(ee,ae){var Ce=String(ee.scheme).toLowerCase()==="https";return(ee.port===(Ce?443:80)||ee.port==="")&&(ee.port=void 0),ee.path||(ee.path="/"),ee}},Bn={scheme:"https",domainHost:wt.domainHost,parse:wt.parse,serialize:wt.serialize};function kr(oe){return typeof oe.secure=="boolean"?oe.secure:String(oe.scheme).toLowerCase()==="wss"}var Un={scheme:"ws",domainHost:!0,parse:function(ee,ae){var Ce=ee;return Ce.secure=kr(Ce),Ce.resourceName=(Ce.path||"/")+(Ce.query?"?"+Ce.query:""),Ce.path=void 0,Ce.query=void 0,Ce},serialize:function(ee,ae){if((ee.port===(kr(ee)?443:80)||ee.port==="")&&(ee.port=void 0),typeof ee.secure=="boolean"&&(ee.scheme=ee.secure?"wss":"ws",ee.secure=void 0),ee.resourceName){var Ce=ee.resourceName.split("?"),Se=d(Ce,2),ot=Se[0],Tt=Se[1];ee.path=ot&&ot!=="/"?ot:void 0,ee.query=Tt,ee.resourceName=void 0}return ee.fragment=void 0,ee}},pr={scheme:"wss",domainHost:Un.domainHost,parse:Un.parse,serialize:Un.serialize},bn={},Rn="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",or="[0-9A-Fa-f]",ar=i(i("%[EFef]"+or+"%"+or+or+"%"+or+or)+"|"+i("%[89A-Fa-f]"+or+"%"+or+or)+"|"+i("%"+or+or)),Jo="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Ui="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Nn=r(Ui,'[\\"\\\\]'),zi="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Rr=new RegExp(Rn,"g"),_s=new RegExp(ar,"g"),kp=new RegExp(r("[^]",Jo,"[\\.]",'[\\"]',Nn),"g"),bl=new RegExp(r("[^]",Rn,zi),"g"),Pd=bl;function Cr(oe){var ee=de(oe);return ee.match(Rr)?ee:oe}var Pi={scheme:"mailto",parse:function(ee,ae){var Ce=ee,Se=Ce.to=Ce.path?Ce.path.split(","):[];if(Ce.path=void 0,Ce.query){for(var ot=!1,Tt={},Gt=Ce.query.split("&"),Ln=0,zn=Gt.length;Ln<zn;++Ln){var yn=Gt[Ln].split("=");switch(yn[0]){case"to":for(var ur=yn[1].split(","),Nr=0,Wt=ur.length;Nr<Wt;++Nr)Se.push(ur[Nr]);break;case"subject":Ce.subject=ut(yn[1],ae);break;case"body":Ce.body=ut(yn[1],ae);break;default:ot=!0,Tt[ut(yn[0],ae)]=ut(yn[1],ae);break}}ot&&(Ce.headers=Tt)}Ce.query=void 0;for(var lr=0,Kr=Se.length;lr<Kr;++lr){var nr=Se[lr].split("@");if(nr[0]=ut(nr[0]),ae.unicodeSupport)nr[1]=ut(nr[1],ae).toLowerCase();else try{nr[1]=te.toASCII(ut(nr[1],ae).toLowerCase())}catch(Oi){Ce.error=Ce.error||"Email address's domain name can not be converted to ASCII via punycode: "+Oi}Se[lr]=nr.join("@")}return Ce},serialize:function(ee,ae){var Ce=ee,Se=a(ee.to);if(Se){for(var ot=0,Tt=Se.length;ot<Tt;++ot){var Gt=String(Se[ot]),Ln=Gt.lastIndexOf("@"),zn=Gt.slice(0,Ln).replace(_s,Cr).replace(_s,o).replace(kp,fe),yn=Gt.slice(Ln+1);try{yn=ae.iri?te.toUnicode(yn):te.toASCII(ut(yn,ae).toLowerCase())}catch(lr){Ce.error=Ce.error||"Email address's domain name can not be converted to "+(ae.iri?"Unicode":"ASCII")+" via punycode: "+lr}Se[ot]=zn+"@"+yn}Ce.path=Se.join(",")}var ur=ee.headers=ee.headers||{};ee.subject&&(ur.subject=ee.subject),ee.body&&(ur.body=ee.body);var Nr=[];for(var Wt in ur)ur[Wt]!==bn[Wt]&&Nr.push(Wt.replace(_s,Cr).replace(_s,o).replace(bl,fe)+"="+ur[Wt].replace(_s,Cr).replace(_s,o).replace(Pd,fe));return Nr.length&&(Ce.query=Nr.join("&")),Ce}},ni=/^([^\:]+)\:(.*)/,vu={scheme:"urn",parse:function(ee,ae){var Ce=ee.path&&ee.path.match(ni),Se=ee;if(Ce){var ot=ae.scheme||Se.scheme||"urn",Tt=Ce[1].toLowerCase(),Gt=Ce[2],Ln=ot+":"+(ae.nid||Tt),zn=le[Ln];Se.nid=Tt,Se.nss=Gt,Se.path=void 0,zn&&(Se=zn.parse(Se,ae))}else Se.error=Se.error||"URN can not be parsed.";return Se},serialize:function(ee,ae){var Ce=ae.scheme||ee.scheme||"urn",Se=ee.nid,ot=Ce+":"+(ae.nid||Se),Tt=le[ot];Tt&&(ee=Tt.serialize(ee,ae));var Gt=ee,Ln=ee.nss;return Gt.path=(Se||ae.nid)+":"+Ln,Gt}},Ma=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,La={scheme:"urn:uuid",parse:function(ee,ae){var Ce=ee;return Ce.uuid=Ce.nss,Ce.nss=void 0,!ae.tolerant&&(!Ce.uuid||!Ce.uuid.match(Ma))&&(Ce.error=Ce.error||"UUID is not valid."),Ce},serialize:function(ee,ae){var Ce=ee;return Ce.nss=(ee.uuid||"").toLowerCase(),Ce}};le[wt.scheme]=wt,le[Bn.scheme]=Bn,le[Un.scheme]=Un,le[pr.scheme]=pr,le[Pi.scheme]=Pi,le[vu.scheme]=vu,le[La.scheme]=La,n.SCHEMES=le,n.pctEncChar=fe,n.pctDecChars=de,n.parse=it,n.removeDotSegments=Ye,n.serialize=ve,n.resolveComponents=pt,n.resolve=bt,n.normalize=ge,n.equal=Ae,n.escapeComponent=We,n.unescapeComponent=ut,Object.defineProperty(n,"__esModule",{value:!0})})})(fq,fq.exports);var eLt=fq.exports;Object.defineProperty(hee,"__esModule",{value:!0});const l$e=eLt;l$e.code='require("ajv/dist/runtime/uri").default';hee.default=l$e;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=rd;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Mn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=PR,i=lT,s=Ab,o=Fu,a=Mn,u=Mo,l=$s,c=Et,f=Z3t,d=hee,h=(D,z)=>new RegExp(D,z);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function b(D){var z,W,j,q,G,te,le,fe,de,ye,Ie,pe,qe,Ue,vt,it,_e,ke,Ve,ct,Mt,Ye,ve,pt,bt;const ge=D.strict,Ae=(z=D.code)===null||z===void 0?void 0:z.optimize,We=Ae===!0||Ae===void 0?1:Ae||0,ut=(j=(W=D.code)===null||W===void 0?void 0:W.regExp)!==null&&j!==void 0?j:h,wt=(q=D.uriResolver)!==null&&q!==void 0?q:d.default;return{strictSchema:(te=(G=D.strictSchema)!==null&&G!==void 0?G:ge)!==null&&te!==void 0?te:!0,strictNumbers:(fe=(le=D.strictNumbers)!==null&&le!==void 0?le:ge)!==null&&fe!==void 0?fe:!0,strictTypes:(ye=(de=D.strictTypes)!==null&&de!==void 0?de:ge)!==null&&ye!==void 0?ye:"log",strictTuples:(pe=(Ie=D.strictTuples)!==null&&Ie!==void 0?Ie:ge)!==null&&pe!==void 0?pe:"log",strictRequired:(Ue=(qe=D.strictRequired)!==null&&qe!==void 0?qe:ge)!==null&&Ue!==void 0?Ue:!1,code:D.code?{...D.code,optimize:We,regExp:ut}:{optimize:We,regExp:ut},loopRequired:(vt=D.loopRequired)!==null&&vt!==void 0?vt:v,loopEnum:(it=D.loopEnum)!==null&&it!==void 0?it:v,meta:(_e=D.meta)!==null&&_e!==void 0?_e:!0,messages:(ke=D.messages)!==null&&ke!==void 0?ke:!0,inlineRefs:(Ve=D.inlineRefs)!==null&&Ve!==void 0?Ve:!0,schemaId:(ct=D.schemaId)!==null&&ct!==void 0?ct:"$id",addUsedSchema:(Mt=D.addUsedSchema)!==null&&Mt!==void 0?Mt:!0,validateSchema:(Ye=D.validateSchema)!==null&&Ye!==void 0?Ye:!0,validateFormats:(ve=D.validateFormats)!==null&&ve!==void 0?ve:!0,unicodeRegExp:(pt=D.unicodeRegExp)!==null&&pt!==void 0?pt:!0,int32range:(bt=D.int32range)!==null&&bt!==void 0?bt:!0,uriResolver:wt}}class w{constructor(z={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,z=this.opts={...z,...b(z)};const{es5:W,lines:j}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:j}),this.logger=O(z.logger);const q=z.validateFormats;z.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,g,z,"NOT SUPPORTED"),E.call(this,y,z,"DEPRECATED","warn"),this._metaOpts=k.call(this),z.formats&&C.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),z.keywords&&I.call(this,z.keywords),typeof z.meta=="object"&&this.addMetaSchema(z.meta),S.call(this),z.validateFormats=q}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:z,meta:W,schemaId:j}=this.opts;let q=f;j==="id"&&(q={...f},q.id=q.$id,delete q.$id),W&&z&&this.addMetaSchema(q,q[j],!1)}defaultMeta(){const{meta:z,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof z=="object"?z[W]||z:void 0}validate(z,W){let j;if(typeof z=="string"){if(j=this.getSchema(z),!j)throw new Error(`no schema with key or ref "${z}"`)}else j=this.compile(z);const q=j(W);return"$async"in j||(this.errors=j.errors),q}compile(z,W){const j=this._addSchema(z,W);return j.validate||this._compileSchemaEnv(j)}compileAsync(z,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:j}=this.opts;return q.call(this,z,W);async function q(ye,Ie){await G.call(this,ye.$schema);const pe=this._addSchema(ye,Ie);return pe.validate||te.call(this,pe)}async function G(ye){ye&&!this.getSchema(ye)&&await q.call(this,{$ref:ye},!0)}async function te(ye){try{return this._compileSchemaEnv(ye)}catch(Ie){if(!(Ie instanceof i.default))throw Ie;return le.call(this,Ie),await fe.call(this,Ie.missingSchema),te.call(this,ye)}}function le({missingSchema:ye,missingRef:Ie}){if(this.refs[ye])throw new Error(`AnySchema ${ye} is loaded but ${Ie} cannot be resolved`)}async function fe(ye){const Ie=await de.call(this,ye);this.refs[ye]||await G.call(this,Ie.$schema),this.refs[ye]||this.addSchema(Ie,ye,W)}async function de(ye){const Ie=this._loading[ye];if(Ie)return Ie;try{return await(this._loading[ye]=j(ye))}finally{delete this._loading[ye]}}}addSchema(z,W,j,q=this.opts.validateSchema){if(Array.isArray(z)){for(const te of z)this.addSchema(te,void 0,j,q);return this}let G;if(typeof z=="object"){const{schemaId:te}=this.opts;if(G=z[te],G!==void 0&&typeof G!="string")throw new Error(`schema ${te} must be string`)}return W=(0,u.normalizeId)(W||G),this._checkUnique(W),this.schemas[W]=this._addSchema(z,j,W,q,!0),this}addMetaSchema(z,W,j=this.opts.validateSchema){return this.addSchema(z,W,!0,j),this}validateSchema(z,W){if(typeof z=="boolean")return!0;let j;if(j=z.$schema,j!==void 0&&typeof j!="string")throw new Error("$schema must be a string");if(j=j||this.opts.defaultMeta||this.defaultMeta(),!j)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const q=this.validate(j,z);if(!q&&W){const G="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(G);else throw new Error(G)}return q}getSchema(z){let W;for(;typeof(W=x.call(this,z))=="string";)z=W;if(W===void 0){const{schemaId:j}=this.opts,q=new o.SchemaEnv({schema:{},schemaId:j});if(W=o.resolveSchema.call(this,q,z),!W)return;this.refs[z]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(z){if(z instanceof RegExp)return this._removeAllSchemas(this.schemas,z),this._removeAllSchemas(this.refs,z),this;switch(typeof z){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=x.call(this,z);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[z],delete this.refs[z],this}case"object":{const W=z;this._cache.delete(W);let j=z[this.opts.schemaId];return j&&(j=(0,u.normalizeId)(j),delete this.schemas[j],delete this.refs[j]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(z){for(const W of z)this.addKeyword(W);return this}addKeyword(z,W){let j;if(typeof z=="string")j=z,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=j);else if(typeof z=="object"&&W===void 0){if(W=z,j=W.keyword,Array.isArray(j)&&!j.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if($.call(this,j,W),!W)return(0,c.eachItem)(j,G=>L.call(this,G)),this;B.call(this,W);const q={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(j,q.type.length===0?G=>L.call(this,G,q):G=>q.type.forEach(te=>L.call(this,G,q,te))),this}getKeyword(z){const W=this.RULES.all[z];return typeof W=="object"?W.definition:!!W}removeKeyword(z){const{RULES:W}=this;delete W.keywords[z],delete W.all[z];for(const j of W.rules){const q=j.rules.findIndex(G=>G.keyword===z);q>=0&&j.rules.splice(q,1)}return this}addFormat(z,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[z]=W,this}errorsText(z=this.errors,{separator:W=", ",dataVar:j="data"}={}){return!z||z.length===0?"No errors":z.map(q=>`${j}${q.instancePath} ${q.message}`).reduce((q,G)=>q+W+G)}$dataMetaSchema(z,W){const j=this.RULES.all;z=JSON.parse(JSON.stringify(z));for(const q of W){const G=q.split("/").slice(1);let te=z;for(const le of G)te=te[le];for(const le in j){const fe=j[le];if(typeof fe!="object")continue;const{$data:de}=fe.definition,ye=te[le];de&&ye&&(te[le]=V(ye))}}return z}_removeAllSchemas(z,W){for(const j in z){const q=z[j];(!W||W.test(j))&&(typeof q=="string"?delete z[j]:q&&!q.meta&&(this._cache.delete(q.schema),delete z[j]))}}_addSchema(z,W,j,q=this.opts.validateSchema,G=this.opts.addUsedSchema){let te;const{schemaId:le}=this.opts;if(typeof z=="object")te=z[le];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof z!="boolean")throw new Error("schema must be object or boolean")}let fe=this._cache.get(z);if(fe!==void 0)return fe;j=(0,u.normalizeId)(te||j);const de=u.getSchemaRefs.call(this,z,j);return fe=new o.SchemaEnv({schema:z,schemaId:le,meta:W,baseId:j,localRefs:de}),this._cache.set(fe.schema,fe),G&&!j.startsWith("#")&&(j&&this._checkUnique(j),this.refs[j]=fe),q&&this.validateSchema(z,!0),fe}_checkUnique(z){if(this.schemas[z]||this.refs[z])throw new Error(`schema with key or id "${z}" already exists`)}_compileSchemaEnv(z){if(z.meta?this._compileMetaSchema(z):o.compileSchema.call(this,z),!z.validate)throw new Error("ajv implementation error");return z.validate}_compileMetaSchema(z){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,z)}finally{this.opts=W}}}w.ValidationError=r.default,w.MissingRefError=i.default,e.default=w;function E(D,z,W,j="error"){for(const q in D){const G=q;G in z&&this.logger[j](`${W}: option ${q}. ${D[G]}`)}}function x(D){return D=(0,u.normalizeId)(D),this.schemas[D]||this.refs[D]}function S(){const D=this.opts.schemas;if(D)if(Array.isArray(D))this.addSchema(D);else for(const z in D)this.addSchema(D[z],z)}function C(){for(const D in this.opts.formats){const z=this.opts.formats[D];z&&this.addFormat(D,z)}}function I(D){if(Array.isArray(D)){this.addVocabulary(D);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const z in D){const W=D[z];W.keyword||(W.keyword=z),this.addKeyword(W)}}function k(){const D={...this.opts};for(const z of p)delete D[z];return D}const R={log(){},warn(){},error(){}};function O(D){if(D===!1)return R;if(D===void 0)return console;if(D.log&&D.warn&&D.error)return D;throw new Error("logger must implement log, warn and error methods")}const P=/^[a-z_$][a-z0-9_$:-]*$/i;function $(D,z){const{RULES:W}=this;if((0,c.eachItem)(D,j=>{if(W.keywords[j])throw new Error(`Keyword ${j} is already defined`);if(!P.test(j))throw new Error(`Keyword ${j} has invalid name`)}),!!z&&z.$data&&!("code"in z||"validate"in z))throw new Error('$data keyword must have "code" or "validate" function')}function L(D,z,W){var j;const q=z==null?void 0:z.post;if(W&&q)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:G}=this;let te=q?G.post:G.rules.find(({type:fe})=>fe===W);if(te||(te={type:W,rules:[]},G.rules.push(te)),G.keywords[D]=!0,!z)return;const le={keyword:D,definition:{...z,type:(0,l.getJSONTypes)(z.type),schemaType:(0,l.getJSONTypes)(z.schemaType)}};z.before?M.call(this,te,le,z.before):te.rules.push(le),G.all[D]=le,(j=z.implements)===null||j===void 0||j.forEach(fe=>this.addKeyword(fe))}function M(D,z,W){const j=D.rules.findIndex(q=>q.keyword===W);j>=0?D.rules.splice(j,0,z):(D.rules.push(z),this.logger.warn(`rule ${W} is not defined`))}function B(D){let{metaSchema:z}=D;z!==void 0&&(D.$data&&this.opts.$data&&(z=V(z)),D.validateSchema=this.compile(z,!0))}const U={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function V(D){return{anyOf:[D,U]}}})(NOe);var pee={},mee={},gee={};Object.defineProperty(gee,"__esModule",{value:!0});const tLt={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};gee.default=tLt;var Ib={};Object.defineProperty(Ib,"__esModule",{value:!0});Ib.callRef=Ib.getValidate=void 0;const nLt=lT,yme=On,Au=Mn,ow=yp,vme=Fu,XD=Et,rLt={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=vme.resolveRef.call(u,l,i,n);if(c===void 0)throw new nLt.default(r.opts.uriResolver,i,n);if(c instanceof vme.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return TO(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return TO(e,(0,Au._)`${p}.validate`,l,l.$async)}function d(p){const m=c$e(e,p);TO(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,Au.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:Au.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function c$e(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,Au._)`${n.scopeValue("wrapper",{ref:t})}.validate`}Ib.getValidate=c$e;function TO(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?ow.default.this:Au.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,Au._)`await ${(0,yme.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,Au._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,yme.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,Au._)`${p}.errors`;i.assign(ow.default.vErrors,(0,Au._)`${ow.default.vErrors} === null ? ${m} : ${ow.default.vErrors}.concat(${m})`),i.assign(ow.default.errors,(0,Au._)`${ow.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=XD.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,Au._)`${p}.evaluated.props`);s.props=XD.mergeEvaluated.props(i,y,s.props,Au.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=XD.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,Au._)`${p}.evaluated.items`);s.items=XD.mergeEvaluated.items(i,y,s.items,Au.Name)}}}Ib.callRef=TO;Ib.default=rLt;Object.defineProperty(mee,"__esModule",{value:!0});const iLt=gee,sLt=Ib,oLt=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",iLt.default,sLt.default];mee.default=oLt;var yee={},vee={};Object.defineProperty(vee,"__esModule",{value:!0});const $3=Mn,Fg=$3.operators,M3={maximum:{okStr:"<=",ok:Fg.LTE,fail:Fg.GT},minimum:{okStr:">=",ok:Fg.GTE,fail:Fg.LT},exclusiveMaximum:{okStr:"<",ok:Fg.LT,fail:Fg.GTE},exclusiveMinimum:{okStr:">",ok:Fg.GT,fail:Fg.LTE}},aLt={message:({keyword:e,schemaCode:t})=>(0,$3.str)`must be ${M3[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,$3._)`{comparison: ${M3[e].okStr}, limit: ${t}}`},uLt={keyword:Object.keys(M3),type:"number",schemaType:"number",$data:!0,error:aLt,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,$3._)`${n} ${M3[t].fail} ${r} || isNaN(${n})`)}};vee.default=uLt;var bee={};Object.defineProperty(bee,"__esModule",{value:!0});const v2=Mn,lLt={message:({schemaCode:e})=>(0,v2.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,v2._)`{multipleOf: ${e}}`},cLt={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:lLt,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,v2._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,v2._)`${o} !== parseInt(${o})`;e.fail$data((0,v2._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};bee.default=cLt;var _ee={},wee={};Object.defineProperty(wee,"__esModule",{value:!0});function f$e(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}wee.default=f$e;f$e.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(_ee,"__esModule",{value:!0});const g1=Mn,fLt=Et,dLt=wee,hLt={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,g1.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,g1._)`{limit: ${e}}`},pLt={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:hLt,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?g1.operators.GT:g1.operators.LT,o=i.opts.unicode===!1?(0,g1._)`${n}.length`:(0,g1._)`${(0,fLt.useFunc)(e.gen,dLt.default)}(${n})`;e.fail$data((0,g1._)`${o} ${s} ${r}`)}};_ee.default=pLt;var Eee={};Object.defineProperty(Eee,"__esModule",{value:!0});const mLt=On,L3=Mn,gLt={message:({schemaCode:e})=>(0,L3.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,L3._)`{pattern: ${e}}`},yLt={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:gLt,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,L3._)`(new RegExp(${i}, ${o}))`:(0,mLt.usePattern)(e,r);e.fail$data((0,L3._)`!${a}.test(${t})`)}};Eee.default=yLt;var xee={};Object.defineProperty(xee,"__esModule",{value:!0});const b2=Mn,vLt={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,b2.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,b2._)`{limit: ${e}}`},bLt={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:vLt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?b2.operators.GT:b2.operators.LT;e.fail$data((0,b2._)`Object.keys(${n}).length ${i} ${r}`)}};xee.default=bLt;var See={};Object.defineProperty(See,"__esModule",{value:!0});const wC=On,_2=Mn,_Lt=Et,wLt={message:({params:{missingProperty:e}})=>(0,_2.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,_2._)`{missingProperty: ${e}}`},ELt={keyword:"required",type:"object",schemaType:"array",$data:!0,error:wLt,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,_Lt.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(_2.nil,f);else for(const h of n)(0,wC.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,wC.checkMissingProp)(e,n,h)),(0,wC.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,wC.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,wC.propertyInData)(t,i,h,a.ownProperties)),t.if((0,_2.not)(p),()=>{e.error(),t.break()})},_2.nil)}}};See.default=ELt;var Tee={};Object.defineProperty(Tee,"__esModule",{value:!0});const w2=Mn,xLt={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,w2.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,w2._)`{limit: ${e}}`},SLt={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:xLt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?w2.operators.GT:w2.operators.LT;e.fail$data((0,w2._)`${n}.length ${i} ${r}`)}};Tee.default=SLt;var Cee={},OR={};Object.defineProperty(OR,"__esModule",{value:!0});const d$e=YX;d$e.code='require("ajv/dist/runtime/equal").default';OR.default=d$e;Object.defineProperty(Cee,"__esModule",{value:!0});const iU=$s,ko=Mn,TLt=Et,CLt=OR,ALt={message:({params:{i:e,j:t}})=>(0,ko.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,ko._)`{i: ${e}, j: ${t}}`},ILt={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:ALt,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,iU.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,ko._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,ko._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,ko._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,iU.checkDataTypes)(l,g,a.opts.strictNumbers,iU.DataType.Wrong),v=t.const("indices",(0,ko._)`{}`);t.for((0,ko._)`;${p}--;`,()=>{t.let(g,(0,ko._)`${n}[${p}]`),t.if(y,(0,ko._)`continue`),l.length>1&&t.if((0,ko._)`typeof ${g} == "string"`,(0,ko._)`${g} += "_"`),t.if((0,ko._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,ko._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,ko._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,TLt.useFunc)(t,CLt.default),y=t.name("outer");t.label(y).for((0,ko._)`;${p}--;`,()=>t.for((0,ko._)`${m} = ${p}; ${m}--;`,()=>t.if((0,ko._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};Cee.default=ILt;var Aee={};Object.defineProperty(Aee,"__esModule",{value:!0});const dq=Mn,kLt=Et,RLt=OR,NLt={message:"must be equal to constant",params:({schemaCode:e})=>(0,dq._)`{allowedValue: ${e}}`},DLt={keyword:"const",$data:!0,error:NLt,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,dq._)`!${(0,kLt.useFunc)(t,RLt.default)}(${n}, ${i})`):e.fail((0,dq._)`${s} !== ${n}`)}};Aee.default=DLt;var Iee={};Object.defineProperty(Iee,"__esModule",{value:!0});const yA=Mn,PLt=Et,OLt=OR,$Lt={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,yA._)`{allowedValues: ${e}}`},MLt={keyword:"enum",schemaType:"array",$data:!0,error:$Lt,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,PLt.useFunc)(t,OLt.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,yA.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,yA._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,yA._)`${l()}(${n}, ${h}[${p}])`:(0,yA._)`${n} === ${m}`}}};Iee.default=MLt;Object.defineProperty(yee,"__esModule",{value:!0});const LLt=vee,FLt=bee,jLt=_ee,BLt=Eee,ULt=xee,zLt=See,VLt=Tee,HLt=Cee,qLt=Aee,WLt=Iee,GLt=[LLt.default,FLt.default,jLt.default,BLt.default,ULt.default,zLt.default,VLt.default,HLt.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},qLt.default,WLt.default];yee.default=GLt;var kee={},cT={};Object.defineProperty(cT,"__esModule",{value:!0});cT.validateAdditionalItems=void 0;const y1=Mn,hq=Et,YLt={message:({params:{len:e}})=>(0,y1.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,y1._)`{limit: ${e}}`},KLt={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:YLt,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,hq.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}h$e(e,r)}};function h$e(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,y1._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,y1._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,hq.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,y1._)`${a} <= ${t.length}`);n.if((0,y1.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:hq.Type.Num},l),o.allErrors||n.if((0,y1.not)(l),()=>n.break())})}}cT.validateAdditionalItems=h$e;cT.default=KLt;var Ree={},fT={};Object.defineProperty(fT,"__esModule",{value:!0});fT.validateTuple=void 0;const bme=Mn,CO=Et,XLt=On,QLt={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return p$e(e,"additionalItems",t);n.items=!0,!(0,CO.alwaysValidSchema)(n,t)&&e.ok((0,XLt.validateArray)(e))}};function p$e(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=CO.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,bme._)`${s}.length`);n.forEach((f,d)=>{(0,CO.alwaysValidSchema)(a,f)||(r.if((0,bme._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,CO.checkStrictMode)(a,g,d.strictTuples)}}}fT.validateTuple=p$e;fT.default=QLt;Object.defineProperty(Ree,"__esModule",{value:!0});const JLt=fT,ZLt={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,JLt.validateTuple)(e,"items")};Ree.default=ZLt;var Nee={};Object.defineProperty(Nee,"__esModule",{value:!0});const _me=Mn,e6t=Et,t6t=On,n6t=cT,r6t={message:({params:{len:e}})=>(0,_me.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,_me._)`{limit: ${e}}`},i6t={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:r6t,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,e6t.alwaysValidSchema)(r,t)&&(i?(0,n6t.validateAdditionalItems)(e,i):e.ok((0,t6t.validateArray)(e)))}};Nee.default=i6t;var Dee={};Object.defineProperty(Dee,"__esModule",{value:!0});const Cc=Mn,QD=Et,s6t={message:({params:{min:e,max:t}})=>t===void 0?(0,Cc.str)`must contain at least ${e} valid item(s)`:(0,Cc.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Cc._)`{minContains: ${e}}`:(0,Cc._)`{minContains: ${e}, maxContains: ${t}}`},o6t={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:s6t,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,Cc._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,QD.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,QD.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,QD.alwaysValidSchema)(s,n)){let m=(0,Cc._)`${c} >= ${o}`;a!==void 0&&(m=(0,Cc._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,Cc._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:QD.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,Cc._)`${m}++`),a===void 0?t.if((0,Cc._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,Cc._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,Cc._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};Dee.default=o6t;var m$e={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Mn,n=Et,r=On;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(m$e);var Pee={};Object.defineProperty(Pee,"__esModule",{value:!0});const g$e=Mn,a6t=Et,u6t={message:"property name must be valid",params:({params:e})=>(0,g$e._)`{propertyName: ${e.propertyName}}`},l6t={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:u6t,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,a6t.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,g$e.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};Pee.default=l6t;var q4={};Object.defineProperty(q4,"__esModule",{value:!0});const JD=On,Tf=Mn,c6t=yp,ZD=Et,f6t={message:"must NOT have additional properties",params:({params:e})=>(0,Tf._)`{additionalProperty: ${e.additionalProperty}}`},d6t={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:f6t,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,ZD.alwaysValidSchema)(o,n))return;const l=(0,JD.allSchemaProperties)(r.properties),c=(0,JD.allSchemaProperties)(r.patternProperties);f(),e.ok((0,Tf._)`${s} === ${c6t.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,ZD.schemaRefOrVal)(o,r.properties,"properties");y=(0,JD.isOwnProperty)(t,v,g)}else l.length?y=(0,Tf.or)(...l.map(v=>(0,Tf._)`${g} === ${v}`)):y=Tf.nil;return c.length&&(y=(0,Tf.or)(y,...c.map(v=>(0,Tf._)`${(0,JD.usePattern)(e,v)}.test(${g})`))),(0,Tf.not)(y)}function h(g){t.code((0,Tf._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,ZD.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,Tf.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,Tf.not)(y),()=>t.break()))}}function m(g,y,v){const b={keyword:"additionalProperties",dataProp:g,dataPropType:ZD.Type.Str};v===!1&&Object.assign(b,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(b,y)}}};q4.default=d6t;var Oee={};Object.defineProperty(Oee,"__esModule",{value:!0});const h6t=rd,wme=On,sU=Et,Eme=q4,p6t={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&Eme.default.code(new h6t.KeywordCxt(s,Eme.default,"additionalProperties"));const o=(0,wme.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=sU.mergeEvaluated.props(t,(0,sU.toHash)(o),s.props));const a=o.filter(f=>!(0,sU.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,wme.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};Oee.default=p6t;var $ee={};Object.defineProperty($ee,"__esModule",{value:!0});const xme=On,eP=Mn,Sme=Et,Tme=Et,m6t={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,xme.allSchemaProperties)(n),u=a.filter(m=>(0,Sme.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof eP.Name)&&(s.props=(0,Tme.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,Sme.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,eP._)`${(0,xme.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:Tme.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,eP._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,eP.not)(c),()=>t.break())})})}}};$ee.default=m6t;var Mee={};Object.defineProperty(Mee,"__esModule",{value:!0});const g6t=Et,y6t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,g6t.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};Mee.default=y6t;var Lee={};Object.defineProperty(Lee,"__esModule",{value:!0});const v6t=On,b6t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:v6t.validateUnion,error:{message:"must match a schema in anyOf"}};Lee.default=b6t;var Fee={};Object.defineProperty(Fee,"__esModule",{value:!0});const AO=Mn,_6t=Et,w6t={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,AO._)`{passingSchemas: ${e.passing}}`},E6t={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:w6t,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,_6t.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,AO._)`${u} && ${o}`).assign(o,!1).assign(a,(0,AO._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,AO.Name)})})}}};Fee.default=E6t;var jee={};Object.defineProperty(jee,"__esModule",{value:!0});const x6t=Et,S6t={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,x6t.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};jee.default=S6t;var Bee={};Object.defineProperty(Bee,"__esModule",{value:!0});const F3=Mn,y$e=Et,T6t={message:({params:e})=>(0,F3.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,F3._)`{failingKeyword: ${e.ifClause}}`},C6t={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:T6t,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,y$e.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=Cme(r,"then"),s=Cme(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,F3.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,F3._)`${c}`):e.setParams({ifClause:c})}}}};function Cme(e,t){const n=e.schema[t];return n!==void 0&&!(0,y$e.alwaysValidSchema)(e,n)}Bee.default=C6t;var Uee={};Object.defineProperty(Uee,"__esModule",{value:!0});const A6t=Et,I6t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,A6t.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};Uee.default=I6t;Object.defineProperty(kee,"__esModule",{value:!0});const k6t=cT,R6t=Ree,N6t=fT,D6t=Nee,P6t=Dee,O6t=m$e,$6t=Pee,M6t=q4,L6t=Oee,F6t=$ee,j6t=Mee,B6t=Lee,U6t=Fee,z6t=jee,V6t=Bee,H6t=Uee;function q6t(e=!1){const t=[j6t.default,B6t.default,U6t.default,z6t.default,V6t.default,H6t.default,$6t.default,M6t.default,O6t.default,L6t.default,F6t.default];return e?t.push(R6t.default,D6t.default):t.push(k6t.default,N6t.default),t.push(P6t.default),t}kee.default=q6t;var zee={},Vee={};Object.defineProperty(Vee,"__esModule",{value:!0});const os=Mn,W6t={message:({schemaCode:e})=>(0,os.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,os._)`{format: ${e}}`},G6t={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:W6t,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,os._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,os._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,os._)`${m}.type || "string"`).assign(y,(0,os._)`${m}.validate`),()=>n.assign(g,(0,os._)`"string"`).assign(y,m)),e.fail$data((0,os.or)(v(),b()));function v(){return u.strictSchema===!1?os.nil:(0,os._)`${o} && !${y}`}function b(){const w=c.$async?(0,os._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,os._)`${y}(${r})`,E=(0,os._)`(typeof ${y} == "function" ? ${w} : ${y}.test(${r}))`;return(0,os._)`${y} && ${y} !== true && ${g} === ${t} && !${E}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=b(p);m===t&&e.pass(w());function v(){if(u.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function b(E){const x=E instanceof RegExp?(0,os.regexpCode)(E):u.code.formats?(0,os._)`${u.code.formats}${(0,os.getProperty)(s)}`:void 0,S=n.scopeValue("formats",{key:s,ref:E,code:x});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,os._)`${S}.validate`]:["string",E,S]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,os._)`await ${y}(${r})`}return typeof g=="function"?(0,os._)`${y}(${r})`:(0,os._)`${y}.test(${r})`}}}};Vee.default=G6t;Object.defineProperty(zee,"__esModule",{value:!0});const Y6t=Vee,K6t=[Y6t.default];zee.default=K6t;var jx={};Object.defineProperty(jx,"__esModule",{value:!0});jx.contentVocabulary=jx.metadataVocabulary=void 0;jx.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];jx.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(pee,"__esModule",{value:!0});const X6t=mee,Q6t=yee,J6t=kee,Z6t=zee,Ame=jx,eFt=[X6t.default,Q6t.default,(0,J6t.default)(),Z6t.default,Ame.metadataVocabulary,Ame.contentVocabulary];pee.default=eFt;var Hee={},W4={};Object.defineProperty(W4,"__esModule",{value:!0});W4.DiscrError=void 0;var Ime;(function(e){e.Tag="tag",e.Mapping="mapping"})(Ime||(W4.DiscrError=Ime={}));Object.defineProperty(Hee,"__esModule",{value:!0});const Iw=Mn,pq=W4,kme=Fu,tFt=lT,nFt=Et,rFt={message:({params:{discrError:e,tagName:t}})=>e===pq.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,Iw._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},iFt={keyword:"discriminator",type:"object",schemaType:"object",error:rFt,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,Iw._)`${n}${(0,Iw.getProperty)(a)}`);t.if((0,Iw._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:pq.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,Iw._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:pq.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,Iw.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let w=0;w<o.length;w++){let E=o[w];if(E!=null&&E.$ref&&!(0,nFt.schemaHasRulesButRef)(E,s.self.RULES)){const S=E.$ref;if(E=kme.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,S),E instanceof kme.SchemaEnv&&(E=E.schema),E===void 0)throw new tFt.default(s.opts.uriResolver,s.baseId,S)}const x=(h=E==null?void 0:E.properties)===null||h===void 0?void 0:h[a];if(typeof x!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(E)),v(x,w)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:w}){return Array.isArray(w)&&w.includes(a)}function v(w,E){if(w.const)b(w.const,E);else if(w.enum)for(const x of w.enum)b(x,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function b(w,E){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[w]=E}}}};Hee.default=iFt;const sFt="http://json-schema.org/draft-07/schema#",oFt="http://json-schema.org/draft-07/schema#",aFt="Core schema meta-schema",uFt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},lFt=["object","boolean"],cFt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},fFt={$schema:sFt,$id:oFt,title:aFt,definitions:uFt,type:lFt,properties:cFt,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=NOe,r=pee,i=Hee,s=fFt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=rd;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Mn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=PR;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=lT;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(oq,oq.exports);var dFt=oq.exports;const v$e=ml(dFt),hFt="#/definitions/StudyConfig",pFt="http://json-schema.org/draft-07/schema#",mFt={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "required": true,    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": ["Europe", "Japan", "USA"],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": ["Option 1", "Option 2", "Option 3"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},maxSelections:{description:"The maximum number of selections that are required.",type:"number"},minSelections:{description:"The minimum number of selections that are required.",type:"number"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "required": true, "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": ["Red", "Blue"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "comparison": "equal",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},comparison:{description:"The comparison to use.",enum:["equal","notEqual"],type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","comparison","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "required": true, "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "required": true, "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "required": true, "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","required","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "required": true,    "location": "belowStimulus",    "type": "checkbox",    "options": ["Man", "Woman", "Genderqueer", "Third-gender", ...]  } ] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "required": true, "location": "aboveStimulus", "type": "radio", "options": ["Option 1", "Option 2"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.3/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.3/src/public/demo-brush-interactions/assets)",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "required": true, "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "required": true, "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js { "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.3/src/parser/StudyConfigSchema.json", "studyMetadata": {  ... }, "uiConfig": {  ... }, "components": {  ... }, "sequence": {  ... } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : { "title": "My New Study", "version": "pilot", "authors": [  "Jane Doe",  "John Doe" ], "date": "2024-04-01", "description": "This study is meant to test your ability.", "organizations": [  "The reVISit Team",  "The Other Team" ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ "contactEmail": "contact@revisit.dev", "helpTextPath": "<study-name>/assets/help.md", "logoPath": "<study-name>/assets/logo.jpg", "withProgressBar": true, "autoDownloadStudy": true "autoDownloadTime": 5000, "studyEndMsg": "Thank you for completing this study. You\'re the best!", "sidebar": true, "windowEventDebounceTime": 500, "urlParticipantIdParam": "PROLIFIC_ID", "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "required": true,    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},gFt={$ref:hFt,$schema:pFt,definitions:mFt},yFt="#/definitions/GlobalConfig",vFt="http://json-schema.org/draft-07/schema#",bFt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},_Ft={$ref:yFt,$schema:vFt,definitions:bFt},b$e=new v$e;b$e.addSchema(_Ft);const Rme=b$e.getSchema("#/definitions/GlobalConfig"),_$e=new v$e;_$e.addSchema(gFt);const oU=_$e.getSchema("#/definitions/StudyConfig");function wFt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function G4(e){return e.baseComponent!==void 0}function EFt(e){const t=nee.parse(e),n=Rme(t),r=wFt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Rme.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function w$e(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):w$e(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function xFt(e){const t=[],n=[];Object.entries(e.components).forEach(([s,o])=>{var a;G4(o)&&!((a=e.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${s}`,params:{action:"add the base component to the baseComponents object"}})});const r=xCe(e.sequence);r.forEach(s=>{var o;e.components[s]||t.push({message:(o=e.baseComponents)!=null&&o[s]?`Component \`${s}\` is a base component and cannot be used in the sequence`:`Component \`${s}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(s=>!r.includes(s)).forEach(s=>{n.push({message:`Component \`${s}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const i=[];return w$e(e.sequence,i),i.forEach(s=>{t.push({message:`Skip target \`${s}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:t,warnings:n}}function SFt(e){let t=!1,n;try{n=nee.parse(e),t=oU(n)}catch{t=!1}let r=[],i=[];if(t){const{errors:s,warnings:o}=xFt(n);r=[...oU.errors||[],...s],i=o}else r=oU.errors||[{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}function E$e(){const e=gg(),{setAlertModal:t}=fp(),n=dp();A.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var Nme=Object.prototype.hasOwnProperty;function Dme(e,t,n){for(n of e.keys())if(E2(n,t))return n}function E2(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&E2(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=Dme(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=Dme(t,i),!i)||!E2(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Nme.call(e,n)&&++r&&!Nme.call(t,n)||!(n in t)||!E2(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function TFt(e){var t=A.useRef(e),n=A.useRef(0);return E2(e,t.current)||(t.current=e,n.current+=1),A.useMemo(function(){return t.current},[n.current])}function CFt(e,t){return A.useEffect(e,TFt(t))}const AFt=(e,t=null)=>{const[n,r]=A.useState("idle"),[i,s]=A.useState(null),[o,a]=A.useState(null),u=A.useRef(),l=A.useRef(!1);A.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=A.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return CFt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}},Pme=["status","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","meta","configHash"],x$e=["participantId","trialId","trialOrder","responseId"];function qee(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function IFt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==void 0).length/(Bm(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=G4(u)&&u.baseComponent&&n.baseComponents?WX({},n.baseComponents[u.baseComponent],u):u,c=s.endTime-s.startTime;return Object.entries(s.answer).map(([d,h])=>{var g,y;const p={participantId:e.participantId,trialId:o,trialOrder:a,responseId:d},m=l.response.find(v=>v.id===d);if(t.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("configHash")&&(p.configHash=e.participantConfigHash),t.includes("percentComplete")&&(p.percentComplete=r),t.includes("description")&&(p.description=l.description),t.includes("instruction")&&(p.instruction=l.instruction),t.includes("responsePrompt")&&(p.responsePrompt=m==null?void 0:m.prompt),t.includes("answer")&&(p.answer=h),t.includes("correctAnswer")){const v=(y=(g=l.correctAnswer)==null?void 0:g.find(b=>b.id===d))==null?void 0:y.answer;p.correctAnswer=typeof v=="object"?JSON.stringify(v):v}return t.includes("responseMin")&&(p.responseMin=(m==null?void 0:m.type)==="numerical"?m.min:void 0),t.includes("responseMax")&&(p.responseMax=(m==null?void 0:m.type)==="numerical"?m.max:void 0),t.includes("startTime")&&(p.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(p.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(p.duration=c),t.includes("meta")&&(p.meta=JSON.stringify(l.meta,null,2)),p}).flat()}).flat()}async function kFt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...x$e,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await IFt(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function RFt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=A.useState([...Pme].filter(h=>h!=="meta")),a=Ds(),{value:u,status:l,error:c}=AFt(kFt,[s,r,a.storageEngine,i]),f=A.useCallback(()=>{if(!u)return;const h=[u.header.join(","),...u.rows.map(p=>u.header.map(m=>`"${`${p[m]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);qee(h,n)},[n,u]),d=A.useMemo(()=>{if(!u)return"";const h=u.rows.length>5?5:u.rows.length,p=h===1?"":"s";return`This is a preview of the first ${p?h:""} row${p} of the CSV. The full CSV contains ${u.rows.length} row${p}.`},[u]);return _.jsxs(es,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[_.jsx(VK,{searchable:!0,nothingFoundMessage:"Property not found",data:[...Pme],value:s,onChange:h=>o(h),label:"Included optional columns:",leftSection:_.jsx($tt,{}),variant:"filled"}),_.jsx(zl,{h:"md"}),_.jsxs(me,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?_.jsxs(Yt,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[_.jsx(Yt.Thead,{children:_.jsx(Yt.Tr,{children:u.header.map(h=>_.jsx(Yt.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(h)?200:void 0},children:_.jsxs(Nt,{direction:"row",justify:"space-between",align:"center",children:[h,!x$e.includes(h)&&_.jsx(s_,{onClick:()=>o(s.filter(p=>p!==h)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:_.jsx(vX,{size:16})})]})},h))})}),_.jsx(Yt.Tbody,{children:u.rows.slice(0,5).map((h,p)=>_.jsx(Yt.Tr,{children:u.header.map(m=>_.jsx(Yt.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(m)?"normal":"nowrap"},children:h[m]},`${p}-${m}`))},p))})]}):l==="error"&&c?_.jsx(CS,{variant:"light",children:c.message}):null,_.jsx(Xl,{visible:l==="pending"||l==="idle"})]}),_.jsx(zl,{h:"sm"}),_.jsx(Nt,{justify:"center",fz:"sm",c:"dimmed",children:_.jsx(ze,{children:d})}),_.jsx(zl,{h:"md"}),_.jsxs(Rs,{justify:"right",children:[_.jsx(dn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),_.jsx(dn,{leftSection:_.jsx(kSe,{}),onClick:()=>f(),"data-autofocus":!0,children:"Download"})]})]})}function NFt(){const e=fy(),{storageEngine:t}=Ds(),{answers:n}=ff(v=>v),[r,i]=A.useState(!1);A.useEffect(()=>{const v=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(v))},1e3)},[]),E$e();const[s,o]=A.useState(),[a,u]=A.useState(""),l=e.studyMetadata.title.replace(" ","_");A.useEffect(()=>{async function v(){if(t){const b=await t.getCurrentParticipantId(),w=await t.getParticipantData();u(b),o(w)}}v()},[t]);const c=A.useCallback(async()=>{qee(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=A.useState(Math.floor(d/1e3));A.useEffect(()=>{if(r){const v=setInterval(()=>{p(b=>b-1)},1e3);return h<=0?(f&&c(),clearInterval(v),()=>clearInterval(v)):()=>clearInterval(v)}return()=>{}},[f,r,h,c]);const m=p_(),[g,y]=A.useState(!1);return A.useEffect(()=>{(async()=>{if(t){const b=await t.getModes(m);y(b.dataCollectionEnabled)}})()},[t,m]),_.jsx(Kc,{style:{height:"100%"},children:_.jsx(Nt,{direction:"column",children:r||!g?_.jsx(ze,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?_.jsx(su,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):_.jsxs(_.Fragment,{children:[_.jsx(ze,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),_.jsx(zl,{h:"lg"}),_.jsx(Kc,{children:_.jsx(op,{color:"blue"})})]})})})}function DFt(){return _.jsx(ze,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function PFt(){var d;const e=fy(),t=gg(),n=sv()||"Notfound",r=e.components[n],i=GX();E$e();const{storageEngine:s}=Ds(),o=dp(),{setAlertModal:a}=fp();if(A.useEffect(()=>{(s==null?void 0:s.getEngine())!=="firebase"&&o(a({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[a,s,o]),n==="end")return _.jsx(NFt,{});if(n==="__trainingFailed")return _.jsx(DFt,{});if(n==="Notfound")return _.jsx(pb,{email:e.uiConfig.contactEmail});const u=G4(r)&&e.baseComponents?WX({},(d=e.baseComponents)==null?void 0:d[r.baseComponent],r):r,l=u.instruction||"",{instructionLocation:c}=u,f=e.uiConfig.sidebar&&(c==="sidebar"||c===void 0);return _.jsxs(_.Fragment,{children:[c==="aboveStimulus"&&_.jsx(su,{text:l}),_.jsx(Z$,{status:i,config:u,location:"aboveStimulus"},`${t}-above-response-block`),_.jsxs(A.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:[u.type==="markdown"&&_.jsx(P$t,{currentConfig:u}),u.type==="website"&&_.jsx(Bft,{currentConfig:u}),u.type==="image"&&_.jsx(zft,{currentConfig:u}),u.type==="react-component"&&_.jsx(D$t,{currentConfig:u})]},`${t}-stimulus`),(c==="belowStimulus"||c===void 0&&!f)&&_.jsx(su,{text:l}),_.jsx(Z$,{status:i,config:u,location:"belowStimulus"},`${t}-below-response-block`)]})}function mq(e){const[t]=mX();return _.jsx(pX,{...e,to:{pathname:e.to,search:t.toString()}})}function S$e(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=S$e(o,t,n,r),r.includes(o.orderPath))break}return i}function T$e(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=T$e(s,r)}}),n}function OFt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function $Ft({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:s,studyConfig:o,subSequence:a,analysisNavigation:u}){const l=p_(),c=lp(),f=gg(),[d,{close:h,open:p}]=y6(!1),m=e in o.components&&o.components[e],g=a&&a.components.slice(r).includes(e)?S$e(n,e,r,a.orderPath):-1,{trialId:y}=Lm(),v=y===e,b=s?f===g:f===`reviewer-${e}`,w=u?v:b,E=A.useCallback(()=>c(y?`./../${e}`:`./${e}`),[c,e,y]),S=u?E:()=>c(s?`/${l}/${g}`:`/${l}/reviewer-${e}`);return _.jsxs(zo,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[_.jsx(zo.Target,{children:_.jsx(me,{onMouseEnter:p,onMouseLeave:h,children:_.jsx(q6,{active:w,style:{lineHeight:"32px",height:"32px"},label:_.jsxs(me,{children:[i&&_.jsx(Ett,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),w?_.jsx(ze,{size:"sm",span:!0,fw:"700",display:"inline",children:e}):_.jsx(ze,{size:"sm",display:"inline",children:e})]}),onClick:S,disabled:t})})}),m&&(m.description||m.meta)&&_.jsx(zo.Dropdown,{onMouseLeave:h,children:_.jsx(ze,{size:"sm",children:_.jsxs(me,{children:[m.description&&_.jsxs(me,{children:[_.jsx(ze,{fw:900,display:"inline-block",mr:2,children:"Description:"}),_.jsx(ze,{fw:400,component:"span",children:m.description})]}),m.meta&&_.jsxs(ze,{children:[_.jsx(ze,{fw:"900",component:"span",children:"Task Meta: "}),_.jsx(ze,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(m.meta,null,2)}`})]})]})})})]})}function j3({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:s}){var a;let o=B0(e.components);return n&&r&&(o=OFt(B0(e.components),B0(n.components))),r||(o=[...((a=e.interruptions)==null?void 0:a.flatMap(u=>u.components))||[],...o]),_.jsx(_.Fragment,{children:o.map((u,l)=>{if(typeof u=="string")return _.jsx($Ft,{step:u,disabled:r&&(n==null?void 0:n.components[l])!==u,fullSequence:t,startIndex:l,interruption:e.interruptions&&e.interruptions.findIndex(h=>h.components.includes(u))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:s},l);const c=n==null?void 0:n.components.find(h=>typeof h!="string"&&h.orderPath===u.orderPath),f=c?Bm(c).length-T$e(u,c):0,d=Bm(u);return _.jsx(q6,{label:_.jsxs(me,{style:{opacity:f>0?1:.5},children:[_.jsx(ze,{size:"sm",display:"inline",children:u.order}),u.order==="random"||u.order==="latinSquare"?_.jsx(_tt,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&_.jsxs(L0,{ml:5,variant:"light",children:[f,"/",d.length]}),r&&u.interruptions&&_.jsx(L0,{ml:5,color:"orange",variant:"light",children:(c==null?void 0:c.components.filter(h=>{var p;return typeof h=="string"&&((p=u.interruptions)==null?void 0:p.flatMap(m=>m.components).includes(h))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:_.jsx(me,{style:{borderLeft:"1px solid #e9ecef"},children:_.jsx(j3,{configSequence:u,participantSequence:c,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:s})})},l)})})}function C$e(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function Ome({text:e}){return _.jsx(Ii,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:_.jsx(CSe,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function MFt(){const{sequence:e,metadata:t}=ff(f=>f),{toggleStudyBrowser:n}=fp(),r=fy(),i=dp(),s=p_(),o=_Se(`/${s}`),{storageEngine:a}=Ds(),u=A.useMemo(()=>{let f=B0(r.sequence);return f=HX(f,"root"),f.components.push("end"),f},[r.sequence]),[l,c]=A.useState("participant");return _.jsxs(yi.Aside,{p:"0",children:[_.jsx(yi.Section,{children:_.jsxs(Nt,{direction:"row",p:"sm",justify:"space-between",pb:"xs",children:[_.jsx(ze,{size:"md",fw:700,pt:3,children:"Study Browser"}),_.jsx(dn,{variant:"light",leftSection:_.jsx(yX,{size:14}),onClick:()=>C$e(a,r,t,o),size:"xs",disabled:l==="allTrials",children:"Next Participant"}),_.jsx(lg,{onClick:()=>i(n()),mt:1})]})}),_.jsx(yi.Section,{grow:!0,component:Om,p:"xs",pt:0,children:_.jsxs(as,{value:l,onChange:c,children:[_.jsx(me,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:_.jsxs(as.List,{grow:!0,children:[_.jsxs(as.Tab,{value:"participant",children:["Participant View",_.jsx(Ome,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),_.jsxs(as.Tab,{value:"allTrials",children:["All Trials View",_.jsx(Ome,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),_.jsx(as.Panel,{value:"participant",children:_.jsx(j3,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),_.jsx(as.Panel,{value:"allTrials",children:_.jsx(j3,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}function LFt({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const{config:n,metadata:r}=ff(E=>E),i=qX(),s=dp(),{toggleShowHelpText:o,toggleStudyBrowser:a}=fp(),{storageEngine:u}=Ds(),l=gg(),c=i.length-1,f=typeof l=="number"?l/c*100:0,[d,h]=A.useState(!1),p=n==null?void 0:n.uiConfig.logoPath,m=n==null?void 0:n.uiConfig.withProgressBar,g=p_(),y=_Se(`/${g}`),v=A.useRef(null),[b,w]=A.useState(!1);return A.useEffect(()=>{const E=v.current;E&&w(E.scrollWidth>E.offsetWidth)},[n]),_.jsx(yi.Header,{p:"md",children:_.jsxs(ds,{mt:-7,align:"center",children:[_.jsx(ds.Col,{span:4,children:_.jsxs(Nt,{align:"center",children:[_.jsx(dg,{w:40,src:`${Qu}${p}`,alt:"Study Logo"}),_.jsx(zl,{w:"md"}),_.jsx(ki,{ref:v,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:b?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),_.jsx(ds.Col,{span:4,children:m&&_.jsx(NS,{radius:"md",size:"lg",value:f})}),_.jsx(ds.Col,{span:4,children:_.jsxs(Rs,{wrap:"nowrap",justify:"right",children:[!t&&_.jsx(Ii,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:_.jsx(L0,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&_.jsx(dn,{variant:"outline",onClick:()=>s(o()),children:"Help"}),_.jsxs(Ou,{shadow:"md",width:200,withinPortal:!0,opened:d,onChange:h,children:[_.jsx(Ou.Target,{children:_.jsx(s_,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:_.jsx(Rtt,{})})}),_.jsxs(Ou.Dropdown,{children:[e&&_.jsx(Ou.Item,{leftSection:_.jsx(ztt,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),_.jsx(Ou.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:_.jsx(Mtt,{size:14}),children:"Contact"}),e&&_.jsx(Ou.Item,{leftSection:_.jsx(yX,{size:14}),onClick:()=>C$e(u,n,r,y),children:"Next Participant"})]})]})]})})]})})}function A$e(e,t){var n;return G4(e)&&t.baseComponents?WX({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function FFt(){var u;const e=(u=fy())==null?void 0:u.uiConfig.sidebar,t=fy(),n=sv(),r=t.components[n],i=A.useMemo(()=>r?A$e(r,t):null,[r,t]),s=GX(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?_.jsxs(yi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&_.jsx(yi.Section,{bg:"gray.3",p:"md",children:_.jsxs(ze,{c:"gray.9",children:[_.jsx(ze,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),_.jsx(su,{text:o})]})}),_.jsx(yi.Section,{p:"md",children:_.jsx(Z$,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):_.jsx(yi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:_.jsx(Z$,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function jFt(){const{showHelpText:e,config:t}=ff(u=>u),n=dp(),{toggleShowHelpText:r}=fp(),[i,s]=A.useState(""),[o,a]=A.useState(!0);return A.useEffect(()=>{async function u(){const l=await KX(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),_.jsx(es,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?_.jsx(su,{text:i}):_.jsx(pb,{path:t.uiConfig.helpTextPath})})}function BFt(){const{alertModal:e}=ff(o=>o),{setAlertModal:t}=fp(),n=dp(),[r,i]=A.useState(e.show),s=A.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return A.useEffect(()=>i(e.show),[e.show]),_.jsx(es,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:_.jsxs(CS,{color:"red",radius:"xs",title:"Alert",icon:_.jsx(btt,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[_.jsx(ze,{my:"md",children:e.message}),_.jsx(Rs,{w:"100%",justify:"end",children:_.jsx(dn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}function UFt(){const e=A.useRef([]),t=fy(),n=t.uiConfig.windowEventDebounceTime??100,r=ff(d=>d.showStudyBrowser);A.useEffect(()=>{const d=Ud(E=>{e.current.push([Date.now(),"focus",E.target instanceof HTMLElement?E.target.tagName:""])},n,{maxWait:n}),h=Ud(E=>{e.current.push([Date.now(),"input",E.data??""])},n,{maxWait:n}),p=Ud(E=>{e.current.push([Date.now(),"keypress",E.key])},n,{maxWait:n}),m=Ud(E=>{e.current.push([Date.now(),"mousedown",[E.clientX,E.clientY]])},n,{maxWait:n}),g=Ud(E=>{e.current.push([Date.now(),"mouseup",[E.clientX,E.clientY]])},n,{maxWait:n}),y=Ud(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),v=Ud(E=>{e.current.push([Date.now(),"mousemove",[E.clientX,E.clientY]])},n,{maxWait:n}),b=Ud(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),w=Ud(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",y),window.addEventListener("mousemove",v),window.addEventListener("scroll",b),document.addEventListener("visibilitychange",w),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",y),window.removeEventListener("mousemove",v),window.removeEventListener("scroll",b),document.removeEventListener("visibilitychange",w)}},[]);const i=t.uiConfig.sidebarWidth??300,{storageEngine:s}=Ds(),o=p_(),[a,u]=A.useState(!1),[l,c]=A.useState(!1);A.useEffect(()=>{(async()=>{if(s){const h=await s.getModes(o);u(h.studyNavigatorEnabled),c(h.dataCollectionEnabled)}})()},[s,o]);const f=A.useMemo(()=>a&&r,[a,r]);return _.jsx(kCe.Provider,{value:e,children:_.jsxs(yi,{padding:"md",header:{height:70},navbar:{width:i,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!f,mobile:!f}},children:[_.jsx(FFt,{}),_.jsx(MFt,{}),_.jsx(LFt,{studyNavigatorEnabled:a,dataCollectionEnabled:l}),_.jsx(jFt,{}),_.jsx(BFt,{}),_.jsx(yi.Main,{children:_.jsx(itt,{})})]})})}function zFt(e,t=!1){return typeof e=="number"?$me(e,t):$me(e.length,t).map(r=>r.map(i=>e[i]))}function $me(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function I$e(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=I$e(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function VFt(e,t){const n=B0(e);return I$e(n,t,"root")}function k$e(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&k$e(s,t,i,o)})}function HFt(e){const t=[];return k$e(e,t,"",0),t}function Mme(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return zFt(i.sort(()=>.5-Math.random()),!0)}function qFt(e){const n=HFt(e.sequence).map(s=>({[s]:Mme(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=VFt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=Mme(e,o))})}),i}var WFt={VITE_BASE_PATH:"/revisit/",VITE_FIREBASE_CONFIG:`
{
  apiKey: "AIzaSyDks0KPmUNFtOPDsOHFAuQY6XSMksNecWE",
  authDomain: "revisit-fb-db.firebaseapp.com",
  projectId: "revisit-fb-db",
  storageBucket: "revisit-fb-db.appspot.com",
  messagingSenderId: "329639127561",
  appId: "1:329639127561:web:346fc2d58229c9ba2ae6d8"
}
`,VITE_STORAGE_ENGINE:"firebase",VITE_RECAPTCHAV3TOKEN:"6LcoLeIpAAAAAFvL4FMjROebfEEYkWq4LyHHkA7O",BASE_URL:"/revisit/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};async function GFt(e){const t=await(await fetch(`${Qu}${e}`)).text();return SFt(t)}async function Y4(e,t){const n=t.configsList.find(r=>NSe(r)===e);if(n){const r=t.configs[n];return await GFt(`${r.path}`)}return null}async function YFt(e){const t={},n=e.configsList.filter(i=>WFt.VITE_CI==="true"?!0:!e.configs[i].test).map(async i=>Y4(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function KFt({globalConfig:e}){const t=p_(),[n,r]=A.useState(null),i=e.configsList.includes(t);A.useEffect(()=>{Y4(t,e).then(h=>{r(h)})},[e,t]);const[s,o]=A.useState([]),[a,u]=A.useState(null),{storageEngine:l}=Ds(),[c]=mX();A.useEffect(()=>{async function h(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await qFt(n));const m=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,g=Object.fromEntries(c.entries()),y={ip:""},v={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:y.ip},b=await l.initializeParticipantSession(t,g,n,v,m),w=await sft(t,n,b.sequence,v,b.answers);u(w),o([{element:_.jsx(UFt,{}),children:[{path:"/",element:_.jsx(mq,{to:"0",replace:!0})},{path:"/:index",element:n.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(ki,{order:2,mb:8,children:"Error loading config"}),_.jsx(oV,{issues:n.errors,type:"error"})]}):_.jsx(PFt,{})}]}])}h()},[l,n,t,c]);const f=ESe(s);let d=null;return i?s.length===0?d=_.jsx(Xl,{visible:!0}):d=f&&a?_.jsx(ICe.Provider,{value:a,children:_.jsx(Zlt,{store:a.store,children:f})}):_.jsx(pb,{}):d=_.jsx(pb,{}),d}var Lme={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R$e=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},XFt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},Wee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(R$e(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):XFt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new QFt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class QFt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JFt=function(e){const t=R$e(e);return Wee.encodeByteArray(t,!0)},B3=function(e){return JFt(e).replace(/\./g,"")},N$e=function(e){try{return Wee.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D$e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZFt=()=>D$e().__FIREBASE_DEFAULTS__,e4t=()=>{if(typeof process>"u"||typeof Lme>"u")return;const e=Lme.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},t4t=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&N$e(e[1]);return t&&JSON.parse(t)},K4=()=>{try{return ZFt()||e4t()||t4t()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},P$e=e=>{var t,n;return(n=(t=K4())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},n4t=e=>{const t=P$e(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},O$e=()=>{var e;return(e=K4())===null||e===void 0?void 0:e.config},$$e=e=>{var t;return(t=K4())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4t(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[B3(JSON.stringify(n)),B3(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function i4t(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yo())}function s4t(){var e;const t=(e=K4())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function o4t(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function a4t(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function u4t(){const e=Yo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function l4t(){return!s4t()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Gee(){try{return typeof indexedDB=="object"}catch{return!1}}function c4t(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4t="FirebaseError";class vp extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=f4t,Object.setPrototypeOf(this,vp.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dT.prototype.create)}}class dT{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?d4t(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new vp(i,a,r)}}function d4t(e,t){return e.replace(h4t,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const h4t=/\{\$([^}]+)}/g;function p4t(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function tk(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(Fme(s)&&Fme(o)){if(!tk(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Fme(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function m4t(e,t){const n=new g4t(e,t);return n.subscribe.bind(n)}class g4t{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");y4t(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=aU),i.error===void 0&&(i.error=aU),i.complete===void 0&&(i.complete=aU);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function y4t(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function aU(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4t=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4t=1e3,_4t=2,w4t=4*60*60*1e3,E4t=.5;function x4t(e,t=b4t,n=_4t){const r=t*Math.pow(n,e),i=Math.round(E4t*r*(Math.random()-.5)*2);return Math.min(w4t,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(e){return e&&e._delegate?e._delegate:e}class Kh{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4t{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new ek;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(C4t(t))try{this.getOrInitializeService({instanceIdentifier:a1})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=a1){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=a1){return this.instances.has(t)}getOptions(t=a1){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:T4t(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=a1){return this.component?this.component.multipleInstances?t:a1:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function T4t(e){return e===a1?void 0:e}function C4t(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4t{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new S4t(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Xn||(Xn={}));const I4t={debug:Xn.DEBUG,verbose:Xn.VERBOSE,info:Xn.INFO,warn:Xn.WARN,error:Xn.ERROR,silent:Xn.SILENT},k4t=Xn.INFO,R4t={[Xn.DEBUG]:"log",[Xn.VERBOSE]:"log",[Xn.INFO]:"info",[Xn.WARN]:"warn",[Xn.ERROR]:"error"},N4t=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=R4t[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class X4{constructor(t){this.name=t,this._logLevel=k4t,this._logHandler=N4t,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Xn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?I4t[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Xn.DEBUG,...t),this._logHandler(this,Xn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Xn.VERBOSE,...t),this._logHandler(this,Xn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Xn.INFO,...t),this._logHandler(this,Xn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Xn.WARN,...t),this._logHandler(this,Xn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Xn.ERROR,...t),this._logHandler(this,Xn.ERROR,...t)}}const D4t=(e,t)=>t.some(n=>e instanceof n);let jme,Bme;function P4t(){return jme||(jme=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function O4t(){return Bme||(Bme=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const M$e=new WeakMap,gq=new WeakMap,L$e=new WeakMap,uU=new WeakMap,Yee=new WeakMap;function $4t(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(K0(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&M$e.set(n,e)}).catch(()=>{}),Yee.set(t,e),t}function M4t(e){if(gq.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});gq.set(e,t)}let yq={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return gq.get(e);if(t==="objectStoreNames")return e.objectStoreNames||L$e.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return K0(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function L4t(e){yq=e(yq)}function F4t(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(lU(this),t,...n);return L$e.set(r,t.sort?t.sort():[t]),K0(r)}:O4t().includes(e)?function(...t){return e.apply(lU(this),t),K0(M$e.get(this))}:function(...t){return K0(e.apply(lU(this),t))}}function j4t(e){return typeof e=="function"?F4t(e):(e instanceof IDBTransaction&&M4t(e),D4t(e,P4t())?new Proxy(e,yq):e)}function K0(e){if(e instanceof IDBRequest)return $4t(e);if(uU.has(e))return uU.get(e);const t=j4t(e);return t!==e&&(uU.set(e,t),Yee.set(t,e)),t}const lU=e=>Yee.get(e);function B4t(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=K0(o);return r&&o.addEventListener("upgradeneeded",u=>{r(K0(o.result),u.oldVersion,u.newVersion,K0(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const U4t=["get","getKey","getAll","getAllKeys","count"],z4t=["put","add","delete","clear"],cU=new Map;function Ume(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(cU.get(t))return cU.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=z4t.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||U4t.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return cU.set(t,s),s}L4t(e=>({...e,get:(t,n,r)=>Ume(t,n)||e.get(t,n,r),has:(t,n)=>!!Ume(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4t{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(H4t(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function H4t(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const vq="@firebase/app",zme="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb=new X4("@firebase/app"),q4t="@firebase/app-compat",W4t="@firebase/analytics-compat",G4t="@firebase/analytics",Y4t="@firebase/app-check-compat",K4t="@firebase/app-check",X4t="@firebase/auth",Q4t="@firebase/auth-compat",J4t="@firebase/database",Z4t="@firebase/database-compat",e5t="@firebase/functions",t5t="@firebase/functions-compat",n5t="@firebase/installations",r5t="@firebase/installations-compat",i5t="@firebase/messaging",s5t="@firebase/messaging-compat",o5t="@firebase/performance",a5t="@firebase/performance-compat",u5t="@firebase/remote-config",l5t="@firebase/remote-config-compat",c5t="@firebase/storage",f5t="@firebase/storage-compat",d5t="@firebase/firestore",h5t="@firebase/vertexai-preview",p5t="@firebase/firestore-compat",m5t="firebase",g5t="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bq="[DEFAULT]",y5t={[vq]:"fire-core",[q4t]:"fire-core-compat",[G4t]:"fire-analytics",[W4t]:"fire-analytics-compat",[K4t]:"fire-app-check",[Y4t]:"fire-app-check-compat",[X4t]:"fire-auth",[Q4t]:"fire-auth-compat",[J4t]:"fire-rtdb",[Z4t]:"fire-rtdb-compat",[e5t]:"fire-fn",[t5t]:"fire-fn-compat",[n5t]:"fire-iid",[r5t]:"fire-iid-compat",[i5t]:"fire-fcm",[s5t]:"fire-fcm-compat",[o5t]:"fire-perf",[a5t]:"fire-perf-compat",[u5t]:"fire-rc",[l5t]:"fire-rc-compat",[c5t]:"fire-gcs",[f5t]:"fire-gcs-compat",[d5t]:"fire-fst",[p5t]:"fire-fst-compat",[h5t]:"fire-vertex","fire-js":"fire-js",[m5t]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3=new Map,v5t=new Map,_q=new Map;function Vme(e,t){try{e.container.addComponent(t)}catch(n){kb.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Jm(e){const t=e.name;if(_q.has(t))return kb.debug(`There were multiple attempts to register component ${t}.`),!1;_q.set(t,e);for(const n of U3.values())Vme(n,e);for(const n of v5t.values())Vme(n,e);return!0}function hT(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function bh(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b5t={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},X0=new dT("app","Firebase",b5t);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5t{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Kh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw X0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __=g5t;function F$e(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:bq,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw X0.create("bad-app-name",{appName:String(i)});if(n||(n=O$e()),!n)throw X0.create("no-options");const s=U3.get(i);if(s){if(tk(n,s.options)&&tk(r,s.config))return s;throw X0.create("duplicate-app",{appName:i})}const o=new A4t(i);for(const u of _q.values())o.addComponent(u);const a=new _5t(n,r,o);return U3.set(i,a),a}function Kee(e=bq){const t=U3.get(e);if(!t&&e===bq&&O$e())return F$e();if(!t)throw X0.create("no-app",{appName:e});return t}function id(e,t,n){var r;let i=(r=y5t[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),kb.warn(a.join(" "));return}Jm(new Kh(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w5t="firebase-heartbeat-database",E5t=1,nk="firebase-heartbeat-store";let fU=null;function j$e(){return fU||(fU=B4t(w5t,E5t,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(nk)}catch(n){console.warn(n)}}}}).catch(e=>{throw X0.create("idb-open",{originalErrorMessage:e.message})})),fU}async function x5t(e){try{const n=(await j$e()).transaction(nk),r=await n.objectStore(nk).get(B$e(e));return await n.done,r}catch(t){if(t instanceof vp)kb.warn(t.message);else{const n=X0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});kb.warn(n.message)}}}async function Hme(e,t){try{const r=(await j$e()).transaction(nk,"readwrite");await r.objectStore(nk).put(t,B$e(e)),await r.done}catch(n){if(n instanceof vp)kb.warn(n.message);else{const r=X0.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});kb.warn(r.message)}}}function B$e(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S5t=1024,T5t=30*24*60*60*1e3;class C5t{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new I5t(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=qme();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=T5t}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=qme(),{heartbeatsToSend:r,unsentEntries:i}=A5t(this._heartbeatsCache.heartbeats),s=B3(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function qme(){return new Date().toISOString().substring(0,10)}function A5t(e,t=S5t){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Wme(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Wme(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class I5t{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Gee()?c4t().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await x5t(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Hme(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Hme(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Wme(e){return B3(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k5t(e){Jm(new Kh("platform-logger",t=>new V4t(t),"PRIVATE")),Jm(new Kh("heartbeat",t=>new C5t(t),"PRIVATE")),id(vq,zme,e),id(vq,zme,"esm2017"),id("fire-js","")}k5t("");function U$e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const R5t=U$e,z$e=new dT("auth","Firebase",U$e());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3=new X4("@firebase/auth");function N5t(e,...t){z3.logLevel<=Xn.WARN&&z3.warn(`Auth (${__}): ${e}`,...t)}function IO(e,...t){z3.logLevel<=Xn.ERROR&&z3.error(`Auth (${__}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(e,...t){throw Qee(e,...t)}function sd(e,...t){return Qee(e,...t)}function Xee(e,t,n){const r=Object.assign(Object.assign({},R5t()),{[t]:n});return new dT("auth","Firebase",r).create(t,{appName:e.name})}function Q0(e){return Xee(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function D5t(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Xh(e,"argument-error"),Xee(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Qee(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return z$e.create(e,...t)}function ln(e,t,...n){if(!e)throw Qee(t,...n)}function hm(e){const t="INTERNAL ASSERTION FAILED: "+e;throw IO(t),new Error(t)}function Zm(e,t){e||hm(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wq(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function P5t(){return Gme()==="http:"||Gme()==="https:"}function Gme(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5t(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(P5t()||o4t()||"connection"in navigator)?navigator.onLine:!0}function $5t(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(t,n){this.shortDelay=t,this.longDelay=n,Zm(n>t,"Short delay should be less than long delay!"),this.isMobile=i4t()||a4t()}get(){return O5t()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jee(e,t){Zm(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V$e{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hm("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hm("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hm("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M5t={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5t=new MR(3e4,6e4);function Q4(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function pT(e,t,n,r,i={}){return H$e(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=$R(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),V$e.fetch()(W$e(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function H$e(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},M5t),t);try{const i=new F5t(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw tP(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw tP(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw tP(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw tP(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Xee(e,c,l);Xh(e,c)}}catch(i){if(i instanceof vp)throw i;Xh(e,"network-request-failed",{message:String(i)})}}async function q$e(e,t,n,r,i={}){const s=await pT(e,t,n,r,i);return"mfaPendingCredential"in s&&Xh(e,"multi-factor-auth-required",{_serverResponse:s}),s}function W$e(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?Jee(e.config,i):`${e.config.apiScheme}://${i}`}class F5t{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(sd(this.auth,"network-request-failed")),L5t.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function tP(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=sd(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j5t(e,t){return pT(e,"POST","/v1/accounts:delete",t)}async function G$e(e,t){return pT(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function B5t(e,t=!1){const n=li(e),r=await n.getIdToken(t),i=Zee(r);ln(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:x2(dU(i.auth_time)),issuedAtTime:x2(dU(i.iat)),expirationTime:x2(dU(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function dU(e){return Number(e)*1e3}function Zee(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return IO("JWT malformed, contained fewer than 3 sections"),null;try{const i=N$e(n);return i?JSON.parse(i):(IO("Failed to decode base64 JWT payload"),null)}catch(i){return IO("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Yme(e){const t=Zee(e);return ln(t,"internal-error"),ln(typeof t.exp<"u","internal-error"),ln(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rk(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof vp&&U5t(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function U5t({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5t{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eq{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=x2(this.lastLoginAt),this.creationTime=x2(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V3(e){var t;const n=e.auth,r=await e.getIdToken(),i=await rk(e,G$e(n,{idToken:r}));ln(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?Y$e(s.providerUserInfo):[],a=H5t(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Eq(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function V5t(e){const t=li(e);await V3(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function H5t(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function Y$e(e){return e.map(t=>{var{providerId:n}=t,r=Vk(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q5t(e,t){const n=await H$e(e,{},async()=>{const r=$R({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=W$e(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",V$e.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function W5t(e,t){return pT(e,"POST","/v2/accounts:revokeToken",Q4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){ln(t.idToken,"internal-error"),ln(typeof t.idToken<"u","internal-error"),ln(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Yme(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){ln(t.length!==0,"internal-error");const n=Yme(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ln(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await q5t(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new $E;return r&&(ln(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(ln(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(ln(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new $E,this.toJSON())}_performRefresh(){return hm("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(e,t){ln(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class pm{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=Vk(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new z5t(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Eq(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await rk(this,this.stsTokenManager.getToken(this.auth,t));return ln(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return B5t(this,t)}reload(){return V5t(this)}_assign(t){this!==t&&(ln(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new pm(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){ln(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await V3(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bh(this.auth.app))return Promise.reject(Q0(this.auth));const t=await this.getIdToken();return await rk(this,j5t(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:w,isAnonymous:E,providerData:x,stsTokenManager:S}=n;ln(b&&S,t,"internal-error");const C=$E.fromJSON(this.name,S);ln(typeof b=="string",t,"internal-error"),jg(f,t.name),jg(d,t.name),ln(typeof w=="boolean",t,"internal-error"),ln(typeof E=="boolean",t,"internal-error"),jg(h,t.name),jg(p,t.name),jg(m,t.name),jg(g,t.name),jg(y,t.name),jg(v,t.name);const I=new pm({uid:b,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:C,createdAt:y,lastLoginAt:v});return x&&Array.isArray(x)&&(I.providerData=x.map(k=>Object.assign({},k))),g&&(I._redirectEventId=g),I}static async _fromIdTokenResponse(t,n,r=!1){const i=new $E;i.updateFromServerResponse(n);const s=new pm({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await V3(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];ln(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Y$e(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new $E;a.updateFromIdToken(r);const u=new pm({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Eq(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kme=new Map;function mm(e){Zm(e instanceof Function,"Expected a class definition");let t=Kme.get(e);return t?(Zm(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Kme.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K$e{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}K$e.type="NONE";const Xme=K$e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(e,t,n){return`firebase:${e}:${t}:${n}`}class ME{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=kO(this.userKey,i.apiKey,s),this.fullPersistenceKey=kO("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?pm._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new ME(mm(Xme),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||mm(Xme);const o=kO(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=pm._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new ME(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new ME(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qme(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(J$e(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(X$e(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(eMe(t))return"Blackberry";if(tMe(t))return"Webos";if(ete(t))return"Safari";if((t.includes("chrome/")||Q$e(t))&&!t.includes("edge/"))return"Chrome";if(Z$e(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function X$e(e=Yo()){return/firefox\//i.test(e)}function ete(e=Yo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Q$e(e=Yo()){return/crios\//i.test(e)}function J$e(e=Yo()){return/iemobile/i.test(e)}function Z$e(e=Yo()){return/android/i.test(e)}function eMe(e=Yo()){return/blackberry/i.test(e)}function tMe(e=Yo()){return/webos/i.test(e)}function J4(e=Yo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function G5t(e=Yo()){var t;return J4(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function Y5t(){return u4t()&&document.documentMode===10}function nMe(e=Yo()){return J4(e)||Z$e(e)||tMe(e)||eMe(e)||/windows phone/i.test(e)||J$e(e)}function K5t(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rMe(e,t=[]){let n;switch(e){case"Browser":n=Qme(Yo());break;case"Worker":n=`${Qme(Yo())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${__}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5t{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q5t(e,t={}){return pT(e,"GET","/v2/passwordPolicy",Q4(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5t=6;class Z5t{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:J5t,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ejt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jme(this),this.idTokenSubscription=new Jme(this),this.beforeStateQueue=new X5t(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=z$e,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=mm(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await ME.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await G$e(this,{idToken:t}),r=await pm._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(bh(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ln(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await V3(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=$5t()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(bh(this.app))return Promise.reject(Q0(this));const n=t?li(t):null;return n&&ln(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&ln(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return bh(this.app)?Promise.reject(Q0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return bh(this.app)?Promise.reject(Q0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(mm(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Q5t(this),n=new Z5t(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new dT("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await W5t(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&mm(t)||this._popupRedirectResolver;ln(n,this,"argument-error"),this.redirectPersistenceManager=await ME.create(this,[mm(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ln(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return ln(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=rMe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&N5t(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function LR(e){return li(e)}class Jme{constructor(t){this.auth=t,this.observer=null,this.addObserver=m4t(n=>this.observer=n)}get next(){return ln(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tte={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tjt(e){tte=e}function njt(e){return tte.loadJS(e)}function rjt(){return tte.gapiScript}function ijt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sjt(e,t){const n=hT(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(tk(s,t??{}))return i;Xh(i,"already-initialized")}return n.initialize({options:t})}function ojt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(mm);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function ajt(e,t,n){const r=LR(e);ln(r._canInitEmulator,r,"emulator-config-failed"),ln(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=iMe(t),{host:o,port:a}=ujt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),ljt()}function iMe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ujt(e){const t=iMe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Zme(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Zme(o)}}}function Zme(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function ljt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sMe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return hm("not implemented")}_getIdTokenResponse(t){return hm("not implemented")}_linkToIdToken(t,n){return hm("not implemented")}_getReauthenticationResolver(t){return hm("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LE(e,t){return q$e(e,"POST","/v1/accounts:signInWithIdp",Q4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cjt="http://localhost";class Rb extends sMe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Rb(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Xh("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=Vk(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Rb(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return LE(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,LE(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,LE(t,n)}buildRequest(){const t={requestUri:cjt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=$R(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nte{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR extends nte{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0 extends FR{constructor(){super("facebook.com")}static credential(t){return Rb._fromParams({providerId:u0.PROVIDER_ID,signInMethod:u0.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return u0.credentialFromTaggedObject(t)}static credentialFromError(t){return u0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return u0.credential(t.oauthAccessToken)}catch{return null}}}u0.FACEBOOK_SIGN_IN_METHOD="facebook.com";u0.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm extends FR{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Rb._fromParams({providerId:sm.PROVIDER_ID,signInMethod:sm.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return sm.credentialFromTaggedObject(t)}static credentialFromError(t){return sm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return sm.credential(n,r)}catch{return null}}}sm.GOOGLE_SIGN_IN_METHOD="google.com";sm.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0 extends FR{constructor(){super("github.com")}static credential(t){return Rb._fromParams({providerId:l0.PROVIDER_ID,signInMethod:l0.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return l0.credentialFromTaggedObject(t)}static credentialFromError(t){return l0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return l0.credential(t.oauthAccessToken)}catch{return null}}}l0.GITHUB_SIGN_IN_METHOD="github.com";l0.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0 extends FR{constructor(){super("twitter.com")}static credential(t,n){return Rb._fromParams({providerId:c0.PROVIDER_ID,signInMethod:c0.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return c0.credentialFromTaggedObject(t)}static credentialFromError(t){return c0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return c0.credential(n,r)}catch{return null}}}c0.TWITTER_SIGN_IN_METHOD="twitter.com";c0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fjt(e,t){return q$e(e,"POST","/v1/accounts:signUp",Q4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await pm._fromIdTokenResponse(t,r,i),o=ege(r);return new Ry({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=ege(r);return new Ry({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function ege(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function djt(e){var t;if(bh(e.app))return Promise.reject(Q0(e));const n=LR(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new Ry({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await fjt(n,{returnSecureToken:!0}),i=await Ry._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3 extends vp{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,H3.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new H3(t,n,r,i)}}function oMe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?H3._fromErrorAndOperation(e,s,t,r):s})}async function hjt(e,t,n=!1){const r=await rk(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ry._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pjt(e,t,n=!1){const{auth:r}=e;if(bh(r.app))return Promise.reject(Q0(r));const i="reauthenticate";try{const s=await rk(e,oMe(r,i,t,e),n);ln(s.idToken,r,"internal-error");const o=Zee(s.idToken);ln(o,r,"internal-error");const{sub:a}=o;return ln(e.uid===a,r,"user-mismatch"),Ry._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Xh(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mjt(e,t,n=!1){if(bh(e.app))return Promise.reject(Q0(e));const r="signIn",i=await oMe(e,r,t),s=await Ry._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function gjt(e,t,n,r){return li(e).onIdTokenChanged(t,n,r)}function yjt(e,t,n){return li(e).beforeAuthStateChanged(t,n)}function vjt(e,t,n,r){return li(e).onAuthStateChanged(t,n,r)}function bjt(e){return li(e).signOut()}const q3="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aMe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(q3,"1"),this.storage.removeItem(q3),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _jt(){const e=Yo();return ete(e)||J4(e)}const wjt=1e3,Ejt=10;class uMe extends aMe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=_jt()&&K5t(),this.fallbackToPolling=nMe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Y5t()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,Ejt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},wjt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}uMe.type="LOCAL";const xjt=uMe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lMe extends aMe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}lMe.type="SESSION";const cMe=lMe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sjt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new Z4(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await Sjt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Z4.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rte(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tjt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=rte("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dh(){return window}function Cjt(e){Dh().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fMe(){return typeof Dh().WorkerGlobalScope<"u"&&typeof Dh().importScripts=="function"}async function Ajt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ijt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function kjt(){return fMe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dMe="firebaseLocalStorageDb",Rjt=1,W3="firebaseLocalStorage",hMe="fbase_key";class jR{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function e5(e,t){return e.transaction([W3],t?"readwrite":"readonly").objectStore(W3)}function Njt(){const e=indexedDB.deleteDatabase(dMe);return new jR(e).toPromise()}function xq(){const e=indexedDB.open(dMe,Rjt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(W3,{keyPath:hMe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(W3)?t(r):(r.close(),await Njt(),t(await xq()))})})}async function tge(e,t,n){const r=e5(e,!0).put({[hMe]:t,value:n});return new jR(r).toPromise()}async function Djt(e,t){const n=e5(e,!1).get(t),r=await new jR(n).toPromise();return r===void 0?null:r.value}function nge(e,t){const n=e5(e,!0).delete(t);return new jR(n).toPromise()}const Pjt=800,Ojt=3;class pMe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xq(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>Ojt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fMe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Z4._getInstance(kjt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await Ajt(),!this.activeServiceWorker)return;this.sender=new Tjt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Ijt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await xq();return await tge(t,q3,"1"),await nge(t,q3),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>tge(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>Djt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>nge(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=e5(i,!1).getAll();return new jR(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Pjt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pMe.type="LOCAL";const $jt=pMe;new MR(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mMe(e,t){return t?mm(t):(ln(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ite extends sMe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return LE(t,this._buildIdpRequest())}_linkToIdToken(t,n){return LE(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return LE(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Mjt(e){return mjt(e.auth,new ite(e),e.bypassAuthState)}function Ljt(e){const{auth:t,user:n}=e;return ln(n,t,"internal-error"),pjt(n,new ite(e),e.bypassAuthState)}async function Fjt(e){const{auth:t,user:n}=e;return ln(n,t,"internal-error"),hjt(n,new ite(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gMe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Mjt;case"linkViaPopup":case"linkViaRedirect":return Fjt;case"reauthViaPopup":case"reauthViaRedirect":return Ljt;default:Xh(this.auth,"internal-error")}}resolve(t){Zm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Zm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jjt=new MR(2e3,1e4);async function Bjt(e,t,n){if(bh(e.app))return Promise.reject(sd(e,"operation-not-supported-in-this-environment"));const r=LR(e);D5t(e,t,nte);const i=mMe(r,n);return new B1(r,"signInViaPopup",t,i).executeNotNull()}class B1 extends gMe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,B1.currentPopupAction&&B1.currentPopupAction.cancel(),B1.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return ln(t,this.auth,"internal-error"),t}async onExecution(){Zm(this.filter.length===1,"Popup operations only handle one event");const t=rte();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(sd(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(sd(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,B1.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(sd(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,jjt.get())};t()}}B1.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ujt="pendingRedirect",RO=new Map;class zjt extends gMe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=RO.get(this.auth._key());if(!t){try{const r=await Vjt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}RO.set(this.auth._key(),t)}return this.bypassAuthState||RO.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Vjt(e,t){const n=Wjt(t),r=qjt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Hjt(e,t){RO.set(e._key(),t)}function qjt(e){return mm(e._redirectPersistence)}function Wjt(e){return kO(Ujt,e.config.apiKey,e.name)}async function Gjt(e,t,n=!1){if(bh(e.app))return Promise.reject(Q0(e));const r=LR(e),i=mMe(r,t),o=await new zjt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yjt=10*60*1e3;class Kjt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Xjt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!yMe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(sd(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Yjt&&this.cachedEventUids.clear(),this.cachedEventUids.has(rge(t))}saveEventToCache(t){this.cachedEventUids.add(rge(t)),this.lastProcessedEventTime=Date.now()}}function rge(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function yMe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Xjt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yMe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qjt(e,t={}){return pT(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jjt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zjt=/^https?/;async function eBt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Qjt(e);for(const n of t)try{if(tBt(n))return}catch{}Xh(e,"unauthorized-domain")}function tBt(e){const t=wq(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Zjt.test(n))return!1;if(Jjt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nBt=new MR(3e4,6e4);function ige(){const e=Dh().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function rBt(e){return new Promise((t,n)=>{var r,i,s;function o(){ige(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ige(),n(sd(e,"network-request-failed"))},timeout:nBt.get()})}if(!((i=(r=Dh().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=Dh().gapi)===null||s===void 0)&&s.load)o();else{const a=ijt("iframefcb");return Dh()[a]=()=>{gapi.load?o():n(sd(e,"network-request-failed"))},njt(`${rjt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw NO=null,t})}let NO=null;function iBt(e){return NO=NO||rBt(e),NO}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sBt=new MR(5e3,15e3),oBt="__/auth/iframe",aBt="emulator/auth/iframe",uBt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lBt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cBt(e){const t=e.config;ln(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Jee(t,aBt):`https://${e.config.authDomain}/${oBt}`,r={apiKey:t.apiKey,appName:e.name,v:__},i=lBt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${$R(r).slice(1)}`}async function fBt(e){const t=await iBt(e),n=Dh().gapi;return ln(n,e,"internal-error"),t.open({where:document.body,url:cBt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uBt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=sd(e,"network-request-failed"),a=Dh().setTimeout(()=>{s(o)},sBt.get());function u(){Dh().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dBt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hBt=500,pBt=600,mBt="_blank",gBt="http://localhost";class sge{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yBt(e,t,n,r=hBt,i=pBt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},dBt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Yo().toLowerCase();n&&(a=Q$e(l)?mBt:n),X$e(l)&&(t=t||gBt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(G5t(l)&&a!=="_self")return vBt(t||"",a),new sge(null);const f=window.open(t||"",a,c);ln(f,e,"popup-blocked");try{f.focus()}catch{}return new sge(f)}function vBt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bBt="__/auth/handler",_Bt="emulator/auth/handler",wBt=encodeURIComponent("fac");async function oge(e,t,n,r,i,s){ln(e.config.authDomain,e,"auth-domain-config-required"),ln(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:__,eventId:i};if(t instanceof nte){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",p4t(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof FR){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${wBt}=${encodeURIComponent(u)}`:"";return`${EBt(e)}?${$R(a).slice(1)}${l}`}function EBt({config:e}){return e.emulator?Jee(e,_Bt):`https://${e.authDomain}/${bBt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hU="webStorageSupport";class xBt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cMe,this._completeRedirectFn=Gjt,this._overrideRedirectResult=Hjt}async _openPopup(t,n,r,i){var s;Zm((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await oge(t,n,r,wq(),i);return yBt(t,o,rte())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await oge(t,n,r,wq(),i);return Cjt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Zm(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await fBt(t),r=new Kjt(t);return n.register("authEvent",i=>(ln(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(hU,{type:hU},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[hU];o!==void 0&&n(!!o),Xh(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=eBt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return nMe()||ete()||J4()}}const vMe=xBt;var age="@firebase/auth",uge="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SBt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ln(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TBt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function CBt(e){Jm(new Kh("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ln(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rMe(e)},l=new ejt(r,i,s,u);return ojt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Jm(new Kh("auth-internal",t=>{const n=LR(t.getProvider("auth").getImmediate());return(r=>new SBt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),id(age,uge,TBt(e)),id(age,uge,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ABt=5*60,IBt=$$e("authIdTokenMaxAge")||ABt;let lge=null;const kBt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>IBt)return;const i=n==null?void 0:n.token;lge!==i&&(lge=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function G3(e=Kee()){const t=hT(e,"auth");if(t.isInitialized())return t.getImmediate();const n=sjt(e,{popupRedirectResolver:vMe,persistence:[$jt,xjt,cMe]}),r=$$e("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=kBt(s.toString());yjt(n,o,()=>o(n.currentUser)),gjt(n,a=>o(a))}}const i=P$e("auth");return i&&ajt(n,`http://${i}`),n}function RBt(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}tjt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=sd("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",RBt().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});CBt("Browser");var NBt="firebase",DBt="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */id(NBt,DBt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bMe="firebasestorage.googleapis.com",_Me="storageBucket",PBt=2*60*1e3,OBt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends vp{constructor(t,n,r=0){super(pU(t),`Firebase Storage: ${n} (${pU(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,rs.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return pU(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ns;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ns||(ns={}));function pU(e){return"storage/"+e}function ste(){const e="An unknown error occurred, please check the error payload for server response.";return new rs(ns.UNKNOWN,e)}function $Bt(e){return new rs(ns.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function MBt(e){return new rs(ns.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function LBt(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new rs(ns.UNAUTHENTICATED,e)}function FBt(){return new rs(ns.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function jBt(e){return new rs(ns.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function BBt(){return new rs(ns.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function UBt(){return new rs(ns.CANCELED,"User canceled the upload/download.")}function zBt(e){return new rs(ns.INVALID_URL,"Invalid URL '"+e+"'.")}function VBt(e){return new rs(ns.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function HBt(){return new rs(ns.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+_Me+"' property when initializing the app?")}function qBt(){return new rs(ns.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function WBt(){return new rs(ns.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function GBt(e){return new rs(ns.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Sq(e){return new rs(ns.INVALID_ARGUMENT,e)}function wMe(){return new rs(ns.APP_DELETED,"The Firebase app was deleted.")}function YBt(e){return new rs(ns.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function S2(e,t){return new rs(ns.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function EC(e){throw new rs(ns.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=eu.makeFromUrl(t,n)}catch{return new eu(t,"")}if(r.path==="")return r;throw VBt(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===bMe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),b=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<b.length;w++){const E=b[w],x=E.regex.exec(t);if(x){const S=x[E.indices.bucket];let C=x[E.indices.path];C||(C=""),r=new eu(S,C),E.postModify(r);break}}if(r==null)throw zBt(t);return r}}class KBt{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XBt(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function QBt(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JBt(e){return e!==void 0}function ZBt(e){return typeof e=="object"&&!Array.isArray(e)}function ote(e){return typeof e=="string"||e instanceof String}function cge(e){return ate()&&e instanceof Blob}function ate(){return typeof Blob<"u"}function Tq(e,t,n,r){if(r<t)throw Sq(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw Sq(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function EMe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Q1;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Q1||(Q1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e8t(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8t{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new nP(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Q1.NO_ERROR,u=s.getStatus();if(!a||e8t(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===Q1.ABORT;r(!1,new nP(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new nP(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());JBt(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=ste();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?wMe():UBt();o(u)}else{const u=BBt();o(u)}};this.canceled_?n(!1,new nP(!1,null,!0)):this.backoffId_=XBt(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&QBt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class nP{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function n8t(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function r8t(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function i8t(e,t){t&&(e["X-Firebase-GMPID"]=t)}function s8t(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function o8t(e,t,n,r,i,s,o=!0){const a=EMe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return i8t(l,t),n8t(l,n),r8t(l,s),s8t(l,r),new t8t(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a8t(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function u8t(...e){const t=a8t();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(ate())return new Blob(e);throw new rs(ns.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function l8t(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c8t(e){if(typeof atob>"u")throw GBt("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class mU{constructor(t,n){this.data=t,this.contentType=n||null}}function f8t(e,t){switch(e){case _h.RAW:return new mU(xMe(t));case _h.BASE64:case _h.BASE64URL:return new mU(SMe(e,t));case _h.DATA_URL:return new mU(h8t(t),p8t(t))}throw ste()}function xMe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function d8t(e){let t;try{t=decodeURIComponent(e)}catch{throw S2(_h.DATA_URL,"Malformed data URL.")}return xMe(t)}function SMe(e,t){switch(e){case _h.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw S2(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case _h.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw S2(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=c8t(t)}catch(i){throw i.message.includes("polyfill")?i:S2(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class TMe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw S2(_h.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=m8t(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function h8t(e){const t=new TMe(e);return t.base64?SMe(_h.BASE64,t.rest):d8t(t.rest)}function p8t(e){return new TMe(e).contentType}function m8t(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(t,n){let r=0,i="";cge(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(cge(this.data_)){const r=this.data_,i=l8t(r,t,n);return i===null?null:new f0(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new f0(r,!0)}}static getBlob(...t){if(ate()){const n=t.map(r=>r instanceof f0?r.data_:r);return new f0(u8t.apply(null,n))}else{const n=t.map(o=>ote(o)?f8t(_h.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new f0(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ute(e){let t;try{t=JSON.parse(e)}catch{return null}return ZBt(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g8t(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function y8t(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function CMe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v8t(e,t){return t}class za{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||v8t}}let rP=null;function b8t(e){return!ote(e)||e.length<2?e:CMe(e)}function AMe(){if(rP)return rP;const e=[];e.push(new za("bucket")),e.push(new za("generation")),e.push(new za("metageneration")),e.push(new za("name","fullPath",!0));function t(s,o){return b8t(o)}const n=new za("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new za("size");return i.xform=r,e.push(i),e.push(new za("timeCreated")),e.push(new za("updated")),e.push(new za("md5Hash",null,!0)),e.push(new za("cacheControl",null,!0)),e.push(new za("contentDisposition",null,!0)),e.push(new za("contentEncoding",null,!0)),e.push(new za("contentLanguage",null,!0)),e.push(new za("contentType",null,!0)),e.push(new za("metadata","customMetadata",!0)),rP=e,rP}function _8t(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new eu(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function w8t(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return _8t(r,e),r}function IMe(e,t,n){const r=ute(t);return r===null?null:w8t(e,r,n)}function E8t(e,t,n,r){const i=ute(t);if(i===null||!ote(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=BR(d,n,r),p=EMe({alt:"media",token:l});return h+p})[0]}function x8t(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fge="prefixes",dge="items";function S8t(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[fge])for(const i of n[fge]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new eu(t,s));r.prefixes.push(o)}if(n[dge])for(const i of n[dge]){const s=e._makeStorageReference(new eu(t,i.name));r.items.push(s)}return r}function T8t(e,t,n){const r=ute(n);return r===null?null:S8t(e,t,r)}class t5{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lte(e){if(!e)throw ste()}function C8t(e,t){function n(r,i){const s=IMe(e,i,t);return lte(s!==null),s}return n}function A8t(e,t){function n(r,i){const s=T8t(e,t,i);return lte(s!==null),s}return n}function I8t(e,t){function n(r,i){const s=IMe(e,i,t);return lte(s!==null),E8t(s,i,e.host,e._protocol)}return n}function cte(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=FBt():i=LBt():n.getStatus()===402?i=MBt(e.bucket):n.getStatus()===403?i=jBt(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function kMe(e){const t=cte(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=$Bt(e.path)),s.serverResponse=i.serverResponse,s}return n}function k8t(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=BR(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new t5(a,u,A8t(e,t.bucket),l);return c.urlParams=s,c.errorHandler=cte(t),c}function R8t(e,t,n){const r=t.fullServerUrl(),i=BR(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new t5(i,s,I8t(e,n),o);return a.errorHandler=kMe(t),a}function N8t(e,t){const n=t.fullServerUrl(),r=BR(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new t5(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=kMe(t),a}function D8t(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function P8t(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=D8t(null,t)),r}function O8t(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let w=0;w<2;w++)b=b+Math.random().toString().slice(2);return b}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=P8t(t,r,i),c=x8t(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=f0.getBlob(f,r,d);if(h===null)throw qBt();const p={name:l.fullPath},m=BR(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new t5(m,g,C8t(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=cte(t),v}class $8t{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Q1.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Q1.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Q1.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw EC("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw EC("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw EC("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw EC("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw EC("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class M8t extends $8t{initXhr(){this.xhr_.responseType="text"}}function n5(){return new M8t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(t,n){this._service=t,n instanceof eu?this._location=n:this._location=eu.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new Nb(t,n)}get root(){const t=new eu(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return CMe(this._location.path)}get storage(){return this._service}get parent(){const t=g8t(this._location.path);if(t===null)return null;const n=new eu(this._location.bucket,t);return new Nb(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw YBt(t)}}function L8t(e,t,n){e._throwIfRoot("uploadBytes");const r=O8t(e.storage,e._location,AMe(),new f0(t,!0),n);return e.storage.makeRequestWithTokens(r,n5).then(i=>({metadata:i,ref:e}))}function F8t(e){const t={prefixes:[],items:[]};return RMe(e,t).then(()=>t)}async function RMe(e,t,n){const i=await j8t(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await RMe(e,t,i.nextPageToken)}function j8t(e,t){t!=null&&typeof t.maxResults=="number"&&Tq("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=k8t(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,n5)}function B8t(e){e._throwIfRoot("getDownloadURL");const t=R8t(e.storage,e._location,AMe());return e.storage.makeRequestWithTokens(t,n5).then(n=>{if(n===null)throw WBt();return n})}function U8t(e){e._throwIfRoot("deleteObject");const t=N8t(e.storage,e._location);return e.storage.makeRequestWithTokens(t,n5)}function z8t(e,t){const n=y8t(e._location.path,t),r=new eu(e._location.bucket,n);return new Nb(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V8t(e){return/^[A-Za-z]+:\/\//.test(e)}function H8t(e,t){return new Nb(e,t)}function NMe(e,t){if(e instanceof fte){const n=e;if(n._bucket==null)throw HBt();const r=new Nb(n,n._bucket);return t!=null?NMe(r,t):r}else return t!==void 0?z8t(e,t):e}function q8t(e,t){if(t&&V8t(t)){if(e instanceof fte)return H8t(e,t);throw Sq("To use ref(service, url), the first argument must be a Storage instance.")}else return NMe(e,t)}function hge(e,t){const n=t==null?void 0:t[_Me];return n==null?null:eu.makeFromBucketSpec(n,e)}function W8t(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:r4t(i,e.app.options.projectId))}class fte{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=bMe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=PBt,this._maxUploadRetryTime=OBt,this._requests=new Set,i!=null?this._bucket=eu.makeFromBucketSpec(i,this._host):this._bucket=hge(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=eu.makeFromBucketSpec(this._url,t):this._bucket=hge(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Tq("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Tq("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Nb(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new KBt(wMe());{const o=o8t(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const pge="@firebase/storage",mge="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DMe="storage";function gU(e,t,n){return e=li(e),L8t(e,t,n)}function xC(e){return e=li(e),F8t(e)}function yU(e){return e=li(e),B8t(e)}function gge(e){return e=li(e),U8t(e)}function _c(e,t){return e=li(e),q8t(e,t)}function G8t(e=Kee(),t){e=li(e);const r=hT(e,DMe).getImmediate({identifier:t}),i=n4t("storage");return i&&Y8t(r,...i),r}function Y8t(e,t,n,r={}){W8t(e,t,n,r)}function K8t(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new fte(n,r,i,t,__)}function X8t(){Jm(new Kh(DMe,K8t,"PUBLIC").setMultipleInstances(!0)),id(pge,mge,""),id(pge,mge,"esm2017")}X8t();var yge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var J1,PMe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(S,C){function I(){}I.prototype=C.prototype,S.D=C.prototype,S.prototype=new I,S.prototype.constructor=S,S.C=function(k,R,O){for(var P=Array(arguments.length-2),$=2;$<arguments.length;$++)P[$-2]=arguments[$];return C.prototype[R].apply(k,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,C,I){I||(I=0);var k=Array(16);if(typeof C=="string")for(var R=0;16>R;++R)k[R]=C.charCodeAt(I++)|C.charCodeAt(I++)<<8|C.charCodeAt(I++)<<16|C.charCodeAt(I++)<<24;else for(R=0;16>R;++R)k[R]=C[I++]|C[I++]<<8|C[I++]<<16|C[I++]<<24;C=S.g[0],I=S.g[1],R=S.g[2];var O=S.g[3],P=C+(O^I&(R^O))+k[0]+3614090360&4294967295;C=I+(P<<7&4294967295|P>>>25),P=O+(R^C&(I^R))+k[1]+3905402710&4294967295,O=C+(P<<12&4294967295|P>>>20),P=R+(I^O&(C^I))+k[2]+606105819&4294967295,R=O+(P<<17&4294967295|P>>>15),P=I+(C^R&(O^C))+k[3]+3250441966&4294967295,I=R+(P<<22&4294967295|P>>>10),P=C+(O^I&(R^O))+k[4]+4118548399&4294967295,C=I+(P<<7&4294967295|P>>>25),P=O+(R^C&(I^R))+k[5]+1200080426&4294967295,O=C+(P<<12&4294967295|P>>>20),P=R+(I^O&(C^I))+k[6]+2821735955&4294967295,R=O+(P<<17&4294967295|P>>>15),P=I+(C^R&(O^C))+k[7]+4249261313&4294967295,I=R+(P<<22&4294967295|P>>>10),P=C+(O^I&(R^O))+k[8]+1770035416&4294967295,C=I+(P<<7&4294967295|P>>>25),P=O+(R^C&(I^R))+k[9]+2336552879&4294967295,O=C+(P<<12&4294967295|P>>>20),P=R+(I^O&(C^I))+k[10]+4294925233&4294967295,R=O+(P<<17&4294967295|P>>>15),P=I+(C^R&(O^C))+k[11]+2304563134&4294967295,I=R+(P<<22&4294967295|P>>>10),P=C+(O^I&(R^O))+k[12]+1804603682&4294967295,C=I+(P<<7&4294967295|P>>>25),P=O+(R^C&(I^R))+k[13]+4254626195&4294967295,O=C+(P<<12&4294967295|P>>>20),P=R+(I^O&(C^I))+k[14]+2792965006&4294967295,R=O+(P<<17&4294967295|P>>>15),P=I+(C^R&(O^C))+k[15]+1236535329&4294967295,I=R+(P<<22&4294967295|P>>>10),P=C+(R^O&(I^R))+k[1]+4129170786&4294967295,C=I+(P<<5&4294967295|P>>>27),P=O+(I^R&(C^I))+k[6]+3225465664&4294967295,O=C+(P<<9&4294967295|P>>>23),P=R+(C^I&(O^C))+k[11]+643717713&4294967295,R=O+(P<<14&4294967295|P>>>18),P=I+(O^C&(R^O))+k[0]+3921069994&4294967295,I=R+(P<<20&4294967295|P>>>12),P=C+(R^O&(I^R))+k[5]+3593408605&4294967295,C=I+(P<<5&4294967295|P>>>27),P=O+(I^R&(C^I))+k[10]+38016083&4294967295,O=C+(P<<9&4294967295|P>>>23),P=R+(C^I&(O^C))+k[15]+3634488961&4294967295,R=O+(P<<14&4294967295|P>>>18),P=I+(O^C&(R^O))+k[4]+3889429448&4294967295,I=R+(P<<20&4294967295|P>>>12),P=C+(R^O&(I^R))+k[9]+568446438&4294967295,C=I+(P<<5&4294967295|P>>>27),P=O+(I^R&(C^I))+k[14]+3275163606&4294967295,O=C+(P<<9&4294967295|P>>>23),P=R+(C^I&(O^C))+k[3]+4107603335&4294967295,R=O+(P<<14&4294967295|P>>>18),P=I+(O^C&(R^O))+k[8]+1163531501&4294967295,I=R+(P<<20&4294967295|P>>>12),P=C+(R^O&(I^R))+k[13]+2850285829&4294967295,C=I+(P<<5&4294967295|P>>>27),P=O+(I^R&(C^I))+k[2]+4243563512&4294967295,O=C+(P<<9&4294967295|P>>>23),P=R+(C^I&(O^C))+k[7]+1735328473&4294967295,R=O+(P<<14&4294967295|P>>>18),P=I+(O^C&(R^O))+k[12]+2368359562&4294967295,I=R+(P<<20&4294967295|P>>>12),P=C+(I^R^O)+k[5]+4294588738&4294967295,C=I+(P<<4&4294967295|P>>>28),P=O+(C^I^R)+k[8]+2272392833&4294967295,O=C+(P<<11&4294967295|P>>>21),P=R+(O^C^I)+k[11]+1839030562&4294967295,R=O+(P<<16&4294967295|P>>>16),P=I+(R^O^C)+k[14]+4259657740&4294967295,I=R+(P<<23&4294967295|P>>>9),P=C+(I^R^O)+k[1]+2763975236&4294967295,C=I+(P<<4&4294967295|P>>>28),P=O+(C^I^R)+k[4]+1272893353&4294967295,O=C+(P<<11&4294967295|P>>>21),P=R+(O^C^I)+k[7]+4139469664&4294967295,R=O+(P<<16&4294967295|P>>>16),P=I+(R^O^C)+k[10]+3200236656&4294967295,I=R+(P<<23&4294967295|P>>>9),P=C+(I^R^O)+k[13]+681279174&4294967295,C=I+(P<<4&4294967295|P>>>28),P=O+(C^I^R)+k[0]+3936430074&4294967295,O=C+(P<<11&4294967295|P>>>21),P=R+(O^C^I)+k[3]+3572445317&4294967295,R=O+(P<<16&4294967295|P>>>16),P=I+(R^O^C)+k[6]+76029189&4294967295,I=R+(P<<23&4294967295|P>>>9),P=C+(I^R^O)+k[9]+3654602809&4294967295,C=I+(P<<4&4294967295|P>>>28),P=O+(C^I^R)+k[12]+3873151461&4294967295,O=C+(P<<11&4294967295|P>>>21),P=R+(O^C^I)+k[15]+530742520&4294967295,R=O+(P<<16&4294967295|P>>>16),P=I+(R^O^C)+k[2]+3299628645&4294967295,I=R+(P<<23&4294967295|P>>>9),P=C+(R^(I|~O))+k[0]+4096336452&4294967295,C=I+(P<<6&4294967295|P>>>26),P=O+(I^(C|~R))+k[7]+1126891415&4294967295,O=C+(P<<10&4294967295|P>>>22),P=R+(C^(O|~I))+k[14]+2878612391&4294967295,R=O+(P<<15&4294967295|P>>>17),P=I+(O^(R|~C))+k[5]+4237533241&4294967295,I=R+(P<<21&4294967295|P>>>11),P=C+(R^(I|~O))+k[12]+1700485571&4294967295,C=I+(P<<6&4294967295|P>>>26),P=O+(I^(C|~R))+k[3]+2399980690&4294967295,O=C+(P<<10&4294967295|P>>>22),P=R+(C^(O|~I))+k[10]+4293915773&4294967295,R=O+(P<<15&4294967295|P>>>17),P=I+(O^(R|~C))+k[1]+2240044497&4294967295,I=R+(P<<21&4294967295|P>>>11),P=C+(R^(I|~O))+k[8]+1873313359&4294967295,C=I+(P<<6&4294967295|P>>>26),P=O+(I^(C|~R))+k[15]+4264355552&4294967295,O=C+(P<<10&4294967295|P>>>22),P=R+(C^(O|~I))+k[6]+2734768916&4294967295,R=O+(P<<15&4294967295|P>>>17),P=I+(O^(R|~C))+k[13]+1309151649&4294967295,I=R+(P<<21&4294967295|P>>>11),P=C+(R^(I|~O))+k[4]+4149444226&4294967295,C=I+(P<<6&4294967295|P>>>26),P=O+(I^(C|~R))+k[11]+3174756917&4294967295,O=C+(P<<10&4294967295|P>>>22),P=R+(C^(O|~I))+k[2]+718787259&4294967295,R=O+(P<<15&4294967295|P>>>17),P=I+(O^(R|~C))+k[9]+3951481745&4294967295,S.g[0]=S.g[0]+C&4294967295,S.g[1]=S.g[1]+(R+(P<<21&4294967295|P>>>11))&4294967295,S.g[2]=S.g[2]+R&4294967295,S.g[3]=S.g[3]+O&4294967295}r.prototype.u=function(S,C){C===void 0&&(C=S.length);for(var I=C-this.blockSize,k=this.B,R=this.h,O=0;O<C;){if(R==0)for(;O<=I;)i(this,S,O),O+=this.blockSize;if(typeof S=="string"){for(;O<C;)if(k[R++]=S.charCodeAt(O++),R==this.blockSize){i(this,k),R=0;break}}else for(;O<C;)if(k[R++]=S[O++],R==this.blockSize){i(this,k),R=0;break}}this.h=R,this.o+=C},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var C=1;C<S.length-8;++C)S[C]=0;var I=8*this.o;for(C=S.length-8;C<S.length;++C)S[C]=I&255,I/=256;for(this.u(S),S=Array(16),C=I=0;4>C;++C)for(var k=0;32>k;k+=8)S[I++]=this.g[C]>>>k&255;return S};function s(S,C){var I=a;return Object.prototype.hasOwnProperty.call(I,S)?I[S]:I[S]=C(S)}function o(S,C){this.h=C;for(var I=[],k=!0,R=S.length-1;0<=R;R--){var O=S[R]|0;k&&O==C||(I[R]=O,k=!1)}this.g=I}var a={};function u(S){return-128<=S&&128>S?s(S,function(C){return new o([C|0],0>C?-1:0)}):new o([S|0],0>S?-1:0)}function l(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return g(l(-S));for(var C=[],I=1,k=0;S>=I;k++)C[k]=S/I|0,I*=4294967296;return new o(C,0)}function c(S,C){if(S.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(S.charAt(0)=="-")return g(c(S.substring(1),C));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(C,8)),k=f,R=0;R<S.length;R+=8){var O=Math.min(8,S.length-R),P=parseInt(S.substring(R,R+O),C);8>O?(O=l(Math.pow(C,O)),k=k.j(O).add(l(P))):(k=k.j(I),k=k.add(l(P)))}return k}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var S=0,C=1,I=0;I<this.g.length;I++){var k=this.i(I);S+=(0<=k?k:4294967296+k)*C,C*=4294967296}return S},e.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(p(this))return"0";if(m(this))return"-"+g(this).toString(S);for(var C=l(Math.pow(S,6)),I=this,k="";;){var R=w(I,C).g;I=y(I,R.j(C));var O=((0<I.g.length?I.g[0]:I.h)>>>0).toString(S);if(I=R,p(I))return O+k;for(;6>O.length;)O="0"+O;k=O+k}},e.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function p(S){if(S.h!=0)return!1;for(var C=0;C<S.g.length;C++)if(S.g[C]!=0)return!1;return!0}function m(S){return S.h==-1}e.l=function(S){return S=y(this,S),m(S)?-1:p(S)?0:1};function g(S){for(var C=S.g.length,I=[],k=0;k<C;k++)I[k]=~S.g[k];return new o(I,~S.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(S){for(var C=Math.max(this.g.length,S.g.length),I=[],k=0,R=0;R<=C;R++){var O=k+(this.i(R)&65535)+(S.i(R)&65535),P=(O>>>16)+(this.i(R)>>>16)+(S.i(R)>>>16);k=P>>>16,O&=65535,P&=65535,I[R]=P<<16|O}return new o(I,I[I.length-1]&-2147483648?-1:0)};function y(S,C){return S.add(g(C))}e.j=function(S){if(p(this)||p(S))return f;if(m(this))return m(S)?g(this).j(g(S)):g(g(this).j(S));if(m(S))return g(this.j(g(S)));if(0>this.l(h)&&0>S.l(h))return l(this.m()*S.m());for(var C=this.g.length+S.g.length,I=[],k=0;k<2*C;k++)I[k]=0;for(k=0;k<this.g.length;k++)for(var R=0;R<S.g.length;R++){var O=this.i(k)>>>16,P=this.i(k)&65535,$=S.i(R)>>>16,L=S.i(R)&65535;I[2*k+2*R]+=P*L,v(I,2*k+2*R),I[2*k+2*R+1]+=O*L,v(I,2*k+2*R+1),I[2*k+2*R+1]+=P*$,v(I,2*k+2*R+1),I[2*k+2*R+2]+=O*$,v(I,2*k+2*R+2)}for(k=0;k<C;k++)I[k]=I[2*k+1]<<16|I[2*k];for(k=C;k<2*C;k++)I[k]=0;return new o(I,0)};function v(S,C){for(;(S[C]&65535)!=S[C];)S[C+1]+=S[C]>>>16,S[C]&=65535,C++}function b(S,C){this.g=S,this.h=C}function w(S,C){if(p(C))throw Error("division by zero");if(p(S))return new b(f,f);if(m(S))return C=w(g(S),C),new b(g(C.g),g(C.h));if(m(C))return C=w(S,g(C)),new b(g(C.g),C.h);if(30<S.g.length){if(m(S)||m(C))throw Error("slowDivide_ only works with positive integers.");for(var I=d,k=C;0>=k.l(S);)I=E(I),k=E(k);var R=x(I,1),O=x(k,1);for(k=x(k,2),I=x(I,2);!p(k);){var P=O.add(k);0>=P.l(S)&&(R=R.add(I),O=P),k=x(k,1),I=x(I,1)}return C=y(S,R.j(C)),new b(R,C)}for(R=f;0<=S.l(C);){for(I=Math.max(1,Math.floor(S.m()/C.m())),k=Math.ceil(Math.log(I)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),O=l(I),P=O.j(C);m(P)||0<P.l(S);)I-=k,O=l(I),P=O.j(C);p(O)&&(O=d),R=R.add(O),S=y(S,P)}return new b(R,S)}e.A=function(S){return w(this,S).h},e.and=function(S){for(var C=Math.max(this.g.length,S.g.length),I=[],k=0;k<C;k++)I[k]=this.i(k)&S.i(k);return new o(I,this.h&S.h)},e.or=function(S){for(var C=Math.max(this.g.length,S.g.length),I=[],k=0;k<C;k++)I[k]=this.i(k)|S.i(k);return new o(I,this.h|S.h)},e.xor=function(S){for(var C=Math.max(this.g.length,S.g.length),I=[],k=0;k<C;k++)I[k]=this.i(k)^S.i(k);return new o(I,this.h^S.h)};function E(S){for(var C=S.g.length+1,I=[],k=0;k<C;k++)I[k]=S.i(k)<<1|S.i(k-1)>>>31;return new o(I,S.h)}function x(S,C){var I=C>>5;C%=32;for(var k=S.g.length-I,R=[],O=0;O<k;O++)R[O]=0<C?S.i(O+I)>>>C|S.i(O+I+1)<<32-C:S.i(O+I);return new o(R,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,PMe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,J1=o}).apply(typeof yge<"u"?yge:typeof self<"u"?self:typeof window<"u"?window:{});var iP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var OMe,$Me,vA,MMe,DO,Cq,LMe,FMe,jMe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(T,F,H){return T==Array.prototype||T==Object.prototype||(T[F]=H.value),T};function n(T){T=[typeof globalThis=="object"&&globalThis,T,typeof window=="object"&&window,typeof self=="object"&&self,typeof iP=="object"&&iP];for(var F=0;F<T.length;++F){var H=T[F];if(H&&H.Math==Math)return H}throw Error("Cannot find global object")}var r=n(this);function i(T,F){if(F)e:{var H=r;T=T.split(".");for(var Q=0;Q<T.length-1;Q++){var we=T[Q];if(!(we in H))break e;H=H[we]}T=T[T.length-1],Q=H[T],F=F(Q),F!=Q&&F!=null&&t(H,T,{configurable:!0,writable:!0,value:F})}}function s(T,F){T instanceof String&&(T+="");var H=0,Q=!1,we={next:function(){if(!Q&&H<T.length){var Pe=H++;return{value:F(Pe,T[Pe]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return we[Symbol.iterator]=function(){return we},we}i("Array.prototype.values",function(T){return T||function(){return s(this,function(F,H){return H})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(T){var F=typeof T;return F=F!="object"?F:T?Array.isArray(T)?"array":F:"null",F=="array"||F=="object"&&typeof T.length=="number"}function l(T){var F=typeof T;return F=="object"&&T!=null||F=="function"}function c(T,F,H){return T.call.apply(T.bind,arguments)}function f(T,F,H){if(!T)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var we=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(we,Q),T.apply(F,we)}}return function(){return T.apply(F,arguments)}}function d(T,F,H){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(T,F){var H=Array.prototype.slice.call(arguments,1);return function(){var Q=H.slice();return Q.push.apply(Q,arguments),T.apply(this,Q)}}function p(T,F){function H(){}H.prototype=F.prototype,T.aa=F.prototype,T.prototype=new H,T.prototype.constructor=T,T.Qb=function(Q,we,Pe){for(var dt=Array(arguments.length-2),Jr=2;Jr<arguments.length;Jr++)dt[Jr-2]=arguments[Jr];return F.prototype[we].apply(Q,dt)}}function m(T){const F=T.length;if(0<F){const H=Array(F);for(let Q=0;Q<F;Q++)H[Q]=T[Q];return H}return[]}function g(T,F){for(let H=1;H<arguments.length;H++){const Q=arguments[H];if(u(Q)){const we=T.length||0,Pe=Q.length||0;T.length=we+Pe;for(let dt=0;dt<Pe;dt++)T[we+dt]=Q[dt]}else T.push(Q)}}class y{constructor(F,H){this.i=F,this.j=H,this.h=0,this.g=null}get(){let F;return 0<this.h?(this.h--,F=this.g,this.g=F.next,F.next=null):F=this.i(),F}}function v(T){return/^[\s\xa0]*$/.test(T)}function b(){var T=a.navigator;return T&&(T=T.userAgent)?T:""}function w(T){return w[" "](T),T}w[" "]=function(){};var E=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function x(T,F,H){for(const Q in T)F.call(H,T[Q],Q,T)}function S(T,F){for(const H in T)F.call(void 0,T[H],H,T)}function C(T){const F={};for(const H in T)F[H]=T[H];return F}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(T,F){let H,Q;for(let we=1;we<arguments.length;we++){Q=arguments[we];for(H in Q)T[H]=Q[H];for(let Pe=0;Pe<I.length;Pe++)H=I[Pe],Object.prototype.hasOwnProperty.call(Q,H)&&(T[H]=Q[H])}}function R(T){var F=1;T=T.split(":");const H=[];for(;0<F&&T.length;)H.push(T.shift()),F--;return T.length&&H.push(T.join(":")),H}function O(T){a.setTimeout(()=>{throw T},0)}function P(){var T=V;let F=null;return T.g&&(F=T.g,T.g=T.g.next,T.g||(T.h=null),F.next=null),F}class ${constructor(){this.h=this.g=null}add(F,H){const Q=L.get();Q.set(F,H),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var L=new y(()=>new M,T=>T.reset());class M{constructor(){this.next=this.g=this.h=null}set(F,H){this.h=F,this.g=H,this.next=null}reset(){this.next=this.g=this.h=null}}let B,U=!1,V=new $,D=()=>{const T=a.Promise.resolve(void 0);B=()=>{T.then(z)}};var z=()=>{for(var T;T=P();){try{T.h.call(T.g)}catch(H){O(H)}var F=L;F.j(T),100>F.h&&(F.h++,T.next=F.g,F.g=T)}U=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(T,F){this.type=T,this.g=this.target=F,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var q=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var T=!1,F=Object.defineProperty({},"passive",{get:function(){T=!0}});try{const H=()=>{};a.addEventListener("test",H,F),a.removeEventListener("test",H,F)}catch{}return T}();function G(T,F){if(j.call(this,T?T.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,T){var H=this.type=T.type,Q=T.changedTouches&&T.changedTouches.length?T.changedTouches[0]:null;if(this.target=T.target||T.srcElement,this.g=F,F=T.relatedTarget){if(E){e:{try{w(F.nodeName);var we=!0;break e}catch{}we=!1}we||(F=null)}}else H=="mouseover"?F=T.fromElement:H=="mouseout"&&(F=T.toElement);this.relatedTarget=F,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0),this.button=T.button,this.key=T.key||"",this.ctrlKey=T.ctrlKey,this.altKey=T.altKey,this.shiftKey=T.shiftKey,this.metaKey=T.metaKey,this.pointerId=T.pointerId||0,this.pointerType=typeof T.pointerType=="string"?T.pointerType:te[T.pointerType]||"",this.state=T.state,this.i=T,T.defaultPrevented&&G.aa.h.call(this)}}p(G,j);var te={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var T=this.i;T.preventDefault?T.preventDefault():T.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),fe=0;function de(T,F,H,Q,we){this.listener=T,this.proxy=null,this.src=F,this.type=H,this.capture=!!Q,this.ha=we,this.key=++fe,this.da=this.fa=!1}function ye(T){T.da=!0,T.listener=null,T.proxy=null,T.src=null,T.ha=null}function Ie(T){this.src=T,this.g={},this.h=0}Ie.prototype.add=function(T,F,H,Q,we){var Pe=T.toString();T=this.g[Pe],T||(T=this.g[Pe]=[],this.h++);var dt=qe(T,F,Q,we);return-1<dt?(F=T[dt],H||(F.fa=!1)):(F=new de(F,this.src,Pe,!!Q,we),F.fa=H,T.push(F)),F};function pe(T,F){var H=F.type;if(H in T.g){var Q=T.g[H],we=Array.prototype.indexOf.call(Q,F,void 0),Pe;(Pe=0<=we)&&Array.prototype.splice.call(Q,we,1),Pe&&(ye(F),T.g[H].length==0&&(delete T.g[H],T.h--))}}function qe(T,F,H,Q){for(var we=0;we<T.length;++we){var Pe=T[we];if(!Pe.da&&Pe.listener==F&&Pe.capture==!!H&&Pe.ha==Q)return we}return-1}var Ue="closure_lm_"+(1e6*Math.random()|0),vt={};function it(T,F,H,Q,we){if(Array.isArray(F)){for(var Pe=0;Pe<F.length;Pe++)it(T,F[Pe],H,Q,we);return null}return H=bt(H),T&&T[le]?T.K(F,H,l(Q)?!!Q.capture:!!Q,we):_e(T,F,H,!1,Q,we)}function _e(T,F,H,Q,we,Pe){if(!F)throw Error("Invalid event type");var dt=l(we)?!!we.capture:!!we,Jr=ve(T);if(Jr||(T[Ue]=Jr=new Ie(T)),H=Jr.add(F,H,Q,dt,Pe),H.proxy)return H;if(Q=ke(),H.proxy=Q,Q.src=T,Q.listener=H,T.addEventListener)q||(we=dt),we===void 0&&(we=!1),T.addEventListener(F.toString(),Q,we);else if(T.attachEvent)T.attachEvent(Mt(F.toString()),Q);else if(T.addListener&&T.removeListener)T.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return H}function ke(){function T(H){return F.call(T.src,T.listener,H)}const F=Ye;return T}function Ve(T,F,H,Q,we){if(Array.isArray(F))for(var Pe=0;Pe<F.length;Pe++)Ve(T,F[Pe],H,Q,we);else Q=l(Q)?!!Q.capture:!!Q,H=bt(H),T&&T[le]?(T=T.i,F=String(F).toString(),F in T.g&&(Pe=T.g[F],H=qe(Pe,H,Q,we),-1<H&&(ye(Pe[H]),Array.prototype.splice.call(Pe,H,1),Pe.length==0&&(delete T.g[F],T.h--)))):T&&(T=ve(T))&&(F=T.g[F.toString()],T=-1,F&&(T=qe(F,H,Q,we)),(H=-1<T?F[T]:null)&&ct(H))}function ct(T){if(typeof T!="number"&&T&&!T.da){var F=T.src;if(F&&F[le])pe(F.i,T);else{var H=T.type,Q=T.proxy;F.removeEventListener?F.removeEventListener(H,Q,T.capture):F.detachEvent?F.detachEvent(Mt(H),Q):F.addListener&&F.removeListener&&F.removeListener(Q),(H=ve(F))?(pe(H,T),H.h==0&&(H.src=null,F[Ue]=null)):ye(T)}}}function Mt(T){return T in vt?vt[T]:vt[T]="on"+T}function Ye(T,F){if(T.da)T=!0;else{F=new G(F,this);var H=T.listener,Q=T.ha||T.src;T.fa&&ct(T),T=H.call(Q,F)}return T}function ve(T){return T=T[Ue],T instanceof Ie?T:null}var pt="__closure_events_fn_"+(1e9*Math.random()>>>0);function bt(T){return typeof T=="function"?T:(T[pt]||(T[pt]=function(F){return T.handleEvent(F)}),T[pt])}function ge(){W.call(this),this.i=new Ie(this),this.M=this,this.F=null}p(ge,W),ge.prototype[le]=!0,ge.prototype.removeEventListener=function(T,F,H,Q){Ve(this,T,F,H,Q)};function Ae(T,F){var H,Q=T.F;if(Q)for(H=[];Q;Q=Q.F)H.push(Q);if(T=T.M,Q=F.type||F,typeof F=="string")F=new j(F,T);else if(F instanceof j)F.target=F.target||T;else{var we=F;F=new j(Q,T),k(F,we)}if(we=!0,H)for(var Pe=H.length-1;0<=Pe;Pe--){var dt=F.g=H[Pe];we=We(dt,Q,!0,F)&&we}if(dt=F.g=T,we=We(dt,Q,!0,F)&&we,we=We(dt,Q,!1,F)&&we,H)for(Pe=0;Pe<H.length;Pe++)dt=F.g=H[Pe],we=We(dt,Q,!1,F)&&we}ge.prototype.N=function(){if(ge.aa.N.call(this),this.i){var T=this.i,F;for(F in T.g){for(var H=T.g[F],Q=0;Q<H.length;Q++)ye(H[Q]);delete T.g[F],T.h--}}this.F=null},ge.prototype.K=function(T,F,H,Q){return this.i.add(String(T),F,!1,H,Q)},ge.prototype.L=function(T,F,H,Q){return this.i.add(String(T),F,!0,H,Q)};function We(T,F,H,Q){if(F=T.i.g[String(F)],!F)return!0;F=F.concat();for(var we=!0,Pe=0;Pe<F.length;++Pe){var dt=F[Pe];if(dt&&!dt.da&&dt.capture==H){var Jr=dt.listener,To=dt.ha||dt.src;dt.fa&&pe(T.i,dt),we=Jr.call(To,Q)!==!1&&we}}return we&&!Q.defaultPrevented}function ut(T,F,H){if(typeof T=="function")H&&(T=d(T,H));else if(T&&typeof T.handleEvent=="function")T=d(T.handleEvent,T);else throw Error("Invalid listener argument");return 2147483647<Number(F)?-1:a.setTimeout(T,F||0)}function wt(T){T.g=ut(()=>{T.g=null,T.i&&(T.i=!1,wt(T))},T.l);const F=T.h;T.h=null,T.m.apply(null,F)}class Bn extends W{constructor(F,H){super(),this.m=F,this.l=H,this.h=null,this.i=!1,this.g=null}j(F){this.h=arguments,this.g?this.i=!0:wt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kr(T){W.call(this),this.h=T,this.g={}}p(kr,W);var Un=[];function pr(T){x(T.g,function(F,H){this.g.hasOwnProperty(H)&&ct(F)},T),T.g={}}kr.prototype.N=function(){kr.aa.N.call(this),pr(this)},kr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bn=a.JSON.stringify,Rn=a.JSON.parse,or=class{stringify(T){return a.JSON.stringify(T,void 0)}parse(T){return a.JSON.parse(T,void 0)}};function ar(){}ar.prototype.h=null;function Jo(T){return T.h||(T.h=T.i())}function Ui(){}var Nn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zi(){j.call(this,"d")}p(zi,j);function Rr(){j.call(this,"c")}p(Rr,j);var _s={},kp=null;function bl(){return kp=kp||new ge}_s.La="serverreachability";function Pd(T){j.call(this,_s.La,T)}p(Pd,j);function Cr(T){const F=bl();Ae(F,new Pd(F))}_s.STAT_EVENT="statevent";function Pi(T,F){j.call(this,_s.STAT_EVENT,T),this.stat=F}p(Pi,j);function ni(T){const F=bl();Ae(F,new Pi(F,T))}_s.Ma="timingevent";function vu(T,F){j.call(this,_s.Ma,T),this.size=F}p(vu,j);function Ma(T,F){if(typeof T!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){T()},F)}function La(){this.g=!0}La.prototype.xa=function(){this.g=!1};function oe(T,F,H,Q,we,Pe){T.info(function(){if(T.g)if(Pe)for(var dt="",Jr=Pe.split("&"),To=0;To<Jr.length;To++){var mr=Jr[To].split("=");if(1<mr.length){var na=mr[0];mr=mr[1];var ra=na.split("_");dt=2<=ra.length&&ra[1]=="type"?dt+(na+"="+mr+"&"):dt+(na+"=redacted&")}}else dt=null;else dt=Pe;return"XMLHTTP REQ ("+Q+") [attempt "+we+"]: "+F+`
`+H+`
`+dt})}function ee(T,F,H,Q,we,Pe,dt){T.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+we+"]: "+F+`
`+H+`
`+Pe+" "+dt})}function ae(T,F,H,Q){T.info(function(){return"XMLHTTP TEXT ("+F+"): "+Se(T,H)+(Q?" "+Q:"")})}function Ce(T,F){T.info(function(){return"TIMEOUT: "+F})}La.prototype.info=function(){};function Se(T,F){if(!T.g)return F;if(!F)return null;try{var H=JSON.parse(F);if(H){for(T=0;T<H.length;T++)if(Array.isArray(H[T])){var Q=H[T];if(!(2>Q.length)){var we=Q[1];if(Array.isArray(we)&&!(1>we.length)){var Pe=we[0];if(Pe!="noop"&&Pe!="stop"&&Pe!="close")for(var dt=1;dt<we.length;dt++)we[dt]=""}}}}return bn(H)}catch{return F}}var ot={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gt;function Ln(){}p(Ln,ar),Ln.prototype.g=function(){return new XMLHttpRequest},Ln.prototype.i=function(){return{}},Gt=new Ln;function zn(T,F,H,Q){this.j=T,this.i=F,this.l=H,this.R=Q||1,this.U=new kr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new yn}function yn(){this.i=null,this.g="",this.h=!1}var ur={},Nr={};function Wt(T,F,H){T.L=1,T.v=Vn(Ke(F)),T.m=H,T.P=!0,lr(T,null)}function lr(T,F){T.F=Date.now(),Oi(T),T.A=Ke(T.v);var H=T.A,Q=T.R;Array.isArray(Q)||(Q=[String(Q)]),MN(H.i,"t",Q),T.C=0,H=T.j.J,T.h=new yn,T.g=Koe(T.j,H?F:null,!T.m),0<T.O&&(T.M=new Bn(d(T.Y,T,T.g),T.O)),F=T.U,H=T.g,Q=T.ca;var we="readystatechange";Array.isArray(we)||(we&&(Un[0]=we.toString()),we=Un);for(var Pe=0;Pe<we.length;Pe++){var dt=it(H,we[Pe],Q||F.handleEvent,!1,F.h||F);if(!dt)break;F.g[dt.key]=dt}F=T.H?C(T.H):{},T.m?(T.u||(T.u="POST"),F["Content-Type"]="application/x-www-form-urlencoded",T.g.ea(T.A,T.u,T.m,F)):(T.u="GET",T.g.ea(T.A,T.u,null,F)),Cr(),oe(T.i,T.u,T.A,T.l,T.R,T.m)}zn.prototype.ca=function(T){T=T.target;const F=this.M;F&&is(T)==3?F.j():this.Y(T)},zn.prototype.Y=function(T){try{if(T==this.g)e:{const ra=is(this.g);var F=this.g.Ba();const H_=this.g.Z();if(!(3>ra)&&(ra!=3||this.g&&(this.h.h||this.g.oa()||ta(this.g)))){this.J||ra!=4||F==7||(F==8||0>=H_?Cr(3):Cr(2)),ri(this);var H=this.g.Z();this.X=H;t:if(Kr(this)){var Q=ta(this.g);T="";var we=Q.length,Pe=is(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vi(this),So(this);var dt="";break t}this.h.i=new a.TextDecoder}for(F=0;F<we;F++)this.h.h=!0,T+=this.h.i.decode(Q[F],{stream:!(Pe&&F==we-1)});Q.length=0,this.h.g+=T,this.C=0,dt=this.h.g}else dt=this.g.oa();if(this.o=H==200,ee(this.i,this.u,this.A,this.l,this.R,ra,H),this.o){if(this.T&&!this.K){t:{if(this.g){var Jr,To=this.g;if((Jr=To.g?To.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Jr)){var mr=Jr;break t}}mr=null}if(H=mr)ae(this.i,this.l,H,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hi(this,H);else{this.o=!1,this.s=3,ni(12),Vi(this),So(this);break e}}if(this.P){H=!0;let vf;for(;!this.J&&this.C<dt.length;)if(vf=nr(this,dt),vf==Nr){ra==4&&(this.s=4,ni(14),H=!1),ae(this.i,this.l,null,"[Incomplete Response]");break}else if(vf==ur){this.s=4,ni(15),ae(this.i,this.l,dt,"[Invalid Chunk]"),H=!1;break}else ae(this.i,this.l,vf,null),Hi(this,vf);if(Kr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ra!=4||dt.length!=0||this.h.h||(this.s=1,ni(16),H=!1),this.o=this.o&&H,!H)ae(this.i,this.l,dt,"[Invalid Chunked Response]"),Vi(this),So(this);else if(0<dt.length&&!this.W){this.W=!0;var na=this.j;na.g==this&&na.ba&&!na.M&&(na.j.info("Great, no buffering proxy detected. Bytes received: "+dt.length),wB(na),na.M=!0,ni(11))}}else ae(this.i,this.l,dt,null),Hi(this,dt);ra==4&&Vi(this),this.o&&!this.J&&(ra==4?qoe(this.j,this):(this.o=!1,Oi(this)))}else Nv(this.g),H==400&&0<dt.indexOf("Unknown SID")?(this.s=3,ni(12)):(this.s=0,ni(13)),Vi(this),So(this)}}}catch{}finally{}};function Kr(T){return T.g?T.u=="GET"&&T.L!=2&&T.j.Ca:!1}function nr(T,F){var H=T.C,Q=F.indexOf(`
`,H);return Q==-1?Nr:(H=Number(F.substring(H,Q)),isNaN(H)?ur:(Q+=1,Q+H>F.length?Nr:(F=F.slice(Q,Q+H),T.C=Q+H,F)))}zn.prototype.cancel=function(){this.J=!0,Vi(this)};function Oi(T){T.S=Date.now()+T.I,Xs(T,T.I)}function Xs(T,F){if(T.B!=null)throw Error("WatchDog timer not null");T.B=Ma(d(T.ba,T),F)}function ri(T){T.B&&(a.clearTimeout(T.B),T.B=null)}zn.prototype.ba=function(){this.B=null;const T=Date.now();0<=T-this.S?(Ce(this.i,this.A),this.L!=2&&(Cr(),ni(17)),Vi(this),this.s=2,So(this)):Xs(this,this.S-T)};function So(T){T.j.G==0||T.J||qoe(T.j,T)}function Vi(T){ri(T);var F=T.M;F&&typeof F.ma=="function"&&F.ma(),T.M=null,pr(T.U),T.g&&(F=T.g,T.g=null,F.abort(),F.ma())}function Hi(T,F){try{var H=T.j;if(H.G!=0&&(H.g==T||Od(H.h,T))){if(!T.K&&Od(H.h,T)&&H.G==3){try{var Q=H.Da.g.parse(F)}catch{Q=null}if(Array.isArray(Q)&&Q.length==3){var we=Q;if(we[0]==0){e:if(!H.u){if(H.g)if(H.g.F+3e3<T.F)VN(H),UN(H);else break e;_B(H),ni(18)}}else H.za=we[1],0<H.za-H.T&&37500>we[2]&&H.F&&H.v==0&&!H.C&&(H.C=Ma(d(H.Za,H),6e3));if(1>=pc(H.h)&&H.ca){try{H.ca()}catch{}H.ca=void 0}}else Dv(H,11)}else if((T.K||H.g==T)&&VN(H),!v(F))for(we=H.Da.g.parse(F),F=0;F<we.length;F++){let mr=we[F];if(H.T=mr[0],mr=mr[1],H.G==2)if(mr[0]=="c"){H.K=mr[1],H.ia=mr[2];const na=mr[3];na!=null&&(H.la=na,H.j.info("VER="+H.la));const ra=mr[4];ra!=null&&(H.Aa=ra,H.j.info("SVER="+H.Aa));const H_=mr[5];H_!=null&&typeof H_=="number"&&0<H_&&(Q=1.5*H_,H.L=Q,H.j.info("backChannelRequestTimeoutMs_="+Q)),Q=H;const vf=T.g;if(vf){const qN=vf.g?vf.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qN){var Pe=Q.h;Pe.g||qN.indexOf("spdy")==-1&&qN.indexOf("quic")==-1&&qN.indexOf("h2")==-1||(Pe.j=Pe.l,Pe.g=new Set,Pe.h&&(Y(Pe,Pe.h),Pe.h=null))}if(Q.D){const EB=vf.g?vf.g.getResponseHeader("X-HTTP-Session-Id"):null;EB&&(Q.ya=EB,Ot(Q.I,Q.D,EB))}}H.G=3,H.l&&H.l.ua(),H.ba&&(H.R=Date.now()-T.F,H.j.info("Handshake RTT: "+H.R+"ms")),Q=H;var dt=T;if(Q.qa=Yoe(Q,Q.J?Q.ia:null,Q.W),dt.K){se(Q.h,dt);var Jr=dt,To=Q.L;To&&(Jr.I=To),Jr.B&&(ri(Jr),Oi(Jr)),Q.g=dt}else Voe(Q);0<H.i.length&&zN(H)}else mr[0]!="stop"&&mr[0]!="close"||Dv(H,7);else H.G==3&&(mr[0]=="stop"||mr[0]=="close"?mr[0]=="stop"?Dv(H,7):z_(H):mr[0]!="noop"&&H.l&&H.l.ta(mr),H.v=0)}}Cr(4)}catch{}}var Zo=class{constructor(T,F){this.g=T,this.map=F}};function Fa(T){this.l=T||10,a.PerformanceNavigationTiming?(T=a.performance.getEntriesByType("navigation"),T=0<T.length&&(T[0].nextHopProtocol=="hq"||T[0].nextHopProtocol=="h2")):T=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=T?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qs(T){return T.h?!0:T.g?T.g.size>=T.j:!1}function pc(T){return T.h?1:T.g?T.g.size:0}function Od(T,F){return T.h?T.h==F:T.g?T.g.has(F):!1}function Y(T,F){T.g?T.g.add(F):T.h=F}function se(T,F){T.h&&T.h==F?T.h=null:T.g&&T.g.has(F)&&T.g.delete(F)}Fa.prototype.cancel=function(){if(this.i=Z(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const T of this.g.values())T.cancel();this.g.clear()}};function Z(T){if(T.h!=null)return T.i.concat(T.h.D);if(T.g!=null&&T.g.size!==0){let F=T.i;for(const H of T.g.values())F=F.concat(H.D);return F}return m(T.i)}function he(T){if(T.V&&typeof T.V=="function")return T.V();if(typeof Map<"u"&&T instanceof Map||typeof Set<"u"&&T instanceof Set)return Array.from(T.values());if(typeof T=="string")return T.split("");if(u(T)){for(var F=[],H=T.length,Q=0;Q<H;Q++)F.push(T[Q]);return F}F=[],H=0;for(Q in T)F[H++]=T[Q];return F}function be(T){if(T.na&&typeof T.na=="function")return T.na();if(!T.V||typeof T.V!="function"){if(typeof Map<"u"&&T instanceof Map)return Array.from(T.keys());if(!(typeof Set<"u"&&T instanceof Set)){if(u(T)||typeof T=="string"){var F=[];T=T.length;for(var H=0;H<T;H++)F.push(H);return F}F=[],H=0;for(const Q in T)F[H++]=Q;return F}}}function ce(T,F){if(T.forEach&&typeof T.forEach=="function")T.forEach(F,void 0);else if(u(T)||typeof T=="string")Array.prototype.forEach.call(T,F,void 0);else for(var H=be(T),Q=he(T),we=Q.length,Pe=0;Pe<we;Pe++)F.call(void 0,Q[Pe],H&&H[Pe],T)}var Oe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function He(T,F){if(T){T=T.split("&");for(var H=0;H<T.length;H++){var Q=T[H].indexOf("="),we=null;if(0<=Q){var Pe=T[H].substring(0,Q);we=T[H].substring(Q+1)}else Pe=T[H];F(Pe,we?decodeURIComponent(we.replace(/\+/g," ")):"")}}}function Ge(T){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,T instanceof Ge){this.h=T.h,st(this,T.j),this.o=T.o,this.g=T.g,xt(this,T.s),this.l=T.l;var F=T.i,H=new mc;H.i=F.i,F.g&&(H.g=new Map(F.g),H.h=F.h),vn(this,H),this.m=T.m}else T&&(F=String(T).match(Oe))?(this.h=!1,st(this,F[1]||"",!0),this.o=Dr(F[2]||""),this.g=Dr(F[3]||"",!0),xt(this,F[4]),this.l=Dr(F[5]||"",!0),vn(this,F[6]||"",!0),this.m=Dr(F[7]||"")):(this.h=!1,this.i=new mc(null,this.h))}Ge.prototype.toString=function(){var T=[],F=this.j;F&&T.push(Pr(F,$d,!0),":");var H=this.g;return(H||F=="file")&&(T.push("//"),(F=this.o)&&T.push(Pr(F,$d,!0),"@"),T.push(encodeURIComponent(String(H)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),H=this.s,H!=null&&T.push(":",String(H))),(H=this.l)&&(this.g&&H.charAt(0)!="/"&&T.push("/"),T.push(Pr(H,H.charAt(0)=="/"?BT:Rp,!0))),(H=this.i.toString())&&T.push("?",H),(H=this.m)&&T.push("#",Pr(H,$N)),T.join("")};function Ke(T){return new Ge(T)}function st(T,F,H){T.j=H?Dr(F,!0):F,T.j&&(T.j=T.j.replace(/:$/,""))}function xt(T,F){if(F){if(F=Number(F),isNaN(F)||0>F)throw Error("Bad port number "+F);T.s=F}else T.s=null}function vn(T,F,H){F instanceof mc?(T.i=F,UT(T.i,T.h)):(H||(F=Pr(F,Av)),T.i=new mc(F,T.h))}function Ot(T,F,H){T.i.set(F,H)}function Vn(T){return Ot(T,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),T}function Dr(T,F){return T?F?decodeURI(T.replace(/%25/g,"%2525")):decodeURIComponent(T):""}function Pr(T,F,H){return typeof T=="string"?(T=encodeURI(T).replace(F,ea),H&&(T=T.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T):null}function ea(T){return T=T.charCodeAt(0),"%"+(T>>4&15).toString(16)+(T&15).toString(16)}var $d=/[#\/\?@]/g,Rp=/[#\?:]/g,BT=/[#\?]/g,Av=/[#\?@]/g,$N=/#/g;function mc(T,F){this.h=this.g=null,this.i=T||null,this.j=!!F}function bu(T){T.g||(T.g=new Map,T.h=0,T.i&&He(T.i,function(F,H){T.add(decodeURIComponent(F.replace(/\+/g," ")),H)}))}e=mc.prototype,e.add=function(T,F){bu(this),this.i=null,T=Dp(this,T);var H=this.g.get(T);return H||this.g.set(T,H=[]),H.push(F),this.h+=1,this};function Np(T,F){bu(T),F=Dp(T,F),T.g.has(F)&&(T.i=null,T.h-=T.g.get(F).length,T.g.delete(F))}function B_(T,F){return bu(T),F=Dp(T,F),T.g.has(F)}e.forEach=function(T,F){bu(this),this.g.forEach(function(H,Q){H.forEach(function(we){T.call(F,we,Q,this)},this)},this)},e.na=function(){bu(this);const T=Array.from(this.g.values()),F=Array.from(this.g.keys()),H=[];for(let Q=0;Q<F.length;Q++){const we=T[Q];for(let Pe=0;Pe<we.length;Pe++)H.push(F[Q])}return H},e.V=function(T){bu(this);let F=[];if(typeof T=="string")B_(this,T)&&(F=F.concat(this.g.get(Dp(this,T))));else{T=Array.from(this.g.values());for(let H=0;H<T.length;H++)F=F.concat(T[H])}return F},e.set=function(T,F){return bu(this),this.i=null,T=Dp(this,T),B_(this,T)&&(this.h-=this.g.get(T).length),this.g.set(T,[F]),this.h+=1,this},e.get=function(T,F){return T?(T=this.V(T),0<T.length?String(T[0]):F):F};function MN(T,F,H){Np(T,F),0<H.length&&(T.i=null,T.g.set(Dp(T,F),m(H)),T.h+=H.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const T=[],F=Array.from(this.g.keys());for(var H=0;H<F.length;H++){var Q=F[H];const Pe=encodeURIComponent(String(Q)),dt=this.V(Q);for(Q=0;Q<dt.length;Q++){var we=Pe;dt[Q]!==""&&(we+="="+encodeURIComponent(String(dt[Q]))),T.push(we)}}return this.i=T.join("&")};function Dp(T,F){return F=String(F),T.j&&(F=F.toLowerCase()),F}function UT(T,F){F&&!T.j&&(bu(T),T.i=null,T.g.forEach(function(H,Q){var we=Q.toLowerCase();Q!=we&&(Np(this,Q),MN(this,we,H))},T)),T.j=F}function LN(T,F){const H=new La;if(a.Image){const Q=new Image;Q.onload=h(_u,H,"TestLoadImage: loaded",!0,F,Q),Q.onerror=h(_u,H,"TestLoadImage: error",!1,F,Q),Q.onabort=h(_u,H,"TestLoadImage: abort",!1,F,Q),Q.ontimeout=h(_u,H,"TestLoadImage: timeout",!1,F,Q),a.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=T}else F(!1)}function Pp(T,F){const H=new La,Q=new AbortController,we=setTimeout(()=>{Q.abort(),_u(H,"TestPingServer: timeout",!1,F)},1e4);fetch(T,{signal:Q.signal}).then(Pe=>{clearTimeout(we),Pe.ok?_u(H,"TestPingServer: ok",!0,F):_u(H,"TestPingServer: server error",!1,F)}).catch(()=>{clearTimeout(we),_u(H,"TestPingServer: error",!1,F)})}function _u(T,F,H,Q,we){try{we&&(we.onload=null,we.onerror=null,we.onabort=null,we.ontimeout=null),Q(H)}catch{}}function bB(){this.g=new or}function FN(T,F,H){const Q=H||"";try{ce(T,function(we,Pe){let dt=we;l(we)&&(dt=bn(we)),F.push(Q+Pe+"="+encodeURIComponent(dt))})}catch(we){throw F.push(Q+"type="+encodeURIComponent("_badmap")),we}}function Iv(T){this.l=T.Ub||null,this.j=T.eb||!1}p(Iv,ar),Iv.prototype.g=function(){return new kv(this.l,this.j)},Iv.prototype.i=function(T){return function(){return T}}({});function kv(T,F){ge.call(this),this.D=T,this.o=F,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(kv,ge),e=kv.prototype,e.open=function(T,F){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=T,this.A=F,this.readyState=1,Pg(this)},e.send=function(T){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const F={headers:this.u,method:this.B,credentials:this.m,cache:void 0};T&&(F.body=T),(this.D||a).fetch(new Request(this.A,F)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Rv(this)),this.readyState=0},e.Sa=function(T){if(this.g&&(this.l=T,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=T.headers,this.readyState=2,Pg(this)),this.g&&(this.readyState=3,Pg(this),this.g)))if(this.responseType==="arraybuffer")T.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in T){if(this.j=T.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jN(this)}else T.text().then(this.Ra.bind(this),this.ga.bind(this))};function jN(T){T.j.read().then(T.Pa.bind(T)).catch(T.ga.bind(T))}e.Pa=function(T){if(this.g){if(this.o&&T.value)this.response.push(T.value);else if(!this.o){var F=T.value?T.value:new Uint8Array(0);(F=this.v.decode(F,{stream:!T.done}))&&(this.response=this.responseText+=F)}T.done?Rv(this):Pg(this),this.readyState==3&&jN(this)}},e.Ra=function(T){this.g&&(this.response=this.responseText=T,Rv(this))},e.Qa=function(T){this.g&&(this.response=T,Rv(this))},e.ga=function(){this.g&&Rv(this)};function Rv(T){T.readyState=4,T.l=null,T.j=null,T.v=null,Pg(T)}e.setRequestHeader=function(T,F){this.u.append(T,F)},e.getResponseHeader=function(T){return this.h&&this.h.get(T.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const T=[],F=this.h.entries();for(var H=F.next();!H.done;)H=H.value,T.push(H[0]+": "+H[1]),H=F.next();return T.join(`\r
`)};function Pg(T){T.onreadystatechange&&T.onreadystatechange.call(T)}Object.defineProperty(kv.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(T){this.m=T?"include":"same-origin"}});function BN(T){let F="";return x(T,function(H,Q){F+=Q,F+=":",F+=H,F+=`\r
`}),F}function ne(T,F,H){e:{for(Q in H){var Q=!1;break e}Q=!0}Q||(H=BN(H),typeof T=="string"?H!=null&&encodeURIComponent(String(H)):Ot(T,F,H))}function ue(T){ge.call(this),this.headers=new Map,this.o=T||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ue,ge);var Re=/^https?$/i,It=["POST","PUT"];e=ue.prototype,e.Ha=function(T){this.J=T},e.ea=function(T,F,H,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+T);F=F?F.toUpperCase():"GET",this.D=T,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gt.g(),this.v=this.o?Jo(this.o):Jo(Gt),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(F,String(T),!0),this.B=!1}catch(Pe){Fn(this,Pe);return}if(T=H||"",H=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var we in Q)H.set(we,Q[we]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const Pe of Q.keys())H.set(Pe,Q.get(Pe));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(H.keys()).find(Pe=>Pe.toLowerCase()=="content-type"),we=a.FormData&&T instanceof a.FormData,!(0<=Array.prototype.indexOf.call(It,F,void 0))||Q||we||H.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Pe,dt]of H)this.g.setRequestHeader(Pe,dt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qr(this),this.u=!0,this.g.send(T),this.u=!1}catch(Pe){Fn(this,Pe)}};function Fn(T,F){T.h=!1,T.g&&(T.j=!0,T.g.abort(),T.j=!1),T.l=F,T.m=5,Ar(T),Hn(T)}function Ar(T){T.A||(T.A=!0,Ae(T,"complete"),Ae(T,"error"))}e.abort=function(T){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=T||7,Ae(this,"complete"),Ae(this,"abort"),Hn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hn(this,!0)),ue.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Xr(this):this.bb())},e.bb=function(){Xr(this)};function Xr(T){if(T.h&&typeof o<"u"&&(!T.v[1]||is(T)!=4||T.Z()!=2)){if(T.u&&is(T)==4)ut(T.Ea,0,T);else if(Ae(T,"readystatechange"),is(T)==4){T.h=!1;try{const dt=T.Z();e:switch(dt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var F=!0;break e;default:F=!1}var H;if(!(H=F)){var Q;if(Q=dt===0){var we=String(T.D).match(Oe)[1]||null;!we&&a.self&&a.self.location&&(we=a.self.location.protocol.slice(0,-1)),Q=!Re.test(we?we.toLowerCase():"")}H=Q}if(H)Ae(T,"complete"),Ae(T,"success");else{T.m=6;try{var Pe=2<is(T)?T.g.statusText:""}catch{Pe=""}T.l=Pe+" ["+T.Z()+"]",Ar(T)}}finally{Hn(T)}}}}function Hn(T,F){if(T.g){Qr(T);const H=T.g,Q=T.v[0]?()=>{}:null;T.g=null,T.v=null,F||Ae(T,"ready");try{H.onreadystatechange=Q}catch{}}}function Qr(T){T.I&&(a.clearTimeout(T.I),T.I=null)}e.isActive=function(){return!!this.g};function is(T){return T.g?T.g.readyState:0}e.Z=function(){try{return 2<is(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(T){if(this.g){var F=this.g.responseText;return T&&F.indexOf(T)==0&&(F=F.substring(T.length)),Rn(F)}};function ta(T){try{if(!T.g)return null;if("response"in T.g)return T.g.response;switch(T.H){case"":case"text":return T.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in T.g)return T.g.mozResponseArrayBuffer}return null}catch{return null}}function Nv(T){const F={};T=(T.g&&2<=is(T)&&T.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<T.length;Q++){if(v(T[Q]))continue;var H=R(T[Q]);const we=H[0];if(H=H[1],typeof H!="string")continue;H=H.trim();const Pe=F[we]||[];F[we]=Pe,Pe.push(H)}S(F,function(Q){return Q.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Op(T,F,H){return H&&H.internalChannelParams&&H.internalChannelParams[T]||F}function U_(T){this.Aa=0,this.i=[],this.j=new La,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Op("failFast",!1,T),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Op("baseRetryDelayMs",5e3,T),this.cb=Op("retryDelaySeedMs",1e4,T),this.Wa=Op("forwardChannelMaxRetries",2,T),this.wa=Op("forwardChannelRequestTimeoutMs",2e4,T),this.pa=T&&T.xmlHttpFactory||void 0,this.Xa=T&&T.Tb||void 0,this.Ca=T&&T.useFetchStreams||!1,this.L=void 0,this.J=T&&T.supportsCrossDomainXhr||!1,this.K="",this.h=new Fa(T&&T.concurrentRequestLimit),this.Da=new bB,this.P=T&&T.fastHandshake||!1,this.O=T&&T.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=T&&T.Rb||!1,T&&T.xa&&this.j.xa(),T&&T.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&T&&T.detectBufferingProxy||!1,this.ja=void 0,T&&T.longPollingTimeout&&0<T.longPollingTimeout&&(this.ja=T.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=U_.prototype,e.la=8,e.G=1,e.connect=function(T,F,H,Q){ni(0),this.W=T,this.H=F||{},H&&Q!==void 0&&(this.H.OSID=H,this.H.OAID=Q),this.F=this.X,this.I=Yoe(this,null,this.W),zN(this)};function z_(T){if(Boe(T),T.G==3){var F=T.U++,H=Ke(T.I);if(Ot(H,"SID",T.K),Ot(H,"RID",F),Ot(H,"TYPE","terminate"),zT(T,H),F=new zn(T,T.j,F),F.L=2,F.v=Vn(Ke(H)),H=!1,a.navigator&&a.navigator.sendBeacon)try{H=a.navigator.sendBeacon(F.v.toString(),"")}catch{}!H&&a.Image&&(new Image().src=F.v,H=!0),H||(F.g=Koe(F.j,null),F.g.ea(F.v)),F.F=Date.now(),Oi(F)}Goe(T)}function UN(T){T.g&&(wB(T),T.g.cancel(),T.g=null)}function Boe(T){UN(T),T.u&&(a.clearTimeout(T.u),T.u=null),VN(T),T.h.cancel(),T.s&&(typeof T.s=="number"&&a.clearTimeout(T.s),T.s=null)}function zN(T){if(!Qs(T.h)&&!T.s){T.s=!0;var F=T.Ga;B||D(),U||(B(),U=!0),V.add(F,T),T.B=0}}function o7e(T,F){return pc(T.h)>=T.h.j-(T.s?1:0)?!1:T.s?(T.i=F.D.concat(T.i),!0):T.G==1||T.G==2||T.B>=(T.Va?0:T.Wa)?!1:(T.s=Ma(d(T.Ga,T,F),Woe(T,T.B)),T.B++,!0)}e.Ga=function(T){if(this.s)if(this.s=null,this.G==1){if(!T){this.U=Math.floor(1e5*Math.random()),T=this.U++;const we=new zn(this,this.j,T);let Pe=this.o;if(this.S&&(Pe?(Pe=C(Pe),k(Pe,this.S)):Pe=this.S),this.m!==null||this.O||(we.H=Pe,Pe=null),this.P)e:{for(var F=0,H=0;H<this.i.length;H++){t:{var Q=this.i[H];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if(F+=Q,4096<F){F=H;break e}if(F===4096||H===this.i.length-1){F=H+1;break e}}F=1e3}else F=1e3;F=zoe(this,we,F),H=Ke(this.I),Ot(H,"RID",T),Ot(H,"CVER",22),this.D&&Ot(H,"X-HTTP-Session-Id",this.D),zT(this,H),Pe&&(this.O?F="headers="+encodeURIComponent(String(BN(Pe)))+"&"+F:this.m&&ne(H,this.m,Pe)),Y(this.h,we),this.Ua&&Ot(H,"TYPE","init"),this.P?(Ot(H,"$req",F),Ot(H,"SID","null"),we.T=!0,Wt(we,H,null)):Wt(we,H,F),this.G=2}}else this.G==3&&(T?Uoe(this,T):this.i.length==0||Qs(this.h)||Uoe(this))};function Uoe(T,F){var H;F?H=F.l:H=T.U++;const Q=Ke(T.I);Ot(Q,"SID",T.K),Ot(Q,"RID",H),Ot(Q,"AID",T.T),zT(T,Q),T.m&&T.o&&ne(Q,T.m,T.o),H=new zn(T,T.j,H,T.B+1),T.m===null&&(H.H=T.o),F&&(T.i=F.D.concat(T.i)),F=zoe(T,H,1e3),H.I=Math.round(.5*T.wa)+Math.round(.5*T.wa*Math.random()),Y(T.h,H),Wt(H,Q,F)}function zT(T,F){T.H&&x(T.H,function(H,Q){Ot(F,Q,H)}),T.l&&ce({},function(H,Q){Ot(F,Q,H)})}function zoe(T,F,H){H=Math.min(T.i.length,H);var Q=T.l?d(T.l.Na,T.l,T):null;e:{var we=T.i;let Pe=-1;for(;;){const dt=["count="+H];Pe==-1?0<H?(Pe=we[0].g,dt.push("ofs="+Pe)):Pe=0:dt.push("ofs="+Pe);let Jr=!0;for(let To=0;To<H;To++){let mr=we[To].g;const na=we[To].map;if(mr-=Pe,0>mr)Pe=Math.max(0,we[To].g-100),Jr=!1;else try{FN(na,dt,"req"+mr+"_")}catch{Q&&Q(na)}}if(Jr){Q=dt.join("&");break e}}}return T=T.i.splice(0,H),F.D=T,Q}function Voe(T){if(!T.g&&!T.u){T.Y=1;var F=T.Fa;B||D(),U||(B(),U=!0),V.add(F,T),T.v=0}}function _B(T){return T.g||T.u||3<=T.v?!1:(T.Y++,T.u=Ma(d(T.Fa,T),Woe(T,T.v)),T.v++,!0)}e.Fa=function(){if(this.u=null,Hoe(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var T=2*this.R;this.j.info("BP detection timer enabled: "+T),this.A=Ma(d(this.ab,this),T)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ni(10),UN(this),Hoe(this))};function wB(T){T.A!=null&&(a.clearTimeout(T.A),T.A=null)}function Hoe(T){T.g=new zn(T,T.j,"rpc",T.Y),T.m===null&&(T.g.H=T.o),T.g.O=0;var F=Ke(T.qa);Ot(F,"RID","rpc"),Ot(F,"SID",T.K),Ot(F,"AID",T.T),Ot(F,"CI",T.F?"0":"1"),!T.F&&T.ja&&Ot(F,"TO",T.ja),Ot(F,"TYPE","xmlhttp"),zT(T,F),T.m&&T.o&&ne(F,T.m,T.o),T.L&&(T.g.I=T.L);var H=T.g;T=T.ia,H.L=1,H.v=Vn(Ke(F)),H.m=null,H.P=!0,lr(H,T)}e.Za=function(){this.C!=null&&(this.C=null,UN(this),_B(this),ni(19))};function VN(T){T.C!=null&&(a.clearTimeout(T.C),T.C=null)}function qoe(T,F){var H=null;if(T.g==F){VN(T),wB(T),T.g=null;var Q=2}else if(Od(T.h,F))H=F.D,se(T.h,F),Q=1;else return;if(T.G!=0){if(F.o)if(Q==1){H=F.m?F.m.length:0,F=Date.now()-F.F;var we=T.B;Q=bl(),Ae(Q,new vu(Q,H)),zN(T)}else Voe(T);else if(we=F.s,we==3||we==0&&0<F.X||!(Q==1&&o7e(T,F)||Q==2&&_B(T)))switch(H&&0<H.length&&(F=T.h,F.i=F.i.concat(H)),we){case 1:Dv(T,5);break;case 4:Dv(T,10);break;case 3:Dv(T,6);break;default:Dv(T,2)}}}function Woe(T,F){let H=T.Ta+Math.floor(Math.random()*T.cb);return T.isActive()||(H*=2),H*F}function Dv(T,F){if(T.j.info("Error code "+F),F==2){var H=d(T.fb,T),Q=T.Xa;const we=!Q;Q=new Ge(Q||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||st(Q,"https"),Vn(Q),we?LN(Q.toString(),H):Pp(Q.toString(),H)}else ni(2);T.G=0,T.l&&T.l.sa(F),Goe(T),Boe(T)}e.fb=function(T){T?(this.j.info("Successfully pinged google.com"),ni(2)):(this.j.info("Failed to ping google.com"),ni(1))};function Goe(T){if(T.G=0,T.ka=[],T.l){const F=Z(T.h);(F.length!=0||T.i.length!=0)&&(g(T.ka,F),g(T.ka,T.i),T.h.i.length=0,m(T.i),T.i.length=0),T.l.ra()}}function Yoe(T,F,H){var Q=H instanceof Ge?Ke(H):new Ge(H);if(Q.g!="")F&&(Q.g=F+"."+Q.g),xt(Q,Q.s);else{var we=a.location;Q=we.protocol,F=F?F+"."+we.hostname:we.hostname,we=+we.port;var Pe=new Ge(null);Q&&st(Pe,Q),F&&(Pe.g=F),we&&xt(Pe,we),H&&(Pe.l=H),Q=Pe}return H=T.D,F=T.ya,H&&F&&Ot(Q,H,F),Ot(Q,"VER",T.la),zT(T,Q),Q}function Koe(T,F,H){if(F&&!T.J)throw Error("Can't create secondary domain capable XhrIo object.");return F=T.Ca&&!T.pa?new ue(new Iv({eb:H})):new ue(T.pa),F.Ha(T.J),F}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xoe(){}e=Xoe.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function HN(){}HN.prototype.g=function(T,F){return new _l(T,F)};function _l(T,F){ge.call(this),this.g=new U_(F),this.l=T,this.h=F&&F.messageUrlParams||null,T=F&&F.messageHeaders||null,F&&F.clientProtocolHeaderRequired&&(T?T["X-Client-Protocol"]="webchannel":T={"X-Client-Protocol":"webchannel"}),this.g.o=T,T=F&&F.initMessageHeaders||null,F&&F.messageContentType&&(T?T["X-WebChannel-Content-Type"]=F.messageContentType:T={"X-WebChannel-Content-Type":F.messageContentType}),F&&F.va&&(T?T["X-WebChannel-Client-Profile"]=F.va:T={"X-WebChannel-Client-Profile":F.va}),this.g.S=T,(T=F&&F.Sb)&&!v(T)&&(this.g.m=T),this.v=F&&F.supportsCrossDomainXhr||!1,this.u=F&&F.sendRawJson||!1,(F=F&&F.httpSessionIdParam)&&!v(F)&&(this.g.D=F,T=this.h,T!==null&&F in T&&(T=this.h,F in T&&delete T[F])),this.j=new V_(this)}p(_l,ge),_l.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_l.prototype.close=function(){z_(this.g)},_l.prototype.o=function(T){var F=this.g;if(typeof T=="string"){var H={};H.__data__=T,T=H}else this.u&&(H={},H.__data__=bn(T),T=H);F.i.push(new Zo(F.Ya++,T)),F.G==3&&zN(F)},_l.prototype.N=function(){this.g.l=null,delete this.j,z_(this.g),delete this.g,_l.aa.N.call(this)};function Qoe(T){zi.call(this),T.__headers__&&(this.headers=T.__headers__,this.statusCode=T.__status__,delete T.__headers__,delete T.__status__);var F=T.__sm__;if(F){e:{for(const H in F){T=H;break e}T=void 0}(this.i=T)&&(T=this.i,F=F!==null&&T in F?F[T]:void 0),this.data=F}else this.data=T}p(Qoe,zi);function Joe(){Rr.call(this),this.status=1}p(Joe,Rr);function V_(T){this.g=T}p(V_,Xoe),V_.prototype.ua=function(){Ae(this.g,"a")},V_.prototype.ta=function(T){Ae(this.g,new Qoe(T))},V_.prototype.sa=function(T){Ae(this.g,new Joe)},V_.prototype.ra=function(){Ae(this.g,"b")},HN.prototype.createWebChannel=HN.prototype.g,_l.prototype.send=_l.prototype.o,_l.prototype.open=_l.prototype.m,_l.prototype.close=_l.prototype.close,jMe=function(){return new HN},FMe=function(){return bl()},LMe=_s,Cq={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ot.NO_ERROR=0,ot.TIMEOUT=8,ot.HTTP_ERROR=6,DO=ot,Tt.COMPLETE="complete",MMe=Tt,Ui.EventType=Nn,Nn.OPEN="a",Nn.CLOSE="b",Nn.ERROR="c",Nn.MESSAGE="d",ge.prototype.listen=ge.prototype.K,vA=Ui,$Me=Iv,ue.prototype.listenOnce=ue.prototype.L,ue.prototype.getLastError=ue.prototype.Ka,ue.prototype.getLastErrorCode=ue.prototype.Ba,ue.prototype.getStatus=ue.prototype.Z,ue.prototype.getResponseJson=ue.prototype.Oa,ue.prototype.getResponseText=ue.prototype.oa,ue.prototype.send=ue.prototype.ea,ue.prototype.setWithCredentials=ue.prototype.Ha,OMe=ue}).apply(typeof iP<"u"?iP:typeof self<"u"?self:typeof window<"u"?window:{});const vge="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Iu.UNAUTHENTICATED=new Iu(null),Iu.GOOGLE_CREDENTIALS=new Iu("google-credentials-uid"),Iu.FIRST_PARTY=new Iu("first-party-uid"),Iu.MOCK_USER=new Iu("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mT="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db=new X4("@firebase/firestore");function SC(){return Db.logLevel}function kt(e,...t){if(Db.logLevel<=Xn.DEBUG){const n=t.map(dte);Db.debug(`Firestore (${mT}): ${e}`,...n)}}function eg(e,...t){if(Db.logLevel<=Xn.ERROR){const n=t.map(dte);Db.error(`Firestore (${mT}): ${e}`,...n)}}function ik(e,...t){if(Db.logLevel<=Xn.WARN){const n=t.map(dte);Db.warn(`Firestore (${mT}): ${e}`,...n)}}function dte(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(e="Unexpected state"){const t=`FIRESTORE (${mT}) INTERNAL ASSERTION FAILED: `+e;throw eg(t),new Error(t)}function ui(e,t){e||cn()}function gn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _t extends vp{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8t{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class J8t{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Iu.UNAUTHENTICATED))}shutdown(){}}class Z8t{constructor(t){this.t=t,this.currentUser=Iu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Tm;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Tm,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{kt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(kt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Tm)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(kt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ui(typeof r.accessToken=="string"),new Q8t(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ui(t===null||typeof t=="string"),new Iu(t)}}class e9t{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Iu.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class t9t{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new e9t(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Iu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class n9t{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class r9t{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&kt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,kt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{kt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):kt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ui(typeof n.token=="string"),this.R=n.token,new n9t(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i9t(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BMe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=i9t(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function Er(e,t){return e<t?-1:e>t?1:0}function Bx(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new _t(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _t(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new _t(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new _t(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Vs.fromMillis(Date.now())}static fromDate(t){return Vs.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Vs(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Er(this.nanoseconds,t.nanoseconds):Er(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new mn(t)}static min(){return new mn(new Vs(0,0))}static max(){return new mn(new Vs(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(t,n,r){n===void 0?n=0:n>t.length&&cn(),r===void 0?r=t.length-n:r>t.length-n&&cn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return sk.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof sk?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class hi extends sk{construct(t,n,r){return new hi(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new _t(Be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new hi(n)}static emptyPath(){return new hi([])}}const s9t=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lo extends sk{construct(t,n,r){return new Lo(t,n,r)}static isValidIdentifier(t){return s9t.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lo.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Lo(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new _t(Be.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new _t(Be.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new _t(Be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new _t(Be.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Lo(n)}static emptyPath(){return new Lo([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(t){this.path=t}static fromPath(t){return new Ht(hi.fromString(t))}static fromName(t){return new Ht(hi.fromString(t).popFirst(5))}static empty(){return new Ht(hi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&hi.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return hi.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ht(new hi(t.slice()))}}function o9t(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=mn.fromTimestamp(r===1e9?new Vs(n+1,0):new Vs(n,r));return new Ny(i,Ht.empty(),t)}function a9t(e){return new Ny(e.readTime,e.key,-1)}class Ny{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Ny(mn.min(),Ht.empty(),-1)}static max(){return new Ny(mn.max(),Ht.empty(),-1)}}function u9t(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Ht.comparator(e.documentKey,t.documentKey),n!==0?n:Er(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l9t="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class c9t{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UR(e){if(e.code!==Be.FAILED_PRECONDITION||e.message!==l9t)throw e;kt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&cn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Qe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Qe?n:Qe.resolve(n)}catch(n){return Qe.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Qe.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Qe.reject(n)}static resolve(t){return new Qe((n,r)=>{n(t)})}static reject(t){return new Qe((n,r)=>{r(t)})}static waitFor(t){return new Qe((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Qe.resolve(!1);for(const r of t)n=n.next(i=>i?Qe.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Qe((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Qe((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function f9t(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function zR(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hte{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}hte.oe=-1;function r5(e){return e==null}function Y3(e){return e===0&&1/e==-1/0}function d9t(e){return typeof e=="number"&&Number.isInteger(e)&&!Y3(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bge(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function w_(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function UMe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(t,n){this.comparator=t,this.root=n||Oo.EMPTY}insert(t,n){return new Bi(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Oo.BLACK,null,null))}remove(t){return new Bi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Oo.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new sP(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new sP(this.root,t,this.comparator,!1)}getReverseIterator(){return new sP(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new sP(this.root,t,this.comparator,!0)}}class sP{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Oo{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??Oo.RED,this.left=i??Oo.EMPTY,this.right=s??Oo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new Oo(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Oo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Oo.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Oo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Oo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw cn();const t=this.left.check();if(t!==this.right.check())throw cn();return t+(this.isRed()?0:1)}}Oo.EMPTY=null,Oo.RED=!0,Oo.BLACK=!1;Oo.EMPTY=new class{constructor(){this.size=0}get key(){throw cn()}get value(){throw cn()}get color(){throw cn()}get left(){throw cn()}get right(){throw cn()}copy(t,n,r,i,s){return this}insert(t,n,r){return new Oo(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(t){this.comparator=t,this.data=new Bi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new _ge(this.data.getIterator())}getIteratorFrom(t){return new _ge(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Ho)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Ho(this.comparator);return n.data=t,n}}class _ge{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(t){this.fields=t,t.sort(Lo.comparator)}static empty(){return new Fl([])}unionWith(t){let n=new Ho(Lo.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Fl(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Bx(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zMe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new zMe("Invalid base64 string: "+s):s}}(t);return new Ra(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Ra(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Er(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ra.EMPTY_BYTE_STRING=new Ra("");const h9t=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dy(e){if(ui(!!e),typeof e=="string"){let t=0;const n=h9t.exec(e);if(ui(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ts(e.seconds),nanos:Ts(e.nanos)}}function Ts(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Pb(e){return typeof e=="string"?Ra.fromBase64String(e):Ra.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pte(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function mte(e){const t=e.mapValue.fields.__previous_value__;return pte(t)?mte(t):t}function ok(e){const t=Dy(e.mapValue.fields.__local_write_time__.timestampValue);return new Vs(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p9t{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class ak{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new ak("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof ak&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ob(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?pte(e)?4:m9t(e)?9007199254740991:10:cn()}function Qh(e,t){if(e===t)return!0;const n=Ob(e);if(n!==Ob(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ok(e).isEqual(ok(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Dy(i.timestampValue),a=Dy(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return Pb(i.bytesValue).isEqual(Pb(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return Ts(i.geoPointValue.latitude)===Ts(s.geoPointValue.latitude)&&Ts(i.geoPointValue.longitude)===Ts(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ts(i.integerValue)===Ts(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ts(i.doubleValue),a=Ts(s.doubleValue);return o===a?Y3(o)===Y3(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return Bx(e.arrayValue.values||[],t.arrayValue.values||[],Qh);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(bge(o)!==bge(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Qh(o[u],a[u])))return!1;return!0}(e,t);default:return cn()}}function uk(e,t){return(e.values||[]).find(n=>Qh(n,t))!==void 0}function Ux(e,t){if(e===t)return 0;const n=Ob(e),r=Ob(t);if(n!==r)return Er(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Er(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=Ts(s.integerValue||s.doubleValue),u=Ts(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return wge(e.timestampValue,t.timestampValue);case 4:return wge(ok(e),ok(t));case 5:return Er(e.stringValue,t.stringValue);case 6:return function(s,o){const a=Pb(s),u=Pb(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=Er(a[l],u[l]);if(c!==0)return c}return Er(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=Er(Ts(s.latitude),Ts(o.latitude));return a!==0?a:Er(Ts(s.longitude),Ts(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=Ux(a[l],u[l]);if(c)return c}return Er(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===oP.mapValue&&o===oP.mapValue)return 0;if(s===oP.mapValue)return 1;if(o===oP.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=Er(u[f],c[f]);if(d!==0)return d;const h=Ux(a[u[f]],l[c[f]]);if(h!==0)return h}return Er(u.length,c.length)}(e.mapValue,t.mapValue);default:throw cn()}}function wge(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Er(e,t);const n=Dy(e),r=Dy(t),i=Er(n.seconds,r.seconds);return i!==0?i:Er(n.nanos,r.nanos)}function zx(e){return Aq(e)}function Aq(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Dy(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Pb(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Ht.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Aq(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Aq(n.fields[o])}`;return i+"}"}(e.mapValue):cn()}function Ege(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Iq(e){return!!e&&"integerValue"in e}function gte(e){return!!e&&"arrayValue"in e}function xge(e){return!!e&&"nullValue"in e}function Sge(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function PO(e){return!!e&&"mapValue"in e}function T2(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return w_(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=T2(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=T2(e.arrayValue.values[n]);return t}return Object.assign({},e)}function m9t(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(t){this.value=t}static empty(){return new ju({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!PO(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=T2(n)}setAll(t){let n=Lo.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=T2(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());PO(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Qh(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];PO(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){w_(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new ju(T2(this.value))}}function VMe(e){const t=[];return w_(e.fields,(n,r)=>{const i=new Lo([n]);if(PO(r)){const s=VMe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Fl(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new va(t,0,mn.min(),mn.min(),mn.min(),ju.empty(),0)}static newFoundDocument(t,n,r,i){return new va(t,1,n,mn.min(),r,i,0)}static newNoDocument(t,n){return new va(t,2,n,mn.min(),mn.min(),ju.empty(),0)}static newUnknownDocument(t,n){return new va(t,3,n,mn.min(),mn.min(),ju.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(mn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ju.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ju.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=mn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof va&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new va(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let K3=class{constructor(t,n){this.position=t,this.inclusive=n}};function Tge(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Ht.comparator(Ht.fromName(o.referenceValue),n.key):r=Ux(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Cge(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Qh(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(t,n="asc"){this.field=t,this.dir=n}}function g9t(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HMe=class{};class As extends HMe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new v9t(t,n,r):n==="array-contains"?new w9t(t,r):n==="in"?new E9t(t,r):n==="not-in"?new x9t(t,r):n==="array-contains-any"?new S9t(t,r):new As(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new b9t(t,r):new _9t(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ux(n,this.value)):n!==null&&Ob(this.value)===Ob(n)&&this.matchesComparison(Ux(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return cn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hd extends HMe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new hd(t,n)}matches(t){return qMe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function qMe(e){return e.op==="and"}function WMe(e){return y9t(e)&&qMe(e)}function y9t(e){for(const t of e.filters)if(t instanceof hd)return!1;return!0}function kq(e){if(e instanceof As)return e.field.canonicalString()+e.op.toString()+zx(e.value);if(WMe(e))return e.filters.map(t=>kq(t)).join(",");{const t=e.filters.map(n=>kq(n)).join(",");return`${e.op}(${t})`}}function GMe(e,t){return e instanceof As?function(r,i){return i instanceof As&&r.op===i.op&&r.field.isEqual(i.field)&&Qh(r.value,i.value)}(e,t):e instanceof hd?function(r,i){return i instanceof hd&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&GMe(o,i.filters[a]),!0):!1}(e,t):void cn()}function YMe(e){return e instanceof As?function(n){return`${n.field.canonicalString()} ${n.op} ${zx(n.value)}`}(e):e instanceof hd?function(n){return n.op.toString()+" {"+n.getFilters().map(YMe).join(" ,")+"}"}(e):"Filter"}class v9t extends As{constructor(t,n,r){super(t,n,r),this.key=Ht.fromName(r.referenceValue)}matches(t){const n=Ht.comparator(t.key,this.key);return this.matchesComparison(n)}}class b9t extends As{constructor(t,n){super(t,"in",n),this.keys=KMe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class _9t extends As{constructor(t,n){super(t,"not-in",n),this.keys=KMe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function KMe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ht.fromName(r.referenceValue))}class w9t extends As{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return gte(n)&&uk(n.arrayValue,this.value)}}class E9t extends As{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&uk(this.value.arrayValue,n)}}class x9t extends As{constructor(t,n){super(t,"not-in",n)}matches(t){if(uk(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!uk(this.value.arrayValue,n)}}class S9t extends As{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!gte(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>uk(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T9t{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Age(e,t=null,n=[],r=[],i=null,s=null,o=null){return new T9t(e,t,n,r,i,s,o)}function yte(e){const t=gn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>kq(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),r5(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>zx(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>zx(r)).join(",")),t.ue=n}return t.ue}function vte(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!g9t(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!GMe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Cge(e.startAt,t.startAt)&&Cge(e.endAt,t.endAt)}function Rq(e){return Ht.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function C9t(e,t,n,r,i,s,o,a){return new gT(e,t,n,r,i,s,o,a)}function bte(e){return new gT(e)}function Ige(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function XMe(e){return e.collectionGroup!==null}function C2(e){const t=gn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ho(Lo.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new lk(s,r))}),n.has(Lo.keyField().canonicalString())||t.ce.push(new lk(Lo.keyField(),r))}return t.ce}function Ph(e){const t=gn(e);return t.le||(t.le=A9t(t,C2(e))),t.le}function A9t(e,t){if(e.limitType==="F")return Age(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new lk(i.field,s)});const n=e.endAt?new K3(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new K3(e.startAt.position,e.startAt.inclusive):null;return Age(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Nq(e,t){const n=e.filters.concat([t]);return new gT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Dq(e,t,n){return new gT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function i5(e,t){return vte(Ph(e),Ph(t))&&e.limitType===t.limitType}function QMe(e){return`${yte(Ph(e))}|lt:${e.limitType}`}function kw(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>YMe(i)).join(", ")}]`),r5(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>zx(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>zx(i)).join(",")),`Target(${r})`}(Ph(e))}; limitType=${e.limitType})`}function s5(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ht.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of C2(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=Tge(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,C2(r),i)||r.endAt&&!function(o,a,u){const l=Tge(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,C2(r),i))}(e,t)}function I9t(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function JMe(e){return(t,n)=>{let r=!1;for(const i of C2(e)){const s=k9t(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function k9t(e,t,n){const r=e.field.isKeyField()?Ht.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?Ux(u,l):cn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return cn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){w_(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return UMe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R9t=new Bi(Ht.comparator);function tg(){return R9t}const ZMe=new Bi(Ht.comparator);function bA(...e){let t=ZMe;for(const n of e)t=t.insert(n.key,n);return t}function e3e(e){let t=ZMe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function U1(){return A2()}function t3e(){return A2()}function A2(){return new yT(e=>e.toString(),(e,t)=>e.isEqual(t))}const N9t=new Bi(Ht.comparator),D9t=new Ho(Ht.comparator);function qn(...e){let t=D9t;for(const n of e)t=t.add(n);return t}const P9t=new Ho(Er);function O9t(){return P9t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n3e(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Y3(t)?"-0":t}}function r3e(e){return{integerValue:""+e}}function $9t(e,t){return d9t(t)?r3e(t):n3e(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(){this._=void 0}}function M9t(e,t,n){return e instanceof ck?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&pte(s)&&(s=mte(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof fk?s3e(e,t):e instanceof dk?o3e(e,t):function(i,s){const o=i3e(i,s),a=kge(o)+kge(i.Pe);return Iq(o)&&Iq(i.Pe)?r3e(a):n3e(i.serializer,a)}(e,t)}function L9t(e,t,n){return e instanceof fk?s3e(e,t):e instanceof dk?o3e(e,t):n}function i3e(e,t){return e instanceof X3?function(r){return Iq(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class ck extends o5{}class fk extends o5{constructor(t){super(),this.elements=t}}function s3e(e,t){const n=a3e(t);for(const r of e.elements)n.some(i=>Qh(i,r))||n.push(r);return{arrayValue:{values:n}}}class dk extends o5{constructor(t){super(),this.elements=t}}function o3e(e,t){let n=a3e(t);for(const r of e.elements)n=n.filter(i=>!Qh(i,r));return{arrayValue:{values:n}}}class X3 extends o5{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function kge(e){return Ts(e.integerValue||e.doubleValue)}function a3e(e){return gte(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9t{constructor(t,n){this.field=t,this.transform=n}}function j9t(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof fk&&i instanceof fk||r instanceof dk&&i instanceof dk?Bx(r.elements,i.elements,Qh):r instanceof X3&&i instanceof X3?Qh(r.Pe,i.Pe):r instanceof ck&&i instanceof ck}(e.transform,t.transform)}class B9t{constructor(t,n){this.version=t,this.transformResults=n}}class el{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new el}static exists(t){return new el(void 0,t)}static updateTime(t){return new el(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function OO(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class a5{}function u3e(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new u5(e.key,el.none()):new VR(e.key,e.data,el.none());{const n=e.data,r=ju.empty();let i=new Ho(Lo.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new hv(e.key,r,new Fl(i.toArray()),el.none())}}function U9t(e,t,n){e instanceof VR?function(i,s,o){const a=i.value.clone(),u=Nge(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof hv?function(i,s,o){if(!OO(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Nge(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(l3e(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function I2(e,t,n,r){return e instanceof VR?function(s,o,a,u){if(!OO(s.precondition,o))return a;const l=s.value.clone(),c=Dge(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof hv?function(s,o,a,u){if(!OO(s.precondition,o))return a;const l=Dge(s.fieldTransforms,u,o),c=o.data;return c.setAll(l3e(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return OO(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function z9t(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=i3e(r.transform,i||null);s!=null&&(n===null&&(n=ju.empty()),n.set(r.field,s))}return n||null}function Rge(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Bx(r,i,(s,o)=>j9t(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class VR extends a5{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class hv extends a5{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function l3e(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Nge(e,t,n){const r=new Map;ui(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,L9t(o,a,n[i]))}return r}function Dge(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,M9t(s,o,t))}return r}class u5 extends a5{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class V9t extends a5{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9t{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&U9t(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=I2(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=I2(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=t3e();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=u3e(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(mn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),qn())}isEqual(t){return this.batchId===t.batchId&&Bx(this.mutations,t.mutations,(n,r)=>Rge(n,r))&&Bx(this.baseMutations,t.baseMutations,(n,r)=>Rge(n,r))}}class _te{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){ui(t.mutations.length===r.length);let i=function(){return N9t}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new _te(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9t{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W9t{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Es,rr;function G9t(e){switch(e){default:return cn();case Be.CANCELLED:case Be.UNKNOWN:case Be.DEADLINE_EXCEEDED:case Be.RESOURCE_EXHAUSTED:case Be.INTERNAL:case Be.UNAVAILABLE:case Be.UNAUTHENTICATED:return!1;case Be.INVALID_ARGUMENT:case Be.NOT_FOUND:case Be.ALREADY_EXISTS:case Be.PERMISSION_DENIED:case Be.FAILED_PRECONDITION:case Be.ABORTED:case Be.OUT_OF_RANGE:case Be.UNIMPLEMENTED:case Be.DATA_LOSS:return!0}}function c3e(e){if(e===void 0)return eg("GRPC error has no .code"),Be.UNKNOWN;switch(e){case Es.OK:return Be.OK;case Es.CANCELLED:return Be.CANCELLED;case Es.UNKNOWN:return Be.UNKNOWN;case Es.DEADLINE_EXCEEDED:return Be.DEADLINE_EXCEEDED;case Es.RESOURCE_EXHAUSTED:return Be.RESOURCE_EXHAUSTED;case Es.INTERNAL:return Be.INTERNAL;case Es.UNAVAILABLE:return Be.UNAVAILABLE;case Es.UNAUTHENTICATED:return Be.UNAUTHENTICATED;case Es.INVALID_ARGUMENT:return Be.INVALID_ARGUMENT;case Es.NOT_FOUND:return Be.NOT_FOUND;case Es.ALREADY_EXISTS:return Be.ALREADY_EXISTS;case Es.PERMISSION_DENIED:return Be.PERMISSION_DENIED;case Es.FAILED_PRECONDITION:return Be.FAILED_PRECONDITION;case Es.ABORTED:return Be.ABORTED;case Es.OUT_OF_RANGE:return Be.OUT_OF_RANGE;case Es.UNIMPLEMENTED:return Be.UNIMPLEMENTED;case Es.DATA_LOSS:return Be.DATA_LOSS;default:return cn()}}(rr=Es||(Es={}))[rr.OK=0]="OK",rr[rr.CANCELLED=1]="CANCELLED",rr[rr.UNKNOWN=2]="UNKNOWN",rr[rr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rr[rr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rr[rr.NOT_FOUND=5]="NOT_FOUND",rr[rr.ALREADY_EXISTS=6]="ALREADY_EXISTS",rr[rr.PERMISSION_DENIED=7]="PERMISSION_DENIED",rr[rr.UNAUTHENTICATED=16]="UNAUTHENTICATED",rr[rr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rr[rr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rr[rr.ABORTED=10]="ABORTED",rr[rr.OUT_OF_RANGE=11]="OUT_OF_RANGE",rr[rr.UNIMPLEMENTED=12]="UNIMPLEMENTED",rr[rr.INTERNAL=13]="INTERNAL",rr[rr.UNAVAILABLE=14]="UNAVAILABLE",rr[rr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y9t(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9t=new J1([4294967295,4294967295],0);function Pge(e){const t=Y9t().encode(e),n=new PMe;return n.update(t),new Uint8Array(n.digest())}function Oge(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new J1([n,r],0),new J1([i,s],0)]}class wte{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _A(`Invalid padding: ${n}`);if(r<0)throw new _A(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new _A(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new _A(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=J1.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(J1.fromNumber(r)));return i.compare(K9t)===1&&(i=new J1([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=Pge(t),[r,i]=Oge(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new wte(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=Pge(t),[r,i]=Oge(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class _A extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,HR.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new l5(mn.min(),i,new Bi(Er),tg(),qn())}}class HR{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new HR(r,n,qn(),qn(),qn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class f3e{constructor(t,n){this.targetId=t,this.me=n}}class d3e{constructor(t,n,r=Ra.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class $ge{constructor(){this.fe=0,this.ge=Lge(),this.pe=Ra.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=qn(),n=qn(),r=qn();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:cn()}}),new HR(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=Lge()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ui(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class X9t{constructor(t){this.Le=t,this.Be=new Map,this.ke=tg(),this.qe=Mge(),this.Qe=new Bi(Er)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:cn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(Rq(s))if(r===0){const o=new Ht(s.path);this.Ue(n,o,va.newNoDocument(o,mn.min()))}else ui(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Pb(r).toUint8Array()}catch(u){if(u instanceof zMe)return ik("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new wte(o,i,s)}catch(u){return ik(u instanceof _A?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Rq(a.target)){const u=new Ht(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,va.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=qn();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new l5(t,n,this.Qe,this.ke,r);return this.ke=tg(),this.qe=Mge(),this.Qe=new Bi(Er),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new $ge,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Ho(Er),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||kt("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new $ge),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function Mge(){return new Bi(Ht.comparator)}function Lge(){return new Bi(Ht.comparator)}const Q9t={asc:"ASCENDING",desc:"DESCENDING"},J9t={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Z9t={and:"AND",or:"OR"};class eUt{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Pq(e,t){return e.useProto3Json||r5(t)?t:{value:t}}function Q3(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function h3e(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function tUt(e,t){return Q3(e,t.toTimestamp())}function Oh(e){return ui(!!e),mn.fromTimestamp(function(n){const r=Dy(n);return new Vs(r.seconds,r.nanos)}(e))}function Ete(e,t){return Oq(e,t).canonicalString()}function Oq(e,t){const n=function(i){return new hi(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function p3e(e){const t=hi.fromString(e);return ui(b3e(t)),t}function $q(e,t){return Ete(e.databaseId,t.path)}function vU(e,t){const n=p3e(t);if(n.get(1)!==e.databaseId.projectId)throw new _t(Be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new _t(Be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ht(g3e(n))}function m3e(e,t){return Ete(e.databaseId,t)}function nUt(e){const t=p3e(e);return t.length===4?hi.emptyPath():g3e(t)}function Mq(e){return new hi(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function g3e(e){return ui(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Fge(e,t,n){return{name:$q(e,t),fields:n.value.mapValue.fields}}function rUt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:cn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(ui(c===void 0||typeof c=="string"),Ra.fromBase64String(c||"")):(ui(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Ra.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Be.UNKNOWN:c3e(l.code);return new _t(c,l.message||"")}(o);n=new d3e(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=vU(e,r.document.name),s=Oh(r.document.updateTime),o=r.document.createTime?Oh(r.document.createTime):mn.min(),a=new ju({mapValue:{fields:r.document.fields}}),u=va.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new $O(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=vU(e,r.document),s=r.readTime?Oh(r.readTime):mn.min(),o=va.newNoDocument(i,s),a=r.removedTargetIds||[];n=new $O([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=vU(e,r.document),s=r.removedTargetIds||[];n=new $O([],s,i,null)}else{if(!("filter"in t))return cn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new W9t(i,s),a=r.targetId;n=new f3e(a,o)}}return n}function iUt(e,t){let n;if(t instanceof VR)n={update:Fge(e,t.key,t.value)};else if(t instanceof u5)n={delete:$q(e,t.key)};else if(t instanceof hv)n={update:Fge(e,t.key,t.data),updateMask:hUt(t.fieldMask)};else{if(!(t instanceof V9t))return cn();n={verify:$q(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof ck)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof fk)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof dk)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof X3)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw cn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:tUt(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:cn()}(e,t.precondition)),n}function sUt(e,t){return e&&e.length>0?(ui(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?Oh(i.updateTime):Oh(s);return o.isEqual(mn.min())&&(o=Oh(s)),new B9t(o,i.transformResults||[])}(n,t))):[]}function oUt(e,t){return{documents:[m3e(e,t.path)]}}function aUt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=m3e(e,i);const s=function(l){if(l.length!==0)return v3e(hd.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:Rw(d.field),direction:cUt(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Pq(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function uUt(e){let t=nUt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ui(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=y3e(f);return d instanceof hd&&WMe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new lk(Nw(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,r5(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new K3(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new K3(h,d)}(n.endAt)),C9t(t,i,o,s,a,"F",u,l)}function lUt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return cn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function y3e(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Nw(n.unaryFilter.field);return As.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Nw(n.unaryFilter.field);return As.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Nw(n.unaryFilter.field);return As.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Nw(n.unaryFilter.field);return As.create(o,"!=",{nullValue:"NULL_VALUE"});default:return cn()}}(e):e.fieldFilter!==void 0?function(n){return As.create(Nw(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return cn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return hd.create(n.compositeFilter.filters.map(r=>y3e(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return cn()}}(n.compositeFilter.op))}(e):cn()}function cUt(e){return Q9t[e]}function fUt(e){return J9t[e]}function dUt(e){return Z9t[e]}function Rw(e){return{fieldPath:e.canonicalString()}}function Nw(e){return Lo.fromServerFormat(e.fieldPath)}function v3e(e){return e instanceof As?function(n){if(n.op==="=="){if(Sge(n.value))return{unaryFilter:{field:Rw(n.field),op:"IS_NAN"}};if(xge(n.value))return{unaryFilter:{field:Rw(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Sge(n.value))return{unaryFilter:{field:Rw(n.field),op:"IS_NOT_NAN"}};if(xge(n.value))return{unaryFilter:{field:Rw(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rw(n.field),op:fUt(n.op),value:n.value}}}(e):e instanceof hd?function(n){const r=n.getFilters().map(i=>v3e(i));return r.length===1?r[0]:{compositeFilter:{op:dUt(n.op),filters:r}}}(e):cn()}function hUt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function b3e(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(t,n,r,i,s=mn.min(),o=mn.min(),a=Ra.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new _0(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new _0(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new _0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new _0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pUt{constructor(t){this.ct=t}}function mUt(e){const t=uUt({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Dq(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gUt{constructor(){this._n=new yUt}addToCollectionParentIndex(t,n){return this._n.add(n),Qe.resolve()}getCollectionParents(t,n){return Qe.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return Qe.resolve()}deleteFieldIndex(t,n){return Qe.resolve()}deleteAllFieldIndexes(t){return Qe.resolve()}createTargetIndexes(t,n){return Qe.resolve()}getDocumentsMatchingTarget(t,n){return Qe.resolve(null)}getIndexType(t,n){return Qe.resolve(0)}getFieldIndexes(t,n){return Qe.resolve([])}getNextCollectionGroupToUpdate(t){return Qe.resolve(null)}getMinOffset(t,n){return Qe.resolve(Ny.min())}getMinOffsetFromCollectionGroup(t,n){return Qe.resolve(Ny.min())}updateCollectionGroup(t,n,r){return Qe.resolve()}updateIndexEntries(t,n){return Qe.resolve()}}class yUt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Ho(hi.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Ho(hi.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new Vx(0)}static Ln(){return new Vx(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vUt{constructor(){this.changes=new yT(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,va.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Qe.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bUt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Ut{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&I2(r.mutation,i,Fl.empty(),Vs.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,qn()).next(()=>r))}getLocalViewOfDocuments(t,n,r=qn()){const i=U1();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=bA();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=U1();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,qn()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=tg();const o=A2(),a=function(){return A2()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof hv)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),I2(c.mutation,l,c.mutation.getFieldMask(),Vs.now())):o.set(l.key,Fl.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new bUt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=A2();let i=new Bi((o,a)=>o-a),s=qn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Fl.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||qn()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=t3e();c.forEach(d=>{if(!s.has(d)){const h=u3e(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Qe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Ht.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):XMe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Qe.resolve(U1());let a=-1,u=s;return o.next(l=>Qe.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Qe.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,qn())).next(c=>({batchId:a,changes:e3e(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Ht(n)).next(r=>{let i=bA();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=bA();return this.indexManager.getCollectionParents(t,s).next(a=>Qe.forEach(a,u=>{const l=function(f,d){return new gT(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,va.newInvalidDocument(c)))});let a=bA();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&I2(c.mutation,l,Fl.empty(),Vs.now()),s5(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wUt{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return Qe.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Oh(i.createTime)}}(n)),Qe.resolve()}getNamedQuery(t,n){return Qe.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:mUt(i.bundledQuery),readTime:Oh(i.readTime)}}(n)),Qe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EUt{constructor(){this.overlays=new Bi(Ht.comparator),this.hr=new Map}getOverlay(t,n){return Qe.resolve(this.overlays.get(n))}getOverlays(t,n){const r=U1();return Qe.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),Qe.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Qe.resolve()}getOverlaysForCollection(t,n,r){const i=U1(),s=n.length+1,o=new Ht(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Qe.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Bi((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=U1(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=U1(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Qe.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new q9t(n,r));let s=this.hr.get(n);s===void 0&&(s=qn(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xte{constructor(){this.Pr=new Ho(to.Ir),this.Tr=new Ho(to.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new to(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new to(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new Ht(new hi([])),r=new to(n,t),i=new to(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new Ht(new hi([])),r=new to(n,t),i=new to(n,t+1);let s=qn();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new to(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class to{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return Ht.comparator(t.key,n.key)||Er(t.pr,n.pr)}static Er(t,n){return Er(t.pr,n.pr)||Ht.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xUt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ho(to.Ir)}checkEmpty(t){return Qe.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new H9t(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new to(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Qe.resolve(o)}lookupMutationBatch(t,n){return Qe.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Qe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Qe.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return Qe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new to(n,0),i=new to(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Qe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Ho(Er);return n.forEach(i=>{const s=new to(i,0),o=new to(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Qe.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Ht.isDocumentKey(s)||(s=s.child(""));const o=new to(new Ht(s),0);let a=new Ho(Er);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),Qe.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){ui(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Qe.forEach(n.mutations,i=>{const s=new to(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new to(n,0),i=this.wr.firstAfterOrEqual(r);return Qe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Qe.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SUt{constructor(t){this.vr=t,this.docs=function(){return new Bi(Ht.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Qe.resolve(r?r.document.mutableCopy():va.newInvalidDocument(n))}getEntries(t,n){let r=tg();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():va.newInvalidDocument(i))}),Qe.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=tg();const o=n.path,a=new Ht(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||u9t(a9t(c),r)<=0||(i.has(c.key)||s5(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Qe.resolve(s)}getAllFromCollectionGroup(t,n,r,i){cn()}Fr(t,n){return Qe.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new TUt(this)}getSize(t){return Qe.resolve(this.size)}}class TUt extends vUt{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),Qe.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CUt{constructor(t){this.persistence=t,this.Mr=new yT(n=>yte(n),vte),this.lastRemoteSnapshotVersion=mn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new xte,this.targetCount=0,this.Lr=Vx.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),Qe.resolve()}getLastRemoteSnapshotVersion(t){return Qe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Qe.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Qe.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Qe.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new Vx(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,Qe.resolve()}updateTargetData(t,n){return this.qn(n),Qe.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Qe.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Qe.waitFor(s).next(()=>i)}getTargetCount(t){return Qe.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return Qe.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),Qe.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Qe.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),Qe.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return Qe.resolve(r)}containsKey(t,n){return Qe.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AUt{constructor(t,n){this.Br={},this.overlays={},this.kr=new hte(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new CUt(this),this.indexManager=new gUt,this.remoteDocumentCache=function(i){return new SUt(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new pUt(n),this.$r=new wUt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new EUt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new xUt(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){kt("MemoryPersistence","Starting transaction:",t);const i=new IUt(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return Qe.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class IUt extends c9t{constructor(t){super(),this.currentSequenceNumber=t}}class Ste{constructor(t){this.persistence=t,this.zr=new xte,this.jr=null}static Hr(t){return new Ste(t)}get Jr(){if(this.jr)return this.jr;throw cn()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Qe.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Qe.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),Qe.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Qe.forEach(this.Jr,r=>{const i=Ht.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,mn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return Qe.or([()=>Qe.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tte{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=qn(),i=qn();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Tte(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kUt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RUt{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return l4t()?8:f9t(Yo())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new kUt;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(SC()<=Xn.DEBUG&&kt("QueryEngine","SDK will not create cache indexes for query:",kw(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Qe.resolve()):(SC()<=Xn.DEBUG&&kt("QueryEngine","Query:",kw(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(SC()<=Xn.DEBUG&&kt("QueryEngine","The SDK decides to create cache indexes for query:",kw(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ph(n))):Qe.resolve())}ji(t,n){if(Ige(n))return Qe.resolve(null);let r=Ph(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Dq(n,null,"F"),r=Ph(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=qn(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,Dq(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return Ige(n)||i.isEqual(mn.min())?Qe.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Qe.resolve(null):(SC()<=Xn.DEBUG&&kt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),kw(n)),this.es(t,o,n,o9t(i,-1)).next(a=>a))})}Zi(t,n){let r=new Ho(JMe(t));return n.forEach((i,s)=>{s5(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return SC()<=Xn.DEBUG&&kt("QueryEngine","Using full collection scan to execute query:",kw(n)),this.zi.getDocumentsMatchingQuery(t,n,Ny.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NUt{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Bi(Er),this.rs=new yT(s=>yte(s),vte),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new _Ut(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function DUt(e,t,n,r){return new NUt(e,t,n,r)}async function _3e(e,t){const n=gn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=qn();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function PUt(e,t){const n=gn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Qe.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);ui(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=qn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function w3e(e){const t=gn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function OUt(e,t){const n=gn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(Ra.EMPTY_BYTE_STRING,mn.min()).withLastLimboFreeSnapshotVersion(mn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=tg(),l=qn();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push($Ut(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(mn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Qe.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function $Ut(e,t,n){let r=qn(),i=qn();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=tg();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(mn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):kt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function MUt(e,t){const n=gn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function LUt(e,t){const n=gn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,Qe.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new _0(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function Lq(e,t,n){const r=gn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!zR(o))throw o;kt("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function jge(e,t,n){const r=gn(e);let i=mn.min(),s=qn();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=gn(u),d=f.rs.get(c);return d!==void 0?Qe.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,Ph(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:mn.min(),n?s:qn())).next(a=>(FUt(r,I9t(t),a),{documents:a,hs:s})))}function FUt(e,t,n){let r=e.ss.get(t)||mn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class Bge{constructor(){this.activeTargetIds=O9t()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class jUt{constructor(){this.no=new Bge,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Bge,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BUt{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uge{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){kt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){kt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aP=null;function bU(){return aP===null?aP=function(){return 268435456+Math.round(2147483648*Math.random())}():aP++,"0x"+aP.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UUt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zUt{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa="WebChannelConnection";class VUt extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=bU(),u=this.vo(n,r.toUriEncodedString());kt("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(kt("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw ik("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+mT}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=UUt[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=bU();return new Promise((o,a)=>{const u=new OMe;u.setWithCredentials(!0),u.listenOnce(MMe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case DO.NO_ERROR:const c=u.getResponseJson();kt(fa,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case DO.TIMEOUT:kt(fa,`RPC '${t}' ${s} timed out`),a(new _t(Be.DEADLINE_EXCEEDED,"Request time out"));break;case DO.HTTP_ERROR:const f=u.getStatus();if(kt(fa,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(Be).indexOf(y)>=0?y:Be.UNKNOWN}(h.status);a(new _t(p,h.message))}else a(new _t(Be.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new _t(Be.UNAVAILABLE,"Connection failed."));break;default:cn()}}finally{kt(fa,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);kt(fa,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=bU(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=jMe(),a=FMe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new $Me({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");kt(fa,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new zUt({lo:g=>{h?kt(fa,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(kt(fa,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),kt(fa,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,b=>{try{v(b)}catch(w){setTimeout(()=>{throw w},0)}})};return m(f,vA.EventType.OPEN,()=>{h||(kt(fa,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,vA.EventType.CLOSE,()=>{h||(h=!0,kt(fa,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,vA.EventType.ERROR,g=>{h||(h=!0,ik(fa,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new _t(Be.UNAVAILABLE,"The operation could not be completed")))}),m(f,vA.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];ui(!!v);const b=v,w=b.error||((y=b[0])===null||y===void 0?void 0:y.error);if(w){kt(fa,`RPC '${t}' stream ${i} received error:`,w);const E=w.status;let x=function(I){const k=Es[I];if(k!==void 0)return c3e(k)}(E),S=w.message;x===void 0&&(x=Be.INTERNAL,S="Unknown error status: "+E+" with message "+w.message),h=!0,p.po(new _t(x,S)),f.close()}else kt(fa,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,LMe.STAT_EVENT,g=>{g.stat===Cq.PROXY?kt(fa,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===Cq.NOPROXY&&kt(fa,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function _U(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c5(e){return new eUt(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3e{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&kt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3e{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new E3e(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===Be.RESOURCE_EXHAUSTED?(eg(n.toString()),eg("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===Be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new _t(Be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return kt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(kt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class HUt extends x3e{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=rUt(this.serializer,t),r=function(s){if(!("targetChange"in s))return mn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?mn.min():o.readTime?Oh(o.readTime):mn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=Mq(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=Rq(u)?{documents:oUt(s,u)}:{query:aUt(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=h3e(s,o.resumeToken);const l=Pq(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(mn.min())>0){a.readTime=Q3(s,o.snapshotVersion.toTimestamp());const l=Pq(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=lUt(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=Mq(this.serializer),n.removeTarget=t,this.i_(n)}}class qUt extends x3e{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(ui(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=sUt(t.writeResults,t.commitTime),r=Oh(t.commitTime);return this.listener.A_(r,n)}return ui(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=Mq(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>iUt(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WUt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new _t(Be.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,Oq(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new _t(Be.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,Oq(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _t(Be.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class GUt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(eg(n),this.y_=!1):kt("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YUt{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{E_(this)&&(kt("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=gn(u);l.M_.add(4),await WR(l),l.N_.set("Unknown"),l.M_.delete(4),await qR(l)}(this))})}),this.N_=new GUt(r,i)}}async function qR(e){if(E_(e))for(const t of e.x_)await t(!0)}async function WR(e){for(const t of e.x_)await t(!1)}function S3e(e,t){const n=gn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),kte(n)?Ite(n):vT(n).Xo()&&Ate(n,t))}function Cte(e,t){const n=gn(e),r=vT(n);n.F_.delete(t),r.Xo()&&T3e(n,t),n.F_.size===0&&(r.Xo()?r.n_():E_(n)&&n.N_.set("Unknown"))}function Ate(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(mn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}vT(e).P_(t)}function T3e(e,t){e.L_.xe(t),vT(e).I_(t)}function Ite(e){e.L_=new X9t({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),vT(e).start(),e.N_.w_()}function kte(e){return E_(e)&&!vT(e).Zo()&&e.F_.size>0}function E_(e){return gn(e).M_.size===0}function C3e(e){e.L_=void 0}async function KUt(e){e.N_.set("Online")}async function XUt(e){e.F_.forEach((t,n)=>{Ate(e,t)})}async function QUt(e,t){C3e(e),kte(e)?(e.N_.D_(t),Ite(e)):e.N_.set("Unknown")}async function JUt(e,t,n){if(e.N_.set("Online"),t instanceof d3e&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){kt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await J3(e,r)}else if(t instanceof $O?e.L_.Ke(t):t instanceof f3e?e.L_.He(t):e.L_.We(t),!n.isEqual(mn.min()))try{const r=await w3e(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(Ra.EMPTY_BYTE_STRING,c.snapshotVersion)),T3e(s,u);const f=new _0(c.target,u,l,c.sequenceNumber);Ate(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){kt("RemoteStore","Failed to raise snapshot:",r),await J3(e,r)}}async function J3(e,t,n){if(!zR(t))throw t;e.M_.add(1),await WR(e),e.N_.set("Offline"),n||(n=()=>w3e(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{kt("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await qR(e)})}function A3e(e,t){return t().catch(n=>J3(e,n,t))}async function f5(e){const t=gn(e),n=Py(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;ZUt(t);)try{const i=await MUt(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,e7t(t,i)}catch(i){await J3(t,i)}I3e(t)&&k3e(t)}function ZUt(e){return E_(e)&&e.v_.length<10}function e7t(e,t){e.v_.push(t);const n=Py(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function I3e(e){return E_(e)&&!Py(e).Zo()&&e.v_.length>0}function k3e(e){Py(e).start()}async function t7t(e){Py(e).V_()}async function n7t(e){const t=Py(e);for(const n of e.v_)t.d_(n.mutations)}async function r7t(e,t,n){const r=e.v_.shift(),i=_te.from(r,t,n);await A3e(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await f5(e)}async function i7t(e,t){t&&Py(e).E_&&await async function(r,i){if(function(o){return G9t(o)&&o!==Be.ABORTED}(i.code)){const s=r.v_.shift();Py(r).t_(),await A3e(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await f5(r)}}(e,t),I3e(e)&&k3e(e)}async function zge(e,t){const n=gn(e);n.asyncQueue.verifyOperationInProgress(),kt("RemoteStore","RemoteStore received new credentials");const r=E_(n);n.M_.add(3),await WR(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await qR(n)}async function s7t(e,t){const n=gn(e);t?(n.M_.delete(2),await qR(n)):t||(n.M_.add(2),await WR(n),n.N_.set("Unknown"))}function vT(e){return e.B_||(e.B_=function(n,r,i){const s=gn(n);return s.f_(),new HUt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:KUt.bind(null,e),To:XUt.bind(null,e),Ao:QUt.bind(null,e),h_:JUt.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),kte(e)?Ite(e):e.N_.set("Unknown")):(await e.B_.stop(),C3e(e))})),e.B_}function Py(e){return e.k_||(e.k_=function(n,r,i){const s=gn(n);return s.f_(),new qUt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:t7t.bind(null,e),Ao:i7t.bind(null,e),R_:n7t.bind(null,e),A_:r7t.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await f5(e)):(await e.k_.stop(),e.v_.length>0&&(kt("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rte{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Tm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new Rte(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _t(Be.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nte(e,t){if(eg("AsyncQueue",`${t}: ${e}`),zR(e))return new _t(Be.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Ht.comparator(n.key,r.key):(n,r)=>Ht.comparator(n.key,r.key),this.keyedMap=bA(),this.sortedSet=new Bi(this.comparator)}static emptySet(t){return new FE(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof FE)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new FE;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vge{constructor(){this.q_=new Bi(Ht.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):cn():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class Hx{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Hx(t,n,FE.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&i5(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o7t{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class a7t{constructor(){this.queries=new yT(t=>QMe(t),i5),this.onlineState="Unknown",this.z_=new Set}}async function R3e(e,t){const n=gn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new o7t,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Nte(o,`Initialization of query '${kw(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&Dte(n)}async function N3e(e,t){const n=gn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function u7t(e,t){const n=gn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&Dte(n)}function l7t(e,t,n){const r=gn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function Dte(e){e.z_.forEach(t=>{t.next()})}var Fq,Hge;(Hge=Fq||(Fq={})).J_="default",Hge.Cache="cache";class D3e{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new Hx(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=Hx.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==Fq.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3e{constructor(t){this.key=t}}class O3e{constructor(t){this.key=t}}class c7t{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=qn(),this.mutatedKeys=qn(),this.Ia=JMe(t),this.Ta=new FE(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new Vge,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=s5(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return cn()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new Hx(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Vge,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=qn(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new O3e(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new P3e(r))}),n}pa(t){this.la=t.hs,this.Pa=qn();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return Hx.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class f7t{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class d7t{constructor(t){this.key=t,this.wa=!1}}class h7t{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new yT(a=>QMe(a),i5),this.Da=new Map,this.Ca=new Set,this.va=new Bi(Ht.comparator),this.Fa=new Map,this.Ma=new xte,this.xa={},this.Oa=new Map,this.Na=Vx.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function p7t(e,t,n=!0){const r=B3e(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await $3e(r,t,n,!0),i}async function m7t(e,t){const n=B3e(e);await $3e(n,t,!0,!1)}async function $3e(e,t,n,r){const i=await LUt(e.localStore,Ph(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await g7t(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&S3e(e.remoteStore,i),a}async function g7t(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let b=g.view.da(y);b.Xi&&(b=await jge(m.localStore,g.query,!1).then(({documents:S})=>g.view.da(S,b)));const w=v&&v.targetChanges.get(g.targetId),E=v&&v.targetMismatches.get(g.targetId)!=null,x=g.view.applyChanges(b,m.isPrimaryClient,w,E);return Wge(m,g.targetId,x.fa),x.snapshot}(e,f,d,h);const s=await jge(e.localStore,t,!0),o=new c7t(t,s.hs),a=o.da(s.documents),u=HR.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);Wge(e,n,l.fa);const c=new f7t(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function y7t(e,t,n){const r=gn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!i5(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Lq(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Cte(r.remoteStore,i.targetId),jq(r,i.targetId)}).catch(UR)):(jq(r,i.targetId),await Lq(r.localStore,i.targetId,!0))}async function v7t(e,t){const n=gn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Cte(n.remoteStore,r.targetId))}async function b7t(e,t,n){const r=C7t(e);try{const i=await function(o,a){const u=gn(o),l=Vs.now(),c=a.reduce((h,p)=>h.add(p.key),qn());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=tg(),m=qn();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const b=z9t(v,f.get(v.key).overlayedDocument);b!=null&&y.push(new hv(v.key,b,VMe(b.value.mapValue),el.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:e3e(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Bi(Er)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await GR(r,i.changes),await f5(r.remoteStore)}catch(i){const s=Nte(i,"Failed to persist write");n.reject(s)}}async function M3e(e,t){const n=gn(e);try{const r=await OUt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(ui(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?ui(o.wa):i.removedDocuments.size>0&&(ui(o.wa),o.wa=!1))}),await GR(n,r,t)}catch(r){await UR(r)}}function qge(e,t,n){const r=gn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=gn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&Dte(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function _7t(e,t,n){const r=gn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new Bi(Ht.comparator);o=o.insert(s,va.newNoDocument(s,mn.min()));const a=qn().add(s),u=new l5(mn.min(),new Map,new Bi(Er),o,a);await M3e(r,u),r.va=r.va.remove(s),r.Fa.delete(t),Pte(r)}else await Lq(r.localStore,t,!1).then(()=>jq(r,t,n)).catch(UR)}async function w7t(e,t){const n=gn(e),r=t.batch.batchId;try{const i=await PUt(n.localStore,t);F3e(n,r,null),L3e(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await GR(n,i)}catch(i){await UR(i)}}async function E7t(e,t,n){const r=gn(e);try{const i=await function(o,a){const u=gn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(ui(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);F3e(r,t,n),L3e(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await GR(r,i)}catch(i){await UR(i)}}function L3e(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function F3e(e,t,n){const r=gn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function jq(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||j3e(e,r)})}function j3e(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(Cte(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),Pte(e))}function Wge(e,t,n){for(const r of n)r instanceof P3e?(e.Ma.addReference(r.key,t),x7t(e,r)):r instanceof O3e?(kt("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||j3e(e,r.key)):cn()}function x7t(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(kt("SyncEngine","New document in limbo: "+n),e.Ca.add(r),Pte(e))}function Pte(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Ht(hi.fromString(t)),r=e.Na.next();e.Fa.set(r,new d7t(n)),e.va=e.va.insert(n,r),S3e(e.remoteStore,new _0(Ph(bte(n.path)),r,"TargetPurposeLimboResolution",hte.oe))}}async function GR(e,t,n){const r=gn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=Tte.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=gn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Qe.forEach(l,d=>Qe.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Qe.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!zR(f))throw f;kt("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function S7t(e,t){const n=gn(e);if(!n.currentUser.isEqual(t)){kt("SyncEngine","User change. New user:",t.toKey());const r=await _3e(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new _t(Be.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await GR(n,r.us)}}function T7t(e,t){const n=gn(e),r=n.Fa.get(t);if(r&&r.wa)return qn().add(r.key);{let i=qn();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function B3e(e){const t=gn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=M3e.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=T7t.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=_7t.bind(null,t),t.Sa.h_=u7t.bind(null,t.eventManager),t.Sa.ka=l7t.bind(null,t.eventManager),t}function C7t(e){const t=gn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=w7t.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=E7t.bind(null,t),t}class Gge{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=c5(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return DUt(this.persistence,new RUt,t.initialUser,this.serializer)}createPersistence(t){return new AUt(Ste.Hr,this.serializer)}createSharedClientState(t){return new jUt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class A7t{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>qge(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=S7t.bind(null,this.syncEngine),await s7t(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new a7t}()}createDatastore(t){const n=c5(t.databaseInfo.databaseId),r=function(s){return new VUt(s)}(t.databaseInfo);return function(s,o,a,u){return new WUt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new YUt(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>qge(this.syncEngine,n,0),function(){return Uge.D()?new Uge:new BUt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new h7t(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=gn(r);kt("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await WR(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3e{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):eg("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7t{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Iu.UNAUTHENTICATED,this.clientId=BMe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{kt("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(kt("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new _t(Be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Tm;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Nte(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function wU(e,t){e.asyncQueue.verifyOperationInProgress(),kt("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await _3e(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Yge(e,t){e.asyncQueue.verifyOperationInProgress();const n=await z3e(e);kt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>zge(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>zge(t.remoteStore,i)),e._onlineComponents=t}function k7t(e){return e.name==="FirebaseError"?e.code===Be.FAILED_PRECONDITION||e.code===Be.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function z3e(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){kt("FirestoreClient","Using user provided OfflineComponentProvider");try{await wU(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!k7t(n))throw n;ik("Error using user provided cache. Falling back to memory cache: "+n),await wU(e,new Gge)}}else kt("FirestoreClient","Using default OfflineComponentProvider"),await wU(e,new Gge);return e._offlineComponents}async function Ote(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(kt("FirestoreClient","Using user provided OnlineComponentProvider"),await Yge(e,e._uninitializedComponentsProvider._online)):(kt("FirestoreClient","Using default OnlineComponentProvider"),await Yge(e,new A7t))),e._onlineComponents}function R7t(e){return z3e(e).then(t=>t.persistence)}function N7t(e){return Ote(e).then(t=>t.remoteStore)}function D7t(e){return Ote(e).then(t=>t.syncEngine)}async function V3e(e){const t=await Ote(e),n=t.eventManager;return n.onListen=p7t.bind(null,t.syncEngine),n.onUnlisten=y7t.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=m7t.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=v7t.bind(null,t.syncEngine),n}function P7t(e){return e.asyncQueue.enqueue(async()=>{const t=await R7t(e),n=await N7t(e);return t.setNetworkEnabled(!0),function(i){const s=gn(i);return s.M_.delete(0),qR(s)}(n)})}function O7t(e,t,n={}){const r=new Tm;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new U3e({next:d=>{o.enqueueAndForget(()=>N3e(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new _t(Be.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new _t(Be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new D3e(bte(a.path),c,{includeMetadataChanges:!0,ra:!0});return R3e(s,f)}(await V3e(e),e.asyncQueue,t,n,r)),r.promise}function $7t(e,t,n={}){const r=new Tm;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new U3e({next:d=>{o.enqueueAndForget(()=>N3e(s,f)),d.fromCache&&u.source==="server"?l.reject(new _t(Be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new D3e(a,c,{includeMetadataChanges:!0,ra:!0});return R3e(s,f)}(await V3e(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H3e(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kge=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q3e(e,t,n){if(!n)throw new _t(Be.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function M7t(e,t,n,r){if(t===!0&&r===!0)throw new _t(Be.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Xge(e){if(!Ht.isDocumentKey(e))throw new _t(Be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Qge(e){if(Ht.isDocumentKey(e))throw new _t(Be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function d5(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":cn()}function pd(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new _t(Be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=d5(e);throw new _t(Be.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jge{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new _t(Be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new _t(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}M7t("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=H3e((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new _t(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new _t(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new _t(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class $te{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jge({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new _t(Be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new _t(Be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jge(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new J8t;switch(r.type){case"firstParty":return new t9t(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _t(Be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Kge.get(n);r&&(kt("ComponentProvider","Removing Datastore"),Kge.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new x_(this.firestore,t,this._query)}}class ru{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new J0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ru(this.firestore,t,this._key)}}class J0 extends x_{constructor(t,n,r){super(t,n,bte(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ru(this.firestore,null,new Ht(t))}withConverter(t){return new J0(this.firestore,t,this._path)}}function wf(e,t,...n){if(e=li(e),q3e("collection","path",t),e instanceof $te){const r=hi.fromString(t,...n);return Qge(r),new J0(e,null,r)}{if(!(e instanceof ru||e instanceof J0))throw new _t(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(hi.fromString(t,...n));return Qge(r),new J0(e.firestore,null,r)}}function ws(e,t,...n){if(e=li(e),arguments.length===1&&(t=BMe.newId()),q3e("doc","path",t),e instanceof $te){const r=hi.fromString(t,...n);return Xge(r),new ru(e,null,new Ht(r))}{if(!(e instanceof ru||e instanceof J0))throw new _t(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(hi.fromString(t,...n));return Xge(r),new ru(e.firestore,e instanceof J0?e.converter:null,new Ht(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L7t{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new E3e(this,"async_queue_retry"),this.hu=()=>{const n=_U();n&&kt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=_U();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=_U();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Tm;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!zR(t))throw t;kt("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw eg("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=Rte.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&cn()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class pv extends $te{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new L7t}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||W3e(this),this._firestoreClient.terminate()}}function F7t(e,t,n){n||(n="(default)");const r=hT(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(tk(s,t))return i;throw new _t(Be.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new _t(Be.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new _t(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function YR(e){return e._firestoreClient||W3e(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function W3e(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new p9t(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,H3e(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new I7t(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function j7t(e){return P7t(YR(e=pd(e,pv)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(t){this._byteString=t}static fromBase64String(t){try{return new qx(Ra.fromBase64String(t))}catch(n){throw new _t(Be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new qx(Ra.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new _t(Be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lo(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mte=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new _t(Be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new _t(Be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Er(this._lat,t._lat)||Er(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B7t=/^__.*__$/;class U7t{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new hv(t,this.data,this.fieldMask,n,this.fieldTransforms):new VR(t,this.data,n,this.fieldTransforms)}}class G3e{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new hv(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function Y3e(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw cn()}}class Lte{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new Lte(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return Z3(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(Y3e(this.fu)&&B7t.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class z7t{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||c5(t)}Fu(t,n,r,i=!1){return new Lte({fu:t,methodName:n,vu:r,path:Lo.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function p5(e){const t=e._freezeSettings(),n=c5(e._databaseId);return new z7t(e._databaseId,!!t.ignoreUndefinedProperties,n)}function K3e(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);jte("Data must be an object, but it was:",o,r);const a=J3e(r,o);let u,l;if(s.merge)u=new Fl(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=Bq(t,f,n);if(!o.contains(d))throw new _t(Be.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);eLe(c,d)||c.push(d)}u=new Fl(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new U7t(new ju(a),u,l)}class m5 extends h5{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof m5}}class Fte extends h5{_toFieldTransform(t){return new F9t(t.path,new ck)}isEqual(t){return t instanceof Fte}}function X3e(e,t,n,r){const i=e.Fu(1,t,n);jte("Data must be an object, but it was:",i,r);const s=[],o=ju.empty();w_(r,(u,l)=>{const c=Bte(t,u,n);l=li(l);const f=i.Su(c);if(l instanceof m5)s.push(c);else{const d=XR(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new Fl(s);return new G3e(o,a,i.fieldTransforms)}function Q3e(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[Bq(t,r,n)],u=[i];if(s.length%2!=0)throw new _t(Be.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(Bq(t,s[d])),u.push(s[d+1]);const l=[],c=ju.empty();for(let d=a.length-1;d>=0;--d)if(!eLe(l,a[d])){const h=a[d];let p=u[d];p=li(p);const m=o.Su(h);if(p instanceof m5)l.push(h);else{const g=XR(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new Fl(l);return new G3e(c,f,o.fieldTransforms)}function V7t(e,t,n,r=!1){return XR(n,e.Fu(r?4:3,t))}function XR(e,t){if(Z3e(e=li(e)))return jte("Unsupported field value:",t,e),J3e(e,t);if(e instanceof h5)return function(r,i){if(!Y3e(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=XR(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=li(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $9t(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Vs.fromDate(r);return{timestampValue:Q3(i.serializer,s)}}if(r instanceof Vs){const s=new Vs(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Q3(i.serializer,s)}}if(r instanceof Mte)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qx)return{bytesValue:h3e(i.serializer,r._byteString)};if(r instanceof ru){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ete(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${d5(r)}`)}(e,t)}function J3e(e,t){const n={};return UMe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):w_(e,(r,i)=>{const s=XR(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Z3e(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Vs||e instanceof Mte||e instanceof qx||e instanceof ru||e instanceof h5)}function jte(e,t,n){if(!Z3e(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=d5(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function Bq(e,t,n){if((t=li(t))instanceof KR)return t._internalPath;if(typeof t=="string")return Bte(e,t);throw Z3("Field path arguments must be of type string or ",e,!1,void 0,n)}const H7t=new RegExp("[~\\*/\\[\\]]");function Bte(e,t,n){if(t.search(H7t)>=0)throw Z3(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new KR(...t.split("."))._internalPath}catch{throw Z3(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Z3(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new _t(Be.INVALID_ARGUMENT,a+e+u)}function eLe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tLe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ru(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new q7t(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(g5("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class q7t extends tLe{data(){return super.data()}}function g5(e,t){return typeof t=="string"?Bte(e,t):t instanceof KR?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W7t(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new _t(Be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ute{}class nLe extends Ute{}function Zge(e,t,...n){let r=[];t instanceof Ute&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof zte).length,a=s.filter(u=>u instanceof y5).length;if(o>1||o>0&&a>0)throw new _t(Be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class y5 extends nLe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new y5(t,n,r)}_apply(t){const n=this._parse(t);return rLe(t._query,n),new x_(t.firestore,t.converter,Nq(t._query,n))}_parse(t){const n=p5(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new _t(Be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){t0e(f,c);const h=[];for(const p of f)h.push(e0e(u,s,p));d={arrayValue:{values:h}}}else d=e0e(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||t0e(f,c),d=V7t(a,o,f,c==="in"||c==="not-in");return As.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function G7t(e,t,n){const r=t,i=g5("where",e);return y5._create(i,r,n)}class zte extends Ute{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new zte(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:hd.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)rLe(o,u),o=Nq(o,u)}(t._query,n),new x_(t.firestore,t.converter,Nq(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vte extends nLe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Vte(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new _t(Be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new _t(Be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lk(s,o)}(t._query,this._field,this._direction);return new x_(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new gT(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function Y7t(e,t="asc"){const n=t,r=g5("orderBy",e);return Vte._create(r,n)}function e0e(e,t,n){if(typeof(n=li(n))=="string"){if(n==="")throw new _t(Be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!XMe(t)&&n.indexOf("/")!==-1)throw new _t(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(hi.fromString(n));if(!Ht.isDocumentKey(r))throw new _t(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ege(e,new Ht(r))}if(n instanceof ru)return Ege(e,n._key);throw new _t(Be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${d5(n)}.`)}function t0e(e,t){if(!Array.isArray(e)||e.length===0)throw new _t(Be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function rLe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new _t(Be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new _t(Be.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class K7t{convertValue(t,n="none"){switch(Ob(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ts(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Pb(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw cn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return w_(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new Mte(Ts(t.latitude),Ts(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=mte(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ok(t));default:return null}}convertTimestamp(t){const n=Dy(t);return new Vs(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=hi.fromString(t);ui(b3e(r));const i=new ak(r.get(1),r.get(3)),s=new Ht(r.popFirst(5));return i.isEqual(n)||eg(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iLe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class sLe extends tLe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new MO(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(g5("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class MO extends sLe{data(t={}){return super.data(t)}}class X7t{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new wA(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new MO(this._firestore,this._userDataWriter,r.key,r,new wA(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new _t(Be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new MO(i._firestore,i._userDataWriter,a.doc.key,a.doc,new wA(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new MO(i._firestore,i._userDataWriter,a.doc.key,a.doc,new wA(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:Q7t(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Q7t(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return cn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EU(e){e=pd(e,ru);const t=pd(e.firestore,pv);return O7t(YR(t),e._key).then(n=>ezt(t,e,n))}class oLe extends K7t{constructor(t){super(),this.firestore=t}convertBytes(t){return new qx(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ru(this.firestore,null,n)}}function TC(e){e=pd(e,x_);const t=pd(e.firestore,pv),n=YR(t),r=new oLe(t);return W7t(e._query),$7t(n,e._query).then(i=>new X7t(t,r,e,i))}function Su(e,t,n){e=pd(e,ru);const r=pd(e.firestore,pv),i=iLe(e.converter,t,n);return v5(r,[K3e(p5(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,el.none())])}function J7t(e,t,n,...r){e=pd(e,ru);const i=pd(e.firestore,pv),s=p5(i);let o;return o=typeof(t=li(t))=="string"||t instanceof KR?Q3e(s,"updateDoc",e._key,t,n,r):X3e(s,"updateDoc",e._key,t),v5(i,[o.toMutation(e._key,el.exists(!0))])}function Z7t(e){return v5(pd(e.firestore,pv),[new u5(e._key,el.none())])}function v5(e,t){return function(r,i){const s=new Tm;return r.asyncQueue.enqueueAndForget(async()=>b7t(await D7t(r),i,s)),s.promise}(YR(e),t)}function ezt(e,t,n){const r=n.docs.get(t._key),i=new oLe(e);return new sLe(e,i,t._key,r,new wA(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tzt{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=p5(t)}set(t,n,r){this._verifyNotCommitted();const i=xU(t,this._firestore),s=iLe(i.converter,n,r),o=K3e(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,el.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=xU(t,this._firestore);let o;return o=typeof(n=li(n))=="string"||n instanceof KR?Q3e(this._dataReader,"WriteBatch.update",s._key,n,r,i):X3e(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,el.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=xU(t,this._firestore);return this._mutations=this._mutations.concat(new u5(n._key,el.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _t(Be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function xU(e,t){if((e=li(e)).firestore!==t)throw new _t(Be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function nzt(){return new Fte("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0e(e){return YR(e=pd(e,pv)),new tzt(e,t=>v5(e,t))}(function(t,n=!0){(function(i){mT=i})(__),Jm(new Kh("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new pv(new Z8t(r.getProvider("auth-internal")),new r9t(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new _t(Be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ak(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),id(vge,"4.6.3",t),id(vge,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uq=new Map,aLe={activated:!1,tokenObservers:[]},rzt={initialized:!1,enabled:!1};function Hs(e){return Uq.get(e)||Object.assign({},aLe)}function izt(e,t){return Uq.set(e,t),Uq.get(e)}function b5(){return rzt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uLe="https://content-firebaseappcheck.googleapis.com/v1",szt="exchangeRecaptchaV3Token",ozt="exchangeDebugToken",r0e={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},azt=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uzt{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new ek,this.pending.promise.catch(n=>{}),await lzt(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new ek,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function lzt(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const czt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Wu=new dT("appCheck","AppCheck",czt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0e(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function Hte(e){if(!Hs(e).activated)throw Wu.create("use-before-activation",{appName:e.name})}function lLe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=uP(n)+"d:"),r&&(o+=uP(r)+"h:"),o+=uP(i)+"m:"+uP(s)+"s",o}function uP(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qte({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw Wu.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Wu.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Wu.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Wu.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function fzt(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${uLe}/projects/${n}/apps/${r}:${szt}?key=${i}`,body:{recaptcha_v3_token:t}}}function cLe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${uLe}/projects/${n}/apps/${r}:${ozt}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dzt="firebase-app-check-database",hzt=1,hk="firebase-app-check-store",fLe="debug-token";let lP=null;function dLe(){return lP||(lP=new Promise((e,t)=>{try{const n=indexedDB.open(dzt,hzt);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Wu.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(hk,{keyPath:"compositeKey"})}}}catch(n){t(Wu.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),lP)}function pzt(e){return pLe(mLe(e))}function mzt(e,t){return hLe(mLe(e),t)}function gzt(e){return hLe(fLe,e)}function yzt(){return pLe(fLe)}async function hLe(e,t){const r=(await dLe()).transaction(hk,"readwrite"),s=r.objectStore(hk).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Wu.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function pLe(e){const n=(await dLe()).transaction(hk,"readonly"),i=n.objectStore(hk).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Wu.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function mLe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=new X4("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vzt(e){if(Gee()){let t;try{t=await pzt(e)}catch(n){pk.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function SU(e,t){return Gee()?mzt(e,t).catch(n=>{pk.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function bzt(){let e;try{e=await yzt()}catch{}if(e)return e;{const t=v4t();return gzt(t).catch(n=>pk.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wte(){return b5().enabled}async function Gte(){const e=b5();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function _zt(){const e=D$e(),t=b5();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new ek;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(bzt())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wzt={error:"UNKNOWN_ERROR"};function Ezt(e){return Wee.encodeString(JSON.stringify(e),!1)}async function zq(e,t=!1){const n=e.app;Hte(n);const r=Hs(n);let i=r.token,s;if(i&&!tE(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(tE(u)?i=u:await SU(n,void 0))}if(!t&&i&&tE(i))return{token:i.token};let o=!1;if(Wte()){r.exchangeTokenPromise||(r.exchangeTokenPromise=qte(cLe(n,await Gte()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await SU(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Hs(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?pk.warn(u.message):pk.error(u),s=u}let a;return i?s?tE(i)?a={token:i.token,internalError:s}:a=o0e(s):(a={token:i.token},r.token=i,await SU(n,i)):a=o0e(s),o&&vLe(n,a),a}async function xzt(e){const t=e.app;Hte(t);const{provider:n}=Hs(t);if(Wte()){const r=await Gte(),{token:i}=await qte(cLe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function gLe(e,t,n,r){const{app:i}=e,s=Hs(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&tE(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),s0e(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>s0e(e))}function yLe(e,t){const n=Hs(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function s0e(e){const{app:t}=e,n=Hs(t);let r=n.tokenRefresher;r||(r=Szt(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Szt(e){const{app:t}=e;return new uzt(async()=>{const n=Hs(t);let r;if(n.token?r=await zq(e,!0):r=await zq(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Hs(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},r0e.RETRIAL_MIN_WAIT,r0e.RETRIAL_MAX_WAIT)}function vLe(e,t){const n=Hs(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function tE(e){return e.expireTimeMillis-Date.now()>0}function o0e(e){return{token:Ezt(wzt),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tzt{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Hs(this.app);for(const n of t)yLe(this.app,n.next);return Promise.resolve()}}function Czt(e,t){return new Tzt(e,t)}function Azt(e){return{getToken:t=>zq(e,t),getLimitedUseToken:()=>xzt(e),addTokenListener:t=>gLe(e,"INTERNAL",t),removeTokenListener:t=>yLe(e.app,t)}}const Izt="@firebase/app-check",kzt="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rzt="https://www.google.com/recaptcha/api.js";function Nzt(e,t){const n=new ek,r=Hs(e);r.reCAPTCHAState={initialized:n};const i=Dzt(e),s=i0e(!1);return s?a0e(e,t,s,i,n):$zt(()=>{const o=i0e(!1);if(!o)throw new Error("no recaptcha");a0e(e,t,o,i,n)}),n.promise}function a0e(e,t,n,r,i){n.ready(()=>{Ozt(e,t,n,r),i.resolve(n)})}function Dzt(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function Pzt(e){Hte(e);const n=await Hs(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Hs(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function Ozt(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{Hs(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Hs(e).reCAPTCHAState.succeeded=!1}}),s=Hs(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function $zt(e){const t=document.createElement("script");t.src=Rzt,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yte{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;Lzt(this._throttleData);const i=await Pzt(this._app).catch(o=>{throw Wu.create("recaptcha-error")});if(!(!((t=Hs(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Wu.create("recaptcha-error");let s;try{s=await qte(fzt(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=Mzt(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Wu.create("throttled",{time:lLe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=hT(t,"heartbeat"),Nzt(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof Yte?this._siteKey===t._siteKey:!1}}function Mzt(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+azt,httpStatus:e};{const n=t?t.backoffCount:0,r=x4t(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function Lzt(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Wu.create("throttled",{time:lLe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fzt(e=Kee(),t){e=li(e);const n=hT(e,"app-check");if(b5().initialized||_zt(),Wte()&&Gte().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Wu.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return jzt(e,t.provider,t.isTokenAutoRefreshEnabled),Hs(e).isTokenAutoRefreshEnabled&&gLe(r,"INTERNAL",()=>{}),r}function jzt(e,t,n){const r=izt(e,Object.assign({},aLe));r.activated=!0,r.provider=t,r.cachedTokenPromise=vzt(e).then(i=>(i&&tE(i)&&(r.token=i,vLe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const Bzt="app-check",u0e="app-check-internal";function Uzt(){Jm(new Kh(Bzt,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return Czt(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(u0e).initialize()})),Jm(new Kh(u0e,e=>{const t=e.getProvider("app-check").getImmediate();return Azt(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),id(Izt,kzt)}Uzt();function cP(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var bLe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof cP=="function"&&cP;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof cP=="function"&&cP,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof ao<"u"?ao:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==o&&m(this,E)}f.prototype.catch=function(E){return this.then(null,E)},f.prototype.then=function(E,x){if(typeof E!="function"&&this.state===l||typeof x!="function"&&this.state===u)return this;var S=new this.constructor(o);if(this.state!==c){var C=this.state===l?E:x;h(S,C,this.outcome)}else this.queue.push(new d(S,E,x));return S};function d(E,x,S){this.promise=E,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},d.prototype.otherCallFulfilled=function(E){h(this.promise,this.onFulfilled,E)},d.prototype.callRejected=function(E){a.reject(this.promise,E)},d.prototype.otherCallRejected=function(E){h(this.promise,this.onRejected,E)};function h(E,x,S){s(function(){var C;try{C=x(S)}catch(I){return a.reject(E,I)}C===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,C)})}a.resolve=function(E,x){var S=g(p,x);if(S.status==="error")return a.reject(E,S.value);var C=S.value;if(C)m(E,C);else{E.state=l,E.outcome=x;for(var I=-1,k=E.queue.length;++I<k;)E.queue[I].callFulfilled(x)}return E},a.reject=function(E,x){E.state=u,E.outcome=x;for(var S=-1,C=E.queue.length;++S<C;)E.queue[S].callRejected(x);return E};function p(E){var x=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof x=="function")return function(){x.apply(E,arguments)}}function m(E,x){var S=!1;function C(O){S||(S=!0,a.reject(E,O))}function I(O){S||(S=!0,a.resolve(E,O))}function k(){x(I,C)}var R=g(k);R.status==="error"&&C(R.value)}function g(E,x){var S={};try{S.value=E(x),S.status="success"}catch(C){S.status="error",S.value=C}return S}f.resolve=y;function y(E){return E instanceof this?E:a.resolve(new this(o),E)}f.reject=v;function v(E){var x=new this(o);return a.reject(x,E)}f.all=b;function b(E){var x=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=E.length,C=!1;if(!S)return this.resolve([]);for(var I=new Array(S),k=0,R=-1,O=new this(o);++R<S;)P(E[R],R);return O;function P($,L){x.resolve($).then(M,function(B){C||(C=!0,a.reject(O,B))});function M(B){I[L]=B,++k===S&&!C&&(C=!0,a.resolve(O,I))}}}f.race=w;function w(E){var x=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=E.length,C=!1;if(!S)return this.resolve([]);for(var I=-1,k=new this(o);++I<S;)R(E[I]);return k;function R(O){x.resolve(O).then(function(P){C||(C=!0,a.resolve(k,P))},function(P){C||(C=!0,a.reject(k,P))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof ao<"u"?ao:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function o(Y,se){if(!(Y instanceof se))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var Y=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),se=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||se)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(Y,se){Y=Y||[],se=se||{};try{return new Blob(Y,se)}catch(ce){if(ce.name!=="TypeError")throw ce;for(var Z=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,he=new Z,be=0;be<Y.length;be+=1)he.append(Y[be]);return he.getBlob(se.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(Y,se){se&&Y.then(function(Z){se(null,Z)},function(Z){se(Z)})}function h(Y,se,Z){typeof se=="function"&&Y.then(se),typeof Z=="function"&&Y.catch(Z)}function p(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},b=Object.prototype.toString,w="readonly",E="readwrite";function x(Y){for(var se=Y.length,Z=new ArrayBuffer(se),he=new Uint8Array(Z),be=0;be<se;be++)he[be]=Y.charCodeAt(be);return Z}function S(Y){return new f(function(se){var Z=Y.transaction(g,E),he=c([""]);Z.objectStore(g).put(he,"key"),Z.onabort=function(be){be.preventDefault(),be.stopPropagation(),se(!1)},Z.oncomplete=function(){var be=navigator.userAgent.match(/Chrome\/(\d+)/),ce=navigator.userAgent.match(/Edge\//);se(ce||!be||parseInt(be[1],10)>=43)}}).catch(function(){return!1})}function C(Y){return typeof y=="boolean"?f.resolve(y):S(Y).then(function(se){return y=se,y})}function I(Y){var se=v[Y.name],Z={};Z.promise=new f(function(he,be){Z.resolve=he,Z.reject=be}),se.deferredOperations.push(Z),se.dbReady?se.dbReady=se.dbReady.then(function(){return Z.promise}):se.dbReady=Z.promise}function k(Y){var se=v[Y.name],Z=se.deferredOperations.pop();if(Z)return Z.resolve(),Z.promise}function R(Y,se){var Z=v[Y.name],he=Z.deferredOperations.pop();if(he)return he.reject(se),he.promise}function O(Y,se){return new f(function(Z,he){if(v[Y.name]=v[Y.name]||W(),Y.db)if(se)I(Y),Y.db.close();else return Z(Y.db);var be=[Y.name];se&&be.push(Y.version);var ce=u.open.apply(u,be);se&&(ce.onupgradeneeded=function(Oe){var He=ce.result;try{He.createObjectStore(Y.storeName),Oe.oldVersion<=1&&He.createObjectStore(g)}catch(Ge){if(Ge.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+Oe.oldVersion+" to version "+Oe.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw Ge}}),ce.onerror=function(Oe){Oe.preventDefault(),he(ce.error)},ce.onsuccess=function(){var Oe=ce.result;Oe.onversionchange=function(He){He.target.close()},Z(Oe),k(Y)}})}function P(Y){return O(Y,!1)}function $(Y){return O(Y,!0)}function L(Y,se){if(!Y.db)return!0;var Z=!Y.db.objectStoreNames.contains(Y.storeName),he=Y.version<Y.db.version,be=Y.version>Y.db.version;if(he&&(Y.version!==se&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),be||Z){if(Z){var ce=Y.db.version+1;ce>Y.version&&(Y.version=ce)}return!0}return!1}function M(Y){return new f(function(se,Z){var he=new FileReader;he.onerror=Z,he.onloadend=function(be){var ce=btoa(be.target.result||"");se({__local_forage_encoded_blob:!0,data:ce,type:Y.type})},he.readAsBinaryString(Y)})}function B(Y){var se=x(atob(Y.data));return c([se],{type:Y.type})}function U(Y){return Y&&Y.__local_forage_encoded_blob}function V(Y){var se=this,Z=se._initReady().then(function(){var he=v[se._dbInfo.name];if(he&&he.dbReady)return he.dbReady});return h(Z,Y,Y),Z}function D(Y){I(Y);for(var se=v[Y.name],Z=se.forages,he=0;he<Z.length;he++){var be=Z[he];be._dbInfo.db&&(be._dbInfo.db.close(),be._dbInfo.db=null)}return Y.db=null,P(Y).then(function(ce){return Y.db=ce,L(Y)?$(Y):ce}).then(function(ce){Y.db=se.db=ce;for(var Oe=0;Oe<Z.length;Oe++)Z[Oe]._dbInfo.db=ce}).catch(function(ce){throw R(Y,ce),ce})}function z(Y,se,Z,he){he===void 0&&(he=1);try{var be=Y.db.transaction(Y.storeName,se);Z(null,be)}catch(ce){if(he>0&&(!Y.db||ce.name==="InvalidStateError"||ce.name==="NotFoundError"))return f.resolve().then(function(){if(!Y.db||ce.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),$(Y)}).then(function(){return D(Y).then(function(){z(Y,se,Z,he-1)})}).catch(Z);Z(ce)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function j(Y){var se=this,Z={db:null};if(Y)for(var he in Y)Z[he]=Y[he];var be=v[Z.name];be||(be=W(),v[Z.name]=be),be.forages.push(se),se._initReady||(se._initReady=se.ready,se.ready=V);var ce=[];function Oe(){return f.resolve()}for(var He=0;He<be.forages.length;He++){var Ge=be.forages[He];Ge!==se&&ce.push(Ge._initReady().catch(Oe))}var Ke=be.forages.slice(0);return f.all(ce).then(function(){return Z.db=be.db,P(Z)}).then(function(st){return Z.db=st,L(Z,se._defaultConfig.version)?$(Z):st}).then(function(st){Z.db=be.db=st,se._dbInfo=Z;for(var xt=0;xt<Ke.length;xt++){var vn=Ke[xt];vn!==se&&(vn._dbInfo.db=Z.db,vn._dbInfo.version=Z.version)}})}function q(Y,se){var Z=this;Y=p(Y);var he=new f(function(be,ce){Z.ready().then(function(){z(Z._dbInfo,w,function(Oe,He){if(Oe)return ce(Oe);try{var Ge=He.objectStore(Z._dbInfo.storeName),Ke=Ge.get(Y);Ke.onsuccess=function(){var st=Ke.result;st===void 0&&(st=null),U(st)&&(st=B(st)),be(st)},Ke.onerror=function(){ce(Ke.error)}}catch(st){ce(st)}})}).catch(ce)});return d(he,se),he}function G(Y,se){var Z=this,he=new f(function(be,ce){Z.ready().then(function(){z(Z._dbInfo,w,function(Oe,He){if(Oe)return ce(Oe);try{var Ge=He.objectStore(Z._dbInfo.storeName),Ke=Ge.openCursor(),st=1;Ke.onsuccess=function(){var xt=Ke.result;if(xt){var vn=xt.value;U(vn)&&(vn=B(vn));var Ot=Y(vn,xt.key,st++);Ot!==void 0?be(Ot):xt.continue()}else be()},Ke.onerror=function(){ce(Ke.error)}}catch(xt){ce(xt)}})}).catch(ce)});return d(he,se),he}function te(Y,se,Z){var he=this;Y=p(Y);var be=new f(function(ce,Oe){var He;he.ready().then(function(){return He=he._dbInfo,b.call(se)==="[object Blob]"?C(He.db).then(function(Ge){return Ge?se:M(se)}):se}).then(function(Ge){z(he._dbInfo,E,function(Ke,st){if(Ke)return Oe(Ke);try{var xt=st.objectStore(he._dbInfo.storeName);Ge===null&&(Ge=void 0);var vn=xt.put(Ge,Y);st.oncomplete=function(){Ge===void 0&&(Ge=null),ce(Ge)},st.onabort=st.onerror=function(){var Ot=vn.error?vn.error:vn.transaction.error;Oe(Ot)}}catch(Ot){Oe(Ot)}})}).catch(Oe)});return d(be,Z),be}function le(Y,se){var Z=this;Y=p(Y);var he=new f(function(be,ce){Z.ready().then(function(){z(Z._dbInfo,E,function(Oe,He){if(Oe)return ce(Oe);try{var Ge=He.objectStore(Z._dbInfo.storeName),Ke=Ge.delete(Y);He.oncomplete=function(){be()},He.onerror=function(){ce(Ke.error)},He.onabort=function(){var st=Ke.error?Ke.error:Ke.transaction.error;ce(st)}}catch(st){ce(st)}})}).catch(ce)});return d(he,se),he}function fe(Y){var se=this,Z=new f(function(he,be){se.ready().then(function(){z(se._dbInfo,E,function(ce,Oe){if(ce)return be(ce);try{var He=Oe.objectStore(se._dbInfo.storeName),Ge=He.clear();Oe.oncomplete=function(){he()},Oe.onabort=Oe.onerror=function(){var Ke=Ge.error?Ge.error:Ge.transaction.error;be(Ke)}}catch(Ke){be(Ke)}})}).catch(be)});return d(Z,Y),Z}function de(Y){var se=this,Z=new f(function(he,be){se.ready().then(function(){z(se._dbInfo,w,function(ce,Oe){if(ce)return be(ce);try{var He=Oe.objectStore(se._dbInfo.storeName),Ge=He.count();Ge.onsuccess=function(){he(Ge.result)},Ge.onerror=function(){be(Ge.error)}}catch(Ke){be(Ke)}})}).catch(be)});return d(Z,Y),Z}function ye(Y,se){var Z=this,he=new f(function(be,ce){if(Y<0){be(null);return}Z.ready().then(function(){z(Z._dbInfo,w,function(Oe,He){if(Oe)return ce(Oe);try{var Ge=He.objectStore(Z._dbInfo.storeName),Ke=!1,st=Ge.openKeyCursor();st.onsuccess=function(){var xt=st.result;if(!xt){be(null);return}Y===0||Ke?be(xt.key):(Ke=!0,xt.advance(Y))},st.onerror=function(){ce(st.error)}}catch(xt){ce(xt)}})}).catch(ce)});return d(he,se),he}function Ie(Y){var se=this,Z=new f(function(he,be){se.ready().then(function(){z(se._dbInfo,w,function(ce,Oe){if(ce)return be(ce);try{var He=Oe.objectStore(se._dbInfo.storeName),Ge=He.openKeyCursor(),Ke=[];Ge.onsuccess=function(){var st=Ge.result;if(!st){he(Ke);return}Ke.push(st.key),st.continue()},Ge.onerror=function(){be(Ge.error)}}catch(st){be(st)}})}).catch(be)});return d(Z,Y),Z}function pe(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var he=this,be;if(!Y.name)be=f.reject("Invalid arguments");else{var ce=Y.name===Z.name&&he._dbInfo.db,Oe=ce?f.resolve(he._dbInfo.db):P(Y).then(function(He){var Ge=v[Y.name],Ke=Ge.forages;Ge.db=He;for(var st=0;st<Ke.length;st++)Ke[st]._dbInfo.db=He;return He});Y.storeName?be=Oe.then(function(He){if(He.objectStoreNames.contains(Y.storeName)){var Ge=He.version+1;I(Y);var Ke=v[Y.name],st=Ke.forages;He.close();for(var xt=0;xt<st.length;xt++){var vn=st[xt];vn._dbInfo.db=null,vn._dbInfo.version=Ge}var Ot=new f(function(Vn,Dr){var Pr=u.open(Y.name,Ge);Pr.onerror=function(ea){var $d=Pr.result;$d.close(),Dr(ea)},Pr.onupgradeneeded=function(){var ea=Pr.result;ea.deleteObjectStore(Y.storeName)},Pr.onsuccess=function(){var ea=Pr.result;ea.close(),Vn(ea)}});return Ot.then(function(Vn){Ke.db=Vn;for(var Dr=0;Dr<st.length;Dr++){var Pr=st[Dr];Pr._dbInfo.db=Vn,k(Pr._dbInfo)}}).catch(function(Vn){throw(R(Y,Vn)||f.resolve()).catch(function(){}),Vn})}}):be=Oe.then(function(He){I(Y);var Ge=v[Y.name],Ke=Ge.forages;He.close();for(var st=0;st<Ke.length;st++){var xt=Ke[st];xt._dbInfo.db=null}var vn=new f(function(Ot,Vn){var Dr=u.deleteDatabase(Y.name);Dr.onerror=function(){var Pr=Dr.result;Pr&&Pr.close(),Vn(Dr.error)},Dr.onblocked=function(){console.warn('dropInstance blocked for database "'+Y.name+'" until all open connections are closed')},Dr.onsuccess=function(){var Pr=Dr.result;Pr&&Pr.close(),Ot(Pr)}});return vn.then(function(Ot){Ge.db=Ot;for(var Vn=0;Vn<Ke.length;Vn++){var Dr=Ke[Vn];k(Dr._dbInfo)}}).catch(function(Ot){throw(R(Y,Ot)||f.resolve()).catch(function(){}),Ot})})}return d(be,se),be}var qe={_driver:"asyncStorage",_initStorage:j,_support:l(),iterate:G,getItem:q,setItem:te,removeItem:le,clear:fe,length:de,key:ye,keys:Ie,dropInstance:pe};function Ue(){return typeof openDatabase=="function"}var vt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",it="~~local_forage_type~",_e=/^~~local_forage_type~([^~]+)~/,ke="__lfsc__:",Ve=ke.length,ct="arbf",Mt="blob",Ye="si08",ve="ui08",pt="uic8",bt="si16",ge="si32",Ae="ur16",We="ui32",ut="fl32",wt="fl64",Bn=Ve+ct.length,kr=Object.prototype.toString;function Un(Y){var se=Y.length*.75,Z=Y.length,he,be=0,ce,Oe,He,Ge;Y[Y.length-1]==="="&&(se--,Y[Y.length-2]==="="&&se--);var Ke=new ArrayBuffer(se),st=new Uint8Array(Ke);for(he=0;he<Z;he+=4)ce=vt.indexOf(Y[he]),Oe=vt.indexOf(Y[he+1]),He=vt.indexOf(Y[he+2]),Ge=vt.indexOf(Y[he+3]),st[be++]=ce<<2|Oe>>4,st[be++]=(Oe&15)<<4|He>>2,st[be++]=(He&3)<<6|Ge&63;return Ke}function pr(Y){var se=new Uint8Array(Y),Z="",he;for(he=0;he<se.length;he+=3)Z+=vt[se[he]>>2],Z+=vt[(se[he]&3)<<4|se[he+1]>>4],Z+=vt[(se[he+1]&15)<<2|se[he+2]>>6],Z+=vt[se[he+2]&63];return se.length%3===2?Z=Z.substring(0,Z.length-1)+"=":se.length%3===1&&(Z=Z.substring(0,Z.length-2)+"=="),Z}function bn(Y,se){var Z="";if(Y&&(Z=kr.call(Y)),Y&&(Z==="[object ArrayBuffer]"||Y.buffer&&kr.call(Y.buffer)==="[object ArrayBuffer]")){var he,be=ke;Y instanceof ArrayBuffer?(he=Y,be+=ct):(he=Y.buffer,Z==="[object Int8Array]"?be+=Ye:Z==="[object Uint8Array]"?be+=ve:Z==="[object Uint8ClampedArray]"?be+=pt:Z==="[object Int16Array]"?be+=bt:Z==="[object Uint16Array]"?be+=Ae:Z==="[object Int32Array]"?be+=ge:Z==="[object Uint32Array]"?be+=We:Z==="[object Float32Array]"?be+=ut:Z==="[object Float64Array]"?be+=wt:se(new Error("Failed to get type for BinaryArray"))),se(be+pr(he))}else if(Z==="[object Blob]"){var ce=new FileReader;ce.onload=function(){var Oe=it+Y.type+"~"+pr(this.result);se(ke+Mt+Oe)},ce.readAsArrayBuffer(Y)}else try{se(JSON.stringify(Y))}catch(Oe){console.error("Couldn't convert value into a JSON string: ",Y),se(null,Oe)}}function Rn(Y){if(Y.substring(0,Ve)!==ke)return JSON.parse(Y);var se=Y.substring(Bn),Z=Y.substring(Ve,Bn),he;if(Z===Mt&&_e.test(se)){var be=se.match(_e);he=be[1],se=se.substring(be[0].length)}var ce=Un(se);switch(Z){case ct:return ce;case Mt:return c([ce],{type:he});case Ye:return new Int8Array(ce);case ve:return new Uint8Array(ce);case pt:return new Uint8ClampedArray(ce);case bt:return new Int16Array(ce);case Ae:return new Uint16Array(ce);case ge:return new Int32Array(ce);case We:return new Uint32Array(ce);case ut:return new Float32Array(ce);case wt:return new Float64Array(ce);default:throw new Error("Unkown type: "+Z)}}var or={serialize:bn,deserialize:Rn,stringToBuffer:Un,bufferToString:pr};function ar(Y,se,Z,he){Y.executeSql("CREATE TABLE IF NOT EXISTS "+se.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Z,he)}function Jo(Y){var se=this,Z={db:null};if(Y)for(var he in Y)Z[he]=typeof Y[he]!="string"?Y[he].toString():Y[he];var be=new f(function(ce,Oe){try{Z.db=openDatabase(Z.name,String(Z.version),Z.description,Z.size)}catch(He){return Oe(He)}Z.db.transaction(function(He){ar(He,Z,function(){se._dbInfo=Z,ce()},function(Ge,Ke){Oe(Ke)})},Oe)});return Z.serializer=or,be}function Ui(Y,se,Z,he,be,ce){Y.executeSql(Z,he,be,function(Oe,He){He.code===He.SYNTAX_ERR?Oe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[se.storeName],function(Ge,Ke){Ke.rows.length?ce(Ge,He):ar(Ge,se,function(){Ge.executeSql(Z,he,be,ce)},ce)},ce):ce(Oe,He)},ce)}function Nn(Y,se){var Z=this;Y=p(Y);var he=new f(function(be,ce){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(He){Ui(He,Oe,"SELECT * FROM "+Oe.storeName+" WHERE key = ? LIMIT 1",[Y],function(Ge,Ke){var st=Ke.rows.length?Ke.rows.item(0).value:null;st&&(st=Oe.serializer.deserialize(st)),be(st)},function(Ge,Ke){ce(Ke)})})}).catch(ce)});return d(he,se),he}function zi(Y,se){var Z=this,he=new f(function(be,ce){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(He){Ui(He,Oe,"SELECT * FROM "+Oe.storeName,[],function(Ge,Ke){for(var st=Ke.rows,xt=st.length,vn=0;vn<xt;vn++){var Ot=st.item(vn),Vn=Ot.value;if(Vn&&(Vn=Oe.serializer.deserialize(Vn)),Vn=Y(Vn,Ot.key,vn+1),Vn!==void 0){be(Vn);return}}be()},function(Ge,Ke){ce(Ke)})})}).catch(ce)});return d(he,se),he}function Rr(Y,se,Z,he){var be=this;Y=p(Y);var ce=new f(function(Oe,He){be.ready().then(function(){se===void 0&&(se=null);var Ge=se,Ke=be._dbInfo;Ke.serializer.serialize(se,function(st,xt){xt?He(xt):Ke.db.transaction(function(vn){Ui(vn,Ke,"INSERT OR REPLACE INTO "+Ke.storeName+" (key, value) VALUES (?, ?)",[Y,st],function(){Oe(Ge)},function(Ot,Vn){He(Vn)})},function(vn){if(vn.code===vn.QUOTA_ERR){if(he>0){Oe(Rr.apply(be,[Y,Ge,Z,he-1]));return}He(vn)}})})}).catch(He)});return d(ce,Z),ce}function _s(Y,se,Z){return Rr.apply(this,[Y,se,Z,1])}function kp(Y,se){var Z=this;Y=p(Y);var he=new f(function(be,ce){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(He){Ui(He,Oe,"DELETE FROM "+Oe.storeName+" WHERE key = ?",[Y],function(){be()},function(Ge,Ke){ce(Ke)})})}).catch(ce)});return d(he,se),he}function bl(Y){var se=this,Z=new f(function(he,be){se.ready().then(function(){var ce=se._dbInfo;ce.db.transaction(function(Oe){Ui(Oe,ce,"DELETE FROM "+ce.storeName,[],function(){he()},function(He,Ge){be(Ge)})})}).catch(be)});return d(Z,Y),Z}function Pd(Y){var se=this,Z=new f(function(he,be){se.ready().then(function(){var ce=se._dbInfo;ce.db.transaction(function(Oe){Ui(Oe,ce,"SELECT COUNT(key) as c FROM "+ce.storeName,[],function(He,Ge){var Ke=Ge.rows.item(0).c;he(Ke)},function(He,Ge){be(Ge)})})}).catch(be)});return d(Z,Y),Z}function Cr(Y,se){var Z=this,he=new f(function(be,ce){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(He){Ui(He,Oe,"SELECT key FROM "+Oe.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(Ge,Ke){var st=Ke.rows.length?Ke.rows.item(0).key:null;be(st)},function(Ge,Ke){ce(Ke)})})}).catch(ce)});return d(he,se),he}function Pi(Y){var se=this,Z=new f(function(he,be){se.ready().then(function(){var ce=se._dbInfo;ce.db.transaction(function(Oe){Ui(Oe,ce,"SELECT key FROM "+ce.storeName,[],function(He,Ge){for(var Ke=[],st=0;st<Ge.rows.length;st++)Ke.push(Ge.rows.item(st).key);he(Ke)},function(He,Ge){be(Ge)})})}).catch(be)});return d(Z,Y),Z}function ni(Y){return new f(function(se,Z){Y.transaction(function(he){he.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(be,ce){for(var Oe=[],He=0;He<ce.rows.length;He++)Oe.push(ce.rows.item(He).name);se({db:Y,storeNames:Oe})},function(be,ce){Z(ce)})},function(he){Z(he)})})}function vu(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var he=this,be;return Y.name?be=new f(function(ce){var Oe;Y.name===Z.name?Oe=he._dbInfo.db:Oe=openDatabase(Y.name,"","",0),Y.storeName?ce({db:Oe,storeNames:[Y.storeName]}):ce(ni(Oe))}).then(function(ce){return new f(function(Oe,He){ce.db.transaction(function(Ge){function Ke(Ot){return new f(function(Vn,Dr){Ge.executeSql("DROP TABLE IF EXISTS "+Ot,[],function(){Vn()},function(Pr,ea){Dr(ea)})})}for(var st=[],xt=0,vn=ce.storeNames.length;xt<vn;xt++)st.push(Ke(ce.storeNames[xt]));f.all(st).then(function(){Oe()}).catch(function(Ot){He(Ot)})},function(Ge){He(Ge)})})}):be=f.reject("Invalid arguments"),d(be,se),be}var Ma={_driver:"webSQLStorage",_initStorage:Jo,_support:Ue(),iterate:zi,getItem:Nn,setItem:_s,removeItem:kp,clear:bl,length:Pd,key:Cr,keys:Pi,dropInstance:vu};function La(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function oe(Y,se){var Z=Y.name+"/";return Y.storeName!==se.storeName&&(Z+=Y.storeName+"/"),Z}function ee(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch{return!0}}function ae(){return!ee()||localStorage.length>0}function Ce(Y){var se=this,Z={};if(Y)for(var he in Y)Z[he]=Y[he];return Z.keyPrefix=oe(Y,se._defaultConfig),ae()?(se._dbInfo=Z,Z.serializer=or,f.resolve()):f.reject()}function Se(Y){var se=this,Z=se.ready().then(function(){for(var he=se._dbInfo.keyPrefix,be=localStorage.length-1;be>=0;be--){var ce=localStorage.key(be);ce.indexOf(he)===0&&localStorage.removeItem(ce)}});return d(Z,Y),Z}function ot(Y,se){var Z=this;Y=p(Y);var he=Z.ready().then(function(){var be=Z._dbInfo,ce=localStorage.getItem(be.keyPrefix+Y);return ce&&(ce=be.serializer.deserialize(ce)),ce});return d(he,se),he}function Tt(Y,se){var Z=this,he=Z.ready().then(function(){for(var be=Z._dbInfo,ce=be.keyPrefix,Oe=ce.length,He=localStorage.length,Ge=1,Ke=0;Ke<He;Ke++){var st=localStorage.key(Ke);if(st.indexOf(ce)===0){var xt=localStorage.getItem(st);if(xt&&(xt=be.serializer.deserialize(xt)),xt=Y(xt,st.substring(Oe),Ge++),xt!==void 0)return xt}}});return d(he,se),he}function Gt(Y,se){var Z=this,he=Z.ready().then(function(){var be=Z._dbInfo,ce;try{ce=localStorage.key(Y)}catch{ce=null}return ce&&(ce=ce.substring(be.keyPrefix.length)),ce});return d(he,se),he}function Ln(Y){var se=this,Z=se.ready().then(function(){for(var he=se._dbInfo,be=localStorage.length,ce=[],Oe=0;Oe<be;Oe++){var He=localStorage.key(Oe);He.indexOf(he.keyPrefix)===0&&ce.push(He.substring(he.keyPrefix.length))}return ce});return d(Z,Y),Z}function zn(Y){var se=this,Z=se.keys().then(function(he){return he.length});return d(Z,Y),Z}function yn(Y,se){var Z=this;Y=p(Y);var he=Z.ready().then(function(){var be=Z._dbInfo;localStorage.removeItem(be.keyPrefix+Y)});return d(he,se),he}function ur(Y,se,Z){var he=this;Y=p(Y);var be=he.ready().then(function(){se===void 0&&(se=null);var ce=se;return new f(function(Oe,He){var Ge=he._dbInfo;Ge.serializer.serialize(se,function(Ke,st){if(st)He(st);else try{localStorage.setItem(Ge.keyPrefix+Y,Ke),Oe(ce)}catch(xt){(xt.name==="QuotaExceededError"||xt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&He(xt),He(xt)}})})});return d(be,Z),be}function Nr(Y,se){if(se=m.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var Z=this.config();Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName}var he=this,be;return Y.name?be=new f(function(ce){Y.storeName?ce(oe(Y,he._defaultConfig)):ce(Y.name+"/")}).then(function(ce){for(var Oe=localStorage.length-1;Oe>=0;Oe--){var He=localStorage.key(Oe);He.indexOf(ce)===0&&localStorage.removeItem(He)}}):be=f.reject("Invalid arguments"),d(be,se),be}var Wt={_driver:"localStorageWrapper",_initStorage:Ce,_support:La(),iterate:Tt,getItem:ot,setItem:ur,removeItem:yn,clear:Se,length:zn,key:Gt,keys:Ln,dropInstance:Nr},lr=function(se,Z){return se===Z||typeof se=="number"&&typeof Z=="number"&&isNaN(se)&&isNaN(Z)},Kr=function(se,Z){for(var he=se.length,be=0;be<he;){if(lr(se[be],Z))return!0;be++}return!1},nr=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},Oi={},Xs={},ri={INDEXEDDB:qe,WEBSQL:Ma,LOCALSTORAGE:Wt},So=[ri.INDEXEDDB._driver,ri.WEBSQL._driver,ri.LOCALSTORAGE._driver],Vi=["dropInstance"],Hi=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Vi),Zo={description:"",driver:So.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Fa(Y,se){Y[se]=function(){var Z=arguments;return Y.ready().then(function(){return Y[se].apply(Y,Z)})}}function Qs(){for(var Y=1;Y<arguments.length;Y++){var se=arguments[Y];if(se)for(var Z in se)se.hasOwnProperty(Z)&&(nr(se[Z])?arguments[0][Z]=se[Z].slice():arguments[0][Z]=se[Z])}return arguments[0]}var pc=function(){function Y(se){o(this,Y);for(var Z in ri)if(ri.hasOwnProperty(Z)){var he=ri[Z],be=he._driver;this[Z]=be,Oi[be]||this.defineDriver(he)}this._defaultConfig=Qs({},Zo),this._config=Qs({},this._defaultConfig,se),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(Z){if((typeof Z>"u"?"undefined":s(Z))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var he in Z){if(he==="storeName"&&(Z[he]=Z[he].replace(/\W/g,"_")),he==="version"&&typeof Z[he]!="number")return new Error("Database version must be a number.");this._config[he]=Z[he]}return"driver"in Z&&Z.driver?this.setDriver(this._config.driver):!0}else return typeof Z=="string"?this._config[Z]:this._config},Y.prototype.defineDriver=function(Z,he,be){var ce=new f(function(Oe,He){try{var Ge=Z._driver,Ke=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Z._driver){He(Ke);return}for(var st=Hi.concat("_initStorage"),xt=0,vn=st.length;xt<vn;xt++){var Ot=st[xt],Vn=!Kr(Vi,Ot);if((Vn||Z[Ot])&&typeof Z[Ot]!="function"){He(Ke);return}}var Dr=function(){for(var $d=function(mc){return function(){var bu=new Error("Method "+mc+" is not implemented by the current driver"),Np=f.reject(bu);return d(Np,arguments[arguments.length-1]),Np}},Rp=0,BT=Vi.length;Rp<BT;Rp++){var Av=Vi[Rp];Z[Av]||(Z[Av]=$d(Av))}};Dr();var Pr=function($d){Oi[Ge]&&console.info("Redefining LocalForage driver: "+Ge),Oi[Ge]=Z,Xs[Ge]=$d,Oe()};"_support"in Z?Z._support&&typeof Z._support=="function"?Z._support().then(Pr,He):Pr(!!Z._support):Pr(!0)}catch(ea){He(ea)}});return h(ce,he,be),ce},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(Z,he,be){var ce=Oi[Z]?f.resolve(Oi[Z]):f.reject(new Error("Driver not found."));return h(ce,he,be),ce},Y.prototype.getSerializer=function(Z){var he=f.resolve(or);return h(he,Z),he},Y.prototype.ready=function(Z){var he=this,be=he._driverSet.then(function(){return he._ready===null&&(he._ready=he._initDriver()),he._ready});return h(be,Z,Z),be},Y.prototype.setDriver=function(Z,he,be){var ce=this;nr(Z)||(Z=[Z]);var Oe=this._getSupportedDrivers(Z);function He(){ce._config.driver=ce.driver()}function Ge(xt){return ce._extend(xt),He(),ce._ready=ce._initStorage(ce._config),ce._ready}function Ke(xt){return function(){var vn=0;function Ot(){for(;vn<xt.length;){var Vn=xt[vn];return vn++,ce._dbInfo=null,ce._ready=null,ce.getDriver(Vn).then(Ge).catch(Ot)}He();var Dr=new Error("No available storage method found.");return ce._driverSet=f.reject(Dr),ce._driverSet}return Ot()}}var st=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=st.then(function(){var xt=Oe[0];return ce._dbInfo=null,ce._ready=null,ce.getDriver(xt).then(function(vn){ce._driver=vn._driver,He(),ce._wrapLibraryMethodsWithReady(),ce._initDriver=Ke(Oe)})}).catch(function(){He();var xt=new Error("No available storage method found.");return ce._driverSet=f.reject(xt),ce._driverSet}),h(this._driverSet,he,be),this._driverSet},Y.prototype.supports=function(Z){return!!Xs[Z]},Y.prototype._extend=function(Z){Qs(this,Z)},Y.prototype._getSupportedDrivers=function(Z){for(var he=[],be=0,ce=Z.length;be<ce;be++){var Oe=Z[be];this.supports(Oe)&&he.push(Oe)}return he},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var Z=0,he=Hi.length;Z<he;Z++)Fa(this,Hi[Z])},Y.prototype.createInstance=function(Z){return new Y(Z)},Y}(),Od=new pc;r.exports=Od},{3:3}]},{},[4])(4)})})(bLe);var zzt=bLe.exports;const Dw=ml(zzt);var Io=[];for(var TU=0;TU<256;++TU)Io.push((TU+256).toString(16).slice(1));function Vzt(e,t=0){return(Io[e[t+0]]+Io[e[t+1]]+Io[e[t+2]]+Io[e[t+3]]+"-"+Io[e[t+4]]+Io[e[t+5]]+"-"+Io[e[t+6]]+Io[e[t+7]]+"-"+Io[e[t+8]]+Io[e[t+9]]+"-"+Io[e[t+10]]+Io[e[t+11]]+Io[e[t+12]]+Io[e[t+13]]+Io[e[t+14]]+Io[e[t+15]]).toLowerCase()}var fP,Hzt=new Uint8Array(16);function qzt(){if(!fP&&(fP=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!fP))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return fP(Hzt)}var Wzt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const l0e={randomUUID:Wzt};function eL(e,t,n){if(l0e.randomUUID&&!t&&!e)return l0e.randomUUID();e=e||{};var r=e.random||(e.rng||qzt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Vzt(r)}class _Le{constructor(t){wu(this,"engine");wu(this,"connected",!1);wu(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function tL(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function CC(e){return e.participantId!==void 0}class Dc extends _Le{constructor(){super("firebase");wu(this,"RECAPTCHAV3TOKEN","6LcoLeIpAAAAAFvL4FMjROebfEEYkWq4LyHHkA7O");wu(this,"firestore");wu(this,"collectionPrefix","prod-");wu(this,"studyCollection");wu(this,"storage");wu(this,"studyId","");wu(this,"localForage",Dw.createInstance({name:"currentParticipantId"}));wu(this,"participantData",null);const n=nee.parse(`
{
  apiKey: "AIzaSyDks0KPmUNFtOPDsOHFAuQY6XSMksNecWE",
  authDomain: "revisit-fb-db.firebaseapp.com",
  projectId: "revisit-fb-db",
  storageBucket: "revisit-fb-db.appspot.com",
  messagingSenderId: "329639127561",
  appId: "1:329639127561:web:346fc2d58229c9ba2ae6d8"
}
`),r=F$e(n);this.firestore=F7t(r,{}),this.storage=G8t();try{Fzt(r,{provider:new Yte(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await j7t(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=G3();if(!i.currentUser&&(await djt(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await this.getCurrentConfigHash(),o=await tL(JSON.stringify(r));if(this.studyCollection=wf(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n,await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.localForage.setItem("currentConfigHash",o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(CC(a))return this.participantData=a,a;const l=await tL(JSON.stringify(i));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=_c(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=eL(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=ws(this.studyCollection,"sequenceAssignment");await Su(i,{});const s=wf(i,"sequenceAssignment"),o=ws(s,this.currentParticipantId),a=Zge(s,G7t("participantId","==","")),u=await TC(a);if(u.docs.length>0){const m=u.docs[0],g=m.data().timestamp;r.dataCollectionEnabled&&(await Z7t(m.ref),await Su(o,{participantId:this.currentParticipantId,timestamp:g}))}else r.dataCollectionEnabled&&await Su(o,{participantId:this.currentParticipantId,timestamp:nzt()});const l=Zge(s,Y7t("timestamp","asc")),d=(await TC(l)).docs.map(m=>m.data()).findIndex(m=>m.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");return p}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=_c(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await xC(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");CC(a)&&i.push(a)});return await Promise.all(s),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null)throw new Error("Participant not initialized");const n=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData");return CC(n)?n:null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=eL();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);return this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),!0}async getUserManagementData(n){const r=wf(this.firestore,"user-management"),i=await TC(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(u=>u.email===n.user.email);a&&(a.uid=n.user.uid),await Su(ws(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await Su(ws(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await Su(ws(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await Su(ws(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await Su(ws(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=_c(this.storage,`${this.collectionPrefix}${n}/participants`),i=await xC(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");CC(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r){const i=wf(this.firestore,`${this.collectionPrefix}${n}`),s=_c(this.storage,`${this.collectionPrefix}${n}/participants/${r}_participantData`),o=await this._getFromFirebaseStorageByRef(s,"participantData");try{if(!o||!CC(o)||o.rejected)return;o.rejected=!0,await this._pushToFirebaseStorageByRef(s,"participantData",o);const a=ws(i,"sequenceAssignment"),u=wf(a,"sequenceAssignment"),l=ws(u,r);await J7t(l,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}async setMode(n,r,i){const s=ws(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await Su(s,{[r]:i},{merge:!0})}async getModes(n){const r=ws(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await EU(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await Su(r,s),s}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h);const p=[];if(r){const m=await this.removeSnapshotOrLive(i,!1);m.status==="FAILED"?p.push({title:m.error.title,message:m.error.message,color:"red"}):p.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return p.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:p}}async removeSnapshotOrLive(n,r){try{const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;return await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async getSnapshots(n){try{const r=ws(this.firestore,"metadata","collections"),i=await EU(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(u=>u.startsWith(`${this.collectionPrefix}${n}-snapshot`)).map(u=>{const l=s[u];let c;return typeof l=="boolean"?c=u:l&&typeof l=="object"&&l.enabled===!0?c=l.name:c=null,{originalName:u,alternateName:c}}).filter(u=>u.alternateName!==null).sort((u,l)=>u.originalName.localeCompare(l.originalName)).reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`,s=[];try{const o=await this.createSnapshot(n,!0);return o.status==="FAILED"?(console.warn("No live data to capture."),s.push({title:o.error.title,message:o.error.message,color:"yellow"})):s.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i),s.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:s}}catch(o){return console.error("Error trying to delete a snapshot",o),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async _addDirectoryNameToMetadata(n){try{const r=ws(this.firestore,"metadata","collections");await Su(r,{[n]:{enabled:!0,name:n}},{merge:!0})}catch(r){throw console.error("Error adding collection to metadata:",r),r}}async renameSnapshot(n,r){try{const i=ws(this.firestore,"metadata","collections");return await Su(i,{[n]:{enabled:!0,name:r}},{merge:!0}),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}async _removeNameFromMetadata(n){try{const r=ws(this.firestore,"metadata","collections"),i=await EU(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await Su(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=_c(this.storage,n),s=(await xC(r)).items.map(o=>gge(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=_c(this.storage,n),o=(await xC(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=_c(this.storage,n),s=_c(this.storage,r),o=await yU(i),u=await(await fetch(o)).blob();await gU(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=wf(this.firestore,n),s=ws(i,"sequenceAssignment"),o=wf(s,"sequenceAssignment"),a=wf(this.firestore,r),u=ws(a,"sequenceAssignment");await Su(u,{});const l=wf(u,"sequenceAssignment"),c=await TC(o),f=n0e(this.firestore);c.docs.forEach(d=>{const h=ws(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=wf(this.firestore,n),i=ws(r,"sequenceAssignment"),s=wf(i,"sequenceAssignment"),o=await TC(s),a=n0e(this.firestore);o.forEach(u=>{const l=ws(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=_c(this.storage,n);return(await xC(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=_c(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await yU(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await yU(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){if(Object.keys(i).length>0){const s=_c(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`),o=new Blob([JSON.stringify(i)],{type:"application/json"});await gU(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await gU(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=_c(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await gge(i)}}const wLe=A.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),S_=()=>A.useContext(wLe);function Gzt({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=A.useState(t),[o,a]=A.useState(!1),{storageEngine:u}=Ds(),l=async()=>{const h=G3();try{await bjt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h):!1;A.useEffect(()=>{s(t);let h;if(u instanceof Dc)try{h=G3()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},b=await f(v);v.isAdmin=!!b,s(v)}else l()},g=(async()=>{if(u instanceof Dc){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=vjt(h,async b=>await p(b));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=A.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return _.jsx(wLe.Provider,{value:d,children:i.determiningStatus?_.jsx(Xl,{visible:!0}):e})}function k2({studyIds:e}){const t=lp(),{studyId:n}=Lm(),r=nv(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=Ds(),{user:o,logout:a}=S_(),[u,l]=A.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:_.jsx(Ptt,{}),href:"",needAdmin:!1},{name:"Analysis",leftIcon:_.jsx(Stt,{}),href:"analysis/dashboard",needAdmin:!1},{name:"Settings",leftIcon:_.jsx(ISe,{}),href:"settings",needAdmin:!0}];return _.jsx(yi.Header,{p:"md",children:_.jsxs(ds,{mt:-7,align:"center",children:[_.jsx(ds.Col,{span:6,children:_.jsxs(Nt,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),style:{cursor:"pointer"},children:[_.jsx(dg,{w:40,src:`${Qu}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsx(zl,{w:"md"}),_.jsx(ki,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),_.jsx(ds.Col,{span:6,children:_.jsxs(Nt,{justify:"flex-end",direction:"row",children:[c&&_.jsx(Jk,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),_.jsx(IK,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),_.jsx(ap,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:_.jsxs(Nt,{direction:"column",mt:20,children:[_.jsx(ze,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?_.jsx(dn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:h=>{h.preventDefault(),t(`/${d.href}`),l(!1)},component:"a",href:`${Qu}${d.href}`,children:d.name},`menu-item-${d.name}`):null:_.jsx(dn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:h=>{h.preventDefault(),t(`/${d.href}`),l(!1)},component:"a",href:`${Qu}${d.href}`,children:d.name},`menu-item-${d.name}`)),_.jsxs(me,{ml:10,children:[_.jsx(sx,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?_.jsx(ze,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{a(),t("/login"),l(!1)},children:"Logout"}):_.jsx(ze,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function Kte({allParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:s,close:o}]=y6(!1),[a,u]=A.useState([]),l=async()=>typeof e=="function"?await e():e,c=async()=>{const d=await l(),h=r?`${r}.json`:`${t}_all.json`;qee(JSON.stringify(d,null,2),h)},f=async()=>{const d=await l();u(d),s()};return _.jsxs(_.Fragment,{children:[_.jsxs(Rs,{style:{gap:n},children:[_.jsx(Ii,{label:"Download all participants data as JSON",children:_.jsx(dn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:_.jsx(ktt,{})})}),_.jsx(Ii,{label:"Download all participants data as a tidy CSV",children:_.jsx(dn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:f,px:4,children:_.jsx(kSe,{})})})]}),i&&a.length>0&&_.jsx(RFt,{opened:i,close:o,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}function Yzt({cellData:e}){return _.jsx(Yt.Td,{children:_.jsx(mh,{miw:100,children:Object.entries(e.answer).map(([t,n])=>_.jsxs(me,{children:[_.jsxs(ze,{fw:700,span:!0,children:[" ",`${t}: `]}),_.jsx(ze,{span:!0,children:`${n}`})]},`cell-${t}`))})})}function c0e({cellData:e}){const t=(e.endTime-e.startTime)/1e3;return _.jsxs(Yt.Td,{children:[t.toFixed(1)," ","s"]})}function Kzt(e){const{metaData:t}=e;return _.jsx(Yt.Td,{children:_.jsx(nX,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:_.jsxs(mh,{gap:"xs",children:[_.jsxs(me,{children:["IP:"," ",t.ip]}),_.jsxs(me,{children:["Language:"," ",t.language]}),_.jsxs(me,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),_.jsxs(me,{children:["User Agent:"," ",t.userAgent]})]})})})}function Xzt({completed:e,inProgress:t,rejected:n,studyConfig:r,refresh:i}){const{storageEngine:s}=Ds(),{studyId:o}=Lm(),{user:a}=S_(),u=async b=>{s&&o&&(a.isAdmin?(await s.rejectParticipant(o,b),await i()):console.warn("You are not authorized to perform this action."))},[l,c]=A.useState([]),[f,d]=A.useState(!1),h=()=>qz({title:"Confirm rejecting participants",children:_.jsxs(ze,{size:"sm",children:["Are you sure you want to reject the selected participants? This action is"," ",_.jsx(ze,{span:!0,fw:700,td:"underline",inherit:!0,children:"irreversible"}),", and will return the participants' sequences to the beginning of the sequence array."]}),labels:{confirm:"Reject Participants",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:async()=>{d(!0);const b=l.map(async w=>await u(w));await Promise.all(b),c([]),await i(),d(!1)}}),p=A.useMemo(()=>[...e,...t,...n],[e,t,n]);function m(b){b==="all"?l.length===p.length?c([]):c(p.map(w=>w.participantId)):l.includes(b)?c(l.filter(w=>w!==b)):c([...l,b])}const g=ACe(r.sequence),y=[_.jsx(Yt.Th,{children:_.jsx(Nt,{justify:"center",children:_.jsx(Ol,{mb:-4,checked:l.length===p.length,onChange:()=>m("all")})})},"action"),_.jsx(Yt.Th,{children:"ID"},"ID"),_.jsx(Yt.Th,{children:"Status"},"status"),_.jsx(Yt.Th,{children:"Meta"},"meta"),...g.flatMap(b=>[_.jsx(Yt.Th,{children:b.componentName},`header-${b.componentName}-${b.timesSeenInBlock}`),_.jsxs(Yt.Th,{children:[_.jsx("span",{style:{whiteSpace:"nowrap"},children:b.componentName})," ","Duration"]},`header-${b.componentName}-${b.timesSeenInBlock}-duration`)]),_.jsx(Yt.Th,{children:"Total Duration"},"total-duration")],v=p.map(b=>_.jsxs(Yt.Tr,{children:[_.jsx(Yt.Td,{children:_.jsx(Nt,{justify:"center",children:_.jsx(Ol,{mb:-4,checked:l.includes(b.participantId),onChange:()=>m(b.participantId)})})}),_.jsx(Yt.Td,{style:{whiteSpace:"nowrap"},children:b.participantId}),_.jsx(Yt.Td,{children:_.jsxs(Nt,{direction:"row",align:"center",children:[b.rejected?_.jsx(Ii,{label:"Rejected",children:_.jsx(vX,{size:16,color:"red",style:{marginBottom:-3}})}):b.completed?_.jsx(Ii,{label:"Completed",children:_.jsx(TSe,{size:16,color:"teal",style:{marginBottom:-3}})}):_.jsx(Ii,{label:"In Progress",children:_.jsx(ASe,{size:16,color:"orange",style:{marginBottom:-3}})}),!b.completed&&_.jsxs(ze,{size:"sm",mb:-1,ml:4,children:[(Object.entries(b.answers).filter(([w,E])=>E.endTime!==void 0).length/(Bm(b.sequence).length-1)*100).toFixed(2),"%"]})]})}),b.metadata?_.jsx(Kzt,{metaData:b.metadata}):_.jsx(Yt.Td,{children:"N/A"}),g.map(w=>{const E=TCe(b.sequence,w.orderPath),x=E&&Object.entries(b.answers).sort((S,C)=>{const I=parseInt(S[0].slice(S[0].lastIndexOf("_")+1),10),k=parseInt(C[0].slice(C[0].lastIndexOf("_")+1),10);return I-k}).filter(([S])=>{const C=S.slice(0,S.lastIndexOf("_")),I=parseInt(S.slice(S.lastIndexOf("_")+1),10);return C===w.componentName&&I<=E[0].lastIndex&&I>=E[0].firstIndex});return x!==null&&x.length>=w.timesSeenInBlock+1?_.jsxs(Pt.Fragment,{children:[_.jsx(Yzt,{cellData:x[w.timesSeenInBlock][1]}),_.jsx(c0e,{cellData:x[w.timesSeenInBlock][1]})]},`cellgroup-${b.participantId}-${w.componentName}-${w.timesSeenInBlock}`):_.jsxs(Pt.Fragment,{children:[_.jsx(Yt.Td,{children:"N/A"}),_.jsx(Yt.Td,{children:"N/A"})]},`cellgroup-${b.participantId}-${w.componentName}-${w.timesSeenInBlock}`)}),_.jsx(c0e,{cellData:{startTime:Math.min(...Object.values(b.answers).map(w=>w.startTime)),endTime:Math.max(...Object.values(b.answers).map(w=>w.endTime)),answer:{},windowEvents:[]}},`cell-${b.participantId}-total-duration`)]},b.participantId));return p.length>0?_.jsxs(_.Fragment,{children:[_.jsx(Xl,{visible:f,overlayProps:{blur:2}}),_.jsxs(Nt,{justify:"space-between",mb:8,p:8,children:[_.jsx(Rs,{children:_.jsx(Jk,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:p.map(b=>({value:b.participantId,label:b.participantId})),searchable:!0,value:null,leftSection:_.jsx(Vtt,{size:14}),onChange:b=>b&&m(b)})}),_.jsxs(Rs,{children:[_.jsx(Kte,{allParticipants:[...e,...t],studyId:o||""}),_.jsx(dn,{disabled:l.length===0||!a.isAdmin,onClick:h,color:"red",children:"Reject Participants"})]})]}),_.jsx(Nt,{direction:"column",style:{width:"100%",overflow:"auto"},children:_.jsxs(Yt,{striped:!0,withTableBorder:!0,children:[_.jsx(Yt.Thead,{children:_.jsx(Yt.Tr,{children:y})}),_.jsx(Yt.Tbody,{children:v})]})})]}):_.jsxs(_.Fragment,{children:[_.jsx(zl,{h:"xl"}),_.jsx(Nt,{justify:"center",align:"center",children:_.jsx(ze,{children:"No data available"})})]})}const Qzt="_root_1spq0_1",Jzt="_description_1spq0_9",Zzt="_title_1spq0_10",eVt="_closeButton_1spq0_14",tVt={root:Qzt,description:Jzt,title:Zzt,closeButton:eVt},nL=e=>{const{title:t,message:n,color:r}=e;c_.show({title:t,message:n,position:"top-center",classNames:tVt,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})};function nVt({studyId:e,refresh:t}){const[n,r]=A.useState(!1),[i,s]=A.useState(!1),[o,a]=A.useState(!1),[u,l]=A.useState(!1),[c,f]=A.useState(""),[d,h]=A.useState([]),[p,m]=A.useState(""),[g,y]=A.useState(""),[v,b]=A.useState(!1),[w,E]=A.useState(!1),{storageEngine:x}=Ds(),S=x,C=A.useCallback(async()=>{E(!0);const D=await S.getSnapshots(e);h(D),E(!1)},[S,e]);A.useEffect(()=>{C()},[C]);const I=async(D,...z)=>{b(!0);const W=await D(...z);W.status==="SUCCESS"?(C(),b(!1),await t(),W.notifications&&W.notifications.forEach(j=>{nL(j)})):(b(!1),nL({title:W.error.title,message:W.error.message,color:"red"}))},k=async()=>{await I(S.createSnapshot.bind(S),e,!1)},R=async()=>{m(""),r(!1),await I(S.createSnapshot.bind(S),e,!0)},O=async()=>{a(!1),await I(S.renameSnapshot.bind(S),c,g)},P=async D=>{await I(S.restoreSnapshot.bind(S),e,D)},$=async()=>{m(""),s(!1),await I(S.removeSnapshotOrLive.bind(S),c,!0)},L=async()=>{m(""),l(!1),await I(S.removeSnapshotOrLive.bind(S),e,!0)},M=()=>qz({title:"Create a Snapshot",children:_.jsx(ze,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>k()}),B=D=>qz({title:"Restore Snapshot",children:_.jsx(ze,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>P(D)}),U=D=>{const z=/-snapshot-(.+)$/,W=D.match(z);return W&&W[1]?W[1].replace("T"," "):null},V=async D=>{const z=D.slice(D.indexOf("-")+1);return await S.getAllParticipantsDataByStudy(z)};return _.jsxs(_.Fragment,{children:[_.jsx(Xl,{visible:v}),_.jsxs(Nt,{justify:"space-between",align:"center",children:[_.jsxs(me,{style:{width:"70%"},children:[_.jsx(ki,{order:5,children:"Create a Snapshot"}),_.jsxs(ze,{children:["This will create a snapshot of the live"," ",_.jsx(ze,{span:!0,fw:700,children:e})," ","database. It will"," ",_.jsx(ze,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(Ii,{label:"Create a snapshot",children:_.jsx(dn,{onClick:M,children:"Snapshot"})})]}),_.jsx(zl,{h:"lg"}),_.jsxs(Nt,{justify:"space-between",align:"center",children:[_.jsxs(me,{style:{width:"70%"},children:[_.jsx(ki,{order:5,children:"Archive Data"}),_.jsxs(ze,{children:["This will create a snapshot of the live"," ",_.jsx(ze,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(Ii,{label:"Snapshot and Delete Data",children:_.jsx(dn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),_.jsx(zl,{h:"lg"}),_.jsxs(Nt,{justify:"space-between",align:"center",children:[_.jsxs(me,{style:{width:"70%"},children:[_.jsx(ki,{order:5,children:"Delete Data"}),_.jsxs(ze,{children:["This will delete the live"," ",_.jsx(ze,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),_.jsx(Ii,{label:"Delete Data",children:_.jsx(dn,{color:"red",onClick:()=>l(!0),children:"Delete"})})]}),_.jsx(zl,{h:"xl"}),_.jsxs(Nt,{direction:"column",children:[_.jsx(Nt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:_.jsx(ki,{order:5,children:"Snapshots"})}),_.jsxs(me,{style:{position:"relative"},children:[_.jsx(Xl,{visible:w}),d.length>0?_.jsxs(Yt,{children:[_.jsx(Yt.Thead,{children:_.jsxs(Yt.Tr,{children:[_.jsx(Yt.Th,{children:"Snapshot Name"}),_.jsx(Yt.Th,{children:"Date Created"}),_.jsx(Yt.Th,{children:"Actions"})]})}),_.jsx(Yt.Tbody,{children:d.map(D=>_.jsxs(Yt.Tr,{children:[_.jsx(Yt.Td,{children:D.alternateName}),_.jsx(Yt.Td,{children:U(D.originalName)}),_.jsx(Yt.Td,{children:_.jsxs(Nt,{children:[_.jsx(Ii,{label:"Rename",children:_.jsx(dn,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),f(D.originalName)},children:_.jsx(Ftt,{})})}),_.jsx(Ii,{label:"Restore Snapshot",children:_.jsx(dn,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{B(D.originalName)},children:_.jsx(Utt,{})})}),_.jsx(Ii,{label:"Delete Snapshot",children:_.jsx(dn,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{s(!0),f(D.originalName)},children:_.jsx(RSe,{})})}),_.jsx(Kte,{allParticipants:()=>V(D.originalName),studyId:e,gap:"10px",fileName:D.alternateName})]})})]},D.originalName))})]}):_.jsx(ze,{children:"No snapshots."})]})]}),_.jsxs(es,{opened:n,onClose:()=>{r(!1),m("")},title:_.jsx(ze,{children:"Archive Data"}),children:[_.jsx(ze,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),_.jsx(m0,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:D=>m(D.target.value)}),_.jsxs(Nt,{mt:"sm",justify:"right",children:[_.jsx(dn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),m("")},children:"Cancel"}),_.jsx(dn,{color:"red",onClick:R,disabled:p!==e,children:"Archive"})]})]}),_.jsxs(es,{opened:i,onClose:()=>{s(!1),m("")},title:_.jsx(ze,{children:"Delete Snapshot"}),children:[_.jsxs(ze,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",_.jsx(ze,{span:!0,fw:700,children:"irreversible"}),"."]}),_.jsx(m0,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:D=>m(D.target.value)}),_.jsxs(Nt,{mt:"sm",justify:"right",children:[_.jsx(dn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),m("")},children:"Cancel"}),_.jsx(dn,{color:"red",onClick:$,disabled:p!==e,children:"Delete"})]})]}),_.jsxs(es,{opened:o,onClose:()=>{a(!1),y("")},title:_.jsx(ze,{children:"Rename Snapshot"}),children:[_.jsx(m0,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:D=>y(D.target.value)}),_.jsxs(Nt,{mt:"sm",justify:"right",children:[_.jsx(dn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),y("")},children:"Cancel"}),_.jsx(dn,{color:"green",onClick:O,disabled:!g||g.length===0,children:"Rename"})]})]}),_.jsxs(es,{opened:u,onClose:()=>{l(!1),m("")},title:_.jsx(ze,{children:"Delete Live Data"}),children:[_.jsxs(ze,{mb:"sm",children:["This will permanently delete the live"," ",_.jsx(ze,{span:!0,fw:700,children:e})," ","data. This action is"," ",_.jsx(ze,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),_.jsx(m0,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:D=>m(D.target.value)}),_.jsxs(Nt,{mt:"sm",justify:"right",children:[_.jsx(dn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{l(!1),m("")},children:"Cancel"}),_.jsx(dn,{color:"red",onClick:L,disabled:p!==e,children:"Delete"})]})]})]})}function rVt({studyId:e}){const{storageEngine:t}=Ds(),[n,r]=A.useState(!1),[i,s]=A.useState(!1),[o,a]=A.useState(!1),[u,l]=A.useState(!1);A.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&_.jsxs(mh,{children:[_.jsx(yE,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),_.jsx(yE,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),_.jsx(yE,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function iVt({studyId:e,refresh:t}){const{storageEngine:n}=Ds();return _.jsx(Xc,{children:_.jsxs(ku,{multiple:!0,variant:"contained",children:[_.jsxs(ku.Item,{value:"ReVISit Modes",children:[_.jsx(ku.Control,{children:_.jsx(ki,{order:5,children:"ReVISit Modes"})}),_.jsx(ku.Panel,{children:_.jsx(rVt,{studyId:e})})]},"modes"),_.jsxs(ku.Item,{value:"Data Management",children:[_.jsx(ku.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:_.jsx(ki,{order:5,children:"Data Management"})}),_.jsx(ku.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&_.jsx(nVt,{studyId:e,refresh:t})})]},"dataManagement")]})})}const aw=14;function ELe({completed:e,inProgress:t,rejected:n,filteredCompleted:r}){return _.jsxs(Nt,{ml:4,gap:4,children:[_.jsx(Ii,{label:"Completed",children:_.jsx(L0,{variant:"light",color:"green",leftSection:_.jsx(TSe,{width:aw,height:aw,style:{paddingTop:1}}),pb:1,children:r&&r!==e?`${r}/${e}`:e})}),_.jsx(Ii,{label:"In Progress",children:_.jsx(L0,{variant:"light",color:"orange",leftSection:_.jsx(ASe,{width:aw,height:aw,style:{paddingTop:1}}),pb:1,children:t})}),_.jsx(Ii,{label:"Rejected",children:_.jsx(L0,{variant:"light",color:"red",leftSection:_.jsx(vX,{width:aw,height:aw,style:{paddingTop:1}}),pb:1,children:n})})]})}const f0e={};function Vq(e,t){e===void 0&&(e=f0e),t===void 0&&(t=f0e);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var sVt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),oVt=Object.prototype.hasOwnProperty;function Hq(e,t){return oVt.call(e,t)}function qq(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)Hq(e,i)&&r.push(i);return r}function jl(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Wq(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function u1(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function xLe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Gq(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Gq(e[t]))return!0}else if(typeof e=="object"){for(var r=qq(e),i=r.length,s=0;s<i;s++)if(Gq(e[r[s]]))return!0}}return!1}function d0e(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var SLe=function(e){sVt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,d0e(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=d0e(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Gi=SLe,aVt=jl,nE={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=rL(n,this.path);r&&(r=jl(r));var i=Z1(n,{op:"remove",path:this.from}).removed;return Z1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=rL(n,this.from);return Z1(n,{op:"add",path:this.path,value:jl(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:mk(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},uVt={add:function(e,t,n){return Wq(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:nE.move,copy:nE.copy,test:nE.test,_get:nE._get};function rL(e,t){if(t=="")return e;var n={op:"_get",path:t};return Z1(e,n),n.value}function Z1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):iL(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=rL(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=mk(e,t.value),o.test===!1)throw new Gi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Gi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=jl(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=iL;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=xLe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!Wq(h))throw new Gi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);Wq(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Gi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=uVt[t.op].call(t,l,h,e);if(o.test===!1)throw new Gi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=nE[t.op].call(t,l,h,e);if(o.test===!1)throw new Gi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Gi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function _5(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Gi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=jl(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=Z1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function lVt(e,t,n){var r=Z1(e,t);if(r.test===!1)throw new Gi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function iL(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Gi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(nE[e.op]){if(typeof e.path!="string")throw new Gi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Gi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Gi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Gi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Gq(e.value))throw new Gi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Gi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Gi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=TLe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Gi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Gi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function TLe(e,t,n){try{if(!Array.isArray(e))throw new Gi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)_5(jl(t),jl(e),n||!0);else{n=n||iL;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Gi)return i;throw i}}function mk(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!mk(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!mk(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const cVt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Gi,_areEquals:mk,applyOperation:Z1,applyPatch:_5,applyReducer:lVt,deepClone:aVt,getValueByPointer:rL,validate:TLe,validator:iL},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Xte=new WeakMap,fVt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),dVt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function hVt(e){return Xte.get(e)}function pVt(e,t){return e.observers.get(t)}function mVt(e,t){e.observers.delete(t.callback)}function gVt(e,t){t.unobserve()}function yVt(e,t){var n=[],r,i=hVt(e);if(!i)i=new fVt(e),Xte.set(e,i);else{var s=pVt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=jl(e),t){r.callback=t,r.next=null;var o=function(){Yq(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){Yq(r),clearTimeout(r.next),mVt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new dVt(t,r)),r}function Yq(e,t){t===void 0&&(t=!1);var n=Xte.get(e.object);Qte(n.value,e.object,e.patches,"",t),e.patches.length&&_5(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function Qte(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=qq(t),o=qq(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(Hq(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?Qte(c,f,n,r+"/"+u1(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+u1(l),value:jl(c)}),n.push({op:"replace",path:r+"/"+u1(l),value:jl(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+u1(l),value:jl(c)}),n.push({op:"remove",path:r+"/"+u1(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!Hq(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+u1(l),value:jl(t[l])})}}}function vVt(e,t,n){n===void 0&&(n=!1);var r=[];return Qte(e,t,r,"",n),r}const bVt=Object.freeze(Object.defineProperty({__proto__:null,compare:vVt,generate:Yq,observe:yVt,unobserve:gVt},Symbol.toStringTag,{value:"Module"}));Object.assign({},cVt,bVt,{JsonPatchError:SLe,deepClone:jl,escapePathComponent:u1,unescapePathComponent:xLe});var _Vt=/("(?:[^\\"]|\\.)*")|[:,]/g,wVt=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,b,w,E;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),w=JSON.stringify(a,s),w===void 0)return w;if(g=i-u.length-l,w.length<=g&&(v=w.replace(_Vt,function(x,S){return S||x+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(w),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(b="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",E=o(a[h],y,p.length+(f===g-1?0:1)),E!==void 0&&d.push(p+E);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+u)}return w}(t,"",0)};const CU=ml(wVt);function yl(e,t,n){return e.fields=t||[],e.fname=n,e}function ts(e){return e==null?null:e.fname}function Sa(e){return e==null?null:e.fields}function CLe(e){return e.length===1?EVt(e[0]):xVt(e)}const EVt=e=>function(t){return t[e]},xVt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Le(e){throw Error(e)}function bp(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Le("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Le("Access path missing closing bracket: "+e),r&&Le("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function Zc(e,t,n){const r=bp(e);return e=r.length===1?r[0]:e,yl((n&&n.get||CLe)(r),[e],t||e)}const QR=Zc("id"),Na=yl(e=>e,[],"identity"),d0=yl(()=>0,[],"zero"),bT=yl(()=>1,[],"one"),ef=yl(()=>!0,[],"true"),Hg=yl(()=>!1,[],"false");function SVt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const ALe=0,Jte=1,Zte=2,ILe=3,kLe=4;function ene(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:SVt,r=e||ALe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=Jte&&n(t||"error","ERROR",arguments),this},warn(){return r>=Zte&&n(t||"warn","WARN",arguments),this},info(){return r>=ILe&&n(t||"log","INFO",arguments),this},debug(){return r>=kLe&&n(t||"log","DEBUG",arguments),this}}}var je=Array.isArray;function yt(e){return e===Object(e)}const h0e=e=>e!=="__proto__";function _T(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=TVt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;wT(r,s,i[s],o)}return r},{})}function wT(e,t,n,r){if(!h0e(t))return;let i,s;if(yt(n)&&!je(n)){s=yt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?wT(s,i,n[i]):h0e(i)&&(s[i]=n[i])}else e[t]=n}function TVt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function tr(e){return e[e.length-1]}function wa(e){return e==null||e===""?null:+e}const RLe=e=>t=>e*Math.exp(t),NLe=e=>t=>Math.log(e*t),DLe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),PLe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,sL=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function w5(e,t,n,r){const i=n(e[0]),s=n(tr(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function OLe(e,t){return w5(e,t,wa,Na)}function $Le(e,t){var n=Math.sign(e[0]);return w5(e,t,NLe(n),RLe(n))}function MLe(e,t,n){return w5(e,t,sL(n),sL(1/n))}function LLe(e,t,n){return w5(e,t,DLe(n),PLe(n))}function E5(e,t,n,r,i){const s=r(e[0]),o=r(tr(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function tne(e,t,n){return E5(e,t,n,wa,Na)}function nne(e,t,n){const r=Math.sign(e[0]);return E5(e,t,n,NLe(r),RLe(r))}function oL(e,t,n,r){return E5(e,t,n,sL(r),sL(1/r))}function rne(e,t,n,r){return E5(e,t,n,DLe(r),PLe(r))}function FLe(e){return 1+~~(new Date(e).getMonth()/3)}function jLe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function mt(e){return e!=null?je(e)?e:[e]:[]}function BLe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function xn(e){return typeof e=="function"}const CVt="descending";function ine(e,t,n){n=n||{},t=mt(t)||[];const r=[],i=[],s={},o=n.comparator||AVt;return mt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===CVt?-1:1),i.push(a=xn(a)?a:Zc(a,null,n)),(Sa(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:yl(o(i,r),Object.keys(s))}const x5=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),AVt=(e,t)=>e.length===1?IVt(e[0],t[0]):kVt(e,t,e.length),IVt=(e,t)=>function(n,r){return x5(e(n),e(r))*t},kVt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=x5(s(r),s(i));return o*t[a]});function Da(e){return xn(e)?e:()=>e}function sne(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function En(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Jh(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function ULe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const RVt=Object.prototype.hasOwnProperty;function zt(e,t){return RVt.call(e,t)}const dP={};function ET(e){let t={},n;function r(s){return zt(t,s)&&t[s]!==dP}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===dP&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=dP),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==dP&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function zLe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=tr(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function lt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),En(r,n)}function rE(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function mv(e){return typeof e=="boolean"}function Z0(e){return Object.prototype.toString.call(e)==="[object Date]"}function VLe(e){return e&&xn(e[Symbol.iterator])}function hr(e){return typeof e=="number"}function HLe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function gt(e){return typeof e=="string"}function one(e,t,n){e&&(e=t?mt(e).map(a=>a.replace(/\\(.)/g,"$1")):mt(e));const r=e&&e.length,i=n&&n.get||CLe,s=a=>i(t?[a]:bp(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return yl(o,e,"key")}function qLe(e,t){const n=e[0],r=tr(e),i=+t;return i?i===1?r:n+i*(r-n):n}const NVt=1e4;function WLe(e){e=+e||NVt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>zt(t,o)||zt(n,o),get:o=>zt(t,o)?t[o]:zt(n,o)?s(o,n[o]):void 0,set:(o,a)=>zt(t,o)?t[o]=a:s(o,a)}}function GLe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function EA(e,t){let n="";for(;--t>=0;)n+=e;return n}function YLe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?EA(i,o)+s:r==="center"?EA(i,~~(o/2))+s+EA(i,Math.ceil(o/2)):s+EA(i,o)}function JR(e){return e&&tr(e)-e[0]||0}function rt(e){return je(e)?"["+e.map(rt)+"]":yt(e)||gt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function ane(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const DVt=e=>hr(e)||Z0(e)?e:Date.parse(e);function une(e,t){return t=t||DVt,e==null||e===""?null:t(e)}function lne(e){return e==null||e===""?null:e+""}function md(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function KLe(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Zg(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function PVt(e){return e}function OVt(e){if(e==null)return PVt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function $Vt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function MVt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return p0e(e,n)})}:p0e(e,t)}function p0e(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=XLe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function XLe(e,t){var n=OVt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&$Vt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function LVt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function FVt(e){return XLe(e,jVt.apply(this,arguments))}function jVt(e,t,n){var r,i,s;if(arguments.length>1)r=BVt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:LVt(e,r)}}function BVt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const qo="year",cl="quarter",Ta="month",Us="week",fl="date",_a="day",Zh="dayofyear",rc="hours",ic="minutes",tf="seconds",gd="milliseconds",cne=[qo,cl,Ta,Us,fl,_a,Zh,rc,ic,tf,gd],AU=cne.reduce((e,t,n)=>(e[t]=1+n,e),{});function fne(e){const t=mt(e).slice(),n={};return t.length||Le("Missing time unit."),t.forEach(i=>{zt(AU,i)?n[i]=1:Le(`Invalid time unit: ${i}.`)}),(n[Us]||n[_a]?1:0)+(n[cl]||n[Ta]||n[fl]?1:0)+(n[Zh]?1:0)>1&&Le(`Incompatible time units: ${e}`),t.sort((i,s)=>AU[i]-AU[s]),t}const UVt={[qo]:"%Y ",[cl]:"Q%q ",[Ta]:"%b ",[fl]:"%d ",[Us]:"W%U ",[_a]:"%a ",[Zh]:"%j ",[rc]:"%H:00",[ic]:"00:%M",[tf]:":%S",[gd]:".%L",[`${qo}-${Ta}`]:"%Y-%m ",[`${qo}-${Ta}-${fl}`]:"%Y-%m-%d ",[`${rc}-${ic}`]:"%H:%M"};function QLe(e,t){const n=En({},UVt,t),r=fne(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const v1=new Date;function dne(e){return v1.setFullYear(e),v1.setMonth(0),v1.setDate(1),v1.setHours(0,0,0,0),v1}function JLe(e){return e6e(new Date(e))}function ZLe(e){return Kq(new Date(e))}function e6e(e){return Em.count(dne(e.getFullYear())-1,e)}function Kq(e){return YS.count(dne(e.getFullYear())-1,e)}function Xq(e){return dne(e).getDay()}function zVt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function t6e(e){return r6e(new Date(e))}function n6e(e){return Qq(new Date(e))}function r6e(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return q0.count(t-1,e)}function Qq(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return KS.count(t-1,e)}function Jq(e){return v1.setTime(Date.UTC(e,0,1)),v1.getUTCDay()}function VVt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function i6e(e,t,n,r,i){const s=t||1,o=tr(e),a=(y,v,b)=>(b=b||y,HVt(n[b],r[b],y===o&&s,v)),u=new Date,l=md(e),c=l[qo]?a(qo):Da(2012),f=l[Ta]?a(Ta):l[cl]?a(cl):d0,d=l[Us]&&l[_a]?a(_a,1,Us+_a):l[Us]?a(Us,1):l[_a]?a(_a,1):l[fl]?a(fl,1):l[Zh]?a(Zh,1):bT,h=l[rc]?a(rc):d0,p=l[ic]?a(ic):d0,m=l[tf]?a(tf):d0,g=l[gd]?a(gd):d0;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function HVt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function Wx(e,t,n){return t+e*7-(n+6)%7}const qVt={[qo]:e=>e.getFullYear(),[cl]:e=>Math.floor(e.getMonth()/3),[Ta]:e=>e.getMonth(),[fl]:e=>e.getDate(),[rc]:e=>e.getHours(),[ic]:e=>e.getMinutes(),[tf]:e=>e.getSeconds(),[gd]:e=>e.getMilliseconds(),[Zh]:e=>e6e(e),[Us]:e=>Kq(e),[Us+_a]:(e,t)=>Wx(Kq(e),e.getDay(),Xq(t)),[_a]:(e,t)=>Wx(1,e.getDay(),Xq(t))},WVt={[cl]:e=>3*e,[Us]:(e,t)=>Wx(e,0,Xq(t))};function s6e(e,t){return i6e(e,t||1,qVt,WVt,zVt)}const GVt={[qo]:e=>e.getUTCFullYear(),[cl]:e=>Math.floor(e.getUTCMonth()/3),[Ta]:e=>e.getUTCMonth(),[fl]:e=>e.getUTCDate(),[rc]:e=>e.getUTCHours(),[ic]:e=>e.getUTCMinutes(),[tf]:e=>e.getUTCSeconds(),[gd]:e=>e.getUTCMilliseconds(),[Zh]:e=>r6e(e),[Us]:e=>Qq(e),[_a]:(e,t)=>Wx(1,e.getUTCDay(),Jq(t)),[Us+_a]:(e,t)=>Wx(Qq(e),e.getUTCDay(),Jq(t))},YVt={[cl]:e=>3*e,[Us]:(e,t)=>Wx(e,0,Jq(t))};function o6e(e,t){return i6e(e,t||1,GVt,YVt,VVt)}const KVt={[qo]:Uh,[cl]:MI.every(3),[Ta]:MI,[Us]:YS,[fl]:Em,[_a]:Em,[Zh]:Em,[rc]:o4,[ic]:i4,[tf]:dm,[gd]:wx},XVt={[qo]:zh,[cl]:LI.every(3),[Ta]:LI,[Us]:KS,[fl]:q0,[_a]:q0,[Zh]:q0,[rc]:a4,[ic]:s4,[tf]:dm,[gd]:wx};function xT(e){return KVt[e]}function ST(e){return XVt[e]}function a6e(e,t,n){return e?e.offset(t,n):void 0}function u6e(e,t,n){return a6e(xT(e),t,n)}function l6e(e,t,n){return a6e(ST(e),t,n)}function c6e(e,t,n,r){return e?e.range(t,n,r):void 0}function f6e(e,t,n,r){return c6e(xT(e),t,n,r)}function d6e(e,t,n,r){return c6e(ST(e),t,n,r)}const xA=1e3,SA=xA*60,TA=SA*60,S5=TA*24,QVt=S5*7,m0e=S5*30,Zq=S5*365,h6e=[qo,Ta,fl,rc,ic,tf,gd],CA=h6e.slice(0,-1),AA=CA.slice(0,-1),IA=AA.slice(0,-1),JVt=IA.slice(0,-1),ZVt=[qo,Us],g0e=[qo,Ta],p6e=[qo],AC=[[CA,1,xA],[CA,5,5*xA],[CA,15,15*xA],[CA,30,30*xA],[AA,1,SA],[AA,5,5*SA],[AA,15,15*SA],[AA,30,30*SA],[IA,1,TA],[IA,3,3*TA],[IA,6,6*TA],[IA,12,12*TA],[JVt,1,S5],[ZVt,1,QVt],[g0e,1,m0e],[g0e,3,3*m0e],[p6e,1,Zq]];function m6e(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(JR(t))/n;let i=VS(a=>a[2]).right(AC,r),s,o;return i===AC.length?(s=p6e,o=py(t[0]/Zq,t[1]/Zq,n)):i?(i=AC[r/AC[i-1][2]<AC[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=h6e,o=Math.max(py(t[0],t[1],n),1)),{units:s,step:o}}function kA(e){const t={};return n=>t[n]||(t[n]=e(n))}function eHt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=tHt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function tHt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function g6e(e){const t=kA(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=bb(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return eHt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=bb(o??",f");const a=py(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=fIe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=dIe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=cIe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let eW;y6e();function y6e(){return eW=g6e({format:qS,formatPrefix:VQ})}function v6e(e){return g6e(lIe(e))}function aL(e){return arguments.length?eW=v6e(e):eW}function y0e(e,t,n){n=n||{},yt(n)||Le(`Invalid time multi-format specifier: ${n}`);const r=t(tf),i=t(ic),s=t(rc),o=t(fl),a=t(Us),u=t(Ta),l=t(cl),c=t(qo),f=e(n[gd]||".%L"),d=e(n[tf]||":%S"),h=e(n[ic]||"%I:%M"),p=e(n[rc]||"%I %p"),m=e(n[fl]||n[_a]||"%a %d"),g=e(n[Us]||"%b %d"),y=e(n[Ta]||"%B"),v=e(n[cl]||"%B"),b=e(n[qo]||"%Y");return w=>(r(w)<w?f:i(w)<w?d:s(w)<w?h:o(w)<w?p:u(w)<w?a(w)<w?m:g:c(w)<w?l(w)<w?y:v:b)(w)}function b6e(e){const t=kA(e.format),n=kA(e.utcFormat);return{timeFormat:r=>gt(r)?t(r):y0e(t,xT,r),utcFormat:r=>gt(r)?n(r):y0e(n,ST,r),timeParse:kA(e.parse),utcParse:kA(e.utcParse)}}let tW;_6e();function _6e(){return tW=b6e({format:nJ,parse:Tke,utcFormat:u4,utcParse:Cke})}function w6e(e){return b6e(_ke(e))}function gk(e){return arguments.length?tW=w6e(e):tW}const nW=(e,t)=>En({},e,t);function E6e(e,t){const n=e?v6e(e):aL(),r=t?w6e(t):gk();return nW(n,r)}function hne(e,t){const n=arguments.length;return n&&n!==2&&Le("defaultLocale expects either zero or two arguments."),n?nW(aL(e),gk(t)):nW(aL(),gk())}function nHt(){return y6e(),_6e(),hne()}const rHt=/^(data:|([A-Za-z]+:)?\/\/)/,iHt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,sHt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,v0e="file://";function oHt(e,t){return n=>({options:n||{},sanitize:uHt,load:aHt,fileAccess:!!t,file:lHt(t),http:fHt(e)})}async function aHt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function uHt(e,t){t=En({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=iHt.test(e.replace(sHt,""));(e==null||typeof e!="string"||!a)&&Le("Sanitize failure, invalid URI: "+rt(e));const u=rHt.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(v0e))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(v0e.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function lHt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):cHt}async function cHt(){Le("No file system access.")}function fHt(e){return e?async function(t,n){const r=En({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?xn(s[i])?s[i]():s.text():Le(s.status+""+s.statusText)}:dHt}async function dHt(){Le("No HTTP fetch method available.")}const hHt=e=>e!=null&&e===e,pHt=e=>e==="true"||e==="false"||e===!0||e===!1,mHt=e=>!Number.isNaN(Date.parse(e)),x6e=e=>!Number.isNaN(+e)&&!(e instanceof Date),gHt=e=>x6e(e)&&Number.isInteger(+e),rW={boolean:ane,integer:wa,number:wa,date:une,string:lne,unknown:Na},hP=[pHt,gHt,x6e,mHt],yHt=["boolean","integer","number","date"];function S6e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=hP.length,i=hP.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&hHt(u)&&!hP[a](u)&&(i[a]=0,++o,o===hP.length))return"string";return yHt[i.reduce((s,o)=>s===0?o:s,0)-1]}function T6e(e,t){return t.reduce((n,r)=>(n[r]=S6e(e,r),n),{})}function b0e(e){const t=function(n,r){const i={delimiter:e};return pne(n,r?En(r,i):i)};return t.responseType="text",t}function pne(e,t){return t.header&&(e=t.header.map(rt).join(t.delimiter)+`
`+e),oIe(t.delimiter).parse(e+"")}pne.responseType="text";function vHt(e){return typeof Buffer=="function"&&xn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function mne(e,t){const n=t&&t.property?Zc(t.property):Na;return yt(e)&&!vHt(e)?bHt(n(e),t):n(JSON.parse(e))}mne.responseType="json";function bHt(e,t){return!je(e)&&VLe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const _Ht={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function C6e(e,t){let n,r,i,s;return e=mne(e,t),t&&t.feature?(n=MVt,i=t.feature):t&&t.mesh?(n=FVt,i=t.mesh,s=_Ht[t.filter]):Le("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Le("Invalid TopoJSON object: "+i),r&&r.features||[r]}C6e.responseType="json";const LO={dsv:pne,csv:b0e(","),tsv:b0e("	"),json:mne,topojson:C6e};function gne(e,t){return arguments.length>1?(LO[e]=t,this):zt(LO,e)?LO[e]:null}function A6e(e){const t=gne(e);return t&&t.responseType||"text"}function I6e(e,t,n,r){t=t||{};const i=gne(t.type||"json");return i||Le("Unknown data format type: "+t.type),e=i(e,t),t.parse&&wHt(e,t.parse,n,r),zt(e,"columns")&&delete e.columns,e}function wHt(e,t,n,r){if(!e.length)return;const i=gk();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=T6e(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!rW[p])throw Error("Illegal format pattern: "+h+":"+p);return rW[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const T5=oHt(typeof fetch<"u"&&fetch,null);function C5(e){const t=e||Na,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function FO(e,t){try{await t(e)}catch(n){e.error(n)}}const k6e=Symbol("vega_id");let EHt=1;function A5(e){return!!(e&&Bt(e))}function Bt(e){return e[k6e]}function R6e(e,t){return e[k6e]=t,e}function Tr(e){const t=e===Object(e)?e:{data:e};return Bt(t)?t:R6e(t,EHt++)}function yne(e){return I5(e,Tr({}))}function I5(e,t){for(const n in e)t[n]=e[n];return t}function N6e(e,t){return R6e(t,Bt(e))}function T_(e,t){return e?t?(n,r)=>e(n,r)||Bt(t(n))-Bt(t(r)):(n,r)=>e(n,r)||Bt(n)-Bt(r):null}function D6e(e){return e&&e.constructor===C_}function C_(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:C_,insert(a){const u=mt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=xn(a)?r:t,l=mt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:Da(l)};return xn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return xn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Bt(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Bt(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[Bt(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Bt(m),l[g]?l[g]=1:a.add.push(Tr(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Bt(m)]<0&&a.rem.push(m);function y(v,b,w){w?v[b]=w(v):a.encode=b,o||(c[Bt(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Bt(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[Bt(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[Bt(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const jO="_:mod:_";function k5(){Object.defineProperty(this,jO,{writable:!0,value:{}})}k5.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[jO];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=je(n)?1+n.length:-1),i},modified(e,t){const n=this[jO];if(arguments.length){if(je(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[jO]={},this}};let xHt=0;const SHt="pulse",THt=new k5,CHt=1,AHt=2;function ei(e,t,n,r){this.id=++xHt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function _0e(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}ei.prototype={targets(){return this._targets||(this._targets=C5(QR))},set(e){return this.value!==e?(this.value=e,1):0},skip:_0e(CHt),modified:_0e(AHt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new k5,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof ei?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===SHt)mt(a).forEach(f=>{f instanceof ei?f!==this&&(f.targets().add(this),s.push(f)):Le("Pulse parameters must be operator instances.")}),this.source=a;else if(je(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||THt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function IHt(e,t,n,r){let i=1,s;return e instanceof ei?s=e:e&&e.prototype instanceof ei?s=new e:xn(e)?s=new ei(null,e):(i=0,s=new ei(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function kHt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let RHt=0;function R5(e,t,n){this.id=++RHt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function qg(e,t,n){return new R5(e,t,n)}R5.prototype={_filter:ef,_apply:Na,targets(){return this._targets||(this._targets=C5(QR))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=qg(e);return this.targets().add(t),t},apply(e){const t=qg(null,e);return this.targets().add(t),t},merge(){const e=qg();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=qg();return this.targets().add(qg(null,null,sne(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(qg(null,null,()=>n=!0)),t.targets().add(qg(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=ef,this._targets=null}};function NHt(e,t,n,r){const i=this,s=qg(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=mt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function DHt(e,t){const n=this.locale();return I6e(e,t,n.timeParse,n.utcParse)}function PHt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function OHt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:A6e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function $Ht(e,t,n){const r=this,i=r._pending||MHt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(ef).insert(s.data||[])),i.done(),s}function MHt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const LHt={skip:!0};function FHt(e,t,n,r,i){return(e instanceof ei?BHt:jHt)(this,e,t,n,r,i),this}function jHt(e,t,n,r,i,s){const o=En({},s,LHt);let a,u;xn(n)||(n=Da(n)),r===void 0?a=l=>e.touch(n(l)):xn(r)?(u=new ei(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;D6e(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function BHt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new ei(null,UHt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function UHt(e,t){return t=xn(t)?t:Da(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function zHt(e){e.rank=++this._rank}function VHt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Le("Cycle detected in dataflow graph.")}const uL={},Qd=1,e0=2,Wp=4,HHt=Qd|e0,w0e=Qd|Wp,uw=Qd|e0|Wp,E0e=8,IC=16,x0e=32,S0e=64;function ey(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function IU(e,t){const n=[];return Zg(e,t,r=>n.push(r)),n}function T0e(e,t){const n={};return e.visit(t,r=>{n[Bt(r)]=1}),r=>n[Bt(r)]?null:r}function pP(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}ey.prototype={StopPropagation:uL,ADD:Qd,REM:e0,MOD:Wp,ADD_REM:HHt,ADD_MOD:w0e,ALL:uw,REFLOW:E0e,SOURCE:IC,NO_SOURCE:x0e,NO_FIELDS:S0e,fork(e){return new ey(this.dataflow).init(this,e)},clone(){const e=this.fork(uw);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(uw|IC)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new ey(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&S0e)&&(n.fields=e.fields),t&Qd?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&e0?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Wp?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&x0e?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||uw;return t&Qd&&this.add.length||t&e0&&this.rem.length||t&Wp&&this.mod.length},reflow(e){if(e)return this.fork(uw).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Wp,T0e(this,Qd))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return je(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?je(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Qd&&(n.addF=pP(n.addF,t)),e&e0&&(n.remF=pP(n.remF,t)),e&Wp&&(n.modF=pP(n.modF,t)),e&IC&&(n.srcF=pP(n.srcF,t)),n},materialize(e){e=e||uw;const t=this;return e&Qd&&t.addF&&(t.add=IU(t.add,t.addF),t.addF=null),e&e0&&t.remF&&(t.rem=IU(t.rem,t.remF),t.remF=null),e&Wp&&t.modF&&(t.mod=IU(t.mod,t.modF),t.modF=null),e&IC&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&IC)return Zg(n.source,n.srcF,r),n;e&Qd&&Zg(n.add,n.addF,r),e&e0&&Zg(n.rem,n.remF,r),e&Wp&&Zg(n.mod,n.modF,r);const i=n.source;if(e&E0e&&i){const s=n.add.length+n.mod.length;s===i.length||(s?Zg(i,T0e(n,w0e),r):Zg(i,n.srcF,r))}return n}};function vne(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}lt(vne,ey,{fork(e){const t=new ey(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?je(e)?e.some(r=>n[r]):n[e]:0},filter(){Le("MultiPulse does not support filtering.")},materialize(){Le("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function qHt(e,t,n){const r=this,i=[];if(r._pulse)return P6e(r);if(r._pending&&await r._pending,t&&await FO(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new ey(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=C5(QR);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=uL),u!==uL&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await FO(r,c[f].callback)}return n&&await FO(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function WHt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function GHt(e,t,n){return this._pulse?P6e(this):(this.evaluate(e,t,n),this)}function YHt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function P6e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function KHt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function XHt(e,t){const n=e.source,r=this._clock;return n&&je(n)?new vne(this,r,n.map(i=>i.pulse),t):this._input[e.id]||QHt(this._pulse,n&&n.pulse)}function QHt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==uL&&(e.source=t.source),e)}const bne={skip:!1,force:!1};function JHt(e,t){const n=t||bne;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function ZHt(e,t,n){const r=n||bne;return(e.set(t)||r.force)&&this.touch(e,r),this}function eqt(e,t,n){this.touch(e,n||bne);const r=new ey(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function tqt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),O6e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,nqt(t,0,e)):r=n,r}}}function O6e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function nqt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,O6e(e,r,t,n)}function jE(){this.logger(ene()),this.logLevel(Jte),this._clock=0,this._rank=0,this._locale=hne();try{this._loader=T5()}catch{}this._touched=C5(QR),this._input={},this._pulse=null,this._heap=tqt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function kC(e){return function(){return this._log[e].apply(this,arguments)}}jE.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:kC("error"),warn:kC("warn"),info:kC("info"),debug:kC("debug"),logLevel:kC("level"),cleanThreshold:1e4,add:IHt,connect:kHt,rank:zHt,rerank:VHt,pulse:eqt,touch:JHt,update:ZHt,changeset:C_,ingest:PHt,parse:DHt,preload:$Ht,request:OHt,events:NHt,on:FHt,evaluate:qHt,run:GHt,runAsync:WHt,runAfter:YHt,_enqueue:KHt,_getPulse:XHt};function De(e,t){ei.call(this,e,null,t)}lt(De,ei,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Gx={};function $6e(e){const t=M6e(e);return t&&t.Definition||null}function M6e(e){return e=e&&e.toLowerCase(),zt(Gx,e)?Gx[e]:null}function*L6e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function _ne(e,t,n){const r=Float64Array.from(L6e(e,n));return r.sort(_m),t.map(i=>l2e(r,i))}function wne(e,t){return _ne(e,[.25,.5,.75],t)}function Ene(e,t){const n=e.length,r=Q0t(e,t),i=wne(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function F6e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var nf=Math.random;function rqt(e){nf=e}function j6e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(L6e(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(nf()*s)];c[l]=a/s}return c.sort(_m),[AV(c,n/2),AV(c,1-n/2)]}function B6e(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?iqt(s,t+t/4):s}function iqt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function sqt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function oqt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*nf())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const U6e=Math.sqrt(2*Math.PI),aqt=Math.SQRT2;let RC=NaN;function N5(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(RC===RC)n=RC,RC=NaN;else{do n=nf()*2-1,r=nf()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,RC=r*s}return e+n*t}function xne(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*U6e)}function D5(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function P5(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*aqt*uqt(2*e-1)}function uqt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function Sne(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>N5(n,r),pdf:s=>xne(s,n,r),cdf:s=>D5(s,n,r),icdf:s=>P5(s,n,r)};return i.mean(e).stdev(t)}function Tne(e,t){const n=Sne();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=Ene(e)),i):t},sample(){return e[~~(nf()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function Cne(e,t){return e=e||0,t=t??1,Math.exp(e+N5()*t)}function Ane(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*U6e*e)}function Ine(e,t,n){return D5(Math.log(e),t,n)}function kne(e,t,n){return Math.exp(P5(e,t,n))}function z6e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>Cne(n,r),pdf:s=>Ane(s,n,r),cdf:s=>Ine(s,n,r),icdf:s=>kne(s,n,r)};return i.mean(e).stdev(t)}function V6e(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=nf();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function Rne(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*nf()}function Nne(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function Dne(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function Pne(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function H6e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>Rne(n,r),pdf:s=>Nne(s,n,r),cdf:s=>Dne(s,n,r),icdf:s=>Pne(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function One(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function ZR(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function O5(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function eN(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function TT(e,t,n,r,i){let s=0,o=0;return eN(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function $ne(e,t,n){let r=0,i=0,s=0,o=0,a=0;eN(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=ZR(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:TT(e,t,n,i,l)}}function q6e(e,t,n){let r=0,i=0,s=0,o=0,a=0;eN(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=ZR(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:TT(e,t,n,i,l)}}function W6e(e,t,n){const[r,i,s,o]=O5(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;eN(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=ZR(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:TT(e,t,n,o,y)}}function G6e(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;eN(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=ZR(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:TT(e,t,n,a,c)}}function Mne(e,t,n){const[r,i,s,o]=O5(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,b=(d*u-f*l)/v,w=(f*y-d*l)/v,E=-b*u,x=S=>(S=S-s,b*S*S+w*S+E+o);return{coef:[E-w*s+b*s*s+o,w-2*b*s,b],predict:x,rSquared:TT(e,t,n,o,x)}}function Y6e(e,t,n,r){if(r===0)return One(e,t,n);if(r===1)return $ne(e,t,n);if(r===2)return Mne(e,t,n);const[i,s,o,a]=O5(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=cqt(c),v=b=>{b-=o;let w=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)w+=y[d]*Math.pow(b,d);return w};return{coef:lqt(f,y,-o,a),predict:v,rSquared:TT(e,t,n,a,v)}}function lqt(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function cqt(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const C0e=2,A0e=1e-12;function K6e(e,t,n,r){const[i,s,o,a]=O5(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=C0e;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],b=p[1],w=y-i[v]>i[b]-y?v:b;let E=0,x=0,S=0,C=0,I=0;const k=1/Math.abs(i[w]-y||1);for(let P=v;P<=b;++P){const $=i[P],L=s[P],M=fqt(Math.abs(y-$)*k)*d[P],B=$*M;E+=M,x+=B,S+=L*M,C+=L*B,I+=$*B}const[R,O]=ZR(x/E,S/E,C/E,I/E);c[g]=R+O*y,f[g]=Math.abs(s[g]-c[g]),dqt(i,g+1,p)}if(h===C0e)break;const m=c2e(f);if(Math.abs(m)<A0e)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?A0e:(v=1-y*y)*v}return hqt(i,c,o,a)}function fqt(e){return(e=1-e*e*e)*e*e}function dqt(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function hqt(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const pqt=.5*Math.PI/180;function $5(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=mqt(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&gqt(f,m,d,h,p)>pqt?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function mqt(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function gqt(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function yqt(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function iW(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:yqt(e)}function X6e(e,t,n){return n||e+(t?"_"+t:"")}const kU=()=>{},vqt={init:kU,add:kU,rem:kU,idx:0},yk={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},tN=Object.keys(yk).filter(e=>e!=="__count__");function bqt(e,t){return(n,r)=>En({name:e,aggregate_param:r,out:n||e},vqt,t)}[...tN,"__count__"].forEach(e=>{yk[e]=bqt(e,yk[e])});function Q6e(e,t,n){return yk[e](n,t)}function J6e(e,t){return e.idx-t.idx}function _qt(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=yk[i]())})};return e.forEach(n),Object.values(t).sort(J6e)}function wqt(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function Eqt(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function xqt(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function Sqt(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function Z6e(e,t){const n=t||Na,r=_qt(e),i=e.slice().sort(J6e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=wqt,s.prototype.add=Eqt,s.prototype.rem=xqt,s.prototype.set=Sqt,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function Lne(e){this._key=e?Zc(e):Bt,this.reset()}const Qo=Lne.prototype;Qo.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Qo.add=function(e){this._add.push(e)};Qo.rem=function(e){this._rem.push(e)};Qo.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Qo.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",zt(n,s)||(n[s]=1,++i);return i};Qo.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=ULe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Qo.argmin=function(e){return this.extent(e)[0]||{}};Qo.argmax=function(e){return this.extent(e)[1]||{}};Qo.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Qo.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Qo.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=wne(this.values(),e),this._get=e),this._q};Qo.q1=function(e){return this.quartile(e)[0]};Qo.q2=function(e){return this.quartile(e)[1]};Qo.q3=function(e){return this.quartile(e)[2]};Qo.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=j6e(this.values(),1e3,.05,e),this._get=e),this._ci};Qo.ci0=function(e){return this.ci(e)[0]};Qo.ci1=function(e){return this.ci(e)[1]};function Oy(e){De.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Oy.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:tN},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};lt(Oy,De,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=mt(Sa(v)),w=b.length;let E=0,x;for(;E<w;++E)r[x=b[E]]||(r[x]=1,t.push(x))}this._dims=mt(e.groupby),this._dnames=this._dims.map(v=>{const b=ts(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:iW(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Le("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Le("Null aggregate field specified."),m=ts(f),g=X6e(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(Q6e(d,h,g))}return this._measures=this._measures.map(v=>Z6e(v,v.field)),Object.create(null)},cellkey:iW(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new Lne),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?N6e(t.tuple,s):Tr(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const Tqt=1e-14;function Fne(e){De.call(this,null,e)}Fne.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};lt(Fne,De,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(Sa(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=F6e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=wa(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(Tqt+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=yl(u,Sa(t),e.name||"bin_"+ts(t))}});function eFe(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?GLe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function jne(e){De.call(this,[],e)}jne.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};lt(jne,De,{transform(e,t){const n=t.fork(t.ALL),r=eFe(Bt,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(T_(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function tFe(e){ei.call(this,null,Cqt,e)}lt(tFe,ei);function Cqt(e){return this.value&&!e.modified()?this.value:ine(e.fields,e.orders)}function Bne(e){De.call(this,null,e)}Bne.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function Aqt(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}lt(Bne,De,{transform(e,t){const n=f=>d=>{for(var h=Aqt(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=Tr({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function Une(e){De.call(this,null,e)}Une.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};lt(Une,De,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=Iqt(a,i,s,e.filter||ef)):n.mod=a,n.source=this.value,n.modifies(r)}});function Iqt(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(Tr(s)),s={},s[t]=l);return i}const I0e={kde:Tne,mixture:V6e,normal:Sne,lognormal:z6e,uniform:H6e},kqt="distributions",k0e="function",Rqt="field";function nFe(e,t){const n=e[k0e];zt(I0e,n)||Le("Unknown distribution function: "+n);const r=I0e[n]();for(const i in e)i===Rqt?r.data((e.from||t()).map(e[i])):i===kqt?r[i](e[i].map(s=>nFe(s,t))):typeof r[i]===k0e&&r[i](e[i]);return r}function zne(e){De.call(this,null,e)}const rFe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Nqt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:rFe},{name:"weights",type:"number",array:!0}]};zne.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:rFe.concat(Nqt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(zne,De,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=nFe(e.distribution,Dqt(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Le("Invalid density method: "+o),!e.extent&&!r.data&&Le("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||Jh(r.data()),l=$5(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Tr(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function Dqt(e){return()=>e.materialize(e.SOURCE).source}function iFe(e,t){return e?e.map((n,r)=>t[r]||ts(n)):null}function Vne(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const sFe="bin";function Hne(e){De.call(this,null,e)}Hne.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:sFe}]};const Pqt=(e,t)=>JR(Jh(e,t))/30;lt(Hne,De,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=Vne(t.source,e.groupby,Na),i=e.smooth||!1,s=e.field,o=e.step||Pqt(n,s),a=T_((p,m)=>s(p)-s(m)),u=e.as||sFe,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of B6e(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function oFe(e){ei.call(this,null,Oqt,e),this.modified(!0)}lt(oFe,ei);function Oqt(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:yl(n=>t(n,e),Sa(t),ts(t))}function qne(e){De.call(this,[void 0,void 0],e)}qne.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};lt(qne,De,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=wa(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=ts(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function Wne(e,t){ei.call(this,e),this.parent=t,this.count=0}lt(Wne,ei,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function M5(e){De.call(this,{},e),this._keys=ET();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}lt(M5,De,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=zt(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new Wne(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Bt(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Bt(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Bt(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Bt(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Bt(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function aFe(e){ei.call(this,null,$qt,e)}lt(aFe,ei);function $qt(e){return this.value&&!e.modified()?this.value:je(e.name)?mt(e.name).map(t=>Zc(t)):Zc(e.name,e.as)}function Gne(e){De.call(this,ET(),e)}Gne.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};lt(Gne,De,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Bt(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(Bt(f),1)});function c(f){const d=Bt(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function Yne(e){De.call(this,[],e)}Yne.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};lt(Yne,De,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=iFe(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=yne(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function Kne(e){De.call(this,[],e)}Kne.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};lt(Kne,De,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(ts),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=yne(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function Xne(e){De.call(this,null,e)}Xne.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};lt(Xne,De,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function uFe(e){De.call(this,[],e)}lt(uFe,De,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=Tr(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const mP={value:"value",median:c2e,mean:ryt,min:CV,max:H0},Mqt=[];function Qne(e){De.call(this,[],e)}Qne.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function Lqt(e){var t=e.method||mP.value,n;if(mP[t]==null)Le("Unrecognized imputation method: "+t);else return t===mP.value?(n=e.value!==void 0?e.value:0,()=>n):mP[t]}function Fqt(e){const t=e.field;return n=>n?t(n):NaN}lt(Qne,De,{transform(e,t){var n=t.fork(t.ALL),r=Lqt(e),i=Fqt(e),s=ts(e.field),o=ts(e.key),a=(e.groupby||[]).map(ts),u=jqt(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,b,w,E;for(g=0,b=u.length;g<b;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],E={_impute:!0},y=0,w=p.length;y<w;++y)E[a[y]]=p[y];E[o]=m,E[s]=Number.isNaN(h)?h=r(d,i):h,l.push(Tr(E))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function jqt(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):Mqt)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function Jne(e){Oy.call(this,e)}Jne.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:tN},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};lt(Jne,Oy,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{En(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function Zne(e){De.call(this,null,e)}Zne.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(Zne,De,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Vne(r,e.groupby,e.field),s=(e.groupby||[]).map(ts),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Le("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Jh(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=Tne(h,o)[a],m=e.counts?h.length:1,g=c||Jh(h);$5(p,g,f,d).forEach(y=>{const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(Tr(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function lFe(e){ei.call(this,null,Bqt,e)}lt(lFe,ei);function Bqt(e){return this.value&&!e.modified()?this.value:one(e.fields,e.flat)}function cFe(e){De.call(this,[],e),this._pending=null}lt(cFe,De,{transform(e,t){const n=t.dataflow;return this._pending?RU(this,t,this._pending):Uqt(e)?t.StopPropagation:e.values?RU(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=mt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>RU(this,t,mt(r.data)))}});function Uqt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function RU(e,t,n){n.forEach(Tr);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function ere(e){De.call(this,{},e)}ere.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};lt(ere,De,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Le('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Le('The "as" parameter has too few output field names.'),c=c||i.map(ts),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||Le("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function fFe(e){ei.call(this,null,zqt,e)}lt(fFe,ei);function zqt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function dFe(e){ei.call(this,null,Vqt,e)}lt(dFe,ei);function Vqt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function hFe(e){De.call(this,null,e)}lt(hFe,De,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function tre(e){Oy.call(this,e)}tre.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:tN,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};lt(tre,Oy,{_transform:Oy.prototype.transform,transform(e,t){return this._transform(Hqt(e,t),t)}});function Hqt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=Sa(n).concat(Sa(r)),o=Wqt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>qqt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function qqt(e,t,n,r){return yl(i=>t(i)===e?n(i):NaN,r,e+"")}function Wqt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(x5),t?i.slice(0,t):i}function pFe(e){M5.call(this,e)}lt(pFe,M5,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Bt(s),n,t,s);return(e.modified("field")||r&&t.modified(Sa(r)))&&Le("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(Tr(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function nre(e){De.call(this,null,e)}nre.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};lt(nre,De,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=iFe(e.fields,e.as||[]),s=r?(a,u)=>Gqt(a,u,r,i):I5;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Bt(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,Tr({}));o[Bt(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Bt(a)]))}),n}});function Gqt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function mFe(e){De.call(this,null,e)}lt(mFe,De,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function rre(e){De.call(this,null,e)}rre.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const Yqt=1e-14;lt(rre,De,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=Vne(i,e.groupby,e.field),o=(e.groupby||[]).map(ts),a=[],u=e.step||.01,l=e.probs||Vu(u/2,1-Yqt,u),c=l.length;return s.forEach(f=>{const d=_ne(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(Tr(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function gFe(e){De.call(this,null,e)}lt(gFe,De,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Bt(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=yne(i);r[Bt(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Bt(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function ire(e){De.call(this,[],e),this.count=0}ire.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};lt(ire,De,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Bt(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*nf()),d<o.length&&d>=u&&(f=o[d],s[Bt(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Bt(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Bt(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Bt(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Bt(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Bt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Bt(c)])),this.count=a,this.value=n.source=o,n}});function sre(e){De.call(this,null,e)}sre.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};lt(sre,De,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Vu(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,Tr(s)}),n.add=t.add.concat(this.value),n}});function yFe(e){De.call(this,null,e),this.modified(!0)}lt(yFe,De,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function ore(e){De.call(this,null,e)}const vFe=["unit0","unit1"];ore.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:cne,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:vFe}]};lt(ore,De,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?ST:xT)(s.unit).offset,a=e.as||vFe,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Sa(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:m6e({extent:e.extent||Jh(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=fne(r),o=this.value||{},a=(n?o6e:s6e)(s,i);return a.unit=tr(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function bFe(e){De.call(this,ET(),e)}lt(bFe,De,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function _Fe(e){De.call(this,null,e)}lt(_Fe,De,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(T_(e.sort)):t.source).map(e.field))}});function Kqt(e,t,n,r){const i=vk[e](t,n);return{init:i.init||d0,update:function(s,o){o[r]=i.next(s)}}}const vk={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=vk.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Le("ntile num must be greater than zero.");const n=vk.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Le("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=Xqt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function Xqt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const Qqt=Object.keys(vk);function wFe(e){const t=mt(e.ops),n=mt(e.fields),r=mt(e.params),i=mt(e.aggregate_params),s=mt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){mt(Sa(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,b=ts(g),w=X6e(p,b,s[m]);if(h(g),o.push(w),zt(vk,p))a.push(Kqt(p,g,y,w));else{if(g==null&&p!=="count"&&Le("Null aggregate field specified."),p==="count"){c.push(w);return}d=!1;let E=l[b];E||(E=l[b]=[],E.field=g,f.push(E)),E.push(Q6e(p,v,w))}}),(c.length||f.length)&&(this.cell=Jqt(f,c,d)),this.inputs=Object.keys(u)}const EFe=wFe.prototype;EFe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};EFe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function Jqt(e,t,n){e=e.map(u=>Z6e(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new Lne;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function are(e){De.call(this,{},e),this._mlen=0,this._mods=[]}are.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Qqt.concat(tN)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};lt(are,De,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=T_(e.sort),i=iW(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new wFe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)Zqt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=eFe(Bt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function Zqt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?VS(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Da(-1)};t.init();for(let f=0;f<u;++f)eWt(c,o,f,u),s&&tWt(c,l),t.update(c,a[f])}function eWt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function tWt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const nWt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Oy,bin:Fne,collect:jne,compare:tFe,countpattern:Bne,cross:Une,density:zne,dotbin:Hne,expression:oFe,extent:qne,facet:M5,field:aFe,filter:Gne,flatten:Yne,fold:Kne,formula:Xne,generate:uFe,impute:Qne,joinaggregate:Jne,kde:Zne,key:lFe,load:cFe,lookup:ere,multiextent:fFe,multivalues:dFe,params:hFe,pivot:tre,prefacet:pFe,project:nre,proxy:mFe,quantile:rre,relay:gFe,sample:ire,sequence:sre,sieve:yFe,subflow:Wne,timeunit:ore,tupleindex:bFe,values:_Fe,window:are},Symbol.toStringTag,{value:"Module"}));function ty(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const rWt=()=>typeof Image<"u"?Image:null;function ure(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const iWt="identity",Yx="linear",ng="log",nN="pow",rN="sqrt",L5="symlog",$b="time",Mb="utc",$h="sequential",CT="diverging",Kx="quantile",F5="quantize",j5="threshold",lre="ordinal",sW="point",xFe="band",cre="bin-ordinal",Ks="continuous",iN="discrete",sN="discretizing",mf="interpolating",fre="temporal";function sWt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function oWt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function dre(){const e=GS().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=ure(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Vu(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,b;if(!(m!==m||g!==g)&&(g<m&&(b=m,m=g,g=b),!(g<h[0]||m>r[1-d])))return y=Math.max(0,hy(h,m)-1),v=m===g?y:hy(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return dre().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function SFe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return SFe(t())},e}function aWt(){return SFe(dre().paddingInner(1))}var uWt=Array.prototype.map;function lWt(e){return uWt.call(e,wa)}const cWt=Array.prototype.slice;function TFe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(hy(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=lWt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=cWt.call(r),n):t.slice()},n.tickFormat=function(r,i){return cke(e[0],tr(e),r??10,i)},n.copy=function(){return TFe().domain(n.domain()).range(n.range())},n}const lL=new Map,CFe=Symbol("vega_scale");function AFe(e){return e[CFe]=!0,e}function fWt(e){return e&&e[CFe]===!0}function dWt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?sWt(s):s.invertExtent?oWt(s):void 0),s.type=e,AFe(s)};return r.metadata=md(mt(n)),r}function _r(e,t,n){return arguments.length>1?(lL.set(e,dWt(e,t,n)),this):IFe(e)?lL.get(e):void 0}_r(iWt,fke);_r(Yx,Vm,Ks);_r(ng,hke,[Ks,ng]);_r(nN,eJ,Ks);_r(rN,$xt,Ks);_r(L5,pke,Ks);_r($b,Ake,[Ks,fre]);_r(Mb,XSt,[Ks,fre]);_r($h,iJ,[Ks,mf]);_r(`${$h}-${Yx}`,iJ,[Ks,mf]);_r(`${$h}-${ng}`,Ike,[Ks,mf,ng]);_r(`${$h}-${nN}`,sJ,[Ks,mf]);_r(`${$h}-${rN}`,QSt,[Ks,mf]);_r(`${$h}-${L5}`,kke,[Ks,mf]);_r(`${CT}-${Yx}`,Rke,[Ks,mf]);_r(`${CT}-${ng}`,Nke,[Ks,mf,ng]);_r(`${CT}-${nN}`,oJ,[Ks,mf]);_r(`${CT}-${rN}`,JSt,[Ks,mf]);_r(`${CT}-${L5}`,Dke,[Ks,mf]);_r(Kx,mke,[sN,Kx]);_r(F5,gke,sN);_r(j5,yke,sN);_r(cre,TFe,[iN,sN]);_r(lre,GS,iN);_r(xFe,dre,iN);_r(sW,aWt,iN);function IFe(e){return lL.has(e)}function A_(e,t){const n=lL.get(e);return n&&n.metadata[t]}function hre(e){return A_(e,Ks)}function Xx(e){return A_(e,iN)}function oW(e){return A_(e,sN)}function kFe(e){return A_(e,ng)}function hWt(e){return A_(e,fre)}function RFe(e){return A_(e,mf)}function NFe(e){return A_(e,Kx)}const pWt=["clamp","base","constant","exponent"];function DFe(e,t){const n=t[0],r=tr(t)-n;return function(i){return e(n+i*r)}}function B5(e,t,n){return PQ(pre(t||"rgb",n),e)}function PFe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function OFe(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?Da(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=_r(s)().domain([t,n]).range([0,1]),pWt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function pre(e,t){const n=I1t[mWt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function mWt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const gWt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},yWt={accent:eTt,category10:ZSt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:tTt,observable10:nTt,paired:rTt,pastel1:iTt,pastel2:sTt,set1:oTt,set2:aTt,set3:uTt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function $Fe(e){if(je(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function MFe(e,t){for(const n in e)mre(n,t(e[n]))}const R0e={};MFe(yWt,$Fe);MFe(gWt,e=>B5($Fe(e)));function mre(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(R0e[e]=t,this):R0e[e]}const BO="symbol",vWt="discrete",bWt="gradient",_Wt=e=>je(e)?e.map(t=>String(t)):String(e),wWt=(e,t)=>e[1]-t[1],EWt=(e,t)=>t[1]-e[1];function gre(e,t,n){let r;return hr(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(JR(e.domain())/n||1)+1))),yt(t)&&(r=t.step,t=t.interval),gt(t)&&(t=e.type===$b?xT(t):e.type==Mb?ST(t):Le("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function LFe(e,t,n){let r=e.range(),i=r[0],s=tr(r),o=wWt;if(i>s&&(r=s,s=i,i=r,o=EWt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],tr(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function yre(e,t){return e.bins?LFe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function FFe(e,t,n,r,i,s){const o=t.type;let a=_Wt;if(o===$b||i===$b)a=e.timeFormat(r);else if(o===Mb||i===Mb)a=e.utcFormat(r);else if(kFe(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=jFe(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function jFe(e,t,n){const r=yre(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const aW={[Kx]:"quantiles",[F5]:"thresholds",[j5]:"domain"},BFe={[Kx]:"quantiles",[F5]:"domain"};function UFe(e,t){return e.bins?TWt(e.bins):e.type===ng?jFe(e,t,!0):aW[e.type]?SWt(e[aW[e.type]]()):yre(e,t)}function xWt(e,t,n){const r=t[BFe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function SWt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function TWt(e){const t=e.slice(0,-1);return t.max=tr(e),t}const CWt=e=>aW[e.type]||e.bins;function zFe(e,t,n,r,i,s,o){const a=BFe[t.type]&&s!==$b&&s!==Mb?xWt(e,t,i):FFe(e,t,n,i,s,o);return r===BO&&CWt(t)?AWt(a):r===vWt?IWt(a):kWt(a)}const AWt=e=>(t,n,r)=>{const i=N0e(r[n+1],N0e(r.max,1/0)),s=D0e(t,e),o=D0e(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},N0e=(e,t)=>e??t,IWt=e=>(t,n)=>n?e(t):null,kWt=e=>t=>e(t),D0e=(e,t)=>Number.isFinite(e)?t(e):null;function RWt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+tr(t),s=i-r;if(e.type===j5){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function NWt(e,t,n,r){const i=r||t.type;return gt(n)&&hWt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===$b?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===Mb?e.utcFormat("%A, %d %B %Y, %X UTC"):zFe(e,t,5,null,n,r,!0)}function VFe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=NWt(e,t,n.format,n.formatType);if(oW(t.type)){const s=UFe(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(Xx(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(tr(s))}`}}let HFe=0;function DWt(){HFe=0}const cL="p_";function vre(e){return e&&e.gradient}function qFe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?cL:"";return i||(i=e.id="gradient_"+HFe++,r==="radial"?(e.x1=jd(e.x1,.5),e.y1=jd(e.y1,.5),e.r1=jd(e.r1,0),e.x2=jd(e.x2,.5),e.y2=jd(e.y2,.5),e.r2=jd(e.r2,.5),s=cL):(e.x1=jd(e.x1,0),e.y1=jd(e.y1,0),e.x2=jd(e.x2,1),e.y2=jd(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function jd(e,t){return e??t}function WFe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const P0e={basis:{curve:ETt},"basis-closed":{curve:xTt},"basis-open":{curve:STt},bundle:{curve:TTt,tension:"beta",value:.85},cardinal:{curve:CTt,tension:"tension",value:0},"cardinal-open":{curve:ITt,tension:"tension",value:0},"cardinal-closed":{curve:ATt,tension:"tension",value:0},"catmull-rom":{curve:kTt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:RTt,tension:"alpha",value:.5},"catmull-rom-open":{curve:NTt,tension:"alpha",value:.5},linear:{curve:aJ},"linear-closed":{curve:DTt},monotone:{horizontal:OTt,vertical:PTt},natural:{curve:$Tt},step:{curve:MTt},"step-after":{curve:FTt},"step-before":{curve:LTt}};function bre(e,t,n){var r=zt(P0e,e)&&P0e[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const PWt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},OWt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,$Wt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,MWt=/^((\s+,?\s*)|(,\s*))/,LWt=/^[01]/;function Qx(e){const t=[];return(e.match(OWt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=PWt[s],a=FWt(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function FWt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?LWt:$Wt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(MWt);u!==null&&(i+=u[0].length)}return r}const $y=Math.PI/180,jWt=1e-14,b1=Math.PI/2,hh=Math.PI*2,lw=Math.sqrt(3)/2;var NU={},DU={},GFe=[].join;function BWt(e,t,n,r,i,s,o,a,u){const l=GFe.call(arguments);if(NU[l])return NU[l];const c=o*$y,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,b=d/r,w=g*a+y*u,E=v*a+b*u,x=g*e+y*t,S=v*e+b*t;let I=1/((x-w)*(x-w)+(S-E)*(S-E))-.25;I<0&&(I=0);let k=Math.sqrt(I);s==i&&(k=-k);const R=.5*(w+x)-k*(S-E),O=.5*(E+S)+k*(x-w),P=Math.atan2(E-O,w-R);let L=Math.atan2(S-O,x-R)-P;L<0&&s===1?L+=hh:L>0&&s===0&&(L-=hh);const M=Math.ceil(Math.abs(L/(b1+.001))),B=[];for(let U=0;U<M;++U){const V=P+U*L/M,D=P+(U+1)*L/M;B[U]=[R,O,V,D,n,r,f,d]}return NU[l]=B}function UWt(e){const t=GFe.call(e);if(DU[t])return DU[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),b=Math.sin(v*.5),w=8/3*b*b/Math.sin(v),E=n+p-w*m,x=r+m+w*p,S=n+g,C=r+y,I=S+w*y,k=C-w*g;return DU[t]=[c*E+f*x,d*E+h*x,c*I+f*k,d*I+h*k,c*S+f*C,d*S+h*C]}const wc=["l",0,0,0,0,0,0,0];function zWt(e,t,n){const r=wc[0]=e[0];if(r==="a"||r==="A")wc[1]=t*e[1],wc[2]=n*e[2],wc[3]=e[3],wc[4]=e[4],wc[5]=e[5],wc[6]=t*e[6],wc[7]=n*e[7];else if(r==="h"||r==="H")wc[1]=t*e[1];else if(r==="v"||r==="V")wc[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)wc[i]=(i%2==1?t:n)*e[i];return wc}function bk(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(o=t[v],(i!==1||s!==1)&&(o=zWt(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":O0e(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":O0e(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function O0e(e,t,n,r){const i=BWt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=UWt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const $0e=.5773502691896257,M0e={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,hh)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=lw*n,i=r-n*$0e,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=lw*n,i=r-n*$0e;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=lw*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=lw*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=lw*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=lw*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function YFe(e){return zt(M0e,e)?M0e[e]:VWt(e)}var PU={};function VWt(e){if(!zt(PU,e)){const t=Qx(e);PU[e]={draw:function(n,r){bk(n,t,0,0,Math.sqrt(r)/2)}}}return PU[e]}const Bg=.448084975506;function HWt(e){return e.x}function qWt(e){return e.y}function WWt(e){return e.width}function GWt(e){return e.height}function Lp(e){return typeof e=="function"?e:()=>+e}function gP(e,t,n){return Math.max(t,Math.min(e,n))}function KFe(){var e=HWt,t=qWt,n=WWt,r=GWt,i=Lp(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,b=gP(+i.call(this,c),0,v),w=gP(+s.call(this,c),0,v),E=gP(+o.call(this,c),0,v),x=gP(+a.call(this,c),0,v);if(u||(u=h=QF()),b<=0&&w<=0&&E<=0&&x<=0)u.rect(p,m,g,y);else{var S=p+g,C=m+y;u.moveTo(p+b,m),u.lineTo(S-w,m),u.bezierCurveTo(S-Bg*w,m,S,m+Bg*w,S,m+w),u.lineTo(S,C-x),u.bezierCurveTo(S,C-Bg*x,S-Bg*x,C,S-x,C),u.lineTo(p+E,C),u.bezierCurveTo(p+Bg*E,C,p,C-Bg*E,p,C-E),u.lineTo(p,m+b),u.bezierCurveTo(p,m+Bg*b,p+Bg*b,m,p+b,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=Lp(c),l):e},l.y=function(c){return arguments.length?(t=Lp(c),l):t},l.width=function(c){return arguments.length?(n=Lp(c),l):n},l.height=function(c){return arguments.length?(r=Lp(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=Lp(c),s=f!=null?Lp(f):i,a=d!=null?Lp(d):i,o=h!=null?Lp(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function XFe(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,b=(g/=y)*u,w=Math.atan2(g,m);i.moveTo(o-v,a-b),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,w-Math.PI,w),i.lineTo(o+v,a+b),i.arc(o,a,u,w,w+Math.PI)}else i.arc(f,d,p,0,hh);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=QF()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function oN(e,t){return e??t}const aN=e=>e.x||0,uN=e=>e.y||0,YWt=e=>e.width||0,KWt=e=>e.height||0,XWt=e=>(e.x||0)+(e.width||0),QWt=e=>(e.y||0)+(e.height||0),JWt=e=>e.startAngle||0,ZWt=e=>e.endAngle||0,eGt=e=>e.padAngle||0,tGt=e=>e.innerRadius||0,nGt=e=>e.outerRadius||0,rGt=e=>e.cornerRadius||0,iGt=e=>oN(e.cornerRadiusTopLeft,e.cornerRadius)||0,sGt=e=>oN(e.cornerRadiusTopRight,e.cornerRadius)||0,oGt=e=>oN(e.cornerRadiusBottomRight,e.cornerRadius)||0,aGt=e=>oN(e.cornerRadiusBottomLeft,e.cornerRadius)||0,uGt=e=>oN(e.size,64),lGt=e=>e.size||1,U5=e=>e.defined!==!1,cGt=e=>YFe(e.shape||"circle"),fGt=hH().startAngle(JWt).endAngle(ZWt).padAngle(eGt).innerRadius(tGt).outerRadius(nGt).cornerRadius(rGt),dGt=Fke().x(aN).y1(uN).y0(QWt).defined(U5),hGt=Fke().y(uN).x1(aN).x0(XWt).defined(U5),pGt=Lke().x(aN).y(uN).defined(U5),mGt=KFe().x(aN).y(uN).width(YWt).height(KWt).cornerRadius(iGt,sGt,oGt,aGt),gGt=wTt().type(cGt).size(uGt),yGt=XFe().x(aN).y(uN).defined(U5).size(lGt);function _re(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function vGt(e,t){return fGt.context(e)(t)}function bGt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?hGt:dGt).curve(bre(r,n.orient,n.tension)).context(e)(t)}function _Gt(e,t){const n=t[0],r=n.interpolate||"linear";return pGt.curve(bre(r,n.orient,n.tension)).context(e)(t)}function AT(e,t,n,r){return mGt.context(e)(t,n,r)}function wGt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function EGt(e,t){return gGt.context(e)(t)}function xGt(e,t){return yGt.context(e)(t)}var QFe=1;function JFe(){QFe=1}function wre(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+QFe++),o=i.clipping[s]||(i.clipping[s]={id:s});return xn(r)?o.path=r(null):_re(n)?o.path=AT(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Ns(e){this.clear(),e&&this.union(e)}Ns.prototype={clone(){return new Ns(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function z5(e){this.mark=e,this.bounds=this.bounds||new Ns}function V5(e){z5.call(this,e),this.items=this.items||[]}lt(V5,z5);class ZFe{constructor(t){this._pending=0,this._loader=t||T5()}pending(){return this._pending}sanitizeURL(t){const n=this;return L0e(n),n._loader.sanitize(t,{context:"href"}).then(r=>(NC(n),r)).catch(()=>(NC(n),null))}loadImage(t){const n=this,r=rWt();return L0e(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=zt(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>NC(n),o.onerror=()=>NC(n),o.src=s,o}).catch(i=>(NC(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function L0e(e){e._pending+=1}function NC(e){e._pending-=1}function Sg(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?SGt(t,r):0))}return e}function SGt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const TGt=hh-1e-8;let H5,UO,zO,z1,uW,VO,lW,cW;const w0=(e,t)=>H5.add(e,t),HO=(e,t)=>w0(UO=e,zO=t),F0e=e=>w0(e,H5.y1),j0e=e=>w0(H5.x1,e),_1=(e,t)=>uW*e+lW*t,w1=(e,t)=>VO*e+cW*t,OU=(e,t)=>w0(_1(e,t),w1(e,t)),$U=(e,t)=>HO(_1(e,t),w1(e,t));function lN(e,t){return H5=e,t?(z1=t*$y,uW=cW=Math.cos(z1),VO=Math.sin(z1),lW=-VO):(uW=cW=1,z1=VO=lW=0),CGt}const CGt={beginPath(){},closePath(){},moveTo:$U,lineTo:$U,rect(e,t,n,r){z1?(OU(e+n,t),OU(e+n,t+r),OU(e,t+r),$U(e,t)):(w0(e+n,t+r),HO(e,t))},quadraticCurveTo(e,t,n,r){const i=_1(e,t),s=w1(e,t),o=_1(n,r),a=w1(n,r);B0e(UO,i,o,F0e),B0e(zO,s,a,j0e),HO(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=_1(e,t),a=w1(e,t),u=_1(n,r),l=w1(n,r),c=_1(i,s),f=w1(i,s);U0e(UO,o,u,c,F0e),U0e(zO,a,l,f,j0e),HO(c,f)},arc(e,t,n,r,i,s){if(r+=z1,i+=z1,UO=n*Math.cos(i)+e,zO=n*Math.sin(i)+t,Math.abs(i-r)>TGt)w0(e-n,t-n),w0(e+n,t+n);else{const o=l=>w0(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%hh,r<0&&(r+=hh),i=i%hh,i<0&&(i+=hh),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=hh,a=r-r%b1,u=0;u<4&&a>i;++u,a-=b1)o(a);else for(a=r-r%b1+b1,u=0;u<4&&a<i;++u,a=a+b1)o(a)}}};function B0e(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function U0e(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>jWt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(z0e(u,e,t,n,r)),0<l&&l<1&&i(z0e(l,e,t,n,r))}function z0e(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var ny=(ny=ty(1,1))?ny.getContext("2d"):null;const fW=new Ns;function Ere(e){return function(t,n){if(!ny)return!0;e(ny,t),fW.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=fW;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(ny.isPointInPath(u,a))return!0;return!1}}function xre(e,t){return t.contains(e.x||0,e.y||0)}function e4e(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(fW.set(n,r,n+i,r+s))}function t4e(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return iE(t,n,r,i,s)}function iE(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function Jx(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Cf(e,t){return e??t}function V0e(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function AGt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Cf(t.x1,.5)*r,n.y1+Cf(t.y1,.5)*i,Math.max(r,i)*Cf(t.r1,0),n.x1+Cf(t.x2,.5)*r,n.y1+Cf(t.y2,.5)*i,Math.max(r,i)*Cf(t.r2,.5));else{const o=Cf(t.x1,0),a=Cf(t.y1,0),u=Cf(t.x2,1),l=Cf(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=ty(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=V0e(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return V0e(s,t.stops)}function n4e(e,t,n){return vre(n)?AGt(e,n,t.bounds):n}function fL(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=n4e(e,t,t.fill),!0):!1}var IGt=[];function Zx(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=n4e(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||IGt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function kGt(e,t){return e.zindex-t.zindex||e.index-t.index}function Sre(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(kGt)}function yd(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=Sre(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function dL(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=Sre(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function Tre(e){return function(t,n,r){yd(n,i=>{(!r||r.intersects(i.bounds))&&r4e(e,t,i,i)})}}function RGt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&r4e(e,t,n.items[0],n.items)}}function r4e(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(Jx(t,n),n.fill&&fL(t,n,i)&&t.fill(),n.stroke&&Zx(t,n,i)&&t.stroke()))}function q5(e){return e=e||ef,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,dL(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function cN(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function Cre(e){return q5(cN(e))}function eb(e,t){return"translate("+e+","+t+")"}function Are(e){return"rotate("+e+")"}function NGt(e,t){return"scale("+e+","+t+")"}function i4e(e){return eb(e.x||0,e.y||0)}function DGt(e){return eb(e.x||0,e.y||0)+(e.angle?" "+Are(e.angle):"")}function PGt(e){return eb(e.x||0,e.y||0)+(e.angle?" "+Are(e.angle):"")+(e.scaleX||e.scaleY?" "+NGt(e.scaleX||1,e.scaleY||1):"")}function Ire(e,t,n){function r(o,a){o("transform",DGt(a)),o("d",t(null,a))}function i(o,a){return t(lN(o,a.angle),a),Sg(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=$y),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:Tre(s),pick:Cre(s),isect:n||Ere(s)}}var OGt=Ire("arc",vGt);function $Gt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function MGt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function LGt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function kre(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(lN(u),c),Sg(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=cN(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:RGt(s),pick:a,isect:xre,tip:n}}var FGt=kre("area",bGt,$Gt);function jGt(e,t){var n=t.clip;e.save(),xn(n)?(e.beginPath(),n(e),e.clip()):s4e(e,t.group)}function s4e(e,t){e.beginPath(),_re(t)?AT(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function o4e(e){const t=Cf(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function BGt(e,t){e("transform",i4e(t))}function a4e(e,t){const n=o4e(t);e("d",AT(null,t,n,n))}function UGt(e,t){e("class","background"),e("aria-hidden",!0),a4e(e,t)}function zGt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?a4e(e,t):e("d","")}function VGt(e,t,n){const r=t.clip?wre(n,t,t):null;e("clip-path",r)}function HGt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Sg(e,t),e.translate(t.x||0,t.y||0)}function _k(e,t,n,r){const i=o4e(t);e.beginPath(),AT(e,t,(n||0)+i,(r||0)+i)}const qGt=cN(_k),WGt=cN(_k,!1),GGt=cN(_k,!0);function YGt(e,t,n,r){yd(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(_k(e,i,s,o),Jx(e,i),i.fill&&fL(e,i,u)&&e.fill(),i.stroke&&!a&&Zx(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&s4e(e,i),n&&n.translate(-s,-o),yd(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(_k(e,i,s,o),Jx(e,i),Zx(e,i,u)&&e.stroke())})}function KGt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return dL(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&_re(u)&&!GGt(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&WGt(e,u,o,a)?(e.restore(),u):(l=dL(u,v=>XGt(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&qGt(e,u,o,a)&&(l=u),e.restore(),l||null)})}function XGt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var QGt={type:"group",tag:"g",nested:!1,attr:BGt,bound:HGt,draw:YGt,pick:KGt,isect:e4e,content:VGt,background:UGt,foreground:zGt},wk={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Rre(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function Nre(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Dre(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function W5(e,t){return e==="center"?t/2:e==="right"?t:0}function G5(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function JGt(e,t,n){const r=Rre(t,n),i=Nre(t,r),s=Dre(t,r),o=(t.x||0)-W5(t.align,i),a=(t.y||0)-G5(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,wk["xmlns:xlink"],"xlink:href"),e("transform",eb(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function ZGt(e,t){const n=t.image,r=Nre(t,n),i=Dre(t,n),s=(t.x||0)-W5(t.align,r),o=(t.y||0)-G5(t.baseline,i);return e.set(s,o,s+r,o+i)}function eYt(e,t,n){yd(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=Rre(r,this);let s=Nre(r,i),o=Dre(r,i);if(s===0||o===0)return;let a=(r.x||0)-W5(r.align,s),u=(r.y||0)-G5(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(Jx(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var tYt={type:"image",tag:"image",nested:!1,attr:JGt,bound:ZGt,draw:eYt,pick:q5(),isect:ef,get:Rre,xOffset:W5,yOffset:G5},nYt=kre("line",_Gt,MGt);function rYt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",PGt(t)),e("d",t.path)}function qO(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*$y,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=Qx(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),bk(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):bk(e,u,r,i,s,o)}function iYt(e,t){return qO(lN(e,t.angle),t)?e.set(0,0,0,0):Sg(e,t,!0)}var sYt={type:"path",tag:"path",nested:!1,attr:rYt,bound:iYt,draw:Tre(qO),pick:Cre(qO),isect:Ere(qO)};function oYt(e,t){e("d",AT(null,t))}function aYt(e,t){var n,r;return Sg(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function H0e(e,t){e.beginPath(),AT(e,t)}var uYt={type:"rect",tag:"path",nested:!1,attr:oYt,bound:aYt,draw:Tre(H0e),pick:Cre(H0e),isect:e4e};function lYt(e,t){e("transform",i4e(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function cYt(e,t){var n,r;return Sg(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function u4e(e,t,n){var r,i,s,o;return t.stroke&&Zx(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function fYt(e,t,n){yd(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&u4e(e,r,i)&&(Jx(e,r),e.stroke())}})}function dYt(e,t,n,r){return e.isPointInStroke?u4e(e,t,1)&&e.isPointInStroke(n,r):!1}var hYt={type:"rule",tag:"line",nested:!1,attr:lYt,bound:cYt,draw:fYt,pick:q5(dYt),isect:t4e},pYt=Ire("shape",wGt),mYt=Ire("symbol",EGt,xre);const q0e=WLe();var ql={height:_p,measureWidth:Pre,estimateWidth:hL,width:hL,canvas:l4e};l4e(!0);function l4e(e){ql.width=e&&ny?Pre:hL}function hL(e,t){return c4e(Ly(e,t),_p(e))}function c4e(e,t){return~~(.8*e.length*t)}function Pre(e,t){return _p(e)<=0||!(t=Ly(e,t))?0:f4e(t,Y5(e))}function f4e(e,t){const n=`(${t}) ${e}`;let r=q0e.get(n);return r===void 0&&(ny.font=t,r=ny.measureText(e).width,q0e.set(n,r)),r}function _p(e){return e.fontSize!=null?+e.fontSize||0:11}function My(e){return e.lineHeight!=null?e.lineHeight:_p(e)+2}function gYt(e){return je(e)?e.length>1?e:e[0]:e}function fN(e){return gYt(e.lineBreak&&e.text&&!je(e.text)?e.text.split(e.lineBreak):e.text)}function Ore(e){const t=fN(e);return(je(t)?t.length-1:0)*My(e)}function Ly(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?vYt(e,n):n}function yYt(e){if(ql.width===Pre){const t=Y5(e);return n=>f4e(n,t)}else if(ql.width===hL){const t=_p(e);return n=>c4e(n,t)}else return t=>ql.width(e,t)}function vYt(e,t){var n=+e.limit,r=yYt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function dN(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Y5(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+_p(e)+"px "+dN(e,t)}function $re(e){var t=e.baseline,n=_p(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*My(e):t==="line-bottom"?.29*n-.5*My(e):0)}const bYt={left:"start",center:"middle",right:"end"},R2=new Ns;function K5(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-b1,t+=r*Math.cos(i),n+=r*Math.sin(i)),R2.x1=t,R2.y1=n,R2}function _Yt(e,t){var n=t.dx||0,r=(t.dy||0)+$re(t),i=K5(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",bYt[t.align]||"start"),a?(u=eb(s,o)+" "+Are(a),(n||r)&&(u+=" "+eb(n,r))):u=eb(s+n,o+r),e("transform",u)}function Mre(e,t,n){var r=ql.height(t),i=t.align,s=K5(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+$re(t)-Math.round(.8*r),c=fN(t),f;if(je(c)?(r+=My(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,ql.width(t,h)),0)):f=ql.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*$y,o,a);else if(n===2)return e.rotatedPoints(t.angle*$y,o,a);return e}function wYt(e,t,n){yd(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=Y5(r),e.textAlign=r.align||"left",s=K5(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*$y),o=a=0),o+=r.dx||0,a+=(r.dy||0)+$re(r),c=fN(r),Jx(e,r),je(c))for(l=My(r),u=0;u<c.length;++u)f=Ly(r,c[u]),r.fill&&fL(e,r,i)&&e.fillText(f,o,a),r.stroke&&Zx(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=Ly(r,c),r.fill&&fL(e,r,i)&&e.fillText(f,o,a),r.stroke&&Zx(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function EYt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=K5(t),a=o.x1,u=o.y1,l=Mre(R2,t,1),c=-t.angle*$y,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function xYt(e,t){const n=Mre(R2,e,2);return iE(t,n[0],n[1],n[2],n[3])||iE(t,n[0],n[1],n[4],n[5])||iE(t,n[4],n[5],n[6],n[7])||iE(t,n[2],n[3],n[6],n[7])}var SYt={type:"text",tag:"text",nested:!1,attr:_Yt,bound:Mre,draw:wYt,pick:q5(EYt),isect:xYt},TYt=kre("trail",xGt,LGt),sc={arc:OGt,area:FGt,group:QGt,image:tYt,line:nYt,path:sYt,rect:uYt,rule:hYt,shape:pYt,symbol:mYt,text:SYt,trail:TYt};function dW(e,t,n){var r=sc[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Ns),e,n)}var W0e={mark:null};function d4e(e,t,n){var r=sc[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(W0e.mark=e,l=W0e),c=dW(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Ns,o)for(a=0,u=s.length;a<u;++a)t.union(dW(s[a],i,n));return e.bounds=t}const CYt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function h4e(e,t){return JSON.stringify(e,CYt,t)}function p4e(e){const t=typeof e=="string"?JSON.parse(e):e;return m4e(t)}function m4e(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&m4e(n[i]);return t&&d4e(e),e}class g4e{constructor(t){arguments.length?this.root=p4e(t):(this.root=G0e({marktype:"group",name:"root",role:"frame"}),this.root.items=[new V5(this.root)])}toJSON(t){return h4e(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=G0e(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function G0e(e,t){const n={bounds:new Ns,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function E0(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Lre(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function js(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=E0(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function Pc(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function y4e(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function X5(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function AYt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=sc[i.marktype]).tip){for(o=X5(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let Fre=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||T5(),this._tooltip=n||IYt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=E0(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=AYt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function IYt(e,t,n,r){e.element().setAttribute("title",r||"")}class hN{constructor(t){this._el=null,this._bgcolor=null,this._loader=new ZFe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const kYt="keydown",RYt="keypress",NYt="keyup",v4e="dragenter",WO="dragleave",b4e="dragover",hW="pointerdown",DYt="pointerup",pL="pointermove",GO="pointerout",_4e="pointerover",pW="mousedown",PYt="mouseup",w4e="mousemove",mL="mouseout",E4e="mouseover",gL="click",OYt="dblclick",$Yt="wheel",x4e="mousewheel",yL="touchstart",vL="touchmove",bL="touchend",MYt=[kYt,RYt,NYt,v4e,WO,b4e,hW,DYt,pL,GO,_4e,pW,PYt,w4e,mL,E4e,gL,OYt,$Yt,x4e,yL,vL,bL],mW=pL,N2=mL,gW=gL;class pN extends Fre{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=MYt,this.pointermove=K0e([pL,w4e],[_4e,E4e],[GO,mL]),this.dragover=K0e([b4e],[v4e],[WO]),this.pointerout=X0e([GO,mL]),this.dragleave=X0e([WO])}initialize(t,n,r){return this._canvas=t&&Lre(t,"canvas"),[gL,pW,hW,pL,GO,WO].forEach(i=>Y0e(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(x4e,t)}pointerdown(t){this._down=this._active,this.fire(hW,t)}mousedown(t){this._down=this._active,this.fire(pW,t)}click(t){this._down===this._active&&(this.fire(gL,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(yL,t,!0)}touchmove(t){this.fire(vL,t,!0)}touchend(t){this.fire(bL,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===gW&&i&&i.href?this.handleHref(n,i,i.href):(t===mW||t===N2)&&this.handleTooltip(n,i,t!==N2),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(Y0e(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=X5(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return sc[t.marktype].pick.call(this,o,t,n,r,i,s)}}const LYt=e=>e===yL||e===vL||e===bL?[yL,vL,bL]:[e];function Y0e(e,t){LYt(t).forEach(n=>FYt(e,n))}function FYt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function RA(e,t,n){t.forEach(r=>e.fire(r,n))}function K0e(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?RA(this,e,r):((!i||!i.exit)&&RA(this,n,r),this._active=s,RA(this,t,r),RA(this,e,r))}}function X0e(e){return function(t){RA(this,e,t),this._active=null}}function jYt(){return typeof window<"u"&&window.devicePixelRatio||1}function BYt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?jYt():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class _L extends hN{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Ns,this._tempb=new Ns}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:ty(1,1,this._options.type),t&&this._canvas&&(Pc(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)BYt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||Le("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=UYt(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):zYt(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=sc[n.marktype];n.clip&&jGt(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const UYt=(e,t,n)=>new Ns().set(0,0,t,n).translate(-e[0],-e[1]);function zYt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class S4e extends Fre{constructor(t,n){super(t,n);const r=this;r._hrefHandler=MU(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=MU(r,(i,s)=>{r.handleTooltip(i,s,i.type!==N2)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(gW,this._hrefHandler),i.removeEventListener(mW,this._tooltipHandler),i.removeEventListener(N2,this._tooltipHandler)),this._svg=i=t&&Lre(t,"svg"),i&&(i.addEventListener(gW,this._hrefHandler),i.addEventListener(mW,this._tooltipHandler),i.addEventListener(N2,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:MU(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const MU=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},T4e="aria-hidden",jre="aria-label",Bre="role",Ure="aria-roledescription",C4e="graphics-object",zre="graphics-symbol",A4e=(e,t,n)=>({[Bre]:e,[Ure]:t,[jre]:n||void 0}),VYt=md(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Q0e={axis:{desc:"axis",caption:WYt},legend:{desc:"legend",caption:GYt},"title-text":{desc:"title",caption:e=>`Title text '${Z0e(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${Z0e(e)}'`}},J0e={ariaRole:Bre,ariaRoleDescription:Ure,description:jre};function I4e(e,t){const n=t.aria===!1;if(e(T4e,n||void 0),n||t.description==null)for(const r in J0e)e(J0e[r],void 0);else{const r=t.mark.marktype;e(jre,t.description),e(Bre,t.ariaRole||(r==="group"?C4e:zre)),e(Ure,t.ariaRoleDescription||`${r} mark`)}}function k4e(e){return e.aria===!1?{[T4e]:!0}:VYt[e.role]?null:Q0e[e.role]?qYt(e,Q0e[e.role]):HYt(e)}function HYt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return A4e(n?C4e:zre,`${t} mark container`,e.description)}function qYt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return A4e(t.role||zre,t.desc,n.description||r(n))}catch{return null}}function Z0e(e){return mt(e.text).join(" ")}function WYt(e){const t=e.datum,n=e.orient,r=t.title?R4e(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${Xx(a)?"discrete":a} scale with ${VFe(o,s,e)}`}function GYt(e){const t=e.datum,n=t.title?R4e(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return KYt(r)+(n?` titled '${n}'`:"")+` for ${YYt(s)} with ${VFe(u,a,e)}`}function R4e(e){try{return mt(tr(e.items).items[0].text).join(" ")}catch{return null}}function YYt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+tr(e)}function KYt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const N4e=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),XYt=e=>N4e(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function Vre(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${XYt(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=N4e(u),a),toString:()=>e};return a}const D4e=e=>P4e(Vre(),e)+"";function P4e(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):P4e(e,r)}return e.close()}const wL={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},EL={blend:"mix-blend-mode"},O4e={fill:"none","stroke-miterlimit":10},DC=0,eye="http://www.w3.org/2000/xmlns/",Ls=wk.xmlns;class Hre extends hN{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=js(t,0,"svg",Ls),this._svg.setAttributeNS(eye,"xmlns",Ls),this._svg.setAttributeNS(eye,"xmlns:xlink",wk["xmlns:xlink"]),this._svg.setAttribute("version",wk.version),this._svg.setAttribute("class","marks"),Pc(t,1),this._root=js(this._svg,DC,"g",Ls),x0(this._root,O4e),Pc(this._svg,DC+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(x0(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=js(t,DC,"rect",Ls),x0(r,{width:this._width,height:this._height,fill:n}));const i=D4e(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Pc(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=sc[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,tye(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,tye(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=sc[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=nye(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return Pc(c,0),n._svg;c.setAttribute("class",y4e(n));const f=k4e(n);for(const m in f)Ha(c,m,f[m]);l||Ha(c,"pointer-events",u),Ha(c,"clip-path",n.clip?wre(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=nye(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&ZYt(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):yd(n,p),Pc(c,h),c}_update(t,n,r){gm=n,pa=n.__values__,I4e(D2,r),t.attr(D2,r,this);const i=tKt[t.type];i&&i.call(this,t,n,r),gm&&this.style(gm,r)}style(t,n){if(n!=null){for(const r in wL){let i=r==="font"?dN(n):n[r];if(i===pa[r])continue;const s=wL[r];i==null?t.removeAttribute(s):(vre(i)&&(i=qFe(i,this._defs.gradient,$4e())),t.setAttribute(s,i+"")),pa[r]=i}for(const r in EL)YO(t,EL[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=js(t,DC+1,"defs",Ls)),i=QYt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=js(t,DC+1,"defs",Ls)),i=JYt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):Pc(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function tye(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function QYt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=js(e,n++,"pattern",Ls);x0(o,{id:cL+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=js(o,0,"rect",Ls),x0(o,{width:1,height:1,fill:`url(${$4e()}#${t.id})`}),e=js(e,n++,"radialGradient",Ls),x0(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=js(e,n++,"linearGradient",Ls),x0(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=js(e,r,"stop",Ls),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return Pc(e,r),n}function JYt(e,t,n){let r;return e=js(e,n,"clipPath",Ls),e.setAttribute("id",t.id),t.path?(r=js(e,0,"path",Ls),r.setAttribute("d",t.path)):(r=js(e,0,"rect",Ls),x0(r,{x:0,y:0,width:t.width,height:t.height})),Pc(e,1),n+1}function ZYt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;yd(n,o=>{i=e.mark(t,o,i,r),++s}),Pc(t,1+s)}function nye(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=E0(o,r,Ls),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=E0(o,"path",Ls);s.appendChild(a),a.__data__=e;const u=E0(o,"g",Ls);s.appendChild(u),u.__data__=e;const l=E0(o,"path",Ls);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||eKt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function eKt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let gm=null,pa=null;const tKt={group(e,t,n){const r=gm=t.childNodes[2];pa=r.__values__,e.foreground(D2,n,this),pa=t.__values__,gm=t.childNodes[1],e.content(D2,n,this);const i=gm=t.childNodes[0];e.background(D2,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==pa.events&&(Ha(r,"pointer-events",s),Ha(i,"pointer-events",s),pa.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Ha(r,"display",null),this.style(i,n),Ha(i,"stroke",null),o&&(n.fill=null),pa=r.__values__,this.style(r,n),o&&(n.fill=o),gm=null}else Ha(r,"display","none")},image(e,t,n){n.smooth===!1?(YO(t,"image-rendering","optimizeSpeed"),YO(t,"image-rendering","pixelated")):YO(t,"image-rendering",null)},text(e,t,n){const r=fN(n);let i,s,o,a;je(r)?(s=r.map(u=>Ly(n,u)),i=s.join(`
`),i!==pa.text&&(Pc(t,0),o=t.ownerDocument,a=My(n),s.forEach((u,l)=>{const c=E0(o,"tspan",Ls);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),pa.text=i)):(s=Ly(n,r),s!==pa.text&&(t.textContent=s,pa.text=s)),Ha(t,"font-family",dN(n)),Ha(t,"font-size",_p(n)+"px"),Ha(t,"font-style",n.fontStyle),Ha(t,"font-variant",n.fontVariant),Ha(t,"font-weight",n.fontWeight)}};function D2(e,t,n){t!==pa[e]&&(n?nKt(gm,e,t,n):Ha(gm,e,t),pa[e]=t)}function YO(e,t,n){n!==pa[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),pa[t]=n)}function x0(e,t){for(const n in t)Ha(e,n,t[n])}function Ha(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function nKt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function $4e(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class M4e extends hN{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=Vre();n.open("svg",En({},wk,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",O4e,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=sc[n.marktype],i=r.tag,s=[I4e,r.attr];t.open("g",{class:y4e(n),"clip-path":n.clip?wre(this,n,n.group):null},k4e(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=fN(a);if(je(l)){const c={x:0,dy:My(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(Ly(a,l[f])).close()}else t.text(Ly(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),yd(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):yd(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&rKt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:cL+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function rKt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=dN(t),e["font-size"]=_p(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in wL){let a=t[o];const u=wL[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(vre(a)&&(a=qFe(a,i.gradient,"")),e[u]=a)}for(const o in EL){const a=t[o];a!=null&&(s=s||[],s.push(`${EL[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const Pf={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function iKt(e){Pf.svgMarkTypes=e.svgMarkTypes??["text"],Pf.svgOnTop=e.svgOnTop??!0,Pf.debug=e.debug??!1}class yW extends hN{constructor(t){super(t),this._svgRenderer=new Hre(t),this._canvasRenderer=new _L(t)}initialize(t,n,r,i,s){this._root_el=js(t,0,"div");const o=js(this._root_el,0,"div"),a=js(this._root_el,1,"div");return this._root_el.style.position="relative",Pf.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=Pf.svgOnTop?a:o,this._canvasEl=Pf.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return Pf.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!Pf.svgMarkTypes.includes(s));this._svgRenderer.render(t,Pf.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return Pf.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class L4e extends pN{constructor(t,n){super(t,n)}initialize(t,n,r){const i=js(js(t,0,"div"),Pf.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const F4e="canvas",j4e="hybrid",B4e="png",U4e="svg",z4e="none",S0={Canvas:F4e,PNG:B4e,SVG:U4e,Hybrid:j4e,None:z4e},Lb={};Lb[F4e]=Lb[B4e]={renderer:_L,headless:_L,handler:pN};Lb[U4e]={renderer:Hre,headless:M4e,handler:S4e};Lb[j4e]={renderer:yW,headless:yW,handler:L4e};Lb[z4e]={};function Q5(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Lb[e]=t,this):Lb[e]}function V4e(e,t,n){const r=[],i=new Ns().union(t),s=e.marktype;return s?H4e(e,i,n,r):s==="group"?q4e(e,i,n,r):Le("Intersect scene must be mark node or group item.")}function H4e(e,t,n,r){if(sKt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)q4e(i[a],t,n,r);else for(const u=sc[s].isect;a<o;++a){const l=i[a];W4e(l,t,u)&&r.push(l)}}return r}function sKt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function q4e(e,t,n,r){n&&n(e.mark)&&W4e(e,t,sc.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)H4e(i[u],t,n,r);t.translate(o,a)}return r}function W4e(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const LU=new Ns;function G4e(e){const t=e.clip;if(xn(t))t(lN(LU.clear()));else if(t)LU.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(LU)}const oKt=1e-9;function qre(e,t,n){return e===t?!0:n==="path"?Y4e(e,t):e instanceof Date&&t instanceof Date?+e==+t:hr(e)&&hr(t)?Math.abs(e-t)<=oKt:!e||!t||!yt(e)&&!yt(t)?e==t:aKt(e,t)}function Y4e(e,t){return qre(Qx(e),Qx(t))}function aKt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!qre(e[i],t[i],i))return!1;return typeof e==typeof t}function uKt(){JFe(),DWt()}const eS="top",Vf="left",Kf="right",Fy="bottom",lKt="top-left",cKt="top-right",fKt="bottom-left",dKt="bottom-right",Wre="start",vW="middle",Ga="end",hKt="x",pKt="y",J5="group",Gre="axis",Yre="title",mKt="frame",gKt="scope",Kre="legend",K4e="row-header",X4e="row-footer",Q4e="row-title",J4e="column-header",Z4e="column-footer",e5e="column-title",yKt="padding",vKt="symbol",t5e="fit",n5e="fit-x",r5e="fit-y",bKt="pad",Xre="none",yP="all",bW="each",Qre="flush",T0="column",C0="row";function i5e(e){De.call(this,null,e)}lt(i5e,De,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=sc[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=vP(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===J5||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(vP(l,o))),r.role){case Gre:case Kre:case Yre:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(vP(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(vP(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return G4e(r),t.modifies("bounds")}});function vP(e,t,n){return t(e.bounds.clear(),e,n)}const rye=":vega_identifier:";function Jre(e){De.call(this,0,e)}Jre.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};lt(Jre,De,{transform(e,t){const n=_Kt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function _Kt(e){return e._signals[rye]||(e._signals[rye]=e.add(0))}function s5e(e){De.call(this,null,e)}lt(s5e,De,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,wKt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===J5?V5:z5;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function wKt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function o5e(e){De.call(this,null,e)}const iye={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!a5e(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},a5e=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),sye=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(a5e(i,s=e[n].bounds,t))return!0},EKt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},xKt=(e,t,n)=>{var r=e.range(),i=new Ns;return t===eS||t===Fy?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},oye=e=>(e.forEach(t=>t.opacity=1),e),aye=(e,t)=>e.reflow(t.modified()).modifies("opacity");lt(o5e,De,{transform(e,t){const n=iye[e.method]||iye.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(oye(i),t=aye(t,e)),t;if(i=i.filter(EKt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=oye(i),t=aye(t,e),s.length>=3&&sye(s,r)){do s=n(s,r);while(s.length>=3&&sye(s,r));s.length<3&&!tr(i).opacity&&(s.length>1&&(tr(s).opacity=0),tr(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=xKt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function u5e(e){De.call(this,null,e)}lt(u5e,De,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const ha=new Ns;function sE(e,t,n){return e[t]===n?0:(e[t]=n,1)}function SKt(e){var t=e.items[0].orient;return t===Vf||t===Kf}function TKt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function CKt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=TKt(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&Ore(p),v=0,b=0,w,E;switch(ha.clear().union(g),g.clear(),(w=u[0])>-1&&g.union(i.items[w].bounds),(w=u[1])>-1&&g.union(i.items[w].bounds),a){case eS:v=f||0,b=-c,E=Math.max(d,Math.min(h,-g.y1)),g.add(0,-E).add(l,0),p&&bP(e,p,E,m,y,0,-1,g);break;case Vf:v=-c,b=f||0,E=Math.max(d,Math.min(h,-g.x1)),g.add(-E,0).add(0,l),p&&bP(e,p,E,m,y,1,-1,g);break;case Kf:v=n+c,b=f||0,E=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(E,l),p&&bP(e,p,E,m,y,1,1,g);break;case Fy:v=f||0,b=r+c,E=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,E),p&&bP(e,p,E,m,0,0,1,g);break;default:v=i.x,b=i.y}return Sg(g.translate(v,b),i),sE(i,"x",v+o)|sE(i,"y",b+o)&&(i.bounds=ha,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function bP(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const uye=(e,t)=>Math.floor(Math.min(e,t)),lye=(e,t)=>Math.ceil(Math.max(e,t));function AKt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===J5)switch(i.role){case Gre:case Kre:case Yre:break;case K4e:o.rowheaders.push(...s);break;case X4e:o.rowfooters.push(...s);break;case J4e:o.colheaders.push(...s);break;case Z4e:o.colfooters.push(...s);break;case Q4e:o.rowtitle=s[0];break;case e5e:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function IKt(e){return new Ns().set(0,0,e.width||0,e.height||0)}function kKt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function xi(e,t,n){const r=yt(e)?e[t]:e;return r??(n!==void 0?n:0)}function cye(e){return e<0?Math.ceil(-e):0}function l5e(e,t,n){var r=!n.nodirty,i=n.bounds===Qre?IKt:kKt,s=ha.set(0,0,0,0),o=xi(n.align,T0),a=xi(n.align,C0),u=xi(n.padding,T0),l=xi(n.padding,C0),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,b=Array(d),w=Array(d),E=Array(d),x,S,C,I,k,R,O,P,$,L,M;for(S=0;S<c;++S)p[S]=0;for(S=0;S<f;++S)y[S]=0;for(S=0;S<d;++S)R=t[S],k=E[S]=i(R),R.x=R.x||0,b[S]=0,R.y=R.y||0,w[S]=0,C=S%c,I=~~(S/c),m=Math.max(m,O=Math.ceil(k.x2)),v=Math.max(v,P=Math.ceil(k.y2)),p[C]=Math.max(p[C],O),y[I]=Math.max(y[I],P),h[S]=u+cye(k.x1),g[S]=l+cye(k.y1),r&&e.dirty(t[S]);for(S=0;S<d;++S)S%c===0&&(h[S]=0),S<c&&(g[S]=0);if(o===bW)for(C=1;C<c;++C){for(M=0,S=C;S<d;S+=c)M<h[S]&&(M=h[S]);for(S=C;S<d;S+=c)h[S]=M+p[C-1]}else if(o===yP){for(M=0,S=0;S<d;++S)S%c&&M<h[S]&&(M=h[S]);for(S=0;S<d;++S)S%c&&(h[S]=M+m)}else for(o=!1,C=1;C<c;++C)for(S=C;S<d;S+=c)h[S]+=p[C-1];if(a===bW)for(I=1;I<f;++I){for(M=0,S=I*c,x=S+c;S<x;++S)M<g[S]&&(M=g[S]);for(S=I*c;S<x;++S)g[S]=M+y[I-1]}else if(a===yP){for(M=0,S=c;S<d;++S)M<g[S]&&(M=g[S]);for(S=c;S<d;++S)g[S]=M+v}else for(a=!1,I=1;I<f;++I)for(S=I*c,x=S+c;S<x;++S)g[S]+=y[I-1];for($=0,S=0;S<d;++S)$=h[S]+(S%c?$:0),b[S]+=$-t[S].x;for(C=0;C<c;++C)for(L=0,S=C;S<d;S+=c)L+=g[S],w[S]+=L-t[S].y;if(o&&xi(n.center,T0)&&f>1)for(S=0;S<d;++S)k=o===yP?m:p[S%c],$=k-E[S].x2-t[S].x-b[S],$>0&&(b[S]+=$/2);if(a&&xi(n.center,C0)&&c!==1)for(S=0;S<d;++S)k=a===yP?v:y[~~(S/c)],L=k-E[S].y2-t[S].y-w[S],L>0&&(w[S]+=L/2);for(S=0;S<d;++S)s.union(E[S].translate(b[S],w[S]));switch($=xi(n.anchor,hKt),L=xi(n.anchor,pKt),xi(n.anchor,T0)){case Ga:$-=s.width();break;case vW:$-=s.width()/2}switch(xi(n.anchor,C0)){case Ga:L-=s.height();break;case vW:L-=s.height()/2}for($=Math.round($),L=Math.round(L),s.clear(),S=0;S<d;++S)t[S].mark.bounds.clear();for(S=0;S<d;++S)R=t[S],R.x+=b[S]+=$,R.y+=w[S]+=L,s.union(R.mark.bounds.union(R.bounds.translate(b[S],w[S]))),r&&e.dirty(R);return s}function RKt(e,t,n){var r=AKt(t),i=r.marks,s=n.bounds===Qre?NKt:DKt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=l5e(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=xi(n.headerBand,C0,null),c=_P(e,r.rowheaders,i,a,u,-xi(o,"rowHeader"),uye,0,s,"x1",0,a,1,m)),r.colheaders&&(m=xi(n.headerBand,T0,null),f=_P(e,r.colheaders,i,a,a,-xi(o,"columnHeader"),uye,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=xi(n.footerBand,C0,null),d=_P(e,r.rowfooters,i,a,u,xi(o,"rowFooter"),lye,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=xi(n.footerBand,T0,null),h=_P(e,r.colfooters,i,a,a,xi(o,"columnFooter"),lye,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=xi(n.titleAnchor,C0),g=xi(o,"rowTitle"),g=p===Ga?d+g:c-g,m=xi(n.titleBand,C0,.5),fye(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=xi(n.titleAnchor,T0),g=xi(o,"columnTitle"),g=p===Ga?h+g:f-g,m=xi(n.titleBand,T0,.5),fye(e,r.coltitle,g,1,y,m))}function NKt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function DKt(e,t){return e.bounds[t]}function _P(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,b,w,E,x,S,C,I;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,w=t.length;v<w;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,w=t.length;v<w;++v,y+=f){for(x=t[v],E=x.mark.bounds,b=y;b>=0&&(S=n[b])==null;b-=d);a?(C=h==null?S.x:Math.round(S.bounds.x1+h*S.bounds.width()),I=m):(C=m,I=h==null?S.y:Math.round(S.bounds.y1+h*S.bounds.height())),E.union(x.bounds.translate(C-(x.x||0),I-(x.y||0))),x.x=C,x.y=I,e.dirty(x),g=o(g,E[l])}return g}function fye(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function PKt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function OKt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function $Kt(e,t,n,r,i,s,o){const a=PKt(n,t),u=OKt(e,a("offset",0)),l=a("anchor",Wre),c=l===Ga?1:l===vW?.5:0,f={align:bW,bounds:a("bounds",Qre),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Vf:f.anchor={x:Math.floor(r.x1)-u,column:Ga,y:c*(o||r.height()+2*r.y1),row:l};break;case Kf:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case eS:f.anchor={y:Math.floor(i.y1)-u,row:Ga,x:c*(s||i.width()+2*i.x1),column:l};break;case Fy:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case lKt:f.anchor={x:u,y:u};break;case cKt:f.anchor={x:s-u,y:u,column:Ga};break;case fKt:f.anchor={x:u,y:o-u,row:Ga};break;case dKt:f.anchor={x:s-u,y:o-u,column:Ga,row:Ga};break}return f}function MKt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),FKt(e,n,n.items[0].items[0]),s=LKt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===vKt&&jKt(n.items[0].items[0].items[0].items),i!==Xre&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,Sg(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function LKt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function FKt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&PC(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case Vf:i+=Math.ceil(o.bounds.width())+u;break;case Kf:case Fy:break;default:s+=o.bounds.height()+u}switch((i||s)&&PC(e,n,i,s),o.orient){case Vf:c+=cw(t,n,o,a,1,1);break;case Kf:l+=cw(t,n,o,Ga,0,0)+u,c+=cw(t,n,o,a,1,1);break;case Fy:l+=cw(t,n,o,a,0,0),c+=cw(t,n,o,Ga,-1,0,1)+u;break;default:l+=cw(t,n,o,a,0,0)}(l||c)&&PC(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(PC(e,n,-l,0),PC(e,o,-l,0))}}function cw(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:Ore(n);return Math.round(r===Wre?f:r===Ga?d-h:.5*(c-h))}function PC(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function jKt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function BKt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===Vf||a===Kf?r:n,p=0,m=0,g=0,y=0,v=0,b;if(o!==J5?a===Vf?(p=i.y2,h=i.y1):a===Kf?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===Vf&&(p=r,h=0),b=u===Wre?p:u===Ga?h:(p+h)/2,d&&d.text){switch(a){case eS:case Fy:v=f.bounds.height()+c;break;case Vf:y=f.bounds.width()+c;break;case Kf:y=-f.bounds.width()-c;break}ha.clear().union(d.bounds),ha.translate(y-(d.x||0),v-(d.y||0)),sE(d,"x",y)|sE(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(ha),d.mark.bounds.clear().union(ha),e.dirty(d)),ha.clear().union(d.bounds)}else ha.clear();switch(ha.union(f.bounds),a){case eS:m=b,g=i.y1-ha.height()-l;break;case Vf:m=i.x1-ha.width()-l,g=b;break;case Kf:m=i.x2+ha.width()+l,g=b;break;case Fy:m=b,g=i.y2+l;break;default:m=s.x,g=s.y}return sE(s,"x",m)|sE(s,"y",g)&&(ha.translate(m,g),e.dirty(s),s.bounds.clear().union(ha),t.bounds.clear().union(ha),e.dirty(s)),s.bounds}function c5e(e){De.call(this,null,e)}lt(c5e,De,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&RKt(n,r,e.layout),zKt(n,r,e)}),UKt(e.mark.group)?t.reflow():t}});function UKt(e){return e&&e.mark.role!=="legend-entry"}function zKt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Ns().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case Gre:h=SKt(f)?a:u,h.union(CKt(e,f,i,s));break;case Yre:c=f;break;case Kre:l.push(MKt(e,f));break;case mKt:case gKt:case K4e:case X4e:case Q4e:case J4e:case Z4e:case e5e:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||Kf,d!==Xre&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];l5e(e,v,$Kt(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===t5e||n.autosize.type===n5e||n.autosize.type===r5e))switch(y.orient){case Vf:case Kf:o.add(v.x1,0).add(v.x2,0);break;case eS:case Fy:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(BKt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),VKt(e,t,o,n)}function VKt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===yKt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===Xre?(l=0,f=0,u=o,c=a):s===t5e?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===n5e?(u=Math.max(0,o-l-d),a=c+f+h):s===r5e?(o=u+l+d,c=Math.max(0,a-f-h)):s===bKt&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const HKt=Object.freeze(Object.defineProperty({__proto__:null,bound:i5e,identifier:Jre,mark:s5e,overlap:o5e,render:u5e,viewlayout:c5e},Symbol.toStringTag,{value:"Module"}));function f5e(e){De.call(this,null,e)}lt(f5e,De,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=gre(s,o,e.minstep),u=e.format||FFe(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?LFe(s,e.values,a):yre(s,a);return i&&(r.rem=i),i=l.map((c,f)=>Tr({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(Tr({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function d5e(e){De.call(this,null,e)}function qKt(){return Tr({})}function WKt(e){const t=ET().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}lt(d5e,De,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||qKt,s=e.key||Bt,o=this.value;return je(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Le("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=WKt(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function h5e(e){De.call(this,null,e)}lt(h5e,De,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(je(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||Hg,u=i.enter||Hg,l=i.exit||Hg,c=(s&&!o?i[s]:a)||Hg;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==Hg&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==Hg&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==Hg){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function p5e(e){De.call(this,[],e)}lt(p5e,De,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||BO,o=e.scale,a=+e.limit,u=gre(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===BO,c=e.format||zFe(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||UFe(o,u),d,h,p,m,g;return i&&(r.rem=i),s===BO?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,xn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=Da(m=p||8),i=i.map((y,v)=>Tr({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(Tr({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===bWt?(d=o.domain(),h=OFe(o,d[0],tr(d)),f.length<3&&!e.values&&d[0]!==tr(d)&&(f=[d[0],tr(d)]),i=f.map((y,v)=>Tr({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=RWt(o),i=f.map((y,v)=>Tr({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const GKt=e=>e.source.x,YKt=e=>e.source.y,KKt=e=>e.target.x,XKt=e=>e.target.y;function Zre(e){De.call(this,{},e)}Zre.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};lt(Zre,De,{transform(e,t){var n=e.sourceX||GKt,r=e.sourceY||YKt,i=e.targetX||KKt,s=e.targetY||XKt,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=dye.get(u+"-"+a)||dye.get(u);return l||Le("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const m5e=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,QKt=(e,t,n,r)=>m5e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),g5e=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},JKt=(e,t,n,r)=>g5e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),y5e=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},ZKt=(e,t,n,r)=>y5e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),eXt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,tXt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,nXt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},rXt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},iXt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},sXt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},dye=ET({line:m5e,"line-radial":QKt,arc:g5e,"arc-radial":JKt,curve:y5e,"curve-radial":ZKt,"orthogonal-horizontal":eXt,"orthogonal-vertical":tXt,"orthogonal-radial":nXt,"diagonal-horizontal":rXt,"diagonal-vertical":iXt,"diagonal-radial":sXt});function eie(e){De.call(this,null,e)}eie.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};lt(eie,De,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||bT,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/d2e(l),h=Vu(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const oXt=5;function aXt(e){const t=e.type;return!e.bins&&(t===Yx||t===nN||t===rN)}function v5e(e){return hre(e)&&e!==$h}const uXt=md(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function b5e(e){De.call(this,null,e),this.modified(!0)}lt(b5e,De,{transform(e,t){var n=t.dataflow,r=this.value,i=lXt(e);(!r||i!==r.type)&&(this.value=r=_r(i)());for(i in e)if(!uXt[i]){if(i==="padding"&&v5e(r.type))continue;xn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return mXt(r,e,pXt(r,e,fXt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function lXt(e){var t=e.type,n="",r;return t===$h?$h+"-"+Yx:(cXt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?$h+"-":r===3?CT+"-":""),(n+t||Yx).toLowerCase())}function cXt(e){const t=e.type;return hre(t)&&t!==$b&&t!==Mb&&(e.scheme||e.range&&e.range.length&&e.range.every(gt))}function fXt(e,t,n){const r=dXt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&aXt(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return v5e(s)&&t.padding&&i[0]!==tr(i)&&(i=hXt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(_5e(s,i,n)),s===lre&&e.unknown(t.domainImplicit?cH:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&gre(e,t.nice)||null),i.length}function dXt(e,t,n){return t?(e.domain(_5e(e.type,t,n)),t.length):-1}function hXt(e,t,n,r,i,s){var o=Math.abs(tr(n)-n[0]),a=o/(o-2*r),u=e===ng?nne(t,null,a):e===rN?oL(t,null,a,.5):e===nN?oL(t,null,a,i||1):e===L5?rne(t,null,a,s||1):tne(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function _5e(e,t,n){if(kFe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+rt(t))}return t}function pXt(e,t,n){let r=t.bins;if(r&&!je(r)){const i=e.domain(),s=i[0],o=tr(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Le("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Vu(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===cre&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function mXt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=gXt(r,t,n);else if(t.scheme&&(s=yXt(r,t,n),xn(s))){if(e.interpolator)return e.interpolator(s);Le(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&RFe(r))return e.interpolator(B5(_W(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(pre(t.interpolate,t.interpolateGamma)):xn(e.round)?e.round(i):xn(e.rangeRound)&&e.interpolate(i?fR:yg),s&&e.range(_W(s,t.reverse))}function gXt(e,t,n){e!==xFe&&e!==sW&&Le("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===sW?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*ure(n,i,r)]}function yXt(e,t,n){var r=t.schemeExtent,i,s;return je(t.scheme)?s=B5(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=mre(i),s||Le(`Unrecognized scheme name: ${t.scheme}`)),n=e===j5?n+1:e===cre?n-1:e===Kx||e===F5?+t.schemeCount||oXt:n,RFe(e)?hye(s,r,t.reverse):xn(s)?PFe(hye(s,r),n):e===lre?s:s.slice(0,n)}function hye(e,t,n){return xn(e)&&(t||n)?DFe(e,_W(t||[0,1],n)):e}function _W(e,t){return t?e.slice().reverse():e}function w5e(e){De.call(this,null,e)}lt(w5e,De,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(T_(e.sort)),this.modified(n),t}});const pye="zero",E5e="center",x5e="normalize",S5e=["y0","y1"];function tie(e){De.call(this,null,e)}tie.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:pye,values:[pye,E5e,x5e]},{name:"as",type:"string",array:!0,length:2,default:S5e}]};lt(tie,De,{transform(e,t){var n=e.as||S5e,r=n[0],i=n[1],s=T_(e.sort),o=e.field||bT,a=e.offset===E5e?vXt:e.offset===x5e?bXt:_Xt,u,l,c,f;for(u=wXt(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function vXt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function bXt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function _Xt(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function wXt(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const EXt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:f5e,datajoin:d5e,encode:h5e,legendentries:p5e,linkpath:Zre,pie:eie,scale:b5e,sortitems:w5e,stack:tie},Symbol.toStringTag,{value:"Module"}));var xXt=Math.abs,wW=Math.cos,xL=Math.sin,SXt=1e-6,T5e=Math.PI,EW=T5e/2,mye=TXt(2);function gye(e){return e>1?EW:e<-1?-EW:Math.asin(e)}function TXt(e){return e>0?Math.sqrt(e):0}function CXt(e,t){var n=e*xL(t),r=30,i;do t-=i=(t+xL(t)-n)/(1+wW(t));while(xXt(i)>SXt&&--r>0);return t/2}function AXt(e,t,n){function r(i,s){return[e*i*wW(s=CXt(n,s)),t*xL(s)]}return r.invert=function(i,s){return s=gye(s/t),[i/(e*wW(s)),gye((2*s+xL(2*s))/n)]},r}var IXt=AXt(mye/EW,mye,T5e);function kXt(){return pp(IXt).scale(169.529)}const RXt=UIe(),xW=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function NXt(e,t){return function n(){const r=t();return r.type=e,r.path=UIe().projection(r),r.copy=r.copy||function(){const i=n();return xW.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},AFe(r)}}function nie(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(SL[e]=NXt(e,t),this):SL[e]||null}function C5e(e){return e&&e.path||RXt}const SL={albers:VIe,albersusa:uEt,azimuthalequalarea:lEt,azimuthalequidistant:cEt,conicconformal:hEt,conicequalarea:zM,conicequidistant:gEt,equalEarth:vEt,equirectangular:pEt,gnomonic:bEt,identity:_Et,mercator:fEt,mollweide:kXt,naturalEarth1:wEt,orthographic:EEt,stereographic:xEt,transversemercator:SEt};for(const e in SL)nie(e,SL[e]);function DXt(){}const Fp=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function A5e(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),PXt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(OXt((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,Fp[g<<1].forEach(b);++h<e-1;)m=g,g=u[h+1]>=l,Fp[m|g<<1].forEach(b);for(Fp[g<<0].forEach(b);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,Fp[g<<1|y<<2].forEach(b);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,Fp[m|g<<1|y<<2|v<<3].forEach(b);Fp[g|y<<3].forEach(b)}for(h=-1,y=u[p*e]>=l,Fp[y<<2].forEach(b);++h<e-1;)v=y,y=u[p*e+h+1]>=l,Fp[y<<2|v<<3].forEach(b);Fp[y<<3].forEach(b);function b(w){var E=[w[0][0]+h,w[0][1]+p],x=[w[1][0]+h,w[1][1]+p],S=o(E),C=o(x),I,k;(I=d[S])?(k=f[C])?(delete d[I.end],delete f[k.start],I===k?(I.ring.push(x),c(I.ring)):f[I.start]=d[k.end]={start:I.start,end:k.end,ring:I.ring.concat(k.ring)}):(delete d[I.end],I.ring.push(x),d[I.end=C]=I):(I=f[C])?(k=d[S])?(delete f[I.start],delete d[k.end],I===k?(I.ring.push(x),c(I.ring)):f[k.start]=d[I.end]={start:k.start,end:I.end,ring:k.ring.concat(I.ring)}):(delete f[I.start],I.ring.unshift(E),f[I.start=S]=I):f[S]=d[C]={start:S,end:C,ring:[E,x]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Le("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:DXt,r):n===a},r}function PXt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function OXt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=$Xt(e,t[n]))return i;return 0}function $Xt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(MXt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function MXt(e,t,n){var r;return LXt(e,t,n)&&FXt(e[r=+(e[0]===t[0])],n[r],t[r])}function LXt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function FXt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function I5e(e,t,n){return function(r){var i=Jh(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?py(s,o,e):a/(e+1);return Vu(s+u,o,u)}}function rie(e){De.call(this,null,e)}rie.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};lt(rie,De,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Na,s=A5e().smooth(e.smooth!==!1),o=e.thresholds||jXt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,je(o)?o:o(c.values));BXt(f,c,l,e),f.forEach(d=>{u.push(I5(l,Tr(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function jXt(e,t,n){const r=I5e(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>H0(t(i).values)))}function BXt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(xn(i)&&(i=i(n,r)),xn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(hr(i)?i:i[0])||1,a=(hr(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(k5e(t,o,a,u,l))}function k5e(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function yye(e,t,n){const r=e>=0?e:Ene(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function FU(e){return xn(e)?e:Da(+e)}function R5e(){var e=u=>u[0],t=u=>u[1],n=bT,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=yye(r[0],u,e)>>o,f=yye(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(w=>{const E=d+(+e(w)>>o),x=h+(+t(w)>>o);E>=0&&E<p&&x>=0&&x<m&&(g[E+x*p]+=+n(w))}),c>0&&f>0?(fw(p,m,g,y,c),dw(p,m,y,g,f),fw(p,m,g,y,c),dw(p,m,y,g,f),fw(p,m,g,y,c),dw(p,m,y,g,f)):c>0?(fw(p,m,g,y,c),fw(p,m,y,g,c),fw(p,m,g,y,c),v=y):f>0&&(dw(p,m,g,y,f),dw(p,m,y,g,f),dw(p,m,g,y,f),v=y);const b=l?Math.pow(2,-2*o):1/d2e(v);for(let w=0,E=p*m;w<E;++w)v[w]*=b;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=FU(u),a):e},a.y=function(u){return arguments.length?(t=FU(u),a):t},a.weight=function(u){return arguments.length?(n=FU(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Le("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Le("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=mt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Le("invalid bandwidth"),r=u,a):r},a}function fw(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function dw(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function iie(e){De.call(this,null,e)}iie.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const UXt=["x","y","weight","size","cellSize","bandwidth"];function N5e(e,t){return UXt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}lt(iie,De,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=zXt(r,e.groupby),s=(e.groupby||[]).map(ts),o=N5e(R5e(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>Tr(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function zXt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function sie(e){De.call(this,null,e)}sie.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};lt(sie,De,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=A5e().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||I5e(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=N5e(R5e(),e)(i,!0),u=k5e(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=je(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Tr),n}});const SW="Feature",oie="FeatureCollection",VXt="MultiPoint";function aie(e){De.call(this,null,e)}aie.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};lt(aie,De,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&Na,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(Sa(a))||s&&t.modified(Sa(s))||o&&t.modified(Sa(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:SW,geometry:{type:VXt,coordinates:r}})),this.value={type:oie,features:n}}});function uie(e){De.call(this,null,e)}uie.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};lt(uie,De,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Na,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=C5e(e.projection),n.materialize().reflow()):o=i===Na||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=HXt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function HXt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function lie(e){De.call(this,null,e)}lie.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};lt(lie,De,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function cie(e){De.call(this,null,e)}cie.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};lt(cie,De,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=qXt(C5e(e.projection),e.field||Zc("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function qXt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function fie(e){De.call(this,[],e),this.generator=Uwt()}fie.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};lt(fie,De,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)xn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(N6e(n[0],i)):t.add.push(Tr(i)),n[0]=i,t}});function die(e){De.call(this,null,e)}die.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};lt(die,De,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Na,s=GXt(e.opacity,e),o=WXt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?H0(n.map(l=>H0(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=En({},l,u);r||(f.$max=H0(c.values||[])),l[a]=YXt(c,f,o.dep?o:Da(o(f)),s.dep?s:Da(s(f)))}),t.reflow(!0).modifies(a)}});function WXt(e,t){let n;return xn(e)?(n=r=>my(e(r,t)),n.dep=D5e(e)):n=Da(my(e||"#888")),n}function GXt(e,t){let n;return xn(e)?(n=r=>e(r,t),n.dep=D5e(e)):e?n=Da(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function D5e(e){if(!xn(e))return!1;const t=md(Sa(e));return t.$x||t.$y||t.$value||t.$max}function YXt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:d0,d=ty(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,b=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+b);const w=n(t);m[y+0]=w.r,m[y+1]=w.g,m[y+2]=w.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function P5e(e){De.call(this,null,e),this.modified(!0)}lt(P5e,De,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=XXt(e.type),xW.forEach(r=>{e[r]!=null&&vye(n,r,e[r])})):xW.forEach(r=>{e.modified(r)&&vye(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&KXt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function KXt(e,t){const n=QXt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function XXt(e){const t=nie((e||"mercator").toLowerCase());return t||Le("Unrecognized projection type: "+e),t()}function vye(e,t,n){xn(e[t])&&e[t](n)}function QXt(e){return e=mt(e),e.length===1?e[0]:{type:oie,features:e.reduce((t,n)=>t.concat(JXt(n)),[])}}function JXt(e){return e.type===oie?e.features:mt(e).filter(t=>t!=null).map(t=>t.type===SW?t:{type:SW,geometry:t})}const ZXt=Object.freeze(Object.defineProperty({__proto__:null,contour:sie,geojson:aie,geopath:uie,geopoint:lie,geoshape:cie,graticule:fie,heatmap:die,isocontour:rie,kde2d:iie,projection:P5e},Symbol.toStringTag,{value:"Module"})),bye={center:N_t,collide:X_t,nbody:awt,link:J_t,x:uwt,y:lwt},NA="forces",TW=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],eQt=["static","iterations"],O5e=["x","y","vx","vy"];function hie(e){De.call(this,null,e)}hie.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:O5e}]};lt(hie,De,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(TW),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&$5e(n,e,0,t)):(this.value=n=nQt(t.source,e),n.on("tick",tQt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(eQt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==NA||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(O5e)}});function tQt(e,t){return()=>e.touch(t).run()}function nQt(e,t){const n=owt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),$5e(n,t,!0).on("end",()=>s=!0)}function $5e(e,t,n,r){var i=mt(t.forces),s,o,a,u;for(s=0,o=TW.length;s<o;++s)a=TW[s],a!==NA&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=NA+s,a=n||t.modified(NA,s)?iQt(i[s]):r&&rQt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(NA+s,null);return e.numForces=i.length,e}function rQt(e,t){var n,r;for(n in e)if(xn(r=e[n])&&t.modified(Sa(r)))return 1;return 0}function iQt(e){var t,n;zt(bye,e.force)||Le("Unrecognized force: "+e.force),t=bye[e.force]();for(n in e)xn(t[n])&&sQt(t[n],e[n],e);return t}function sQt(e,t,n){e(xn(t)?r=>t(r,n):t)}const oQt=Object.freeze(Object.defineProperty({__proto__:null,force:hie},Symbol.toStringTag,{value:"Module"}));function CW(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function pie(e){De.call(this,null,e)}pie.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const aQt=e=>e.values;lt(pie,De,{transform(e,t){t.source||Le("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&A5(o.data)&&i.rem.push(o.data)}),this.value=s=t4({values:mt(e.keys).reduce((o,a)=>(o.key(a),o),uQt()).entries(i.source)},aQt),n&&s.each(o=>{o.children&&(o=Tr(o.data),i.add.push(o),i.source.push(o))}),CW(s,Bt,Bt)),i.source.root=s,i}});function uQt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function Tg(e){De.call(this,null,e)}const lQt=(e,t)=>e.parent===t.parent?1:2;lt(Tg,De,{transform(e,t){(!t.source||!t.source.root)&&Le(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(T_(e.sort,o=>o.data)),cQt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?lQt:bT);try{this.value=n(i)}catch(o){Le(o)}return i.each(o=>fQt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function cQt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function fQt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const AW=["x","y","r","depth","children"];function mie(e){Tg.call(this,e)}mie.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:AW.length,default:AW}]};lt(mie,Tg,{layout:ike,params:["radius","size","padding"],fields:AW});const IW=["x0","y0","x1","y1","depth","children"];function gie(e){Tg.call(this,e)}gie.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:IW.length,default:IW}]};lt(gie,Tg,{layout:lxt,params:["size","round","padding"],fields:IW});function yie(e){De.call(this,null,e)}yie.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};lt(yie,De,{transform(e,t){t.source||Le("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?CW(she().id(e.key).parentId(e.parentKey)(i.source),e.key,ef):CW(she()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const _ye={tidy:bxt,cluster:DEt},kW=["x","y","depth","children"];function vie(e){Tg.call(this,e)}vie.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:kW.length,default:kW}]};lt(vie,Tg,{layout(e){const t=e||"tidy";if(zt(_ye,t))return _ye[t]();Le("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:kW});function bie(e){De.call(this,[],e)}bie.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};lt(bie,De,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Le("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Bt(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Bt(a)]&&s[Bt(u)]&&i.add.push(Tr({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Bt(o)]=1),n.forEach(o=>{(s[Bt(o.source)]||s[Bt(o.target)])&&i.mod.push(o)})),i}});const wye={binary:wxt,dice:mR,slice:n4,slicedice:Ext,squarify:uke,resquarify:xxt},RW=["x0","y0","x1","y1","depth","children"];function _ie(e){Tg.call(this,e)}_ie.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:RW.length,default:RW}]};lt(_ie,Tg,{layout(){const e=_xt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{zt(wye,t)?e.tile(wye[t]):Le("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:RW});const dQt=Object.freeze(Object.defineProperty({__proto__:null,nest:pie,pack:mie,partition:gie,stratify:yie,tree:vie,treelinks:bie,treemap:_ie},Symbol.toStringTag,{value:"Module"})),jU=4278190080;function hQt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function pQt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=ty(s,o).getContext("2d"),l=ty(s,o).getContext("2d"),c=a&&ty(s,o).getContext("2d");n.forEach(C=>KO(u,C,!1)),KO(l,t,!1),a&&KO(c,t,!0);const f=BU(u,s,o),d=BU(l,s,o),h=a&&BU(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,b,w,E,x,S;for(y=0;y<o;++y)for(g=0;g<s;++g)w=y*s+g,E=f[w]&jU,S=d[w]&jU,x=a&&h[w]&jU,(E||x||S)&&(v=e(g),b=e(y),!i&&(E||S)&&p.set(v,b),a&&(E||x)&&m.set(v,b));return[p,m]}function BU(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function KO(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>KO(e,s.items,n))}):sc[r].draw(e,{items:n?t.map(mQt):t})}function mQt(e){const t=I5(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const jp=5,Va=31,Ek=32,t0=new Uint32Array(Ek+1),Lf=new Uint32Array(Ek+1);Lf[0]=0;t0[0]=~Lf[0];for(let e=1;e<=Ek;++e)Lf[e]=Lf[e-1]<<1|1,t0[e]=~Lf[e];function gQt(e,t){const n=new Uint32Array(~~((e*t+Ek)/Ek));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>jp]&1<<(a&Va)},set:(s,o)=>{const a=o*e+s;r(a>>>jp,1<<(a&Va))},clear:(s,o)=>{const a=o*e+s;i(a>>>jp,~(1<<(a&Va)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>jp,h=f>>>jp,d===h){if(n[d]&t0[c&Va]&Lf[(f&Va)+1])return!0}else{if(n[d]&t0[c&Va]||n[h]&Lf[(f&Va)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>jp,d=c>>>jp,f===d)r(f,t0[l&Va]&Lf[(c&Va)+1]);else for(r(f,t0[l&Va]),r(d,Lf[(c&Va)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>jp,d=c>>>jp,f===d)i(f,Lf[l&Va]|t0[(c&Va)+1]);else for(i(f,Lf[l&Va]),i(d,t0[(c&Va)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function yQt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>gQt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function vQt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=ql.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let b=0;b<u;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,m=a[b].y2===void 0?p:a[b].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function TL(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function A0(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function bQt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!TL(p,m,d,h,i,s)&&!A0(e,p,m,h,d,g,o,a)&&!A0(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,A0(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=ql.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,b,w,E,x,S,C,I,k,R,O,P,$,L,M,B,U;for(let V=0;V<f;++V){for(v=c[V].x,w=c[V].y,b=c[V].x2===void 0?v:c[V].x2,E=c[V].y2===void 0?w:c[V].y2,v>b&&(U=v,v=b,b=U),w>E&&(U=w,w=E,E=U),k=e(v),O=e(b),R=~~((k+O)/2),P=e(w),L=e(E),$=~~((P+L)/2),C=R;C>=k;--C)for(I=$;I>=P;--I)B=u(C,I,p,h,d),B&&([l.x,l.y,p,m]=B);for(C=R;C<=O;++C)for(I=$;I<=L;++I)B=u(C,I,p,h,d),B&&([l.x,l.y,p,m]=B);!m&&!n&&(M=Math.abs(b-v+E-w),x=(v+b)/2,S=(w+E)/2,M>=y&&!TL(x,S,h,d,i,s)&&!A0(e,x,S,d,h,d,o,null)&&(y=M,l.x=x,l.y=S,g=!0))}return m||g?(x=h/2,S=d/2,o.setRange(e(l.x-x),e(l.y-S),e(l.x+x),e(l.y+S)),l.align="center",l.baseline="middle",!0):!1}}const _Qt=[-1,-1,1,1],wQt=[-1,1,-1,1];function EQt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=ql.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,b,w,E,x,S,C,I,k,R,O,P,$;for(let L=0;L<f;++L){for(b=c[L].x,E=c[L].y,w=c[L].x2===void 0?b:c[L].x2,x=c[L].y2===void 0?E:c[L].y2,p.push([e((b+w)/2),e((E+x)/2)]);p.length;)if([I,k]=p.pop(),!(o.get(I,k)||a.get(I,k)||u.get(I,k))){u.set(I,k);for(let M=0;M<4;++M)S=I+_Qt[M],C=k+wQt[M],u.outOfBounds(S,C,S,C)||p.push([S,C]);if(S=e.invert(I),C=e.invert(k),R=m,O=s,!TL(S,C,h,d,i,s)&&!A0(e,S,C,d,h,R,o,a)&&!A0(e,S,C,d,h,d,o,null)){for(;O-R>=1;)P=(R+O)/2,A0(e,S,C,d,h,P,o,a)?O=P:R=P;R>m&&(l.x=S,l.y=C,m=R,g=!0)}}!g&&!n&&($=Math.abs(w-b+x-E),S=(b+w)/2,C=(E+x)/2,$>=v&&!TL(S,C,h,d,i,s)&&!A0(e,S,C,d,h,d,o,null)&&(v=$,l.x=S,l.y=C,y=!0))}return g||y?(S=h/2,C=d/2,o.setRange(e(l.x-S),e(l.y-C),e(l.x+S),e(l.y+C)),l.align="center",l.baseline="middle",!0):!1}}const xQt=["right","center","left"],SQt=["bottom","middle","top"];function TQt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,b,w,E,x,S,C,I,k,R;for(let O=0;O<u;++O){if(h=(n[O]&3)-1,p=(n[O]>>>2&3)-1,m=h===0&&p===0||r[O]<0,g=h&&p?Math.SQRT1_2:1,y=r[O]<0?-1:1,v=c[1+h]+r[O]*h*g,S=c[4+p]+y*f*p/2+r[O]*p*g,w=S-f/2,E=S+f/2,C=e(v),k=e(w),R=e(E),!d)if(Eye(C,C,k,R,o,a,v,v,w,E,c,m))d=ql.width(l.datum,l.datum.text);else continue;if(x=v+y*d*h/2,v=x-d/2,b=x+d/2,C=e(v),I=e(b),Eye(C,I,k,R,o,a,v,b,w,E,c,m))return l.x=h?h*y<0?b:v:x,l.y=p?p*y<0?E:w:S,l.align=xQt[h*y+1],l.baseline=SQt[p*y+1],o.setRange(C,k,I,R),!0}return!1}}function Eye(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const UU=0,zU=4,VU=8,HU=0,qU=1,WU=2,CQt={"top-left":UU+HU,top:UU+qU,"top-right":UU+WU,left:zU+HU,middle:zU+qU,right:zU+WU,"bottom-left":VU+HU,bottom:VU+qU,"bottom-right":VU+WU},AQt={naive:vQt,"reduced-search":bQt,floodfill:EQt};function IQt(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=kQt(r,f),h=RQt(i,f),p=NQt(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=DQt(p,m,a,u),v=l===null||l===1/0,b=g&&c==="naive";let w=-1,E=-1;const x=e.map(k=>{const R=v?ql.width(k,k.text):void 0;return w=Math.max(w,R),E=Math.max(E,k.fontSize),{datum:k,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(k),textWidth:R}});l=l===null||l===1/0?Math.max(w,E)+Math.max(...r):l;const S=yQt(t[0],t[1],l);let C;if(!b){n&&x.sort((O,P)=>n(O.datum,P.datum));let k=!1;for(let O=0;O<h.length&&!k;++O)k=h[O]===5||d[O]<0;const R=(p&&o||g)&&e.map(O=>O.datum);C=s.length||R?pQt(S,R||[],s,k,g):hQt(S,o&&x)}const I=g?AQt[c](S,C,o,u):TQt(S,C,h,d);return x.forEach(k=>k.opacity=+I(k)),x}function kQt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function RQt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=CQt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function NQt(e){return e&&e.mark&&e.mark.marktype}function DQt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const NW=["x","y","opacity","align","baseline"],M5e=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function wie(e){De.call(this,null,e)}wie.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:M5e},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:NW.length,default:NW}]};lt(wie,De,{transform(e,t){function n(s){const o=e[s];return xn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Le("Size parameter should be specified as a [width, height] array.");const i=e.as||NW;return IQt(t.materialize(t.SOURCE).source||[],e.size,e.sort,mt(e.offset==null?1:e.offset),mt(e.anchor||M5e),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const PQt=Object.freeze(Object.defineProperty({__proto__:null,label:wie},Symbol.toStringTag,{value:"Module"}));function L5e(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Eie(e){De.call(this,null,e)}Eie.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};lt(Eie,De,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=L5e(r,e.groupby),s=(e.groupby||[]).map(ts),o=s.length,a=e.as||[ts(e.x),ts(e.y)],u=[];i.forEach(l=>{K6e(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(Tr(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const DW={constant:One,linear:$ne,log:q6e,exp:W6e,pow:G6e,quad:Mne,poly:Y6e},OQt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function xie(e){De.call(this,null,e)}xie.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(DW)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};lt(xie,De,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=L5e(r,e.groupby),s=(e.groupby||[]).map(ts),o=e.method||"linear",a=e.order==null?3:e.order,u=OQt(o,a),l=e.as||[ts(e.x),ts(e.y)],c=DW[o],f=[];let d=e.extent;zt(DW,o)||Le("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(Tr({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||Jh(h,e.x),y=v=>{const b={};for(let w=0;w<s.length;++w)b[s[w]]=h.dims[w];b[l[0]]=v[0],b[l[1]]=v[1],f.push(Tr(b))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):$5(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const $Qt=Object.freeze(Object.defineProperty({__proto__:null,loess:Eie,regression:xie},Symbol.toStringTag,{value:"Module"}));function Sie(e){De.call(this,null,e)}Sie.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const MQt=[-1e5,-1e5,1e5,1e5];lt(Sie,De,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:MQt;const s=this.value=jQ.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!FQt(u)?LQt(u):null}return t.reflow(e.modified()).modifies(n)}});function LQt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function FQt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const jQt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Sie},Symbol.toStringTag,{value:"Module"}));var GU=Math.PI/180,DA=64,XO=2048;function BQt(){var e=[256,256],t,n,r,i,s,o,a,u=F5e,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(ty()),m=WQt((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,b=[],w=l.map(x=>({text:t(x),font:n(x),style:i(x),weight:s(x),rotate:o(x),size:~~(r(x)+1e-14),padding:a(x),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:x})).sort((x,S)=>S.size-x.size);++v<y;){var E=w[v];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,UQt(p,E,w,v),E.hasText&&h(m,E,g)&&(b.push(E),g?VQt(g,E):g=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(DA<<5)/m,p.height=XO/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,b=Math.sqrt(e[0]*e[0]+e[1]*e[1]),w=u(e),E=c()<.5?1:-1,x=-E,S,C,I;(S=w(x+=E))&&(C=~~S[0],I=~~S[1],!(Math.min(Math.abs(C),Math.abs(I))>=b));)if(m.x=y+C,m.y=v+I,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!zQt(m,p,e[0]))&&(!g||HQt(m,g))){for(var k=m.sprite,R=m.width>>5,O=e[0]>>5,P=m.x-(R<<4),$=P&127,L=32-$,M=m.y1-m.y0,B=(m.y+m.y0)*O+(P>>5),U,V=0;V<M;V++){U=0;for(var D=0;D<=R;D++)p[B+D]|=U<<L|(D<R?(U=k[V*R+D])>>>$:0);B+=O}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=Mv(p),f):n},f.fontStyle=function(p){return arguments.length?(i=Mv(p),f):i},f.fontWeight=function(p){return arguments.length?(s=Mv(p),f):s},f.rotate=function(p){return arguments.length?(o=Mv(p),f):o},f.text=function(p){return arguments.length?(t=Mv(p),f):t},f.spiral=function(p){return arguments.length?(u=GQt[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=Mv(p),f):r},f.padding=function(p){return arguments.length?(a=Mv(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function UQt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(DA<<5)/s,XO/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*GU),g=Math.cos(t.rotate*GU),y=c*g,v=c*m,b=d*g,w=d*m;c=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=DA<<5&&(o=0,a+=u,u=0),a+d>=XO)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*GU),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var E=i.getImageData(0,0,(DA<<5)/s,XO/s).data,x=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)x[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var S=0,C=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var I=f*p+(h>>5),k=E[(a+p)*(DA<<5)+(o+h)<<2]?1<<31-h%32:0;x[I]|=k,S|=k}S?C=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+C,t.sprite=x.slice(0,(t.y1-t.y0)*f)}}}function zQt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function VQt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function HQt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function F5e(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function qQt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function WQt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Mv(e){return typeof e=="function"?e:function(){return e}}var GQt={archimedean:F5e,rectangular:qQt};const j5e=["x","y","font","fontSize","fontStyle","fontWeight","angle"],YQt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Tie(e){De.call(this,BQt(),e)}Tie.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:j5e}]};lt(Tie,De,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Le("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return xn(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||YQt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||j5e;let a=e.fontSize||14,u;if(xn(a)?u=e.fontSizeRange:a=Da(a),u){const p=a,m=_r("sqrt")().domain(Jh(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(nf).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const KQt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:Tie},Symbol.toStringTag,{value:"Module"})),XQt=e=>new Uint8Array(e),QQt=e=>new Uint16Array(e),P2=e=>new Uint32Array(e);function JQt(){let e=8,t=[],n=P2(0),r=wP(0,e),i=wP(0,e);return{data:()=>t,seen:()=>n=ZQt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=wP(s,e,r),i=wP(s,e))}}}function ZQt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function wP(e,t,n){const r=(t<257?XQt:t<65537?QQt:P2)(e);return n&&r.set(n),r}function xye(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function Sye(){let e=P2(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=P2(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=eJt(h,d),c)p=t,m=e,t=Array(c+f),e=P2(c+f),tJt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[K0t(u,a[0],0,l),hy(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function eJt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),J0t(e,t)}function tJt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function Cie(e){De.call(this,JQt(),e),this._indices=null,this._dims=null}Cie.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};lt(Cie,De,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=Sye()),s.push(xye(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,b,w,E,x,S;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},v=t.mod,E=0,x=v.length;E<x;++E)w[v[E]._index]=1;for(E=0;E<h;++E)S=r[E],(!o[E]||e.modified("fields",E)||t.modified(S.fields))&&(y=S.fname,(m=p[y])||(s[y]=g=Sye(),p[y]=m=g.insert(S,t.source,0)),o[E]=xye(g,E,i[E]).onAdd(m,u));for(E=0,x=a.data().length;E<x;++E)b[E]||(l[E]!==u[E]?f.push(E):w[E]&&u[E]!==c&&d.push(E));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function Aie(e){De.call(this,null,e)}Aie.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};lt(Aie,De,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const nJt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Cie,resolvefilter:Aie},Symbol.toStringTag,{value:"Module"})),rJt="RawCode",Fb="Literal",iJt="Property",sJt="Identifier",oJt="ArrayExpression",aJt="BinaryExpression",B5e="CallExpression",uJt="ConditionalExpression",lJt="LogicalExpression",cJt="MemberExpression",fJt="ObjectExpression",dJt="UnaryExpression";function Td(e){this.type=e}Td.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=hJt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function hJt(e){switch(e.type){case oJt:return e.elements;case aJt:case lJt:return[e.left,e.right];case B5e:return[e.callee].concat(e.arguments);case uJt:return[e.test,e.consequent,e.alternate];case cJt:return[e.object,e.property];case fJt:return e.properties;case iJt:return[e.key,e.value];case dJt:return[e.argument];case sJt:case Fb:case rJt:default:return[]}}var wp,Rt,$e,Ca,Mr,Z5=1,mN=2,jb=3,gv=4,ej=5,I_=6,Du=7,gN=8,pJt=9;wp={};wp[Z5]="Boolean";wp[mN]="<end>";wp[jb]="Identifier";wp[gv]="Keyword";wp[ej]="Null";wp[I_]="Numeric";wp[Du]="Punctuator";wp[gN]="String";wp[pJt]="RegularExpression";var mJt="ArrayExpression",gJt="BinaryExpression",yJt="CallExpression",vJt="ConditionalExpression",U5e="Identifier",bJt="Literal",_Jt="LogicalExpression",wJt="MemberExpression",EJt="ObjectExpression",xJt="Property",SJt="UnaryExpression",co="Unexpected token %0",TJt="Unexpected number",CJt="Unexpected string",AJt="Unexpected identifier",IJt="Unexpected reserved word",kJt="Unexpected end of input",PW="Invalid regular expression",YU="Invalid regular expression: missing /",z5e="Octal literals are not allowed in strict mode.",RJt="Duplicate data property in object literal not allowed in strict mode",Bo="ILLEGAL",xk="Disabled.",NJt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),DJt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function tj(e,t){if(!e)throw new Error("ASSERT: "+t)}function Qp(e){return e>=48&&e<=57}function Iie(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function O2(e){return"01234567".indexOf(e)>=0}function PJt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function Sk(e){return e===10||e===13||e===8232||e===8233}function yN(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&NJt.test(String.fromCharCode(e))}function CL(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&DJt.test(String.fromCharCode(e))}const OJt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function V5e(){for(;$e<Ca;){const e=Rt.charCodeAt($e);if(PJt(e)||Sk(e))++$e;else break}}function OW(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)$e<Ca&&Iie(Rt[$e])?(r=Rt[$e++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):vr({},co,Bo);return String.fromCharCode(i)}function $Jt(){var e,t,n,r;for(e=Rt[$e],t=0,e==="}"&&vr({},co,Bo);$e<Ca&&(e=Rt[$e++],!!Iie(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&vr({},co,Bo),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function H5e(){var e,t;for(e=Rt.charCodeAt($e++),t=String.fromCharCode(e),e===92&&(Rt.charCodeAt($e)!==117&&vr({},co,Bo),++$e,e=OW("u"),(!e||e==="\\"||!yN(e.charCodeAt(0)))&&vr({},co,Bo),t=e);$e<Ca&&(e=Rt.charCodeAt($e),!!CL(e));)++$e,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Rt.charCodeAt($e)!==117&&vr({},co,Bo),++$e,e=OW("u"),(!e||e==="\\"||!CL(e.charCodeAt(0)))&&vr({},co,Bo),t+=e);return t}function MJt(){var e,t;for(e=$e++;$e<Ca;){if(t=Rt.charCodeAt($e),t===92)return $e=e,H5e();if(CL(t))++$e;else break}return Rt.slice(e,$e)}function LJt(){var e,t,n;return e=$e,t=Rt.charCodeAt($e)===92?H5e():MJt(),t.length===1?n=jb:OJt.hasOwnProperty(t)?n=gv:t==="null"?n=ej:t==="true"||t==="false"?n=Z5:n=jb,{type:n,value:t,start:e,end:$e}}function KU(){var e=$e,t=Rt.charCodeAt($e),n,r=Rt[$e],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++$e,{type:Du,value:String.fromCharCode(t),start:e,end:$e};default:if(n=Rt.charCodeAt($e+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return $e+=2,{type:Du,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:$e};case 33:case 61:return $e+=2,Rt.charCodeAt($e)===61&&++$e,{type:Du,value:Rt.slice(e,$e),start:e,end:$e}}}if(o=Rt.substr($e,4),o===">>>=")return $e+=4,{type:Du,value:o,start:e,end:$e};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return $e+=3,{type:Du,value:s,start:e,end:$e};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return $e+=2,{type:Du,value:i,start:e,end:$e};if(i==="//"&&vr({},co,Bo),"<>=!+-*%&|^/".indexOf(r)>=0)return++$e,{type:Du,value:r,start:e,end:$e};vr({},co,Bo)}function FJt(e){let t="";for(;$e<Ca&&Iie(Rt[$e]);)t+=Rt[$e++];return t.length===0&&vr({},co,Bo),yN(Rt.charCodeAt($e))&&vr({},co,Bo),{type:I_,value:parseInt("0x"+t,16),start:e,end:$e}}function jJt(e){let t="0"+Rt[$e++];for(;$e<Ca&&O2(Rt[$e]);)t+=Rt[$e++];return(yN(Rt.charCodeAt($e))||Qp(Rt.charCodeAt($e)))&&vr({},co,Bo),{type:I_,value:parseInt(t,8),octal:!0,start:e,end:$e}}function Tye(){var e,t,n;if(n=Rt[$e],tj(Qp(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=$e,e="",n!=="."){if(e=Rt[$e++],n=Rt[$e],e==="0"){if(n==="x"||n==="X")return++$e,FJt(t);if(O2(n))return jJt(t);n&&Qp(n.charCodeAt(0))&&vr({},co,Bo)}for(;Qp(Rt.charCodeAt($e));)e+=Rt[$e++];n=Rt[$e]}if(n==="."){for(e+=Rt[$e++];Qp(Rt.charCodeAt($e));)e+=Rt[$e++];n=Rt[$e]}if(n==="e"||n==="E")if(e+=Rt[$e++],n=Rt[$e],(n==="+"||n==="-")&&(e+=Rt[$e++]),Qp(Rt.charCodeAt($e)))for(;Qp(Rt.charCodeAt($e));)e+=Rt[$e++];else vr({},co,Bo);return yN(Rt.charCodeAt($e))&&vr({},co,Bo),{type:I_,value:parseFloat(e),start:t,end:$e}}function BJt(){var e="",t,n,r,i,s=!1;for(t=Rt[$e],tj(t==="'"||t==='"',"String literal must starts with a quote"),n=$e,++$e;$e<Ca;)if(r=Rt[$e++],r===t){t="";break}else if(r==="\\")if(r=Rt[$e++],!r||!Sk(r.charCodeAt(0)))switch(r){case"u":case"x":Rt[$e]==="{"?(++$e,e+=$Jt()):e+=OW(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:O2(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),$e<Ca&&O2(Rt[$e])&&(s=!0,i=i*8+"01234567".indexOf(Rt[$e++]),"0123".indexOf(r)>=0&&$e<Ca&&O2(Rt[$e])&&(i=i*8+"01234567".indexOf(Rt[$e++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Rt[$e]===`
`&&++$e;else{if(Sk(r.charCodeAt(0)))break;e+=r}return t!==""&&vr({},co,Bo),{type:gN,value:e,octal:s,start:n,end:$e}}function UJt(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";vr({},PW)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{vr({},PW)}try{return new RegExp(e,t)}catch{return null}}function zJt(){var e,t,n,r,i;for(e=Rt[$e],tj(e==="/","Regular expression literal must start with a slash"),t=Rt[$e++],n=!1,r=!1;$e<Ca;)if(e=Rt[$e++],t+=e,e==="\\")e=Rt[$e++],Sk(e.charCodeAt(0))&&vr({},YU),t+=e;else if(Sk(e.charCodeAt(0)))vr({},YU);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||vr({},YU),i=t.substr(1,t.length-2),{value:i,literal:t}}function VJt(){var e,t,n;for(t="",n="";$e<Ca&&(e=Rt[$e],!!CL(e.charCodeAt(0)));)++$e,e==="\\"&&$e<Ca?vr({},co,Bo):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&vr({},PW,n),{value:n,literal:t}}function HJt(){var e,t,n,r;return Mr=null,V5e(),e=$e,t=zJt(),n=VJt(),r=UJt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:$e}}function qJt(e){return e.type===jb||e.type===gv||e.type===Z5||e.type===ej}function q5e(){if(V5e(),$e>=Ca)return{type:mN,start:$e,end:$e};const e=Rt.charCodeAt($e);return yN(e)?LJt():e===40||e===41||e===59?KU():e===39||e===34?BJt():e===46?Qp(Rt.charCodeAt($e+1))?Tye():KU():Qp(e)?Tye():KU()}function Bu(){const e=Mr;return $e=e.end,Mr=q5e(),$e=e.end,e}function W5e(){const e=$e;Mr=q5e(),$e=e}function WJt(e){const t=new Td(mJt);return t.elements=e,t}function Cye(e,t,n){const r=new Td(e==="||"||e==="&&"?_Jt:gJt);return r.operator=e,r.left=t,r.right=n,r}function GJt(e,t){const n=new Td(yJt);return n.callee=e,n.arguments=t,n}function YJt(e,t,n){const r=new Td(vJt);return r.test=e,r.consequent=t,r.alternate=n,r}function kie(e){const t=new Td(U5e);return t.name=e,t}function PA(e){const t=new Td(bJt);return t.value=e.value,t.raw=Rt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Aye(e,t,n){const r=new Td(wJt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function KJt(e){const t=new Td(EJt);return t.properties=e,t}function Iye(e,t,n){const r=new Td(xJt);return r.key=t,r.value=n,r.kind=e,r}function XJt(e,t){const n=new Td(SJt);return n.operator=e,n.argument=t,n.prefix=!0,n}function vr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(tj(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=$e,n.description=i,n}function nj(e){e.type===mN&&vr(e,kJt),e.type===I_&&vr(e,TJt),e.type===gN&&vr(e,CJt),e.type===jb&&vr(e,AJt),e.type===gv&&vr(e,IJt),vr(e,co,e.value)}function Aa(e){const t=Bu();(t.type!==Du||t.value!==e)&&nj(t)}function pi(e){return Mr.type===Du&&Mr.value===e}function XU(e){return Mr.type===gv&&Mr.value===e}function QJt(){const e=[];for($e=Mr.start,Aa("[");!pi("]");)pi(",")?(Bu(),e.push(null)):(e.push(Bb()),pi("]")||Aa(","));return Bu(),WJt(e)}function kye(){$e=Mr.start;const e=Bu();return e.type===gN||e.type===I_?(e.octal&&vr(e,z5e),PA(e)):kie(e.value)}function JJt(){var e,t,n,r;if($e=Mr.start,e=Mr,e.type===jb)return n=kye(),Aa(":"),r=Bb(),Iye("init",n,r);if(e.type===mN||e.type===Du)nj(e);else return t=kye(),Aa(":"),r=Bb(),Iye("init",t,r)}function ZJt(){var e=[],t,n,r,i={},s=String;for($e=Mr.start,Aa("{");!pi("}");)t=JJt(),t.key.type===U5e?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?vr({},RJt):i[r]=!0,e.push(t),pi("}")||Aa(",");return Aa("}"),KJt(e)}function eZt(){Aa("(");const e=Rie();return Aa(")"),e}const tZt={if:1};function nZt(){var e,t,n;if(pi("("))return eZt();if(pi("["))return QJt();if(pi("{"))return ZJt();if(e=Mr.type,$e=Mr.start,e===jb||tZt[Mr.value])n=kie(Bu().value);else if(e===gN||e===I_)Mr.octal&&vr(Mr,z5e),n=PA(Bu());else{if(e===gv)throw new Error(xk);e===Z5?(t=Bu(),t.value=t.value==="true",n=PA(t)):e===ej?(t=Bu(),t.value=null,n=PA(t)):pi("/")||pi("/=")?(n=PA(HJt()),W5e()):nj(Bu())}return n}function rZt(){const e=[];if(Aa("("),!pi(")"))for(;$e<Ca&&(e.push(Bb()),!pi(")"));)Aa(",");return Aa(")"),e}function iZt(){$e=Mr.start;const e=Bu();return qJt(e)||nj(e),kie(e.value)}function sZt(){return Aa("."),iZt()}function oZt(){Aa("[");const e=Rie();return Aa("]"),e}function aZt(){var e,t,n;for(e=nZt();;)if(pi("."))n=sZt(),e=Aye(".",e,n);else if(pi("("))t=rZt(),e=GJt(e,t);else if(pi("["))n=oZt(),e=Aye("[",e,n);else break;return e}function Rye(){const e=aZt();if(Mr.type===Du&&(pi("++")||pi("--")))throw new Error(xk);return e}function QO(){var e,t;if(Mr.type!==Du&&Mr.type!==gv)t=Rye();else{if(pi("++")||pi("--"))throw new Error(xk);if(pi("+")||pi("-")||pi("~")||pi("!"))e=Bu(),t=QO(),t=XJt(e.value,t);else{if(XU("delete")||XU("void")||XU("typeof"))throw new Error(xk);t=Rye()}}return t}function Nye(e){let t=0;if(e.type!==Du&&e.type!==gv)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function uZt(){var e,t,n,r,i,s,o,a,u,l;if(e=Mr,u=QO(),r=Mr,i=Nye(r),i===0)return u;for(r.prec=i,Bu(),t=[e,Mr],o=QO(),s=[u,r,o];(i=Nye(Mr))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=Cye(a,u,o),s.push(n);r=Bu(),r.prec=i,s.push(r),t.push(Mr),n=QO(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=Cye(s[l-1].value,s[l-2],n),l-=2;return n}function Bb(){var e,t,n;return e=uZt(),pi("?")&&(Bu(),t=Bb(),Aa(":"),n=Bb(),e=YJt(e,t,n)),e}function Rie(){const e=Bb();if(pi(","))throw new Error(xk);return e}function Nie(e){Rt=e,$e=0,Ca=Rt.length,Mr=null,W5e();const t=Rie();if(Mr.type!==mN)throw new Error("Unexpect token after expression.");return t}var G5e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Y5e(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Le("Missing arguments to clamp function."),o.length>3&&Le("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Le("Missing arguments to if function."),o.length>3&&Le("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function lZt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function K5e(e){e=e||{};const t=e.allowed?md(e.allowed):{},n=e.forbidden?md(e.forbidden):{},r=e.constants||G5e,i=(e.functions||Y5e)(f),s=e.globalvar,o=e.fieldvar,a=xn(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(gt(p))return p;const m=d[p.type];return m==null&&Le("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:zt(n,m)?Le("Illegal identifier: "+m):zt(r,m)?r[m]:zt(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[lZt(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Le("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=zt(i,m)&&i[m];return y||Le("Unrecognized function: "+m),xn(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const Dye=Symbol("vega_selection_getter");function X5e(e){return(!e.getter||!e.getter[Dye])&&(e.getter=Zc(e.field),e.getter[Dye]=!0),e.getter}const Die="intersect",Pye="union",cZt="vlMulti",fZt="vlPoint",Oye="or",dZt="and",Zd="_vgsid_",Tk=Zc(Zd),hZt="E",pZt="R",mZt="R-E",gZt="R-LE",yZt="R-RE",AL="index:unit";function $ye(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=X5e(a)(e),Z0(o)&&(o=wa(o)),Z0(r[s])&&(r[s]=wa(r[s])),je(r[s])&&Z0(r[s][0])&&(r[s]=r[s].map(wa)),a.type===hZt){if(je(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===pZt){if(!rE(o,r[s]))return!1}else if(a.type===yZt){if(!rE(o,r[s],!0,!1))return!1}else if(a.type===mZt){if(!rE(o,r[s],!1,!1))return!1}else if(a.type===gZt&&!rE(o,r[s],!1,!0))return!1;return!0}function vZt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[AL]&&r[AL].value:void 0,o=n===Die,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=$ye(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=$ye(t,l),o^h)return h;return a&&o}const Q5e=VS(Tk),bZt=Q5e.left,_Zt=Q5e.right;function wZt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[AL]&&r[AL].value:void 0,o=n===Die,a=Tk(t),u=bZt(i,a);if(u===i.length||Tk(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(_Zt(i,a)-u<s.size)return!1}return!0}function EZt(e,t){return e.map(n=>En(t.fields?{values:t.fields.map(r=>X5e(r)(n.datum))}:{[Zd]:Tk(n.datum)},t))}function xZt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,b=s.length,w=0,E,x;w<b;++w)if(l=s[w],d=l.unit,c=l.fields,f=l.values,c&&f){for(E=0,x=c.length;E<x;++E)h=c[E],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=QU[`${y}_union`],m[d]=v(g,mt(f[E]));n&&(g=a[d]||(a[d]=[]),g.push(mt(f).reduce((S,C,I)=>(S[c[I].field]=C,S),{})))}else h=Zd,p=Tk(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[Zd]:p}));if(t=t||Pye,o[Zd]?o[Zd]=QU[`${Zd}_${t}`](...Object.values(o[Zd])):Object.keys(o).forEach(S=>{o[S]=Object.keys(o[S]).map(C=>o[S][C]).reduce((C,I)=>C===void 0?I:QU[`${u[S]}_${t}`](C,I))}),s=Object.keys(a),n&&s.length){const S=r?fZt:cZt;o[S]=t===Pye?{[Oye]:s.reduce((C,I)=>(C.push(...a[I]),C),[])}:{[dZt]:s.map(C=>({[Oye]:a[C]}))}}return o}var QU={[`${Zd}_union`]:ayt,[`${Zd}_intersect`]:syt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=wa(t[0]),r=wa(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=wa(t[0]),r=wa(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const SZt=":",TZt="@";function Pie(e,t,n,r){t[0].type!==Fb&&Le("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&tr(t).value,o="unit",a=TZt+o,u=SZt+i;s===Die&&!zt(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),zt(r,u)||(r[u]=n.getData(i).tuplesRef())}function J5e(e){const t=this.context.data[e];return t?t.values.value:[]}function CZt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function AZt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(ef).insert(t)),1}function IZt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const vN=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},kZt=vN("format"),Z5e=vN("timeFormat"),RZt=vN("utcFormat"),NZt=vN("timeParse"),DZt=vN("utcParse"),EP=new Date(2e3,0,1);function rj(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(EP.setYear(2e3),EP.setMonth(e),EP.setDate(t),Z5e.call(this,EP,n))}function PZt(e){return rj.call(this,e,1,"%B")}function OZt(e){return rj.call(this,e,1,"%b")}function $Zt(e){return rj.call(this,0,2+e,"%A")}function MZt(e){return rj.call(this,0,2+e,"%a")}const LZt=":",FZt="@",$W="%",eje="$";function Oie(e,t,n,r){t[0].type!==Fb&&Le("First argument to data functions must be a string literal.");const i=t[0].value,s=LZt+i;if(!zt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function jZt(e,t,n,r){t[0].type!==Fb&&Le("First argument to indata must be a string literal."),t[1].type!==Fb&&Le("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=FZt+s;zt(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function iu(e,t,n,r){if(t[0].type===Fb)Mye(n,r,t[0].value);else for(e in n.scales)Mye(n,r,e)}function Mye(e,t,n){const r=$W+n;if(!zt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Ep(e,t){if(xn(e))return e;if(gt(e)){const n=t.scales[e];return n&&fWt(n.value)?n.value:void 0}}function BZt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=iu,n._range=iu,n._scale=iu;const r=i=>"_["+(i.type===Fb?rt($W+i.value):rt($W)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function $ie(e,t){return function(n,r,i){if(n){const s=Ep(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const UZt=$ie("area",_wt),zZt=$ie("bounds",Swt),VZt=$ie("centroid",Rwt);function HZt(e,t){const n=Ep(e,(t||this).context);return n&&n.scale()}function qZt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function Mie(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function WZt(){return Mie(this.context.dataflow,"warn",arguments)}function GZt(){return Mie(this.context.dataflow,"info",arguments)}function YZt(){return Mie(this.context.dataflow,"debug",arguments)}function JU(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function MW(e){const t=my(e),n=JU(t.r),r=JU(t.g),i=JU(t.b);return .2126*n+.7152*r+.0722*i}function KZt(e,t){const n=MW(e),r=MW(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function XZt(){const e=[].slice.call(arguments);return e.unshift({}),En(...e)}function tje(e,t){return e===t||e!==e&&t!==t?!0:je(e)?je(t)&&e.length===t.length?QZt(e,t):!1:yt(e)&&yt(t)?nje(e,t):!1}function QZt(e,t){for(let n=0,r=e.length;n<r;++n)if(!tje(e[n],t[n]))return!1;return!0}function nje(e,t){for(const n in e)if(!tje(e[n],t[n]))return!1;return!0}function Lye(e){return t=>nje(e,t)}function JZt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?ef:je(n)||A5(n)?n:Lye(n),c.remove(f)),t&&c.insert(t),r&&(f=Lye(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function ZZt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function een(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Fye={};function ten(e,t){const n=Fye[t]||(Fye[t]=Zc(t));return je(e)?e.map(n):n(e)}function Lie(e){return je(e)||ArrayBuffer.isView(e)?e:null}function Fie(e){return Lie(e)||(gt(e)?e:null)}function nen(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Lie(e).join(...n)}function ren(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Fie(e).indexOf(...n)}function ien(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Fie(e).lastIndexOf(...n)}function sen(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Fie(e).slice(...n)}function oen(e,t,n){return xn(n)&&Le("Function argument passed to replace."),String(e).replace(t,n)}function aen(e){return Lie(e).slice().reverse()}function uen(e,t,n){return ure(e||0,t||0,n||0)}function len(e,t){const n=Ep(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function cen(e,t){const n=Ep(e,(t||this).context);return n?n.copy():void 0}function fen(e,t){const n=Ep(e,(t||this).context);return n?n.domain():[]}function den(e,t,n){const r=Ep(e,(n||this).context);return r?je(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function hen(e,t){const n=Ep(e,(t||this).context);return n&&n.range?n.range():[]}function pen(e,t,n){const r=Ep(e,(n||this).context);return r?r(t):void 0}function men(e,t,n,r,i){e=Ep(e,(i||this).context);const s=WFe(t,n);let o=e.domain(),a=o[0],u=tr(o),l=Na;return u-a?l=OFe(e,a,u):e=(e.interpolator?_r("sequential")().interpolator(e.interpolator()):_r("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==tr(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function gen(e,t,n){const r=Ep(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function yen(e){let t=null;return function(n){return n?bk(n,t=t||Qx(e)):e}}const rje=e=>e.data;function ije(e,t){const n=J5e.call(t,e);return n.root&&n.root.lookup||{}}function ven(e,t,n){const r=ije(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(rje):void 0}function ben(e,t){const n=ije(e,this)[t];return n?n.ancestors().map(rje):void 0}const sje=()=>typeof window<"u"&&window||null;function _en(){const e=sje();return e?e.screen:{}}function wen(){const e=sje();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Een(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function oje(e,t,n){if(!e)return[];const[r,i]=e,s=new Ns().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return V4e(o,s,xen(t))}function xen(e){let t=null;if(e){const n=mt(e.marktype),r=mt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function Sen(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=mt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function Ten(e){return mt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function Cen(e,t,n){const{x:r,y:i,mark:s}=n,o=new Ns().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),oje([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>Aen(u.x,u.y,t))}function Aen(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const Ck={random(){return nf()},cumulativeNormal:D5,cumulativeLogNormal:Ine,cumulativeUniform:Dne,densityNormal:xne,densityLogNormal:Ane,densityUniform:Nne,quantileNormal:P5,quantileLogNormal:kne,quantileUniform:Pne,sampleNormal:N5,sampleLogNormal:Cne,sampleUniform:Rne,isArray:je,isBoolean:mv,isDate:Z0,isDefined(e){return e!==void 0},isNumber:hr,isObject:yt,isRegExp:HLe,isString:gt,isTuple:A5,isValid(e){return e!=null&&e===e},toBoolean:ane,toDate(e){return une(e)},toNumber:wa,toString:lne,indexof:ren,join:nen,lastindexof:ien,replace:oen,reverse:aen,slice:sen,flush:zLe,lerp:qLe,merge:XZt,pad:YLe,peek:tr,pluck:ten,span:JR,inrange:rE,truncate:KLe,rgb:my,lab:mM,hcl:gM,hsl:hM,luminance:MW,contrast:KZt,sequence:Vu,format:kZt,utcFormat:RZt,utcParse:DZt,utcOffset:l6e,utcSequence:d6e,timeFormat:Z5e,timeParse:NZt,timeOffset:u6e,timeSequence:f6e,timeUnitSpecifier:QLe,monthFormat:PZt,monthAbbrevFormat:OZt,dayFormat:$Zt,dayAbbrevFormat:MZt,quarter:FLe,utcquarter:jLe,week:ZLe,utcweek:n6e,dayofyear:JLe,utcdayofyear:t6e,warn:WZt,info:GZt,debug:YZt,extent(e){return Jh(e)},inScope:qZt,intersect:oje,clampRange:BLe,pinchDistance:ZZt,pinchAngle:een,screen:_en,containerSize:Een,windowSize:wen,bandspace:uen,setdata:AZt,pathShape:yen,panLinear:OLe,panLog:$Le,panPow:MLe,panSymlog:LLe,zoomLinear:tne,zoomLog:nne,zoomPow:oL,zoomSymlog:rne,encode:IZt,modify:JZt,lassoAppend:Sen,lassoPath:Ten,intersectLasso:Cen},Ien=["view","item","group","xy","x","y"],ken="event.vega.",aje="this.",jie={},uje={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${rt(eje+e)}]`,functions:Ren,constants:G5e,visitors:jie},LW=K5e(uje);function Ren(e){const t=Y5e(e);Ien.forEach(n=>t[n]=ken+n);for(const n in Ck)t[n]=aje+n;return En(t,BZt(e,Ck,jie)),t}function bs(e,t,n){return arguments.length===1?Ck[e]:(Ck[e]=t,n&&(jie[e]=n),LW&&(LW.functions[e]=aje+e),this)}bs("bandwidth",len,iu);bs("copy",cen,iu);bs("domain",fen,iu);bs("range",hen,iu);bs("invert",den,iu);bs("scale",pen,iu);bs("gradient",men,iu);bs("geoArea",UZt,iu);bs("geoBounds",zZt,iu);bs("geoCentroid",VZt,iu);bs("geoShape",gen,iu);bs("geoScale",HZt,iu);bs("indata",CZt,jZt);bs("data",J5e,Oie);bs("treePath",ven,Oie);bs("treeAncestors",ben,Oie);bs("vlSelectionTest",vZt,Pie);bs("vlSelectionIdTest",wZt,Pie);bs("vlSelectionResolve",xZt,Pie);bs("vlSelectionTuples",EZt);function ep(e,t){const n={};let r;try{e=gt(e)?e:rt(e)+"",r=Nie(e)}catch{Le("Expression parse error: "+e)}r.visit(s=>{if(s.type!==B5e)return;const o=s.callee.name,a=uje.visitors[o];a&&a(o,s.arguments,t,n)});const i=LW(r);return i.globals.forEach(s=>{const o=eje+s;!zt(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:En({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function Nen(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const Den=md(["rule"]),jye=md(["group","image","rect"]);function Pen(e,t){let n="";return Den[t]||(e.x2&&(e.x?(jye[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(jye[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function Bie(e){return(e+"").toLowerCase()}function Oen(e){return Bie(e)==="operator"}function $en(e){return Bie(e)==="collect"}function OC(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function Men(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var Len={operator:(e,t)=>OC(e,["_"],t.code),parameter:(e,t)=>OC(e,["datum","_"],t.code),event:(e,t)=>OC(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return OC(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+rt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=Pen(r,n),i+="return m;",OC(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(rt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),Men(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function Fen(e){const t=this;Oen(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function jen(e){const t=this;if(e.params){const n=t.get(e.id);n||Le("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function Ben(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=je(i)?i.map(s=>Bye(s,n,t)):Bye(i,n,t)}return t}function Bye(e,t,n){if(!e||!yt(e))return e;for(let r=0,i=Uye.length,s;r<i;++r)if(s=Uye[r],zt(e,s.key))return s.parse(e,t,n);return e}var Uye=[{key:"$ref",parse:Uen},{key:"$key",parse:Ven},{key:"$expr",parse:zen},{key:"$field",parse:Hen},{key:"$encode",parse:Wen},{key:"$compare",parse:qen},{key:"$context",parse:Gen},{key:"$subflow",parse:Yen},{key:"$tupleid",parse:Ken}];function Uen(e,t){return t.get(e.$ref)||Le("Operator not defined: "+e.$ref)}function zen(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=yl(t.parameterExpression(e.$expr),e.$fields))}function Ven(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=one(e.$key,e.$flat,t.expr.codegen))}function Hen(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Zc(e.$field,e.$name,t.expr.codegen))}function qen(e,t){const n="c:"+e.$compare+"_"+e.$order,r=mt(e.$compare).map(i=>i&&i.$tupleid?Bt:i);return t.fn[n]||(t.fn[n]=ine(r,e.$order,t.expr.codegen))}function Wen(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=yl(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function Gen(e,t){return t}function Yen(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function Ken(){return Bt}function Xen(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Le("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function Qen(e){var t=this,n=yt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Le("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const Jen={skip:!0};function Zen(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function etn(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],Jen)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(ef).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function lje(e,t,n,r){return new cje(e,t,n,r)}function cje(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||Len,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function zye(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}cje.prototype=zye.prototype={fork(){const e=new zye(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),$en(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[Bie(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Nen,parseOperator:Fen,parseOperatorParameters:jen,parseParameters:Ben,parseStream:Xen,parseUpdate:Qen,getState:Zen,setState:etn};function ttn(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),fje(t,e.description()))}function fje(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function ntn(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const ZU="default";function rtn(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:ZU,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?gt(i)?i:i.user:ZU,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return gt(r)||(i=r.item,r=r.user),FW(e,r&&r!==ZU?r:i||r),i},{cursor:t})}function FW(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function IL(e,t){var n=e._runtime.data;return zt(n,t)||Le("Unrecognized data set: "+t),n[t]}function itn(e,t){return arguments.length<2?IL(this,e).values.value:ij.call(this,e,C_().remove(ef).insert(t))}function ij(e,t){D6e(t)||Le("Second argument to changes must be a changeset.");const n=IL(this,e);return n.modified=!0,this.pulse(n.input,t)}function stn(e,t){return ij.call(this,e,C_().insert(t))}function otn(e,t){return ij.call(this,e,C_().remove(t))}function dje(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function hje(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function sj(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function atn(e){var t=sj(e),n=dje(e),r=hje(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function utn(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=sj(e),o=t.changedTouches?t.changedTouches[0]:t,s=X5(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=ltn(e,n,s),t}function ltn(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;gt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Da(e),item:Da(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const Vye="view",ctn="timer",ftn="window",dtn={trap:!1};function htn(e){const t=En({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{je(r[s])&&(r[s]=md(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function pje(e,t,n,r){e._eventListeners.push({type:n,sources:mt(t),handler:r})}function ptn(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function xP(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||yt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function mtn(e,t,n){var r=this,i=new R5(n),s=function(l,c){r.runAsync(null,()=>{e===Vye&&ptn(r,t)&&l.preventDefault(),i.receive(utn(r,l,c))})},o;if(e===ctn)xP(r,"timer",t)&&r.timer(s,t);else if(e===Vye)xP(r,"view",t)&&r.addEventListener(t,s,dtn);else if(e===ftn?xP(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&xP(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);pje(r,o,t,s)}return i}function Hye(e){return e.item}function qye(e){return e.item.mark.source}function Wye(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function gtn(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Hye),qye,Wye(e)),this.on(this.events("view","pointerout",Hye),qye,Wye(t)),this}function ytn(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function Wl(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const vtn="vega-bind",btn="vega-bind-name",_tn="vega-bind-radio";function wtn(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=sne(r.debounce,i.update))),(r.input==null&&r.element?Etn:Stn)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function Etn(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),pje(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(xtn(i))}}function xtn(e){return typeof Event<"u"?new Event(e):{type:e}}function Stn(e,t,n,r){const i=r.signal(n.signal),s=Wl("div",{class:vtn}),o=n.input==="radio"?s:s.appendChild(Wl("label"));o.appendChild(Wl("span",{class:btn},n.name||n.signal)),t.appendChild(s);let a=Ttn;switch(n.input){case"checkbox":a=Ctn;break;case"select":a=Atn;break;case"radio":a=Itn;break;case"range":a=ktn;break}a(e,o,n,i)}function Ttn(e,t,n,r){const i=Wl("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function Ctn(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Wl("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function Atn(e,t,n,r){const i=Wl("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};kL(o,r)&&(u.selected=!0),i.appendChild(Wl("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(kL(n.options[a],o)){i.selectedIndex=a;return}}}function Itn(e,t,n,r){const i=Wl("span",{class:_tn}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};kL(o,r)&&(u.checked=!0);const l=Wl("input",u);l.addEventListener("change",()=>e.update(o));const c=Wl("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)kL(a[l].value,o)&&(a[l].checked=!0)}}function ktn(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||py(s,i,100),a=Wl("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=Wl("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function kL(e,t){return e===t||e+""==t+""}function mje(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,dje(e),hje(e),sj(e),i,s).background(e.background())}function Uie(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function Rtn(e,t,n,r){const i=new r(e.loader(),Uie(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,sj(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function Ntn(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=Q5(r);e=n._el=e?e7(n,e,!0):null,ttn(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||pN,a=e?s.renderer:s.headless;return n._renderer=a?mje(n,n._renderer,e,a):null,n._handler=Rtn(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=e7(n,t,!0):e.appendChild(Wl("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=e7(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{wtn(n,u.element||t,u)})),n}function e7(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const $C=e=>+e||0,Dtn=e=>({top:e,bottom:e,left:e,right:e});function Gye(e){return yt(e)?{top:$C(e.top),bottom:$C(e.bottom),left:$C(e.left),right:$C(e.right)}:Dtn($C(e))}async function zie(e,t,n,r){const i=Q5(t),s=i&&i.headless;return s||Le("Unrecognized renderer type: "+t),await e.runAsync(),mje(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function Ptn(e,t){e!==S0.Canvas&&e!==S0.SVG&&e!==S0.PNG&&Le("Unrecognized image type: "+e);const n=await zie(this,e,t);return e===S0.SVG?Otn(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Otn(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function $tn(e,t){return(await zie(this,S0.Canvas,e,t)).canvas()}async function Mtn(e){return(await zie(this,S0.SVG,e)).svg()}function Ltn(e,t,n){return lje(e,Gx,Ck,n).parse(t)}function Ftn(e){var t=this._runtime.scales;return zt(t,e)||Le("Unrecognized scale or projection: "+e),t[e].value}var gje="width",yje="height",Vie="padding",Yye={skip:!0};function vje(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Vie?r.left+r.right:0)}function bje(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Vie?r.top+r.bottom:0)}function jtn(e){var t=e._signals,n=t[gje],r=t[yje],i=t[Vie];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=vje(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=bje(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function Btn(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(gje,n,Yye),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(yje,r,Yye),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function Utn(e){return this._runtime.getState(e||{data:ztn,signals:Vtn,recurse:!0})}function ztn(e,t){return t.modified&&je(t.input.value)&&!e.startsWith("_:vega:_")}function Vtn(e,t){return!(e==="parent"||t instanceof Gx.proxy)}function Htn(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function qtn(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(P1t(n,t))}function Wtn(e,t,n,r){const i=e.element();i&&i.setAttribute("title",Gtn(r))}function Gtn(e){return e==null?"":je(e)?_je(e):yt(e)&&!Z0(e)?Ytn(e):e+""}function Ytn(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(je(n)?_je(n):wje(n))}).join(`
`)}function _je(e){return"["+e.map(wje).join(", ")+"]"}function wje(e){return je(e)?"[]":yt(e)&&!Z0(e)?"{}":e}function Ktn(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function Eje(e,t){const n=this;if(t=t||{},jE.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=En({},e.locale,t.locale);n.locale(E6e(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||S0.Canvas,n._scenegraph=new g4e;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Wtn,n._redraw=!0,n._handler=new pN().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=htn(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=Ltn(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:En({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=vje(n,n._width),n._viewHeight=bje(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,jtn(n),ntn(n),rtn(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function SP(e,t){return zt(e._signals,t)?e._signals[t]:Le("Unrecognized signal name: "+rt(t))}function xje(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Kye(e,t,n,r){let i=xje(n,r);return i||(i=Uie(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function Xye(e,t,n){const r=xje(t,n);return r&&t._targets.remove(r),e}lt(Eje,jE,{async evaluate(e,t,n){if(await jE.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,atn(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&FO(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&fje(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=SP(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Gye(e)):Gye(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(Q5(e)||Le("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(jE.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(SP(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Btn,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=Uie(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Kye(this,e,SP(this,e),t)},removeSignalListener(e,t){return Xye(this,SP(this,e),t)},addDataListener(e,t){return Kye(this,e,IL(this,e).values,t)},removeDataListener(e,t){return Xye(this,IL(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=FW(this,null);this._globalCursor=!!e,t&&FW(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:qtn,events:mtn,finalize:ytn,hover:gtn,data:itn,change:ij,insert:stn,remove:otn,scale:Ftn,initialize:Ntn,toImageURL:Ptn,toCanvas:$tn,toSVG:Mtn,getState:Utn,setState:Htn,_watchPixelRatio:Ktn});const Xtn="view",RL="[",NL="]",Sje="{",Tje="}",Qtn=":",Cje=",",Jtn="@",Ztn=">",enn=/[[\]{}]/,tnn={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let Aje,Ije;function yv(e,t,n){return Aje=t||Xtn,Ije=n||tnn,kje(e.trim()).map(jW)}function nnn(e){return Ije[e]}function $2(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function kje(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=$2(e,i,Cje,RL+Sje,NL+Tje),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function jW(e){return e[0]==="["?rnn(e):inn(e)}function rnn(e){const t=e.length;let n=1,r;if(n=$2(e,n,NL,RL,NL),n===t)throw"Empty between selector: "+e;if(r=kje(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==Ztn)throw"Expected '>' after between selector: "+e;r=r.map(jW);const i=jW(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function inn(e){const t={source:Aje},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===Tje){if(a=e.lastIndexOf(Sje),a>=0){try{r=snn(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===Jtn&&(i=++a),u=$2(e,a,Qtn),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=$2(e,a,RL),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=$2(e,a,NL),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==RL)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||enn.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):nnn(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function snn(e){const t=e.split(Cje);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function onn(e){return yt(e)?e:{type:e||"pad"}}const MC=e=>+e||0,ann=e=>({top:e,bottom:e,left:e,right:e});function unn(e){return yt(e)?e.signal?e:{top:MC(e.top),bottom:MC(e.bottom),left:MC(e.left),right:MC(e.right)}:ann(MC(e))}const fo=e=>yt(e)&&!je(e)?En({},e):{value:e};function Qye(e,t,n,r){return n!=null?(yt(n)&&!je(n)||je(n)&&n.length&&yt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Ko(e,t,n){for(const r in t)Qye(e,r,t[r]);for(const r in n)Qye(e,r,n[r],"update")}function IT(e,t,n){for(const r in t)n&&zt(n,r)||(e[r]=En(e[r]||{},t[r]));return e}function Pw(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const Hie="mark",qie="frame",Wie="scope",lnn="axis",cnn="axis-domain",fnn="axis-grid",dnn="axis-label",hnn="axis-tick",pnn="axis-title",mnn="legend",gnn="legend-band",ynn="legend-entry",vnn="legend-gradient",Rje="legend-label",bnn="legend-symbol",_nn="legend-title",wnn="title",Enn="title-text",xnn="title-subtitle";function Snn(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!Pw(u,e)&&t7(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===qie?i.group:n===Hie?En({},i.mark,i[t]):null;for(u in c)l=Pw(u,e)||(u==="fill"||u==="stroke")&&(Pw("fill",e)||Pw("stroke",e)),l||t7(s,u,c[u]);mt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)Pw(h,e)||t7(s,h,d[h])}),e=En({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=En(o,e.enter),a&&(e.update=En(a,e.update)),e}function t7(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const Nje=e=>gt(e)?rt(e):e.signal?`(${e.signal})`:Dje(e);function oj(e){if(e.gradient!=null)return Cnn(e);let t=e.signal?`(${e.signal})`:e.color?Tnn(e.color):e.field!=null?Dje(e.field):e.value!==void 0?rt(e.value):void 0;return e.scale!=null&&(t=Ann(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${JO(e.exponent)})`),e.mult!=null&&(t+=`*${JO(e.mult)}`),e.offset!=null&&(t+=`+${JO(e.offset)}`),e.round&&(t=`round(${t})`),t}const TP=(e,t,n,r)=>`(${e}(${[t,n,r].map(oj).join(",")})+'')`;function Tnn(e){return e.c?TP("hcl",e.h,e.c,e.l):e.h||e.s?TP("hsl",e.h,e.s,e.l):e.l||e.a?TP("lab",e.l,e.a,e.b):e.r||e.g||e.b?TP("rgb",e.r,e.g,e.b):null}function Cnn(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:rt(n));for(;t.length&&tr(t)==null;)t.pop();return t.unshift(Nje(e.gradient)),`gradient(${t.join(",")})`}function JO(e){return yt(e)?"("+oj(e)+")":e}function Dje(e){return Pje(yt(e)?e:{datum:e})}function Pje(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Le("Invalid field reference: "+rt(e));return e.signal||(r=gt(r)?bp(r).map(rt).join("]["):Pje(r)),t+"["+r+"]"}function Ann(e,t){const n=Nje(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+JO(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function Inn(e){let t="";return e.forEach(n=>{const r=oj(n);t+=n.test?`(${n.test})?${r}:`:r}),tr(t)===":"&&(t+="null"),t}function Oje(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=Snn(e,t,n,r,i.config);for(const a in e)o[a]=knn(e[a],t,s,i);return s}function knn(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=Nnn(Rnn(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function Rnn(e){return je(e)?Inn(e):oj(e)}function Nnn(e,t,n,r){const i=ep(e,t);return i.$fields.forEach(s=>r[s]=1),En(n,i.$params),i.$expr}const Dnn="outer",Pnn=["value","update","init","react","bind"];function Jye(e,t){Le(e+' for "outer" push: '+rt(t))}function $je(e,t){const n=e.name;if(e.push===Dnn)t.signals[n]||Jye("No prior signal definition",n),Pnn.forEach(r=>{e[r]!==void 0&&Jye("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function BW(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function aj(e,t,n,r){return new BW(e,t,n,r)}function DL(e,t){return aj("operator",e,t)}function jt(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Ak(e,t){return t?{$field:e,$name:t}:{$field:e}}const UW=Ak("key");function Zye(e,t){return{$compare:e,$order:t}}function Onn(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const $nn="ascending",Mnn="descending";function Lnn(e){return yt(e)?(e.order===Mnn?"-":"+")+uj(e.op,e.field):""}function uj(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const Gie="scope",zW="view";function qs(e){return e&&e.signal}function Fnn(e){return e&&e.expr}function ZO(e){if(qs(e))return!0;if(yt(e)){for(const t in e)if(ZO(e[t]))return!0}return!1}function Of(e,t){return e??t}function tb(e){return e&&e.signal||e}const eve="timer";function Ik(e,t){return(e.merge?Bnn:e.stream?Unn:e.type?znn:Le("Invalid stream specification: "+rt(e)))(e,t)}function jnn(e){return e===Gie?zW:e||zW}function Bnn(e,t){const n=e.merge.map(i=>Ik(i,t)),r=Yie({merge:n},e,t);return t.addStream(r).id}function Unn(e,t){const n=Ik(e.stream,t),r=Yie({stream:n},e,t);return t.addStream(r).id}function znn(e,t){let n;e.type===eve?(n=t.event(eve,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(jnn(e.source),e.type);const r=Yie({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function Yie(e,t,n){let r=t.between;return r&&(r.length!==2&&Le('Stream "between" parameter must have 2 entries: '+rt(t)),e.between=[Ik(r[0],n),Ik(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(Vnn(t.marktype,t.markname,t.markrole)),t.source===Gie&&r.push("inScope(event.item)"),r.length&&(e.filter=ep("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function Vnn(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const Hnn={code:"_.$value",ast:{type:"Identifier",value:"value"}};function qnn(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Le("Signal update missing events specification."),gt(s)&&(s=yv(s,t.isSubscope()?Gie:zW)),s=mt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[Gnn(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Le("Signal encode and update are mutually exclusive."),o="encode(item(),"+rt(r)+")"),i.update=gt(o)?ep(o,t):o.expr!=null?ep(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:Hnn,$params:{$value:t.signalRef(o.signal)}}:Le("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(En(Wnn(u,t),i)))}function Wnn(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):Ik(e,t)}}function Gnn(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Ynn(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Le("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=ep(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>qnn(i,t,n.id))}const Yr=e=>(t,n,r)=>aj(e,n,t||void 0,r),Mje=Yr("aggregate"),Knn=Yr("axisticks"),Lje=Yr("bound"),Cd=Yr("collect"),tve=Yr("compare"),Xnn=Yr("datajoin"),Fje=Yr("encode"),Qnn=Yr("expression"),Jnn=Yr("facet"),Znn=Yr("field"),ern=Yr("key"),trn=Yr("legendentries"),nrn=Yr("load"),rrn=Yr("mark"),irn=Yr("multiextent"),srn=Yr("multivalues"),orn=Yr("overlap"),arn=Yr("params"),jje=Yr("prefacet"),urn=Yr("projection"),lrn=Yr("proxy"),crn=Yr("relay"),Bje=Yr("render"),frn=Yr("scale"),k_=Yr("sieve"),drn=Yr("sortitems"),Uje=Yr("viewlayout"),hrn=Yr("values");let prn=0;const zje={min:"min",max:"max",count:"sum"};function mrn(e,t){const n=e.type||"linear";IFe(n)||Le("Unrecognized scale type: "+rt(n)),t.addScale(e.name,{type:n,domain:void 0})}function grn(e,t){const n=t.getScale(e.name).params;let r;n.domain=Vje(e.domain,e,t),e.range!=null&&(n.range=qje(e,t,n)),e.interpolate!=null&&Crn(e.interpolate,n),e.nice!=null&&(n.nice=Trn(e.nice,t)),e.bins!=null&&(n.bins=Srn(e.bins,t));for(r in e)zt(n,r)||r==="name"||(n[r]=Bc(e[r],t))}function Bc(e,t){return yt(e)?e.signal?t.signalRef(e.signal):Le("Unsupported object: "+rt(e)):e}function e$(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Bc(n,t))}function lj(e){Le("Can not find data set: "+rt(e))}function Vje(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Le("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(je(e)?yrn:e.fields?brn:vrn)(e,t,n)}function yrn(e,t,n){return e.map(r=>Bc(r,n))}function vrn(e,t,n){const r=n.getData(e.data);return r||lj(e.data),Xx(t.type)?r.valuesRef(n,e.field,Hje(e.sort,!1)):NFe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function brn(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=gt(o)?{data:r,field:o}:je(o)||o.signal?_rn(o,n):o,s.push(o),s),[]);return(Xx(t.type)?wrn:NFe(t.type)?Ern:xrn)(e,n,i)}function _rn(e,t){const n="_:vega:_"+prn++,r=Cd({});if(je(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+rt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,k_({})]),{data:n,field:"data"}}function wrn(e,t,n){const r=Hje(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||lj(l.data),c.countsRef(t,l.field,r)}),a={groupby:UW,pulse:o};r&&(i=r.op||"count",s=r.field?uj(i,r.field):"count",a.ops=[zje[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(Mje(a));const u=t.add(Cd({pulse:jt(i)}));return s=t.add(hrn({field:UW,sort:t.sortRef(r),pulse:jt(u)})),jt(s)}function Hje(e,t){return e&&(!e.field&&!e.op?yt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Le("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!zje[e.op]&&Le("Multiple domain scales can not be sorted using "+e.op)),e}function Ern(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||lj(i.data),s.domainRef(t,i.field)});return jt(t.add(srn({values:r})))}function xrn(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||lj(i.data),s.extentRef(t,i.field)});return jt(t.add(irn({extents:r})))}function Srn(e,t){return e.signal||je(e)?e$(e,t):t.objectProperty(e)}function Trn(e,t){return e.signal?t.signalRef(e.signal):yt(e)?{interval:Bc(e.interval),step:Bc(e.step)}:Bc(e)}function Crn(e,t){t.interpolate=Bc(e.type||e),e.gamma!=null&&(t.interpolateGamma=Bc(e.gamma))}function qje(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(gt(i)){if(r&&zt(r,i))return e=En({},e,{range:r[i]}),qje(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=Xx(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Le("Unrecognized scale range value: "+rt(i))}else if(i.scheme){n.scheme=je(i.scheme)?e$(i.scheme,t):Bc(i.scheme,t),i.extent&&(n.schemeExtent=e$(i.extent,t)),i.count&&(n.schemeCount=Bc(i.count,t));return}else if(i.step){n.rangeStep=Bc(i.step,t);return}else{if(Xx(e.type)&&!je(i))return Vje(i,e,t);je(i)||Le("Unsupported range type: "+rt(i))}return i.map(s=>(je(s)?e$:Bc)(s,t))}function Arn(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=VW(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=VW(n[i],i,t));t.addProjection(e.name,r)}function VW(e,t,n){return je(e)?e.map(r=>VW(r,t,n)):yt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Le("Unsupported parameter object: "+rt(e)):e}const Ad="top",kT="left",RT="right",jy="bottom",Wje="center",Irn="vertical",krn="start",Rrn="middle",Nrn="end",HW="index",Kie="label",Drn="offset",tS="perc",Prn="perc2",Hc="value",bN="guide-label",Xie="guide-title",Orn="group-title",$rn="group-subtitle",nve="symbol",t$="gradient",qW="discrete",WW="size",Mrn="shape",Lrn="fill",Frn="stroke",jrn="strokeWidth",Brn="strokeDash",Urn="opacity",Qie=[WW,Mrn,Lrn,Frn,jrn,Brn,Urn],_N={name:1,style:1,interactive:1},sr={value:0},qc={value:1},cj="group",Gje="rect",Jie="rule",zrn="symbol",R_="text";function kk(e){return e.type=cj,e.interactive=e.interactive||!1,e}function vl(e,t){const n=(r,i)=>Of(e[r],Of(t[r],i));return n.isVertical=r=>Irn===Of(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Of(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Of(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Of(e.columns,Of(t.columns,+n.isVertical(!0))),n}function Yje(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function Vrn(e,t,n){const r=t.config.style[n];return r&&r[e]}function fj(e,t,n){return`item.anchor === '${krn}' ? ${e} : item.anchor === '${Nrn}' ? ${t} : ${n}`}const Zie=fj(rt(kT),rt(RT),rt(Wje));function Hrn(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},yt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function Kje(e,t){return t?e?yt(e)?Object.assign({},e,{offset:Kje(e.offset,t)}):{value:e,offset:t}:t:e}function oc(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=IT(e.encode,t,_N)):e.interactive=!1,e}function qrn(e,t,n,r){const i=vl(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:sr,x:sr,y:sr,width:fo(f),height:fo(d)},update:En({},u,{opacity:qc,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:sr}};return Ko(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),oc({type:Gje,role:vnn,encode:h},r)}function Wrn(e,t,n,r,i){const s=vl(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:sr,fill:{scale:t,field:Hc}};p[l]={signal:h+"datum."+tS,mult:u},p[c]=sr,p[f]={signal:h+"datum."+Prn,mult:u},p[d]=fo(a);const m={enter:p,update:En({},p,{opacity:qc}),exit:{opacity:sr}};return Ko(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),oc({type:Gje,role:gnn,key:Hc,from:i,encode:m},r)}const Grn=`datum.${tS}<=0?"${kT}":datum.${tS}>=1?"${RT}":"${Wje}"`,Yrn=`datum.${tS}<=0?"${jy}":datum.${tS}>=1?"${Ad}":"${Rrn}"`;function rve(e,t,n,r){const i=vl(e,t),s=i.isVertical(),o=fo(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:sr},update:c={opacity:qc,text:{field:Kie}},exit:{opacity:sr}};return Ko(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Of(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:Yrn},f="y",d="x",h="1-"):(l.align=c.align={signal:Grn},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+tS,mult:a},l[d]=c[d]=o,o.offset=Of(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+HW}:void 0,oc({type:R_,role:Rje,style:bN,key:Hc,from:r,encode:p,overlap:u},n)}function Krn(e,t,n,r,i){const s=vl(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${Drn} : datum.${WW}`,h=l?fo(l):{field:WW},p=`datum.${HW}`,m=`max(1, ${i})`;let g,y,v,b,w;h.mult=.5,g={enter:y={opacity:sr,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:qc,x:y.x,y:y.y},exit:{opacity:sr}};let E=null,x=null;e.fill||(E=t.symbolBaseFillColor,x=t.symbolBaseStrokeColor),Ko(g,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",x),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),Qie.forEach(k=>{e[k]&&(v[k]=y[k]={scale:e[k],field:Hc})});const S=oc({type:zrn,role:bnn,key:Hc,from:f,clip:l?!0:void 0,encode:g},n.symbols),C=fo(c);C.offset=s("labelOffset"),g={enter:y={opacity:sr,x:{signal:d,offset:C},y:h},update:v={opacity:qc,text:{field:Kie},x:y.x,y:y.y},exit:{opacity:sr}},Ko(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const I=oc({type:R_,role:Rje,style:bN,key:Hc,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:sr,height:l?fo(l):sr,opacity:sr},exit:{opacity:sr},update:v={opacity:qc,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(b=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,w={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,w={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:HW}},kk({role:Wie,from:r,encode:IT(g,o,_N),marks:[S,I],name:u,interactive:a,sort:w})}function Xrn(e,t){const n=vl(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const ese='item.orient === "left"',tse='item.orient === "right"',dj=`(${ese} || ${tse})`,Qrn=`datum.vgrad && ${dj}`,Jrn=fj('"top"','"bottom"','"middle"'),Zrn=fj('"right"','"left"','"center"'),ein=`datum.vgrad && ${tse} ? (${Zrn}) : (${dj} && !(datum.vgrad && ${ese})) ? "left" : ${Zie}`,tin=`item._anchor || (${dj} ? "middle" : "start")`,nin=`${Qrn} ? (${ese} ? -90 : 90) : 0`,rin=`${dj} ? (datum.vgrad ? (${tse} ? "bottom" : "top") : ${Jrn}) : "top"`;function iin(e,t,n,r){const i=vl(e,t),s={enter:{opacity:sr},update:{opacity:qc,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:sr}};return Ko(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:tin},angle:{signal:nin},align:{signal:ein},baseline:{signal:rin},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),oc({type:R_,role:_nn,style:Xie,from:r,encode:s},n)}function sin(e,t){let n;return yt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+ive(e.path)+")":e.sphere&&(n="geoShape("+ive(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function ive(e){return yt(e)&&e.signal?e.signal:rt(e)}function Xje(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===cj?Wie:t||Hie}function oin(e){return{marktype:e.type,name:e.name||void 0,role:e.role||Xje(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function ain(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function nse(e,t){const n=$6e(e.type);n||Le("Unrecognized transform type: "+rt(e.type));const r=aj(n.type.toLowerCase(),null,Qje(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function Qje(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=uin(o,t,n)}return r}function uin(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return lin(e,t,n);if(i===void 0){e.required&&Le("Missing required "+rt(t.type)+" parameter: "+rt(e.name));return}else{if(r==="param")return cin(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!qs(i)?i.map(s=>sve(e,s,n)):sve(e,i,n)}function sve(e,t,n){const r=e.type;if(qs(t))return ave(r)?Le("Expression references can not be signals."):n7(r)?n.fieldRef(t):uve(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||n7(r);return i&&fin(t)?n.exprRef(t.expr,t.as):i&&din(t)?Ak(t.field,t.as):ave(r)?ep(t,n):hin(r)?jt(n.getData(t).values):n7(r)?Ak(t):uve(r)?n.compareRef(t):t}}function lin(e,t,n){return gt(t.from)||Le('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function cin(e,t,n){const r=t[e.name];return e.array?(je(r)||Le("Expected an array of sub-parameters. Instead: "+rt(r)),r.map(i=>ove(e,i,n))):ove(e,r,n)}function ove(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Le("Unsupported parameter: "+rt(t));const s=En(Qje(i,t,n),i.key);return jt(n.add(arn(s)))}const fin=e=>e&&e.expr,din=e=>e&&e.field,hin=e=>e==="data",ave=e=>e==="expr",n7=e=>e==="field",uve=e=>e==="compare";function pin(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Le("Only group marks can be faceted."),r.field!=null?o=a=n$(r,n):(e.data?a=jt(n.getData(e.data).aggregate):(s=nse(En({type:"aggregate",groupby:mt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=n$(r,n),o=a=jt(n.add(s))),i=n.keyRef(r.groupby,!0))):o=jt(n.add(Cd(null,[{}]))),o||(o=n$(e,n)),{key:i,pulse:o,parent:a}}function n$(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:jt(t.getData(e.data).output)}function Ub(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}Ub.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=jt(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new Ub(e,s,i,r,o)};function Jje(e){return gt(e)?e:null}function lve(e,t,n){const r=uj(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function LC(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=Lnn(s);let l=Jje(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:UW,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:jt(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(aj(r,void 0,d)),o&&(t.index[i]=f),c=jt(f),l!=null&&(a[l]=c)}return c}Ub.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=Jje(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&lve(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:jt(r.output)},n&&n.field&&lve(e,u,n),a=e.add(Mje(u)),o=e.add(Cd({pulse:jt(a)})),o={agg:a,ref:jt(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return jt(this.values)},extentRef(e,t){return LC(e,this,"extent","extent",t,!1)},domainRef(e,t){return LC(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return LC(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return LC(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return LC(e,this,"indata","tupleindex",t,!0,!0)}};function min(e,t,n){const r=e.from.facet,i=r.name,s=n$(r,t);let o;r.name||Le("Facet must have a name: "+rt(r)),r.data||Le("Facet must reference a data set: "+rt(r)),r.field?o=t.add(jje({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(Jnn({key:t.keyRef(r.groupby),group:jt(t.proxy(n.parent)),pulse:s})):Le("Facet must specify groupby or field: "+rt(r));const a=t.fork(),u=a.add(Cd()),l=a.add(k_({pulse:jt(u)}));a.addData(i,new Ub(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function gin(e,t,n){const r=t.add(jje({pulse:n.pulse})),i=t.fork();i.add(k_()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function Zje(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(DL()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=ep(l,t);u.update=c.$expr,u.params=c.$params}function hj(e,t){const n=Xje(e),r=e.type===cj,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===Wie||n===qie,a,u,l,c,f,d,h;const p=n===Hie||o||i,m=pin(e.from,r,t);u=t.add(Xnn({key:m.key||(e.key?Ak(e.key):void 0),pulse:m.pulse,clean:!r}));const g=jt(u);u=l=t.add(Cd({pulse:g})),u=t.add(rrn({markdef:oin(e),interactive:ain(e.interactive,t),clip:sin(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:jt(u)}));const y=jt(u);u=c=t.add(Fje(Oje(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(x=>{const S=nse(x,t),C=S.metadata;(C.generates||C.changes)&&Le("Mark transforms should not generate new data."),C.nomod||(c.params.mod=!0),S.params.pulse=jt(u),t.add(u=S)}),e.sort&&(u=t.add(drn({sort:t.compareRef(e.sort),pulse:jt(u)})));const v=jt(u);(i||o)&&(o=t.add(Uje({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=jt(o));const b=t.add(Lje({mark:y,pulse:d||v}));h=jt(b),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?min(e,t,m):p?gin(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(b))),s&&(h=yin(s,h,t));const w=t.add(Bje({pulse:h})),E=t.add(k_({pulse:jt(w)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new Ub(t,l,w,E)),e.on&&e.on.forEach(x=>{(x.insert||x.remove||x.toggle)&&Le("Marks only support modify triggers."),Zje(x,t,f)}))}function yin(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:qs(s)?n.signalRef(s.signal):s,method:qs(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=qs(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return jt(n.add(orn(o)))}function vin(e,t){const n=t.config.legend,r=e.encode||{},i=vl(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;Qie.forEach(b=>e[b]?(l[b]=e[b],c=c||e[b]):0),c||Le("Missing valid scale for legend.");const p=bin(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=jt(t.add(Cd(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=jt(t.add(trn(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===t$?(h=[qrn(e,c,n,r.gradient),rve(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${tb(i.gradientLength())})/100))`)):p===qW?h=[Wrn(e,c,n,r.gradient,v),rve(e,n,r.labels,v)]:(f=Xrn(e,n),h=[Krn(e,n,r,v,tb(f.columns))],d.size=Ein(e,t,h[0].marks)),h=[kk({role:ynn,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(iin(e,n,r.title,g)),hj(kk({role:mnn,from:g,encode:IT(win(i,e,n),s,_N),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function bin(e,t){let n=e.type||nve;return!e.type&&_in(e)===1&&(e.fill||e.stroke)&&(n=hre(t)?t$:oW(t)?qW:nve),n!==t$?n:oW(t)?qW:t$}function _in(e){return Qie.reduce((t,n)=>t+(e[n]?1:0),0)}function win(e,t,n){const r={enter:{},update:{}};return Ko(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function Ein(e,t,n){const r=tb(cve("size",e,n)),i=tb(cve("strokeWidth",e,n)),s=tb(xin(n[1].encode,t,bN));return ep(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function cve(e,t,n){return t[e]?`scale("${t[e]}",datum)`:Yje(e,n[0].encode)}function xin(e,t,n){return Yje("fontSize",e)||Vrn("fontSize",t,n)}const Sin=`item.orient==="${kT}"?-90:item.orient==="${RT}"?90:0`;function Tin(e,t){e=gt(e)?{text:e}:e;const n=vl(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=jt(t.add(Cd(null,[l])));return u.push(Iin(e,n,Cin(e),c)),e.subtitle&&u.push(kin(e,n,r.subtitle,c)),hj(kk({role:wnn,from:c,encode:Ain(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function Cin(e){const t=e.encode;return t&&t.title||En({name:e.name,interactive:e.interactive,style:e.style},t)}function Ain(e,t){const n={enter:{},update:{}};return Ko(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:Zie},angle:{signal:Sin},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),IT(n,t,_N)}function Iin(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Ko(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),oc({type:R_,role:Enn,style:Orn,from:r,encode:o},n)}function kin(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Ko(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),oc({type:R_,role:xnn,style:$rn,from:r,encode:o},n)}function Rin(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(nse(r,t))}),e.on&&e.on.forEach(r=>{Zje(r,t,e.name)}),t.addDataPipeline(e.name,Nin(e,t,n))}function Nin(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?qs(e.values)||ZO(e.format)?(r.push(fve(t,e)),r.push(i=Lv())):r.push(i=Lv({$ingest:e.values,$format:e.format})):e.url?ZO(e.url)||ZO(e.format)?(r.push(fve(t,e)),r.push(i=Lv())):r.push(i=Lv({$request:e.url,$format:e.format})):e.source&&(i=a=mt(e.source).map(d=>jt(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=Lv()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=crn({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,Lv())),i||r.push(Lv()),r.push(k_({})),r}function Lv(e){const t=Cd({},e);return t.metadata={source:!0},t}function fve(e,t){return nrn({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const eBe=e=>e===jy||e===Ad,pj=(e,t,n)=>qs(e)?$in(e.signal,t,n):e===kT||e===Ad?t:n,ho=(e,t,n)=>qs(e)?Pin(e.signal,t,n):eBe(e)?t:n,od=(e,t,n)=>qs(e)?Oin(e.signal,t,n):eBe(e)?n:t,tBe=(e,t,n)=>qs(e)?Min(e.signal,t,n):e===Ad?{value:t}:{value:n},Din=(e,t,n)=>qs(e)?Lin(e.signal,t,n):e===RT?{value:t}:{value:n},Pin=(e,t,n)=>nBe(`${e} === '${Ad}' || ${e} === '${jy}'`,t,n),Oin=(e,t,n)=>nBe(`${e} !== '${Ad}' && ${e} !== '${jy}'`,t,n),$in=(e,t,n)=>rse(`${e} === '${kT}' || ${e} === '${Ad}'`,t,n),Min=(e,t,n)=>rse(`${e} === '${Ad}'`,t,n),Lin=(e,t,n)=>rse(`${e} === '${RT}'`,t,n),nBe=(e,t,n)=>(t=t!=null?fo(t):t,n=n!=null?fo(n):n,dve(t)&&dve(n)?(t=t?t.signal||rt(t.value):null,n=n?n.signal||rt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[En({test:e},t)].concat(n||[])),dve=e=>e==null||Object.keys(e).length===1,rse=(e,t,n)=>({signal:`${e} ? (${oE(t)}) : (${oE(n)})`}),Fin=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${kT}' ? (${oE(r)}) : `:"")+(n!=null?`${e} === '${jy}' ? (${oE(n)}) : `:"")+(i!=null?`${e} === '${RT}' ? (${oE(i)}) : `:"")+(t!=null?`${e} === '${Ad}' ? (${oE(t)}) : `:"")+"(null)"}),oE=e=>qs(e)?e.signal:e==null?null:rt(e),jin=(e,t)=>t===0?0:qs(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},BE=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function hw(e,t,n,r){let i;if(t&&zt(t,e))return t[e];if(zt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[Xie][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[bN][i]}return null}function hve(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function Bin(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(qs(o)){const f=hve([n.axisX,n.axisY]),d=hve([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=ho(o,hw(l,n.axisX,i,r),hw(l,n.axisY,i,r));u={};for(l of d)u[l]=Fin(o.signal,hw(l,n.axisTop,i,r),hw(l,n.axisBottom,i,r),hw(l,n.axisLeft,i,r),hw(l,n.axisRight,i,r))}else a=o===Ad||o===jy?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?En({},i,a,u,s):i}function Uin(e,t,n,r){const i=vl(e,t),s=e.orient;let o,a;const u={enter:o={opacity:sr},update:a={opacity:qc},exit:{opacity:sr}};Ko(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=pve(e,0),c=pve(e,1);return o.x=a.x=ho(s,l,sr),o.x2=a.x2=ho(s,c),o.y=a.y=od(s,l,sr),o.y2=a.y2=od(s,c),oc({type:Jie,role:cnn,from:r,encode:u},n)}function pve(e,t){return{scale:e.scale,range:t}}function zin(e,t,n,r,i){const s=vl(e,t),o=e.orient,a=e.gridScale,u=pj(o,1,-1),l=Vin(e.offset,u);let c,f,d;const h={enter:c={opacity:sr},update:d={opacity:qc},exit:f={opacity:sr}};Ko(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Hc,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=ho(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:En(m,{mult:u,offset:l});return c.x=d.x=ho(o,p,g),c.y=d.y=od(o,p,g),c.x2=d.x2=od(o,y),c.y2=d.y2=ho(o,y),f.x=ho(o,p),f.y=od(o,p),oc({type:Jie,role:fnn,key:Hc,from:r,encode:h},n)}function Vin(e,t){if(t!==1)if(!yt(e))e=qs(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=En({},e);for(;n.mult!=null;)if(yt(n.mult))n=n.mult=En({},n.mult);else return n.mult=qs(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function Hin(e,t,n,r,i,s){const o=vl(e,t),a=e.orient,u=pj(a,-1,1);let l,c,f;const d={enter:l={opacity:sr},update:f={opacity:qc},exit:c={opacity:sr}};Ko(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=fo(i);h.mult=u;const p={scale:e.scale,field:Hc,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=ho(a,sr,p),f.y2=l.y2=ho(a,h),c.x=ho(a,p),f.x=l.x=od(a,sr,p),f.x2=l.x2=od(a,h),c.y=od(a,p),oc({type:Jie,role:hnn,key:Hc,from:r,encode:d},n)}function r7(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function qin(e,t,n,r,i,s){const o=vl(e,t),a=e.orient,u=e.scale,l=pj(a,-1,1),c=tb(o("labelFlush")),f=tb(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=fo(i);g.mult=l,g.offset=fo(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:Hc,band:.5,offset:Kje(s.offset,o("labelOffset"))},v=ho(a,p?r7(u,c,'"left"','"right"','"center"'):{value:"center"},Din(a,"left","right")),b=ho(a,tBe(a,"bottom","top"),p?r7(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=r7(u,c,`-(${f})`,f,0);p=p&&f;const E={opacity:sr,x:ho(a,y,g),y:od(a,y,g)},x={enter:E,update:m={opacity:qc,text:{field:Kie},x:E.x,y:E.y,align:v,baseline:b},exit:{opacity:sr,x:E.x,y:E.y}};Ko(x,{dx:!d&&p?ho(a,w):null,dy:!h&&p?od(a,w):null}),Ko(x,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const S=o("labelBound");let C=o("labelOverlap");return C=C||S?{separation:o("labelSeparation"),method:C,order:"datum.index",bound:S?{scale:u,orient:a,tolerance:S}:null}:void 0,m.align!==v&&(m.align=BE(m.align,v)),m.baseline!==b&&(m.baseline=BE(m.baseline,b)),oc({type:R_,role:dnn,style:bN,key:Hc,from:r,encode:x,overlap:C},n)}function Win(e,t,n,r){const i=vl(e,t),s=e.orient,o=pj(s,-1,1);let a,u;const l={enter:a={opacity:sr,anchor:fo(i("titleAnchor",null)),align:{signal:Zie}},update:u=En({},a,{opacity:qc,text:fo(e.title)}),exit:{opacity:sr}},c={signal:`lerp(range("${e.scale}"), ${fj(0,1,.5)})`};return u.x=ho(s,c),u.y=od(s,c),a.angle=ho(s,sr,jin(o,90)),a.baseline=ho(s,tBe(s,jy,Ad),{value:jy}),u.angle=a.angle,u.baseline=a.baseline,Ko(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),Gin(i,s,l,n),l.update.align=BE(l.update.align,a.align),l.update.angle=BE(l.update.angle,a.angle),l.update.baseline=BE(l.update.baseline,a.baseline),oc({type:R_,role:pnn,style:Xie,from:r,encode:l},n)}function Gin(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=BE(fo(a),n.update[u]),!1):!Pw(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?fo(o):ho(t,fo(o),fo(s))}function Yin(e,t){const n=Bin(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=vl(e,n),l=Hrn(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=jt(t.add(Cd({},[c]))),d=jt(t.add(Knn({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(zin(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(Hin(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(qin(e,n,r.labels,d,p,l))),c.domain&&h.push(Uin(e,n,r.domain,f)),c.title&&h.push(Win(e,n,r.title,f)),hj(kk({role:lnn,from:f,encode:IT(Kin(u,e),i,_N),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function Kin(e,t){const n={enter:{},update:{}};return Ko(n,{orient:e("orient"),offset:e("offset")||0,position:Of(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function rBe(e,t,n){const r=mt(e.signals),i=mt(e.scales);return n||r.forEach(s=>$je(s,t)),mt(e.projections).forEach(s=>Arn(s,t)),i.forEach(s=>mrn(s,t)),mt(e.data).forEach(s=>Rin(s,t)),i.forEach(s=>grn(s,t)),(n||r).forEach(s=>Ynn(s,t)),mt(e.axes).forEach(s=>Yin(s,t)),mt(e.marks).forEach(s=>hj(s,t)),mt(e.legends).forEach(s=>vin(s,t)),e.title&&Tin(e.title,t),t.parseLambdas(),t}const Xin=e=>IT({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function Qin(e,t){const n=t.config,r=jt(t.root=t.add(DL())),i=Jin(e,n);i.forEach(l=>$je(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(Cd()),o=t.add(Fje(Oje(Xin(e.encode),cj,qie,e.style,t,{pulse:jt(s)}))),a=t.add(Uje({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:jt(o)}));t.operators.pop(),t.pushState(jt(o),jt(a),null),rBe(e,t,i),t.operators.push(a);let u=t.add(Lje({mark:r,pulse:jt(a)}));return u=t.add(Bje({pulse:jt(u)})),u=t.add(k_({pulse:jt(u)})),t.addData("root",new Ub(t,s,s,u)),t}function FC(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function Jin(e,t){const n=o=>Of(e[o],t[o]),r=[FC("background",n("background")),FC("autosize",onn(n("autosize"))),FC("padding",unn(n("padding"))),FC("width",n("width")||0),FC("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return mt(e.signals).forEach(o=>{zt(i,o.name)?o=En(i[o.name],o):r.push(o),s[o.name]=o}),mt(t.signals).forEach(o=>{!zt(s,o.name)&&!zt(i,o.name)&&r.push(o)}),r}function iBe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function mve(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}iBe.prototype=mve.prototype={parse(e){return rBe(e,this)},fork(){return new mve(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof BW?jt(e):e;return this.add(lrn({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(jt(this.add(k_({pulse:e})))),this._parent.push(t),this._lookup.push(n?jt(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return tr(this._parent)},encode(){return tr(this._encode)},lookup(){return tr(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(gt(e))return Ak(e,t);e.signal||Le("Unsupported field reference: "+rt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=jt(this.add(Znn(i)))}return r},compareRef(e){let t=!1;const n=s=>qs(s)?(t=!0,this.signalRef(s.signal)):Fnn(s)?(t=!0,this.exprRef(s.expr)):s,r=mt(e.field).map(n),i=mt(e.order).map(n);return t?jt(this.add(tve({fields:r,orders:i}))):Zye(r,i)},keyRef(e,t){let n=!1;const r=s=>qs(s)?(n=!0,jt(i[s.signal])):s,i=this.signals;return e=mt(e).map(r),n?jt(this.add(ern({fields:e,flat:t}))):Onn(e,t)},sortRef(e){if(!e)return e;const t=uj(e.op,e.field),n=e.order||$nn;return n.signal?jt(this.add(tve({fields:t,orders:this.signalRef(n.signal)}))):Zye(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return zt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Le("Duplicate signal name: "+rt(e));const n=t instanceof BW?t:this.add(DL(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Le("Unrecognized signal name: "+rt(e)),this.signals[e]},signalRef(e){return this.signals[e]?jt(this.signals[e]):(zt(this.lambdas,e)||(this.lambdas[e]=this.add(DL(null))),jt(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=ep(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!yt(e)?e:this.signalRef(e.signal||ise(e))},exprRef(e,t){const n={expr:ep(e,this)};return t&&(n.expr.$name=t),jt(this.add(Qnn(n)))},addBinding(e,t){this.bindings||Le("Nested signals do not support binding: "+rt(e)),this.bindings.push(En({signal:e},t))},addScaleProj(e,t){zt(this.scales,e)&&Le("Duplicate scale or projection name: "+rt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,frn(t))},addProjection(e,t){this.addScaleProj(e,urn(t))},getScale(e){return this.scales[e]||Le("Unrecognized scale name: "+rt(e)),this.scales[e]},scaleRef(e){return jt(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return zt(this.data,e)&&Le("Duplicate data set name: "+rt(e)),this.data[e]=t},getData(e){return this.data[e]||Le("Undefined data set name: "+rt(e)),this.data[e]},addDataPipeline(e,t){return zt(this.data,e)&&Le("Duplicate data set name: "+rt(e)),this.addData(e,Ub.fromEntries(this,t))}};function ise(e){return(je(e)?Zin:esn)(e)}function Zin(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(yt(i)?i.signal||ise(i):rt(i))}return n+"]"}function esn(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+rt(r)+":"+(yt(i)?i.signal||ise(i):rt(i));return t+"}"}function tsn(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function nsn(e,t,n){return yt(e)||Le("Input Vega specification must be an object."),t=_T(tsn(),t,e.config),Qin(e,new iBe(t,n)).toRuntime()}var rsn="5.29.0";En(Gx,nWt,HKt,EXt,ZXt,oQt,PQt,dQt,$Qt,jQt,KQt,nJt);const isn=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Ns,CanvasHandler:pN,CanvasRenderer:_L,DATE:fl,DAY:_a,DAYOFYEAR:Zh,Dataflow:jE,Debug:kLe,Error:Jte,EventStream:R5,Gradient:WFe,GroupItem:V5,HOURS:rc,Handler:Fre,HybridHandler:L4e,HybridRenderer:yW,Info:ILe,Item:z5,MILLISECONDS:gd,MINUTES:ic,MONTH:Ta,Marks:sc,MultiPulse:vne,None:ALe,Operator:ei,Parameters:k5,Pulse:ey,QUARTER:cl,RenderType:S0,Renderer:hN,ResourceLoader:ZFe,SECONDS:tf,SVGHandler:S4e,SVGRenderer:Hre,SVGStringRenderer:M4e,Scenegraph:g4e,TIME_UNITS:cne,Transform:De,View:Eje,WEEK:Us,Warn:Zte,YEAR:qo,accessor:yl,accessorFields:Sa,accessorName:ts,array:mt,ascending:x5,bandwidthNRD:Ene,bin:F6e,bootstrapCI:j6e,boundClip:G4e,boundContext:lN,boundItem:dW,boundMark:d4e,boundStroke:Sg,changeset:C_,clampRange:BLe,codegenExpression:K5e,compare:ine,constant:Da,cumulativeLogNormal:Ine,cumulativeNormal:D5,cumulativeUniform:Dne,dayofyear:JLe,debounce:sne,defaultLocale:hne,definition:$6e,densityLogNormal:Ane,densityNormal:xne,densityUniform:Nne,domChild:js,domClear:Pc,domCreate:E0,domFind:Lre,dotbin:B6e,error:Le,expressionFunction:bs,extend:En,extent:Jh,extentIndex:ULe,falsy:Hg,fastmap:ET,field:Zc,flush:zLe,font:Y5,fontFamily:dN,fontSize:_p,format:LO,formatLocale:aL,formats:gne,hasOwnProperty:zt,id:QR,identity:Na,inferType:S6e,inferTypes:T6e,ingest:Tr,inherits:lt,inrange:rE,interpolate:pre,interpolateColors:B5,interpolateRange:DFe,intersect:V4e,intersectBoxLine:iE,intersectPath:Ere,intersectPoint:xre,intersectRule:t4e,isArray:je,isBoolean:mv,isDate:Z0,isFunction:xn,isIterable:VLe,isNumber:hr,isObject:yt,isRegExp:HLe,isString:gt,isTuple:A5,key:one,lerp:qLe,lineHeight:My,loader:T5,locale:E6e,logger:ene,lruCache:WLe,markup:Vre,merge:GLe,mergeConfig:_T,multiLineOffset:Ore,one:bT,pad:YLe,panLinear:OLe,panLog:$Le,panPow:MLe,panSymlog:LLe,parse:nsn,parseExpression:Nie,parseSelector:yv,path:QF,pathCurves:bre,pathEqual:Y4e,pathParse:Qx,pathRectangle:KFe,pathRender:bk,pathSymbols:YFe,pathTrail:XFe,peek:tr,point:X5,projection:nie,quantileLogNormal:kne,quantileNormal:P5,quantileUniform:Pne,quantiles:_ne,quantizeInterpolator:PFe,quarter:FLe,quartiles:wne,get random(){return nf},randomInteger:oqt,randomKDE:Tne,randomLCG:sqt,randomLogNormal:z6e,randomMixture:V6e,randomNormal:Sne,randomUniform:H6e,read:I6e,regressionConstant:One,regressionExp:W6e,regressionLinear:$ne,regressionLoess:K6e,regressionLog:q6e,regressionPoly:Y6e,regressionPow:G6e,regressionQuad:Mne,renderModule:Q5,repeat:EA,resetDefaultLocale:nHt,resetSVGClipId:JFe,resetSVGDefIds:uKt,responseType:A6e,runtimeContext:lje,sampleCurve:$5,sampleLogNormal:Cne,sampleNormal:N5,sampleUniform:Rne,scale:_r,sceneEqual:qre,sceneFromJSON:p4e,scenePickVisit:dL,sceneToJSON:h4e,sceneVisit:yd,sceneZOrder:Sre,scheme:mre,serializeXML:D4e,setHybridRendererOptions:iKt,setRandom:rqt,span:JR,splitAccessPath:bp,stringValue:rt,textMetrics:ql,timeBin:m6e,timeFloor:s6e,timeFormatLocale:gk,timeInterval:xT,timeOffset:u6e,timeSequence:f6e,timeUnitSpecifier:QLe,timeUnits:fne,toBoolean:ane,toDate:une,toNumber:wa,toSet:md,toString:lne,transform:M6e,transforms:Gx,truncate:KLe,truthy:ef,tupleid:Bt,typeParsers:rW,utcFloor:o6e,utcInterval:ST,utcOffset:l6e,utcSequence:d6e,utcdayofyear:t6e,utcquarter:jLe,utcweek:n6e,version:rsn,visitArray:Zg,week:ZLe,writeConfig:wT,zero:d0,zoomLinear:tne,zoomLog:nne,zoomPow:oL,zoomSymlog:rne},Symbol.toStringTag,{value:"Module"}));function ssn(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var osn={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},asn={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},usn={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const lsn=Array.prototype.slice,Fv=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,lsn.call(t,1))},csn=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var fsn={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:csn,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Fv("join",arguments)},indexof:function(){return Fv("indexOf",arguments)},lastindexof:function(){return Fv("lastIndexOf",arguments)},slice:function(){return Fv("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Fv("substring",arguments,String)},split:function(){return Fv("split",arguments,String)},replace:function(){return Fv("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const dsn=["view","item","group","xy","x","y"],GW=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&GW.add(setImmediate);const hsn={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:osn[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),GW.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||fsn[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>asn[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>usn[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,GW.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function jC(e,t,n,r,i,s){const o=a=>hsn[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,dsn.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var psn={operator(e,t){const n=t.ast,r=e.functions;return i=>jC(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>jC(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>jC(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return jC(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=jC(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&ssn(o,r,s),l}}};const msn="vega-lite",gsn='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',ysn="5.18.1",vsn=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],bsn="https://vega.github.io/vega-lite/",_sn="Vega-Lite is a concise high-level language for interactive visualization.",wsn=["vega","chart","visualization"],Esn="build/vega-lite.js",xsn="build/vega-lite.min.js",Ssn="build/vega-lite.min.js",Tsn="build/src/index",Csn="build/src/index.d.ts",Asn={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},Isn=["bin","build","src","vega-lite*","tsconfig.json"],ksn={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},Rsn={type:"git",url:"https://github.com/vega/vega-lite.git"},Nsn="BSD-3-Clause",Dsn={url:"https://github.com/vega/vega-lite/issues"},Psn={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},Osn={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},$sn={vega:"^5.24.0"},Msn={node:">=18"},Lsn="yarn@1.22.19",Fsn={name:msn,author:gsn,version:ysn,collaborators:vsn,homepage:bsn,description:_sn,keywords:wsn,main:Esn,unpkg:xsn,jsdelivr:Ssn,module:Tsn,types:Csn,bin:Asn,files:Isn,scripts:ksn,repository:Rsn,license:Nsn,bugs:Dsn,devDependencies:Psn,dependencies:Osn,peerDependencies:$sn,engines:Msn,packageManager:Lsn};function sse(e){return!!e.or}function ose(e){return!!e.and}function ase(e){return!!e.not}function r$(e,t){if(ase(e))r$(e.not,t);else if(ose(e))for(const n of e.and)r$(n,t);else if(sse(e))for(const n of e.or)r$(n,t);else t(e)}function UE(e,t){return ase(e)?{not:UE(e.not,t)}:ose(e)?{and:e.and.map(n=>UE(n,t))}:sse(e)?{or:e.or.map(n=>UE(n,t))}:t(e)}const on=structuredClone;function sBe(e){throw new Error(e)}function nS(e,t){const n={};for(const r of t)zt(e,r)&&(n[r]=e[r]);return n}function tl(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>qr(e)).join(",")})`};function Wn(e){if(hr(e))return e;const t=gt(e)?e:qr(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function YW(e){return e===!1||e===null}function Gn(e,t){return e.includes(t)}function zb(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function use(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function oBe(e,...t){for(const n of t)jsn(e,n??{});return e}function jsn(e,t){for(const n of Xe(t))wT(e,n,t[n],!0)}function wh(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function Bsn(e,t){const n=Xe(e),r=Xe(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function aBe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function lse(e,t){for(const n of e)if(t.has(n))return!0;return!1}function KW(e){const t=new Set;for(const n of e){const i=bp(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function cse(e,t){return e===void 0||t===void 0?!0:lse(KW(e),KW(t))}function Hr(e){return Xe(e).length===0}const Xe=Object.keys,Wo=Object.values,By=Object.entries;function Rk(e){return e===!0||e===!1}function Ni(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function M2(e,t){return ase(e)?`!(${M2(e.not,t)})`:ose(e)?`(${e.and.map(n=>M2(n,t)).join(") && (")})`:sse(e)?`(${e.or.map(n=>M2(n,t)).join(") || (")})`:t(e)}function PL(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&PL(e[n],t)&&delete e[n],Hr(e)}function wN(e){return e.charAt(0).toUpperCase()+e.substr(1)}function fse(e,t="datum"){const n=bp(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(rt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function uBe(e,t="datum"){return`${t}[${rt(bp(e).join("."))}]`}function Usn(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function rf(e){return`${bp(e).map(Usn).join("\\.")}`}function Vb(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function NT(e){return`${bp(e).join(".")}`}function rS(e){return e?bp(e).length:0}function ms(...e){for(const t of e)if(t!==void 0)return t}let lBe=42;function cBe(e){const t=++lBe;return e?String(e)+t:t}function zsn(){lBe=42}function fBe(e){return dBe(e)?e:`__${e}`}function dBe(e){return e.startsWith("__")}function Nk(e){if(e!==void 0)return(e%360+360)%360}function mj(e){return hr(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const gve=Object.getPrototypeOf(structuredClone({}));function Bl(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Bl(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!Bl(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==gve.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==gve.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Bl(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function qr(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const Cm="row",Am="column",gj="facet",Di="x",xo="y",Id="x2",xp="y2",vv="xOffset",DT="yOffset",kd="radius",Cg="radius2",gf="theta",Ag="theta2",Rd="latitude",Nd="longitude",Dd="latitude2",sf="longitude2",dl="color",Sp="fill",Tp="stroke",hl="shape",Ig="size",N_="angle",kg="opacity",bv="fillOpacity",_v="strokeOpacity",wv="strokeWidth",Ev="strokeDash",EN="text",iS="order",xN="detail",yj="key",Hb="tooltip",vj="href",bj="url",_j="description",Vsn={x:1,y:1,x2:1,y2:1},hBe={theta:1,theta2:1,radius:1,radius2:1};function pBe(e){return e in hBe}const dse={longitude:1,longitude2:1,latitude:1,latitude2:1};function mBe(e){switch(e){case Rd:return"y";case Dd:return"y2";case Nd:return"x";case sf:return"x2"}}function gBe(e){return e in dse}const Hsn=Xe(dse),hse={...Vsn,...hBe,...dse,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function zE(e){return e===dl||e===Sp||e===Tp}const yBe={row:1,column:1,facet:1},Uc=Xe(yBe),pse={...hse,...yBe},qsn=Xe(pse),{order:Eyn,detail:xyn,tooltip:Syn,...Wsn}=pse,{row:Tyn,column:Cyn,facet:Ayn,...Gsn}=Wsn;function Ysn(e){return!!Gsn[e]}function vBe(e){return!!pse[e]}const Ksn=[Id,xp,Dd,sf,Ag,Cg];function bBe(e){return D_(e)!==e}function D_(e){switch(e){case Id:return Di;case xp:return xo;case Dd:return Rd;case sf:return Nd;case Ag:return gf;case Cg:return kd}return e}function Uy(e){if(pBe(e))switch(e){case gf:return"startAngle";case Ag:return"endAngle";case kd:return"outerRadius";case Cg:return"innerRadius"}return e}function Cp(e){switch(e){case Di:return Id;case xo:return xp;case Rd:return Dd;case Nd:return sf;case gf:return Ag;case kd:return Cg}}function pl(e){switch(e){case Di:case Id:return"width";case xo:case xp:return"height"}}function _Be(e){switch(e){case Di:return"xOffset";case xo:return"yOffset";case Id:return"x2Offset";case xp:return"y2Offset";case gf:return"thetaOffset";case kd:return"radiusOffset";case Ag:return"theta2Offset";case Cg:return"radius2Offset"}}function mse(e){switch(e){case Di:return"xOffset";case xo:return"yOffset"}}function Xsn(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Qsn=Xe(hse),{x:Iyn,y:kyn,x2:Ryn,y2:Nyn,xOffset:Dyn,yOffset:Pyn,latitude:Oyn,longitude:$yn,latitude2:Myn,longitude2:Lyn,theta:Fyn,theta2:jyn,radius:Byn,radius2:Uyn,...gse}=hse,Jsn=Xe(gse),yse={x:1,y:1},Ap=Xe(yse);function gs(e){return e in yse}const vse={theta:1,radius:1},Zsn=Xe(vse);function wj(e){return e==="width"?Di:xo}const wBe={xOffset:1,yOffset:1};function SN(e){return e in wBe}const{text:zyn,tooltip:Vyn,href:Hyn,url:qyn,description:Wyn,detail:Gyn,key:Yyn,order:Kyn,...EBe}=gse,eon=Xe(EBe);function ton(e){return!!gse[e]}function non(e){switch(e){case dl:case Sp:case Tp:case Ig:case hl:case kg:case wv:case Ev:return!0;case bv:case _v:case N_:return!1}}const xBe={...yse,...vse,...wBe,...EBe},Ej=Xe(xBe);function Rg(e){return!!xBe[e]}function ron(e,t){return son(e)[t]}const SBe={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:Xyn,...ion}=SBe;function son(e){switch(e){case dl:case Sp:case Tp:case _j:case xN:case yj:case Hb:case vj:case iS:case kg:case bv:case _v:case wv:case gj:case Cm:case Am:return SBe;case Di:case xo:case vv:case DT:case Rd:case Nd:return ion;case Id:case xp:case Dd:case sf:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Ig:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Ev:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case hl:return{point:"always",geoshape:"always"};case EN:return{text:"always"};case N_:return{point:"always",square:"always",text:"always"};case bj:return{image:"always"};case gf:return{text:"always",arc:"always"};case kd:return{text:"always",arc:"always"};case Ag:case Cg:return{arc:"always"}}}function i7(e){switch(e){case Di:case xo:case gf:case kd:case vv:case DT:case Ig:case N_:case wv:case kg:case bv:case _v:case Id:case xp:case Ag:case Cg:return;case gj:case Cm:case Am:case hl:case Ev:case EN:case Hb:case vj:case bj:case _j:return"discrete";case dl:case Sp:case Tp:return"flexible";case Rd:case Nd:case Dd:case sf:case xN:case yj:case iS:return}}const oon={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},aon={count:1,min:1,max:1};function rg(e){return!!e&&!!e.argmin}function xv(e){return!!e&&!!e.argmax}function bse(e){return gt(e)&&!!oon[e]}const uon=new Set(["count","valid","missing","distinct"]);function TBe(e){return gt(e)&&uon.has(e)}function lon(e){return gt(e)&&Gn(["min","max"],e)}const con=new Set(["count","sum","distinct","valid","missing"]),fon=new Set(["mean","average","median","q1","q3","min","max"]);function CBe(e){return mv(e)&&(e=Oj(e,void 0)),"bin"+Xe(e).map(t=>xj(e[t])?Ni(`_${t}_${By(e[t])}`):Ni(`_${t}_${e[t]}`)).join("")}function ci(e){return e===!0||P_(e)&&!e.binned}function $o(e){return e==="binned"||P_(e)&&e.binned===!0}function P_(e){return yt(e)}function xj(e){return e==null?void 0:e.param}function yve(e){switch(e){case Cm:case Am:case Ig:case dl:case Sp:case Tp:case wv:case kg:case bv:case _v:case hl:return 6;case Ev:return 4;default:return 10}}function TN(e){return!!(e!=null&&e.expr)}function Lu(e){const t=Xe(e||{}),n={};for(const r of t)n[r]=Nl(e[r]);return n}function ABe(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=nS(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function n0(e){return gt(e)||je(e)&&gt(e[0])}function Dt(e){return!!(e!=null&&e.signal)}function Sv(e){return!!e.step}function don(e){return je(e)?!1:"fields"in e&&!("data"in e)}function hon(e){return je(e)?!1:"fields"in e&&"data"in e}function ym(e){return je(e)?!1:"field"in e&&"data"in e}const pon={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},mon=Xe(pon),gon={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},XW=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function IBe(e){const t=je(e.condition)?e.condition.map(vve):vve(e.condition);return{...Nl(e),condition:t}}function Nl(e){if(TN(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function vve(e){if(TN(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function mi(e){if(TN(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Dt(e)?e:e!==void 0?{value:e}:void 0}function yon(e){return Dt(e)?e.signal:rt(e)}function bve(e){return Dt(e)?e.signal:rt(e.value)}function Xf(e){return Dt(e)?e.signal:e==null?null:rt(e)}function von(e,t,n){for(const r of n){const i=ig(r,t.markDef,t.config);i!==void 0&&(e[r]=mi(i))}return e}function kBe(e){return[].concat(e.type,e.style??[])}function Sr(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:ig(e,t,n,r)}function ig(e,t,n,{vgChannel:r}={}){return ms(r?OL(e,t,n.style):void 0,OL(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function OL(e,t,n){return RBe(e,kBe(t),n)}function RBe(e,t,n){t=mt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function NBe(e,t){return mt(e).reduce((n,r)=>(n.field.push(at(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function DBe(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Bl(i,r))return;n.push(r)}),n}function PBe(e,t){return Bl(e,t)||!t?e:e?[...mt(e),...mt(t)].join(", "):t}function OBe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((n0(n)||Dt(n))&&(n0(r)||Dt(r)))return{explicit:e.explicit,value:PBe(n,r)};if(n0(n)||Dt(n))return{explicit:e.explicit,value:n};if(n0(r)||Dt(r))return{explicit:e.explicit,value:r};if(!n0(n)&&!Dt(n)&&!n0(r)&&!Dt(r))return{explicit:e.explicit,value:DBe(n,r)};throw new Error("It should never reach here")}function _se(e){return`Invalid specification ${qr(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const bon='Autosize "fit" only works for single views and layered views.';function _ve(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function wve(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function Eve(e){return e?`Dropping "fit-${e}" because spec has discrete ${pl(e)}.`:'Dropping "fit" because spec has discrete size.'}function wse(e){return`Unknown field for ${e}. Cannot calculate view size.`}function xve(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function _on(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function won(e){return`The "nearest" transform is not supported for ${e} marks.`}function $Be(e){return`Selection not supported for ${e} yet.`}function Eon(e){return`Cannot find a selection named "${e}".`}const xon="Scale bindings are currently only supported for scales with unbinned, continuous domains.",Son="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",Ton="Legend bindings are only supported for selections over an individual field or encoding channel.";function Con(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function Aon(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const Ion="The same selection must be used to override scale domains in a layered view.",kon='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function Ron(e){return`Unknown repeated value "${e}".`}function Sve(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const Non="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function Don(e){return`Unrecognized parse "${e}".`}function Tve(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const Pon="Attempt to add the same child twice.";function Oon(e){return`Ignoring an invalid transform: ${qr(e)}.`}const $on='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Cve(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function Mon(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${qr(t)} is overridden by a child projection ${qr(n)}.`}const Lon="Arc marks uses theta channel rather than angle, replacing angle with theta.";function Fon(e){return`${e}Offset dropped because ${e} is continuous`}function jon(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${qr(n)}}.`}function MBe(e){return`Invalid field type "${e}".`}function Bon(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function Uon(e){return`Invalid aggregation operator "${e}".`}function LBe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function zon(e){return`Position range does not support relative band size for ${e}.`}function QW(e,t){return`Dropping ${qr(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const Von="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function Sj(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function Hon(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function qon(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function Won(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Gon(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function s7(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function Yon(e){return`The ${e} for range marks cannot be an expression`}function Kon(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function Xon(e,t){return`Specified orient "${e}" overridden with "${t}".`}function Qon(e){return`Cannot use the scale property "${e}" with non-color channel.`}function Jon(e){return`Cannot use the relative band size with ${e} scale.`}function Zon(e){return`Using unaggregated domain with raw field has no effect (${qr(e)}).`}function ean(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function tan(e){return`Unaggregated domain is currently unsupported for log scale (${qr(e)}).`}function nan(e){return`Cannot apply size to non-oriented mark "${e}".`}function ran(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function ian(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function FBe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function jBe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function san(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${qr(n)} and ${qr(r)}). Using ${qr(n)}.`}function oan(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${qr(n)} and ${qr(r)}). Using the union of the two domains.`}function aan(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function uan(e){return`Dropping sort property ${qr(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Ave="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",lan="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",can="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",fan="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function dan(e){return`Cannot stack "${e}" if there is already "${e}2".`}function han(e){return`Stack is applied to a non-linear scale (${e}).`}function pan(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function $L(e,t){return`Invalid ${e}: ${qr(t)}.`}function man(e){return`Dropping day from datetime ${qr(e)} as day cannot be combined with other units.`}function gan(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function yan(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function van(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function Ive(e){return`1D error band does not support ${e}.`}function BBe(e){return`Channel ${e} is required for "binned" bin.`}function ban(e){return`Channel ${e} should not be used with "binned" bin.`}function _an(e){return`Domain for ${e} is required for threshold scale.`}const UBe=ene(Zte);let sS=UBe;function wan(e){return sS=e,sS}function Ean(){return sS=UBe,sS}function Ze(...e){sS.warn(...e)}function xan(...e){sS.debug(...e)}function O_(e){if(e&&yt(e)){for(const t of xse)if(t in e)return!0}return!1}const zBe=["january","february","march","april","may","june","july","august","september","october","november","december"],San=zBe.map(e=>e.substr(0,3)),VBe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Tan=VBe.map(e=>e.substr(0,3));function Can(e){if(mj(e)&&(e=+e),hr(e))return e>4&&Ze($L("quarter",e)),e-1;throw new Error($L("quarter",e))}function Aan(e){if(mj(e)&&(e=+e),hr(e))return e-1;{const t=e.toLowerCase(),n=zBe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=San.indexOf(r);if(i!==-1)return i;throw new Error($L("month",e))}}function Ian(e){if(mj(e)&&(e=+e),hr(e))return e%7;{const t=e.toLowerCase(),n=VBe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Tan.indexOf(r);if(i!==-1)return i;throw new Error($L("day",e))}}function Ese(e,t){const n=[];if(t&&e.day!==void 0&&Xe(e).length>1&&(Ze(man(e)),e=on(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?Aan(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?Can(e.quarter):e.quarter;n.push(hr(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?Ian(e.day):e.day;n.push(hr(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function qb(e){const n=Ese(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function kan(e){const n=Ese(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Ran(e){const t=Ese(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const HBe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},xse=Xe(HBe);function Nan(e){return!!HBe[e]}function $_(e){return yt(e)?e.binned:qBe(e)}function qBe(e){return e&&e.startsWith("binned")}function Sse(e){return e.startsWith("utc")}function Dan(e){return e.substring(3)}const Pan={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function Tj(e){return xse.filter(t=>GBe(e,t))}function WBe(e){const t=Tj(e);return t[t.length-1]}function GBe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Oan(e,t,{end:n}={end:!1}){const r=fse(t),i=Sse(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of xse)GBe(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),kan(a)}function YBe(e){if(!e)return;const t=Tj(e);return`timeUnitSpecifier(${qr(t)}, ${qr(Pan)})`}function $an(e,t,n){if(!e)return;const r=YBe(e);return`${n||Sse(e)?"utc":"time"}Format(${t}, ${r})`}function yo(e){if(!e)return;let t;return gt(e)?qBe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:yt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Sse(t.unit)&&(t.utc=!0,t.unit=Dan(t.unit)),t}function Man(e){const{utc:t,...n}=yo(e);return n.unit?(t?"utc":"")+Xe(n).map(r=>Ni(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+Xe(n).map(r=>Ni(`_${r}_${n[r]}`)).join("")}function KBe(e,t=n=>n){const n=yo(e),r=WBe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=XBe(r,n.step),a={...i,[o]:+i[o]+s};return`${t(qb(a))} - ${t(qb(i))}`}}const Lan={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function Fan(e){return!!Lan[e]}function XBe(e,t=1){if(Fan(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function jan(e){return e==null?void 0:e.param}function Tse(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function Cse(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function Ase(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function Ise(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function kse(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function Rse(e){if(e!=null&&e.field){if(je(e.range)&&e.range.length===2)return!0;if(Dt(e.range))return!0}return!1}function Nse(e){return!!(e!=null&&e.field)&&(je(e.oneOf)||je(e.in))}function Ban(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function QBe(e){return Nse(e)||Tse(e)||Rse(e)||Cse(e)||Ise(e)||Ase(e)||kse(e)}function zd(e,t){return $j(e,{timeUnit:t,wrapTime:!0})}function Uan(e,t){return e.map(n=>zd(n,t))}function JBe(e,t=!0){const{field:n}=e,r=yo(e.timeUnit),{unit:i,binned:s}=r||{},o=at(e,{expr:"datum"}),a=i?`time(${s?o:Oan(i,n)})`:o;if(Tse(e))return`${a}===${zd(e.equal,i)}`;if(Cse(e)){const u=e.lt;return`${a}<${zd(u,i)}`}else if(Ise(e)){const u=e.gt;return`${a}>${zd(u,i)}`}else if(Ase(e)){const u=e.lte;return`${a}<=${zd(u,i)}`}else if(kse(e)){const u=e.gte;return`${a}>=${zd(u,i)}`}else{if(Nse(e))return`indexof([${Uan(e.oneOf,i).join(",")}], ${a}) !== -1`;if(Ban(e))return Dse(a,e.valid);if(Rse(e)){const{range:u}=e,l=Dt(u)?{signal:`${u.signal}[0]`}:u[0],c=Dt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+zd(l,i)+", "+zd(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${zd(l,i)}`),c!==null&&f.push(`${a} <= ${zd(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${qr(e)}`)}function Dse(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function zan(e){return QBe(e)&&e.timeUnit?{...e,timeUnit:yo(e.timeUnit)}:e}const CN={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Van(e){return e==="quantitative"||e==="temporal"}function ZBe(e){return e==="ordinal"||e==="nominal"}const Wb=CN.quantitative,Pse=CN.ordinal,oS=CN.temporal,Ose=CN.nominal,PT=CN.geojson;function Han(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Wb:return"quantitative";case"t":case oS:return"temporal";case"o":case Pse:return"ordinal";case"n":case Ose:return"nominal";case PT:return"geojson"}}const nl={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},JW={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function qan(e,t){const n=JW[e],r=JW[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const Wan={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function kve(e){return Wan[e]}const e8e=new Set(["linear","log","pow","sqrt","symlog"]),t8e=new Set([...e8e,"time","utc"]);function n8e(e){return e8e.has(e)}const r8e=new Set(["quantile","quantize","threshold"]),Gan=new Set([...t8e,...r8e,"sequential","identity"]),Yan=new Set(["ordinal","bin-ordinal","point","band"]);function bo(e){return Yan.has(e)}function ac(e){return Gan.has(e)}function Qf(e){return t8e.has(e)}function aS(e){return r8e.has(e)}const Kan={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function Xan(e){return!gt(e)&&!!e.name}function i8e(e){return e==null?void 0:e.param}function Qan(e){return e==null?void 0:e.unionWith}function Jan(e){return yt(e)&&"field"in e}const Zan={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:Qyn,domain:Jyn,range:Zyn,rangeMax:evn,rangeMin:tvn,scheme:nvn,...eun}=Zan,tun=Xe(eun);function ZW(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Qf(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Qf(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Qf(e);case"nice":return Qf(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return ac(e)&&!Gn(["log","time","utc","threshold","quantile"],e)}}function s8e(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return zE(e)?void 0:Qon(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function nun(e,t){return Gn([Pse,Ose],t)?e===void 0||bo(e):t===oS?Gn([nl.TIME,nl.UTC,void 0],e):t===Wb?n8e(e)||aS(e)||e===void 0:!0}function run(e,t,n=!1){if(!Rg(e))return!1;switch(e){case Di:case xo:case vv:case DT:case gf:case kd:return Qf(t)||t==="band"?!0:t==="point"?!n:!1;case Ig:case wv:case kg:case bv:case _v:case N_:return Qf(t)||aS(t)||Gn(["band","point","ordinal"],t);case dl:case Sp:case Tp:return t!=="band";case Ev:case hl:return t==="ordinal"||aS(t)}}function $se(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=Lse(e);return et(n)&&!TBe(n.aggregate)&&i&&Qf(i.get("type"))?iun({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function iun({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return Sr("invalid",n,i)===null?[sun(e,t),r]:r}function sun(e,t){const n=Mse(e,!0),i=D_(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function Mse(e,t=!0){return Dse(gt(e)?e:at(e,{expr:"datum"}),!t)}function oun(e){const{datum:t}=e;return O_(t)?qb(t):`${qr(t)}`}function nb(e,t,n,r){const i={};if(t&&(i.scale=t),Ip(e)){const{datum:s}=e;O_(s)?i.signal=qb(s):Dt(s)?i.signal=s.signal:TN(s)?i.signal=s.expr:i.value=s}else i.field=at(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function ML({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Dt(o)&&0<o&&o<1?"datum":void 0,u=at(t,{expr:a,suffix:i}),l=n!==void 0?at(n,{expr:a}):at(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Dt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function aun({scaleName:e,fieldDef:t}){const n=at(t,{expr:"datum"}),r=at(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function Lse({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(hn(t)){const f=o==null?void 0:o.get("type");if(fu(t)){c??(c=zy({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(ci(d)||c&&h&&p===oS)return a!=null&&a.impute?nb(t,s,{binSuffix:"mid"},{offset:u}):c&&!bo(f)?ML({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):nb(t,s,RN(t,e)?{binSuffix:"range"}:{},{offset:u});if($o(d)){if(et(n))return ML({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Ze(BBe(e===Di?Id:xp))}}return nb(t,s,bo(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(vd(t)){const f=t.value,d=u?{offset:u}:{};return{...L2(e,f),...d}}}return xn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function L2(e,t){return Gn(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Gn(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:mi(t)}function Gb(e){return e&&e!=="number"&&e!=="time"}function o8e(e,t,n){return`${e}(${t}${n?`, ${qr(n)}`:""})`}const uun="  ";function Fse({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(Gb(n))return Jf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=a8e(e,r,i),a=uS(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return Jf({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Jf({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&et(e)&&e.timeUnit===void 0)return Jf({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(cS(e)){const c=cun({field:o,timeUnit:et(e)?(u=yo(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:L_(e)&&((l=e.scale)==null?void 0:l.type)===nl.UTC});return c?{signal:c}:void 0}if(t=eG({type:a,specifiedFormat:t,config:s,normalizeStack:i}),et(e)&&ci(e.bin)){const c=at(e,{expr:r,binSuffix:"end"});return{signal:AN(o,c,t,n,s)}}else return t||uS(e)==="quantitative"?{signal:`${c8e(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function a8e(e,t,n){return et(e)?n?`${at(e,{expr:t,suffix:"end"})}-${at(e,{expr:t,suffix:"start"})}`:at(e,{expr:t}):oun(e)}function Jf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=a8e(e,r,i)),o!=="datum.value"&&et(e)&&ci(e.bin)){const a=at(e,{expr:r,binSuffix:"end"});return{signal:AN(o,a,t,n,s)}}return{signal:o8e(n,o,t)}}function u8e(e,t,n,r,i,s){var o;if(!(gt(r)&&Gb(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&uS(e)==="quantitative"&&(i.normalizedNumberFormatType&&lS(e)&&e.stack==="normalize"||i.numberFormatType))){if(lS(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return eG({type:"quantitative",config:i,normalizeStack:!0});if(cS(e)){const a=et(e)?(o=yo(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:lun({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return eG({type:t,specifiedFormat:n,config:i})}}function l8e(e,t,n){var r;if(e&&(Dt(e)||e==="number"||e==="time"))return e;if(cS(t)&&n!=="time"&&n!=="utc")return et(t)&&((r=yo(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function eG({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(gt(t))return t;if(e===Wb)return r?n.normalizedNumberFormat:n.numberFormat}function lun({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:YBe(t)}:r?void 0:n.timeFormat)}function c8e(e,t){return`format(${e}, "${t||""}")`}function Rve(e,t,n,r){return Gb(n)?o8e(n,e,t):c8e(e,(gt(t)?t:void 0)??r.numberFormat)}function AN(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return AN(e,t,i.numberFormat,i.numberFormatType,i);const s=Rve(e,n,r,i),o=Rve(t,n,r,i);return`${Dse(e,!1)} ? "null" : ${s} + "${uun}" + ${o}`}function cun({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=gt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):$an(t,e,s)}const yu={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},f8e=yu.arc,Cj=yu.area,Aj=yu.bar,fun=yu.image,Ij=yu.line,kj=yu.point,dun=yu.rect,LL=yu.rule,d8e=yu.text,jse=yu.tick,hun=yu.trail,Bse=yu.circle,Use=yu.square,h8e=yu.geoshape;function M_(e){return["line","area","trail"].includes(e)}function Dk(e){return["rect","bar","image","arc"].includes(e)}const pun=new Set(Xe(yu));function tp(e){return e.type}const mun=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],gun=["fill","fillOpacity"],yun=[...mun,...gun],vun={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Nve=Xe(vun),bun={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},_un={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},wun={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},p8e=Xe(wun);function Yb(e){return e&&e.band!=null}const Eun={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},m8e=5,xun={binSpacing:1,continuousBandSize:m8e,minBandSize:.25,timeUnitBandPosition:.5},Sun={binSpacing:0,continuousBandSize:m8e,minBandSize:.25,timeUnitBandPosition:.5},Tun={thickness:1};function Cun(e){return tp(e)?e.type:e}const Rj="min",Aun={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Dve(e){return e in Aun}function g8e(e){return!!(e!=null&&e.encoding)}function Mh(e){return e&&(e.op==="count"||!!e.field)}function y8e(e){return e&&je(e)}function IN(e){return"row"in e||"column"in e}function zse(e){return!!e&&"header"in e}function Nj(e){return"facet"in e}function Iun(e){return e.param}function kun(e){return e&&!gt(e)&&"repeat"in e}function Pve(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function Vse(e){return"sort"in e}function zy({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(hn(e)&&e.bandPosition!==void 0)return e.bandPosition;if(et(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return ig("timeUnitBandPosition",n,r);if(ci(s))return .5}}function v8e({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=pl(e),u=Sr(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(et(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:ig("timeUnitBandSize",r,i)};if(ci(h)&&!bo(s))return{band:1}}if(Dk(r.type))return s?bo(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function b8e(e,t,n,r){return ci(e.bin)||e.timeUnit&&fu(e)&&e.type==="temporal"?zy({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function _8e(e){return e&&!!e.sort&&!e.field}function Dj(e){return e&&"condition"in e}function Pj(e){const t=e==null?void 0:e.condition;return!!t&&!je(t)&&et(t)}function kN(e){const t=e==null?void 0:e.condition;return!!t&&!je(t)&&hn(t)}function Run(e){const t=e==null?void 0:e.condition;return!!t&&(je(t)||vd(t))}function et(e){return e&&(!!e.field||e.aggregate==="count")}function uS(e){return e==null?void 0:e.type}function Ip(e){return e&&"datum"in e}function I0(e){return fu(e)&&!jL(e)||FL(e)}function Ove(e){return fu(e)&&e.type==="quantitative"&&!e.bin||FL(e)}function FL(e){return Ip(e)&&hr(e.datum)}function hn(e){return et(e)||Ip(e)}function fu(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function vd(e){return e&&"value"in e&&"value"in e}function L_(e){return e&&("scale"in e||"sort"in e)}function lS(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function w8e(e){return e&&"legend"in e}function E8e(e){return e&&("format"in e||"formatType"in e)}function Nun(e){return tl(e,["legend","axis","header","scale"])}function Dun(e){return"op"in e}function at(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(Oun(e))n=fBe("count");else{let o;if(!t.nofn)if(Dun(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;ci(a)?(o=CBe(a),i=(t.binSuffix??"")+(t.suffix??"")):u?xv(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):rg(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!$_(l)&&(o=Man(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?NT(n):t.expr?uBe(n,t.expr)+s:rf(n)+s}function jL(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return et(e)&&!!e.bin;case"temporal":return!1}throw new Error(MBe(e.type))}function Pun(e){var t;return L_(e)&&aS((t=e.scale)==null?void 0:t.type)}function Oun(e){return e.aggregate==="count"}function $un(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(ci(r))return`${n} (binned)`;if(i&&!$_(i)){const a=(o=yo(i))==null?void 0:o.unit;if(a)return`${n} (${Tj(a).join("-")})`}else if(s)return xv(s)?`${n} for max ${s.argmax}`:rg(s)?`${n} for min ${s.argmin}`:`${wN(s)} of ${n}`;return n}function Mun(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(xv(t))return`${i} for argmax(${t.argmax})`;if(rg(t))return`${i} for argmin(${t.argmin})`;const s=r&&!$_(r)?yo(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||ci(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const x8e=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return Mun(e);default:return $un(e,t)}};let S8e=x8e;function T8e(e){S8e=e}function Lun(){T8e(x8e)}function VE(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=Hse(e))==null?void 0:a.title;if(!et(e))return i??e.title;const s=e,o=r?qse(s,t):void 0;return n?ms(i,s.title,o):i??s.title??o}function Hse(e){if(lS(e)&&e.axis)return e.axis;if(w8e(e)&&e.legend)return e.legend;if(zse(e)&&e.header)return e.header}function qse(e,t){return S8e(e,t)}function BL(e){if(E8e(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=Hse(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function Fun(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Vse(e)&&je(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!xv(n)&&!rg(n))return"quantitative";if(L_(e)&&((s=e.scale)!=null&&s.type))switch(JW[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function np(e){if(et(e))return e;if(Pj(e))return e.condition}function zs(e){if(hn(e))return e;if(kN(e))return e.condition}function C8e(e,t,n,r={}){if(gt(e)||hr(e)||mv(e)){const i=gt(e)?"string":hr(e)?"number":"boolean";return Ze(jon(t,i,e)),{value:e}}return hn(e)?UL(e,t,n,r):kN(e)?{...e,condition:UL(e.condition,t,n,r)}:e}function UL(e,t,n,r){if(E8e(e)){const{format:i,formatType:s,...o}=e;if(Gb(s)&&!n.customFormatTypes)return Ze(Cve(t)),UL(o,t,n,r)}else{const i=lS(e)?"axis":w8e(e)?"legend":zse(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(Gb(o)&&!n.customFormatTypes)return Ze(Cve(t)),UL({...e,[i]:a},t,n,r)}}return et(e)?Wse(e,t,r):jun(e)}function jun(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=hr(n)?"quantitative":gt(n)?"nominal":O_(n)?"temporal":void 0,{...e,type:t}}function Wse(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!bse(r)&&!xv(r)&&!rg(r)&&(Ze(Uon(r)),delete a.aggregate),i&&(a.timeUnit=yo(i)),o&&(a.field=`${o}`),ci(s)&&(a.bin=Oj(s,t)),$o(s)&&!gs(t)&&Ze(ban(t)),fu(a)){const{type:u}=a,l=Han(u);u!==l&&(a.type=l),u!=="quantitative"&&TBe(r)&&(Ze(Bon(u,r)),a.type="quantitative")}else if(!bBe(t)){const u=Fun(a,t);a.type=u}if(fu(a)){const{compatible:u,warning:l}=Bun(a,t)||{};u===!1&&Ze(l)}if(Vse(a)&&gt(a.sort)){const{sort:u}=a;if(Dve(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&Dve(l))return{...a,sort:{encoding:l,order:"descending"}}}if(zse(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function Oj(e,t){return mv(e)?{maxbins:yve(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:yve(t)}:e}const pw={compatible:!0};function Bun(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Cm:case Am:case gj:return jL(e)?pw:{compatible:!1,warning:qon(t)};case Di:case xo:case vv:case DT:case dl:case Sp:case Tp:case EN:case xN:case yj:case Hb:case vj:case bj:case N_:case gf:case kd:case _j:return pw;case Nd:case sf:case Rd:case Dd:return n!==Wb?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:pw;case kg:case bv:case _v:case wv:case Ig:case Ag:case Cg:case Id:case xp:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:pw;case hl:case Ev:return!jL(e)&&!Pun(e)?{compatible:!1,warning:Won(t)}:pw;case iS:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:pw}}function cS(e){const{formatType:t}=BL(e);return t==="time"||!t&&Uun(e)}function Uun(e){return e&&(e.type==="temporal"||et(e)&&!!e.timeUnit)}function $j(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=yo(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return TN(e)?a=e.expr:Dt(e)?a=e.signal:O_(e)?(o=!0,a=qb(e)):(gt(e)||hr(e))&&o&&(a=`datetime(${qr(e)})`,Nan(s)&&(hr(e)&&e<1e4||gt(e)&&isNaN(Date.parse(e)))&&(a=qb({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:qr(e)}function A8e(e,t){const{type:n}=e;return t.map(r=>{const i=et(e)&&!$_(e.timeUnit)?e.timeUnit:void 0,s=$j(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function RN(e,t){return ci(e.bin)?Rg(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const $ve={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function NN(e){return e==null?void 0:e.condition}const I8e=["domain","grid","labels","ticks","title"],zun={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},k8e={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Vun={...k8e,style:1,labelExpr:1,encoding:1};function Mve(e){return!!Vun[e]}const Hun={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},R8e=Xe(Hun);function Ng(e){return"mark"in e}class Mj{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Ng(t)?Cun(t.mark)===this.name:!1}}function rb(e,t){const n=e&&e[t];return n?je(n)?zb(n,r=>!!r.field):et(n)||Pj(n):!1}function N8e(e,t){const n=e&&e[t];return n?je(n)?zb(n,r=>!!r.field):et(n)||Ip(n)||kN(n):!1}function D8e(e,t){if(gs(t)){const n=e[t];if((et(n)||Ip(n))&&(ZBe(n.type)||et(n)&&n.timeUnit)){const r=mse(t);return N8e(e,r)}}return!1}function Gse(e){return zb(qsn,t=>{if(rb(e,t)){const n=e[t];if(je(n))return zb(n,r=>!!r.aggregate);{const r=np(n);return r&&!!r.aggregate}}return!1})}function P8e(e,t){const n=[],r=[],i=[],s=[],o={};return Yse(e,(a,u)=>{if(et(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=Hse(a),m=p==null?void 0:p.title;let g=at(a,{forAs:!0});const y={...m?[]:{title:VE(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(xv(c)?(v="argmax",g=at({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):rg(c)?(v="argmin",g=at({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:g};l&&(b.field=l),s.push(b)}}else if(n.push(g),fu(a)&&ci(f)){if(r.push({bin:f,field:l,as:g}),n.push(at(a,{binSuffix:"end"})),RN(a,u)&&n.push(at(a,{binSuffix:"range"})),gs(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",bBe(u)||(y.type=Wb)}else if(d&&!$_(d)){i.push({timeUnit:d,field:l,as:g});const v=fu(a)&&a.type!==oS&&"time";v&&(u===EN||u===Hb?y.formatType=v:ton(u)?y.legend={formatType:v,...y.legend}:gs(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function qun(e,t,n){const r=ron(t,n);if(r){if(r==="binned"){const i=e[t===Id?Di:xo];return!!(et(i)&&et(e[t])&&$o(i.bin))}}else return!1;return!0}function Wun(e,t,n,r){const i={};for(const s of Xe(e))vBe(s)||Ze(Hon(s));for(let s of Qsn){if(!e[s])continue;const o=e[s];if(SN(s)){const a=Xsn(s),u=i[a];if(et(u)&&Van(u.type)&&et(o)&&!u.timeUnit){Ze(Fon(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Ze(Lon),s=gf),!qun(e,s,t)){Ze(Sj(s,t));continue}if(s===Ig&&t==="line"){const a=np(e[s]);if(a!=null&&a.aggregate){Ze(Von);continue}}if(s===dl&&(n?"fill"in e:"stroke"in e)){Ze(LBe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===xN||s===iS&&!je(o)&&!vd(o)||s===Hb&&je(o)){if(o){if(s===iS){const a=e[s];if(_8e(a)){i[s]=a;continue}}i[s]=mt(o).reduce((a,u)=>(et(u)?a.push(Wse(u,s)):Ze(QW(u,s)),a),[])}}else{if(s===Hb&&o===null)i[s]=null;else if(!et(o)&&!Ip(o)&&!vd(o)&&!Dj(o)&&!Dt(o)){Ze(QW(o,s));continue}i[s]=C8e(o,s,r)}}return i}function Lj(e,t){const n={};for(const r of Xe(e)){const i=C8e(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function Gun(e){const t=[];for(const n of Xe(e))if(rb(e,n)){const r=e[n],i=mt(r);for(const s of i)et(s)?t.push(s):Pj(s)&&t.push(s.condition)}return t}function Yse(e,t,n){if(e)for(const r of Xe(e)){const i=e[r];if(je(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function Yun(e,t,n,r){return e?Xe(e).reduce((i,s)=>{const o=e[s];return je(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function O8e(e,t){return Xe(t).reduce((n,r)=>{switch(r){case Di:case xo:case vj:case _j:case bj:case Id:case xp:case vv:case DT:case gf:case Ag:case kd:case Cg:case Rd:case Nd:case Dd:case sf:case EN:case hl:case N_:case Hb:return n;case iS:if(e==="line"||e==="trail")return n;case xN:case yj:{const i=t[r];if(je(i)||et(i))for(const s of mt(i))s.aggregate||n.push(at(s,{}));return n}case Ig:if(e==="trail")return n;case dl:case Sp:case Tp:case kg:case bv:case _v:case Ev:case wv:{const i=np(t[r]);return i&&!i.aggregate&&n.push(at(i,{})),n}}},[])}function Kun(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(je(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return je(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function tG(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${Kse(t)}`:"";return{field:o+t.field,type:t.type,title:Dt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=Gun(n).map(Nun);return{tooltip:[...i,...wh(s,Wn)]}}function Kse(e){const{title:t,field:n}=e;return ms(t,n)}function Xse(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=Kse(n);return $8e(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...gt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function $8e(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...tp(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...mv(e[t])?{}:e[t]}}]:[]}function M8e(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:CP(s,n),continuousAxisChannelDef2:CP(o,n),continuousAxisChannelDefError:CP(a,n),continuousAxisChannelDefError2:CP(u,n),continuousAxis:i}}function CP(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Ze(van(n,t)),r}else return e}function L8e(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(tp(n)&&n.orient)return n.orient;if(I0(i)){if(I0(s)){const o=et(i)&&i.aggregate,a=et(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return cS(s)&&!cS(i)?"horizontal":"vertical"}return"horizontal"}else{if(I0(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const zL="boxplot",Xun=["box","median","outliers","rule","ticks"],Qun=new Mj(zL,j8e);function F8e(e){return hr(e)?"tukey":e}function j8e(e,{config:t}){e={...e,encoding:Lj(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=tp(n)?n:{type:n};i&&Ze($Be("boxplot"));const u=a.extent??t.boxplot.extent,l=Sr("size",a,t),c=a.invalid,f=F8e(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:x}=Jun(e,u,t),S=NT(m.field),{color:C,size:I,...k}=b,R=ke=>Xse(a,g,m,ke,t.boxplot),O=R(k),P=R(b),$=(yt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",L=R({...k,...I?{size:I}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...C||{value:$}}}}),M=tG([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,b),B={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},U=f==="min-max"?M:tG([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,b),V=[...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:U}),...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:U}),...O({partName:"ticks",mark:B,positionPrefix:"lower_whisker",extraEncoding:U}),...O({partName:"ticks",mark:B,positionPrefix:"upper_whisker",extraEncoding:U})],D=[...f!=="tukey"?V:[],...P({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:M}),...L({partName:"median",mark:{type:"tick",invalid:c,...yt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:M})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:D};const z=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,j=`(${W} - ${z})`,q=`${z} - ${u} * ${j}`,G=`${W} + ${u} * ${j}`,te=`datum["${m.field}"]`,le={joinaggregate:B8e(m.field),groupby:y},fe={transform:[{filter:`(${q} <= ${te}) && (${te} <= ${G})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${S}`},{op:"max",field:m.field,as:`upper_whisker_${S}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${S}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${S}`},...v],groupby:y}],layer:V},{tooltip:de,...ye}=k,{scale:Ie,axis:pe}=m,qe=Kse(m),Ue=tl(pe,["title"]),vt=$8e(a,"outliers",t.boxplot,{transform:[{filter:`(${te} < ${q}) || (${te} > ${G})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...qe!==void 0?{title:qe}:{},...Ie!==void 0?{scale:Ie}:{},...Hr(Ue)?{}:{axis:Ue}},...ye,...C?{color:C}:{},...x?{tooltip:x}:{}}})[0];let it;const _e=[...d,...h,le];return vt?it={transform:_e,layer:[vt,fe]}:(it=fe,it.transform.unshift(..._e)),{...o,layer:[it,{transform:p,layer:D}]}}function B8e(e){const t=NT(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function Jun(e,t,n){const r=L8e(e,zL),{continuousAxisChannelDef:i,continuousAxis:s}=M8e(e,r,zL),o=i.field,a=NT(o),u=F8e(t),l=[...B8e(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=Kun(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:b}=P8e(p,n),w=r==="vertical"?"horizontal":"vertical",E=r,x=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:x,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:h}}const Qse="errorbar",Zun=["ticks","rule"],eln=new Mj(Qse,U8e);function U8e(e,{config:t}){e={...e,encoding:Lj(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=z8e(e,Qse,t);delete s.size;const c=Xse(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function tln(e,t){const{encoding:n}=e;if(nln(n))return{orient:L8e(e,t),inputType:"raw"};const r=rln(n),i=iln(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(hn(a)&&hn(u))throw new Error(`${t} cannot have both x2 and y2`);if(hn(a)){if(I0(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(hn(u)){if(I0(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(hn(u)&&!hn(a))throw new Error(`${t} cannot have xError2 without xError`);if(hn(c)&&!hn(l))throw new Error(`${t} cannot have yError2 without yError`);if(hn(a)&&hn(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(hn(a)){if(I0(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(hn(l)){if(I0(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function nln(e){return(hn(e.x)||hn(e.y))&&!hn(e.x2)&&!hn(e.y2)&&!hn(e.xError)&&!hn(e.xError2)&&!hn(e.yError)&&!hn(e.yError2)}function rln(e){return hn(e.x2)||hn(e.y2)}function iln(e){return hn(e.xError)||hn(e.xError2)||hn(e.yError)||hn(e.yError2)}function z8e(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=tp(r)?r:{type:r};s&&Ze($Be(t));const{orient:l,inputType:c}=tln(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=M8e(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=sln(u,f,d,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:E,[m==="x"?"xError":"yError"]:x,[m==="x"?"xError2":"yError2"]:S,...C}=i,{bins:I,timeUnits:k,aggregate:R,groupby:O,encoding:P}=P8e(C,n),$=[...R,...g],L=c!=="raw"?[]:O,M=tG(v,f,P,b);return{transform:[...a.transform??[],...I,...k,...$.length===0?[]:[{aggregate:$,groupby:L}],...y],groupby:L,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:P,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:M}}function sln(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Ze(yan(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:wN(h)},{fieldPrefix:"upper_",titlePrefix:Lve(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:Lve(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:VE({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:VE({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:VE({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Ze(gan(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:Vb(Vb(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function Lve(e,t,n){return`${wN(e)} ${n} ${t}`}const Jse="errorband",oln=["band","borders"],aln=new Mj(Jse,V8e);function V8e(e,{config:t}){e={...e,encoding:Lj(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=z8e(e,Jse,t),l=o,c=Xse(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Ze(Ive("interpolate")):l.tension&&Ze(Ive("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const H8e={};function Zse(e,t,n){const r=new Mj(e,t);H8e[e]={normalizer:r,parts:n}}function uln(){return Xe(H8e)}Zse(zL,j8e,Xun);Zse(Qse,U8e,Zun);Zse(Jse,V8e,oln);const lln=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],q8e={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},W8e={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},cln=Xe(q8e),fln=Xe(W8e),dln={header:1,headerRow:1,headerColumn:1,headerFacet:1},G8e=Xe(dln),Y8e=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],hln={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},pln={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},bd="_vgsid_",mln={point:{on:"click",fields:[bd],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function eoe(e){return e==="legend"||!!(e!=null&&e.legend)}function o7(e){return eoe(e)&&yt(e)}function toe(e){return!!(e!=null&&e.select)}function K8e(e){const t=[];for(const n of e||[]){if(toe(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function gln(e){return Fj(e)||roe(e)||noe(e)}function noe(e){return"concat"in e}function Fj(e){return"vconcat"in e}function roe(e){return"hconcat"in e}function X8e({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function rp(e){return yt(e)&&e.step!==void 0}function Fve(e){return e.view||e.width||e.height}const jve=20,yln={align:1,bounds:1,center:1,columns:1,spacing:1},vln=Xe(yln);function bln(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(Nj(e)&&!IN(e.facet)||noe(e))&&(i.columns=o),Fj(e)&&(i.columns=1);for(const a of vln)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=hr(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function nG(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function VL(e,t){const n=HL(e,t);return rp(n)?n.step:Q8e}function HL(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return ms(n,{step:e.step})}const Q8e=20,_ln={continuousWidth:200,continuousHeight:200,step:Q8e},wln={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:_ln,mark:_un,arc:{},area:{},bar:xun,circle:{},geoshape:{},image:{},line:{},point:{},rect:Sun,rule:{color:"black"},square:{},text:{color:"black"},tick:Tun,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:Kan,projection:{},legend:hln,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:mln,style:{},title:{},facet:{spacing:jve},concat:{spacing:jve},normalizedNumberFormat:".0%"},Bp=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Bve={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Uve={blue:Bp[0],orange:Bp[1],red:Bp[2],teal:Bp[3],green:Bp[4],yellow:Bp[5],purple:Bp[6],pink:Bp[7],brown:Bp[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Eln(e={}){return{signals:[{name:"color",value:yt(e)?{...Uve,...e}:Uve}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function xln(e){return{signals:[{name:"fontSize",value:yt(e)?{...Bve,...e}:Bve}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function Sln(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function J8e(e){const t=Xe(e||{}),n={};for(const r of t){const i=e[r];n[r]=NN(i)?IBe(i):Nl(i)}return n}function Tln(e){const t=Xe(e),n={};for(const r of t)n[r]=J8e(e[r]);return n}const Cln=[...p8e,...R8e,...G8e,"background","padding","legend","lineBreak","scale","style","title","view"];function Z8e(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=_T({},on(wln),n?Sln(n):{},t?Eln(t):{},r?xln(r):{},s||{});i&&wT(o,"selection",i,!0);const a=tl(o,Cln);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=Nl(o[u]));for(const u of p8e)o[u]&&(a[u]=Lu(o[u]));for(const u of R8e)o[u]&&(a[u]=J8e(o[u]));for(const u of G8e)o[u]&&(a[u]=Lu(o[u]));return o.legend&&(a.legend=Lu(o.legend)),o.scale&&(a.scale=Lu(o.scale)),o.style&&(a.style=Tln(o.style)),o.title&&(a.title=Lu(o.title)),o.view&&(a.view=Lu(o.view)),a}const Aln=new Set(["view",...pun]),Iln=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],kln={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...bun};function Rln(e){e=on(e);for(const t of Iln)delete e[t];if(e.axis)for(const t in e.axis)NN(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of lln)delete e.legend[t];if(e.mark){for(const t of Nve)delete e.mark[t];e.mark.tooltip&&yt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(K8e(e.params)),delete e.params);for(const t of Aln){for(const r of Nve)delete e[t][r];const n=kln[t];if(n)for(const r of n)delete e[t][r];Dln(e,t)}for(const t of uln())delete e[t];Nln(e);for(const t in e)yt(e[t])&&Hr(e[t])&&delete e[t];return Hr(e)?void 0:e}function Nln(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=ABe(e.title);Hr(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Hr(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Hr(r)?delete e.title:e.title=r}function Dln(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Hr(s)||(e.style[n??t]=s),delete e[t]}function jj(e){return"layer"in e}function Pln(e){return"repeat"in e}function Oln(e){return!je(e.repeat)&&e.repeat.layer}class ioe{map(t,n){return Nj(t)?this.mapFacet(t,n):Pln(t)?this.mapRepeat(t,n):roe(t)?this.mapHConcat(t,n):Fj(t)?this.mapVConcat(t,n):noe(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(jj(t))return this.mapLayer(t,n);if(Ng(t))return this.mapUnit(t,n);throw new Error(_se(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const $ln={zero:1,center:1,normalize:1};function Mln(e){return e in $ln}const Lln=new Set([f8e,Aj,Cj,LL,kj,Bse,Use,Ij,d8e,jse]),Fln=new Set([Aj,Cj,f8e]);function mw(e){return et(e)&&uS(e)==="quantitative"&&!e.bin}function zve(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(et(o)&&et(a))if(mw(o)&&mw(a)){if(o.stack)return t;if(a.stack)return i;const u=et(o)&&!!o.aggregate,l=et(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(mw(o))return t;if(mw(a))return i}else{if(mw(o))return s&&n==="vertical"?void 0:t;if(mw(a))return s&&n==="horizontal"?void 0:i}}function jln(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function e9e(e,t){var m,g;const n=tp(e)?e:{type:e},r=n.type;if(!Lln.has(r))return null;const i=zve(t,"x",n)||zve(t,"theta",n);if(!i)return null;const s=t[i],o=et(s)?at(s,{}):void 0,a=jln(i),u=[],l=new Set;if(t[a]){const y=t[a],v=et(y)?at(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=et(f)?at(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=Jsn.reduce((y,v)=>{if(v!=="tooltip"&&rb(t,v)){const b=t[v];for(const w of mt(b)){const E=np(w);if(E.aggregate)continue;const x=at(E,{});(!x||!l.has(x))&&y.push({channel:v,fieldDef:E})}}return y},[]);let p;return s.stack!==void 0?mv(s.stack)?p=s.stack?"zero":null:p=s.stack:Fln.has(r)&&(p="zero"),!p||!Mln(p)||Gse(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==nl.LINEAR&&s!=null&&s.stack&&Ze(han(s.scale.type)),hn(t[Cp(i)])?(s.stack!==void 0&&Ze(dan(i)),null):(et(s)&&s.aggregate&&!con.has(s.aggregate)&&Ze(pan(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:M_(r),stackBy:h,offset:p}))}function t9e(e,t,n){const r=Lu(e),i=Sr("orient",r,n);if(r.orient=Vln(r.type,t,i),i!==void 0&&i!==r.orient&&Ze(Xon(r.orient,i)),r.type==="bar"&&r.orient){const u=Sr("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:Eun[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=Sr("opacity",r,n),o=Sr("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=Uln(r.type,t)),Sr("cursor",r,n)===void 0&&(r.cursor=Bln(r,t,n)),r}function Bln(e,t,n){return t.href||e.href||Sr("href",e,n)?"pointer":e.cursor}function Uln(e,t){if(Gn([kj,jse,Bse,Use],e)&&!Gse(t))return .7}function zln(e,t,{graticule:n}){if(n)return!1;const r=ig("filled",e,t),i=e.type;return ms(r,i!==kj&&i!==Ij&&i!==LL)}function Vln(e,t,n){switch(e){case kj:case Bse:case Use:case d8e:case dun:case fun:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case Aj:if(et(r)&&($o(r.bin)||et(i)&&i.aggregate&&!r.aggregate))return"vertical";if(et(i)&&($o(i.bin)||et(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(et(r)&&r.type===Wb&&!ci(r.bin)||FL(r))&&et(i)&&$o(i.bin)?"horizontal":"vertical";if(!o)return(et(i)&&i.type===Wb&&!ci(i.bin)||FL(i))&&et(r)&&$o(r.bin)?"vertical":"horizontal"}case LL:if(s&&!(et(r)&&$o(r.bin))&&o&&!(et(i)&&$o(i.bin)))return;case Cj:if(o)return et(i)&&$o(i.bin)?"horizontal":"vertical";if(s)return et(r)&&$o(r.bin)?"vertical":"horizontal";if(e===LL){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case Ij:case jse:{const a=Ove(r),u=Ove(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=fu(r)&&r.type===oS,c=fu(i)&&i.type===oS;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function Hln(e){const{point:t,line:n,...r}=e;return Xe(r).length>1?r:r.type}function qln(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:tl(e[t],["point","line"])});return e}function a7(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?yt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?yt(t.point)?t.point:{}:void 0}function Vve(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class Wln{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Ng(t)){const{mark:r,encoding:i}=t,s=tp(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!a7(s,n[s.type],i);case"area":return!!a7(s,n[s.type],i)||!!Vve(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=Lj(l,i),d=tp(a)?a:{type:a},h=a7(d,i[d.type],f),p=d.type==="area"&&Vve(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:Hln({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:tl(f,["shape"])}],g=e9e(t9e(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:b}=g;y={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return y=tl(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...nS(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...nS(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:qln(i)})}}function Gln(e,t){return t?IN(e)?r9e(e,t):n9e(e,t):e}function u7(e,t){return t?r9e(e,t):e}function rG(e,t,n){const r=t[e];if(kun(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Ze(Ron(r.repeat));return}return t}function n9e(e,t){if(e=rG("field",e,t),e!==void 0){if(e===null)return null;if(Vse(e)&&Mh(e.sort)){const n=rG("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Hve(e,t){if(et(e))return n9e(e,t);{const n=rG("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function qve(e,t){if(hn(e)){const n=Hve(e,t);if(n)return n;if(Dj(e))return{condition:e.condition}}else{if(kN(e)){const n=Hve(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function r9e(e,t){const n={};for(const r in e)if(zt(e,r)){const i=e[r];if(je(i))n[r]=i.map(s=>qve(s,t)).filter(s=>s);else{const s=qve(i,t);s!==void 0&&(n[r]=s)}}return n}class Yln{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Ng(t)){const{encoding:n,mark:r}=t;if(r==="line"||tp(r)&&r.type==="line")for(const i of Ksn){const s=D_(i),o=n[s];if(n[i]&&(et(o)&&!$o(o.bin)||Ip(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Ze(Kon(!!i.x2,!!i.y2)),r({...t,mark:yt(s)?{...s,type:"rule"}:"rule"},n)}}class Kln extends ioe{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[Qun,eln,aln,new Wln,new Yln]}map(t,n){if(Ng(t)){const r=rb(t.encoding,Cm),i=rb(t.encoding,Am),s=rb(t.encoding,gj);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=u7(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return Oln(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Ni(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!je(r)&&t.columns&&(t=tl(t,["columns"]),Ze(Sve("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!je(r)&&r.row||[u?u.row:null],f=!je(r)&&r.column||[u?u.column:null],d=je(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(je(r)?`${Ni(p)}`:(r.row?`row_${Ni(m)}`:"")+(r.column?`column_${Ni(g)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push(tl(b,["data"]))}const h=je(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return IN(r)&&t.columns&&(t=tl(t,["columns"]),Ze(Sve("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=Gve({parentProjection:o,projection:i}),l=Wve({parentEncoding:s,encoding:u7(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=u7(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Ze(Gon([...r?[Cm]:[],...i?[Am]:[]]));const o={},a={};for(const u of[Cm,Am]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:Gln(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:Wve({parentEncoding:n,encoding:s,layer:!0}),parentProjection:Gve({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function Wve({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Xe(e),...Xe(t)]);for(const s of i){const o=t[s],a=e[s];if(hn(o)){const u={...a,...o};r[s]=u}else kN(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||vd(a)||Dt(a)||hn(a)||je(a))&&(r[s]=a)}}else r=t;return!r||Hr(r)?void 0:r}function Gve(e){const{parentProjection:t,projection:n}=e;return t&&n&&Ze(Mon({parentProjection:t,projection:n})),n??t}function soe(e){return"filter"in e}function Xln(e){return(e==null?void 0:e.stop)!==void 0}function i9e(e){return"lookup"in e}function Qln(e){return"data"in e}function Jln(e){return"param"in e}function Zln(e){return"pivot"in e}function ecn(e){return"density"in e}function tcn(e){return"quantile"in e}function ncn(e){return"regression"in e}function rcn(e){return"loess"in e}function icn(e){return"sample"in e}function scn(e){return"window"in e}function ocn(e){return"joinaggregate"in e}function acn(e){return"flatten"in e}function ucn(e){return"calculate"in e}function s9e(e){return"bin"in e}function lcn(e){return"impute"in e}function ccn(e){return"timeUnit"in e}function fcn(e){return"aggregate"in e}function dcn(e){return"stack"in e}function hcn(e){return"fold"in e}function pcn(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function mcn(e){return e.map(t=>soe(t)?{filter:UE(t.filter,zan)}:t)}class gcn extends ioe{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=Yve(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=Yve(t,n),t.encoding){const r={};for(const[i,s]of By(t.encoding))r[i]=o9e(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:By(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of Wo(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function Yve(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(soe(s))return{filter:iG(s,t)};if(s9e(s)&&P_(s.bin))return{...s,bin:a9e(s.bin)};if(i9e(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function o9e(e,t){var r,i;const n=on(e);if(et(n)&&P_(n.bin)&&(n.bin=a9e(n.bin)),L_(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(Dj(n))if(je(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:iG(s,t)}});else{const{selection:s,param:o,test:a,...u}=o9e(n.condition,t);n.condition=o?n.condition:{...u,test:iG(n.condition,t)}}return n}function a9e(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function iG(e,t){const n=r=>UE(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):UE(e.test||e.filter,r=>r.selection?n(r.selection):r)}class sG extends ioe{map(t,n){const r=n.selections??[];if(t.params&&!Ng(t)){const i=[];for(const s of t.params)toe(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(gt(a)&&(a===t.name||i.includes(a))||je(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=sG.prototype[e];sG.prototype[e]=function(n,r){return t.call(this,n,ycn(n,r))}}function ycn(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function u9e(e,t){t===void 0&&(t=Z8e(e.config));const n=wcn(e,t),{width:r,height:i}=e,s=Ecn(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const vcn=new Kln,bcn=new gcn,_cn=new sG;function wcn(e,t={}){const n={config:t};return _cn.map(vcn.map(bcn.map(e,n),n),n)}function Kve(e){return gt(e)?{type:e}:e??{}}function Ecn(e,t,n){let{width:r,height:i}=t;const s=Ng(e)||jj(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Ze(_ve("width")),r=void 0),i=="container"&&(Ze(_ve("height")),i=void 0));const a={type:"pad",...o,...n?Kve(n.autosize):{},...Kve(e.autosize)};if(a.type==="fit"&&!s&&(Ze(bon),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Ze(wve("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Ze(wve("height")),!Bl(a,{type:"pad"}))return a}function xcn(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function Scn(e){return e?`fit-${wj(e)}`:"fit"}const Tcn=["background","padding"];function Xve(e,t){const n={};for(const r of Tcn)e&&e[r]!==void 0&&(n[r]=Nl(e[r]));return t&&(n.params=e.params),n}class Dg{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Dg(on(this.explicit),on(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return ms(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Xe(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Jd(e){return{explicit:!0,value:e}}function xl(e){return{explicit:!1,value:e}}function l9e(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:Bj(t,n,r,i)}}function Bj(e,t,n,r){return e.explicit&&t.explicit&&Ze(san(n,r,e.value,t.value)),e}function Vy(e,t,n,r,i=Bj){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Bl(e.value,t.value)?e:i(e,t,n,r)}class Ccn extends Dg{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function fS(e){return"url"in e}function Pk(e){return"values"in e}function c9e(e){return"name"in e&&!fS(e)&&!Pk(e)&&!ry(e)}function ry(e){return e&&(f9e(e)||d9e(e)||ooe(e))}function f9e(e){return"sequence"in e}function d9e(e){return"sphere"in e}function ooe(e){return"graticule"in e}var Ti;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(Ti||(Ti={}));function h9e(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=rf(i.field),i}function Kb(e,t=!0,n=Na){if(je(e)){const r=e.map(i=>Kb(i,t,n));return t?`[${r.join(", ")}]`:r}else if(O_(e))return n(t?qb(e):Ran(e));return t?n(qr(e)):e}function Acn(e,t){for(const n of Wo(e.component.selection??{})){const r=n.name;let i=`${r}${qy}, ${n.resolve==="global"?"true":`{unit: ${ib(e)}}`}`;for(const s of Hj)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+sfn,on:[{events:{signal:n.name+qy},update:`modify(${rt(n.name+Xb)}, ${i})`}]})}return aoe(t)}function Icn(e,t){if(e.component.selection&&Xe(e.component.selection).length){const n=rt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:yv("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return aoe(t)}function kcn(e,t){let n=!1;for(const r of Wo(e.component.selection??{})){const i=r.name,s=rt(i+Xb);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${N9e}(${s}, ${rt(a)}${u}`})}n=!0;for(const a of Hj)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),aoe(t)}function Rcn(e,t){const n=[...t],r=ib(e,{escape:!1});for(const i of Wo(e.component.selection??{})){const s={name:i.name+Xb};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:bd}}]),i.init){const a=i.project.items.map(h9e);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[bd]:Kb(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:Kb(u,!1)}))}n.filter(a=>a.name===i.name+Xb).length||n.push(s)}return n}function p9e(e,t){for(const n of Wo(e.component.selection??{}))for(const r of Hj)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function Ncn(e,t){for(const n of e.children)Ji(n)&&(t=p9e(n,t));return t}function Dcn(e,t,n,r){const i=M9e(e,t.param,t);return{signal:ac(n.get("type"))&&je(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function aoe(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Ur{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Ze(Pon);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class rl extends Ur{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${cBe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function l7(e){return e.as!==void 0}function Qve(e){return`${e}_end`}class Lh extends Ur{clone(){return new Lh(null,on(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if($_(u)){if(Ji(n)){const{mark:c,markDef:f,config:d}=n,h=zy({fieldDef:s,markDef:f,config:d});(Dk(c)||h)&&(l={timeUnit:yo(u),field:a})}}else l={as:at(s,{forAs:!0}),field:a,timeUnit:u};if(Ji(n)){const{mark:c,markDef:f,config:d}=n,h=zy({fieldDef:s,markDef:f,config:d});Dk(c)&&gs(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[Wn(l)]=l)}return i},{});return Hr(r)?null:new Lh(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=yo(r),o={...i,timeUnit:s};return new Lh(t,{[Wn(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of By(this.timeUnits)){const s=l7(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Wo(this.timeUnits).map(t=>l7(t)?t.as:Qve(t.field)))}dependentFields(){return new Set(Wo(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Wn(this.timeUnits)}`}assemble(){const t=[];for(const n of Wo(this.timeUnits)){const{rectBandPosition:r}=n,i=yo(n.timeUnit);if(l7(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:rf(s),type:"timeunit",...a?{units:Tj(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...Jve(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=m9e({timeUnit:i,field:o}),u=Qve(o);t.push({type:"formula",expr:a,as:u}),t.push(...Jve([o,u],r,i))}}return t}}const Uj="offsetted_rect_start",zj="offsetted_rect_end";function m9e({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=WBe(r),{part:o,step:a}=XBe(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function Jve([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:Zve([m9e({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${Uj}`},{type:"formula",expr:Zve([i,s],n+.5),as:`${e}_${zj}`}]}return[]}function Zve([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const DN="_tuple_fields";class Pcn{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Ocn={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new Pcn),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=Ni(`${r}_${g}`);for(let v=1;a.has(y);v++)y=Ni(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?mt(n.value):null;let{fields:d,encodings:h}=yt(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(yt(p))for(const m of Xe(p))Ysn(m)?(h||(h=[])).push(m):l==="interval"?(Ze(kon),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Ze(_on(p,m.aggregate));continue}else if(!g){Ze(xve(p));continue}if(m.timeUnit&&!$_(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[Wn(y)]=y}if(!s[g]){const y=l==="interval"&&Rg(p)&&ac(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===bd,gBe(p)?(v.geoChannel=p,v.channel=mBe(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else Ze(xve(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===bd}f&&(t.init=f.map(p=>i.items.map(m=>yt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Hr(o)||(i.timeUnit=new Lh(null,o))},signals:(e,t,n)=>{const r=t.name+DN;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(h9e)})}},Im={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Rg(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Ze(Son),!s||!ac(o)){Ze(xon);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||e1e(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(N9e)>=0)i.update=`{${r.map(o=>`${rt(rf(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${rt(rf(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!e1e(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function oG(e,t){return`domain(${rt(e.scaleName(t))})`}function e1e(e){return e.parent&&FT(e.parent)&&!e.parent.parent}const HE="_brush",g9e="_scale_trigger",BC="geo_interval_init_tick",y9e="_init",$cn="_center",Mcn={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...yt(n.select)?n.select:{}};i.fields=[bd],i.encodings||(i.encodings=n.value?Xe(n.value):[Nd,Rd]),n.select={type:"interval",...i}}if(t.translate&&!Im.defined(t)){const i=`!event.item || event.item.mark.name !== ${rt(t.name+HE)}`;for(const s of t.events){if(!s.between){Ze(`${s} is not an ordered event stream for interval selections.`);continue}const o=mt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+qy,s=Wo(t.project.hasChannel).filter(a=>a.channel===Di||a.channel===xo),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(Lcn(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=rt(e.projectionName()),u=e.projectionName()+$cn,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=E=>e.getSizeSignalRef(E).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+y9e,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(x=>x.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${rt(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${ib(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,w=s.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:BC}]:[]],update:b}]})}else{if(!Im.defined(t)){const l=r+g9e,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=rt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=ac(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${ib(e)}, fields: ${r+DN}, values`;return n.concat({name:i,...o?{init:`{${u}: ${Kb(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Ji(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===BC).length||n.unshift({name:BC,value:null,on:[{events:"timer{1}",update:`${BC} === null ? {} : ${BC}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${rt(t.name+Xb)})`;if(Im.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of Xe(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${ib(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=Xe(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+HE}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+HE,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function Lcn(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=rt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===Di?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=Im.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:Kb(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+g9e},update:ac(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:Kb(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===Di?0:1,h=t.name+y9e,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const Fcn={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+DN,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Wo(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+HE):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${ib(e)}, `;if(t.project.hasSelectionId)l+=`${bd}: ${o}[${rt(bd)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${rt(e.vgField(d.channel,{}))}], ${o}[${rt(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${rt(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+qy,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function OT(e,t,n,r){const i=Dj(t)&&t.condition,s=r(t);if(i){const a=mt(i).map(u=>{const l=r(u);if(Iun(u)){const{param:c,empty:f}=u;return{test:$9e(e,{param:c,empty:f}),...l}}else return{test:GL(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function uoe(e,t="text"){const n=e.encoding[t];return OT(e,n,t,r=>Vj(r,e.config))}function Vj(e,t,n="datum"){if(e){if(vd(e))return mi(e.value);if(hn(e)){const{format:r,formatType:i}=BL(e);return Fse({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function v9e(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(je(o))return{tooltip:t1e({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return OT(e,o,"tooltip",u=>{const l=Vj(u,i,a);if(l)return l;if(u===null)return;let c=Sr("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),gt(c))return{value:c};if(yt(c))return Dt(c)?c:c.content==="encoding"?t1e(n,s,i,t):{signal:a}})}}function b9e(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=D_(f),h=fu(c)?c:{...c,type:e[d].type},p=h.title||qse(h,i),m=mt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(gs(f)){const y=f==="x"?"x2":"y2",v=np(e[y]);if($o(h.bin)&&v){const b=at(h,{expr:o}),w=at(v,{expr:o}),{format:E,formatType:x}=BL(h);g=AN(b,w,E,x,i),s[y]=!0}}if((gs(f)||f===gf||f===kd)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=BL(h);g=Fse({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=Vj(h,i,o).signal),a.push({channel:f,key:m,value:g})}Yse(e,(c,f)=>{et(c)?u(c,f):Pj(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function t1e(e,t,n,{reactiveGeom:r}={}){const i=b9e(e,t,n,{reactiveGeom:r}),s=By(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function jcn(e){const{markDef:t,config:n}=e,r=Sr("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...Bcn(e),...Ucn(e)}}function Bcn(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Sr("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in gon?{}:{ariaRoleDescription:{value:t}}}function Ucn(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return OT(e,s,"description",u=>Vj(u,e.config));const o=Sr("description",n,r);if(o!=null)return{description:mi(o)};if(r.aria===!1)return{};const a=b9e(t,i,r);if(!Hr(a))return{description:{signal:By(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function oo(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=Sr(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=mi(u)));const l=i[e];return OT(t,l,o??e,c=>Lse({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function _9e(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??Sr("filled",n,i),a=Gn(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=Sr(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=Sr(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:mi(u)}:{},...l?{stroke:mi(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Ze(LBe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...oo("color",e,{vgChannel:c,defaultValue:o?u:l}),...oo("fill",e,{defaultValue:r.fill?u:void 0}),...oo("stroke",e,{defaultValue:r.stroke?l:void 0})}}function zcn(e){const{encoding:t,mark:n}=e,r=t.order;return!M_(n)&&vd(r)?OT(e,r,"zindex",i=>mi(i.value)):{}}function dS({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:Lse({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:mi(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function Ea(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[Cp(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=dS({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=loe({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&gs(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:Vcn({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function Vcn(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(hn(n)&&i&&t===i.fieldChannel){if(et(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return ML({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return nb(n,r,{suffix:"end"},{offset:s})}return $se(e)}function loe({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=D_(n),u=Uy(n),l=Sr(n,s,o,{vgChannel:u});if(l!==void 0)return L2(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!Gn([nl.LOG,nl.TIME,nl.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[pl(n)],mult:.5}}}}const Hcn={left:"x",center:"xc",right:"x2"},qcn={top:"y",middle:"yc",bottom:"y2"};function w9e(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Uy(e);const i=e==="x"?"align":"baseline",s=Sr(i,t,n);let o;return Dt(s)?(Ze(Yon(i)),o=void 0):o=s,e==="x"?Hcn[o||(r==="top"?"left":"center")]:qcn[o||r]}function qL(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?E9e(e,t,{defaultPos:n,defaultPos2:r}):Ea(e,t,{defaultPos:n})}function E9e(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=Cp(e),a=pl(e),u=Wcn(t,r,o),l=u[a]?w9e(e,i,s):Uy(e);return{...Ea(e,t,{defaultPos:n,vgChannel:l}),...u}}function Wcn(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=D_(n),l=pl(n),c=Uy(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?dS({channel:n,markDef:s,encoding:r,model:e}):dS({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=pl(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=Gcn({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:AP(n,s)||AP(n,{[n]:OL(n,s,a.style),[l]:OL(l,s,a.style)})||AP(n,a[i])||AP(n,a.mark)||{[c]:loe({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function Gcn({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return hn(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?nb(t,s,{suffix:"start"},{offset:u}):$se({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function AP(e,t){const n=pl(e),r=Uy(e);if(t[r]!==void 0)return{[r]:L2(e,t[r])};if(t[e]!==void 0)return{[r]:L2(e,t[e])};if(t[n]){const i=t[n];if(Yb(i))Ze(zon(n));else return{[n]:L2(e,i)}}}function Hy(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=Cp(t),a=pl(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??Sr("size",i,n,{vgChannel:a}),p=_Be(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return et(u)&&(ci(u.bin)||$o(u.bin)||u.timeUnit&&!l)&&!(h&&!Yb(h))&&!r[p]&&!bo(f)?Xcn({fieldDef:u,fieldDef2:l,channel:t,model:e}):(hn(u)&&bo(f)||m)&&!l?Kcn(u,t,e):E9e(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Ycn(e,t,n,r,i,s,o){if(Yb(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=ig("minBandSize",{type:o},r);return{signal:c?`max(${Xf(c)}, ${l})`:l}}else i.band!==1&&(Ze(Jon(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Dt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(Sv(u)&&hr(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=ms(u,o==="bar"?l:c);if(Dt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(hr(f))return{signal:`${1-f} * ${e}`}}return{value:VL(r.view,e)-2}}function Kcn(e,t,n){var I,k;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=pl(t),f=Cp(t),d=_Be(t),h=n.scaleName(d),p=n.getScaleComponent(mse(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=oo("size",n,{vgChannel:c,defaultRef:mi(r.size)}):Ze(nan(r.type)));const y=!!g,v=v8e({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(I=l||p)==null?void 0:I.get("type"),useVlSizeChannel:m});g=g||{[c]:Ycn(c,h||u,p||l,s,v,!!e,r.type)};const b=((k=l||p)==null?void 0:k.get("type"))==="band"&&Yb(v)&&!y?"top":"middle",w=w9e(t,r,s,b),E=w==="xc"||w==="yc",{offset:x,offsetType:S}=dS({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),C=$se({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:x,defaultRef:loe({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:E?S==="encoding"?0:.5:Dt(v)?{signal:`(1-${v})/2`}:Yb(v)?(1-v.band)/2:0});if(c)return{[w]:C,...g};{const R=Uy(f),O=g[c],P=x?{...O,offset:x}:O;return{[w]:C,[R]:je(C)?[C[0],{...C[1],offset:P}]:{...C,offset:P}}}}function n1e(e,t,n,r,i,s,o){if(pBe(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Dt(n)||Dt(i)||Dt(r)||s){const l=Xf(n),c=Xf(i),f=Xf(r),d=Xf(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function Xcn({fieldDef:e,fieldDef2:t,channel:n,model:r}){var k;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=v8e({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(k=r.component.axes[n])==null?void 0:k[0],h=(d==null?void 0:d.get("translate"))??.5,p=gs(n)?Sr("binSpacing",s,i)??0:0,m=Cp(n),g=Uy(n),y=Uy(m),v=ig("minBandSize",s,i),{offset:b}=dS({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=dS({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),E=aun({fieldDef:e,scaleName:u}),x=n1e(n,p,c,h,b,v,E),S=n1e(m,p,c,h,w??b,v,E),C=Dt(f)?{signal:`(1-${f.signal})/2`}:Yb(f)?(1-f.band)/2:.5,I=zy({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(ci(e.bin)||e.timeUnit){const R=e.timeUnit&&I!==.5;return{[y]:r1e({fieldDef:e,scaleName:u,bandPosition:C,offset:S,useRectOffsetField:R}),[g]:r1e({fieldDef:e,scaleName:u,bandPosition:Dt(C)?{signal:`1-${C.signal}`}:1-C,offset:x,useRectOffsetField:R})}}else if($o(e.bin)){const R=nb(e,u,{},{offset:S});if(et(t))return{[y]:R,[g]:nb(t,u,{},{offset:x})};if(P_(e.bin)&&e.bin.step)return{[y]:R,[g]:{signal:`scale("${u}", ${at(e,{expr:"datum"})} + ${e.bin.step})`,offset:x}}}Ze(BBe(m))}function r1e({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return ML({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:Uj,endSuffix:zj}:{}})}const Qcn=new Set(["aria","width","height"]);function yf(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?_9e(e):{};return{...Jcn(e.markDef,t),...i1e(e,"fill",n),...i1e(e,"stroke",r),...oo("opacity",e),...oo("fillOpacity",e),...oo("strokeOpacity",e),...oo("strokeWidth",e),...oo("strokeDash",e),...zcn(e),...v9e(e),...uoe(e,"href"),...jcn(e)}}function i1e(e,t,n){const{config:r,mark:i,markDef:s}=e;if(Sr("invalid",s,r)==="hide"&&n&&!M_(i)){const a=Zcn(e,{invalid:!0,channels:Ej});if(a)return{[t]:[{test:a,value:null},...mt(n)]}}return n?{[t]:n}:{}}function Jcn(e,t){return mon.reduce((n,r)=>(!Qcn.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=mi(e[r])),n),{})}function Zcn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&ac(u)&&(s[l]=!0)}return s},{}),i=Xe(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Mse(o,t)).join(` ${s} `)}}function coe(e){const{config:t,markDef:n}=e;if(Sr("invalid",n,t)){const i=efn(e,{channels:Ap});if(i)return{defined:{signal:i}}}return{}}function efn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&ac(l)&&(s[c]=!0)}return s},{}),i=Xe(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Mse(o,t)).join(` ${s} `)}}function s1e(e,t){if(t!==void 0)return{[e]:mi(t)}}const c7="voronoi",x9e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(c7)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(M_(s))return Ze(won(s)),n;const o={name:e.getName(c7),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...v9e(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(c7)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},S9e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!eoe(e.bind),parse:(e,t,n)=>D9e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=x9e.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Ni(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:Kb(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${rt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+qy)[0],o=r+DN,a=i.items.map(l=>Ni(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},WL="_toggle",T9e={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+WL,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+qy,r=t.name+WL;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${ib(e)}}, `)+`${r} ? ${n} : null`}},tfn={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=gt(t.clear)?yv(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(S9e.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Ni(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+qy);r(i,"null"),T9e.defined(t)&&(i=n.findIndex(s=>s.name===t.name+WL),r(i,"false"))}return n}},C9e={defined:e=>{const t=e.resolve==="global"&&e.bind&&eoe(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==bd;return t&&!n&&Ze(Ton),t&&n},parse:(e,t,n)=>{const r=on(n);if(r.select=gt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},D9e(t,r),yt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=mt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=o7(t.bind)?t.bind.legend:"click",s=gt(i)?yv(i,"view"):mt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=o7(t.bind)&&t.bind.legend,s=o=>a=>{const u=on(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Ni(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+qy),o=r+DN,a=i.items.filter(d=>d.hasLegend).map(d=>Ni(`${r}_${Ni(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+WL),f=o7(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function nfn(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Wo(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&C9e.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const A9e="_translate_anchor",I9e="_translate_delta",rfn={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Im.defined(t),s=r+A9e,{x:o,y:a}=t.project.hasChannel;let u=yv(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+HE,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?oG(e,Di):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?oG(e,xo):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+I9e,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&o1e(e,t,o,"width",n),a!==void 0&&o1e(e,t,a,"height",n),n}};function o1e(e,t,n,r,i){const s=t.name,o=s+A9e,a=s+I9e,u=n.channel,l=Im.defined(t),c=i.filter(E=>E.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===Di?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${v}(${g}, ${y}${b})`;c.on.push({events:{signal:a},update:l?w:`clampRange(${w}, 0, ${f})`})}const k9e="_zoom_anchor",R9e="_zoom_delta",ifn={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Im.defined(t),s=r+R9e,{x:o,y:a}=t.project.hasChannel,u=rt(e.scaleName(Di)),l=rt(e.scaleName(xo));let c=yv(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+HE,f))),n.push({name:r+k9e,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&a1e(e,t,o,"width",n),a!==void 0&&a1e(e,t,a,"height",n),n}};function a1e(e,t,n,r,i){const s=t.name,o=n.channel,a=Im.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?oG(e,o):u.name,h=s+R9e,p=`${s}${k9e}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const Xb="_store",qy="_tuple",sfn="_modify",N9e="vlSelectionResolve",Hj=[Fcn,Mcn,Ocn,T9e,S9e,Im,C9e,tfn,rfn,ifn,x9e];function ofn(e){let t=e.parent;for(;t&&!Gl(t);)t=t.parent;return t}function ib(e,{escape:t}={escape:!0}){let n=t?rt(e.name):e.name;const r=ofn(e);if(r){const{facet:i}=r;for(const s of Uc)i[s]&&(n+=` + '__facet_${s}_' + (facet[${rt(r.vgField(s))}])`)}return n}function foe(e){return Wo(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function D9e(e,t){(gt(t.select)||!t.select.on)&&delete e.events,(gt(t.select)||!t.select.clear)&&delete e.clear,(gt(t.select)||!t.select.toggle)&&delete e.toggle}function aG(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...aG(e.object)),t.push(...aG(e.property))),t)}function P9e(e){return e.object.type==="MemberExpression"?P9e(e.object):e.object.name==="datum"}function O9e(e){const t=Nie(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&P9e(r)&&n.add(aG(r).slice(1).join("."))}),n}class $T extends Ur{clone(){return new $T(null,this.model,on(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=GL(this.model,this.filter,this),this._dependentFields=O9e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function afn(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=Ni(i.name),o=i.select,a=gt(o)?o:o.type,u=yt(o)?on(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=on(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:gt(u.on)?yv(u.on,"scope"):mt(on(u.on))},f=on(i);for(const d of Hj)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function $9e(e,t,n,r="datum"){const i=gt(t)?t:t.param,s=Ni(i),o=rt(s+Xb);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${rt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function M9e(e,t,n){const r=Ni(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Ze(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${rt(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Ze((a.length?"Multiple ":"No ")+`matching ${rt(i)} encoding found for selection ${rt(n.param)}. Using "field": ${rt(s)}.`)):s=a[0].field}return`${o.name}[${rt(rf(s))}]`}function ufn(e,t){for(const[n,r]of By(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new rl(new $T(t,e,{param:n}),i,Ti.Lookup,e.component.data.outputNodeRefCounts)}}function GL(e,t,n){return M2(t,r=>gt(r)?r:jan(r)?$9e(e,r,n):JBe(r))}function lfn(e,t){if(e)return je(e)&&!n0(e)?e.map(n=>qse(n,t)).join(", "):e}function f7(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function OA(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=zun[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(NN(m)){const{condition:g,...y}=m,v=mt(g),b=$ve[h];if(b){const{vgProp:w,part:E}=b,x=[...v.map(S=>{const{test:C,...I}=S;return{test:GL(null,C),...I}}),y];f7(c,E,w,x),delete c[h]}else if(b===null){const w={signal:v.map(E=>{const{test:x,...S}=E;return`${GL(null,x)} ? ${bve(S)} : `}).join("")+bve(y)};c[h]=w}}else if(Dt(m)){const g=$ve[h];if(g){const{vgProp:y,part:v}=g;f7(c,v,y,m),delete c[h]}}Gn(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Hr(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:ms(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Dt(c.encode.labels.update.text)&&(p=Vb(a,"datum.label",c.encode.labels.update.text.signal)),f7(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of I8e)e.hasAxisPart(p)||delete c.encode[p];Hr(c.encode)&&delete c.encode}const h=lfn(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:ms(l,0)}}}}function L9e(e){const{axes:t}=e.component,n=[];for(const r of Ap)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function cfn(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>OA(i,"grid",t)),...r.map(i=>OA(i,"grid",t)),...n.map(i=>OA(i,"main",t)),...r.map(i=>OA(i,"main",t))].filter(i=>i)}function u1e(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...Xe(o),...Xe(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${Xf(o[c])} : ${Xf(a[c])}`};return l}return t[i]})])}function ffn(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:n8e(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Dt(n)?"axisOrient":`axis${wN(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:u1e(a,r,e,n),vgAxisConfig:u1e(u,r,e,n),axisConfigStyle:dfn([...u,...a],r)}}function dfn(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=mt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function uG(e,t,n,r={}){var s;const i=RBe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const l1e={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??hfn(n,e),gridScale:({model:e,channel:t})=>pfn(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||j9e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||F9e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??gfn(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??yfn(t.type,n,et(t)&&!!t.timeUnit,et(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??bfn({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:_fn,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=B9e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return DBe(i?[Pve(i)]:[],et(o)?[Pve(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>wfn(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??Efn(n,t)};function hfn(e,t){return!bo(e)&&et(t)&&!ci(t==null?void 0:t.bin)&&!$o(t==null?void 0:t.bin)}function pfn(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function mfn(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Dt(s)?s:Nk(s);{const{configValue:o}=uG("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?Nk(o):n===Di&&Gn([Ose,Pse],e.type)&&!(et(e)&&e.timeUnit)?270:void 0}}function lG(e){return`(((${e.signal} % 360) + 360) % 360)`}function F9e(e,t,n,r){if(e!==void 0)if(n==="x"){if(Dt(e)){const i=lG(e),s=Dt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Dt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Dt(e)){const i=lG(e),s=Dt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Dt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function j9e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Dt(e)){const o=lG(e),a=Dt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Dt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function gfn(e,t){if(t==="x"&&Gn(["quantitative","temporal"],e))return!0}function yfn(e,t,n,r){if(n&&!yt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function vfn(e){return e==="x"?"bottom":"left"}function bfn({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!bo(t)&&t!=="log"){if(et(e)){if(ci(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Gn(["month","hours","day","quarter"],(i=yo(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function _fn({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(et(t)){const{timeUnit:n}=t;if(n){const r=KBe(n);if(r)return{signal:r}}}}function B9e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return PBe(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function wfn(e,t){const n=e.values;if(je(n))return A8e(t,n);if(Dt(n))return n}function Efn(e,t){return e==="rect"&&jL(t)?1:0}class hS extends Ur{clone(){return new hS(null,on(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=O9e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(L_(r)&&y8e(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${JBe({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new hS(t,{calculate:u,as:pS(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Wn(this.transform)}`}}function pS(e,t,n){return at(e,{prefix:t,suffix:"sort_index",...n})}function qj(e,t){return Gn(["top","bottom"],t)?"column":Gn(["left","right"],t)||e==="row"?"row":"column"}function mS(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return ms((t||{})[e],i[e],n.header[e])}function Wj(e,t,n,r){const i={};for(const s of e){const o=mS(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const doe=["row","column"],hoe=["header","footer"];function xfn(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=Wj(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=qj(t,a),l=Nk(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...z9e(l,u),...U9e(u,l,s),...V9e(r,i,t,cln,q8e)}}}function U9e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=j9e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function z9e(e,t){const n=F9e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Sfn(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of hoe)if(n[i])for(const s of n[i]){const o=Cfn(e,t,i,n,s);o!=null&&r.push(o)}return r}function Tfn(e,t){const{sort:n}=e;return Mh(n)?{field:at(n,{expr:"datum"}),order:n.order??"ascending"}:je(n)?{field:pS(e,t,{expr:"datum"}),order:"ascending"}:{field:at(e,{expr:"datum"}),order:n??"ascending"}}function cG(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=Wj(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=Fse({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=qj(t,a);return{text:{signal:u?Vb(Vb(u,"datum.label",l),"datum.value",at(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...z9e(s,c),...U9e(c,s,o),...V9e(n,e,t,fln,W8e)}}function Cfn(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=Wj(["labelOrient"],o.header,a,t);(t==="row"&&!Gn(["top","bottom"],f)||t==="column"&&!Gn(["left","right"],f))&&(s=cG(o,t,a))}const u=Gl(e)&&!IN(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:Tfn(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const Afn={column:{start:0,end:1},row:{start:1,end:0}};function Ifn(e,t){return Afn[t][e]}function kfn(e,t){const n={};for(const r of Uc){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=Wj(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=qj(r,o),u=Ifn(s,a);u!==void 0&&(n[a]=u)}}return Hr(n)?void 0:n}function V9e(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=mS(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function poe(e){return[...IP(e,"width"),...IP(e,"height"),...IP(e,"childWidth"),...IP(e,"childHeight")]}function IP(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(bo(o)&&Sv(a)){const u=e.scaleName(n);return Gl(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[c1e(u,a)]:[c1e(u,a),{name:i,update:H9e(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=nG(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function c1e(e,t){const n=`${e}_step`;return Dt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function H9e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=ms(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${Xf(o)}, ${Xf(s)}) * ${e}_step`}function q9e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function W9e(e,t){return Xe(e).reduce((n,r)=>{const i=e[r];return{...n,...OT(t,i,r,s=>mi(s.value))}},{})}function G9e(e,t){if(Gl(t))return e==="theta"?"independent":"shared";if(FT(t))return"shared";if(woe(t))return gs(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function moe(e,t){const n=e.scale[t],r=gs(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Ze(aan(t)),"independent"):e[r][t]||"shared"}const Rfn={...pln,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},Y9e=Xe(Rfn);class Nfn extends Dg{}const f1e={symbols:Dfn,gradient:Pfn,labels:Ofn,entries:$fn};function Dfn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...von({},n,yun),..._9e(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?K9e(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===dl)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=mi(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=mi(m??1));else if(je(f.fill)){const g=fG(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=mi(g))}}if(f.stroke){if(r==="stroke"||!c&&r===dl)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(je(f.stroke)){const g=ms(fG(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==kg){const g=et(t)&&Q9e(n,i,t);g?f.opacity=[{test:g,...mi(m??1)},mi(u.legend.unselectedOpacity)]:m&&(f.opacity=mi(m))}return f={...f,...e},Hr(f)?void 0:f}function Pfn(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?K9e(o.opacity)||s.opacity:void 0;return l&&(a.opacity=mi(l)),a={...a,...e},Hr(a)?void 0:a}function Ofn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=et(t)?Q9e(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;Gb(c)?f=Jf({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=Jf({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&et(t)&&t.timeUnit===void 0&&(f=Jf({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Hr(d)?void 0:d}function $fn(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function K9e(e){return X9e(e,(t,n)=>Math.max(t,n.value))}function fG(e){return X9e(e,(t,n)=>ms(t,n.value))}function X9e(e,t){if(Run(e))return mt(e.condition).reduce(t,e.value);if(vd(e))return e.value}function Q9e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=rt(n.field);return r.map(s=>`(!length(data(${rt(Ni(s)+Xb)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const d1e={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return u8e(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return l8e(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??zfn(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??Vfn(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??Lfn(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>VE(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(zE(n)&&Qf(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Mfn(t,e)};function Mfn(e,t){const n=e.values;if(je(n))return A8e(t,n);if(Dt(n))return n}function Lfn(e,t,n,r){if(t!=="shape"){const i=fG(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Ffn(e){const{legend:t}=e;return ms(t.type,jfn(e))}function jfn({channel:e,timeUnit:t,scaleType:n}){if(zE(e)){if(Gn(["quarter","month","day"],t))return"symbol";if(Qf(n))return"gradient"}return"symbol"}function Bfn({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??Ufn(n,t)}function Ufn(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function zfn({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(Qf(i))return n==="horizontal"?r==="top"||r==="bottom"?h1e(t,"width",o,s):o:h1e(t,"height",u,a)}function h1e(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function Vfn(e){if(Gn(["quantile","threshold","log","symlog"],e))return"greedy"}function J9e(e){const t=Ji(e)?Hfn(e):Yfn(e);return e.component.legends=t,t}function Hfn(e){const{encoding:t}=e,n={};for(const r of[dl,...Y8e]){const i=zs(t[r]);!i||!e.getScaleComponent(r)||r===hl&&et(i)&&i.type===PT||(n[r]=Gfn(e,r))}return n}function qfn(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function Wfn(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function Gfn(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new Nfn({},qfn(e,t));nfn(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=zs(i[t]),f=et(c)?(w=yo(c.timeUnit))==null?void 0:w.unit:void 0,d=n.orient||s.legend.orient||"right",h=Ffn({legend:n,channel:t,timeUnit:f,scaleType:l}),p=Bfn({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const E of Y9e){if(h==="gradient"&&E.startsWith("symbol")||h==="symbol"&&E.startsWith("gradient"))continue;const x=E in d1e?d1e[E](m):n[E];if(x!==void 0){const S=Wfn(x,E,n,e.fieldDef(t));(S||s.legend[E]===void 0)&&a.set(E,x,S)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const E of["labels","legend","title","symbols","gradient","entries"]){const x=W9e(g[E]??{},e),S=E in f1e?f1e[E](x,b):x;S!==void 0&&!Hr(S)&&(v[E]={...y!=null&&y.length&&et(c)?{name:`${Ni(c.field)}_legend_${E}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:S})}return Hr(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function Yfn(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){J9e(r);for(const i of Xe(r.component.legends))n.legend[i]=moe(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=Z9e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Xe(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function Z9e(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of Y9e){const c=Vy(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return Kfn(f,d);case"title":return OBe(f,d);case"type":return i=!0,xl("symbol")}return Bj(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&PL(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&PL(e.explicit,["encode","gradient"])),e}function Kfn(e,t){return t.value==="circle"?t:e}function Xfn(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function eUe(e){const t=e.component.legends,n={};for(const i of Xe(t)){const s=e.getScaleComponent(i),o=qr(s.get("domains"));if(n[o])for(const a of n[o])Z9e(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Wo(n).flat().map(i=>Qfn(i,e.config)).filter(i=>i!==void 0)}function Qfn(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of Y8e)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Dt(s.encode.labels.update.text)&&(l=Vb(r,"datum.label",s.encode.labels.update.text.signal)),Xfn(s,"labels","text",{signal:l})}return s}}function Jfn(e){return FT(e)||woe(e)?Zfn(e):tUe(e)}function Zfn(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),tUe(e))}function tUe(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Dt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Gn(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const edn=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class nUe extends Dg{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function rUe(e){e.component.projection=Ji(e)?tdn(e):idn(e)}function tdn(e){if(e.hasProjection){const t=Lu(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?ndn(e):void 0,s=new nUe(e.projectionName(!0),{...Lu(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function ndn(e){const t=[],{encoding:n}=e;for(const r of[[Nd,Rd],[sf,Dd]])(zs(n[r[0]])||zs(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(hl)&&e.typedFieldDef(hl).type===PT&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Ti.Main)),t}function rdn(e,t){const n=use(edn,i=>!!(!zt(e.explicit,i)&&!zt(t.explicit,i)||zt(e.explicit,i)&&zt(t.explicit,i)&&Bl(e.get(i),t.get(i))));if(Bl(e.size,t.size)){if(n)return e;if(Bl(e.explicit,{}))return t;if(Bl(t.explicit,{}))return e}return null}function idn(e){if(e.children.length===0)return;let t;for(const r of e.children)rUe(r);const n=use(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=rdn(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new nUe(r,t.specifiedProjection,t.size,on(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function sdn(e,t,n,r){if(RN(t,n)){const i=Ji(e)?e.axis(n)??e.legend(n)??{}:{},s=at(t,{expr:"datum"}),o=at(t,{expr:"datum",binSuffix:"end"});return{formulaAs:at(t,{binSuffix:"range",forAs:!0}),formula:AN(s,o,i.format,i.formatType,r)}}return{}}function iUe(e,t){return`${CBe(e)}_${t}`}function odn(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function goe(e,t,n){const r=Oj(n,void 0)??{},i=iUe(r,t);return e.getName(`${i}_bins`)}function adn(e){return"as"in e}function p1e(e,t,n){let r,i;adn(e)?r=gt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[at(e,{forAs:!0}),at(e,{binSuffix:"end",forAs:!0})];const s={...Oj(t,void 0)},o=iUe(s,e.field),{signal:a,extentSignal:u}=odn(n,o);if(xj(s.extent)){const c=s.extent;i=M9e(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class Fh extends Ur{clone(){return new Fh(null,on(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(fu(s)&&ci(s.bin)){const{key:a,binComponent:u}=p1e(s,s.bin,n);i[a]={...u,...i[a],...sdn(n,s,o,n.config)}}return i},{});return Hr(r)?null:new Fh(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=p1e(n,n.bin,r);return new Fh(t,{[i]:s})}merge(t,n){for(const r of Xe(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=wh([...this.bins[r].as,...t.bins[r].as],Wn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Wo(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Wo(this.bins).map(t=>t.field))}hash(){return`Bin ${Wn(this.bins)}`}assemble(){return Wo(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:rf(t.field),as:r,signal:t.signal,...xj(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:rf(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:at({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function udn(e,t,n,r){var s;const i=Ji(r)?r.encoding[Cp(t)]:void 0;if(fu(n)&&Ji(r)&&b8e(n,i,r.markDef,r.config)){e.add(at(n,{})),e.add(at(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=zy({fieldDef:n,markDef:a,config:u});Dk(o)&&l!==.5&&gs(t)&&(e.add(at(n,{suffix:Uj})),e.add(at(n,{suffix:zj}))),n.bin&&RN(n,t)&&e.add(at(n,{binSuffix:"range"}))}else if(gBe(t)){const o=mBe(t);e.add(r.getName(o))}else e.add(at(n));return L_(n)&&Jan((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function ldn(e,t){for(const n of Xe(t)){const r=t[n];for(const i of Xe(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class ad extends Ur{clone(){return new ad(null,new Set(this.dimensions),on(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([at(o,{forAs:!0})]);else{if(rg(u)||xv(u)){const c=rg(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([at({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([at(o,{forAs:!0})]);Rg(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([at({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([at({field:l,aggregate:"max"},{forAs:!0})]))}else udn(s,a,o,n)}),s.size+Xe(i).length===0)?null:new ad(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||at(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||at(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+Xe(i).length===0?null:new ad(t,r,i)}merge(t){return aBe(this.dimensions,t.dimensions)?(ldn(this.measures,t.measures),!0):(xan("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Xe(this.measures)])}producedFields(){const t=new Set;for(const n of Xe(this.measures))for(const r of Xe(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Wn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of Xe(this.measures))for(const o of Xe(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:rf(s));return{type:"aggregate",groupby:[...this.dimensions].map(rf),ops:t,fields:n,as:r}}}class MT extends Ur{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Uc){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[at(o),...ci(a)?[at(o,{binSuffix:"end"})]:[]],...Mh(u)?{sortField:u}:je(u)?{sortIndexField:pS(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Uc)this[n]&&(t+=` ${n.charAt(0)}:${Wn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Uc)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Uc)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Ap){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(bo(i)&&Sv(s)){const o=Gj(this.childModel,n),a=_oe(o);a?t[n]=a:Ze(wse(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=Rj,field:f}=u;s.push(f),o.push(c),a.push(at(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of doe){for(const c of hoe){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[Am,Cm])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function m1e(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function cdn(e,t){const n=fse(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=m1e(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=m1e(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Ze(Don(t)),null}function fdn(e){const t={};return r$(e.filter,n=>{if(QBe(n)){let r=null;Tse(n)?r=Nl(n.equal):Ase(n)?r=Nl(n.lte):Cse(n)?r=Nl(n.lt):Ise(n)?r=Nl(n.gt):kse(n)?r=Nl(n.gte):Rse(n)?r=n.range[0]:Nse(n)&&(r=(n.oneOf??n.in)[0]),r&&(O_(r)?t[n.field]="date":hr(r)?t[n.field]="number":gt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function ddn(e){const t={};function n(r){cS(r)?t[r.field]="date":r.type==="quantitative"&&lon(r.aggregate)?t[r.field]="number":rS(r.field)>1?r.field in t||(t[r.field]="flatten"):L_(r)&&Mh(r.sort)&&rS(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Ji(e)||Gl(e))&&e.forEachFieldDef((r,i)=>{if(fu(r))n(r);else{const s=D_(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Ji(e)){const{mark:r,markDef:i,encoding:s}=e;if(M_(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];et(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function hdn(e){const t={};if(Ji(e)&&e.component.selection)for(const n of Xe(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&rS(i.field)>1&&(t[i.field]="flatten")}return t}class xa extends Ur{clone(){return new xa(null,on(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Wn(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!ry(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of Xe(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Ze(Tve(a,r[a],u.value)))}for(const a of Xe(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Ze(Tve(a,n[a],u)))}const s=new Dg(n,r);i.copyAll(s);const o={};for(const a of Xe(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return Xe(o).length===0||i.parseNothing?null:new xa(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Xe(this._parse)){const r=this._parse[n];rS(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Xe(this._parse))}dependentFields(){return new Set(Xe(this._parse))}assembleTransforms(t=!1){return Xe(this._parse).filter(n=>t?rS(n)>1:!0).map(n=>{const r=cdn(n,this._parse[n]);return r?{type:"formula",expr:r,as:NT(n)}:null}).filter(n=>n!==null)}}class Wy extends Ur{clone(){return new Wy(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([bd])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:bd}}}class PN extends Ur{clone(){return new PN(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Wn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class ON extends Ur{clone(){return new ON(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Wn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Qb extends Ur{constructor(t){super(null),t??(t={name:"source"});let n;if(ry(t)||(n=t.format?{...tl(t.format,["parse"])}:{}),Pk(t))this._data={values:t.values};else if(fS(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Gn(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else d9e(t)?this._data={values:[{type:"Sphere"}]}:(c9e(t)||ry(t))&&(this._data={});this._generator=ry(t),t.name&&(this._name=t.name),n&&!Hr(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var g1e=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},pdn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},$A;function yoe(e){return e instanceof Qb||e instanceof PN||e instanceof ON}class voe{constructor(){$A.set(this,void 0),g1e(this,$A,!1,"f")}setModified(){g1e(this,$A,!0,"f")}get modifiedFlag(){return pdn(this,$A,"f")}}$A=new WeakMap;class F_ extends voe{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class boe extends voe{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class mdn extends boe{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Xe(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class gdn extends boe{constructor(t){super(),this.requiresSelectionId=t&&foe(t)}run(t){t instanceof Wy&&(this.requiresSelectionId&&(yoe(t.parent)||t.parent instanceof ad||t.parent instanceof xa)||(this.setModified(),t.remove()))}}class ydn extends voe{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Lh&&(r=t.producedFields(),lse(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class vdn extends boe{constructor(){super()}run(t){t instanceof rl&&!t.isRequired()&&(this.setModified(),t.remove())}}class bdn extends F_{run(t){if(!yoe(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof xa)if(t instanceof xa)this.setModified(),t.merge(n);else{if(cse(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class _dn extends F_{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof xa);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of Xe(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Hr(i)){this.setModified();const o=new xa(t,i);for(const a of n){if(a instanceof xa)for(const u of Xe(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof xa&&Xe(a.parse).length===0&&a.remove()}}}}}class wdn extends F_{run(t){t instanceof rl||t.numChildren()>0||t instanceof MT||t instanceof Qb||(this.setModified(),t.remove())}}class Edn extends F_{run(t){const n=t.children.filter(i=>i instanceof Lh),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class xdn extends F_{run(t){const n=t.children.filter(i=>i instanceof ad),r={};for(const i of n){const s=Wn(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of Xe(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class Sdn extends F_{constructor(t){super(),this.model=t}run(t){const n=!(yoe(t)||t instanceof $T||t instanceof xa||t instanceof Wy),r=[],i=[];for(const s of t.children)s instanceof Fh&&(n&&!cse(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Fh?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class Tdn extends F_{run(t){const n=[...t.children];if(!zb(n,o=>o instanceof rl)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof rl){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof rl)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class j_ extends Ur{clone(){return new j_(null,on(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=wh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`JoinAggregateTransform ${Wn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function Cdn(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=at(r);return i&&t.push(i),t},[])}function Adn(e){return je(e)&&e.every(t=>gt(t))&&e.length>1}class km extends Ur{clone(){return new km(null,on(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(ms(f.order,"ascending"));const l={field:a,order:u};let c;return Adn(s)?c=s:gt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new km(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return np(p)}).filter(h=>!!h),c=Cdn(n),f=n.encoding.order;let d;if(je(f)||et(f))d=NBe(f);else{const h=_8e(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new km(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Wn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[at(i,{binSuffix:"mid"})]:[at(i,{}),at(i,{binSuffix:"end"})]:[at(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=at(c,{expr:"datum"}),p=at(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:at(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:at(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class LT extends Ur{clone(){return new LT(null,on(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=wh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`WindowTransform ${Wn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>bse(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function Idn(e){function t(n){if(!(n instanceof MT)){const r=n.clone();if(r instanceof rl){const i=hG+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof ad||r instanceof km||r instanceof LT||r instanceof j_)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function dG(e){if(e instanceof MT)if(e.numChildren()===1&&!(e.children[0]instanceof rl)){const t=e.children[0];(t instanceof ad||t instanceof km||t instanceof LT||t instanceof j_)&&t.addDimensions(e.fields),t.swapWithParent(),dG(e)}else{const t=e.model.component.data.main;sUe(t);const n=Idn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(dG)}function sUe(e){if(e instanceof rl&&e.type===Ti.Main&&e.numChildren()===1){const t=e.children[0];t instanceof MT||(t.swapWithParent(),sUe(e))}}const hG="scale_",kP=5;function pG(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!pG(t.children))return!1}return!0}function Ef(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function y1e(e,t,n){let r=e.sources,i=!1;return i=Ef(new vdn,r)||i,i=Ef(new gdn(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=Ef(new wdn,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=Ef(new bdn,r)||i,i=Ef(new Sdn(t),r)||i,i=Ef(new ydn,r)||i,i=Ef(new _dn,r)||i,i=Ef(new xdn,r)||i,i=Ef(new Edn,r)||i,i=Ef(new mdn,r)||i,i=Ef(new Tdn,r)||i),e.sources=r,i}function kdn(e,t){pG(e.sources);let n=0,r=0;for(let i=0;i<kP&&y1e(e,t,!0);i++)n++;e.sources.map(dG);for(let i=0;i<kP&&y1e(e,t,!1);i++)r++;pG(e.sources),Math.max(n,r)===kP&&Ze(`Maximum optimization runs(${kP}) reached.`)}class io{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new io(()=>t(n))}}function oUe(e){Ji(e)?Rdn(e):Ndn(e)}function Rdn(e){const t=e.component.scales;for(const n of Xe(t)){const r=Pdn(e,n);if(t[n].setWithExplicit("domains",r),$dn(e,n),e.component.data.isFaceted){let s=e;for(;!Gl(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)ym(a)&&(a.data=hG+a.data.replace(hG,""))}}}function Ndn(e){for(const n of e.children)oUe(n);const t=e.component.scales;for(const n of Xe(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=Vy(r,o.getWithExplicit("domains"),"domains","scale",mG);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Ze(Ion),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function Ddn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=v1e(t,n);if(!i){Ze(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=v1e(t,n);if(i)return"unaggregated"}return e}function Pdn(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=Ddn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&zs(r.x2)?zs(r.x)?Vy(Wg(n,i,e,"x"),Wg(n,i,e,"x2"),"domain","scale",mG):Wg(n,i,e,"x2"):t==="y"&&zs(r.y2)?zs(r.y)?Vy(Wg(n,i,e,"y"),Wg(n,i,e,"y2"),"domain","scale",mG):Wg(n,i,e,"y2"):Wg(n,i,e,t)}function Odn(e,t,n){return e.map(r=>({signal:`{data: ${$j(r,{timeUnit:n,type:t})}}`}))}function d7(e,t,n){var i;const r=(i=yo(n))==null?void 0:i.unit;return t==="temporal"||r?Odn(e,t,r):[e]}function Wg(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=zs(i[r]),{type:c}=l,f=l.timeUnit;if(Qan(t)){const p=Wg(e,void 0,n,r),m=d7(t.unionWith,c,f);return Jd([...m,...p.value])}else{if(Dt(t))return Jd([t]);if(t&&t!=="unaggregated"&&!i8e(t))return Jd(d7(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return xl([[0,1]]);const p=n.requestDataName(Ti.Main);return xl([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=Rg(r)&&et(l)?Mdn(n,r,e):void 0;if(Ip(l)){const p=d7([l.datum],c,f);return xl(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(Ti.Main),{field:m}=l;return xl([{data:p,field:at({field:m,aggregate:"min"})},{data:p,field:at({field:m,aggregate:"max"})}])}else if(ci(h.bin)){if(bo(e))return xl(e==="bin-ordinal"?[]:[{data:Rk(d)?n.requestDataName(Ti.Main):n.requestDataName(Ti.Raw),field:n.vgField(r,RN(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!yt(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(ci(p)){const m=goe(n,h.field,p);return xl([new io(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return xl([{data:n.requestDataName(Ti.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&Gn(["time","utc"],e)){const p=i[Cp(r)];if(b8e(h,p,s,a)){const m=n.requestDataName(Ti.Main),g=zy({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=Dk(o)&&g!==.5&&gs(r);return xl([{data:m,field:n.vgField(r,y?{suffix:Uj}:{})},{data:m,field:n.vgField(r,{suffix:y?zj:"end"})}])}}return xl(d?[{data:Rk(d)?n.requestDataName(Ti.Main):n.requestDataName(Ti.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(Ti.Main),field:n.vgField(r)}])}function h7(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":Rj),...r?{field:rf(r)}:{},...i?{order:i}:{}}}function $dn(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=i8e(r)&&r,o=P_(i)&&xj(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function Mdn(e,t,n){if(!bo(n))return;const r=e.fieldDef(t),i=r.sort;if(y8e(i))return{op:"min",field:pS(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Mh(i)){const a=s&&!o.has(i.field);return h7(i,a)}else if(g8e(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(rg(c)||xv(c))return h7({field:at(l),order:u},d);if(bse(c)||!c)return h7({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Gn(["ascending",void 0],i))return!0}}function v1e(e,t){const{aggregate:n,type:r}=e;return n?gt(n)&&!fon.has(n)?{valid:!1,reason:ean(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:tan(e)}:{valid:!0}:{valid:!1,reason:Zon(e)}}function mG(e,t,n,r){return e.explicit&&t.explicit&&Ze(oan(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Ldn(e){const t=wh(e.map(o=>{if(ym(o)){const{sort:a,...u}=o;return u}return o}),Wn),n=wh(e.map(o=>{if(ym(o)){const a=o.sort;return a!==void 0&&!Rk(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),Wn);if(t.length===0)return;if(t.length===1){const o=e[0];if(ym(o)&&n.length>0){let a=n[0];if(n.length>1){Ze(Ave);const u=n.filter(l=>yt(l)&&"op"in l&&l.op!=="min");n.every(l=>yt(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(yt(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=wh(n.map(o=>Rk(o)||!("op"in o)||gt(o.op)&&o.op in aon?o:(Ze(uan(o)),!0)),Wn);let i;r.length===1?i=r[0]:r.length>1&&(Ze(Ave),i=!0);const s=wh(e.map(o=>ym(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function _oe(e){if(ym(e)&&gt(e.field))return e.field;if(don(e)){let t;for(const n of e.fields)if(ym(n)&&gt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Ze(lan),t}return Ze(can),t}else if(hon(e)){Ze(fan);const t=e.fields[0];return gt(t)?t:void 0}}function Gj(e,t){const r=e.component.scales[t].get("domains").map(i=>(ym(i)&&(i.data=e.lookupDataSource(i.data)),i));return Ldn(r)}function aUe(e){return FT(e)||woe(e)?e.children.reduce((t,n)=>t.concat(aUe(n)),b1e(e)):b1e(e)}function b1e(e){return Xe(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=Fdn(i.range,s,n,e),h=Gj(e,n),p=a?Dcn(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function Fdn(e,t,n,r){if(gs(n)){if(Sv(e))return{step:{signal:`${t}_step`}}}else if(yt(e)&&ym(e))return{...e,data:r.lookupDataSource(e.data)};return e}class uUe extends Dg{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:zb(this.get("domains"),t=>je(t)&&t.length===2&&hr(t[0])&&t[0]<=0&&hr(t[1])&&t[1]>=0)}}const jdn=["range","scheme"];function Bdn(e){const t=e.component.scales;for(const n of Ej){const r=t[n];if(!r)continue;const i=Udn(n,e);r.setWithExplicit("range",i)}}function _1e(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=pl(t),o=e.getName(s);if(yt(r)&&r.binned&&r.step!==void 0)return new io(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(ci(r)){const a=goe(e,i,r);return new io(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function Udn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of jdn)if(n[f]!==void 0){const d=ZW(s,f),h=s8e(e,f);if(!d)Ze(FBe(s,f,e));else if(h)Ze(h);else switch(f){case"range":{const p=n.range;if(je(p)){if(gs(e))return Jd(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return io.fromName(y,g)}return m}))}else if(yt(p))return Jd({data:t.requestDataName(Ti.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Jd(p)}case"scheme":return Jd(zdn(n[f]))}}const o=e===Di||e==="xOffset"?"width":"height",a=r[o];if(rp(a)){if(gs(e))if(bo(s)){const f=cUe(a,t,e);if(f)return Jd({step:f})}else Ze(jBe(o));else if(SN(e)){const f=e===vv?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=fUe(a,s);if(p)return Jd(p)}}}const{rangeMin:u,rangeMax:l}=n,c=Vdn(e,t);return(u!==void 0||l!==void 0)&&ZW(s,"rangeMin")&&je(c)&&c.length===2?Jd([u??c[0],l??c[1]]):xl(c)}function zdn(e){return Xan(e)?{scheme:e.name,...tl(e,["name"])}:{scheme:e}}function lUe(e,t,n,{center:r}={}){const i=pl(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===xo&&ac(n)?r?[io.fromName(a=>`${o(a)}/2`,s),io.fromName(a=>`-${o(a)}/2`,s)]:[io.fromName(o,s),0]:r?[io.fromName(a=>`-${o(a)}/2`,s),io.fromName(a=>`${o(a)}/2`,s)]:[0,io.fromName(o,s)]}function Vdn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=zs(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Di:case xo:{if(Gn(["point","band"],u)){const f=dUe(e,n,r.view);if(rp(f))return{step:cUe(f,t,e)}}return lUe(e,t,u)}case vv:case DT:return Hdn(e,t,u);case Ig:{const f=t.component.scales[e].get("zero"),d=hUe(i,f,r),h=Gdn(i,n,t,r);return aS(u)?Wdn(d,h,qdn(u,r,l,e)):[d,h]}case gf:return[0,Math.PI*2];case N_:return[0,360];case kd:return[0,new io(()=>{const f=t.getSignalName(Gl(t.parent)?"child_width":"width"),d=t.getSignalName(Gl(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case wv:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Ev:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case hl:return"symbol";case dl:case Sp:case Tp:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case kg:case bv:case _v:return[r.scale.minOpacity,r.scale.maxOpacity]}}function cUe(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=mse(n),o=r[s];if(X8e({step:e,offsetIsDiscrete:hn(o)&&ZBe(o.type)})==="offset"&&N8e(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${yon(f)})`}}else return e.step}function fUe(e,t){if(X8e({step:e,offsetIsDiscrete:bo(t)})==="offset")return{step:e.step}}function Hdn(e,t,n){const r=e===vv?"x":"y",i=t.getScaleComponent(r);if(!i)return lUe(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=dUe(r,t.size,t.config.view);if(rp(l)){const c=fUe(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(et(l)&&l.timeUnit){const c=KBe(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=zy({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Dt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Dt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return sBe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function dUe(e,t,n){const r=e===Di?"width":"height",i=t[r];return i||HL(n,r)}function qdn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&je(n)?n.length+1:(Ze(_an(r)),3)}}function Wdn(e,t,n){const r=()=>{const i=Xf(t),s=Xf(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Dt(t)?new io(r):{signal:r()}}function hUe(e,t,n){if(t)return Dt(t)?{signal:`${t.signal} ? 0 : ${hUe(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(Sj("size",e))}const w1e=.95;function Gdn(e,t,n,r){const i={x:_1e(n,"x"),y:_1e(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=E1e(t,i,r.view);return hr(s)?s-1:new io(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=E1e(t,i,r.view);return hr(s)?Math.pow(w1e*s,2):new io(()=>`pow(${w1e} * ${s.signal}, 2)`)}}throw new Error(Sj("size",e))}function E1e(e,t,n){const r=rp(e.width)?e.width.step:VL(n,"width"),i=rp(e.height)?e.height.step:VL(n,"height");return t.x||t.y?new io(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function pUe(e,t){Ji(e)?Ydn(e,t):gUe(e,t)}function Ydn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of Xe(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=zs(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=ZW(h,t),y=s8e(a,t);if(d!==void 0&&(g?y&&Ze(y):Ze(FBe(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":O_(u[t])||b==="temporal"||v?l.set(t,{signal:$j(u[t],{type:b,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in x1e?x1e[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:D8e(i,a),hasSecondaryRangeChannel:!!i[Cp(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const x1e={bins:({model:e,fieldOrDatumDef:t})=>et(t)?Kdn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Xdn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>Qdn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>Jdn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>Zdn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>ehn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=et(e)?e.sort:void 0;return thn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>nhn(e,t,n,r,i,s.scale,o)};function mUe(e){Ji(e)?Bdn(e):gUe(e,"range")}function gUe(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?mUe(r):pUe(r,t);for(const r of Xe(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=Vy(i,a,t,"scale",l9e((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function Kdn(e,t){const n=t.bin;if(ci(n)){const r=goe(e,t.field,n);return new io(()=>e.getSignalName(r))}else if($o(n)&&P_(n)&&n.step!==void 0)return{step:n.step}}function Xdn(e,t){if(Gn([dl,Sp,Tp],e)&&t!=="nominal")return"hcl"}function Qdn(e,t,n,r,i,s){var o;if(!((o=np(s))!=null&&o.bin||je(n)||i!=null||r!=null||Gn([nl.TIME,nl.UTC],e)))return gs(t)?!0:void 0}function Jdn(e,t,n,r,i,s){if(gs(e)){if(Qf(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(et(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===nl.POINT)return n.pointPadding}}function Zdn(e,t,n,r,i,s=!1){if(e===void 0){if(gs(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:ms(o,n==="bar"?a:u)}else if(SN(t)&&r===nl.BAND)return i.offsetBandPaddingInner}}function ehn(e,t,n,r,i,s=!1){if(e===void 0){if(gs(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===nl.BAND)return ms(o,Dt(r)?{signal:`${r.signal}/2`}:r/2)}else if(SN(t)){if(n===nl.POINT)return .5;if(n===nl.BAND)return i.offsetBandPaddingOuter}}}function thn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return ac(e)&&t==="descending"?Dt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(ac(e)&&t==="descending")return!0}function nhn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&ac(i)){if(je(n)){const u=n[0],l=n[n.length-1];if(hr(u)&&u<=0&&hr(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!aS(i))return!0;if(!(et(t)&&t.bin)&&Gn([...Ap,...Zsn],e)){const{orient:u,type:l}=r;return Gn(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Gn(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function rhn(e,t,n,r,i=!1){const s=ihn(t,n,r,i),{type:o}=e;return Rg(t)?o!==void 0?run(t,o)?et(n)&&!nun(o,n.type)?(Ze(ian(o,s)),s):o:(Ze(ran(t,o,s)),s):s:null}function ihn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(zE(e)||i7(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Ze(s7(e,"ordinal")),"ordinal";if(gs(e)||SN(e)){if(Gn(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in vse)return"band";const s=n[pl(e)];return Yb(s)||lS(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return zE(e)?"time":i7(e)==="discrete"?(Ze(s7(e,"temporal")),"ordinal"):et(t)&&t.timeUnit&&yo(t.timeUnit).utc?"utc":"time";case"quantitative":return zE(e)?et(t)&&ci(t.bin)?"bin-ordinal":"linear":i7(e)==="discrete"?(Ze(s7(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(MBe(t.type))}function shn(e,{ignoreRange:t}={}){yUe(e),oUe(e);for(const n of tun)pUe(e,n);t||mUe(e)}function yUe(e){Ji(e)?e.component.scales=ohn(e):e.component.scales=uhn(e)}function ohn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of Ej){const o=zs(t[s]);if(o&&n===h8e&&s===hl&&o.type===PT)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=D8e(t,s),l=rhn(a,s,o,r,u);i[s]=new uUe(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const ahn=l9e((e,t)=>kve(e)-kve(t));function uhn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){yUe(s);for(const o of Xe(s.component.scales))if((t=i.scale)[o]??(t[o]=G9e(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?qan(a.value,u.value)?r[o]=Vy(a,u,"type","scale",ahn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of Xe(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new uUe(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class p7{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Ji(e){return(e==null?void 0:e.type)==="unit"}function Gl(e){return(e==null?void 0:e.type)==="facet"}function woe(e){return(e==null?void 0:e.type)==="concat"}function FT(e){return(e==null?void 0:e.type)==="layer"}class Eoe{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=Lu(a),this.name=t.name??i,this.title=n0(t.title)?{text:t.title}:t.title?Lu(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new p7,this.projectionNameMap=r?r.projectionNameMap:new p7,this.signalNameMap=r?r.signalNameMap:new p7,this.data=t.data,this.description=t.description,this.transforms=mcn(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:bln(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:Nj(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Dg,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?on(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){shn(this)}parseProjection(){rUe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){J9e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of Xe(r)){const o=r[s];o!==void 0&&(i[s]=mi(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=mi(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Hr(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=kfn(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Uc)t[r].title&&n.push(xfn(this,r));for(const r of doe)n=n.concat(Sfn(this,r));return n}assembleAxes(){return cfn(this.component.axes,this.config)}assembleLegends(){return eUe(this)}assembleProjections(){return Jfn(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...ABe(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Gn(["unit","layer"],this.type)?Gn(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Hr(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Gl(this.parent)?aUe(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Ni((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Ti[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Gl(this.parent)){const n=q9e(t),r=wj(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(bo(s)&&Sv(o)){const a=i.get("name"),u=Gj(this,r),l=_oe(u);if(l){const c=at({aggregate:"distinct",field:l},{expr:"datum"});return{signal:H9e(a,i,c)}}else return Ze(wse(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(vBe(t)&&Rg(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(Eon(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class vUe extends Eoe{vgField(t,n={}){const r=this.fieldDef(t);if(r)return at(r,n)}reduceFieldDef(t,n){return Yun(this.getMapping(),(r,i,s)=>{const o=np(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){Yse(this.getMapping(),(r,i)=>{const s=np(r);s&&t(s,i)},n)}}class Yj extends Ur{clone(){return new Yj(null,on(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=on(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Wn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class Kj extends Ur{clone(){return new Kj(null,on(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=on(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Wn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class Ok extends Ur{clone(){return new Ok(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(Sr("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=Rg(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");ac(d)&&l.aggregate!=="count"&&!M_(i)&&(u[l.field]=l)}return u},{});return Xe(a).length?new Ok(t,a):null}dependentFields(){return new Set(Xe(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Wn(this.filter)}`}assemble(){const t=Xe(this.filter).reduce((n,r)=>{const i=this.filter[r],s=at(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class Xj extends Ur{clone(){return new Xj(this.parent,on(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=on(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Wn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class Qj extends Ur{clone(){return new Qj(null,on(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=on(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Wn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class qE extends Ur{clone(){return new qE(null,on(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Nd,Rd],[sf,Dd]]){const s=i.map(o=>{const a=zs(n.encoding[o]);return et(a)?a.field:Ip(a)?{expr:`${a.datum}`}:vd(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new qE(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(hl)){const i=n.typedFieldDef(hl);i.type===PT&&(t=new qE(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(gt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Wn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class $k extends Ur{clone(){return new $k(null,this.projection,on(this.fields),on(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Nd,Rd],[sf,Dd]]){const i=r.map(o=>{const a=zs(n.encoding[o]);return et(a)?a.field:Ip(a)?{expr:`${a.datum}`}:vd(a)?{expr:`${a.value}`}:void 0}),s=r[0]===sf?"2":"";(i[0]||i[1])&&(t=new $k(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(gt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Wn(this.fields)} ${Wn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class sb extends Ur{clone(){return new sb(null,on(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new sb(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(et(i)&&et(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=O8e(n.mark,r);return new sb(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Wn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:Xln(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class Jj extends Ur{clone(){return new Jj(null,on(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=on(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Wn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class Mk extends Ur{clone(){return new Mk(null,on(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(Qln(o)){let u=wUe(o.data,s);u||(u=new Qb(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new rl(u,l,Ti.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(Jln(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Ni(u),u)}catch{throw new Error(Con(u))}if(a=l.materialized,!a)throw new Error(Aon(u))}return new Mk(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?mt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Wn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:mt(this.transform.as)}:{}};else{let n=this.transform.as;gt(n)||(Ze($on),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class Zj extends Ur{clone(){return new Zj(null,on(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=on(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Wn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class eB extends Ur{clone(){return new eB(null,on(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=on(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Wn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class tB extends Ur{clone(){return new tB(null,on(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=wh((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Wn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class nB extends Ur{clone(){return new nB(null,on(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Wn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function bUe(e){let t=0;function n(r,i){if(r instanceof Qb&&!r.isGenerator&&!fS(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof xa&&(r.parent instanceof Qb&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof MT){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof PN||r instanceof ON||r instanceof Ok||r instanceof $T||r instanceof hS||r instanceof $k||r instanceof ad||r instanceof Mk||r instanceof LT||r instanceof j_||r instanceof Qj||r instanceof Xj||r instanceof Yj||r instanceof Jj||r instanceof Zj||r instanceof eB||r instanceof Wy||r instanceof nB||r instanceof tB||r instanceof Kj)&&i.transform.push(r.assemble()),(r instanceof Fh||r instanceof Lh||r instanceof sb||r instanceof km||r instanceof qE)&&i.transform.push(...r.assemble()),r instanceof rl&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof rl?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof rl&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function lhn(e){const t=[],n=bUe(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function chn(e,t){const n=[],r=bUe(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function fhn(e){return e==="top"||e==="left"||Dt(e)?"header":"footer"}function dhn(e){for(const t of Uc)hhn(e,t);S1e(e,"x"),S1e(e,"y")}function hhn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=mS("title",null,r,t);let l=VE(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=je(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=mS("labelOrient",a.header,r,t),f=a.header!==null?ms((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Gn(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[_Ue(e,t,f)]}}}function _Ue(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function S1e(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=moe(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=fhn(a.get("orient"));o[u]??(o[u]=[_Ue(e,s,!1)]);const l=OA(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function phn(e){xoe(e),YL(e,"width"),YL(e,"height")}function mhn(e){xoe(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";YL(e,t),YL(e,n)}function xoe(e){for(const t of e.children)t.parseLayoutSize()}function YL(e,t){const n=q9e(t),r=wj(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??G9e(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=Vy(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function ghn(e){const{size:t,component:n}=e;for(const r of Ap){const i=pl(r);if(t[i]){const s=t[i];n.layoutSize.set(i,rp(s)?"step":s,!0)}else{const s=yhn(e,i);n.layoutSize.set(i,s,!1)}}}function yhn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(bo(s)){const a=HL(r.view,t);return Sv(o)||rp(a)?"step":a}else return nG(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return nG(r.view,t);{const s=HL(r.view,t);return rp(s)?s.step:s}}}function gG(e,t,n){return at(t,{suffix:`by_${at(e)}`,...n})}class F2 extends vUe{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Ioe(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!IN(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Xe(t),r={};for(const i of n){if(![Cm,Am].includes(i)){Ze(Sj(i,"facet"));break}const s=t[i];if(s.field===void 0){Ze(QW(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=Wse(t,n);return r.header?r.header=Lu(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=rB(this),this.child.parseData()}parseLayoutSize(){xoe(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),dhn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Uc)for(const r of hoe){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=mS("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=qj(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof F2))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof F2?{...this.channelHasField("column")?{encode:{update:{columns:{field:at(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof F2){if(this.child.channelHasField("column")){const i=at(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Ap){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(bo(o)&&Sv(a)){const u=Gj(this.child,i),l=_oe(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Ze(wse(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of Uc){const f=this.facet[c];if(f){u.push(at(f));const{bin:d,sort:h}=f;if(ci(d)&&u.push(at(f,{binSuffix:"end"})),Mh(h)){const{field:p,op:m=Rj}=h,g=gG(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(je(h)){const p=pS(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Mh(r.sort)?[gG(r,r.sort,{expr:"datum"})]:je(r.sort)?[pS(r,t,{expr:"datum"})]:[at(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Mh(i)?i.order:!je(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return cG(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of doe)if(t[s]){const o=mS("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return cG(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=lhn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Uc.map(u=>this.facetSortFields(u)).flat(),order:Uc.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(Icn(this,[]))}]}getMapping(){return this.facet}}function vhn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Mh(s.sort)){const{field:o,op:a=Rj}=s.sort;e=i=new j_(e,{joinaggregate:[{op:a,field:o,as:gG(s,s.sort,{forAs:!0})}],groupby:[at(s)]})}return i}return null}function wUe(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(Pk(e)&&Pk(a)){if(Bl(e.values,a.values))return o}else if(fS(e)&&fS(a)){if(e.url===a.url)return o}else if(c9e(e)&&e.name===o.dataName)return o}}return null}function bhn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new Qb({values:[]});return t.push(r),r}const n=wUe(e.data,t);if(n)return ry(e.data)||(n.data.format=oBe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new Qb(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function _hn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(ucn(i))o=e=new hS(e,i),s="derived";else if(soe(i)){const a=fdn(i);o=e=xa.makeWithAncestors(e,{},a,n)??e,e=new $T(e,t,i.filter)}else if(s9e(i))o=e=Fh.makeFromTransform(e,i,t),s="number";else if(ccn(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new xa(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=Lh.makeFromTransform(e,i);else if(fcn(i))o=e=ad.makeFromTransform(e,i),s="number",foe(t)&&(e=new Wy(e));else if(i9e(i))o=e=Mk.make(e,t,i,r++),s="derived";else if(scn(i))o=e=new LT(e,i),s="number";else if(ocn(i))o=e=new j_(e,i),s="number";else if(dcn(i))o=e=km.makeFromTransform(e,i),s="derived";else if(hcn(i))o=e=new Qj(e,i),s="derived";else if(pcn(i))o=e=new Kj(e,i),s="derived";else if(acn(i))o=e=new Xj(e,i),s="derived";else if(Zln(i))o=e=new tB(e,i),s="derived";else if(icn(i))e=new nB(e,i);else if(lcn(i))o=e=sb.makeFromTransform(e,i),s="derived";else if(ecn(i))o=e=new Yj(e,i),s="derived";else if(tcn(i))o=e=new Zj(e,i),s="derived";else if(ncn(i))o=e=new eB(e,i),s="derived";else if(rcn(i))o=e=new Jj(e,i),s="derived";else{Ze(Oon(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function rB(e){var h;let t=bhn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(ry(i)||fS(i)||Pk(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new Ccn;ry(i)?(f9e(i)?t=new ON(t,i.sequence):ooe(i)&&(t=new PN(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=xa.makeExplicit(t,e,o)??t,t=new Wy(t);const a=e.parent&&FT(e.parent);(Ji(e)||Gl(e))&&a&&(t=Fh.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=_hn(t,e,o));const u=hdn(e),l=ddn(e);t=xa.makeWithAncestors(t,{},{...u,...l},o)??t,Ji(e)&&(t=qE.parseAll(t,e),t=$k.parseAll(t,e)),(Ji(e)||Gl(e))&&(a||(t=Fh.makeFromEncoding(t,e)??t),t=Lh.makeFromEncoding(t,e)??t,t=hS.parseAllForSortIndex(t,e));const c=t=T1e(Ti.Raw,e,t);if(Ji(e)){const p=ad.makeFromEncoding(t,e);p&&(t=p,foe(e)&&(t=new Wy(t))),t=sb.makeFromEncoding(t,e)??t,t=km.makeFromEncoding(t,e)??t}Ji(e)&&(t=Ok.make(t,e)??t);const f=t=T1e(Ti.Main,e,t);Ji(e)&&ufn(e,f);let d=null;if(Gl(e)){const p=e.getName("facet");t=vhn(t,e.facet)??t,d=new MT(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function T1e(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new rl(n,s,e,i);return r[s]=o,o}class whn extends Eoe{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Ze(Non),this.children=this.getChildren(t).map((l,c)=>Ioe(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=rB(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Xe(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return Fj(t)?t.vconcat:roe(t)?t.hconcat:t.concat}parseLayoutSize(){mhn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=poe(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function Ehn(e){return e===!1||e===null}const xhn={disable:1,gridScale:1,scale:1,...k8e,labelExpr:1,encode:1},EUe=Xe(xhn);class Soe extends Dg{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new Soe(on(this.explicit),on(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Ehn(this.get(t))}hasOrientSignalRef(){return Dt(this.explicit.orient)}}function Shn(e,t,n){const{encoding:r,config:i}=e,s=zs(r[t])??zs(r[Cp(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(Gb(u))return{text:Jf({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(uS(s)==="quantitative"){if(lS(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Jf({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Jf({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(uS(s)==="temporal"&&i.timeFormatType&&et(s)&&!s.timeUnit)return{text:Jf({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function Thn(e){return Ap.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Dhn(n,e)]),t),{})}const Chn={bottom:"top",top:"bottom",left:"right",right:"left"};function Ahn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of Xe(i.component.axes))n.axis[s]=moe(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=Ihn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of Ap){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Dt(a)){if(r[a]>0&&!u){const l=Chn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function Ihn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=khn(i,s)}}}else return t.map(n=>n.clone());return e}function khn(e,t){for(const n of EUe){const r=Vy(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return OBe(i,s);case"gridScale":return{explicit:i.explicit,value:ms(i.value,s.value)}}return Bj(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function Rhn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Dt(n.labelAngle)?n.labelAngle:Nk(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===B9e(r,i))return!0}return e===n[t]}const Nhn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Dhn(e,t){var y,v;let n=t.axis(e);const r=new Soe,i=zs(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||vfn(e),u=t.getScaleComponent(e).get("type"),l=ffn(e,u,a,t.config),c=n!==void 0?!n:uG("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=mfn(i,n,e,o.style,l),d=l8e(n.formatType,i,u),h=u8e(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const b of EUe){const w=b in l1e?l1e[b](p):Mve(b)?n[b]:void 0,E=w!==void 0,x=Rhn(w,b,n,t,e);if(E&&x)r.set(b,w,x);else{const{configValue:S=void 0,configFrom:C=void 0}=Mve(b)&&b!=="values"?uG(b,o.style,n.style,l):{},I=S!==void 0;E&&!I?r.set(b,w,x):(C!=="vgAxisConfig"||Nhn.has(b)&&I||NN(S)||Dt(S))&&r.set(b,S,!1)}}const m=n.encoding??{},g=I8e.reduce((b,w)=>{if(!r.hasAxisPart(w))return b;const E=W9e(m[w]??{},t),x=w==="labels"?Shn(t,e,E):E;return x!==void 0&&!Hr(x)&&(b[w]={update:x}),b},{});return Hr(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function Phn({encoding:e,size:t}){for(const n of Ap){const r=pl(n);rp(t[r])&&I0(e[n])&&(delete t[r],Ze(jBe(r)))}return t}const Ohn={vgMark:"arc",encodeEntry:e=>({...yf(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Ea("x",e,{defaultPos:"mid"}),...Ea("y",e,{defaultPos:"mid"}),...Hy(e,"radius"),...Hy(e,"theta")})},$hn={vgMark:"area",encodeEntry:e=>({...yf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...qL("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...qL("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...coe(e)})},Mhn={vgMark:"rect",encodeEntry:e=>({...yf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Hy(e,"x"),...Hy(e,"y")})},Lhn={vgMark:"shape",encodeEntry:e=>({...yf(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&et(n)&&n.type===PT?{field:at(n,{expr:"datum"})}:{}}]}},Fhn={vgMark:"image",encodeEntry:e=>({...yf(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Hy(e,"x"),...Hy(e,"y"),...uoe(e,"url")})},jhn={vgMark:"line",encodeEntry:e=>({...yf(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Ea("x",e,{defaultPos:"mid"}),...Ea("y",e,{defaultPos:"mid"}),...oo("size",e,{vgChannel:"strokeWidth"}),...coe(e)})},Bhn={vgMark:"trail",encodeEntry:e=>({...yf(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Ea("x",e,{defaultPos:"mid"}),...Ea("y",e,{defaultPos:"mid"}),...oo("size",e),...coe(e)})};function Toe(e,t){const{config:n}=e;return{...yf(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Ea("x",e,{defaultPos:"mid"}),...Ea("y",e,{defaultPos:"mid"}),...oo("size",e),...oo("angle",e),...Uhn(e,n,t)}}function Uhn(e,t,n){return n?{shape:{value:n}}:oo("shape",e)}const zhn={vgMark:"symbol",encodeEntry:e=>Toe(e)},Vhn={vgMark:"symbol",encodeEntry:e=>Toe(e,"circle")},Hhn={vgMark:"symbol",encodeEntry:e=>Toe(e,"square")},qhn={vgMark:"rect",encodeEntry:e=>({...yf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Hy(e,"x"),...Hy(e,"y")})},Whn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...yf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...qL("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...qL("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...oo("size",e,{vgChannel:"strokeWidth"})}}},Ghn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...yf(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Ea("x",e,{defaultPos:"mid"}),...Ea("y",e,{defaultPos:"mid"}),...uoe(e),...oo("size",e,{vgChannel:"fontSize"}),...oo("angle",e),...s1e("align",Yhn(e.markDef,n,t)),...s1e("baseline",Khn(e.markDef,n,t)),...Ea("radius",e,{defaultPos:null}),...Ea("theta",e,{defaultPos:null})}}};function Yhn(e,t,n){if(Sr("align",e,n)===void 0)return"center"}function Khn(e,t,n){if(Sr("baseline",e,n)===void 0)return"middle"}const Xhn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...yf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Ea("x",e,{defaultPos:"mid",vgChannel:"xc"}),...Ea("y",e,{defaultPos:"mid",vgChannel:"yc"}),...oo("size",e,{defaultValue:Qhn(e),vgChannel:i}),[s]:mi(Sr("thickness",n,t))}}};function Qhn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=Sr("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&Sv(a)&&hr(a.step)?a.step*3/4:VL(t.view,i)*3/4}}const RP={arc:Ohn,area:$hn,bar:Mhn,circle:Vhn,geoshape:Lhn,image:Fhn,line:jhn,point:zhn,rect:qhn,rule:Whn,square:Hhn,text:Ghn,tick:Xhn,trail:Bhn};function Jhn(e){if(Gn([Ij,Cj,hun],e.mark)){const t=O8e(e.mark,e.encoding);if(t.length>0)return Zhn(e,t)}else if(e.mark===Aj){const t=XW.some(n=>Sr(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return epn(e)}return Coe(e)}const C1e="faceted_path_";function Zhn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:C1e+e.requestDataName(Ti.Main),data:e.requestDataName(Ti.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Coe(e,{fromPrefix:C1e})}]}const A1e="stack_group_";function epn(e){var l;const[t]=Coe(e,{fromPrefix:A1e}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...nS(t.encode.update,["y","yc","y2","height",...XW]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...tl(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...nS(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...tl(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of XW){const f=ig(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=mi(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=at(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(at(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=ig(f,e.markDef,e.config);return d!==void 0?{...c,[f]:mi(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Ti.Main),name:A1e+e.requestDataName(Ti.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function tpn(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!je(o)&&vd(o)&&YW(o.value)||!o&&YW(Sr("order",i,s)))){if((je(o)||et(o))&&!n)return NBe(o,{expr:"datum"});if(M_(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(et(l)){const c=l.sort;if(je(c))return{field:at(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(Mh(c))return{field:at({aggregate:Gse(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(g8e(c)){const f=e.fieldDef(c.encoding);return{field:at(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:at(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function Coe(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=ms(r.clip,npn(e),rpn(e)),a=kBe(r),u=i.key,l=tpn(e),c=ipn(e),f=Sr("aria",r,s),d=RP[n].postEncodingTransform?RP[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:RP[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Ti.Main)},encode:{update:RP[n].encodeEntry(e)},...d?{transform:d}:{}}]}function npn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function rpn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function ipn(e){if(!e.component.selection)return null;const t=Xe(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Xe(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class xUe extends vUe{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,Fve(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=tp(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=zln(o,s,{graticule:t.data&&ooe(t.data)}));const u=this.encoding=Wun(t.encoding||{},a,o.filled,s);this.markDef=t9e(o,u,s),this.size=Phn({encoding:u,size:Fve(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=e9e(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>toe(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===h8e,r=t&&Hsn.some(i=>hn(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return Ej.reduce((r,i)=>{const s=zs(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Lu(t);return je(n)&&(i.domain=n.map(Nl)),je(r)&&(i.range=r.map(Nl)),i}initAxes(t){return Ap.reduce((n,r)=>{const i=t[r];if(hn(i)||r===Di&&hn(t.x2)||r===xo&&hn(t.y2)){const s=hn(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=Xe(t),r={};for(const i of n){const s=t[i];r[i]=NN(s)?IBe(s):Nl(s)}return r}initLegends(t){return eon.reduce((n,r)=>{const i=zs(t[r]);if(i&&non(r)){const s=i.legend;n[r]=s&&Lu(s)}return n},{})}parseData(){this.component.data=rB(this)}parseLayoutSize(){ghn(this)}parseSelections(){this.component.selection=afn(this,this.selection)}parseMarkGroup(){this.component.mark=Jhn(this)}parseAxesAndHeaders(){this.component.axes=Thn(this)}assembleSelectionTopLevelSignals(t){return kcn(this,t)}assembleSignals(){return[...L9e(this),...Acn(this,[])]}assembleSelectionData(t){return Rcn(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return poe(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!FT(this.parent))&&(t=p9e(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return rb(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return np(n)}typedFieldDef(t){const n=this.fieldDef(t);return fu(n)?n:null}}class Aoe extends Eoe{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(jj(a))return new Aoe(a,this,this.getName(`layer_${u}`),o,s);if(Ng(a))return new xUe(a,this,this.getName(`layer_${u}`),o,s);throw new Error(_se(a))})}parseData(){this.component.data=rB(this);for(const t of this.children)t.parseData()}parseLayoutSize(){phn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Xe(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Ahn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),L9e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),poe(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of mt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Ncn(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),eUe(this))}}function Ioe(e,t,n,r,i){if(Nj(e))return new F2(e,t,n,i);if(jj(e))return new Aoe(e,t,n,r,i);if(Ng(e))return new xUe(e,t,n,r,i);if(gln(e))return new whn(e,t,n,i);throw new Error(_se(e))}function spn(e,t={}){t.logger&&wan(t.logger),t.fieldTitle&&T8e(t.fieldTitle);try{const n=Z8e(_T(t.config,e.config)),r=u9e(e,n),i=Ioe(r,null,"",void 0,n);return i.parse(),kdn(i.component.data,i),{spec:apn(i,opn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&Ean(),t.fieldTitle&&Lun()}}function opn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):gt(t)&&(t={type:t}),i&&s&&xcn(t.type)){if(i==="step"&&s==="step")Ze(Eve()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Ze(Eve(wj(o)));const a=o==="width"?"height":"width";t.type=Scn(a)}}return{...Xe(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...Xve(n,!1),...Xve(e,!0)}}function apn(e,t,n={},r){const i=e.config?Rln(e.config):void 0,s=[].concat(e.assembleSelectionData([]),chn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...K8e(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const upn=Fsn.version,lpn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:rS,accessPathWithDatum:fse,compile:spn,contains:Gn,deepEqual:Bl,deleteNestedProperty:PL,duplicate:on,entries:By,every:use,fieldIntersection:cse,flatAccessWithDatum:uBe,getFirstDefined:ms,hasIntersection:lse,hash:Wn,internalField:fBe,isBoolean:Rk,isEmpty:Hr,isEqual:Bsn,isInternalField:dBe,isNullOrFalse:YW,isNumeric:mj,keys:Xe,logicalExpr:M2,mergeDeep:oBe,never:sBe,normalize:u9e,normalizeAngle:Nk,omit:tl,pick:nS,prefixGenerator:KW,removePathFromField:NT,replaceAll:Vb,replacePathInField:rf,resetIdCounter:zsn,setEqual:aBe,some:zb,stringify:qr,titleCase:wN,unique:wh,uniqueId:cBe,vals:Wo,varName:Ni,version:upn},Symbol.toStringTag,{value:"Module"}));function SUe(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var cpn="vega-themes",fpn="2.15.0",dpn="Themes for stylized Vega and Vega-Lite visualizations.",hpn=["vega","vega-lite","themes","style"],ppn="BSD-3-Clause",mpn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},gpn=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],ypn="build/vega-themes.js",koe="build/vega-themes.module.js",vpn="build/vega-themes.min.js",bpn="build/vega-themes.min.js",_pn="build/vega-themes.module.d.ts",wpn={type:"git",url:"https://github.com/vega/vega-themes.git"},Epn=["src","build"],xpn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},Spn={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},Tpn={vega:"*","vega-lite":"*"},Cpn={},Apn={name:cpn,version:fpn,description:dpn,keywords:hpn,license:ppn,author:mpn,contributors:gpn,main:ypn,module:koe,unpkg:vpn,jsdelivr:bpn,types:_pn,repository:wpn,files:Epn,scripts:xpn,devDependencies:Spn,peerDependencies:Tpn,dependencies:Cpn};const gw="#fff",I1e="#888",Ipn={background:"#333",view:{stroke:I1e},title:{color:gw,subtitleColor:gw},style:{"guide-label":{fill:gw},"guide-title":{fill:gw}},axis:{domainColor:gw,gridColor:I1e,tickColor:gw}},jv="#4572a7",kpn={background:"#fff",arc:{fill:jv},area:{fill:jv},line:{stroke:jv,strokeWidth:2},path:{stroke:jv},rect:{fill:jv},shape:{stroke:jv},symbol:{fill:jv,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Bv="#30a2da",m7="#cbcbcb",Rpn="#999",Npn="#333",k1e="#f0f0f0",R1e="#333",Dpn={arc:{fill:Bv},area:{fill:Bv},axis:{domainColor:m7,grid:!0,gridColor:m7,gridWidth:1,labelColor:Rpn,labelFontSize:10,titleColor:Npn,tickColor:m7,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:k1e,group:{fill:k1e},legend:{labelColor:R1e,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:R1e,titleFontSize:14,titlePadding:10},line:{stroke:Bv,strokeWidth:2},path:{stroke:Bv,strokeWidth:.5},rect:{fill:Bv},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Bv},bar:{binSpacing:2,fill:Bv,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Uv="#000",Ppn={group:{fill:"#e5e5e5"},arc:{fill:Uv},area:{fill:Uv},line:{stroke:Uv},path:{stroke:Uv},rect:{fill:Uv},shape:{stroke:Uv},symbol:{fill:Uv,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Opn=22,$pn="normal",N1e="Benton Gothic, sans-serif",D1e=11.5,Mpn="normal",zv="#82c6df",g7="Benton Gothic Bold, sans-serif",P1e="normal",O1e=13,UC={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Lpn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:g7,fontSize:Opn,fontWeight:$pn},arc:{fill:zv},area:{fill:zv},line:{stroke:zv,strokeWidth:2},path:{stroke:zv},rect:{fill:zv},shape:{stroke:zv},symbol:{fill:zv,size:30},axis:{labelFont:N1e,labelFontSize:D1e,labelFontWeight:Mpn,titleFont:g7,titleFontSize:O1e,titleFontWeight:P1e},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:N1e,labelFontSize:D1e,symbolType:"square",titleFont:g7,titleFontSize:O1e,titleFontWeight:P1e},range:{category:UC["category-6"],diverging:UC["fireandice-6"],heatmap:UC["fire-7"],ordinal:UC["fire-7"],ramp:UC["fire-7"]}},Vv="#ab5787",NP="#979797",Fpn={background:"#f9f9f9",arc:{fill:Vv},area:{fill:Vv},line:{stroke:Vv},path:{stroke:Vv},rect:{fill:Vv},shape:{stroke:Vv},symbol:{fill:Vv,size:30},axis:{domainColor:NP,domainWidth:.5,gridWidth:.2,labelColor:NP,tickColor:NP,tickWidth:.2,titleColor:NP},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Hv="#3e5c69",jpn={background:"#fff",arc:{fill:Hv},area:{fill:Hv},line:{stroke:Hv},path:{stroke:Hv},rect:{fill:Hv},shape:{stroke:Hv},symbol:{fill:Hv},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Ec="#1696d2",$1e="#000000",Bpn="#FFFFFF",DP="Lato",y7="Lato",Upn="Lato",zpn="#DEDDDD",Vpn=18,zC={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Hpn={background:Bpn,title:{anchor:"start",fontSize:Vpn,font:DP},axisX:{domain:!0,domainColor:$1e,domainWidth:1,grid:!1,labelFontSize:12,labelFont:y7,labelAngle:0,tickColor:$1e,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:DP},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:zpn,gridWidth:1,labelFontSize:12,labelFont:y7,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:DP,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:y7,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:DP,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:zC["six-groups-cat-1"],diverging:zC["diverging-colors"],heatmap:zC["diverging-colors"],ordinal:zC["six-groups-seq"],ramp:zC["shades-blue"]},area:{fill:Ec},rect:{fill:Ec},line:{color:Ec,stroke:Ec,strokeWidth:5},trail:{color:Ec,stroke:Ec,strokeWidth:0,size:1},path:{stroke:Ec,strokeWidth:.5},point:{filled:!0},text:{font:Upn,color:Ec,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Ec,stroke:null}},arc:{fill:Ec},shape:{stroke:Ec},symbol:{fill:Ec,size:30}},qv="#3366CC",M1e="#ccc",PP="Arial, sans-serif",qpn={arc:{fill:qv},area:{fill:qv},path:{stroke:qv},rect:{fill:qv},shape:{stroke:qv},symbol:{stroke:qv},circle:{fill:qv},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:PP,fontSize:12},"guide-title":{font:PP,fontSize:12},"group-title":{font:PP,fontSize:12}},title:{font:PP,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:M1e,tickColor:M1e,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Roe=e=>e*(1/3+1),L1e=Roe(9),F1e=Roe(10),j1e=Roe(12),VC="Segoe UI",B1e="wf_standard-font, helvetica, arial, sans-serif",U1e="#252423",HC="#605E5C",z1e="transparent",Wpn="#C8C6C4",Af="#118DFF",Gpn="#12239E",Ypn="#E66C37",Kpn="#6B007B",Xpn="#E044A7",Qpn="#744EC2",Jpn="#D9B300",Zpn="#D64550",TUe=Af,CUe="#DEEFFF",V1e=[CUe,TUe],emn=[CUe,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",TUe],tmn={view:{stroke:z1e},background:z1e,font:VC,header:{titleFont:B1e,titleFontSize:j1e,titleColor:U1e,labelFont:VC,labelFontSize:F1e,labelColor:HC},axis:{ticks:!1,grid:!1,domain:!1,labelColor:HC,labelFontSize:L1e,titleFont:B1e,titleColor:U1e,titleFontSize:j1e,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Wpn,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Af},line:{stroke:Af,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:VC,fontSize:L1e,fill:HC},arc:{fill:Af},area:{fill:Af,line:!0,opacity:.6},path:{stroke:Af},rect:{fill:Af},point:{fill:Af,filled:!0,size:75},shape:{stroke:Af},symbol:{fill:Af,strokeWidth:1.5,size:50},legend:{titleFont:VC,titleFontWeight:"bold",titleColor:HC,labelFont:VC,labelFontSize:F1e,labelColor:HC,symbolType:"circle",symbolSize:75},range:{category:[Af,Gpn,Ypn,Kpn,Xpn,Qpn,Jpn,Zpn],diverging:V1e,heatmap:V1e,ordinal:emn}},v7='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',nmn='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',b7=400,OP={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},rmn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],imn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function iB({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=OP.gridBg[e],i=OP.textPrimary[e],s=OP.textSecondary[e],o=n==="dark"?rmn:imn,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:v7,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:nmn,labelFontWeight:b7,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:OP.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:v7,fill:s,fontWeight:b7},"guide-title":{font:v7,fill:s,fontWeight:b7}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const smn=iB({theme:"white",background:"#ffffff"}),omn=iB({theme:"g10",background:"#f4f4f4"}),amn=iB({theme:"g90",background:"#262626"}),umn=iB({theme:"g100",background:"#161616"}),lmn=Apn.version,cmn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:omn,carbong100:umn,carbong90:amn,carbonwhite:smn,dark:Ipn,excel:kpn,fivethirtyeight:Dpn,ggplot2:Ppn,googlecharts:qpn,latimes:Lpn,powerbi:tmn,quartz:Fpn,urbaninstitute:Hpn,version:lmn,vox:jpn},Symbol.toStringTag,{value:"Module"}));function fmn(e,t,n,r){if(je(e))return`[${e.map(i=>t(gt(i)?i:H1e(i,n))).join(", ")}]`;if(yt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(yt(c)&&(c=H1e(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function dmn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function H1e(e,t){return JSON.stringify(e,dmn(t))}var hmn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const AUe="vg-tooltip-element",pmn={offsetX:10,offsetY:10,id:AUe,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:mmn,maxDepth:2,formatTooltip:fmn,baseURL:""};function mmn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function gmn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return hmn.toString().replace(AUe,e)}function ymn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class vmn{constructor(t){this.options={...pmn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=gmn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=ymn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var _7={};function bmn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var w7,q1e;function _mn(){return q1e||(q1e=1,w7=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),w7}var wmn=wr;wr.Node=Jb;wr.create=wr;function wr(e){var t=this;if(t instanceof wr||(t=new wr),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}wr.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};wr.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};wr.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};wr.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)xmn(this,arguments[e]);return this.length};wr.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Smn(this,arguments[e]);return this.length};wr.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};wr.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};wr.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};wr.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};wr.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};wr.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};wr.prototype.map=function(e,t){t=t||this;for(var n=new wr,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};wr.prototype.mapReverse=function(e,t){t=t||this;for(var n=new wr,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};wr.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};wr.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};wr.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};wr.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};wr.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new wr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};wr.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new wr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};wr.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=Emn(this,i,n[r]);return s};wr.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function Emn(e,t,n){var r=t===e.head?new Jb(n,null,t,e):new Jb(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function xmn(e,t){e.tail=new Jb(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Smn(e,t){e.head=new Jb(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Jb(e,t,n,r){if(!(this instanceof Jb))return new Jb(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{_mn()(wr)}catch{}const Tmn=wmn,E1=Symbol("max"),Jp=Symbol("length"),yw=Symbol("lengthCalculator"),j2=Symbol("allowStale"),V1=Symbol("maxAge"),Gp=Symbol("dispose"),W1e=Symbol("noDisposeOnSet"),Zs=Symbol("lruList"),If=Symbol("cache"),IUe=Symbol("updateAgeOnGet"),E7=()=>1;class Cmn{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[E1]=t.max||1/0;const n=t.length||E7;if(this[yw]=typeof n!="function"?E7:n,this[j2]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[V1]=t.maxAge||0,this[Gp]=t.dispose,this[W1e]=t.noDisposeOnSet||!1,this[IUe]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[E1]=t||1/0,qC(this)}get max(){return this[E1]}set allowStale(t){this[j2]=!!t}get allowStale(){return this[j2]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[V1]=t,qC(this)}get maxAge(){return this[V1]}set lengthCalculator(t){typeof t!="function"&&(t=E7),t!==this[yw]&&(this[yw]=t,this[Jp]=0,this[Zs].forEach(n=>{n.length=this[yw](n.value,n.key),this[Jp]+=n.length})),qC(this)}get lengthCalculator(){return this[yw]}get length(){return this[Jp]}get itemCount(){return this[Zs].length}rforEach(t,n){n=n||this;for(let r=this[Zs].tail;r!==null;){const i=r.prev;G1e(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Zs].head;r!==null;){const i=r.next;G1e(this,t,r,n),r=i}}keys(){return this[Zs].toArray().map(t=>t.key)}values(){return this[Zs].toArray().map(t=>t.value)}reset(){this[Gp]&&this[Zs]&&this[Zs].length&&this[Zs].forEach(t=>this[Gp](t.key,t.value)),this[If]=new Map,this[Zs]=new Tmn,this[Jp]=0}dump(){return this[Zs].map(t=>KL(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Zs]}set(t,n,r){if(r=r||this[V1],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[yw](n,t);if(this[If].has(t)){if(s>this[E1])return WE(this,this[If].get(t)),!1;const u=this[If].get(t).value;return this[Gp]&&(this[W1e]||this[Gp](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Jp]+=s-u.length,u.length=s,this.get(t),qC(this),!0}const o=new Amn(t,n,s,i,r);return o.length>this[E1]?(this[Gp]&&this[Gp](t,n),!1):(this[Jp]+=o.length,this[Zs].unshift(o),this[If].set(t,this[Zs].head),qC(this),!0)}has(t){if(!this[If].has(t))return!1;const n=this[If].get(t).value;return!KL(this,n)}get(t){return x7(this,t,!0)}peek(t){return x7(this,t,!1)}pop(){const t=this[Zs].tail;return t?(WE(this,t),t.value):null}del(t){WE(this,this[If].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[If].forEach((t,n)=>x7(this,n,!1))}}const x7=(e,t,n)=>{const r=e[If].get(t);if(r){const i=r.value;if(KL(e,i)){if(WE(e,r),!e[j2])return}else n&&(e[IUe]&&(r.value.now=Date.now()),e[Zs].unshiftNode(r));return i.value}},KL=(e,t)=>{if(!t||!t.maxAge&&!e[V1])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[V1]&&n>e[V1]},qC=e=>{if(e[Jp]>e[E1])for(let t=e[Zs].tail;e[Jp]>e[E1]&&t!==null;){const n=t.prev;WE(e,t),t=n}},WE=(e,t)=>{if(t){const n=t.value;e[Gp]&&e[Gp](n.key,n.value),e[Jp]-=n.length,e[If].delete(n.key),e[Zs].removeNode(t)}};class Amn{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const G1e=(e,t,n,r)=>{let i=n.value;KL(e,i)&&(WE(e,n),e[j2]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var Imn=Cmn;const kmn=Object.freeze({loose:!0}),Rmn=Object.freeze({}),Nmn=e=>e?typeof e!="object"?kmn:e:Rmn;var Noe=Nmn,yG={exports:{}};const Dmn="2.0.0",kUe=256,Pmn=Number.MAX_SAFE_INTEGER||9007199254740991,Omn=16,$mn=kUe-6,Mmn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Doe={MAX_LENGTH:kUe,MAX_SAFE_COMPONENT_LENGTH:Omn,MAX_SAFE_BUILD_LENGTH:$mn,MAX_SAFE_INTEGER:Pmn,RELEASE_TYPES:Mmn,SEMVER_SPEC_VERSION:Dmn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Lmn=typeof process=="object"&&_7&&_7.NODE_DEBUG&&/\bsemver\b/i.test(_7.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var sB=Lmn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Doe,s=sB;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),b=c++;s(m,b,g),l[m]=b,u[b]=g,o[b]=new RegExp(g,y?"g":void 0),a[b]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(yG,yG.exports);var Poe=yG.exports;const Y1e=/^[0-9]+$/,RUe=(e,t)=>{const n=Y1e.test(e),r=Y1e.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},Fmn=(e,t)=>RUe(t,e);var jmn={compareIdentifiers:RUe,rcompareIdentifiers:Fmn};const $P=sB,{MAX_LENGTH:K1e,MAX_SAFE_INTEGER:MP}=Doe,{safeRe:X1e,t:Q1e}=Poe,Bmn=Noe,{compareIdentifiers:vw}=jmn;let Umn=class Vd{constructor(t,n){if(n=Bmn(n),t instanceof Vd){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>K1e)throw new TypeError(`version is longer than ${K1e} characters`);$P("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?X1e[Q1e.LOOSE]:X1e[Q1e.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>MP||this.major<0)throw new TypeError("Invalid major version");if(this.minor>MP||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>MP||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<MP)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if($P("SemVer.compare",this.version,this.options,t),!(t instanceof Vd)){if(typeof t=="string"&&t===this.version)return 0;t=new Vd(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Vd||(t=new Vd(t,this.options)),vw(this.major,t.major)||vw(this.minor,t.minor)||vw(this.patch,t.patch)}comparePre(t){if(t instanceof Vd||(t=new Vd(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if($P("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return vw(r,i)}while(++n)}compareBuild(t){t instanceof Vd||(t=new Vd(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if($P("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return vw(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),vw(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Ooe=Umn;const J1e=Ooe,zmn=(e,t,n)=>new J1e(e,n).compare(new J1e(t,n));var jT=zmn;const Vmn=jT,Hmn=(e,t,n)=>Vmn(e,t,n)===0;var qmn=Hmn;const Wmn=jT,Gmn=(e,t,n)=>Wmn(e,t,n)!==0;var Ymn=Gmn;const Kmn=jT,Xmn=(e,t,n)=>Kmn(e,t,n)>0;var Qmn=Xmn;const Jmn=jT,Zmn=(e,t,n)=>Jmn(e,t,n)>=0;var egn=Zmn;const tgn=jT,ngn=(e,t,n)=>tgn(e,t,n)<0;var rgn=ngn;const ign=jT,sgn=(e,t,n)=>ign(e,t,n)<=0;var ogn=sgn;const agn=qmn,ugn=Ymn,lgn=Qmn,cgn=egn,fgn=rgn,dgn=ogn,hgn=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return agn(e,n,r);case"!=":return ugn(e,n,r);case">":return lgn(e,n,r);case">=":return cgn(e,n,r);case"<":return fgn(e,n,r);case"<=":return dgn(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var pgn=hgn,S7,Z1e;function mgn(){if(Z1e)return S7;Z1e=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}S7=t;const n=Noe,{safeRe:r,t:i}=Poe,s=pgn,o=sB,a=Ooe,u=NUe();return S7}var T7,ebe;function NUe(){if(ebe)return T7;ebe=1;class e{constructor($,L){if(L=r(L),$ instanceof e)return $.loose===!!L.loose&&$.includePrerelease===!!L.includePrerelease?$:new e($.raw,L);if($ instanceof i)return this.raw=$.value,this.set=[[$]],this.format(),this;if(this.options=L,this.loose=!!L.loose,this.includePrerelease=!!L.includePrerelease,this.raw=$.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(M=>this.parseRange(M.trim())).filter(M=>M.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const M=this.set[0];if(this.set=this.set.filter(B=>!p(B[0])),this.set.length===0)this.set=[M];else if(this.set.length>1){for(const B of this.set)if(B.length===1&&m(B[0])){this.set=[B];break}}}this.format()}format(){return this.range=this.set.map($=>$.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange($){const M=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+$,B=n.get(M);if(B)return B;const U=this.options.loose,V=U?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];$=$.replace(V,R(this.options.includePrerelease)),s("hyphen replace",$),$=$.replace(a[u.COMPARATORTRIM],l),s("comparator trim",$),$=$.replace(a[u.TILDETRIM],c),s("tilde trim",$),$=$.replace(a[u.CARETTRIM],f),s("caret trim",$);let D=$.split(" ").map(q=>y(q,this.options)).join(" ").split(/\s+/).map(q=>k(q,this.options));U&&(D=D.filter(q=>(s("loose invalid filter",q,this.options),!!q.match(a[u.COMPARATORLOOSE])))),s("range list",D);const z=new Map,W=D.map(q=>new i(q,this.options));for(const q of W){if(p(q))return[q];z.set(q.value,q)}z.size>1&&z.has("")&&z.delete("");const j=[...z.values()];return n.set(M,j),j}intersects($,L){if(!($ instanceof e))throw new TypeError("a Range is required");return this.set.some(M=>g(M,L)&&$.set.some(B=>g(B,L)&&M.every(U=>B.every(V=>U.intersects(V,L)))))}test($){if(!$)return!1;if(typeof $=="string")try{$=new o($,this.options)}catch{return!1}for(let L=0;L<this.set.length;L++)if(O(this.set[L],$,this.options))return!0;return!1}}T7=e;const t=Imn,n=new t({max:1e3}),r=Noe,i=mgn(),s=sB,o=Ooe,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=Poe,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=Doe,p=P=>P.value==="<0.0.0-0",m=P=>P.value==="",g=(P,$)=>{let L=!0;const M=P.slice();let B=M.pop();for(;L&&M.length;)L=M.every(U=>B.intersects(U,$)),B=M.pop();return L},y=(P,$)=>(s("comp",P,$),P=E(P,$),s("caret",P),P=b(P,$),s("tildes",P),P=S(P,$),s("xrange",P),P=I(P,$),s("stars",P),P),v=P=>!P||P.toLowerCase()==="x"||P==="*",b=(P,$)=>P.trim().split(/\s+/).map(L=>w(L,$)).join(" "),w=(P,$)=>{const L=$.loose?a[u.TILDELOOSE]:a[u.TILDE];return P.replace(L,(M,B,U,V,D)=>{s("tilde",P,M,B,U,V,D);let z;return v(B)?z="":v(U)?z=`>=${B}.0.0 <${+B+1}.0.0-0`:v(V)?z=`>=${B}.${U}.0 <${B}.${+U+1}.0-0`:D?(s("replaceTilde pr",D),z=`>=${B}.${U}.${V}-${D} <${B}.${+U+1}.0-0`):z=`>=${B}.${U}.${V} <${B}.${+U+1}.0-0`,s("tilde return",z),z})},E=(P,$)=>P.trim().split(/\s+/).map(L=>x(L,$)).join(" "),x=(P,$)=>{s("caret",P,$);const L=$.loose?a[u.CARETLOOSE]:a[u.CARET],M=$.includePrerelease?"-0":"";return P.replace(L,(B,U,V,D,z)=>{s("caret",P,B,U,V,D,z);let W;return v(U)?W="":v(V)?W=`>=${U}.0.0${M} <${+U+1}.0.0-0`:v(D)?U==="0"?W=`>=${U}.${V}.0${M} <${U}.${+V+1}.0-0`:W=`>=${U}.${V}.0${M} <${+U+1}.0.0-0`:z?(s("replaceCaret pr",z),U==="0"?V==="0"?W=`>=${U}.${V}.${D}-${z} <${U}.${V}.${+D+1}-0`:W=`>=${U}.${V}.${D}-${z} <${U}.${+V+1}.0-0`:W=`>=${U}.${V}.${D}-${z} <${+U+1}.0.0-0`):(s("no pr"),U==="0"?V==="0"?W=`>=${U}.${V}.${D}${M} <${U}.${V}.${+D+1}-0`:W=`>=${U}.${V}.${D}${M} <${U}.${+V+1}.0-0`:W=`>=${U}.${V}.${D} <${+U+1}.0.0-0`),s("caret return",W),W})},S=(P,$)=>(s("replaceXRanges",P,$),P.split(/\s+/).map(L=>C(L,$)).join(" ")),C=(P,$)=>{P=P.trim();const L=$.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return P.replace(L,(M,B,U,V,D,z)=>{s("xRange",P,M,B,U,V,D,z);const W=v(U),j=W||v(V),q=j||v(D),G=q;return B==="="&&G&&(B=""),z=$.includePrerelease?"-0":"",W?B===">"||B==="<"?M="<0.0.0-0":M="*":B&&G?(j&&(V=0),D=0,B===">"?(B=">=",j?(U=+U+1,V=0,D=0):(V=+V+1,D=0)):B==="<="&&(B="<",j?U=+U+1:V=+V+1),B==="<"&&(z="-0"),M=`${B+U}.${V}.${D}${z}`):j?M=`>=${U}.0.0${z} <${+U+1}.0.0-0`:q&&(M=`>=${U}.${V}.0${z} <${U}.${+V+1}.0-0`),s("xRange return",M),M})},I=(P,$)=>(s("replaceStars",P,$),P.trim().replace(a[u.STAR],"")),k=(P,$)=>(s("replaceGTE0",P,$),P.trim().replace(a[$.includePrerelease?u.GTE0PRE:u.GTE0],"")),R=P=>($,L,M,B,U,V,D,z,W,j,q,G,te)=>(v(M)?L="":v(B)?L=`>=${M}.0.0${P?"-0":""}`:v(U)?L=`>=${M}.${B}.0${P?"-0":""}`:V?L=`>=${L}`:L=`>=${L}${P?"-0":""}`,v(W)?z="":v(j)?z=`<${+W+1}.0.0-0`:v(q)?z=`<${W}.${+j+1}.0-0`:G?z=`<=${W}.${j}.${q}-${G}`:P?z=`<${W}.${j}.${+q+1}-0`:z=`<=${z}`,`${L} ${z}`.trim()),O=(P,$,L)=>{for(let M=0;M<P.length;M++)if(!P[M].test($))return!1;if($.prerelease.length&&!L.includePrerelease){for(let M=0;M<P.length;M++)if(s(P[M].semver),P[M].semver!==i.ANY&&P[M].semver.prerelease.length>0){const B=P[M].semver;if(B.major===$.major&&B.minor===$.minor&&B.patch===$.patch)return!0}return!1}return!0};return T7}const ggn=NUe(),ygn=(e,t,n)=>{try{t=new ggn(t,n)}catch{return!1}return t.test(e)};var vgn=ygn,DUe=bmn(vgn);function bgn(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var _gn=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function PUe(e,...t){for(const n of t)wgn(e,n);return e}function wgn(e,t){for(const n of Object.keys(t))wT(e,n,t[n],!0)}const Rf=isn;let Lk=lpn;const LP=typeof window<"u"?window:void 0;var lbe;Lk===void 0&&((lbe=LP==null?void 0:LP.vl)!=null&&lbe.compile)&&(Lk=LP.vl);const Egn={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},xgn={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},MA={vega:"Vega","vega-lite":"Vega-Lite"},XL={vega:Rf.version,"vega-lite":Lk?Lk.version:"not available"},Sgn={vega:e=>e,"vega-lite":(e,t)=>Lk.compile(e,{config:t}).spec},Tgn=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Cgn="chart-wrapper";function Agn(e){return typeof e=="function"}function tbe(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${MA[r]} JSON Source`}function Ign(e,t){if(e.$schema){const n=SUe(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${MA[n.library]}, but mode argument sets ${MA[t]??t}.`);const r=n.library;return DUe(XL[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${MA[r]} ${n.version}, but the current version of ${MA[r]} is v${XL[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function OUe(e){return!!(e&&"load"in e)}function nbe(e){return OUe(e)?e:Rf.loader(e)}function kgn(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return gt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function Rgn(e,t,n={}){let r,i;gt(t)?(i=nbe(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=kgn(r),o=s.loader;(!i||o)&&(i=nbe(n.loader??o));const a=await rbe(s,i),u=await rbe(n,i),l={...PUe(u,a),config:_T(u.config??{},a.config??{})};return await Dgn(e,r,l,i)}async function rbe(e,t){const n=gt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=gt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function Ngn(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Dgn(e,t,n={},r){const i=n.theme?_T(cmn[n.theme],n.config??{}):n.config,s=mv(n.actions)?n.actions:PUe({},Egn,n.actions??{}),o={...xgn,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??Rf.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:x,rootContainer:S}=Ngn(c);if(!x.getElementById(E)){const C=document.createElement("style");C.id=E,C.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?_gn.toString():n.defaultStyle,S.appendChild(C)}}const f=Ign(t,n.mode);let d=Sgn[f](t,i);if(f==="vega-lite"&&d.$schema){const E=SUe(d.$schema);DUe(XL.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${XL.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const E=document.createElement("div");E.classList.add(Cgn),c.appendChild(E),h=E}const p=n.patch;if(p&&(d=p instanceof Function?p(d):_5(d,p,!0,!1).newDocument),n.formatLocale&&Rf.formatLocale(n.formatLocale),n.timeFormatLocale&&Rf.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const x=n.expressionFunctions[E];"fn"in x?Rf.expressionFunction(E,x.fn,x.visitor):x instanceof Function&&Rf.expressionFunction(E,x)}const{ast:m}=n,g=Rf.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||Rf.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:Rf.expressionInterpreter??n.expr??psn}:{}});if(y.addSignalListener("autosize",(E,x)=>{const{type:S}=x;S=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):S=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):S=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:E,tooltip:x}=n,S=E&&!OUe(E)?E==null?void 0:E.baseURL:void 0,C=Agn(x)?x:new vmn({baseURL:S,...x===!0?{}:x}).call;y.tooltip(C)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:E,updateSet:x}=typeof v=="boolean"?{}:v;y.hover(E,x)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let b;if(s!==!1){let E=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const S=document.createElement("details");S.title=o.CLICK_TO_VIEW_ACTIONS,c.append(S),E=S;const C=document.createElement("summary");C.innerHTML=Tgn,S.append(C),b=I=>{S.contains(I.target)||S.removeAttribute("open")},document.addEventListener("click",b)}const x=document.createElement("div");if(E.append(x),x.classList.add("vega-actions"),s===!0||s.export!==!1){for(const S of["svg","png"])if(s===!0||s.export===!0||s.export[S]){const C=o[`${S.toUpperCase()}_ACTION`],I=document.createElement("a"),k=yt(n.scaleFactor)?n.scaleFactor[S]:n.scaleFactor;I.text=C,I.href="#",I.target="_blank",I.download=`${l}.${S}`,I.addEventListener("mousedown",async function(R){R.preventDefault();const O=await y.toImageURL(S,k);this.href=O}),x.append(I)}}if(s===!0||s.source!==!1){const S=document.createElement("a");S.text=o.SOURCE_ACTION,S.href="#",S.addEventListener("click",function(C){tbe(CU(t),n.sourceHeader??"",n.sourceFooter??"",f),C.preventDefault()}),x.append(S)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const S=document.createElement("a");S.text=o.COMPILED_ACTION,S.href="#",S.addEventListener("click",function(C){tbe(CU(d),n.sourceHeader??"",n.sourceFooter??"","vega"),C.preventDefault()}),x.append(S)}if(s===!0||s.editor!==!1){const S=n.editorUrl??"https://vega.github.io/editor/",C=document.createElement("a");C.text=o.EDITOR_ACTION,C.href="#",C.addEventListener("click",function(I){bgn(window,S,{config:i,mode:f,renderer:a,spec:CU(t)}),I.preventDefault()}),x.append(C)}}function w(){b&&document.removeEventListener("click",b),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:w,embedOptions:n}}function Pgn(e){return!!e&&{}.toString.call(e)==="[object Function]"}function Ogn(e,t,n){n&&(Pgn(n)?n(e.data(t)):e.change(t,Rf.changeset().remove(()=>!0).insert(n)))}function $gn(e,t){Object.keys(t).forEach(n=>{Ogn(e,n,t[n])})}function $Ue(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const MUe=()=>{};function C7(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function Mgn(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=$Ue([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!sO(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function ibe(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function A7(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function LA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class LUe extends Pt.PureComponent{constructor(){super(...arguments),LA(this,"containerRef",Pt.createRef()),LA(this,"resultPromise",void 0),LA(this,"handleError",t=>{const{onError:n=MUe}=this.props;n(t,this.containerRef.current),console.warn(t)}),LA(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=$Ue([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=Mgn(A7(this.props),A7(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!Vq(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&ibe(a,s),i&&C7(a,i)),a.run()})}else Vq(i,s)||this.modifyView(o=>{s&&ibe(o,s),i&&C7(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=A7(this.props);this.resultPromise=Rgn(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;C7(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return Pt.createElement("div",{ref:this.containerRef,className:t,style:n})}}LA(LUe,"propTypes",{className:hle.string,onError:hle.func});function vG(){return vG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vG.apply(this,arguments)}function bG(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Lgn={};class FUe extends Pt.PureComponent{constructor(){super(...arguments),bG(this,"vegaEmbed",Pt.createRef()),bG(this,"handleNewView",t=>{this.update();const{onNewView:n=MUe}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){Vq(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{$gn(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return Pt.createElement(LUe,vG({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}bG(FUe,"defaultProps",{data:Lgn});function _G(){return _G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_G.apply(this,arguments)}function wG(e){return Pt.createElement(FUe,_G({},e,{mode:"vega-lite"}))}function Fgn({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:s}]=y6(!0),[o,a]=W1(),u=A.useMemo(()=>e.type==="metadata"?[]:t.map(d=>Object.entries(d.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(d=>d.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=A.useMemo(()=>{var d;return e.type==="metadata"||(d=r.correctAnswer)==null?void 0:d.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=A.useMemo(()=>{const f={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(m=>Object.entries(m.answers).filter(([g])=>g.slice(0,g.lastIndexOf("_"))===n)).map(m=>m.map(([g,y])=>(y.endTime-y.startTime)/1e3)).flat();return{...f,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const d={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(g=>g.value)),p=Math.max(...e.options.map(g=>g.value))),e.type==="likert"&&(h=1,p=e.numItems),{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?d.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?d.color:void 0,order:l!==void 0?d.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:l!==void 0?d.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?d.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return _.jsxs(wS,{p:"lg",withBorder:!0,ref:o,children:[_.jsxs(Nt,{direction:"row",justify:"space-between",onClick:s,children:[_.jsxs(Nt,{align:"center",children:[e.type==="metadata"&&_.jsx(Itt,{size:20}),e.type==="numerical"&&_.jsx(Ltt,{size:20}),(e.type==="shortText"||e.type==="longText")&&_.jsx(xtt,{size:20}),e.type==="likert"&&_.jsx(Ntt,{size:20}),e.type==="dropdown"&&_.jsx(Htt,{size:20}),e.type==="slider"&&_.jsx(vtt,{size:20}),e.type==="radio"&&_.jsx(Btt,{size:20}),e.type==="checkbox"&&_.jsx(qtt,{size:20}),e.type==="iframe"&&_.jsx(Ott,{size:20}),_.jsx(ki,{order:5,ml:4,children:e.id})]}),_.jsx(Att,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),_.jsxs(b6,{in:i,mah:400,children:[_.jsx(me,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:_.jsx(sx,{})}),_.jsxs(ZK,{cols:2,h:360,children:[_.jsx(Om,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="iframe"?_.jsx(wG,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):_.jsxs(Nt,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&_.jsx(YA,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&_.jsxs(_.Fragment,{children:[_.jsx(ze,{fw:700,children:"Response Values: "}),u.map((f,d)=>_.jsx(Nt,{align:"center",gap:"xs",children:_.jsx(ze,{children:f[e.id]})},d))]})]})}),_.jsx(Om,{mih:200,children:e.type==="metadata"?_.jsx(wG,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):_.jsxs(_.Fragment,{children:[_.jsx(ze,{fw:700,children:"Response Specification: "}),_.jsx(YA,{block:!0,children:JSON.stringify(e,null,2)}),_.jsx("br",{}),l&&_.jsxs(_.Fragment,{children:[_.jsx(ze,{fw:700,children:"Correct Answer: "}),_.jsx(YA,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function jgn({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&A$e(t.components[n],t),i=A.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?_.jsx(Nt,{w:"100%",direction:"column",gap:"xs",children:i.map(s=>_.jsx(Fgn,{response:s,participantData:e,trialId:n,trialConfig:r},s.id))}):_.jsx(Nt,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:_.jsx(ze,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function Bgn({studyConfig:e,inprogress:t,completed:n,rejected:r}){const[i,s]=A.useState([...n]),o=A.useCallback(l=>{const c=[];l.includes("completed")&&c.push(...n),l.includes("inprogress")&&c.push(...t),l.includes("rejected")&&c.push(...r),s(c)},[n,t,r]),a=A.useMemo(()=>{let l=B0(e.sequence);return l=HX(l,"root"),l.components.push("end"),l},[e.sequence]),{trialId:u}=Lm();return _.jsxs(wS,{shadow:"sm",p:"md",withBorder:!0,children:[_.jsx(Nt,{direction:"row",justify:"space-between",children:_.jsx(Ol.Group,{defaultValue:["completed"],onChange:o,mb:"xs",mt:8,ml:"xs",children:_.jsxs(Rs,{children:[_.jsx(Ol,{value:"completed",label:"Completed"}),_.jsx(Ol,{value:"inprogress",label:"In Progress"}),_.jsx(Ol,{value:"rejected",label:"Rejected"})]})})}),_.jsx(sx,{my:"xs"}),i.length===0?_.jsx(Nt,{justify:"center",align:"center",pt:"lg",pb:"md",children:_.jsx(ze,{children:"No data available."})}):_.jsxs(Nt,{direction:"row",children:[_.jsx(me,{w:340,children:_.jsx(j3,{configSequence:a,participantSequence:a,fullSequence:a,participantView:!1,studyConfig:e,analysisNavigation:!0})}),_.jsx(sx,{orientation:"vertical",mx:"md"}),_.jsx(jgn,{participantData:i,studyConfig:e,trialId:u})]})]})}function Ugn({globalConfig:e}){const{studyId:t}=Lm(),[n,r]=A.useState([]),[i,s]=A.useState(void 0),[o,a]=A.useState(!1),{storageEngine:u}=Ds(),l=lp(),{tab:c}=Lm(),{user:f}=S_(),d=A.useCallback(async()=>{if(a(!0),t){const g=await Y4(t,e);if(!g||!u)return;await u.initializeStudyDb(t,g);const y=await u.getAllParticipantsData();r(y),s(g),a(!1)}},[e,u,t]);A.useEffect(()=>{d()},[e,u,t,d]);const[h,p,m]=A.useMemo(()=>{const g=n.filter(b=>!b.rejected&&b.completed),y=n.filter(b=>!b.rejected&&!b.completed),v=n.filter(b=>b.rejected);return[g,y,v]},[n]);return _.jsxs(_.Fragment,{children:[_.jsx(k2,{studyIds:e.configsList}),_.jsx(yi.Main,{children:_.jsxs(Xc,{fluid:!0,style:{height:"100%",position:"relative"},children:[_.jsx(Xl,{visible:o}),_.jsxs(Nt,{direction:"row",align:"center",children:[_.jsx(ki,{order:5,children:t}),_.jsx(ELe,{completed:h.length,inProgress:p.length,rejected:m.length})]}),_.jsx(zl,{h:"xs"}),_.jsxs(as,{variant:"outline",value:c,onChange:g=>l(`/analysis/stats/${t}/${g}`),style:{height:"100%"},children:[_.jsxs(as.List,{children:[_.jsx(as.Tab,{value:"table",leftSection:_.jsx(Wtt,{size:16}),children:"Table View"}),_.jsx(as.Tab,{value:"stats",leftSection:_.jsx(Ttt,{size:16}),children:"Trial Stats"}),_.jsx(Ii,{label:"Coming soon",position:"bottom",children:_.jsx(as.Tab,{value:"replay",leftSection:_.jsx(jtt,{size:16}),disabled:!0,children:"Participant Replay"})}),_.jsx(as.Tab,{value:"manage",leftSection:_.jsx(ISe,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),_.jsx(as.Panel,{value:"table",pt:"xs",children:i&&_.jsx(Xzt,{completed:h,inProgress:p,rejected:m,studyConfig:i,refresh:d})}),_.jsx(as.Panel,{value:"stats",pt:"xs",children:i&&_.jsx(Bgn,{studyConfig:i,completed:h,inprogress:p,rejected:m})}),_.jsx(as.Panel,{value:"replay",pt:"xs",children:"Replay Tab Content"}),_.jsx(as.Panel,{value:"manage",pt:"xs",children:t&&f.isAdmin?_.jsx(iVt,{studyId:t,refresh:d}):_.jsx(Xc,{mt:20,children:_.jsx(CS,{title:"Unauthorized Access",variant:"light",color:"red",icon:_.jsx(CSe,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function sbe({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=S_(),{storageEngine:o}=Ds(),[a,u]=A.useState(!1),l=Lm();return A.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?_.jsx(Xl,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?_.jsx(pX,{to:"/login"}):_.jsx(_.Fragment,{children:e})}async function jUe(e,t){if(e instanceof Dc){t(!0);const n=new sm,r=G3();try{await Bjt(r,n,vMe)}catch(i){nL({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function zgn(){const{user:e}=S_(),[t,n]=A.useState(!1),{storageEngine:r}=Ds();return A.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&nL({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?_.jsx(pX,{to:"/"}):_.jsx(Xc,{children:_.jsx(a_,{padding:"lg",children:_.jsxs(Nt,{align:"center",direction:"column",justify:"center",children:[_.jsx(dg,{maw:200,mt:50,mb:100,src:`${Qu}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsxs(_.Fragment,{children:[_.jsx(ze,{mb:20,children:"To access admin settings, please sign in using your Google account."}),_.jsx(dn,{onClick:()=>jUe(r,n),leftSection:_.jsx(Gtt,{}),variant:"filled",children:"Sign In With Google"})]}),_.jsx(Xl,{visible:t})]})})})}var BUe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(ao,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var L=["th","st","nd","rd"],M=$%100;return"["+$+(L[(M-20)%10]||L[M]||L[0])+"]"}},b=function($,L,M){var B=String($);return!B||B.length>=L?$:""+Array(L+1-B.length).join(M)+$},w={s:b,z:function($){var L=-$.utcOffset(),M=Math.abs(L),B=Math.floor(M/60),U=M%60;return(L<=0?"+":"-")+b(B,2,"0")+":"+b(U,2,"0")},m:function $(L,M){if(L.date()<M.date())return-$(M,L);var B=12*(M.year()-L.year())+(M.month()-L.month()),U=L.clone().add(B,f),V=M-U<0,D=L.clone().add(B+(V?-1:1),f);return+(-(B+(M-U)/(V?U-D:D-U))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},E="en",x={};x[E]=v;var S="$isDayjsObject",C=function($){return $ instanceof O||!(!$||!$[S])},I=function $(L,M,B){var U;if(!L)return E;if(typeof L=="string"){var V=L.toLowerCase();x[V]&&(U=V),M&&(x[V]=M,U=V);var D=L.split("-");if(!U&&D.length>1)return $(D[0])}else{var z=L.name;x[z]=L,U=z}return!B&&U&&(E=U),U||!B&&E},k=function($,L){if(C($))return $.clone();var M=typeof L=="object"?L:{};return M.date=$,M.args=arguments,new O(M)},R=w;R.l=I,R.i=C,R.w=function($,L){return k($,{locale:L.$L,utc:L.$u,x:L.$x,$offset:L.$offset})};var O=function(){function $(M){this.$L=I(M.locale,null,!0),this.parse(M),this.$x=this.$x||M.x||{},this[S]=!0}var L=$.prototype;return L.parse=function(M){this.$d=function(B){var U=B.date,V=B.utc;if(U===null)return new Date(NaN);if(R.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var D=U.match(g);if(D){var z=D[2]-1||0,W=(D[7]||"0").substring(0,3);return V?new Date(Date.UTC(D[1],z,D[3]||1,D[4]||0,D[5]||0,D[6]||0,W)):new Date(D[1],z,D[3]||1,D[4]||0,D[5]||0,D[6]||0,W)}}return new Date(U)}(M),this.init()},L.init=function(){var M=this.$d;this.$y=M.getFullYear(),this.$M=M.getMonth(),this.$D=M.getDate(),this.$W=M.getDay(),this.$H=M.getHours(),this.$m=M.getMinutes(),this.$s=M.getSeconds(),this.$ms=M.getMilliseconds()},L.$utils=function(){return R},L.isValid=function(){return this.$d.toString()!==m},L.isSame=function(M,B){var U=k(M);return this.startOf(B)<=U&&U<=this.endOf(B)},L.isAfter=function(M,B){return k(M)<this.startOf(B)},L.isBefore=function(M,B){return this.endOf(B)<k(M)},L.$g=function(M,B,U){return R.u(M)?this[B]:this.set(U,M)},L.unix=function(){return Math.floor(this.valueOf()/1e3)},L.valueOf=function(){return this.$d.getTime()},L.startOf=function(M,B){var U=this,V=!!R.u(B)||B,D=R.p(M),z=function(de,ye){var Ie=R.w(U.$u?Date.UTC(U.$y,ye,de):new Date(U.$y,ye,de),U);return V?Ie:Ie.endOf(l)},W=function(de,ye){return R.w(U.toDate()[de].apply(U.toDate("s"),(V?[0,0,0,0]:[23,59,59,999]).slice(ye)),U)},j=this.$W,q=this.$M,G=this.$D,te="set"+(this.$u?"UTC":"");switch(D){case h:return V?z(1,0):z(31,11);case f:return V?z(1,q):z(0,q+1);case c:var le=this.$locale().weekStart||0,fe=(j<le?j+7:j)-le;return z(V?G-fe:G+(6-fe),q);case l:case p:return W(te+"Hours",0);case u:return W(te+"Minutes",1);case a:return W(te+"Seconds",2);case o:return W(te+"Milliseconds",3);default:return this.clone()}},L.endOf=function(M){return this.startOf(M,!1)},L.$set=function(M,B){var U,V=R.p(M),D="set"+(this.$u?"UTC":""),z=(U={},U[l]=D+"Date",U[p]=D+"Date",U[f]=D+"Month",U[h]=D+"FullYear",U[u]=D+"Hours",U[a]=D+"Minutes",U[o]=D+"Seconds",U[s]=D+"Milliseconds",U)[V],W=V===l?this.$D+(B-this.$W):B;if(V===f||V===h){var j=this.clone().set(p,1);j.$d[z](W),j.init(),this.$d=j.set(p,Math.min(this.$D,j.daysInMonth())).$d}else z&&this.$d[z](W);return this.init(),this},L.set=function(M,B){return this.clone().$set(M,B)},L.get=function(M){return this[R.p(M)]()},L.add=function(M,B){var U,V=this;M=Number(M);var D=R.p(B),z=function(q){var G=k(V);return R.w(G.date(G.date()+Math.round(q*M)),V)};if(D===f)return this.set(f,this.$M+M);if(D===h)return this.set(h,this.$y+M);if(D===l)return z(1);if(D===c)return z(7);var W=(U={},U[a]=r,U[u]=i,U[o]=n,U)[D]||1,j=this.$d.getTime()+M*W;return R.w(j,this)},L.subtract=function(M,B){return this.add(-1*M,B)},L.format=function(M){var B=this,U=this.$locale();if(!this.isValid())return U.invalidDate||m;var V=M||"YYYY-MM-DDTHH:mm:ssZ",D=R.z(this),z=this.$H,W=this.$m,j=this.$M,q=U.weekdays,G=U.months,te=U.meridiem,le=function(ye,Ie,pe,qe){return ye&&(ye[Ie]||ye(B,V))||pe[Ie].slice(0,qe)},fe=function(ye){return R.s(z%12||12,ye,"0")},de=te||function(ye,Ie,pe){var qe=ye<12?"AM":"PM";return pe?qe.toLowerCase():qe};return V.replace(y,function(ye,Ie){return Ie||function(pe){switch(pe){case"YY":return String(B.$y).slice(-2);case"YYYY":return R.s(B.$y,4,"0");case"M":return j+1;case"MM":return R.s(j+1,2,"0");case"MMM":return le(U.monthsShort,j,G,3);case"MMMM":return le(G,j);case"D":return B.$D;case"DD":return R.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return le(U.weekdaysMin,B.$W,q,2);case"ddd":return le(U.weekdaysShort,B.$W,q,3);case"dddd":return q[B.$W];case"H":return String(z);case"HH":return R.s(z,2,"0");case"h":return fe(1);case"hh":return fe(2);case"a":return de(z,W,!0);case"A":return de(z,W,!1);case"m":return String(W);case"mm":return R.s(W,2,"0");case"s":return String(B.$s);case"ss":return R.s(B.$s,2,"0");case"SSS":return R.s(B.$ms,3,"0");case"Z":return D}return null}(ye)||D.replace(":","")})},L.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},L.diff=function(M,B,U){var V,D=this,z=R.p(B),W=k(M),j=(W.utcOffset()-this.utcOffset())*r,q=this-W,G=function(){return R.m(D,W)};switch(z){case h:V=G()/12;break;case f:V=G();break;case d:V=G()/3;break;case c:V=(q-j)/6048e5;break;case l:V=(q-j)/864e5;break;case u:V=q/i;break;case a:V=q/r;break;case o:V=q/n;break;default:V=q}return U?V:R.a(V)},L.daysInMonth=function(){return this.endOf(f).$D},L.$locale=function(){return x[this.$L]},L.locale=function(M,B){if(!M)return this.$L;var U=this.clone(),V=I(M,B,!0);return V&&(U.$L=V),U},L.clone=function(){return R.w(this.$d,this)},L.toDate=function(){return new Date(this.valueOf())},L.toJSON=function(){return this.isValid()?this.toISOString():null},L.toISOString=function(){return this.$d.toISOString()},L.toString=function(){return this.$d.toUTCString()},$}(),P=O.prototype;return k.prototype=P,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function($){P[$[1]]=function(L){return this.$g(L,$[0],$[1])}}),k.extend=function($,L){return $.$i||($(L,O,k),$.$i=!0),k},k.locale=I,k.isDayjs=C,k.unix=function($){return k(1e3*$)},k.en=x[E],k.Ls=x,k.p={},k})})(BUe);var Vgn=BUe.exports;const Ct=ml(Vgn);function Hgn({type:e,date:t,locale:n,format:r,labelSeparator:i}){const s=o=>Ct(o).locale(n).format(r);return e==="default"?t===null?"":s(t):e==="multiple"?t.map(s).join(", "):e==="range"&&Array.isArray(t)?t[0]&&t[1]?`${s(t[0])} ${i} ${s(t[1])}`:t[0]?`${s(t[0])} ${i} `:"":""}function qgn({formatter:e,...t}){return(e||Hgn)(t)}function Wgn({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function UUe({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:s}){var u,l,c;const o=Wgn({direction:t,size:s,rowIndex:r,cellIndex:i,levelIndex:n});if(!o)return;const a=(c=(l=(u=e.current)==null?void 0:u[o.levelIndex])==null?void 0:l[o.rowIndex])==null?void 0:c[o.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?UUe({controlsRef:e,direction:t,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:s}):a.focus())}function Ggn(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function Ygn(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function $oe({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const s=Ggn(i.key);if(s){i.preventDefault();const o=Ygn(e);UUe({controlsRef:e,direction:s,levelIndex:t,rowIndex:n,cellIndex:r,size:o})}}var zUe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(ao,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,u=function(d,h,p){p===void 0&&(p={});var m=new Date(d),g=function(y,v){v===void 0&&(v={});var b=v.timeZoneName||"short",w=y+"|"+b,E=r[w];return E||(E=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),r[w]=E),E}(h,p);return g.formatToParts(m)},l=function(d,h){for(var p=u(d,h),m=[],g=0;g<p.length;g+=1){var y=p[g],v=y.type,b=y.value,w=n[v];w>=0&&(m[w]=parseInt(b,10))}var E=m[3],x=E===24?0:E,S=m[0]+"-"+m[1]+"-"+m[2]+" "+x+":"+m[4]+":"+m[5]+":000",C=+d;return(o.utc(S).valueOf()-(C-=C%1e3))/6e4},c=s.prototype;c.tz=function(d,h){d===void 0&&(d=a);var p=this.utcOffset(),m=this.toDate(),g=m.toLocaleString("en-US",{timeZone:d}),y=Math.round((m-new Date(g))/1e3/60),v=o(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-y,!0);if(h){var b=v.utcOffset();v=v.add(p-b,"minute")}return v.$x.$timezone=d,v},c.offsetName=function(d){var h=this.$x.$timezone||o.tz.guess(),p=u(this.valueOf(),h,{timeZoneName:d}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var f=c.startOf;c.startOf=function(d,h){if(!this.$x||!this.$x.$timezone)return f.call(this,d,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(p,d,h).tz(this.$x.$timezone,!0)},o.tz=function(d,h,p){var m=p&&h,g=p||h||a,y=l(+o(),g);if(typeof d!="string")return o(d).tz(g);var v=function(x,S,C){var I=x-60*S*1e3,k=l(I,C);if(S===k)return[I,S];var R=l(I-=60*(k-S)*1e3,C);return k===R?[I,k]:[x-60*Math.min(k,R)*1e3,Math.max(k,R)]}(o.utc(d,m).valueOf(),y,g),b=v[0],w=v[1],E=o(b).utcOffset(w);return E.$x.$timezone=g,E},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(d){a=d}}})})(zUe);var Kgn=zUe.exports;const Xgn=ml(Kgn);var VUe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(ao,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var u=o.prototype;a.utc=function(m){var g={date:m,utc:!0,args:arguments};return new o(g)},u.utc=function(m){var g=a(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),n):g},u.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),l.call(this,m)};var c=u.init;u.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var f=u.utcOffset;u.utcOffset=function(m,g){var y=this.$utils().u;if(y(m))return this.$u?0:y(this.$offset)?f.call(this):this.$offset;if(typeof m=="string"&&(m=function(E){E===void 0&&(E="");var x=E.match(r);if(!x)return null;var S=(""+x[0]).match(i)||["-",0,0],C=S[0],I=60*+S[1]+ +S[2];return I===0?0:C==="+"?I:-I}(m),m===null))return this;var v=Math.abs(m)<=16?60*m:m,b=this;if(g)return b.$offset=v,b.$u=m===0,b;if(m!==0){var w=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(v+w,n)).$offset=v,b.$x.$localOffset=w}else b=this.utc();return b};var d=u.format;u.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,g)},u.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var h=u.toDate;u.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=u.diff;u.diff=function(m,g,y){if(m&&this.$u===m.$u)return p.call(this,m,g,y);var v=this.local(),b=a(m).local();return p.call(v,b,g,y)}}})})(VUe);var Qgn=VUe.exports;const Jgn=ml(Qgn);Ct.extend(Jgn);Ct.extend(Xgn);function Zgn(e,t){return t?Ct(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const obe=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=Zgn(e,t);return n==="remove"&&(r*=-1),Ct(e).add(r,"minutes").toDate()};function iy(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>obe(i,n,e)):obe(t,n,e)}function e0n({minDate:e,maxDate:t,timezone:n}){const r=iy("add",new Date,n);return!e&&!t?r:e&&Ct(r).isBefore(e)?e:t&&Ct(r).isAfter(t)?t:r}const t0n={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"",consistentWeeks:!1},n0n=A.createContext(t0n);function hc(){const e=A.useContext(n0n),t=A.useCallback(o=>o||e.locale,[e.locale]),n=A.useCallback(o=>o||e.timezone||void 0,[e.timezone]),r=A.useCallback(o=>typeof o=="number"?o:e.firstDayOfWeek,[e.firstDayOfWeek]),i=A.useCallback(o=>Array.isArray(o)?o:e.weekendDays,[e.weekendDays]),s=A.useCallback(o=>typeof o=="string"?o:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:s}}function r0n(e,t){if(t==="range"&&Array.isArray(e)){const[n,r]=e;return n?r?`${n.toISOString()}  ${r.toISOString()}`:`${n.toISOString()} `:""}return t==="multiple"&&Array.isArray(e)?e.map(n=>n==null?void 0:n.toISOString()).filter(Boolean).join(", "):!Array.isArray(e)&&e?e.toISOString():""}function HUe({value:e,type:t,name:n,form:r}){return _.jsx("input",{type:"hidden",value:r0n(e,t),name:n,form:r})}HUe.displayName="@mantine/dates/HiddenDatesInput";var qUe={day:"m_396ce5cb"};const i0n={},s0n=(e,{size:t})=>({day:{"--day-size":sn(t,"day-size")}}),Moe=Me((e,t)=>{const n=xe("Day",i0n,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,date:l,disabled:c,__staticSelector:f,weekend:d,outside:h,selected:p,renderDay:m,inRange:g,firstInRange:y,lastInRange:v,hidden:b,static:w,...E}=n,x=ht({name:f||"Day",classes:qUe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:s0n,rootSelector:"day"}),S=hc();return _.jsx(Is,{...x("day",{style:b?{display:"none"}:void 0}),component:w?"div":"button",ref:t,disabled:c,"data-today":Ct(l).isSame(iy("add",new Date,S.getTimezone()),"day")||void 0,"data-hidden":b||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&d||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":g&&!c||void 0,"data-first-in-range":y&&!c||void 0,"data-last-in-range":v&&!c||void 0,"data-static":w||void 0,unstyled:a,...E,children:(m==null?void 0:m(l))||l.getDate()})});Moe.classes=qUe;Moe.displayName="@mantine/dates/Day";function o0n({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=Ct().day(n),i=[];for(let s=0;s<7;s+=1)typeof t=="string"?i.push(Ct(r).add(s,"days").locale(e).format(t)):i.push(t(Ct(r).add(s,"days").toDate()));return i}var WUe={weekday:"m_18a3eca"};const a0n={},u0n=(e,{size:t})=>({weekdaysRow:{"--wr-fz":mo(t),"--wr-spacing":fs(t)}}),Loe=Me((e,t)=>{const n=xe("WeekdaysRow",a0n,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,locale:l,firstDayOfWeek:c,weekdayFormat:f,cellComponent:d="th",__staticSelector:h,...p}=n,m=ht({name:h||"WeekdaysRow",classes:WUe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:u0n,rootSelector:"weekdaysRow"}),g=hc(),y=o0n({locale:g.getLocale(l),format:f,firstDayOfWeek:g.getFirstDayOfWeek(c)}).map((v,b)=>_.jsx(d,{...m("weekday"),children:v},b));return _.jsx(me,{component:"tr",ref:t,...m("weekdaysRow"),...p,children:y})});Loe.classes=WUe;Loe.displayName="@mantine/dates/WeekdaysRow";function l0n(e,t=1){const n=new Date(e),r=t===0?6:t-1;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function c0n(e,t=1){const n=new Date(e);for(;n.getDay()!==t;)n.setDate(n.getDate()-1);return n}function f0n({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=e.getMonth(),i=new Date(e.getFullYear(),r,1),s=new Date(e.getFullYear(),e.getMonth()+1,0),o=l0n(s,t),a=c0n(i,t),u=[];for(;a<=o;){const l=[];for(let c=0;c<7;c+=1)l.push(new Date(a)),a.setDate(a.getDate()+1);u.push(l)}if(n&&u.length<6){const l=u[u.length-1],c=l[l.length-1],f=new Date(c);for(f.setDate(f.getDate()+1);u.length<6;){const d=[];for(let h=0;h<7;h+=1)d.push(new Date(f)),f.setDate(f.getDate()+1);u.push(d)}}return u}function GUe(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function YUe(e,t){return t instanceof Date?Ct(e).isAfter(Ct(t).subtract(1,"day"),"day"):!0}function KUe(e,t){return t instanceof Date?Ct(e).isBefore(Ct(t).add(1,"day"),"day"):!0}function d0n(e,t,n,r,i,s,o){const a=e.flat().filter(c=>{var f;return KUe(c,n)&&YUe(c,t)&&!(i!=null&&i(c))&&!((f=r==null?void 0:r(c))!=null&&f.disabled)&&(!s||GUe(c,o))}),u=a.find(c=>{var f;return(f=r==null?void 0:r(c))==null?void 0:f.selected});if(u)return u;const l=a.find(c=>Ct().isSame(c,"date"));return l||a[0]}var XUe={month:"m_cc9820d3",monthCell:"m_8f457cd5"};const h0n={withCellSpacing:!0},oB=Me((e,t)=>{const n=xe("Month",h0n,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,locale:c,firstDayOfWeek:f,weekdayFormat:d,month:h,weekendDays:p,getDayProps:m,excludeDate:g,minDate:y,maxDate:v,renderDay:b,hideOutsideDates:w,hideWeekdays:E,getDayAriaLabel:x,static:S,__getDayRef:C,__onDayKeyDown:I,__onDayClick:k,__onDayMouseEnter:R,__preventFocus:O,__stopPropagation:P,withCellSpacing:$,size:L,...M}=n,B=ht({name:l||"Month",classes:XUe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"month"}),U=hc(),V=f0n({month:h,firstDayOfWeek:U.getFirstDayOfWeek(f),consistentWeeks:U.consistentWeeks}),D=d0n(V,y,v,m,g,w,h),{resolvedClassNames:z,resolvedStyles:W}=og({classNames:r,styles:o,props:n}),j=V.map((q,G)=>{const te=q.map((le,fe)=>{const de=!GUe(le,h),ye=(x==null?void 0:x(le))||Ct(le).locale(c||U.locale).format("D MMMM YYYY"),Ie=m==null?void 0:m(le),pe=Ct(le).isSame(D,"date");return _.jsx("td",{...B("monthCell"),"data-with-spacing":$||void 0,children:_.jsx(Moe,{__staticSelector:l||"Month",classNames:z,styles:W,unstyled:a,"data-mantine-stop-propagation":P||void 0,renderDay:b,date:le,size:L,weekend:U.getWeekendDays(p).includes(le.getDay()),outside:de,hidden:w?de:!1,"aria-label":ye,static:S,disabled:(g==null?void 0:g(le))||!KUe(le,v)||!YUe(le,y),ref:qe=>C==null?void 0:C(G,fe,qe),...Ie,onKeyDown:qe=>{var Ue;(Ue=Ie==null?void 0:Ie.onKeyDown)==null||Ue.call(Ie,qe),I==null||I(qe,{rowIndex:G,cellIndex:fe,date:le})},onMouseEnter:qe=>{var Ue;(Ue=Ie==null?void 0:Ie.onMouseEnter)==null||Ue.call(Ie,qe),R==null||R(qe,le)},onClick:qe=>{var Ue;(Ue=Ie==null?void 0:Ie.onClick)==null||Ue.call(Ie,qe),k==null||k(qe,le)},onMouseDown:qe=>{var Ue;(Ue=Ie==null?void 0:Ie.onMouseDown)==null||Ue.call(Ie,qe),O&&qe.preventDefault()},tabIndex:O||!pe?-1:0})},le.toString())});return _.jsx("tr",{...B("monthRow"),children:te},G)});return _.jsxs(me,{component:"table",...B("month"),size:L,ref:t,...M,children:[!E&&_.jsx("thead",{...B("monthThead"),children:_.jsx(Loe,{__staticSelector:l||"Month",locale:c,firstDayOfWeek:f,weekdayFormat:d,size:L,classNames:z,styles:W,unstyled:a})}),_.jsx("tbody",{...B("monthTbody"),children:j})]})});oB.classes=XUe;oB.displayName="@mantine/dates/Month";var QUe={pickerControl:"m_dc6a3c71"};const p0n={},m0n=(e,{size:t})=>({pickerControl:{"--dpc-fz":mo(t),"--dpc-size":sn(t,"dpc-size")}}),aB=Me((e,t)=>{const n=xe("PickerControl",p0n,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,firstInRange:l,lastInRange:c,inRange:f,__staticSelector:d,selected:h,disabled:p,...m}=n,g=ht({name:d||"PickerControl",classes:QUe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:m0n,rootSelector:"pickerControl"});return _.jsx(Is,{...g("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":f&&!p&&!h||void 0,"data-first-in-range":l&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...m})});aB.classes=QUe;aB.displayName="@mantine/dates/PickerControl";function JUe(e,t,n){return!t&&!n?!1:!!(t&&Ct(e).isBefore(t,"year")||n&&Ct(e).isAfter(n,"year"))}function g0n(e,t,n,r){const i=e.flat().filter(a=>{var u;return!JUe(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Ct().isSame(a,"year"));return o||i[0]}function ZUe(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let s=0;s<4;s+=1){const o=s===3?1:3;for(let a=0;a<o;a+=1)i[s].push(new Date(n+r,0)),r+=1}return i}var e7e={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const y0n={yearsListFormat:"YYYY",withCellSpacing:!0},uB=Me((e,t)=>{const n=xe("YearsList",y0n,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,decade:l,yearsListFormat:c,locale:f,minDate:d,maxDate:h,getYearControlProps:p,__staticSelector:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:E,withCellSpacing:x,size:S,...C}=n,I=ht({name:m||"YearsList",classes:e7e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"yearsList"}),k=hc(),R=ZUe(l),O=g0n(R,d,h,p),P=R.map(($,L)=>{const M=$.map((B,U)=>{const V=p==null?void 0:p(B),D=Ct(B).isSame(O,"year");return _.jsx("td",{...I("yearsListCell"),"data-with-spacing":x||void 0,children:_.jsx(aB,{...I("yearsListControl"),size:S,unstyled:a,"data-mantine-stop-propagation":E||void 0,disabled:JUe(B,d,h),ref:z=>g==null?void 0:g(L,U,z),...V,onKeyDown:z=>{var W;(W=V==null?void 0:V.onKeyDown)==null||W.call(V,z),y==null||y(z,{rowIndex:L,cellIndex:U,date:B})},onClick:z=>{var W;(W=V==null?void 0:V.onClick)==null||W.call(V,z),v==null||v(z,B)},onMouseEnter:z=>{var W;(W=V==null?void 0:V.onMouseEnter)==null||W.call(V,z),b==null||b(z,B)},onMouseDown:z=>{var W;(W=V==null?void 0:V.onMouseDown)==null||W.call(V,z),w&&z.preventDefault()},tabIndex:w||!D?-1:0,children:Ct(B).locale(k.getLocale(f)).format(c)})},U)});return _.jsx("tr",{...I("yearsListRow"),children:M},L)});return _.jsx(me,{component:"table",ref:t,size:S,...I("yearsList"),...C,children:_.jsx("tbody",{children:P})})});uB.classes=e7e;uB.displayName="@mantine/dates/YearsList";function t7e(e,t,n){return!t&&!n?!1:!!(t&&Ct(e).isBefore(t,"month")||n&&Ct(e).isAfter(n,"month"))}function v0n(e,t,n,r){const i=e.flat().filter(a=>{var u;return!t7e(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Ct().isSame(a,"month"));return o||i[0]}function b0n(e){const t=Ct(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let s=0;s<3;s+=1)n[i].push(Ct(t).add(r,"months").toDate()),r+=1;return n}var n7e={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const _0n={monthsListFormat:"MMM",withCellSpacing:!0},lB=Me((e,t)=>{const n=xe("MonthsList",_0n,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,year:c,monthsListFormat:f,locale:d,minDate:h,maxDate:p,getMonthControlProps:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:E,withCellSpacing:x,size:S,...C}=n,I=ht({name:l||"MonthsList",classes:n7e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"monthsList"}),k=hc(),R=b0n(c),O=v0n(R,h,p,m),P=R.map(($,L)=>{const M=$.map((B,U)=>{const V=m==null?void 0:m(B),D=Ct(B).isSame(O,"month");return _.jsx("td",{...I("monthsListCell"),"data-with-spacing":x||void 0,children:_.jsx(aB,{...I("monthsListControl"),size:S,unstyled:a,__staticSelector:l||"MonthsList","data-mantine-stop-propagation":E||void 0,disabled:t7e(B,h,p),ref:z=>g==null?void 0:g(L,U,z),...V,onKeyDown:z=>{var W;(W=V==null?void 0:V.onKeyDown)==null||W.call(V,z),y==null||y(z,{rowIndex:L,cellIndex:U,date:B})},onClick:z=>{var W;(W=V==null?void 0:V.onClick)==null||W.call(V,z),v==null||v(z,B)},onMouseEnter:z=>{var W;(W=V==null?void 0:V.onMouseEnter)==null||W.call(V,z),b==null||b(z,B)},onMouseDown:z=>{var W;(W=V==null?void 0:V.onMouseDown)==null||W.call(V,z),w&&z.preventDefault()},tabIndex:w||!D?-1:0,children:Ct(B).locale(k.getLocale(d)).format(f)})},U)});return _.jsx("tr",{...I("monthsListRow"),children:M},L)});return _.jsx(me,{component:"table",ref:t,size:S,...I("monthsList"),...C,children:_.jsx("tbody",{children:P})})});lB.classes=n7e;lB.displayName="@mantine/dates/MonthsList";var r7e={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const w0n={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},E0n=(e,{size:t})=>({calendarHeader:{"--dch-control-size":sn(t,"dch-control-size"),"--dch-fz":mo(t)}}),Tv=Me((e,t)=>{const n=xe("CalendarHeader",w0n,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,nextIcon:l,previousIcon:c,nextLabel:f,previousLabel:d,onNext:h,onPrevious:p,onLevelClick:m,label:g,nextDisabled:y,previousDisabled:v,hasNextLevel:b,levelControlAriaLabel:w,withNext:E,withPrevious:x,__staticSelector:S,__preventFocus:C,__stopPropagation:I,...k}=n,R=ht({name:S||"CalendarHeader",classes:r7e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:E0n,rootSelector:"calendarHeader"}),O=C?P=>P.preventDefault():void 0;return _.jsxs(me,{...R("calendarHeader"),ref:t,...k,children:[x&&_.jsx(Is,{...R("calendarHeaderControl"),"data-direction":"previous","aria-label":d,onClick:p,unstyled:a,onMouseDown:O,disabled:v,"data-disabled":v||void 0,tabIndex:C||v?-1:0,"data-mantine-stop-propagation":I||void 0,children:c||_.jsx(rx,{...R("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),_.jsx(Is,{component:b?"button":"div",...R("calendarHeaderLevel"),onClick:b?m:void 0,unstyled:a,onMouseDown:b?O:void 0,disabled:!b,"data-static":!b||void 0,"aria-label":w,tabIndex:C||!b?-1:0,"data-mantine-stop-propagation":I||void 0,children:g}),E&&_.jsx(Is,{...R("calendarHeaderControl"),"data-direction":"next","aria-label":f,onClick:h,unstyled:a,onMouseDown:O,disabled:y,"data-disabled":y||void 0,tabIndex:C||y?-1:0,"data-mantine-stop-propagation":I||void 0,children:l||_.jsx(rx,{...R("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});Tv.classes=r7e;Tv.displayName="@mantine/dates/CalendarHeader";function x0n(e){const t=ZUe(e);return[t[0][0],t[3][0]]}const S0n={decadeLabelFormat:"YYYY"},cB=Me((e,t)=>{const n=xe("DecadeLevel",S0n,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:E,previousDisabled:x,levelControlAriaLabel:S,withNext:C,withPrevious:I,decadeLabelFormat:k,classNames:R,styles:O,unstyled:P,__staticSelector:$,__stopPropagation:L,size:M,...B}=n,U=hc(),[V,D]=x0n(r),z={__staticSelector:$||"DecadeLevel",classNames:R,styles:O,unstyled:P,size:M},W=typeof E=="boolean"?E:o?!Ct(D).endOf("year").isBefore(o):!1,j=typeof x=="boolean"?x:s?!Ct(V).startOf("year").isAfter(s):!1,q=(G,te)=>Ct(G).locale(i||U.locale).format(te);return _.jsxs(me,{"data-decade-level":!0,size:M,ref:t,...B,children:[_.jsx(Tv,{label:typeof k=="function"?k(V,D):`${q(V,k)}  ${q(D,k)}`,__preventFocus:p,__stopPropagation:L,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:W,previousDisabled:j,hasNextLevel:!1,levelControlAriaLabel:S,withNext:C,withPrevious:I,...z}),_.jsx(uB,{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:L,withCellSpacing:h,...z})]})});cB.classes={...uB.classes,...Tv.classes};cB.displayName="@mantine/dates/DecadeLevel";const T0n={yearLabelFormat:"YYYY"},fB=Me((e,t)=>{const n=xe("YearLevel",T0n,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:E,nextDisabled:x,previousDisabled:S,hasNextLevel:C,levelControlAriaLabel:I,withNext:k,withPrevious:R,yearLabelFormat:O,__staticSelector:P,__stopPropagation:$,size:L,classNames:M,styles:B,unstyled:U,...V}=n,D=hc(),z={__staticSelector:P||"YearLevel",classNames:M,styles:B,unstyled:U,size:L},W=typeof x=="boolean"?x:o?!Ct(r).endOf("year").isBefore(o):!1,j=typeof S=="boolean"?S:s?!Ct(r).startOf("year").isAfter(s):!1;return _.jsxs(me,{"data-year-level":!0,size:L,ref:t,...V,children:[_.jsx(Tv,{label:typeof O=="function"?O(r):Ct(r).locale(i||D.locale).format(O),__preventFocus:p,__stopPropagation:$,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:E,nextDisabled:W,previousDisabled:j,hasNextLevel:C,levelControlAriaLabel:I,withNext:k,withPrevious:R,...z}),_.jsx(lB,{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:$,withCellSpacing:h,...z})]})});fB.classes={...Tv.classes,...lB.classes};fB.displayName="@mantine/dates/YearLevel";const C0n={monthLabelFormat:"MMMM YYYY"},dB=Me((e,t)=>{const n=xe("MonthLevel",C0n,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,withCellSpacing:w,__preventFocus:E,__stopPropagation:x,nextIcon:S,previousIcon:C,nextLabel:I,previousLabel:k,onNext:R,onPrevious:O,onLevelClick:P,nextDisabled:$,previousDisabled:L,hasNextLevel:M,levelControlAriaLabel:B,withNext:U,withPrevious:V,monthLabelFormat:D,classNames:z,styles:W,unstyled:j,__staticSelector:q,size:G,static:te,...le}=n,fe=hc(),de={__staticSelector:q||"MonthLevel",classNames:z,styles:W,unstyled:j,size:G},ye=typeof $=="boolean"?$:f?!Ct(r).endOf("month").isBefore(f):!1,Ie=typeof L=="boolean"?L:c?!Ct(r).startOf("month").isAfter(c):!1;return _.jsxs(me,{"data-month-level":!0,size:G,ref:t,...le,children:[_.jsx(Tv,{label:typeof D=="function"?D(r):Ct(r).locale(i||fe.locale).format(D),__preventFocus:E,__stopPropagation:x,nextIcon:S,previousIcon:C,nextLabel:I,previousLabel:k,onNext:R,onPrevious:O,onLevelClick:P,nextDisabled:ye,previousDisabled:Ie,hasNextLevel:M,levelControlAriaLabel:B,withNext:U,withPrevious:V,...de}),_.jsx(oB,{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,__preventFocus:E,__stopPropagation:x,static:te,withCellSpacing:w,...de})]})});dB.classes={...oB.classes,...Tv.classes};dB.displayName="@mantine/dates/MonthLevel";var i7e={levelsGroup:"m_30b26e33"};const A0n={},Cv=Me((e,t)=>{const n=xe("LevelsGroup",A0n,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,...c}=n,f=ht({name:l||"LevelsGroup",classes:i7e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"levelsGroup"});return _.jsx(me,{ref:t,...f("levelsGroup"),...c})});Cv.classes=i7e;Cv.displayName="@mantine/dates/LevelsGroup";const I0n={numberOfColumns:1},hB=Me((e,t)=>{const n=xe("DecadeLevelGroup",I0n,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,classNames:E,styles:x,unstyled:S,__staticSelector:C,__stopPropagation:I,numberOfColumns:k,levelControlAriaLabel:R,decadeLabelFormat:O,size:P,vars:$,...L}=n,M=A.useRef([]),B=Array(k).fill(0).map((U,V)=>{const D=Ct(r).add(V*10,"years").toDate();return _.jsx(cB,{size:P,yearsListFormat:a,decade:D,withNext:V===k-1,withPrevious:V===0,decadeLabelFormat:O,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(z,W)=>$oe({levelIndex:V,rowIndex:W.rowIndex,cellIndex:W.cellIndex,event:z,controlsRef:M}),__getControlRef:(z,W,j)=>{Array.isArray(M.current[V])||(M.current[V]=[]),Array.isArray(M.current[V][z])||(M.current[V][z]=[]),M.current[V][z][W]=j},levelControlAriaLabel:typeof R=="function"?R(D):R,locale:i,minDate:s,maxDate:o,__preventFocus:d,__stopPropagation:I,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,getYearControlProps:u,__staticSelector:C||"DecadeLevelGroup",classNames:E,styles:x,unstyled:S,withCellSpacing:f},V)});return _.jsx(Cv,{classNames:E,styles:x,__staticSelector:C||"DecadeLevelGroup",ref:t,size:P,unstyled:S,...L,children:B})});hB.classes={...Cv.classes,...cB.classes};hB.displayName="@mantine/dates/DecadeLevelGroup";const k0n={numberOfColumns:1},pB=Me((e,t)=>{const n=xe("YearLevelGroup",k0n,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:E,hasNextLevel:x,classNames:S,styles:C,unstyled:I,__staticSelector:k,__stopPropagation:R,numberOfColumns:O,levelControlAriaLabel:P,yearLabelFormat:$,size:L,vars:M,...B}=n,U=A.useRef([]),V=Array(O).fill(0).map((D,z)=>{const W=Ct(r).add(z,"years").toDate();return _.jsx(fB,{size:L,monthsListFormat:a,year:W,withNext:z===O-1,withPrevious:z===0,yearLabelFormat:$,__stopPropagation:R,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(j,q)=>$oe({levelIndex:z,rowIndex:q.rowIndex,cellIndex:q.cellIndex,event:j,controlsRef:U}),__getControlRef:(j,q,G)=>{Array.isArray(U.current[z])||(U.current[z]=[]),Array.isArray(U.current[z][j])||(U.current[z][j]=[]),U.current[z][j][q]=G},levelControlAriaLabel:typeof P=="function"?P(W):P,locale:i,minDate:s,maxDate:o,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:E,hasNextLevel:x,getMonthControlProps:u,classNames:S,styles:C,unstyled:I,__staticSelector:k||"YearLevelGroup",withCellSpacing:f},z)});return _.jsx(Cv,{classNames:S,styles:C,__staticSelector:k||"YearLevelGroup",ref:t,size:L,unstyled:I,...B,children:V})});pB.classes={...fB.classes,...Cv.classes};pB.displayName="@mantine/dates/YearLevelGroup";const R0n={numberOfColumns:1},mB=Me((e,t)=>{const n=xe("MonthLevelGroup",R0n,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__onDayClick:g,__onDayMouseEnter:y,withCellSpacing:v,__preventFocus:b,nextIcon:w,previousIcon:E,nextLabel:x,previousLabel:S,onNext:C,onPrevious:I,onLevelClick:k,nextDisabled:R,previousDisabled:O,hasNextLevel:P,classNames:$,styles:L,unstyled:M,numberOfColumns:B,levelControlAriaLabel:U,monthLabelFormat:V,__staticSelector:D,__stopPropagation:z,size:W,static:j,vars:q,...G}=n,te=A.useRef([]),le=Array(B).fill(0).map((fe,de)=>{const ye=Ct(r).add(de,"months").toDate();return _.jsx(dB,{month:ye,withNext:de===B-1,withPrevious:de===0,monthLabelFormat:V,__stopPropagation:z,__onDayClick:g,__onDayMouseEnter:y,__onDayKeyDown:(Ie,pe)=>$oe({levelIndex:de,rowIndex:pe.rowIndex,cellIndex:pe.cellIndex,event:Ie,controlsRef:te}),__getDayRef:(Ie,pe,qe)=>{Array.isArray(te.current[de])||(te.current[de]=[]),Array.isArray(te.current[de][Ie])||(te.current[de][Ie]=[]),te.current[de][Ie][pe]=qe},levelControlAriaLabel:typeof U=="function"?U(ye):U,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__preventFocus:b,nextIcon:w,previousIcon:E,nextLabel:x,previousLabel:S,onNext:C,onPrevious:I,onLevelClick:k,nextDisabled:R,previousDisabled:O,hasNextLevel:P,classNames:$,styles:L,unstyled:M,__staticSelector:D||"MonthLevelGroup",size:W,static:j,withCellSpacing:v},de)});return _.jsx(Cv,{classNames:$,styles:L,__staticSelector:D||"MonthLevelGroup",ref:t,size:W,...G,children:le})});mB.classes={...Cv.classes,...dB.classes};mB.displayName="@mantine/dates/MonthLevelGroup";var s7e={input:"m_6fa5e2aa"};const N0n={},gB=Me((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:i,classNames:s,styles:o,unstyled:a,popoverProps:u,modalProps:l,dropdownType:c,children:f,formattedValue:d,dropdownHandlers:h,dropdownOpened:p,onClick:m,clearable:g,onClear:y,clearButtonProps:v,rightSection:b,shouldClear:w,readOnly:E,disabled:x,value:S,name:C,form:I,type:k,...R}=BEe("PickerInputBase",N0n,e),O=b||(g&&w&&!E&&!x?_.jsx(lg,{variant:"transparent",onClick:y,unstyled:a,size:n.size||"sm",...v}):null),P=()=>{k==="range"&&Array.isArray(S)&&S[0]&&!S[1]&&y(),h.close()};return _.jsxs(_.Fragment,{children:[c==="modal"&&!E&&_.jsx(es,{opened:p,onClose:P,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:a,...l,children:f}),_.jsx(vi.Wrapper,{...r,children:_.jsxs(zo,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:a,...u,disabled:(u==null?void 0:u.disabled)||c==="modal"||E,onClose:()=>{var $;($=u==null?void 0:u.onClose)==null||$.call(u),P()},children:[_.jsx(zo.Target,{children:_.jsx(vi,{"aria-label":d||i,"data-dates-input":!0,"data-read-only":E||void 0,disabled:x,component:"button",type:"button",multiline:!0,onClick:$=>{m==null||m($),h.toggle()},rightSection:O,...n,ref:t,classNames:{...s,input:ji(s7e.input,s==null?void 0:s.input)},...R,children:d||_.jsx(vi.Placeholder,{error:n.error,unstyled:a,className:s==null?void 0:s.placeholder,style:o==null?void 0:o.placeholder,children:i})})}),_.jsx(zo.Dropdown,{"data-dates-dropdown":!0,children:f})]})}),_.jsx(HUe,{value:S,name:C,form:I,type:k})]})});gB.classes=s7e;gB.displayName="@mantine/dates/PickerInputBase";const abe=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function Foe({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const s=A.useRef(e),o=hc(),[a,u,l]=ks({value:iy("add",t,o.getTimezone(),!i),defaultValue:iy("add",n,o.getTimezone(),!i),finalValue:abe(e),onChange:f=>{r==null||r(iy("remove",f,o.getTimezone(),!i))}});let c=a;return s.current!==e&&(s.current=e,t===void 0&&(c=n!==void 0?n:abe(e),u(c))),[c,u,l]}function I7(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function D0n(e){return e===0?"month":e===1?"year":"decade"}function WC(e,t,n){return D0n(ph(I7(e,0),I7(t,0),I7(n,2)))}const P0n={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},yB=Me((e,t)=>{const n=xe("Calendar",P0n,e),{vars:r,maxLevel:i,minLevel:s,defaultLevel:o,level:a,onLevelChange:u,date:l,defaultDate:c,onDateChange:f,numberOfColumns:d,columnsToScroll:h,ariaLabels:p,onYearSelect:m,onMonthSelect:g,onYearMouseEnter:y,onMonthMouseEnter:v,__updateDateOnYearSelect:b,__updateDateOnMonthSelect:w,firstDayOfWeek:E,weekdayFormat:x,weekendDays:S,getDayProps:C,excludeDate:I,renderDay:k,hideOutsideDates:R,hideWeekdays:O,getDayAriaLabel:P,monthLabelFormat:$,nextIcon:L,previousIcon:M,__onDayClick:B,__onDayMouseEnter:U,withCellSpacing:V,monthsListFormat:D,getMonthControlProps:z,yearLabelFormat:W,yearsListFormat:j,getYearControlProps:q,decadeLabelFormat:G,classNames:te,styles:le,unstyled:fe,minDate:de,maxDate:ye,locale:Ie,__staticSelector:pe,size:qe,__preventFocus:Ue,__stopPropagation:vt,onNextDecade:it,onPreviousDecade:_e,onNextYear:ke,onPreviousYear:Ve,onNextMonth:ct,onPreviousMonth:Mt,static:Ye,__timezoneApplied:ve,...pt}=n,{resolvedClassNames:bt,resolvedStyles:ge}=og({classNames:te,styles:le,props:n}),[Ae,We]=ks({value:a?WC(a,s,i):void 0,defaultValue:o?WC(o,s,i):void 0,finalValue:WC(void 0,s,i),onChange:u}),[ut,wt]=Foe({type:"default",value:l,defaultValue:c,onChange:f,applyTimezone:!ve}),Bn={__staticSelector:pe||"Calendar",styles:ge,classNames:bt,unstyled:fe,size:qe},kr=hc(),Un=h||d||1,pr=ut||iy("add",new Date,kr.getTimezone()),bn=()=>{const Nn=Ct(pr).add(Un,"month").toDate();ct==null||ct(Nn),wt(Nn)},Rn=()=>{const Nn=Ct(pr).subtract(Un,"month").toDate();Mt==null||Mt(Nn),wt(Nn)},or=()=>{const Nn=Ct(pr).add(Un,"year").toDate();ke==null||ke(Nn),wt(Nn)},ar=()=>{const Nn=Ct(pr).subtract(Un,"year").toDate();Ve==null||Ve(Nn),wt(Nn)},Jo=()=>{const Nn=Ct(pr).add(10*Un,"year").toDate();it==null||it(Nn),wt(Nn)},Ui=()=>{const Nn=Ct(pr).subtract(10*Un,"year").toDate();_e==null||_e(Nn),wt(Nn)};return _.jsxs(me,{ref:t,size:qe,"data-calendar":!0,...pt,children:[Ae==="month"&&_.jsx(mB,{month:pr,minDate:de,maxDate:ye,firstDayOfWeek:E,weekdayFormat:x,weekendDays:S,getDayProps:C,excludeDate:I,renderDay:k,hideOutsideDates:R,hideWeekdays:O,getDayAriaLabel:P,onNext:bn,onPrevious:Rn,hasNextLevel:i!=="month",onLevelClick:()=>We("year"),numberOfColumns:d,locale:Ie,levelControlAriaLabel:p==null?void 0:p.monthLevelControl,nextLabel:p==null?void 0:p.nextMonth,nextIcon:L,previousLabel:p==null?void 0:p.previousMonth,previousIcon:M,monthLabelFormat:$,__onDayClick:B,__onDayMouseEnter:U,__preventFocus:Ue,__stopPropagation:vt,static:Ye,withCellSpacing:V,...Bn}),Ae==="year"&&_.jsx(pB,{year:pr,numberOfColumns:d,minDate:de,maxDate:ye,monthsListFormat:D,getMonthControlProps:z,locale:Ie,onNext:or,onPrevious:ar,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>We("decade"),levelControlAriaLabel:p==null?void 0:p.yearLevelControl,nextLabel:p==null?void 0:p.nextYear,nextIcon:L,previousLabel:p==null?void 0:p.previousYear,previousIcon:M,yearLabelFormat:W,__onControlMouseEnter:v,__onControlClick:(Nn,zi)=>{w&&wt(zi),We(WC("month",s,i)),g==null||g(zi)},__preventFocus:Ue,__stopPropagation:vt,withCellSpacing:V,...Bn}),Ae==="decade"&&_.jsx(hB,{decade:pr,minDate:de,maxDate:ye,yearsListFormat:j,getYearControlProps:q,locale:Ie,onNext:Jo,onPrevious:Ui,numberOfColumns:d,nextLabel:p==null?void 0:p.nextDecade,nextIcon:L,previousLabel:p==null?void 0:p.previousDecade,previousIcon:M,decadeLabelFormat:G,__onControlMouseEnter:y,__onControlClick:(Nn,zi)=>{b&&wt(zi),We(WC("year",s,i)),m==null||m(zi)},__preventFocus:Ue,__stopPropagation:vt,withCellSpacing:V,...Bn})]})});yB.classes={...hB.classes,...pB.classes,...mB.classes};yB.displayName="@mantine/dates/Calendar";function O0n(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:E,onNextDecade:x,onPreviousDecade:S,withCellSpacing:C,__updateDateOnYearSelect:I,__updateDateOnMonthSelect:k,firstDayOfWeek:R,weekdayFormat:O,weekendDays:P,getDayProps:$,excludeDate:L,renderDay:M,hideOutsideDates:B,hideWeekdays:U,getDayAriaLabel:V,monthLabelFormat:D,monthsListFormat:z,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:q,getYearControlProps:G,decadeLabelFormat:te,allowSingleDateInRange:le,allowDeselect:fe,minDate:de,maxDate:ye,locale:Ie,...pe}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:E,onNextDecade:x,onPreviousDecade:S,withCellSpacing:C,__updateDateOnYearSelect:I,__updateDateOnMonthSelect:k,firstDayOfWeek:R,weekdayFormat:O,weekendDays:P,getDayProps:$,excludeDate:L,renderDay:M,hideOutsideDates:B,hideWeekdays:U,getDayAriaLabel:V,monthLabelFormat:D,monthsListFormat:z,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:q,getYearControlProps:G,decadeLabelFormat:te,allowSingleDateInRange:le,allowDeselect:fe,minDate:de,maxDate:ye,locale:Ie},others:pe}}function ube(e,t){const n=[...t].sort((r,i)=>r.getTime()-i.getTime());return Ct(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&Ct(n[1]).endOf("day").add(1,"ms").isAfter(e)}function $0n({type:e,level:t,value:n,defaultValue:r,onChange:i,allowSingleDateInRange:s,allowDeselect:o,onMouseLeave:a,applyTimezone:u=!0}){const[l,c]=Foe({type:e,value:n,defaultValue:r,onChange:i,applyTimezone:u}),[f,d]=A.useState(e==="range"&&l[0]&&!l[1]?l[0]:null),[h,p]=A.useState(null),m=x=>{if(e==="range"){if(f instanceof Date&&!l[1]){if(Ct(x).isSame(f,t)&&!s){d(null),p(null),c([null,null]);return}const S=[x,f];S.sort((C,I)=>C.getTime()-I.getTime()),c(S),p(null),d(null);return}if(l[0]&&!l[1]&&Ct(x).isSame(l[0],t)&&!s){d(null),p(null),c([null,null]);return}c([x,null]),p(null),d(x);return}if(e==="multiple"){l.some(S=>Ct(S).isSame(x,t))?c(l.filter(S=>!Ct(S).isSame(x,t))):c([...l,x]);return}l&&o&&Ct(x).isSame(l,t)?c(null):c(x)},g=x=>f instanceof Date&&h instanceof Date?ube(x,[h,f]):l[0]instanceof Date&&l[1]instanceof Date?ube(x,l):!1,y=e==="range"?x=>{a==null||a(x),p(null)}:a,v=x=>l[0]instanceof Date&&Ct(x).isSame(l[0],t)?!(h&&Ct(h).isBefore(l[0])):!1,b=x=>l[1]instanceof Date?Ct(x).isSame(l[1],t):!(l[0]instanceof Date)||!h?!1:Ct(h).isBefore(l[0])&&Ct(x).isSame(l[0],t),w=x=>{if(e==="range")return{selected:l.some(C=>C&&Ct(C).isSame(x,t)),inRange:g(x),firstInRange:v(x),lastInRange:b(x),"data-autofocus":!!l[0]&&Ct(l[0]).isSame(x,t)||void 0};if(e==="multiple")return{selected:l.some(C=>C&&Ct(C).isSame(x,t)),"data-autofocus":!!l[0]&&Ct(l[0]).isSame(x,t)||void 0};const S=Ct(l).isSame(x,t);return{selected:S,"data-autofocus":S||void 0}},E=e==="range"&&f?p:()=>{};return A.useEffect(()=>{e==="range"&&!l[0]&&!l[1]&&d(null)},[n]),{onDateChange:m,onRootMouseLeave:y,onHoveredDateChange:E,getControlProps:w,_value:l,setValue:c}}const M0n={type:"default",defaultLevel:"month",numberOfColumns:1},vB=Me((e,t)=>{const n=xe("DatePicker",M0n,e),{classNames:r,styles:i,vars:s,type:o,defaultValue:a,value:u,onChange:l,__staticSelector:c,getDayProps:f,allowSingleDateInRange:d,allowDeselect:h,onMouseLeave:p,numberOfColumns:m,hideOutsideDates:g,__onDayMouseEnter:y,__onDayClick:v,__timezoneApplied:b,...w}=n,{onDateChange:E,onRootMouseLeave:x,onHoveredDateChange:S,getControlProps:C}=$0n({type:o,level:"day",allowDeselect:h,allowSingleDateInRange:d,value:u,defaultValue:a,onChange:l,onMouseLeave:p,applyTimezone:!b}),{resolvedClassNames:I,resolvedStyles:k}=og({classNames:r,styles:i,props:n}),R=hc();return _.jsx(yB,{ref:t,minLevel:"month",classNames:I,styles:k,__staticSelector:c||"DatePicker",onMouseLeave:x,numberOfColumns:m,hideOutsideDates:g??m!==1,__onDayMouseEnter:(O,P)=>{S(P),y==null||y(O,P)},__onDayClick:(O,P)=>{E(P),v==null||v(O,P)},getDayProps:O=>({...C(O),...f==null?void 0:f(O)}),...w,date:iy("add",w.date,R.getTimezone(),b),__timezoneApplied:!0})});vB.classes=yB.classes;vB.displayName="@mantine/dates/DatePicker";function L0n({type:e,value:t,defaultValue:n,onChange:r,locale:i,format:s,closeOnChange:o,sortDates:a,labelSeparator:u,valueFormatter:l}){const c=hc(),[f,d]=y6(!1),[h,p]=Foe({type:e,value:t,defaultValue:n,onChange:r}),m=qgn({type:e,date:h,locale:c.getLocale(i),format:s,labelSeparator:c.getLabelSeparator(u),formatter:l}),g=b=>{o&&(e==="default"&&d.close(),e==="range"&&b[0]&&b[1]&&d.close()),p(a&&e==="multiple"?[...b].sort((w,E)=>w.getTime()-E.getTime()):b)},y=()=>g(e==="range"?[null,null]:e==="multiple"?[]:null),v=e==="range"?!!h[0]:e==="multiple"?h.length>0:h!==null;return{_value:h,setValue:g,onClear:y,shouldClear:v,formattedValue:m,dropdownOpened:f,dropdownHandlers:d}}const F0n={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},joe=Me((e,t)=>{const n=xe("DatePickerInput",F0n,e),{type:r,value:i,defaultValue:s,onChange:o,valueFormat:a,labelSeparator:u,locale:l,classNames:c,styles:f,unstyled:d,closeOnChange:h,size:p,variant:m,dropdownType:g,sortDates:y,minDate:v,maxDate:b,vars:w,defaultDate:E,valueFormatter:x,...S}=n,{resolvedClassNames:C,resolvedStyles:I}=og({classNames:c,styles:f,props:n}),{calendarProps:k,others:R}=O0n(S),{_value:O,setValue:P,formattedValue:$,dropdownHandlers:L,dropdownOpened:M,onClear:B,shouldClear:U}=L0n({type:r,value:i,defaultValue:s,onChange:o,locale:l,format:a,labelSeparator:u,closeOnChange:h,sortDates:y,valueFormatter:x}),V=Array.isArray(O)?O[0]||E:O||E,D=hc();return _.jsx(gB,{formattedValue:$,dropdownOpened:M,dropdownHandlers:L,classNames:C,styles:I,unstyled:d,ref:t,onClear:B,shouldClear:U,value:O,size:p,variant:m,dropdownType:g,...R,type:r,__staticSelector:"DatePickerInput",children:_.jsx(vB,{...k,size:p,variant:m,type:r,value:O,defaultDate:V||e0n({maxDate:b,minDate:v,timezone:D.getTimezone()}),onChange:P,locale:l,classNames:C,styles:I,unstyled:d,__staticSelector:"DatePickerInput",__stopPropagation:g==="popover",minDate:v,maxDate:b,date:iy("add",k.date,D.getTimezone()),__timezoneApplied:!0})})});joe.classes={...gB.classes,...vB.classes};joe.displayName="@mantine/dates/DatePickerInput";function j0n(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function B0n({studyId:e,allParticipants:t}){const n=lp(),[r,i]=W1(),s=t.filter(p=>p.completed).map(p=>Math.max(...Object.values(p.answers).map(m=>m.endTime).filter(m=>m!==void 0))).filter(p=>Number.isFinite(p)),[o,a]=A.useState([new Date(new Date(Math.min(...s.length>0?s:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...s.length>0?s:[new Date().getTime()])).setHours(24,0,0,0))]),[u,l,c,f]=A.useMemo(()=>{const p=t.filter(y=>!y.rejected&&y.completed),m=t.filter(y=>!y.rejected&&!y.completed),g=t.filter(y=>y.rejected);return[p,m,g,p.filter(y=>j0n(y.answers,o))]},[t,o]),d=A.useMemo(()=>{var p,m;return f.length>0?[{Date:(p=o[0])==null?void 0:p.getTime(),Participants:0},...f.map(g=>Math.max(...Object.values(g.answers).map(y=>y.endTime).flat())).sort((g,y)=>g-y).map((g,y)=>({Date:g,Participants:y})),{Date:(m=o[1])==null?void 0:m.getTime(),Participants:f.length}]:[]},[f,o]),h=A.useMemo(()=>{var p,m;return{width:i.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(p=o[0])==null?void 0:p.getTime(),(m=o[1])==null?void 0:m.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:d}}},[i.width,o,d]);return _.jsx(Xc,{children:_.jsxs(a_,{ref:r,padding:"lg",shadow:"md",withBorder:!0,children:[_.jsxs(Nt,{align:"center",mb:"xs",justify:"space-between",children:[_.jsxs(Nt,{direction:"row",align:"center",children:[_.jsx(ki,{order:5,children:e}),_.jsx(ELe,{completed:u.length,inProgress:l.length,rejected:c.length,filteredCompleted:f.length})]}),_.jsxs(Rs,{children:[_.jsx(Kte,{allParticipants:t,studyId:e}),_.jsx(Ii,{label:"Analyze and manage study data",children:_.jsx(dn,{onClick:p=>{!p.ctrlKey&&!p.metaKey&&(p.preventDefault(),n(`/analysis/stats/${e}`))},px:4,component:"a",href:`${Qu}analysis/stats/${e}`,children:_.jsx(Ctt,{})})})]})]}),_.jsx(joe,{type:"range",label:"Time Filter",placeholder:"Select a date range",value:o,onChange:a}),d.length>0?_.jsxs(_.Fragment,{children:[_.jsx(ze,{mt:16,children:"Finished Participants"}),_.jsx(wG,{spec:h,actions:!1})]}):_.jsx(me,{h:293.4,children:_.jsx(Kc,{style:{height:"100%"},children:_.jsx(ze,{children:"Not enough participants for chart"})})})]})})}function U0n({globalConfig:e}){const[t,n]=A.useState(!1),[r,i]=A.useState({}),[s,o]=A.useState({}),{storageEngine:a}=Ds(),{user:u}=S_();A.useEffect(()=>{(async()=>{n(!0);const f={},d={},h=async m=>{const g=await Y4(m,e);if(a){if(f[m]=await a.getAllParticipantsDataByStudy(m),g===null)return;if(a instanceof Dc){const y=await a.getModes(m);d[m]=y.analyticsInterfacePubliclyAccessible}}};await(async()=>{const m=e.configsList.map(g=>h(g));try{await Promise.all(m),i(f),o(d)}catch(g){console.error("Error fetching data:",g)}finally{n(!1)}})()})()},[e,a]);const l=e.configsList.map(c=>r[c]&&((s[c]||u.isAdmin)&&!e.configs[c].test?_.jsx(ds.Col,{span:{md:12,xl:6},children:_.jsx(B0n,{studyId:c,allParticipants:r[c]})},`${c}-panel`):null));return _.jsxs(_.Fragment,{children:[_.jsx(k2,{studyIds:e.configsList}),_.jsx(yi.Main,{children:_.jsx(Xc,{fluid:!0,children:_.jsxs(me,{children:[_.jsx(ki,{mb:20,order:4,children:"Your Studies:"}),_.jsxs(ds,{children:[l.length>0?l:_.jsx(Xc,{mt:100,children:_.jsx(ze,{children:"No studies to show. If you believe that this is in error, make sure that you are logged in."})}),_.jsx(Xl,{visible:t})]})]})})})]})}function z0n(){const{user:e,triggerAuth:t}=S_(),{storageEngine:n}=Ds(),[r,i]=A.useState(!1),[s,o]=A.useState([]),[a,u]=A.useState(!1),[l,c]=A.useState(!1),[f,d]=A.useState(!1),[h,p]=A.useState(!1),[m,g]=A.useState(!1),[y,v]=A.useState(""),[b,w]=A.useState(null),E=PCe({initialValues:{email:""},validate:{email:Tft("Invalid email")}});A.useEffect(()=>{(async()=>{if(u(!0),n instanceof Dc){const P=await(n==null?void 0:n.getUserManagementData("authentication"));i(P==null?void 0:P.isEnabled);const $=await(n==null?void 0:n.getUserManagementData("adminUsers"));$&&$.adminUsersList&&o($==null?void 0:$.adminUsersList.map(L=>L.email))}else i(!1);u(!1)})()},[n]);const x=async()=>{if(u(!0),n instanceof Dc){const O=await jUe(n,u);O&&O.email?(w({email:O.email,uid:O.uid}),p(!0)):g(!0)}u(!1)},S=async O=>{u(!0),n instanceof Dc&&O&&(await n.changeAuth(!0),await n.addAdminUser(O),o([O.email]),i(!0),t()),p(!1),u(!1)},C=async()=>{if(u(!0),n instanceof Dc){await n.addAdminUser({email:E.values.email,uid:null});const O=await n.getUserManagementData("adminUsers");o(O==null?void 0:O.adminUsersList.map(P=>P.email))}u(!1),c(!1),E.setValues({email:""})},I=O=>{d(!0),v(O)},k=async()=>{if(u(!0),n instanceof Dc){await n.removeAdminUser(y);const O=await n.getUserManagementData("adminUsers");o(O==null?void 0:O.adminUsersList.map(P=>P.email))}d(!1),u(!1)},R=A.useMemo(()=>n instanceof Dc,[n]);return _.jsxs(_.Fragment,{children:[_.jsx(Xc,{children:_.jsxs(a_,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[_.jsx(ki,{mb:20,order:3,children:"Authentication"}),r?_.jsx(Nt,{children:_.jsx(ze,{children:"Authentication is enabled."})}):_.jsxs(Nt,{justify:"space-between",children:[_.jsx(me,{children:_.jsx(ze,{children:"Authentication is currently disabled."})}),_.jsx(Ii,{label:"You can only enable auth when using Firebase",disabled:R,children:_.jsx(dn,{onClick:O=>R?x():O.preventDefault(),color:"green","data-disabled":R?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?_.jsxs(Nt,{mt:40,direction:"column",children:[_.jsxs(Nt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[_.jsx(ki,{order:6,children:"Enabled Users"}),_.jsx(yX,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(O=>{var P;return _.jsxs(Nt,{justify:"space-between",mb:10,children:[_.jsx(ze,{children:O}),O===((P=e.user)==null?void 0:P.email)?_.jsx(ze,{color:"blue",size:"xs",children:"You"}):_.jsx(s_,{variant:"subtle",onClick:()=>I(O),children:_.jsx(RSe,{color:"red"})})]},O)}):null]}):null]})}),_.jsx(es,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:_.jsxs(me,{component:"form",onSubmit:E.onSubmit(()=>C()),children:[_.jsx(m0,{leftSection:_.jsx(wtt,{}),placeholder:"User Gmail Account",...E.getInputProps("email")}),_.jsxs(Nt,{mt:30,justify:"right",children:[_.jsx(dn,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),_.jsx(dn,{type:"submit",children:"Save"})]})]})}),_.jsxs(es,{opened:f,size:"large",onClose:()=>d(!1),title:_.jsxs(ze,{fw:700,children:["Remove",y,"?"]}),children:[_.jsxs(ze,{mt:40,children:["Are you sure you want to remove",_.jsx("b",{children:y})," ","as an administrator?"]}),_.jsxs(Nt,{mt:40,justify:"right",children:[_.jsx(dn,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),_.jsx(dn,{onClick:()=>k(),children:"Yes, I'm sure."})]})]}),_.jsxs(es,{opened:h,size:"md",onClose:()=>p(!1),title:_.jsx(ze,{fw:700,children:"Enable Authentication?"}),children:[_.jsxs(ze,{mt:40,children:["User"," ",_.jsx("b",{children:b==null?void 0:b.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),_.jsxs(Nt,{mt:40,justify:"right",children:[_.jsx(dn,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),_.jsx(dn,{onClick:()=>S(b),children:"Yes, I'm sure."})]})]}),_.jsxs(es,{opened:m,size:"md",onClose:()=>g(!1),title:_.jsx(ze,{fw:700,children:"An Error Occurred."}),children:[_.jsxs(ze,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",_.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),_.jsx(Nt,{mt:40,justify:"right",children:_.jsx(dn,{mr:5,onClick:()=>g(!1),children:"Okay"})})]}),_.jsx(Xl,{visible:a})]})}class V0n extends _Le{constructor(){super("localStorage");wu(this,"studyDatabase");wu(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await Dw.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await tL(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s,o){var f;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await tL(JSON.stringify(i)),c={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1};return u.dataCollectionEnabled&&await((f=this.studyDatabase)==null?void 0:f.setItem(this.currentParticipantId,c)),c}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await Dw.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=eL();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),i}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=Dw.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=eL();this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(i.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,i)}async setMode(n,r,i){this.studyDatabase=await Dw.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await Dw.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}_verifyStudyDatabase(n){return n!==void 0}}async function H0n(){let e,t=!1;{const n=new Dc;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new V0n;await n.connect(),e=n}return e}function bw({title:e}){const t=nv();return A.useEffect(()=>{document.title=e},[t,e]),null}async function q0n(){const t=await(await fetch(`${Qu}global.json`)).text();return EFt(t)}function W0n(){const[e,t]=A.useState(null),[n,r]=A.useState({});A.useEffect(()=>{async function a(){e&&r(await YFt(e))}a()},[e]),A.useEffect(()=>{e||q0n().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=Ds();A.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await H0n();s(u)}a()},[s,i]);const o=async a=>i instanceof Dc?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?_.jsx(ctt,{basename:Qu,children:_.jsx(Gzt,{children:_.jsx(gtt,{children:_.jsx(yi,{padding:"md",header:{height:70},children:_.jsxs(ott,{children:[_.jsx(Up,{path:"/",element:_.jsxs(_.Fragment,{children:[_.jsx(bw,{title:"ReVISit | Home"}),_.jsx(k2,{studyIds:e.configsList}),_.jsx(Nlt,{globalConfig:e,studyConfigs:n})]})}),_.jsx(Up,{path:"/:studyId/*",element:_.jsxs(_.Fragment,{children:[_.jsx(bw,{title:"ReVISit | Study"}),_.jsx(KFt,{globalConfig:e})]})}),_.jsx(Up,{path:"/analysis/dashboard",element:_.jsxs(_.Fragment,{children:[_.jsx(bw,{title:"ReVISit | Analysis"}),_.jsx(U0n,{globalConfig:e})]})}),_.jsx(Up,{path:"/analysis",element:_.jsx(mq,{to:"/analysis/dashboard"})}),_.jsx(Up,{path:"/analysis/stats/:studyId/:tab/:trialId?",element:_.jsxs(_.Fragment,{children:[_.jsx(bw,{title:"ReVISit | Analysis"}),_.jsx(sbe,{paramToCheck:"studyId",paramCallback:o,children:_.jsx(Ugn,{globalConfig:e})})]})}),_.jsx(Up,{path:"/analysis/stats/:studyId",element:_.jsx(mq,{to:"./table",replace:!0})}),_.jsx(Up,{path:"/settings",element:_.jsxs(sbe,{children:[_.jsx(bw,{title:"ReVISit | Settings"}),_.jsx(k2,{studyIds:e.configsList}),_.jsx(yi.Main,{children:_.jsx(z0n,{})})]})}),_.jsx(Up,{path:"/login",element:_.jsxs(_.Fragment,{children:[_.jsx(bw,{title:"ReVISit | Login"}),_.jsx(k2,{studyIds:e.configsList}),_.jsx(yi.Main,{children:_.jsx(zgn,{})})]})})]})})})})}):null}k7.createRoot(document.getElementById("root")).render(_.jsx(Pt.StrictMode,{children:_.jsx(met,{children:_.jsxs(Hwe,{children:[_.jsx(mg,{}),_.jsx(W0n,{})]})})}))});export default G0n();
